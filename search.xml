<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>VINS-Mono_5-åç«¯éçº¿æ€§ä¼˜åŒ–_è§†è§‰çº¦æŸ</title>
    <url>/posts/1b2b3846.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>VINSæ˜¯ç”±é¦™æ¸¯ç§‘æŠ€å¤§å­¦ç§¦é€šç­‰äººï¼Œäº2018å¹´æå‡ºçš„ä¸€ç§å¼ºå¤§ä¸”é€šç”¨çš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨ï¼Œæ˜¯åˆå­¦è€…æ¥è§¦VIO æ¯”è¾ƒå¥½çš„å¼€æºå­¦ä¹ èµ„æ–™ï¼Œä½œè€…çš„è®ºæ–‡æ¡ç†æ¸…æ™°ï¼Œåˆ†ä¸ºäº”ä¸ªä¸»è¦éƒ¨åˆ†å¯¹è¯¥ç³»ç»Ÿå±•å¼€æè¿°ï¼šæµ‹é‡é¢„å¤„ç†ã€åˆå§‹åŒ–ã€åç«¯éçº¿æ€§ä¼˜åŒ–ã€é—­ç¯æ£€æµ‹ã€é—­ç¯ä¼˜åŒ–ã€‚<strong>æœ¬èŠ‚ä»‹ç»åç«¯éçº¿æ€§ä¼˜åŒ–ä¸­çš„è§†è§‰çº¦æŸã€‚</strong></p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="â… -çŠ¶æ€å‘é‡ä¸ç›®æ ‡å‡½æ•°"><a href="#â… -çŠ¶æ€å‘é‡ä¸ç›®æ ‡å‡½æ•°" class="headerlink" title="â… .  çŠ¶æ€å‘é‡ä¸ç›®æ ‡å‡½æ•°"></a>â… .  çŠ¶æ€å‘é‡ä¸ç›®æ ‡å‡½æ•°</h1><p>çŠ¶æ€å‘é‡å…±åŒ…æ‹¬æ»‘åŠ¨çª—å£å†…çš„ $n+1$ ä¸ªæ‰€æœ‰ IMU çŠ¶æ€$\mathbf{x}_k,k\in[0,n]$ï¼ˆåŒ…æ‹¬ä½ç½®ã€æœå‘ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦è®¡ $bias$ å’Œé™€èºä»ª $bias$ï¼‰ã€ Camera åˆ° IMU çš„å¤–å‚ $\mathbf{x}^b_c$ã€ $m+1$ ä¸ª 3D ç‚¹çš„é€†æ·±åº¦$\lambda_l,l\in[0,m]$ï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{X}&=[\mathbf{x}_0,\mathbf{x}_1,Â·Â·Â·,\mathbf{x}_n,\mathbf{x}^b_c,\lambda_0,\lambda_1,Â·Â·Â·,\lambda_m]\\
\mathbf{x}_k&=[\mathbf{p}^w_{b_k},\mathbf{v}^w_{b_k},\mathbf{q}^w_{b_k},\mathbf{b}_a,\mathbf{b}_g],k\in[0,n]\\
\mathbf{x}^b_c&=[\mathbf{p}^b_c,\mathbf{q}^b_c]
\end{align*}\tag{1}</script><p> $n$ æ˜¯å…³é”®å¸§çš„æ€»æ•°ï¼Œ$m$ æ˜¯æ»‘åŠ¨çª—å£ä¸­çš„ç‰¹å¾æ€»æ•°ã€‚ $Î»_l$ æ˜¯ç¬¬ $l$ ä¸ªç‰¹å¾ä¸å…¶ç¬¬ä¸€æ¬¡è§‚å¯Ÿçš„é€†æ·±åº¦ã€‚</p>
<p>ä½¿ç”¨ BA å…¬å¼ï¼Œæˆ‘ä»¬æœ€å°åŒ–æ‰€æœ‰æµ‹é‡æ®‹å·®çš„å…ˆéªŒå’Œé©¬æ°è·ç¦»ä¹‹å’Œï¼Œä»¥è·å¾—<strong>æœ€å¤§åéªŒä¼°è®¡</strong>ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\underset{\mathcal{X} }{\min}
\left\{
\underbrace
{\parallel \mathbf{r}_p-\mathbf{H}_p\mathcal{X} \parallel^2}_{è¾¹ç¼˜åŒ–çš„å…ˆéªŒä¿¡æ¯}
+\underbrace
{\sum_{k\in\mathcal{B} }\parallel\mathbf{r}_{\mathcal{B} }(\hat{\mathbf{z} }^{b_k}_{b_{k+1} },\mathcal{X})  \parallel^2_{\mathbf{P}^{b_k}_{b_{k+1} } } }_{IMU æµ‹é‡æ®‹å·®}
+\underbrace
{\sum_{(l,j)\in\mathcal{C} }\rho(\parallel\mathbf{r}_\mathcal{C}(\hat{\mathbf{z} }^{c_j}_{l},\mathcal{X}) \parallel^2_{\mathbf{P}^{c_j}_l })}_{è§†è§‰çš„é‡æŠ•å½±æ®‹
å·®}
\right\}\tag{2}</script><p>å…¶ä¸­ $\mathbf{r}_{\mathcal{B} }(\hat{\mathbf{z} }^{b_k}_{b_{k+1} },\mathcal{X})$ å’Œ $\mathbf{r}_\mathcal{C}(\hat{\mathbf{z} }^{c_j}_{l},\mathcal{X}) $ åˆ†åˆ«æ˜¯ IMU å’Œè§†è§‰æµ‹é‡çš„æ®‹å·®ã€‚ $\mathcal{B}$ æ˜¯æ‰€æœ‰ IMU æµ‹é‡å€¼çš„é›†åˆï¼Œ$\mathcal{C}$  æ˜¯åœ¨å½“å‰æ»‘åŠ¨çª—å£ä¸­è‡³å°‘è§‚å¯Ÿåˆ°ä¸¤æ¬¡çš„ç‰¹å¾é›†åˆã€‚ $\{\mathbf{r}_p, \mathbf{H}_p\}$ æ˜¯æ¥è‡ªè¾¹ç¼˜åŒ–çš„å…ˆéªŒä¿¡æ¯ã€‚ ä¸‰ç§æ®‹å·®éƒ½æ˜¯ç”¨é©¬æ°è·ç¦»è¡¨ç¤ºã€‚</p>
<h1 id="â…¡-è§†è§‰çº¦æŸ"><a href="#â…¡-è§†è§‰çº¦æŸ" class="headerlink" title="â…¡. è§†è§‰çº¦æŸ"></a>â…¡. è§†è§‰çº¦æŸ</h1><h2 id="A-æ®‹å·®"><a href="#A-æ®‹å·®" class="headerlink" title="A. æ®‹å·®"></a>A. æ®‹å·®</h2><p>è§†è§‰æ®‹å·®æ˜¯é‡æŠ•å½±è¯¯å·®ï¼Œ å¯¹äºç¬¬ $l$ ä¸ªè·¯æ ‡ç‚¹ $P$ï¼Œå°† $P$ ä»ç¬¬ä¸€æ¬¡è§‚çœ‹åˆ°å®ƒçš„ç¬¬ i ä¸ªç›¸æœºåæ ‡ç³»ï¼Œè½¬æ¢åˆ°å½“å‰çš„ç¬¬ $j $ä¸ªç›¸æœºåæ ‡ç³»ä¸‹çš„åƒç´ åæ ‡ï¼Œå¯å®šä¹‰<strong>è§†è§‰è¯¯å·®é¡¹</strong>ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbf{r}_\mathcal{C}(\hat{\mathbf{z} }^{c_j}_{l},\mathcal{X})&=[\mathbf{b}_1,\mathbf{b}_2]^T\cdot(\hat{\overline{\mathcal{P} } }^{c_j}_l-\frac{\mathcal{P}^{c_j}_l}{\parallel\mathcal{P}^{c_j}_l \parallel^2})\\
\end{align*}\tag{3}</script><p> $\hat{\overline{\mathcal{P} } }^{c_j}_l$ ä¸ºç¬¬ $l$ ä¸ªè·¯æ ‡ç‚¹åœ¨ç¬¬ $j$ ä¸ªç›¸æœºå½’ä¸€åŒ–ç›¸æœºåæ ‡ç³»ä¸­çš„<strong>è§‚å¯Ÿåˆ°çš„åæ ‡</strong>ï¼š  </p>
<script type="math/tex; mode=display">
\hat{\overline{\mathcal{P} } }^{c_j}_l=\pi^{-1}_c
\left(\begin{bmatrix}\hat{u}^{c_j}_l\\\hat{v}^{c_j}_l \end{bmatrix}\right)\tag{4}</script><p>$\mathcal{P}^{c_j}_l$ æ˜¯ä¼°è®¡ç¬¬ $i$ ä¸ªå›¾åƒä¸­å‘ç”Ÿçš„ç¬¬ $l$ä¸ªç‰¹å¾çš„ç¬¬ä¸€æ¬¡è§‚å¯Ÿï¼Œ<strong>è½¬æ¢åˆ°</strong>ç¬¬ $j$ ä¸ªç›¸æœºå½’ä¸€åŒ–ç›¸æœºåæ ‡ç³»ä¸­çš„<strong>ç†è®ºçš„åæ ‡</strong>:  </p>
<script type="math/tex; mode=display">
\mathcal{P}^{c_j}_l =\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}\tag{5}</script><p>å…¶ä¸­ï¼Œ $[\hat{u}^{c_i}_l,\hat{v}^{c_i}_l]$ æ˜¯ç¬¬ $i$ ä¸ªå›¾åƒä¸­å‘ç”Ÿçš„ç¬¬ $l$ä¸ªç‰¹å¾çš„ç¬¬ä¸€æ¬¡è§‚å¯Ÿã€‚ $[\hat{u}^{c_j}_l,\hat{v}^{c_j}_l]$ æ˜¯å¯¹ç¬¬ $j$ ä¸ªå›¾åƒä¸­ç›¸åŒç‰¹å¾çš„è§‚å¯Ÿã€‚ $\pi^{-1}_c$ æ˜¯åæŠ•å½±å‡½æ•°ï¼Œå®ƒä½¿ç”¨ç›¸æœºå†…åœ¨å‚æ•°å°†åƒç´ ä½ç½®è½¬æ¢ä¸ºå•ä½å‘é‡ã€‚</p>
<script type="math/tex; mode=display">
\overline{\mathcal{P} }^{c_i}_l=
\pi^{-1}_c
\left(\begin{bmatrix}\hat{u}^{c_i}_l\\\hat{v}^{c_i}_l \end{bmatrix}
\right)\tag{6}</script><p>ç”±äºè§†è§‰æ®‹å·®çš„è‡ªç”±åº¦ä¸º $2$ï¼Œæˆ‘ä»¬å°†æ®‹å·®å‘é‡æŠ•å½±åˆ°åˆ‡å¹³é¢ä¸Šã€‚  $\mathbf{b}_1$ å’Œ $\mathbf{b}_2$  æ˜¯ä¸¤ä¸ªä»»æ„é€‰æ‹©çš„<strong>æ­£äº¤åŸº</strong>ï¼Œå®ƒä»¬è·¨è¶Š $\hat{\overline{\mathcal{P} } }^{c_j}_l$ çš„åˆ‡å¹³é¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚åœ¨ $(2)$ ä¸­ä½¿ç”¨çš„æ–¹å·® $\mathbf{P}^{c_j}_l$ ä¹Ÿä»åƒç´ åæ ‡ä¼ æ’­åˆ°å•ä½çƒä½“ä¸Š.</p>
<p><img src="/images/VINS-Mono-5-åç«¯éçº¿æ€§ä¼˜åŒ–-è§†è§‰çº¦æŸ/image-20220520195143150.png" alt="image-20220520195143150" style="zoom:50%;" /></p>
<blockquote>
<p>å•ä½çƒé¢ä¸Šçš„è§†è§‰æ®‹å·®å›¾ã€‚ $\hat{\overline{\mathcal{P} } }^{c_j}_l$ æ˜¯åœ¨ç¬¬ $j$ å¸§ä¸­è§‚å¯Ÿç¬¬ $l$ ä¸ªç‰¹å¾çš„å•ä½å‘é‡ã€‚$\mathcal{P}^{c_j}_l$  æ˜¯é€šè¿‡å°†å…¶åœ¨ç¬¬ $i$ å¸§ä¸­çš„ç¬¬ä¸€ä¸ªè§‚å¯Ÿå€¼è½¬æ¢ä¸ºç¬¬ $j$ å¸§æ¥é¢„æµ‹çš„å•ä½çƒä½“ä¸Šçš„ç‰¹å¾æµ‹é‡ã€‚æ®‹å·®å®šä¹‰åœ¨  $\hat{\overline{\mathcal{P} } }^{c_j}_l$  çš„åˆ‡å¹³é¢ä¸Š</p>
</blockquote>
<p>è¿™é‡Œç»™å‡ºå…¬å¼ $(5)$ çš„æ¨å¯¼ï¼š</p>
<p><img src="/images/VINS-Mono-5-åç«¯éçº¿æ€§ä¼˜åŒ–-è§†è§‰çº¦æŸ/image-20220520195055396.png" alt="image-20220520195055396"></p>
<p>è®¾ç‰¹å¾ $l$ ç‚¹ åœ¨ç¬¬ $i$ å¸§è¢«è§‚æµ‹åˆ°çš„åƒç´ åæ ‡ç³»ä¸‹çš„åæ ‡ä¸ºï¼š $\mathcal{P}_{uv_i}$ ï¼Œåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„åæ ‡ä¸ºï¼š$\mathcal{P}^w_l$ï¼Œåˆ™æ ¹æ®å˜æ¢çŸ©é˜µå¯å¾—ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{P}_{uv_i}&=\lambda_l\pi_c\left({\mathbf{T}^b_c}^{-1}{\mathbf{T}^w_{b_i} }^{-1}\mathcal{P}^w_l  \right)\\
\Leftrightarrow 
\mathcal{P}^w_l&=\mathbf{T}^w_{b_i}\mathbf{T}^b_c\frac{1}{\lambda_l}{\pi_c}^{-1}(\mathcal{P}_{uv_i})\\
&=\mathbf{T}^w_{b_i}\mathbf{T}^b_c\frac{1}{\lambda_l}\overline{\mathcal{P} }^{c_i}_l\\
\mathcal{P}^w_l&=
\begin{bmatrix}\mathbf{R}^w_{b_i}&\mathbf{p}^w_{b_i}\\0&1\end{bmatrix}
\begin{bmatrix}\mathbf{R}^b_c&\mathbf{p}^b_c\\0&1\end{bmatrix}\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l\\
&=\begin{bmatrix}
\mathbf{R}^w_{b_i}\mathbf{R}^b_c&\mathbf{R}^w_{b_i}\mathbf{p}^b_c+\mathbf{p}^w_{b_i}\\
0&1\end{bmatrix}\frac{1}{\lambda_l}\overline{\mathcal{P} }^{c_i}_l\\
&=\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}
\end{align*}\tag{IIA-1}</script><p> è®¾ç‰¹å¾ $l$ ç‚¹ åœ¨ç¬¬ $j$ å¸§è¢«è§‚æµ‹åˆ°çš„ç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ä¸ºï¼š $\mathcal{P}^{c_j}_{l}$ </p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{P}^{c_j}_l&={\mathbf{T}^b_c}^{-1}{\mathbf{T}^w_{b_j} }^{-1}\mathcal{P}^w_l \\
\Leftrightarrow 
\mathcal{P}^w_l&=\mathbf{T}^w_{b_j}\mathbf{T}^b_c\mathcal{P}^{c_j}_l\\
\mathcal{P}^w_l&=\begin{bmatrix}\mathbf{R}^w_{b_j}&\mathbf{p}^w_{b_j}\\0&1\end{bmatrix}
\begin{bmatrix}\mathbf{R}^b_c&\mathbf{p}^b_c\\0&1\end{bmatrix}\mathcal{P}^{c_j}_l\\
&=\begin{bmatrix}
\mathbf{R}^w_{b_j}\mathbf{R}^b_c&\mathbf{R}^w_{b_j}\mathbf{p}^b_c+\mathbf{p}^w_{b_j}\\
0&1\end{bmatrix}\mathcal{P}^{c_j}_l\\
&=\mathbf{R}^{w}_{b_j}
\left(\mathbf{R}^{b}_{c}
\mathcal{P}^{c_j}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_j}
\end{align*}\tag{IIA-2}</script><p>å°† $\mathrm{(IIA-1)}$ å¸¦å…¥ $\mathrm{(IIA-2)}$ ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}=\mathbf{R}^{w}_{b_j}
\left(\mathbf{R}^{b}_{c}
\mathcal{P}^{c_j}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_j}\\
&\Rightarrow
\mathcal{P}^{c_j}_l =\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}
\end{align*}\tag{IIA-3}</script><h2 id="B-ä¼˜åŒ–å˜é‡"><a href="#B-ä¼˜åŒ–å˜é‡" class="headerlink" title="B. ä¼˜åŒ–å˜é‡"></a>B. ä¼˜åŒ–å˜é‡</h2><p>å¾…ä¼˜åŒ–å˜é‡ä¸»è¦æ˜¯ $i$ å’Œ $j$ ä¸¤ä¸ªæ—¶åˆ»ç›¸æœºçš„ä½å§¿ä»¥åŠé€†æ·±åº¦ï¼š</p>
<script type="math/tex; mode=display">
[\mathbf{p}^w_{b_i},\mathbf{q}^w_{b_i}],\ \ \ \ \ 
[\mathbf{p}^w_{b_j},\mathbf{q}^w_{b_j}],\ \ \ \ \ 
[\mathbf{p}^b_{c},\mathbf{q}^b_{c}],\ \ \ \ \ 
\lambda_l\tag{7}</script><h2 id="C-Jacobian"><a href="#C-Jacobian" class="headerlink" title="C. Jacobian"></a>C. Jacobian</h2><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬æ‰€å¾—åˆ°çš„æ®‹å·®æŒ‡çš„æ˜¯ï¼Œå°†ç¬¬ $i$ å¸§å›¾åƒä¸­å‘ç”Ÿçš„ç¬¬ $l$ä¸ªç‰¹å¾çš„ç¬¬ä¸€æ¬¡è§‚å¯Ÿçš„åƒç´ åæ ‡ç³»ï¼ˆè§‚æµ‹å€¼ï¼š$\overline{\mathcal{P} }^{c_i}_l$ï¼‰ï¼Œç»è¿‡åæ ‡å˜æ¢ï¼Œè½¬ç§»åˆ°ç¬¬ $j$ å¸§ç›¸æœºå½’ä¸€åŒ–ç›¸æœºåæ ‡ç³»ä¸­ï¼Œå¾—åˆ° $\mathcal{P}^{c_j}_l$ï¼Œä¸ç¬¬ $l$ ä¸ªè·¯æ ‡ç‚¹åœ¨ç¬¬ $j$ å¸§ç›¸æœºå½’ä¸€åŒ–ç›¸æœºåæ ‡ç³»ä¸­çš„<strong>è§‚å¯Ÿåˆ°çš„åæ ‡</strong>$\hat{\overline{\mathcal{P} } }^{c_j}_l$ åšæ¯”è¾ƒï¼Œç†è®ºä¸Šï¼Œå®ƒä»¬æ˜¯ç›¸ç­‰çš„ï¼Œä½†æ˜¯ç”±äºå­˜åœ¨å™ªå£°ï¼Œæ•…è€Œå­˜åœ¨åå·®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯ä¼˜åŒ–ä½å§¿æ¥æœ€å°åŒ–æ®‹å·®ã€‚</p>
<p>æ ¹æ®è§†è§‰æ®‹å·®å…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ç›¸å¯¹äºå„ä¼˜åŒ–å˜é‡çš„ Jacobianï¼š</p>
<script type="math/tex; mode=display">
\mathbf{J}[0]^{3\times7}=
\left[
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^w_{b_i} },
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^w_{b_i} }
\right]
=
\begin{bmatrix}
\mathbf{R}^c_b\mathbf{R}^{b_j}_w
&
-\mathbf{R}^c_b\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}\
\left(\mathbf{R}^{b}_{c}\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l}+\mathbf{p}^{b}_{c}
\right)^{\land}
\end{bmatrix}\tag{J0}</script><hr>
<ul>
<li><strong>æ¨å¯¼ $\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^w_{b_i} }$:</strong></li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^w_{b_i} }
&=\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^w_{b_i} }\\
&=\frac{\partial (\mathcal{P}^{c_j}_l- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{p}^w_{b_i} 
}\\
&=\frac{\partial (\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{p}^w_{b_i} 
}\\
&=\mathbf{R}^c_b\mathbf{R}^{b_j}_w
\end{align*}\tag{J0-1}</script><ul>
<li><strong>æ¨å¯¼ $\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^w_{b_i} }$:</strong></li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^w_{b_i} }
&=\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^w_{b_i} }\\
&=\frac{\partial (\mathcal{P}^{c_j}_l- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{q}^w_{b_i} 
}\\
&=\frac{\partial (\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{q}^w_{b_i} }\\
&=\underset{\delta\theta^w_{b_i}\rightarrow0 }{\lim}
\frac{\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}
}{\delta\theta^w_{b_i} }\\
&=\underset{\delta\theta^w_{b_i}\rightarrow0 }{\lim}
\frac{
\mathbf{R}^c_b
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)
}{\delta\theta^w_{b_i} }\\
&=\underset{\delta\theta^w_{b_i}\rightarrow0 }{\lim}
\frac{
\mathbf{R}^c_b
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}\exp({\delta\theta^w_{b_i} }^{\land})
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)-(Â·Â·Â·)
}{\delta\theta^w_{b_i} }\\
&=\underset{\delta\theta^w_{b_i}\rightarrow0 }{\lim}
\frac{
\mathbf{R}^c_b
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}(I+{\delta\theta^w_{b_i} }^{\land})
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)-(Â·Â·Â·)
}{\delta\theta^w_{b_i} }\\
&=\underset{\delta\theta^w_{b_i}\rightarrow0 }{\lim}
\frac{
\mathbf{R}^c_b
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}{\delta\theta^w_{b_i} }^{\land}
\left[\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)\right]
}{\delta\theta^w_{b_i} }\\
&=-\underset{\delta\theta^w_{b_i}\rightarrow0 }{\lim}
\frac{
\mathbf{R}^c_b
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}
\left[\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)\right]^{\land}\delta\theta^w_{b_i}
}{\delta\theta^w_{b_i} }\\
&=-\mathbf{R}^c_b
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}
\left[\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)\right]^{\land}
\end{align*}\tag{J0-2}</script><hr>
<script type="math/tex; mode=display">
\mathbf{J}[1]^{3\times7}=
\left[
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^w_{b_j} },
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^w_{b_j} }
\right]
=
\begin{bmatrix}
-\mathbf{R}^c_b\mathbf{R}^{b_j}_w
&
\mathbf{R}^c_b
\left\{
\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{\overline{\mathcal{P} }^{c_j}_l}{\lambda_l}+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]
\right\}^{\land}
\end{bmatrix}\tag{J1}</script><hr>
<ul>
<li><strong>æ¨å¯¼ $\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^w_{b_j} }$:</strong></li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^w_{b_j} }
&=\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^w_{b_j} }\\
&=\frac{\partial (\mathcal{P}^{c_j}_l- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{p}^w_{b_j} 
}\\
&=\frac{\partial (\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{p}^w_{b_j} 
}\\
&=-\mathbf{R}^c_b\mathbf{R}^{b_j}_w
\end{align*}\tag{J1-1}</script><ul>
<li><strong>æ¨å¯¼ $\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^w_{b_j} }$:</strong></li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^w_{b_j} }
&=\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^w_{b_j} }\\
&=\frac{\partial (\mathcal{P}^{c_j}_l- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{q}^w_{b_j} 
}\\
&=\frac{\partial (\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{q}^w_{b_j} 
}\\
&=\frac{\partial \mathbf{R}^c_b
\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]
}{\partial\mathbf{q}^w_{b_j} }\\
&=\underset{\delta\theta^w_{b_j}\rightarrow0 }{\lim}
\frac{\ \mathbf{R}^c_b
\left[\mathbf{R}^{b_j}_w\exp({\delta\theta^w_{b_j} }^{\land}) \right]^{-1}
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]
}{\delta\theta^w_{b_j} }\\
&=\underset{\delta\theta^w_{b_j}\rightarrow0 }{\lim}
\frac{ \mathbf{R}^c_b
(-{\delta\theta^w_{b_j} }^{\land}){\mathbf{R}^{b_j}_w }^{-1}
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]
}{\delta\theta^w_{b_j} }\\
&=-\underset{\delta\theta^w_{b_j}\rightarrow0 }{\lim}
\frac{ \mathbf{R}^c_b
({\delta\theta^w_{b_j} })^{\land}\mathbf{R}^w_{b_j}
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]
}{\delta\theta^w_{b_j} }\\
&=\underset{\delta\theta^w_{b_j}\rightarrow0 }{\lim}
\frac{ \mathbf{R}^c_b
\left\{\mathbf{R}^w_{b_j}
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]\right\}^{\land}
({\delta\theta^w_{b_j} })
}{\delta\theta^w_{b_j} }\\
&= \mathbf{R}^c_b
\left\{\mathbf{R}^w_{b_j}
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]\right\}^{\land}
\end{align*}\tag{J1-2}</script><hr>
<script type="math/tex; mode=display">
\begin{align*}
\mathbf{J}[2]^{3\times7}&=
\left[
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^b_c },
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^b_c }
\right]\\
&=\begin{bmatrix}
\mathbf{R}^c_b(\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}-I_{3\times3})
\\
-\mathbf{R}^c_b\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}\
\mathbf{R}^{b}_{c}\left(\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l} \right)^{\and}
+\left(\mathbf{R}^c_b\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}\
\mathbf{R}^{b}_{c}\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l} \right)^{\and}
+\left\{
\mathbf{R}^c_b
\left[
\mathbf{R}^{b_j}_w
\left(
\mathbf{R}^w_{b_i}\mathbf{p}^{b}_{c}+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right)-\mathbf{p}^{b}_{c}
\right]
\right\}^{\land}
\end{bmatrix}^T
\end{align*}\tag{J2}</script><hr>
<ul>
<li><strong>æ¨å¯¼ $\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^b_c }$:</strong></li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^b_c}
&=\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{p}^b_c}\\
&=\frac{\partial (\mathcal{P}^{c_j}_l- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{p}^b_c
}\\
&=\frac{\partial (\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{p}^b_c }\\
&=\frac{\partial\  
\mathbf{R}^c_b
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}
\mathbf{p}^{b}_{c}
-\mathbf{R}^c_b
\mathbf{p}^{b}_{c}
}{\partial\mathbf{p}^b_c }\\
&=\mathbf{R}^c_b(\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}-I_{3\times3})
\end{align*}\tag{J2-1}</script><ul>
<li><strong>æ¨å¯¼ $\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^b_c }$:</strong></li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^b_c }
=&\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\mathbf{q}^b_c }\\
=&\frac{\partial (\mathcal{P}^{c_j}_l- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{q}^b_c 
}\\
=&\frac{\partial (\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\mathbf{q}^b_c }\\
=&\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{ \left[\mathbf{R}^c_b\exp({\delta\theta^b_c}^{\land})\right]^{-1}
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}\exp({\delta\theta^b_c}^{\land})
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}
}{\partial\mathbf{q}^b_c }\\
=&\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{ (I-{\delta\theta^b_c}^{\land})\mathbf{R}^b_c
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}(I+{\delta\theta^b_c}^{\land})
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}
}{\partial\mathbf{q}^b_c }\\
=&\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{\mathbf{R}^b_c
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}({\delta\theta^b_c}^{\land})
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}
}{\partial\mathbf{q}^b_c }\\
&-\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{-{\delta\theta^b_c}^{\land}\mathbf{R}^b_c
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}(I+{\delta\theta^b_c}^{\land})
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}
}{\partial\mathbf{q}^b_c }\\
\approx&\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{\mathbf{R}^b_c
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}({\delta\theta^b_c}^{\land})
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}
}{\partial\mathbf{q}^b_c }\\
&-\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{-{\delta\theta^b_c}^{\land}\mathbf{R}^b_c
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}
}{\partial\mathbf{q}^b_c }\\
=&\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{\mathbf{R}^b_c
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}
\mathbf{R}^{b}_{c}({\delta\theta^b_c}^{\land})
\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l}
}{\partial\mathbf{q}^b_c }
-\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{ 
{\delta\theta^b_c}^{\land}
\left\{\mathbf{R}^b_c
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l}
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\} \right\}
}{\partial\mathbf{q}^b_c }\\
=&\underset{\delta\theta^b_c\rightarrow0 }{\lim}
\frac{\mathbf{R}^b_c
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}
\mathbf{R}^{b}_{c}({\delta\theta^b_c}^{\land})
\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l}
-{\delta\theta^b_c}^{\land}
\left\{\mathbf{R}^b_c
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l}
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\} \right\}
}{\partial\mathbf{q}^b_c }\\
=&-\mathbf{R}^b_c
\mathbf{R}^{b_j}_w
\mathbf{R}^{w}_{b_i}
\mathbf{R}^{b}_{c}
\left[\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l}\right]^{\land}
+\left\{\mathbf{R}^b_c
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l}
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\} \right\}^{\land}\\
=&-\mathbf{R}^c_b\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}\
\mathbf{R}^{b}_{c}\left(\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l} \right)^{\and}
+\left(\mathbf{R}^c_b\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}\
\mathbf{R}^{b}_{c}\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l} \right)^{\and}
+\left\{
\mathbf{R}^c_b
\left[
\mathbf{R}^{b_j}_w
\left(
\mathbf{R}^w_{b_i}\mathbf{p}^{b}_{c}+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right)-\mathbf{p}^{b}_{c}
\right]
\right\}^{\land}
\end{align*}\tag{J2-2}</script><hr>
<script type="math/tex; mode=display">
\mathbf{J}[3]^{3\times1}=
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\lambda_l }
=-\mathbf{R}^c_b\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}\
\mathbf{R}^{b}_{c}\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l^2}\tag{J3}</script><ul>
<li><strong>æ¨å¯¼ $\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\lambda_l }$:</strong></li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\lambda_l}
&=\frac{\partial \mathbf{r}_{\mathcal{C} } }{\partial\lambda_l}\\
&=\frac{\partial (\mathcal{P}^{c_j}_l- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\lambda_l
}\\
&=\frac{\partial (\mathbf{R}^c_b
\left\{\mathbf{R}^{b_j}_w
\left[\mathbf{R}^{w}_{b_i}
\left(\mathbf{R}^{b}_{c}
\frac{1}{\lambda_l}
\overline{\mathcal{P} }^{c_i}_l
+\mathbf{p}^{b}_{c}
\right)+\mathbf{p}^{w}_{b_i}-\mathbf{p}^{w}_{b_j}
\right]-\mathbf{p}^{b}_{c}
\right\}- \hat{\overline{\mathcal{P} } }^{c_j}_l)}{\partial\lambda_l}\\
&=-\mathbf{R}^c_b\mathbf{R}^{b_j}_w\mathbf{R}^w_{b_i}\
\mathbf{R}^{b}_{c}\frac{\overline{\mathcal{P} }^{c_i}_l}{\lambda_l^2}
\end{align*}\tag{J3-1}</script>]]></content>
      <categories>
        <category>VINS</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>VINS</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title>VINS-Mono_4-åç«¯éçº¿æ€§ä¼˜åŒ–_IMUçº¦æŸ</title>
    <url>/posts/70ecd932.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>VINSæ˜¯ç”±é¦™æ¸¯ç§‘æŠ€å¤§å­¦ç§¦é€šç­‰äººï¼Œäº2018å¹´æå‡ºçš„ä¸€ç§å¼ºå¤§ä¸”é€šç”¨çš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨ï¼Œæ˜¯åˆå­¦è€…æ¥è§¦VIO æ¯”è¾ƒå¥½çš„å¼€æºå­¦ä¹ èµ„æ–™ï¼Œä½œè€…çš„è®ºæ–‡æ¡ç†æ¸…æ™°ï¼Œåˆ†ä¸ºäº”ä¸ªä¸»è¦éƒ¨åˆ†å¯¹è¯¥ç³»ç»Ÿå±•å¼€æè¿°ï¼šæµ‹é‡é¢„å¤„ç†ã€åˆå§‹åŒ–ã€åç«¯éçº¿æ€§ä¼˜åŒ–ã€é—­ç¯æ£€æµ‹ã€é—­ç¯ä¼˜åŒ–ã€‚<strong>æœ¬èŠ‚ä»‹ç»åç«¯éçº¿æ€§ä¼˜åŒ–ä¸­çš„IMUçº¦æŸã€‚</strong></p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="â… -çŠ¶æ€å‘é‡ä¸ç›®æ ‡å‡½æ•°"><a href="#â… -çŠ¶æ€å‘é‡ä¸ç›®æ ‡å‡½æ•°" class="headerlink" title="â… .  çŠ¶æ€å‘é‡ä¸ç›®æ ‡å‡½æ•°"></a>â… .  çŠ¶æ€å‘é‡ä¸ç›®æ ‡å‡½æ•°</h1><p>çŠ¶æ€å‘é‡å…±åŒ…æ‹¬æ»‘åŠ¨çª—å£å†…çš„ $n+1$ ä¸ªæ‰€æœ‰ IMU çŠ¶æ€$\mathbf{x}_k,k\in[0,n]$ï¼ˆåŒ…æ‹¬ä½ç½®ã€æœå‘ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦è®¡ $bias$ å’Œé™€èºä»ª $bias$ï¼‰ã€ Camera åˆ° IMU çš„å¤–å‚ $\mathbf{x}^b_c$ã€ $m+1$ ä¸ª 3D ç‚¹çš„é€†æ·±åº¦$\lambda_l,l\in[0,m]$ï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{X}&=[\mathbf{x}_0,\mathbf{x}_1,Â·Â·Â·,\mathbf{x}_n,\mathbf{x}^b_c,\lambda_0,\lambda_1,Â·Â·Â·,\lambda_m]\\
\mathbf{x}_k&=[\mathbf{p}^w_{b_k},\mathbf{v}^w_{b_k},\mathbf{q}^w_{b_k},\mathbf{b}_a,\mathbf{b}_g],k\in[0,n]\\
\mathbf{x}^b_c&=[\mathbf{p}^b_c,\mathbf{q}^b_c]
\end{align*}\tag{1}</script><p> $n$ æ˜¯å…³é”®å¸§çš„æ€»æ•°ï¼Œ$m$ æ˜¯æ»‘åŠ¨çª—å£ä¸­çš„ç‰¹å¾æ€»æ•°ã€‚ $Î»_l$ æ˜¯ç¬¬ $l$ ä¸ªç‰¹å¾ä¸å…¶ç¬¬ä¸€æ¬¡è§‚å¯Ÿçš„é€†æ·±åº¦ã€‚</p>
<p>ä½¿ç”¨ BA å…¬å¼ï¼Œæˆ‘ä»¬æœ€å°åŒ–æ‰€æœ‰æµ‹é‡æ®‹å·®çš„å…ˆéªŒå’Œé©¬æ°è·ç¦»ä¹‹å’Œï¼Œä»¥è·å¾—<strong>æœ€å¤§åéªŒä¼°è®¡</strong>ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\underset{\mathcal{X} }{\min}
\left\{
\underbrace
{\parallel \mathbf{r}_p-\mathbf{H}_p\mathcal{X} \parallel^2}_{è¾¹ç¼˜åŒ–çš„å…ˆéªŒä¿¡æ¯}
+\underbrace
{\sum_{k\in\mathcal{B} }\parallel\mathbf{r}_{\mathcal{B} }(\hat{\mathbf{z} }^{b_k}_{b_{k+1} },\mathcal{X})  \parallel^2_{\mathbf{P}^{b_k}_{b_{k+1} } } }_{IMU æµ‹é‡æ®‹å·®}
+\underbrace
{\sum_{(l,j)\in\mathcal{C} }\rho(\parallel\mathbf{r}_\mathcal{C}(\hat{\mathbf{z} }^{c_j}_{l},\mathcal{X}) \parallel^2_{\mathbf{P}^{c_j}_l })}_{è§†è§‰çš„é‡æŠ•å½±æ®‹
å·®}
\right\}\tag{2}</script><p>å…¶ä¸­ $\mathbf{r}_{\mathcal{B} }(\hat{\mathbf{z} }^{b_k}_{b_{k+1} },\mathcal{X})$ å’Œ $\mathbf{r}_\mathcal{C}(\hat{\mathbf{z} }^{c_j}_{l},\mathcal{X}) $ åˆ†åˆ«æ˜¯ IMU å’Œè§†è§‰æµ‹é‡çš„æ®‹å·®ã€‚ $\mathcal{B}$ æ˜¯æ‰€æœ‰ IMU æµ‹é‡å€¼çš„é›†åˆï¼Œ$\mathcal{C}$  æ˜¯åœ¨å½“å‰æ»‘åŠ¨çª—å£ä¸­è‡³å°‘è§‚å¯Ÿåˆ°ä¸¤æ¬¡çš„ç‰¹å¾é›†åˆã€‚ $\{\mathbf{r}_p, \mathbf{H}_p\}$ æ˜¯æ¥è‡ªè¾¹ç¼˜åŒ–çš„å…ˆéªŒä¿¡æ¯ã€‚ ä¸‰ç§æ®‹å·®éƒ½æ˜¯ç”¨é©¬æ°è·ç¦»è¡¨ç¤ºã€‚</p>
<h1 id="â…¡-IMU-çº¦æŸ"><a href="#â…¡-IMU-çº¦æŸ" class="headerlink" title="â…¡. IMU çº¦æŸ"></a>â…¡. IMU çº¦æŸ</h1><h2 id="æ®‹å·®"><a href="#æ®‹å·®" class="headerlink" title="æ®‹å·®"></a>æ®‹å·®</h2><p>ä¸¤å¸§ä¹‹é—´çš„ PVQ å’Œ $bias$ çš„å˜åŒ–é‡çš„å·®  :</p>
<script type="math/tex; mode=display">
\mathbf{r}_{\mathcal{B} }(\hat{\mathbf{z} }^{b_k}_{b_{k+1} },\mathcal{X})=
\begin{bmatrix}
\delta {\alpha}^{b_k}_{b_{k+1} }\\
\delta {\theta}^{b_k}_{b_{k+1} }\\
\delta {\beta}^{b_k}_{b_{k+1} }\\
\delta {b}_{a}\\\delta {b}_{g}
\end{bmatrix}=
\begin{align*}
\begin{bmatrix}
\mathbf{R}^{b_k}_w(\mathbf{p}^w_{b_{k+1} }-\mathbf{p}^w_{b_k}+
\frac{1}{2}g^w\Delta t_k^2-\mathbf{v}^w_{b_k}\Delta t_k)-\hat{\alpha}^{b_k}_{b_{k+1} }\\
2[{\mathbf{q}^w_{b_k}}^{-1}\otimes\mathbf{q}^w_{b_{k+1} }
\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}]_{xyz}\\
\mathbf{R}^{b_k}_w(\mathbf{v}^w_{b_{k+1} }-\mathbf{v}^w_{b_k}+g^w\Delta t_k)-\hat{\beta}^{b_k}_{b_{k+1} }\\
\mathbf{b}_{ab_{k+1} }-\mathbf{b}_{ab_k}\\
\mathbf{b}_{wb_{k+1} }-\mathbf{b}_{wb_k}\\
\end{bmatrix}
\end{align*}\tag{3}</script><p>å…¶ä¸­å„å¢é‡å…³äº bias çš„ Jacobian å¯ä»å…¬å¼ $(4)$ çš„ å¤§ Jacobian ä¸­çš„ç›¸åº”ä½ç½®è·å¾—ã€‚ ä¸Šé¢ä¸å…¶ä¸­å„å¢é‡å…³äº $bias$ çš„ Jacobian å¯ä»å…¬å¼ $(4)$ çš„å¤§ Jacobian ä¸­çš„ç›¸åº”ä½ç½®è·å¾—ã€‚</p>
<script type="math/tex; mode=display">
{\mathbf{J}_{k+1} }^{15\times15}=\mathbf{F}\mathbf{J}_{k}\tag{4}</script><h2 id="ä¼˜åŒ–å˜é‡"><a href="#ä¼˜åŒ–å˜é‡" class="headerlink" title="ä¼˜åŒ–å˜é‡"></a>ä¼˜åŒ–å˜é‡</h2><p>å¾…ä¼˜åŒ–å˜é‡ä¸»è¦ä¸ºä¸¤ä¸ªæ—¶åˆ»çš„ PVQ ä»¥åŠ $bais$:</p>
<script type="math/tex; mode=display">
\begin{align*}
kæ—¶åˆ»&ï¼š [\mathbf{p}^w_{b_k},\mathbf{q}^w_{b_k}],[\mathbf{v}^w_{b_k},\mathbf{b}_{a_k},\mathbf{b}_{w_k}]\\
k+1æ—¶åˆ»&ï¼š[\mathbf{p}^w_{b_{k+1} },\mathbf{q}^w_{b_{k+1} }],[\mathbf{v}^w_{b_{k+1}  },\mathbf{b}_{a_{k+1} },\mathbf{b}_{w_{k+1} }]\\
\end{align*}</script><h2 id="Jacobian"><a href="#Jacobian" class="headerlink" title="Jacobian"></a>Jacobian</h2><p>è®¡ç®— Jacobian æ—¶ï¼Œæ®‹å·®å¯¹åº”çš„æ±‚åå¯¼å¯¹è±¡ä¸ºä¸Šé¢çš„ä¼˜åŒ–å˜é‡ï¼Œä½†æ˜¯è®¡ç®—æ—¶é‡‡ç”¨æ‰°åŠ¨æ–¹å¼è®¡ç®—ï¼Œå³æ‰°åŠ¨ä¸º ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
kæ—¶åˆ»&ï¼š [\delta\mathbf{p}^w_{b_k},\delta\theta^w_{b_k}],[\delta\mathbf{v}^w_{b_k},\delta\mathbf{b}_{a_k},\delta\mathbf{b}_{w_k}]\\
k+1æ—¶åˆ»&ï¼š[\delta\mathbf{p}^w_{b_{k+1} },\delta\theta^w_{b_{k+1} }],[\delta\mathbf{v}^w_{b_{k+1}  },\delta\mathbf{b}_{a_{k+1} },\delta\mathbf{b}_{w_{k+1} }]\\
\end{align*}</script><script type="math/tex; mode=display">
\mathbf{J}[0]^{15\times7}=
[\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{p}^w_{b_k} }
,\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{q}^w_{b_k} }]
=\begin{bmatrix}
-\mathbf{R}^{b_k}_w&
\left[\mathbf{R}^{b_k}_w\left(\mathbf{p}^w_{b_{k+1} }-\mathbf{p}^w_{b_k}-\mathbf{v}^w_{b_k}\Delta t_k+
\frac{1}{2}g^w\Delta t_k^2\right) \right]^{\land}\\
0&-\mathcal{R}
\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} } \right]_{3\times3}
\mathcal{L}
\left[\hat{\gamma}^{b_k}_{b_{k+1} }\right]_{3\times3}\\
0&\left[\mathbf{R}^{b_k}_w(\mathbf{v}^w_{b_{k+1} }-\mathbf{v}^w_{b_k}+g^w\Delta t_k)\right]^{\land}\\
0&0\\
0&0\\
\end{bmatrix}\tag{J0}</script><hr>
<ul>
<li><strong>æ¨å¯¼ $\mathbf{J}[0]$</strong></li>
</ul>
<p>å®šä¹‰ï¼š$\mathbf{J}[0]_{[i,j]}$ è¡¨ç¤ºçŸ©é˜µ $\mathbf{J}[0]$ çš„ ç¬¬ $i$  è¡Œ ç¬¬ $j$ åˆ—ï¼›</p>
<p>é¦–å…ˆæ˜¯ $\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{p}^w_{b_k} }$ï¼Œæ˜¾ç„¶ï¼Œç”±å…¬å¼ $(3)$ï¼Œå¯¹äº $\mathbf{r}_{\mathcal{B} } $ è€Œè¨€ï¼Œåªæœ‰ $\delta {\alpha}^{b_k}_{b_{k+1} }$ å¯¹ $\mathbf{p}^w_{b_k}$ æ±‚åå¯¼æ‰æœ‰å€¼ï¼Œå…¶ä»–ä¸º0ï¼Œè¿™å°±ç»„æˆ $(J0)$ é‡ŒçŸ©é˜µçš„ç¬¬ä¸€åˆ—ï¼›</p>
<p>å¯¹äºçŸ©é˜µçš„ $\mathbf{J}[0]_{[2,1]}$ å’Œ  $\mathbf{J}[0]_{[2,3]}$ï¼Œå¯ä»¥ä½¿ç”¨æ—‹è½¬çŸ©é˜µçš„å·¦ä¹˜æ‰°åŠ¨æ¨¡å‹æ¥æ±‚ï¼š</p>
<p>è¿™é‡Œä¸ºäº†ä¹¦å†™æ–¹ä¾¿ï¼Œä»¤ $\mathcal{P}^w=\mathbf{p}^w_{b_{k+1} }-\mathbf{p}^w_{b_k}+<br>\frac{1}{2}g^w\Delta t_k^2-\mathbf{v}^w_{b_k}\Delta t_k$</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \delta {\alpha}^{b_k}_{b_{k+1} } }{\partial \mathbf{p}^w_{b_k} }
&=\frac{\partial 
\left[\mathbf{R}^{b_k}_w\mathcal{P}^w-\hat{\alpha}^{b_k}_{b_{k+1} }\right]}{\partial \mathbf{p}^w_{b_k} }\\
&=\underset{\varphi\rightarrow0}{\lim}
\frac{(\mathbf{R}^{b_k}_w\exp(\varphi^{\land}))^{-1}\mathcal{P}^w }{\delta\varphi}\\
&\approx\underset{\varphi\rightarrow0}{\lim}
\frac{(I-\varphi^{\land})\exp(\phi^{\land})\mathcal{P}^w-\exp(\phi^{\land})\mathcal{P} }{\delta\varphi}\\
&=\underset{\varphi\rightarrow0}{\lim}
-\frac{\varphi^{\land}\mathbf{R}^{b_k}_w\mathcal{P}^w }{\delta\varphi}\\
&=\underset{\varphi\rightarrow0}{\lim}
\frac{[\mathbf{R}^{b_k}_w\mathcal{P}^w]^{\land}\varphi }{\delta\varphi}\\
&=[\mathbf{R}^{b_k}_w\mathcal{P}^w]^{\land}
\end{align*}\tag{J0-1}</script><p>å› æ­¤ï¼Œå¯¹äº$\mathbf{J}[0]_{[2,1]}$ å’Œ  $\mathbf{J}[0]_{[2,3]}$ï¼Œä»–ä»¬ä»…ä»…æ˜¯ $\mathcal{P}^w$ ä¸åŒï¼Œæ¨å¯¼è¿‡ç¨‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>å…³é”®æ˜¯å¯¹äº$\mathbf{J}[0]_{[2,2]}$  çš„æ¨å¯¼ï¼Œæ˜¯æ¯”è¾ƒå…³é”®çš„ï¼Œå¯¹åº”çš„é›…å¯æ¯”ä¸º $\frac{\partial \delta {\theta}^{b_k}_{b_{k+1} } }{\partial \mathbf{q}^w_{b_k} }$ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \delta {\theta}^{b_k}_{b_{k+1} } }{\partial \mathbf{q}^w_{b_k} }
&=\frac{\partial 2[{\mathbf{q}^w_{b_k}}^{-1}\otimes\mathbf{q}^w_{b_{k+1} }
\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}]_{xyz} }{\partial \mathbf{q}^w_{b_k} }\\
&=2\underset{\delta {\theta}^{b_k}_{b_{k+1} }\rightarrow0}{\lim}
\frac{
\left(\mathbf{q}_{b_k}^w\otimes
\begin{bmatrix}1\\\frac{\delta\theta^{w}_{b_k} }{2} \end{bmatrix} \right)^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }
\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}
-\left(\mathbf{q}_{b_k}^w\otimes
\begin{bmatrix}1\\0\end{bmatrix} \right)^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }
\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}
}{\delta {\theta}^{w}_{b_k} }\\
&=2\underset{\delta {\theta}^{b_k}_{b_{k+1} }\rightarrow0}{\lim}
\frac{
\begin{bmatrix}1\\-\frac{\delta\theta^{w}_{b_k} }{2} \end{bmatrix}
\otimes{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}
-\begin{bmatrix}1\\0 \end{bmatrix}\otimes
{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}
}{\delta {\theta}^{w}_{b_k} }\\
&=2\underset{\delta {\theta}^{b_k}_{b_{k+1} }\rightarrow0}{\lim}
\frac{
\left(
\begin{bmatrix}1\\-\frac{\delta\theta^{w}_{b_k} }{2} \end{bmatrix}
-\begin{bmatrix}1\\0 \end{bmatrix}
\right)
\otimes
{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}
}{\delta {\theta}^{w}_{b_k} }\\
&=\underset{\delta {\theta}^{b_k}_{b_{k+1} }\rightarrow0}{\lim}
\frac{
\begin{bmatrix}0\\-\delta\theta^{w}_{b_k} \end{bmatrix}
\otimes
{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}
}{\delta {\theta}^{w}_{b_k} }\\
&=\underset{\delta {\theta}^{b_k}_{b_{k+1} }\rightarrow0}{\lim}
\frac{
\mathcal{R}\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} } \right]
\mathcal{R}\left[(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1} \right]
\otimes\begin{bmatrix}0\\-\delta\theta^{w}_{b_k} \end{bmatrix}
}{\delta {\theta}^{w}_{b_k} }\\
&=-\mathcal{R}\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} } \right]\mathcal{R}\left[(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1} \right]\\
\end{align*}\tag{J0-2}</script><p>å¯¹äºå››å…ƒæ•°çš„å·¦å³ä¹˜ï¼Œåœ¨ç¬¬äºŒèŠ‚çš„$\mathrm{(IA-3)}$ æåˆ°è¿‡ï¼Œè¿™é‡Œå†æ¬¡ä½œå±•ç¤ºï¼š</p>
<p>æˆ‘ä»¬è®¾å››å…ƒæ•° $\mathbf{q}=[x,y,z,s]$ä¸º $\mathbf{q}=[w,s]$ï¼Œåˆ™ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{R}(\mathbf{q}_a)&=\Omega(w)+sI_{4\times4}
=\begin{bmatrix}-w^{\land}&w\\-w^T&0\end{bmatrix}+sI_{4\times4}\\
\mathcal{L}(\mathbf{q}_a)&=\Psi(w)+sI_{4\times4}
=\begin{bmatrix}w^{\land}&w\\-w^T&0\end{bmatrix}+sI_{4\times4}
\end{align*}\tag{5}</script><p>åˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{R}(\mathbf{q}^{-1})=\Omega(-w)+sI_{4\times4}
&=\begin{bmatrix}w^{\land}&-w\\w^T&0\end{bmatrix}+sI_{4\times4}\\
\mathcal{L}(\mathbf{q}^{-1})=\Omega(-w)+sI_{4\times4}
&=\begin{bmatrix}-w^{\land}&-w\\w^T&0\end{bmatrix}+sI_{4\times4}\\
\end{align*}
\tag{6}</script><p> å¦‚æœæˆ‘ä»¬åªå–å·¦ä¸Šè§’çš„ $3\times3$ è™šéƒ¨éƒ¨åˆ†ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{R}(\mathbf{q}^{-1})=sI_{3\times3}+w^{\land}=\mathcal{L}(\mathbf{q})_{3\times3}\\
\mathcal{L}(\mathbf{q}^{-1})=sI_{3\times3}-w^{\land}=\mathcal{R}(\mathbf{q})_{3\times3}
\end{align*}
\tag{7}</script><p>æ•…è€Œ $\mathrm{(J0-2)}$ å¯ä»¥æ•´ç†å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \delta {\theta}^{b_k}_{b_{k+1} } }{\partial \mathbf{q}^w_{b_k} }
&=-\mathcal{R}\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} } \right]\mathcal{R}\left[(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1} \right]\\
&=-\mathcal{R}
\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} } \right]_{3\times3}
\mathcal{L}
\left[\hat{\gamma}^{b_k}_{b_{k+1} }\right]_{3\times3}
\end{align*}\tag{J0-3}</script><p><strong>è¯æ¯•ï¼</strong></p>
<hr>
<script type="math/tex; mode=display">
\mathbf{J}[1]^{15\times9}=
[\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{v}^w_{b_k} }
,\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{b}_{a_k} }
,\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{b}_{w_k} }]
=\begin{bmatrix}
-\mathbf{R}^{b_k}_w\Delta t&-\mathbf{J}^{\alpha}_{b_a}&-\mathbf{J}^{\alpha}_{b_w}\\
0&0&-\mathcal{L}\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes\mathbf{q}^w_{b_{k+1} }
\otimes\hat{\gamma}^{b_k}_{b_{k+1} }
\right]_{3\times3}\mathbf{J}^{\gamma}_{b_w}\\
-\mathbf{R}^{b_k}_w&-\mathbf{J}^{\beta}_{b_a}&-\mathbf{J}^{\beta}_{b_w}\\
0&-\mathbf{I}&0\\
0&0&-\mathbf{I}
\end{bmatrix}\tag{J1}</script><hr>
<ul>
<li><strong>æ¨å¯¼ $\mathbf{J}[1]$</strong></li>
</ul>
<p>é¦–å…ˆç¬¬ä¸€åˆ—çš„æ±‚å¯¼éƒ½æ˜¯ç›´æ¥å¯ä»¥çœ‹å‡ºæ¥çš„ï¼Œè¿™é‡Œä¸åšæ¨å¯¼ã€‚</p>
<p>è®ºæ–‡ä¸­ï¼Œ $\alpha^{b_k}_{b_{k+1} },\beta^{b_k}_{b_{k+1} },\gamma^{b_k}_{b_{k+1} }$  å…³äºåå·®çš„ä¸€é˜¶è¿‘ä¼¼å¯ä»¥å†™æˆï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\alpha^{b_k}_{b_{k+1} }&\approx \hat{\alpha}^{b_k}_{b_{k+1} }+\mathbf{J}^{\alpha}_{b_a}\delta b_{a_k}+\mathbf{J}^{\alpha}_{b_w}\delta b_{w_k}
\\
\beta^{b_k}_{b_{k+1} }&\approx \hat{\beta}^{b_k}_{b_{k+1} }+\mathbf{J}^{\beta}_{b_a}\delta b_{a_k}+\mathbf{J}^{\beta}_{b_w}\delta b_{w_k}
\\
\gamma^{b_k}_{b_{k+1} }&\approx \hat{\gamma}^{b_k}_{b_{k+1} }\otimes
\begin{bmatrix}1\\\frac{1}{2}\mathbf{J}^{\gamma}_{b_w}\delta b_{w_k} \end{bmatrix}
\end{align*}\tag{8}</script><p>å…¶ä¸­ $\mathbf{J}^{\alpha}_{b_a}$ å’Œ æ˜¯ $\mathbf{J}^{\alpha}_{b_{k+1} }$ ä¸­çš„å­å—çŸ©é˜µï¼Œå…¶ä½ç½®å¯¹åº”äº $\frac{\delta\alpha^{b_k}_{b_{k+1} } }{\delta b_{a_k} }$ ã€‚ $\mathbf{J}^{\alpha}_{b_w}ã€\mathbf{J}^{\beta}_{b_a}ã€\mathbf{J}^{\beta}_{b_w}ã€\mathbf{J}^{\gamma}_{b_w}$ ä¹Ÿä½¿ç”¨ç›¸åŒçš„å«ä¹‰ã€‚å½“åå·®çš„ä¼°è®¡å‘ç”Ÿè½»å¾®å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ $(8)$ æ¥è¿‘ä¼¼åœ°æ ¡æ­£é¢„ç§¯åˆ†ç»“æœï¼Œè€Œä¸æ˜¯é‡æ–°ä¼ æ’­ã€‚</p>
<p>è¿™é‡Œä¸»è¦å¯¹ $\mathbf{J[1]}_{[2,3]}$ è¿›è¡Œæ¨å¯¼ï¼Œå¯¹åº”çš„é›…å¯æ¯”ä¸º $\frac{\partial \delta\theta^{b_k}_{b_{k+1}} }{\partial\mathbf{q}^{w}_{k+1} }$:</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \delta\theta^{b_k}_{b_{k+1}} }{\partial b_{w_k} }
&=\frac{\partial 2[{\mathbf{q}^{b_k}_w}^{-1}\otimes\mathbf{q}^w_{b_{k+1} }
(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}]_{xyz} }{\partial b_{w_k} }\\
&=2\underset{\delta b_{w_k}\rightarrow0}{\lim}
\frac{
{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes
{\left[
\hat{\gamma}^{b_k}_{b_{k+1} }\otimes
\begin{bmatrix}1\\\frac{1}{2}\mathbf{J}^{\gamma}_{b_w}\delta b_{w_k} \end{bmatrix}
\right]}^{-1}-
{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes
{\left[
\hat{\gamma}^{b_k}_{b_{k+1} }\otimes
\begin{bmatrix}1\\0 \end{bmatrix}
\right]}^{-1}
}{\delta b_{w_k}}\\
&=2\underset{\delta b_{w_k}\rightarrow0}{\lim}
\frac{
{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes
{\begin{bmatrix}0\\-\frac{1}{2}\mathbf{J}^{\gamma}_{b_w}\delta b_{w_k} \end{bmatrix}
}\otimes{\hat{\gamma}^{b_k}_{b_{k+1} } }^{-1}
}{\delta b_{w_k}}\\
&=\underset{\delta b_{w_k}\rightarrow0}{\lim}
\frac{
{\mathbf{q}_{b_k}^w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes
{\begin{bmatrix}0\\-\mathbf{J}^{\gamma}_{b_w}\delta b_{w_k} \end{bmatrix}
}\otimes{\hat{\gamma}^{b_k}_{b_{k+1} } }^{-1}
}{\delta b_{w_k}}\\
&=\underset{\delta b_{w_k}\rightarrow0}{\lim}
\frac{
\mathcal{L}\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes\mathbf{q}^w_{b_{k+1} } \right]\otimes
\mathcal{R}\left[{\hat{\gamma}^{b_k}_{b_{k+1} } }^{-1} \right]\otimes
{\begin{bmatrix}0\\-\mathbf{J}^{\gamma}_{b_w}\delta b_{w_k} \end{bmatrix} }
}{\delta b_{w_k}}\\
&=-\mathcal{L}\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes\mathbf{q}^w_{b_{k+1} } \right]
\mathcal{R}\left[{\hat{\gamma}^{b_k}_{b_{k+1} } }^{-1} \right]\mathbf{J}^{\gamma}_{b_w}\\
&=-\mathcal{L}\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes\mathbf{q}^w_{b_{k+1} } \right]_{3\times3}
\mathcal{L}\left[\hat{\gamma}^{b_k}_{b_{k+1} } \right]_{3\times3}
\mathbf{J}^{\gamma}_{b_w}\\
&=-\mathcal{L}\left[{\mathbf{q}_{b_k}^w}^{-1}\otimes\mathbf{q}^w_{b_{k+1} }
\otimes\hat{\gamma}^{b_k}_{b_{k+1} }
\right]_{3\times3}\mathbf{J}^{\gamma}_{b_w}
\end{align*}\tag{J1-1}</script><p><strong>è¯æ¯•ï¼</strong></p>
<hr>
<script type="math/tex; mode=display">
\mathbf{J}[2]^{15\times7}=
[\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{p}^w_{b_{k+1} } }
,\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{q}^w_{b_{k+1} } }]
=\begin{bmatrix}
\mathbf{R}^{b_k}_w&0\\
0&\mathcal{L}\left[{\mathbf{q}^{b_k}_w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes\hat{\gamma}^{b_k}_{b_{k+1} }\right]_{3\times3}\\
0&0\\
0&0\\
0&0\\
\end{bmatrix}\tag{J2}</script><hr>
<ul>
<li><strong>æ¨å¯¼ $\mathbf{J}[2]$</strong></li>
</ul>
<p>ä¸»è¦æ˜¯å¯¹ $\mathbf{J}[2]_{[2,2]}$ è¿›è¡Œæ¨å¯¼ï¼Œå³ $\frac{\partial \delta\theta^{b_k}_{b_{k+1}} } {\partial \mathbf{q}^w_{b_{k+1} } }$ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial \delta\theta^{b_k}_{b_{k+1}} } {\partial \mathbf{q}^w_{b_{k+1} } }
&=\frac{\partial 2[{\mathbf{q}^{b_k}_w}^{-1}\otimes\mathbf{q}^w_{b_{k+1} }
\otimes(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1}]_{xyz} }{\partial \mathbf{q}^w_{b_{k+1} } }\\
&=2\underset{\delta\theta^w_{b_{k+1} }\rightarrow0}{\lim}
\frac{
{\mathbf{q}^{b_k}_w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes
\begin{bmatrix}1\\\frac{\delta\theta^w_{b_{k+1} } }{2}\end{bmatrix}\otimes
(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1} 
-{\mathbf{q}^{b_k}_w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes
\begin{bmatrix}1\\0\end{bmatrix}\otimes
(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1} 
}{\delta\theta^w_{b_{k+1} } }\\
&=\underset{\delta\theta^w_{b_{k+1} }\rightarrow0}{\lim}
\frac{
{\mathbf{q}^{b_k}_w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes
\begin{bmatrix}0\\\delta\theta^w_{b_{k+1} }\end{bmatrix}\otimes
(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1} 
}{\delta\theta^w_{b_{k+1} } }\\
&=\underset{\delta\theta^w_{b_{k+1} }\rightarrow0}{\lim}
\frac{
\mathcal{L}[{\mathbf{q}^{b_k}_w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }]
\mathcal{R}[(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1} ]
\begin{bmatrix}0\\\delta\theta^w_{b_{k+1} }\end{bmatrix}
}{\delta\theta^w_{b_{k+1} } }\\
&=\mathcal{L}\left[{\mathbf{q}^{b_k}_w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\right]
\mathcal{R}\left[(\hat{\gamma}^{b_k}_{b_{k+1} })^{-1} \right]\\
&=\mathcal{L}\left[{\mathbf{q}^{b_k}_w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\right]_{3\times3}
\mathcal{L}\left[(\hat{\gamma}^{b_k}_{b_{k+1} }) \right]_{3\times3}\\
&=\mathcal{L}\left[{\mathbf{q}^{b_k}_w}^{-1}\otimes
\mathbf{q}^w_{b_{k+1} }\otimes\hat{\gamma}^{b_k}_{b_{k+1} }\right]_{3\times3}
\end{align*}</script><p><strong>è¯æ¯•ï¼</strong></p>
<hr>
<script type="math/tex; mode=display">
\mathbf{J}[3]^{15\times9}=
[\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{v}^w_{b_{k+1} } }
,\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{b}_{a_{k+1} } }
,\frac{\partial \mathbf{r}_{\mathcal{B} } }{\partial \mathbf{b}_{w_{k+1} } }]
=\begin{bmatrix}
0&0&0\\
0&0&0\\
\mathbf{R}^{b_k}_w&0&0\\
0&\mathbf{I}&0\\
0&0&\mathbf{I}\\
\end{bmatrix}\tag{J3}</script><p>è¿™ä¸ªä¸éœ€è¦è¯ï¼Œåº”è¯¥å¯ä»¥ç›´æ¥çœ‹å‡ºæ¥ã€‚</p>
<hr>
<p>ä¸Šé¢å…¬å¼åœ¨ä»£ç ä¸­å¯¹åº”ï¼š <code>class IMUFactor : public ceres::SizedCostFunction&lt;15, 7, 9, 7, 9&gt;</code><br>å¯¹äº <code>Evaluate</code> è¾“å…¥ <code>double const *const *parameters, parameters[0], parameters[1], parameters[2],parameters[3]</code> åˆ†åˆ«å¯¹åº” $4$ ä¸ªè¾“å…¥å‚æ•°, å®ƒä»¬çš„é•¿åº¦ä¾æ¬¡æ˜¯ $7,9,7,9$ï¼Œåˆ†åˆ«å¯¹åº” $4$ ä¸ªä¼˜åŒ–å˜é‡çš„<br>å‚æ•°å—ã€‚  </p>
<h2 id="åæ–¹å·®"><a href="#åæ–¹å·®" class="headerlink" title="åæ–¹å·®"></a>åæ–¹å·®</h2><p>ä»£ç  <code>IMUFactor::Evaluate()</code> ä¸­ <code>residual</code> è¿˜ä¹˜ä»¥ä¸€ä¸ª<strong>ä¿¡æ¯çŸ©é˜µ</strong> <code>sqrt_info</code>ï¼Œè¿™æ˜¯å› ä¸ºçœŸæ­£çš„ä¼˜åŒ–é¡¹å…¶å®æ˜¯ é©¬æ°è·ç¦»ï¼š$d = \mathbf{r}^T\mathbf{P}^{-1}\mathbf{r}$ï¼Œ $\mathbf{P}$ æ˜¯åæ–¹å·®ï¼Œ åˆå› ä¸º Ceres åªæ¥å—æœ€å°äºŒä¹˜ä¼˜åŒ–ï¼Œ ä¹Ÿå°±æ˜¯  $\min(e^Te)$, æ‰€ä»¥æŠŠ $\mathbf{P}$ åš LLT åˆ†è§£ï¼Œ å³ $ğ¿ğ¿^T= \mathbf{P}^{-1}$, åˆ™æœ‰ï¼š  </p>
<script type="math/tex; mode=display">
d=\mathbf{r}^TLL^T\mathbf{r}=(L^T\mathbf{r})^T(L^T\mathbf{r})\tag{9}</script><p>ä»¤ $\mathbf{r}^{\prime} = L^T\mathbf{r}$ ä½œä¸ºæ–°çš„ä¼˜åŒ–è¯¯å·®, è¿™æ ·å°±èƒ½ç”¨ Ceres æ±‚è§£äº†ã€‚<strong>é©¬æ°è·ç¦»è·ç¦»å…¶å®ç›¸å½“äºä¸€ä¸ªæ®‹å·®åŠ æƒ, åæ–¹å·®å¤§çš„åŠ æƒå°, åæ–¹å·®å°çš„åŠ æƒå¤§</strong>, ç€é‡ä¼˜åŒ–é‚£äº›æ¯”è¾ƒç¡®å®šçš„æ®‹å·®ã€‚è‹¥å†™æˆ <code>â€œsqrt_info.setIdentity()â€</code> ç›¸å½“äºä¸åŠ æƒã€‚  </p>
<p>å…¶ä¸­ï¼Œ$\mathbf{P}$ æ˜¯åæ–¹å·®ï¼Œç”±ä¹‹å‰æå‡ºçš„é€’æ¨å…¬å¼å¾—åˆ°ï¼š</p>
<p>åæ–¹å·®çš„è¿­ä»£å…¬å¼ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
{\mathbf{P}^{b_k}_{k+1} }^{15\times15}
=\mathbf{F}\mathbf{P}^{b_k}_{k}\mathbf{F}^T+\mathbf{V}\mathbf{Q}\mathbf{V}^T\tag{10}</script><p>å…¶ä¸­ï¼Œ åˆå§‹å€¼ $\mathbf{P}^{b_k}_{b_k}=0$ã€‚ $\mathbf{Q}$ ä¸ºè¡¨ç¤ºå™ªå£°é¡¹çš„å¯¹è§’åæ–¹å·®çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
\mathbf{Q}^{18\times18}=
\begin{bmatrix}
\sigma^2_{a}&0&0&0&0&0\\
0&\sigma^2_{w}&0&0&0&0\\
0&0&\sigma^2_{a}&0&0&0\\
0&0&0&\sigma^2_{w}&0&0\\
0&0&0&0&\sigma^2_{b_a}&0\\
0&0&0&0&0&\sigma^2_{b_w}\\
\end{bmatrix}\tag{11}</script>]]></content>
      <categories>
        <category>VINS</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>VINS</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title>VINS-Mono_3-PVQå¢é‡è¯¯å·®ã€åæ–¹å·®åŠé›…å¯æ¯”æ¨å¯¼</title>
    <url>/posts/6eff9a87.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>VINSæ˜¯ç”±é¦™æ¸¯ç§‘æŠ€å¤§å­¦ç§¦é€šç­‰äººï¼Œäº2018å¹´æå‡ºçš„ä¸€ç§å¼ºå¤§ä¸”é€šç”¨çš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨ï¼Œæ˜¯åˆå­¦è€…æ¥è§¦VIO æ¯”è¾ƒå¥½çš„å¼€æºå­¦ä¹ èµ„æ–™ï¼Œä½œè€…çš„è®ºæ–‡æ¡ç†æ¸…æ™°ï¼Œåˆ†ä¸ºäº”ä¸ªä¸»è¦éƒ¨åˆ†å¯¹è¯¥ç³»ç»Ÿå±•å¼€æè¿°ï¼šæµ‹é‡é¢„å¤„ç†ã€åˆå§‹åŒ–ã€åç«¯éçº¿æ€§ä¼˜åŒ–ã€é—­ç¯æ£€æµ‹ã€é—­ç¯ä¼˜åŒ–ã€‚<strong>æœ¬èŠ‚ä»‹ç»PVQå¢é‡è¯¯å·®ã€åæ–¹å·®åŠé›…å¯æ¯”æ¨å¯¼ã€‚</strong></p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h2 id="â… -è¿ç»­å½¢å¼ä¸‹"><a href="#â… -è¿ç»­å½¢å¼ä¸‹" class="headerlink" title="â… .  è¿ç»­å½¢å¼ä¸‹"></a>â… .  è¿ç»­å½¢å¼ä¸‹</h2><h3 id="A-PVQå¢é‡è¯¯å·®"><a href="#A-PVQå¢é‡è¯¯å·®" class="headerlink" title="A. PVQå¢é‡è¯¯å·®"></a>A. PVQå¢é‡è¯¯å·®</h3><p>IMU åœ¨æ¯ä¸€ä¸ªæ—¶åˆ»ç§¯åˆ†å‡ºæ¥çš„å€¼æ˜¯æœ‰è¯¯å·®çš„ï¼Œä¸‹é¢æˆ‘ä»¬å¯¹è¯¯å·®è¿›è¡Œåˆ†æã€‚é¦–å…ˆæˆ‘ä»¬ç›´<br>æ¥ç»™å‡ºåœ¨ t æ—¶åˆ»è¯¯å·®é¡¹çš„å¯¼æ•° ï¼šï¼ˆå³æ¨å¯¼å‡º $(8)$ çš„è¯¯å·®é¡¹çš„è¿ç»­æ—¶é—´çº¿æ€§åŒ–æ–¹ç¨‹ï¼‰</p>
<script type="math/tex; mode=display">
\begin{align*}
\begin{bmatrix}
\delta \dot{\alpha}^{b_k}_t\\\delta \dot{\beta}^{b_k}_t\\
\delta \dot{\theta}^{b_k}_t\\\delta \dot{b}_{a_t}\\\delta \dot{b}_{w_t}\\
\end{bmatrix}&=
\begin{bmatrix}
0&\mathbf{I}&0&0&0\\
0&0&-\mathbf{R}^{b_k}_t[\hat{a}_t-b_{a_t}]^{\land}&-\mathbf{R}^{b_k}_t&0\\
0&0&-[\hat{w}_t-b_{w_t}]^{\land}&0&-\mathbf{I}\\
0&0&0&0&0\\
0&0&0&0&0\\
\end{bmatrix}
\begin{bmatrix}
\delta {\alpha}^{b_k}_t\\\delta {\beta}^{b_k}_t\\
\delta {\theta}^{b_k}_t\\\delta {b}_{a_t}\\\delta {b}_{w_t}\\
\end{bmatrix}+
\begin{bmatrix}
0&0&0&0\\
-\mathbf{R}^{b_k}_t&0&0&0\\
0&-\mathbf{I}&0&0\\
0&0&\mathbf{I}&0\\
0&0&0&\mathbf{I}\\
\end{bmatrix}
\begin{bmatrix}\mathbf{n}_a\\\mathbf{n}_w\\\mathbf{n}_{b_a}\\\mathbf{n}_{b_w}\end{bmatrix}\\
&=\mathbf{F}_t\delta\mathbf{z}^{b_k}_t+\mathbf{G}_t\mathbf{n}_t
\end{align*}\tag{1}</script><p>å…¶ä¸­ï¼š$\mathbf{F}^{15\times15}_t,\mathbf{G}^{15\times12}_t,\delta{\mathbf{z}^{b_k}_t}^{15\times1},\mathbf{n}^{12\times1}_t$ï¼Œä¸‹é¢ç»™å‡ºå…¶æ¨å¯¼è¿‡ç¨‹ã€‚</p>
<p>åœ¨æ¨å¯¼ä¹‹å‰ï¼Œå¼•å…¥ä¸¤ä¸ªæ¦‚å¿µï¼š</p>
<p>â€‹    â‘  $true$ï¼š        çœŸå®æµ‹é‡å€¼ï¼ŒåŒ…å«äº†å™ªå£° ï¼ŒåŒ…æ‹¬é™„åŠ å™ªå£°å’Œéšæœºæ¸¸èµ°</p>
<p>â€‹    â‘  $nominal$ï¼šæ— å™ªå£°çš„ç†è®ºå€¼  </p>
<ul>
<li><strong>å¯¹äº $\dot{\beta}^{b_k}_t$ çš„æ¨å¯¼ï¼š</strong></li>
</ul>
<p>æ˜“çŸ¥$\delta \dot{\beta}^{b_k}_t={\dot{\beta}^{b_k}_t}_{true}-{\dot{\beta}^{b_k}_t}_{nominal}$ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¨å¯¼${\dot{\beta}^{b_k}_t}_{true}$ ä»¥åŠ${\dot{\beta}^{b_k}_t}_{nominal}$ :</p>
<script type="math/tex; mode=display">
\begin{align*}
{\dot{\beta}^{b_k}_t}_{true}
&={\mathbf{R}^{b_k}_t}_{true}({\hat{a}_t}_{true}-{b_{a_t} }_{true})\\
&=\mathbf{R}^{b_k}_t\exp(\delta\theta^{\land})(\hat{a}_t-b_{a_t}-n_a-\delta b_{a_t})\\
&=\mathbf{R}^{b_k}_t(I+\delta\theta^{\land})(\hat{a}_t-b_{a_t}-n_a-\delta b_{a_t})\\
&=\mathbf{R}^{b_k}_t[\hat{a}_t-b_{a_t}-n_a-\delta b_{a_t}+\delta\theta^{\land}(\hat{a}_t-b_{a_t})]\\
&=\mathbf{R}^{b_k}_t[\hat{a}_t-b_{a_t}-n_a-\delta b_{a_t}-(\hat{a}_t-b_{a_t})^{\land}\delta\theta]\\
{\dot{\beta}^{b_k}_t}_{nominal}&=\mathbf{R}^{b_k}_t(\hat{a}_t-b_{a_t})
\end{align*}\tag{IA-1}</script><p>å› æ­¤ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta \dot{\beta}^{b_k}_t
&={\dot{\beta}^{b_k}_t}_{true}-{\dot{\beta}^{b_k}_t}_{nominal}\\
&=\mathbf{R}^{b_k}_t[-n_a-\delta b_{a_t}-(\hat{a}_t-b_{a_t})^{\land}\delta\theta]\\
&=-\mathbf{R}^{b_k}_t(\hat{a}_t-b_{a_t})^{\land}\delta\theta
-\mathbf{R}^{b_k}_t\delta b_{a_t}-\mathbf{R}^{b_k}_tn_a
\end{align*}\tag{IA-2}</script><ul>
<li><strong>å¯¹äº $\dot{\theta}^{b_k}_t$ çš„æ¨å¯¼ï¼š</strong></li>
</ul>
<p>ç”±å…¬å¼ $(IA-5)$ å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
{\dot{\mathbf{q} }_t}_{true}
&=\frac{1}{2}{\mathbf{q}_t}_{true}\otimes\begin{bmatrix}w_{ture}\\0\end{bmatrix}\\
&=\frac{1}{2}\mathbf{q}_t\otimes\delta\mathbf{q}\otimes
\begin{bmatrix}\hat{w}_t-b_{w_t}-n_w-\delta b_{w_t}\\0\end{bmatrix}\\
{\dot{\mathbf{q} }_t}_{nominal}&=\dot{\mathbf{q} }_t\\
&=
\frac{1}{2}\mathbf{q}_t\otimes\begin{bmatrix}\hat{w}_t-b_{w_t}\\0\end{bmatrix}\\
\end{align*}\tag{IA-3}</script><p>æ ¹æ®å¯¼æ•°çš„æ€§è´¨ï¼Œåˆæœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
{\dot{\mathbf{q} }_t}_{true}&=\dot{\overbrace{\mathbf{q}_t\otimes\delta \mathbf{q} } }\\
&=\dot{\mathbf{q} }_t\otimes\delta \mathbf{q}+\mathbf{q}_t\otimes\dot{\delta \mathbf{q} }\\
&=\frac{1}{2}\mathbf{q}_t\otimes\begin{bmatrix}\hat{w}_t-b_{w_t}\\0\end{bmatrix}\otimes\delta \mathbf{q}+\mathbf{q}_t\otimes\dot{\delta \mathbf{q} }\\
\end{align*}\tag{IA-4}</script><p>ç»¼åˆ$ (\mathrm{IA-3})$ å’Œ $ (\mathrm{IA-4})$ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&\frac{1}{2}\mathbf{q}_t\otimes\delta\mathbf{q}\otimes
\begin{bmatrix}\hat{w}_t-b_{w_t}-n_w-\delta b_{w_t}\\0\end{bmatrix}
=\frac{1}{2}\mathbf{q}_t\otimes\begin{bmatrix}\hat{w}_t-b_{w_t}\\0\end{bmatrix}\otimes\delta \mathbf{q}+\mathbf{q}_t\otimes\dot{\delta \mathbf{q} }\\
&\Leftrightarrow 
\frac{1}{2}\delta\mathbf{q}\otimes
\begin{bmatrix}\hat{w}_t-b_{w_t}-n_w-\delta b_{w_t}\\0\end{bmatrix}
=\frac{1}{2}\begin{bmatrix}\hat{w}_t-b_{w_t}\\0\end{bmatrix}\otimes\delta \mathbf{q}+\dot{\delta \mathbf{q} }\\
&\Leftrightarrow 
2\dot{\delta \mathbf{q} }=\delta\mathbf{q}\otimes\begin{bmatrix}\hat{w}_t-b_{w_t}-n_w-\delta b_{w_t}\\0\end{bmatrix}-\begin{bmatrix}\hat{w}_t-b_{w_t}\\0\end{bmatrix}\otimes\delta \mathbf{q}\\
&\Leftrightarrow 
2\dot{\delta \mathbf{q} }=\mathcal{R}\left(\begin{bmatrix}\hat{w}_t-b_{w_t}-n_w-\delta b_{w_t}\\0\end{bmatrix}  \right)\delta \mathbf{q}-\mathcal{L}\left(\begin{bmatrix}\hat{w}_t-b_{w_t}\\0\end{bmatrix} \right)\delta\mathbf{q}\\
&\Leftrightarrow 
2\dot{\delta \mathbf{q} }=\left(
\begin{bmatrix}-(\hat{w}_t-b_{w_t}-n_w-\delta b_{w_t})^{\land}&\hat{w}_t-b_{w_t}-n_w-\delta b_{w_t}\\-(\hat{w}_t-b_{w_t}-n_w-\delta b_{w_t})^T&0 \end{bmatrix}
-\begin{bmatrix}(\hat{w}_t-b_{w_t})^{\land}&\hat{w}_t-b_{w_t}\\-(\hat{w}_t-b_{w_t})^T&0\end{bmatrix}
\right)\begin{bmatrix}\frac{\delta\theta}{2}\\1\end{bmatrix}\\
&\Leftrightarrow 
2\dot{\delta \mathbf{q} }=
\begin{bmatrix}-(2\hat{w}_t-2b_{w_t}-n_w-\delta b_{w_t})^{\land}&-n_w-\delta b_{w_t}\\(n_w+\delta b_{w_t})^T&0 \end{bmatrix}\begin{bmatrix}\frac{\delta\theta}{2}\\1\end{bmatrix}
\end{align*}</script><p>ä¸Šå¼å·¦ä¾§ä¹Ÿå¯ä»¥å†™æˆï¼š</p>
<script type="math/tex; mode=display">
2\dot{\delta \mathbf{q} }=\begin{bmatrix}\dot{\delta\theta}\\0\end{bmatrix}
=\begin{bmatrix}-(2\hat{w}_t-2b_{w_t}-n_w-\delta b_{w_t})^{\land}&-n_w-\delta b_{w_t}\\(n_w+\delta b_{w_t})^T&0 \end{bmatrix}\begin{bmatrix}\frac{\delta\theta}{2}\\1\end{bmatrix}</script><p>æ•…è€Œï¼Œå¯å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot{\delta\theta}&=-(2\hat{w}_t-2b_{w_t}-n_w-\delta b_{w_t})^{\land}\frac{\delta\theta}{2}-n_w-\delta b_{w_t}\\
&\approx-(\hat{w}_t-b_{w_t})^{\land}\delta\theta-n_w-\delta b_{w_t}
\end{align*}\tag{IA-5}</script><ul>
<li><strong>å…¶ä»–çš„æ¨å¯¼</strong></li>
</ul>
<p>å¯¹äº $\delta \dot{\alpha}^{b_k}_t$ è€Œè¨€ï¼Œæˆ‘ä»¬çŸ¥é“åŠ é€Ÿåº¦å’Œé€Ÿåº¦ä¹‹é—´å°±æ˜¯ç›¸å·®ä¸€ä¸ªå¯¼æ•°ï¼Œå› æ­¤ï¼š$\delta \dot{\alpha}^{b_k}_t=\delta \beta^{b_k}_t$</p>
<p>å¯¹äº $\delta \dot{b}_{a_t}$ å’Œ $\delta \dot{b}_{w_t}$â€‹ ï¼Œå·²çŸ¥åŠ é€Ÿåº¦åå·®å’Œé™€èºä»ªåç½®è¢«å»ºæ¨¡ä¸º<strong>éšæœºæ¸¸èµ°</strong>ï¼Œå…¶å¯¼æ•°ä¸ºé«˜æ–¯ï¼Œ$n_{b_a}\sim\mathcal{N}(0, \sigma^2_{b_a}),n_{b_w}\sim\mathcal{N}(0, \sigma^2_{b_w})$ï¼š</p>
<script type="math/tex; mode=display">
\dot{b}_{a_t}=n_{b_a},\ \ \ \ \ \ \dot{b}_{w_t}=n_{b_w}</script><p>æ•…è€Œï¼š $\delta \dot{b}_{a_t}=\delta\mathbf{n_{b_a} }$  ,    $\delta \dot{b}_{w_t}=\delta\mathbf{n_{b_w} }$  </p>
<h3 id="B-åæ–¹å·®åŠé›…å¯æ¯”"><a href="#B-åæ–¹å·®åŠé›…å¯æ¯”" class="headerlink" title="B. åæ–¹å·®åŠé›…å¯æ¯”"></a>B. åæ–¹å·®åŠé›…å¯æ¯”</h3><p>å¯¹äºå…¬å¼ $(1)$ å¯ä»¥ç®€å†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\delta\dot{\mathbf{z} }^{b_k}_t=\mathbf{F}_t\delta\mathbf{z}^{b_k}_t+\mathbf{G}_t\mathbf{n}_t\tag{2}</script><p>æ ¹æ®å¯¼æ•°å®šä¹‰å¯çŸ¥ï¼š$\delta\dot{\mathbf{z} }^{b_k}_t=\underset{\delta t\rightarrow0}{\lim}\frac{\delta\mathbf{z}^{b_k}_{t+\delta t}+\delta\mathbf{z}^{b_k}_t}{\delta t}$   </p>
<script type="math/tex; mode=display">
\begin{align*}
\delta\mathbf{z}^{b_k}_{t+\delta t}&=\delta\mathbf{z}^{b_k}_{t}+\delta\dot{\mathbf{z} }^{b_k}_t \delta t\\
&=(\mathbf{I}+\mathbf{F}_t\delta t)\delta\mathbf{z}^{b_k}_t+(\mathbf{G}_t\delta t)\mathbf{n}_t\\
&=\mathbf{F}\delta\mathbf{z}^{b_k}_t+\mathbf{V}\mathbf{n}_t
\end{align*}\tag{3}</script><p>å…¶ä¸­ï¼Œ$\mathbf{F}=\mathbf{I}+\mathbf{F}_t\delta t,\mathbf{V}=\mathbf{G}_t\delta t$ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å¯¹å…¬å¼ $(3)$ çš„ IMU è¯¯å·®è¿åŠ¨æ–¹ç¨‹å†è¯´æ˜ï¼Œå°†ä¸Šå¼å’Œ EKF å¯¹æ¯”å¯çŸ¥ï¼Œä¸Šå¼æ°å¥½ç»™å‡ºäº†å¦‚ EKF ä¸€èˆ¬å¯¹éçº¿æ€§ç³»ç»Ÿçº¿æ€§åŒ–çš„è¿‡ç¨‹ï¼Œè¿™é‡Œçš„æ„ä¹‰æ˜¯è¡¨ç¤ºä¸‹ä¸€ä¸ªæ—¶åˆ»çš„ IMU æµ‹é‡è¯¯å·®ä¸ä¸Šä¸€ä¸ªæ—¶åˆ»çš„æˆçº¿æ€§å…³ç³»ï¼Œè¿™æ ·<strong>æˆ‘ä»¬æ ¹æ®å½“å‰æ—¶åˆ»çš„å€¼ï¼Œå¯ä»¥é¢„æµ‹å‡ºä¸‹ä¸€ä¸ªæ—¶åˆ»çš„å‡å€¼å’Œåæ–¹å·®</strong>ï¼Œè€Œå…¬å¼ $(3)$ ç»™å‡ºçš„æ˜¯å‡å€¼é¢„æµ‹ï¼Œåæ–¹å·®é¢„æµ‹å…¬å¼å¦‚ä¸‹ï¼š  </p>
<script type="math/tex; mode=display">
\mathbf{P}^{b_k}_{t+\delta t}=
(\mathbf{I}+\mathbf{F}_t\delta t)\mathbf{P}^{b_k}_{t}(\mathbf{I}+\mathbf{F}_t\delta t)^T+
(\mathbf{G}_t\delta t)\mathbf{Q}_t(\mathbf{G}_t\delta t)^T,t\in[k,k+1]\tag{4}</script><p>ä¸Šå¼ç»™å‡ºäº†åæ–¹å·®çš„è¿­ä»£å…¬å¼ï¼Œåˆå§‹å€¼ $\mathbf{P}^{b_k}_{b_k}=0$ã€‚å…¶ä¸­ï¼Œ $\mathbf{Q}$ ä¸ºè¡¨ç¤ºå™ªå£°é¡¹çš„å¯¹è§’åæ–¹å·®çŸ©é˜µï¼š  </p>
<script type="math/tex; mode=display">
\mathbf{Q}^{12\times12}=
\begin{bmatrix}\delta^2_{a}&0&0&0\\0&\delta^2_{w}&0&0\\ 0&0&\delta^2_{b_a}&0\\ 
 0&0&0&\delta^2_{b_w}\\ \end{bmatrix}\tag{5}</script><p>å¦å¤–æ ¹æ® $(3)$ å¼å¯è·å¾—è¯¯å·®é¡¹çš„ Jacobian çš„è¿­ä»£å…¬å¼ï¼š  </p>
<script type="math/tex; mode=display">
\mathbf{J}_{t+\delta t}=(\mathbf{I}+\mathbf{F}_t\delta t)\mathbf{J}_\tag{6}t</script><p>å…¶ä¸­ï¼ŒJacobian çš„åˆå§‹å€¼ $\mathbf{J}^{b_k}_{b_k}=\mathbf{I}$</p>
<h2 id="â…¡-ç¦»æ•£å½¢å¼ä¸‹"><a href="#â…¡-ç¦»æ•£å½¢å¼ä¸‹" class="headerlink" title="â…¡. ç¦»æ•£å½¢å¼ä¸‹"></a>â…¡. ç¦»æ•£å½¢å¼ä¸‹</h2><h3 id="A-PVQå¢é‡è¯¯å·®-1"><a href="#A-PVQå¢é‡è¯¯å·®-1" class="headerlink" title="A. PVQå¢é‡è¯¯å·®"></a>A. PVQå¢é‡è¯¯å·®</h3><p>æˆ‘ä»¬é¦–å…ˆç›´æ¥ç»™å‡º PVQ å¢é‡è¯¯å·®åœ¨ç¦»æ•£å½¢å¼ä¸‹çš„çŸ©é˜µå½¢å¼ï¼Œä¸ºäº†ä¸ä»£ç ä¸€è‡´ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹å˜é‡é¡ºåºï¼Œè¿™å’Œä»£ç ä¸­ <code>midPointIntegration()</code> å‡½æ•°æ˜¯ä¸€è‡´çš„ã€‚ ï¼ˆ ä½†ä¸çŸ¥ä¸ºä½•è®¡ç®—çš„ V ä¸­ä¸å‰å››ä¸ªå™ªå£°é¡¹ç›¸å…³çš„å·®ä¸ªè´Ÿå·ï¼Ÿ ï¼‰  </p>
<script type="math/tex; mode=display">
\begin{align*}
\begin{bmatrix}
\delta\alpha_{k+1}\\ \delta\theta_{k+1}\\ \delta\beta_{k+1}\\ 
\delta b_{a_{k+1} }\\ \delta b_{w_{k+1} }\\ 
\end{bmatrix}
&=\begin{bmatrix}
\mathbf{I}&f_{12}&\delta t&f_{14}&f_{15}\\
0&f_{22}&0&0&-\delta t\\
0&f_{32}&\mathbf{I}&f_{34}&f_{35}\\
0&0&0&\mathbf{I}&0\\
0&0&0&0&\mathbf{I}
\end{bmatrix}
\begin{bmatrix}
\delta\alpha_k\\\delta\theta_k\\\delta\beta_k\\\delta b_{a_k}\\\delta b_{w_k}\\ \end{bmatrix}
+\begin{bmatrix}
g_{11}&g_{12}&g_{13}&g_{14}&0&0\\
0&\frac{1}{2}\delta t&0&\frac{1}{2}\delta t&0&0\\
\frac{1}{2}\mathbf{R}_k\delta t&g_{32}&\frac{1}{2}\mathbf{R}_k\delta t&g_{34}&0&0\\
0&0&0&0&\delta t&0\\
0&0&0&0&0&\delta t
\end{bmatrix}
\begin{bmatrix}
\mathbf{n}_{a_k}\\ \mathbf{n}_{w_k}\\ \mathbf{n}_{a_{k+1} }\\ 
\mathbf{n}_{w_{k+1} }\\ \mathbf{n}_{b_a}\\ \mathbf{n}_{b_w}\\ 
\end{bmatrix}\\
&=\mathbf{F}
\begin{bmatrix}
\delta\alpha_k\\\delta\theta_k\\\delta\beta_k\\\delta b_{a_k}\\\delta b_{w_k}\\ \end{bmatrix}
+\mathbf{G}
\begin{bmatrix}
\mathbf{n}_{a_k}\\ \mathbf{n}_{w_k}\\ \mathbf{n}_{a_{k+1} }\\ 
\mathbf{n}_{w_{k+1} }\\ \mathbf{n}_{b_a}\\ \mathbf{n}_{b_w}\\ 
\end{bmatrix}\\
\end{align*}\tag{7}</script><p>$\mathbf{F},\mathbf{G}$ä¸ºä¸¤ä¸ªæ—¶åˆ»é—´çš„åæ–¹å·®ä¼ é€’çŸ©é˜µã€‚</p>
<p>ä¸‹é¢ç»™å‡ºæ¨å¯¼è¿‡ç¨‹ã€‚</p>
<p>é¦–å…ˆæ˜¯ä¸¤ä¸ªæ¯”è¾ƒç®€å•çš„ï¼š</p>
<script type="math/tex; mode=display">
\delta b_{a_{k+1} }=\delta b_{a_k}+\delta t\mathbf{n}_a \\
\delta b_{w_{k+1} }=\delta b_{w_k}+\delta t\mathbf{n}_w \\</script><p>ä¸»è¦æ¨å¯¼å…¶ä»–ä¸‰ä¸ªï¼š$\delta\alpha_{k+1}, \delta\theta_{k+1}, \delta\beta_{k+1}$ï¼Œåˆ†åˆ«æ¨å¯¼ï¼š</p>
<ul>
<li><strong>å¯¹äº $\delta\theta_{k+1}$ çš„æ¨å¯¼</strong></li>
</ul>
<p>ç”±å…¬å¼ $\mathrm{(IA-5)}$ å¯çŸ¥ï¼Œè§’åº¦è¯¯å·®çš„è¿ç»­å½¢å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\dot{\delta\theta}\approx-(\hat{w}_t-b_{w_t})^{\land}\delta\theta-n_w-\delta b_{w_t}</script><p>åˆ™ç¦»æ•£å½¢å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\dot{\delta\theta_k}\approx-
\left(\frac{\hat{w}_k+\hat{w}_{k+1}}{2}-b_{w_k}\right)^{\land}\delta\theta_k-
\frac{n_{w_k}+n_{w_{k+1} } }{2}-\delta b_{w_k}</script><p>ç”±å¯¼æ•°çš„å®šä¹‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta\theta_{k+1} &=\delta\theta_{k}+\dot{\delta\theta_{k} }\ \delta t\\
&=f_{22}\ {\color{red}\delta\theta_{k} }-\delta t\  {\color{red}\delta b_{w_k} }
-\frac{\delta t}{2}{\color{red}n_{w_k} }  -\frac{\delta t}{2}{\color{red}n_{w_{k+1} } }
\end{align*}\tag{IIA-1}</script><p>å…¶ä¸­ï¼Œ</p>
<script type="math/tex; mode=display">
f_{22}=I-
\left(\frac{\hat{w}_k+\hat{w}_{k+1}}{2}-b_{w_k}\right)^{\land}\delta t
\tag{IIA-2}</script><ul>
<li><strong>å¯¹äº $\delta\beta_{k+1}$ çš„æ¨å¯¼</strong></li>
</ul>
<p>ç”±å…¬å¼ $\mathrm{(IA-2)}$ å¯çŸ¥ï¼Œé€Ÿåº¦è¯¯å·®çš„è¿ç»­å½¢å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\delta \dot{\beta}^{b_k}_t
=-\mathbf{R}^{b_k}_t(\hat{a}_t-b_{a_t})^{\land}\delta\theta
-\mathbf{R}^{b_k}_t\delta b_{a_t}-\mathbf{R}^{b_k}_tn_a</script><p>åˆ™ç¦»æ•£å½¢å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\delta \dot{\beta}^{b_k}_t
=-\frac{
\mathbf{R}^{b_k}_k(\hat{a}_k-b_{a_k})^{\land}\delta\theta_k+
\mathbf{R}^{b_{k} }_{k+1} (\hat{a}_{k+1} -b_{a_k})^{\land}\delta\theta_{k+1} }
{2}-\frac{\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1} }
{2}\delta b_{a_k}
-\frac{\mathbf{R}^{b_k}_kn_{a_k}+\mathbf{R}^{b_{k} }_{k+1}n_{a_{k+1} } }{2}</script><p>å°†å…¬å¼ $\mathrm{(IIA-1)}$ ä»£å…¥ä¸Šå¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta \dot{\beta}^{b_k}_t=
&-\frac{1}{2}\mathbf{R}^{b_k}_k(\hat{a}_k-b_{a_k})^{\land}\delta\theta_k\\
&-\frac{1}{2}\mathbf{R}^{b_{k} }_{k+1} (\hat{a}_{k+1} -b_{a_k})^{\land}
\left\{
\left[ I-
\left(\frac{\hat{w}_k+\hat{w}_{k+1}}{2}-b_{w_k}\right)^{\land}\delta t \right]\delta\theta_{k}-
\frac{n_{w_k}+n_{w_{k+1} } }{2}\delta t-\delta b_{w_k}\delta t
\right\}\\
&-\frac{1}{2}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta b_{a_k}
-\frac{1}{2}\mathbf{R}^{b_k}_kn_{a_k}
-\frac{1}{2}\mathbf{R}^{b_{k} }_{k+1}n_{a_{k+1} }\\
=&\left\{
-\frac{1}{2}\mathbf{R}^{b_k}_k(\hat{a}_k-b_{a_k})^{\land}
-\frac{1}{2}\mathbf{R}^{b_{k} }_{k+1} (\hat{a}_{k+1} -b_{a_k})^{\land}
\left[ I-
\left(\frac{\hat{w}_k+\hat{w}_{k+1}}{2}-b_{w_k}\right)^{\land}\delta t \right]
\right\}\delta\theta_{k}\\
&+\frac{\delta t}{4}\mathbf{R}^{b_{k} }_{k+1} (\hat{a}_{k+1} -b_{a_k})^{\land}n_{w_k}
+\frac{\delta t}{4}\mathbf{R}^{b_{k} }_{k+1}(\hat{a}_{k+1} -b_{a_k})^{\land}n_{w_{k+1} }
+\frac{\delta t}{2}\mathbf{R}^{b_{k} }_{k+1}(\hat{a}_{k+1} -b_{a_k})^{\land}\delta b_{w_k}\\
&-\frac{1}{2}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta b_{a_k}
-\frac{1}{2}\mathbf{R}^{b_k}_kn_{a_k}
-\frac{1}{2}\mathbf{R}^{b_{k} }_{k+1}n_{a_{k+1} }\\
\end{align*}</script><p>åŒç†ï¼Œç”±å¯¼æ•°çš„å®šä¹‰å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta \beta^{b_k}_{k+1}&=\delta \beta^{b_k}_k+\delta \dot{\beta}^{b_k}_t\ \delta t\\
=&f_{32}\ {\color{red}\delta\theta_k}+{\color{red}\delta \beta^{b_k}_k}-\frac{1}{2}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta t\ {\color{red}\delta b_{a_k} }
+f_{35}\ {\color{red}\delta b_{w_k} }\\
&-\frac{1}{2}\mathbf{R}^{b_k}_k\delta t\ {\color{red}n_{a_k} }+g_{32}\ {\color{red}n_{w_k} }
-\frac{1}{2}\mathbf{R}^{b_{k} }_{k+1}\delta t\ {\color{red}n_{a_{k+1} } }
+g_{34}\ {\color{red}n_{w_{k+1} } }
\end{align*}\tag{IIA-3}</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
f_{32}&=
-\frac{1}{2}\mathbf{R}^{b_k}_k(\hat{a}_k-b_{a_k})^{\land}\delta t
-\frac{1}{2}\mathbf{R}^{b_{k} }_{k+1} (\hat{a}_{k+1} -b_{a_k})^{\land}
\left[ I-
\left(\frac{\hat{w}_k+\hat{w}_{k+1}}{2}-b_{w_k}\right)^{\land}\delta t \right]\delta t\\
f_{35}&=\frac{\delta t}{2}\mathbf{R}^{b_{k} }_{k+1}(\hat{a}_{k+1} -b_{a_k})^{\land}\delta t^2\\
g_{32}&=\frac{\delta t}{4}\mathbf{R}^{b_{k} }_{k+1} (\hat{a}_{k+1} -b_{a_k})^{\land}\delta t^2\\
g_{34}&=\frac{\delta t}{4}\mathbf{R}^{b_{k} }_{k+1} (\hat{a}_{k+1} -b_{a_k})^{\land}\delta t^2\\
\end{align*}\tag{IIA-4}</script><ul>
<li><strong>å¯¹äº $\delta\alpha_{k+1}$ çš„æ¨å¯¼</strong></li>
</ul>
<p>æˆ‘ä»¬çŸ¥é“åŠ é€Ÿåº¦å’Œé€Ÿåº¦ä¹‹é—´å°±æ˜¯ç›¸å·®ä¸€ä¸ªå¯¼æ•°ï¼Œå› æ­¤ï¼š$\delta \dot{\alpha}^{b_k}_t=\delta \beta^{b_k}_t$</p>
<p>åˆ™ç¦»æ•£å½¢å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta \dot{\alpha}^{b_k}_k=&\frac{1}{2}(\delta \beta^{b_k}_k+\delta \beta^{b_k}_{k+1})\\
=&\frac{1}{2}(\delta \beta^{b_k}_k+\delta \beta^{b_k}_k+f_{32}\ \delta\theta_k+f_{35}\ \delta b_{w_k}+g_{32}\ n_{w_k}
+g_{34}\ n_{w_{k+1} }\\
&-\frac{1}{2}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta t\ \delta b_{a_k}
-\frac{1}{2}\mathbf{R}^{b_k}_k\delta t\ n_{a_k}
-\frac{1}{2}\mathbf{R}^{b_{k} }_{k+1}\delta t\ n_{a_{k+1} })\\
=&\delta \beta^{b_k}_k+\frac{1}{2}f_{32}\ \delta\theta_k+\frac{1}{2}f_{35}\ \delta b_{w_k}+\frac{1}{2}g_{32}\ n_{w_k}+\frac{1}{2}g_{34}\ n_{w_{k+1} }\\
&-\frac{1}{4}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta t\ \delta b_{a_k}
-\frac{1}{4}\mathbf{R}^{b_k}_k\delta t\ n_{a_k}
-\frac{1}{4}\mathbf{R}^{b_{k} }_{k+1}\delta t\ n_{a_{k+1} }\\
\end{align*}</script><p>åŒç†ï¼Œç”±å¯¼æ•°çš„å®šä¹‰å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta\alpha_{k+1}&=\delta\alpha_{k}+\delta \dot{\alpha}^{b_k}_k\ \delta t\\
=&\delta\alpha_{k}+(\delta \beta^{b_k}_k+\frac{1}{2}f_{32}\ \delta\theta_k+\frac{1}{2}f_{35}\ \delta b_{w_k}+\frac{1}{2}g_{32}\ n_{w_k}+\frac{1}{2}g_{34}\ n_{w_{k+1} }\\
&-\frac{1}{4}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta t\ \delta b_{a_k}
-\frac{1}{4}\mathbf{R}^{b_k}_k\delta t\ n_{a_k}
-\frac{1}{4}\mathbf{R}^{b_{k} }_{k+1}\delta t\ n_{a_{k+1} })\delta t\\
=&\delta\alpha_{k}+\delta \beta^{b_k}_k\delta t+\frac{\delta t}{2}f_{32}\ \delta\theta_k+\frac{\delta t}{2}f_{35}\ \delta b_{w_k}+\frac{\delta t}{2}g_{32}\ n_{w_k}+\frac{\delta t}{2}g_{34}\ n_{w_{k+1} }\\
&-\frac{\delta t}{4}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta t\ \delta b_{a_k}
-\frac{\delta t}{4}\mathbf{R}^{b_k}_k\delta t\ n_{a_k}
-\frac{\delta t}{4}\mathbf{R}^{b_{k} }_{k+1}\delta t\ n_{a_{k+1} }\\
=&{\color{red}\delta\alpha_{k} }+\frac{\delta t}{2}f_{32}\ {\color{red}\delta\theta_k}+\delta t\ {\color{red}\delta \beta^{b_k}_k}-\frac{\delta t}{4}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta t\ {\color{red}\delta b_{a_k} }+\frac{\delta t}{2}f_{35}\ {\color{red}\delta b_{w_k} }\\
&-\frac{\delta t}{4}\mathbf{R}^{b_k}_k\delta t\ {\color{red}n_{a_k} }
+\frac{\delta t}{2}g_{32}\ {\color{red}n_{w_k} }
-\frac{\delta t}{4}\mathbf{R}^{b_{k} }_{k+1}\delta t\ {\color{red}n_{a_{k+1} } }
+\frac{\delta t}{2}g_{34}\ {\color{red}n_{w_{k+1} } }
\\
\end{align*}\tag{IIA-5}</script><p>æ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
f_{12}&=\frac{\delta t}{2}f_{32}\\
f_{14}&=-\frac{\delta t}{4}(\mathbf{R}^{b_k}_k+\mathbf{R}^{b_{k} }_{k+1})\delta t\\
f_{15}&=\frac{\delta t}{2}f_{35}\\
g_{11}&=-\frac{\delta t}{4}\mathbf{R}^{b_k}_k\delta t\\
g_{12}&=\frac{\delta t}{2}g_{32}\\
g_{13}&=-\frac{\delta t}{4}\mathbf{R}^{b_{k} }_{k+1}\delta t\\
g_{14}&=\frac{\delta t}{2}g_{34}\\
\end{align*}\tag{IIA-6}</script><h3 id="B-åæ–¹å·®åŠé›…å¯æ¯”-1"><a href="#B-åæ–¹å·®åŠé›…å¯æ¯”-1" class="headerlink" title="B. åæ–¹å·®åŠé›…å¯æ¯”"></a>B. åæ–¹å·®åŠé›…å¯æ¯”</h3><p>å…¬å¼ $(7)$ å¯ä»¥ç®€å†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\delta{\mathbf{z}_{k+1} }^{15\times1}=\mathbf{F}^{15\times15}\delta{\mathbf{z}_k}^{15\times1}+\mathbf{V}^{15\times18}\mathbf{Q}^{18\times1}\tag{8}</script><p>åæ–¹å·®çš„è¿­ä»£å…¬å¼ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
{\mathbf{P}^{b_k}_{k+1} }^{15\times15}
=\mathbf{F}\mathbf{P}^{b_k}_{k}\mathbf{F}^T+\mathbf{V}\mathbf{Q}\mathbf{V}^T\tag{9}</script><p>å…¶ä¸­ï¼Œ åˆå§‹å€¼ $\mathbf{P}^{b_k}_{b_k}=0$ã€‚ $\mathbf{Q}$ ä¸ºè¡¨ç¤ºå™ªå£°é¡¹çš„å¯¹è§’åæ–¹å·®çŸ©é˜µï¼š  </p>
<script type="math/tex; mode=display">
\mathbf{Q}^{18\times18}=
\begin{bmatrix}
\sigma^2_{a}&0&0&0&0&0\\
0&\sigma^2_{w}&0&0&0&0\\
0&0&\sigma^2_{a}&0&0&0\\
0&0&0&\sigma^2_{w}&0&0\\
0&0&0&0&\sigma^2_{b_a}&0\\
0&0&0&0&0&\sigma^2_{b_w}\\
\end{bmatrix}\tag{10}</script><p>å¦å¤–æ ¹æ® $(8)$ å¼å¯è·å¾—è¯¯å·®é¡¹çš„ Jacobian çš„è¿­ä»£å…¬å¼ï¼š  </p>
<script type="math/tex; mode=display">
{\mathbf{J}_{k+1} }^{15\times15}=\mathbf{F}\mathbf{J}_{k}\tag{11}</script><p>å…¶ä¸­ï¼Œ Jacobian çš„åˆå§‹å€¼ä¸º $\mathbf{J}_k= \mathbf{I}$ã€‚ è¿™é‡Œè®¡ç®—å‡ºæ¥çš„ $\mathbf{J}_{k+1}$ åªæ˜¯ä¸ºäº†ç»™åé¢æä¾›å¯¹ $bias$ çš„ Jacobianã€‚  </p>
]]></content>
      <categories>
        <category>VINS</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>VINS</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title>VINS-Mono_2-IMUé¢„ç§¯åˆ†å…¬å¼æ¨å¯¼</title>
    <url>/posts/9c201995.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>VINSæ˜¯ç”±é¦™æ¸¯ç§‘æŠ€å¤§å­¦ç§¦é€šç­‰äººï¼Œäº2018å¹´æå‡ºçš„ä¸€ç§å¼ºå¤§ä¸”é€šç”¨çš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨ï¼Œæ˜¯åˆå­¦è€…æ¥è§¦VIO æ¯”è¾ƒå¥½çš„å¼€æºå­¦ä¹ èµ„æ–™ï¼Œä½œè€…çš„è®ºæ–‡æ¡ç†æ¸…æ™°ï¼Œåˆ†ä¸ºäº”ä¸ªä¸»è¦éƒ¨åˆ†å¯¹è¯¥ç³»ç»Ÿå±•å¼€æè¿°ï¼šæµ‹é‡é¢„å¤„ç†ã€åˆå§‹åŒ–ã€åç«¯éçº¿æ€§ä¼˜åŒ–ã€é—­ç¯æ£€æµ‹ã€é—­ç¯ä¼˜åŒ–ã€‚<strong>æœ¬èŠ‚ä»‹ç»IMUé¢„ç§¯åˆ†å…¬å¼æ¨å¯¼ã€‚</strong></p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="VINSå…¬å¼æ¨å¯¼ï¼šIMUé¢„ç§¯åˆ†å…¬å¼æ¨å¯¼"><a href="#VINSå…¬å¼æ¨å¯¼ï¼šIMUé¢„ç§¯åˆ†å…¬å¼æ¨å¯¼" class="headerlink" title="VINSå…¬å¼æ¨å¯¼ï¼šIMUé¢„ç§¯åˆ†å…¬å¼æ¨å¯¼"></a>VINSå…¬å¼æ¨å¯¼ï¼šIMUé¢„ç§¯åˆ†å…¬å¼æ¨å¯¼</h1><h2 id="ç¬¦å·çº¦å®š"><a href="#ç¬¦å·çº¦å®š" class="headerlink" title="ç¬¦å·çº¦å®š"></a>ç¬¦å·çº¦å®š</h2><p>æˆ‘ä»¬å°† $(Â·)^w$ è§†ä¸ºä¸–ç•Œåæ ‡ç³»ã€‚é‡åŠ›æ–¹å‘ä¸ä¸–ç•Œåæ ‡ç³»çš„ $z$ è½´å¯¹é½ã€‚$ (Â·)^b$æ˜¯body åæ ‡ç³»ï¼Œæˆ‘ä»¬å®šä¹‰å®ƒå’ŒIMU åæ ‡ç³»ä¸€æ ·ã€‚$ (Â·)^c $ æ˜¯ç›¸æœºåæ ‡ç³»ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨æ—‹è½¬çŸ©é˜µ $R$ å’Œ Hamilton å››å…ƒæ•° $q$ æ¥è¡¨ç¤ºæ—‹è½¬ã€‚æˆ‘ä»¬ä¸»è¦åœ¨çŠ¶æ€å‘é‡ä¸­ä½¿ç”¨å››å…ƒæ•°ï¼Œä½†æ—‹è½¬çŸ©é˜µä¹Ÿç”¨äºæ–¹ä¾¿åœ°æ—‹è½¬ä¸‰ç»´å‘é‡ã€‚  $q^w_b , p^w_b$ æ˜¯ä»æœ¬ä½“åæ ‡ç³»åˆ°ä¸–ç•Œåæ ‡ç³»çš„æ—‹è½¬å’Œå¹³ç§»ã€‚$b_k$ æ˜¯æ‹æ‘„ç¬¬ $k$ å¼ å›¾åƒæ—¶çš„æœ¬ä½“åæ ‡ç³»ã€‚ $c_k$ æ˜¯æ‹æ‘„ç¬¬ $k$ å¼ å›¾åƒæ—¶çš„ç›¸æœºå¸§ã€‚ $\otimes$ è¡¨ç¤ºä¸¤ä¸ªå››å…ƒæ•°ä¹‹é—´çš„ä¹˜æ³•è¿ç®—ã€‚$g^w = [0, 0, g]^T$ æ˜¯ä¸–ç•Œåæ ‡ç³»ä¸­çš„é‡åŠ›çŸ¢é‡ã€‚æœ€åï¼Œæˆ‘ä»¬å°† $\hat{(Â·)}$ è¡¨ç¤ºä¸ºæŸä¸ªé‡çš„å™ªå£°æµ‹é‡æˆ–ä¼°è®¡ã€‚</p>
<p>Â·Â·Â·â…£Â·â…¤Â·â…¥Â·â…¦Â·â…§Â·â…¨Â·â…©Â·â…ªÂ·â…«</p>
<h2 id="IMU-å™ªå£°æ¨¡å‹"><a href="#IMU-å™ªå£°æ¨¡å‹" class="headerlink" title="IMU å™ªå£°æ¨¡å‹"></a>IMU å™ªå£°æ¨¡å‹</h2><p>IMU çš„åŸå§‹é™€èºä»ªå’ŒåŠ é€Ÿåº¦è®¡æµ‹é‡å€¼ $\hat{w}$ å’Œ $\hat{a}$ ç”±ä¸‹å¼ç»™å‡ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\hat{a}_t&=a_t+b_{a_t}+R^t_wg^w+n_a\\
\hat{w}_t&=w_t+b_{w_t}+n_w
\end{align*}\tag{1}</script><p>æˆ‘ä»¬å‡è®¾åŠ é€Ÿåº¦å’Œé™€èºä»ªæµ‹é‡ä¸­çš„<strong>é™„åŠ å™ªå£°</strong>æ˜¯é«˜æ–¯å™ªå£°ï¼Œ$n_a\sim\mathcal{N}(0,\sigma^2_a),n_w\sim\mathcal{N}(0,\sigma^2_w)$ã€‚åŠ é€Ÿåº¦åå·®å’Œé™€èºä»ªåå·®è¢«å»ºæ¨¡ä¸º<strong>éšæœºæ¸¸èµ°</strong>ï¼Œå…¶å¯¼æ•°ä¸ºé«˜æ–¯ï¼Œ$n_{b_a}\sim\mathcal{N}(0, \sigma^2_{b_a}),n_{b_w}\sim\mathcal{N}(0, \sigma^2_{b_w})$ï¼š</p>
<script type="math/tex; mode=display">
\dot{b}_{a_t}=n_{b_a},\ \ \ \ \ \ \dot{b}_{w_t}=n_{b_w}\tag{2}</script><h2 id="â… -å½“å‰æ—¶åˆ»-PVQ"><a href="#â… -å½“å‰æ—¶åˆ»-PVQ" class="headerlink" title="â… .  å½“å‰æ—¶åˆ» PVQ"></a>â… .  å½“å‰æ—¶åˆ» PVQ</h2><h3 id="A-è¿ç»­å½¢å¼"><a href="#A-è¿ç»­å½¢å¼" class="headerlink" title="A.è¿ç»­å½¢å¼"></a>A.è¿ç»­å½¢å¼</h3><p><img src="/images/VINS-Mono-2-IMUé¢„ç§¯åˆ†å…¬å¼æ¨å¯¼/image-20220520195515606.png" alt="image-20220520195515606" style="zoom: 50%;" /></p>
<p>å°†ç¬¬ $k$ å¸§å’Œç¬¬ $k+1$ å¸§ä¹‹é—´çš„æ‰€æœ‰ IMU è¿›è¡Œç§¯åˆ†ï¼Œå¯å¾—ç¬¬ $k+1$ å¸§çš„ä½ç½®ã€é€Ÿåº¦å’Œæ—‹è½¬<br>ï¼ˆ PVQï¼‰,ä½œä¸ºè§†è§‰ä¼°è®¡çš„åˆå§‹å€¼ï¼Œè¿™é‡Œçš„æ—‹è½¬é‡‡ç”¨çš„å››å…ƒæ•°ã€‚  </p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbf{p}^w_{b_{k+1} }&=\mathbf{p}^w_{b_k}+\mathbf{v}^w_{b_k}\Delta t_k+\iint_{t\in[t_k, t_{k+1}]}(\mathbf{R}^w_t(\hat{a}_t-b_{a_t}-n_a)-g^w)dt^2\\
\mathbf{v}^w_{b_{k+1} }&=\mathbf{v}^w_{b_k}+\int_{t\in[t_k, t_{k+1}]}(\mathbf{R}^w_t(\hat{a}_t-b_{a_t}-n_a)-g^w)dt\\
\mathbf{q}^w_{b_{k+1} }&=\mathbf{q}^w_{b_k}\otimes\int_{t\in[t_k, t_{k+1}]}
\frac{1}{2}\Omega(\hat{w}_t-b_{w_t}-n_w)\mathbf{q}^{b_k}_tdt
\end{align*}\tag{3}</script><p>å…¶ä¸­ $\hat{w}$ å’Œ $\hat{a}$ åˆ†åˆ«æ˜¯ IMU çš„åŸå§‹é™€èºä»ªå’ŒåŠ é€Ÿåº¦è®¡æµ‹é‡å€¼ï¼Œ$\Delta t_k$ æ˜¯æ—¶é—´é—´éš”  $[t_k, t_{k+1}]$ ä¹‹é—´çš„æŒç»­æ—¶é—´ã€‚ä¸”</p>
<script type="math/tex; mode=display">
\Omega(w)=
\begin{bmatrix}
-w^{\land}&w\\-w^T&0
\end{bmatrix},
w^{\land}=\begin{bmatrix}
0&-w_z&w_y\\
w_z&0&-w_x\\
-w_y&w_x&0
\end{bmatrix}\tag{4}</script><p>å…¶ä¸­ï¼Œ$w=\hat{w}_t-b_{w_t}-n_w$</p>
<p>å¯¹äºåŸºäºå››å…ƒæ•°çš„IMUç§¯åˆ†ï¼Œè¿™é‡Œåšè¿›ä¸€æ­¥æ¨å¯¼ï¼Œ</p>
<p>å…¬å¼(1)çš„ IMU è¿ç»­å½¢å¼ä¸‹çš„æ—‹è½¬çŠ¶æ€æ¨å¯¼å¦‚ä¸‹ï¼Œé¦–å…ˆå¯å†™æˆï¼š  </p>
<script type="math/tex; mode=display">
\mathbf{q}^w_{b_{k+1} }=\mathbf{q}^w_{b_{k} }\otimes\int_{t\in[k,k+1]}\dot{\mathbf{q}}_tdt\tag{IA-1}</script><p>è®¾å››å…ƒæ•° $\mathbf{q}=[x,y,z,s]$ï¼Œç”±å››å…ƒæ•°çš„å·¦ä¹˜å³ä¹˜ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbf{q}_a\otimes\mathbf{q}_b
&=\mathcal{R}(\mathbf{q}_b)\otimes\mathbf{q}_a=
\begin{bmatrix}
s_b&z_b&-y_b&x_b\\
-z_b&s_b&x_b&y_b\\
y_b&-x_b&s_b&z_b\\
-x_b&-y_b&-z_b&s_b\\
\end{bmatrix}
\begin{bmatrix}x_a\\y_a\\z_a\\s_a\end{bmatrix}
\\
&=\mathcal{L}(\mathbf{q}_a)\otimes\mathbf{q}_b=
\begin{bmatrix}
s_a&-z_a&y_a&x_a\\
z_a&s_a&-x_a&y_a\\
-y_a&x_a&s_a&z_a\\
-x_a&-y_a&-z_a&s_a\\
\end{bmatrix}
\begin{bmatrix}x_b\\y_b\\z_b\\s_b\end{bmatrix}
\end{align*}\tag{IA-2}</script><p>ä¸ºäº†ç®€åŒ–ä»¥ä¸Šçš„å½¢å¼ï¼Œæˆ‘ä»¬è®¾å››å…ƒæ•° $\mathbf{q}=[x,y,z,s]$ä¸º $\mathbf{q}=[w,s]$ï¼Œåˆ™ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{R}(\mathbf{q}_a)&=\Omega(w)+sI_{4\times4}
=\begin{bmatrix}-w^{\land}&w\\-w^T&0\end{bmatrix}+sI_{4\times4}\\
\mathcal{L}(\mathbf{q}_a)&=\Psi(w)+sI_{4\times4}
=\begin{bmatrix}w^{\land}&w\\-w^T&0\end{bmatrix}+sI_{4\times4}
\end{align*}\tag{IA-3}</script><p> å› æ­¤ï¼Œå¯ä»¥æ¨å¯¼<strong>å››å…ƒæ•°çš„å¯¼æ•°</strong>ï¼šè¿™é‡Œä¹Ÿå¯ä»¥å‚è€ƒï¼š<a href="https://lukeyalvin.top/posts/28639.html#B-%E5%9B%9B%E5%85%83%E6%95%B0">å››å…ƒæ•°æ±‚å¯¼</a></p>
<script type="math/tex; mode=display">
\begin{align*}
\dot{\mathbf{q} }_t
&=\underset{\delta t}{\lim}\frac{1}{\delta t}
(\mathbf{q}_{t+\delta t}-\mathbf{q}_t)\\
&=\underset{\delta t}{\lim}\frac{1}{\delta t}
(\mathbf{q}_t\otimes\mathbf{q}^t_{t+\delta t}-\mathbf{q}_t\otimes
\begin{bmatrix}0\\1\end{bmatrix})\\
&=\underset{\delta t}{\lim}\frac{1}{\delta t}
\left(
\mathbf{q}_t\otimes\begin{bmatrix}\mathbf{n}\sin\frac{\theta}{2}\\\cos
\frac{\theta}{2}\end{bmatrix}-\mathbf{q}_t\otimes
\begin{bmatrix}0\\1\end{bmatrix}
\right)\\
&\approx\underset{\delta t}{\lim}\frac{1}{\delta t}
\left(
\mathbf{q}_t\otimes\begin{bmatrix}\mathbf{n}\frac{\theta}{2}\\1\end{bmatrix}-\mathbf{q}_t\otimes
\begin{bmatrix}0\\1\end{bmatrix}
\right)\\
&=\underset{\delta t}{\lim}\frac{1}{\delta t}
\left[
\mathcal{R}\left(\begin{bmatrix}\mathbf{n}\frac{\theta}{2}\\1\end{bmatrix}\right)-
\mathcal{R}\left(\begin{bmatrix}0\\1\end{bmatrix}\right)
\right]\mathbf{q}_t\\
&=\underset{\delta t}{\lim}\frac{1}{\delta t}
\begin{bmatrix}
-\frac{\theta\mathbf{n}}{2}^{\land}
&\frac{\theta\mathbf{n}}{2}\\
-\frac{\theta\mathbf{n}}{2}^T&0
\end{bmatrix}\mathbf{q}_t
\end{align*}\tag{IA-4}</script><p>å…¶ä¸­ï¼Œ$\mathbf{n}$ è¡¨ç¤ºæ—‹è½¬è½´ï¼Œè€Œè§’é€Ÿåº¦å®šä¹‰æœ‰ï¼š$w=\underset{\delta t}{\lim}\frac{\mathbf{n}\theta}{\delta t}$ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\dot{\mathbf{q} }_t
=\frac{1}{2}\begin{bmatrix}-w^{\land}&w\\-w^T&0\end{bmatrix}\mathbf{q}_t
=\frac{1}{2}\Omega(w)\mathbf{q}_t
=\frac{1}{2}\mathcal{R}\left(\begin{bmatrix}w\\0\end{bmatrix}\right)\mathbf{q}_t
=\frac{1}{2}\mathbf{q}_t\otimes\begin{bmatrix}w\\0\end{bmatrix}\tag{IA-5}</script><h3 id="B-ä¸­å€¼æ³•ç¦»æ•£å½¢å¼"><a href="#B-ä¸­å€¼æ³•ç¦»æ•£å½¢å¼" class="headerlink" title="B.ä¸­å€¼æ³•ç¦»æ•£å½¢å¼"></a>B.ä¸­å€¼æ³•ç¦»æ•£å½¢å¼</h3><p>å…¬å¼ $(1)$ ç»™å‡ºçš„æ˜¯è¿ç»­æ—¶åˆ»çš„ç›¸æœºå½“å‰ PVQ çš„è¿­ä»£å…¬å¼ï¼Œå®é™…ä¸Šï¼ŒIMUåœ¨å·¥ä½œçš„æ—¶å€™æ˜¯ç¦»æ•£é‡‡é›†æ•°æ®ï¼Œæ‰€ä»¥ä»£ç ä¸­ä½¿ç”¨çš„ä¹Ÿæ˜¯ç¦»æ•£å½¢å¼ï¼Œä¸ºäº†è·Ÿä»£ç ä¸€è‡´ï¼Œä¸‹é¢ç»™å‡ºåŸºäºä¸­å€¼æ³•çš„å…¬å¼ï¼Œï¼ˆè¿˜æœ‰åŸºäºæ¬§æ‹‰æ³•çš„å…¬å¼ï¼Œä½†æ˜¯ä»£ç ä¸­ä½¿ç”¨çš„æ˜¯å‰è€…ï¼‰ï¼Œ å³ä»ç¬¬ $i$ ä¸ª IMU æ—¶åˆ»åˆ°ç¬¬ $i+1$ ä¸ª IMU æ—¶åˆ»çš„ç§¯åˆ†è¿‡ç¨‹ï¼Œ è¿™ä¸ <code>Estimator::processIMU()</code> å‡½æ•°ä¸­çš„ <code>Ps[j]</code>ã€ <code>Rs[j]</code> å’Œ <code>Vs[j]</code> æ˜¯ä¸€è‡´çš„ï¼Œï¼ˆä»£ç ä¸­çš„ $j$ æ—¶åˆ»å³ä¸ºæ­¤å¤„çš„ $i+1$ï¼‰ï¼ŒIMU ç§¯åˆ†å‡ºæ¥çš„ç¬¬ $j$ æ—¶åˆ»çš„ç‰©ç†é‡å¯ä»¥ä½œä¸ºç¬¬ $j$ å¸§å›¾åƒçš„åˆå§‹å€¼ã€‚  </p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbf{p}^w_{b_{i+1} }&=\mathbf{p}^w_{b_i}+\mathbf{v}^w_{b_i}\delta t+\frac{1}{2}\overline{\hat{a} }_i\delta t^2\\
\mathbf{v}^w_{b_{i+1} }&=\mathbf{v}^w_{b_i}+\overline{\hat{a} }_i\delta t\\
\mathbf{q}^w_{b_{i+1} }&=\mathbf{q}^w_{b_i}\otimes
\begin{bmatrix} 1\\\frac{1}{2}\overline{\hat{w} }_i\delta t \end{bmatrix}
\end{align*}\tag{5}</script><p>å…¶ä¸­ä½¿ç”¨ mid-point æ–¹æ³•ï¼Œå³ä¸¤ä¸ªç›¸é‚»æ—¶åˆ» $i$ åˆ° $j$ çš„ä½å§¿æ˜¯ç”¨ä¸¤ä¸ªæ—¶åˆ»çš„æµ‹é‡å€¼ $ a,w $ çš„å¹³å‡å€¼æ¥è®¡ç®—ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\overline{\hat{a} }_i&=\frac{1}{2}
[\mathbf{q}_i(\hat{a}_i-b_{a_i})-g^w+\mathbf{q}_{i+1}(\hat{a}_{i+1}-b_{a_i})-g^w]\\
\overline{\hat{w} }_i&=\frac{1}{2}(\hat{w}_i+\hat{w}_{i+1})-b_{w_i}
\end{align*}\tag{6}</script><h2 id="â…¡-ä¸¤å¸§ä¹‹é—´-PVQ"><a href="#â…¡-ä¸¤å¸§ä¹‹é—´-PVQ" class="headerlink" title="â…¡. ä¸¤å¸§ä¹‹é—´ PVQ"></a>â…¡. ä¸¤å¸§ä¹‹é—´ PVQ</h2><h3 id="A-è¿ç»­å½¢å¼-1"><a href="#A-è¿ç»­å½¢å¼-1" class="headerlink" title="A.è¿ç»­å½¢å¼"></a>A.è¿ç»­å½¢å¼</h3><p>è§‚å¯Ÿå…¬å¼ $(3)$ å¯çŸ¥ï¼Œ IMU çš„é¢„ç§¯åˆ†éœ€è¦ä¾èµ–ä¸ç¬¬ $k$ å¸§çš„ $\mathbf{v}$ å’Œ $\mathbf{R}$ ï¼Œå½“æˆ‘ä»¬åœ¨åç«¯è¿›è¡Œéçº¿æ€§ä¼˜åŒ–æ—¶ï¼Œéœ€è¦è¿­ä»£æ›´æ–°ç¬¬ $k$ å¸§çš„ $\mathbf{v}$ å’Œ $\mathbf{R}$ ï¼Œè¿™å°†å¯¼è‡´æˆ‘ä»¬éœ€è¦æ ¹æ®æ¯æ¬¡è¿­ä»£åå€¼é‡æ–°è¿›è¡Œç§¯åˆ†ï¼Œè¿™å°†éå¸¸è€—æ—¶ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬è€ƒè™‘å°†ä¼˜åŒ–å˜é‡ä»ç¬¬ $k$ å¸§åˆ°ç¬¬ $k+1$ å¸§çš„ IMU é¢„ç§¯åˆ†é¡¹ä¸­åˆ†ç¦»å¼€æ¥ï¼Œ é€šè¿‡å¯¹å…¬å¼ $(3)$ å·¦å³ä¸¤ä¾§å„ä¹˜ $\mathbf{R}^{b_k}_{w}$ï¼Œå¯åŒ–ç®€ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbf{R}^{b_k}_w\mathbf{p}^w_{b_{k+1} }&=\mathbf{R}^{b_k}_w(\mathbf{p}^w_{b_k}+\mathbf{v}^w_{b_k}\Delta t_k-
\frac{1}{2}g^w\Delta t_k^2)+\alpha^{b_k}_{b_{k+1} }\\
\mathbf{R}^{b_k}_w\mathbf{v}^w_{b_{k+1} }&=
\mathbf{R}^{b_k}_w(\mathbf{v}^w_{b_k}-g^w\Delta t_k)+\beta^{b_k}_{b_{k+1} }\\
\mathbf{q}^{b_k}_w\otimes\mathbf{q}^w_{b_{k+1} }&=\gamma^{b_k}_{b_{k+1} }
\end{align*}\tag{7}</script><p>å…¶ä¸­ï¼Œ</p>
<script type="math/tex; mode=display">
\begin{align*}
\alpha^{b_k}_{b_{k+1} }&=\iint_{t\in[t_k, t_{k+1}]}\mathbf{R}^{b_k}_t(\hat{a}_t-b_{a_t}-n_a)dt^2\\
\beta ^{b_k}_{b_{k+1} }&=\int_{t\in[t_k, t_{k+1}]}\mathbf{R}^{b_k}_t(\hat{a}_t-b_{a_t}-n_a)dt\\
\gamma^{b_k}_{b_{k+1} }&= \int_{t\in[t_k, t_{k+1}]}
\frac{1}{2}\Omega(\hat{w}_t-b_{w_t}-n_w)\gamma^{b_k}_tdt
\end{align*}\tag{8}</script><p>å¯ä»¥çœ‹å‡ºï¼Œé¢„ç§¯åˆ†é¡¹ $(8)$ å¯ä»¥ä»…é€šè¿‡ä»¥ $b_k$ (è¡¨ç¤ºç¬¬ $k$ å¸§æ—¶çš„æœ¬ä½“åæ ‡ç³») ä½œä¸ºå‚è€ƒç³»çš„ IMU æµ‹é‡æ¥è·å¾—ã€‚</p>
<p> $\alpha^{b_k}_{b_{k+1} },\beta^{b_k}_{b_{k+1} },\gamma^{b_k}_{b_{k+1} }$ ä¸IMUçš„ $bais$ æœ‰å…³ï¼Œè€Œ $bais$ ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦ä¼˜åŒ–çš„å˜é‡ï¼Œè¿™å°†å¯¼è‡´çš„é—®é¢˜æ˜¯ï¼Œå½“æ¯æ¬¡è¿­ä»£æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæ–°çš„ $bais$ ï¼Œåˆå¾—æ ¹æ®å…¬å¼ $(8)$ é‡æ–°å¯¹ç¬¬ $k$ å¸§å’Œç¬¬ $k+1$ å¸§ä¹‹é—´çš„ IMU é¢„ç§¯åˆ†ï¼Œéå¸¸è€—æ—¶ã€‚</p>
<p>å½“ $bais$ çš„ä¼°è®¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚æœå˜åŒ–å¾ˆå°ï¼Œæˆ‘ä»¬é€šè¿‡å®ƒä»¬å¯¹ $bais$ çš„ä¸€é˜¶è¿‘ä¼¼æ¥è°ƒæ•´ $\alpha^{b_k}_{b_{k+1} },\beta^{b_k}_{b_{k+1} },\gamma^{b_k}_{b_{k+1} }$ ï¼Œå¦åˆ™æˆ‘ä»¬è¿›è¡Œé‡æ–°ä¼ æ’­ã€‚è¿™ç§ç­–ç•¥ä¸ºåŸºäºä¼˜åŒ–çš„ç®—æ³•èŠ‚çœäº†å¤§é‡çš„è®¡ç®—èµ„æºï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦é‡å¤ä¼ æ’­ IMU æµ‹é‡ã€‚ä¸€é˜¶è¿‘ä¼¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\alpha^{b_k}_{b_{k+1} }&\approx \hat{\alpha}^{b_k}_{b_{k+1} }+\mathbf{J}^{\alpha}_{b_a}\delta b_{a_k}+\mathbf{J}^{\alpha}_{b_w}\delta b_{w_k}
\\
\beta^{b_k}_{b_{k+1} }&\approx \hat{\beta}^{b_k}_{b_{k+1} }+\mathbf{J}^{\beta}_{b_a}\delta b_{a_k}+\mathbf{J}^{\beta}_{b_w}\delta b_{w_k}
\\
\gamma^{b_k}_{b_{k+1} }&\approx \hat{\gamma}^{b_k}_{b_{k+1} }\otimes
\begin{bmatrix}1\\\frac{1}{2}\mathbf{J}^{\gamma}_{b_w}\delta b_{w_k} \end{bmatrix}
\end{align*}\tag{9}</script><p>å…¶ä¸­ $\mathbf{J}^{\alpha}_{b_a}$ å’Œ æ˜¯ $\mathbf{J}^{\alpha}_{b_{k+1} }$ ä¸­çš„å­å—çŸ©é˜µï¼Œå…¶ä½ç½®å¯¹åº”äº $\frac{\delta\alpha^{b_k}_{b_{k+1} } }{\delta b_{a_k} }$ ã€‚ $\mathbf{J}^{\alpha}_{b_w}ã€\mathbf{J}^{\beta}_{b_a}ã€\mathbf{J}^{\beta}_{b_w}ã€\mathbf{J}^{\gamma}_{b_w}$ ä¹Ÿä½¿ç”¨ç›¸åŒçš„å«ä¹‰ã€‚</p>
<h3 id="B-ç¦»æ•£å½¢å¼"><a href="#B-ç¦»æ•£å½¢å¼" class="headerlink" title="B.ç¦»æ•£å½¢å¼"></a>B.ç¦»æ•£å½¢å¼</h3><h4 id="æ¬§æ‹‰æ³•"><a href="#æ¬§æ‹‰æ³•" class="headerlink" title="æ¬§æ‹‰æ³•"></a>æ¬§æ‹‰æ³•</h4><p>ä¸‹é¢ç»™å‡ºç¦»æ•£æ—¶åˆ»çš„ IMU é¢„ç§¯åˆ†å…¬å¼ï¼Œ é¦–å…ˆæŒ‰ç…§<strong>è®ºæ–‡ä¸­é‡‡ç”¨çš„æ¬§æ‹‰æ³•</strong>ï¼Œ ç»™å‡ºç¬¬ $i$ ä¸ª IMU<br>æ—¶åˆ»ä¸ç¬¬ $i+1$ ä¸ª IMU æ—¶åˆ»çš„å˜é‡å…³ç³»ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
\hat{\alpha}^{b_k}_{i+1}&=\hat{\alpha}^{b_k}_{i}+\hat{\beta}^{b_k}_{i}\delta t+\frac{1}{2}\overline{\hat{a} }_i^{\prime}\delta t^2\\
\hat{\beta}^{b_k}_{i+1}&=\hat{\beta}^{b_k}_{i}+\overline{\hat{a} }_i^{\prime}\delta t\\
\hat{\gamma}^{b_k}_{i+1}&=
\hat{\gamma}^{b_k}_{i}\otimes\hat{\gamma}^{i}_{i+1}
=\hat{\gamma}^{b_k}_{i}\otimes
\begin{bmatrix}1\\\frac{1}{2}\overline{\hat{w} }_i^{\prime}\delta t\end{bmatrix}
\\
\end{align*}\tag{10}</script><p>ä½¿ç”¨æ¬§æ‹‰æ³•ï¼Œå³ä¸¤ä¸ªç›¸é‚»æ—¶åˆ» $i$ åˆ° $i+1$çš„ä½å§¿æ˜¯ç”¨ç¬¬ $i$ æ—¶åˆ»çš„æµ‹é‡å€¼ $\overline{\hat{a} }_i^{\prime}, \overline{\hat{w} }_i^{\prime}$ æ¥è®¡ç®—:</p>
<script type="math/tex; mode=display">
\begin{align*}
\overline{\hat{a} }_i^{\prime}&=\mathbf{R}(\hat{\gamma}^{b_k}_{i})(\hat{a}_i-b_{a_i})\\
\overline{\hat{w} }_i^{\prime}&=\hat{w}_i-b_{w_i}
\end{align*}\tag{11}</script><h4 id="ä¸­å€¼æ³•"><a href="#ä¸­å€¼æ³•" class="headerlink" title="ä¸­å€¼æ³•"></a>ä¸­å€¼æ³•</h4><p>ä¸‹é¢ç»™å‡º<strong>ä»£ç ä¸­é‡‡ç”¨çš„åŸºäºä¸­å€¼æ³•</strong>çš„ IMU é¢„ç§¯åˆ†å…¬å¼ï¼Œè¿™ä¸ <code>Estimator::processIMU()</code> å‡½<br>æ•°ä¸­çš„ <code>IntegrationBase::push_back()</code>ä¸Šæ˜¯ä¸€è‡´çš„ã€‚æ³¨æ„è¿™é‡Œè·Ÿå…¬å¼ $(5)$ æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™é‡Œç§¯åˆ†å‡ºæ¥çš„æ˜¯å‰åä¸¤å¸§ä¹‹é—´çš„ IMU å¢é‡ä¿¡æ¯ï¼Œè€Œå…¬å¼ $(5)$ ç»™å‡ºçš„å½“å‰å¸§æ—¶åˆ»çš„ç‰©ç†é‡ä¿¡æ¯ã€‚  </p>
<script type="math/tex; mode=display">
\begin{align*}
\hat{\alpha}^{b_k}_{i+1}&=\hat{\alpha}^{b_k}_{i}+\hat{\beta}^{b_k}_{i}\delta t+\frac{1}{2}\overline{\hat{a} }_i^{\prime} \delta t^2\\
\hat{\beta}^{b_k}_{i+1}&=\hat{\beta}^{b_k}_{i}+\overline{\hat{a} }_i^{\prime}\delta t\\
\hat{\gamma}^{b_k}_{i+1}&=
\hat{\gamma}^{b_k}_{i}\otimes\hat{\gamma}^{i}_{i+1}
=\hat{\gamma}^{b_k}_{i}\otimes
\begin{bmatrix}1\\\frac{1}{2}\overline{\hat{w} }_i^{\prime}\delta t\end{bmatrix}
\\
\end{align*}\tag{12}</script><p>å…¶ä¸­ï¼Œ  </p>
<script type="math/tex; mode=display">
\begin{align*}
\overline{\hat{a} }_i^{\prime}&=\frac{1}{2}
[\mathbf{q}_i(\hat{a}_i-b_{a_i})+\mathbf{q}_{i+1}(\hat{a}_{i+1}-b_{a_i})]\\
\overline{\hat{w} }_i^{\prime}&=\frac{1}{2}(\hat{w}_i+\hat{w}_{i+1})-b_{w_i}
\end{align*}\tag{13}</script>]]></content>
      <categories>
        <category>VINS</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>VINS</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title>VINS-Mono_1-æ€»ä½“æ¡†æ¶</title>
    <url>/posts/3cf7a3c1.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>VINSæ˜¯ç”±é¦™æ¸¯ç§‘æŠ€å¤§å­¦ç§¦é€šç­‰äººï¼Œäº2018å¹´æå‡ºçš„ä¸€ç§å¼ºå¤§ä¸”é€šç”¨çš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨ï¼Œæ˜¯åˆå­¦è€…æ¥è§¦VIO æ¯”è¾ƒå¥½çš„å¼€æºå­¦ä¹ èµ„æ–™ï¼Œä½œè€…çš„è®ºæ–‡æ¡ç†æ¸…æ™°ï¼Œåˆ†ä¸ºäº”ä¸ªä¸»è¦éƒ¨åˆ†å¯¹è¯¥ç³»ç»Ÿå±•å¼€æè¿°ï¼šæµ‹é‡é¢„å¤„ç†ã€åˆå§‹åŒ–ã€åç«¯éçº¿æ€§ä¼˜åŒ–ã€é—­ç¯æ£€æµ‹ã€é—­ç¯ä¼˜åŒ–ã€‚<strong>æœ¬èŠ‚ä»‹ç»æ•´ä½“æ¡†æ¶ã€‚</strong></p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><img src="/images/VINS-Mono-1-æ€»ä½“æ¡†æ¶/image-20220520195226204.png" alt="image-20220520195226204"></p>
<p>VINS çš„åŠŸèƒ½æ¨¡å—å¦‚å›¾æ‰€ç¤ºï¼Œå¯ä»¥åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼šæµ‹é‡é¢„å¤„ç†ã€åˆå§‹åŒ–ã€åç«¯éçº¿æ€§ä¼˜åŒ–ã€é—­ç¯æ£€æµ‹ã€é—­ç¯ä¼˜åŒ–ï¼›ä»£ç ä¸­ä¸»è¦å¼€å¯äº†å››ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«æ˜¯ï¼šå‰ç«¯å›¾åƒè·Ÿè¸ªã€åç«¯éçº¿æ€§ä¼˜åŒ–ï¼ˆå…¶ä¸­åˆå§‹åŒ–å’Œ IMU é¢„ç§¯åˆ†åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­ï¼‰ã€é—­ç¯æ£€æµ‹ã€é—­ç¯ä¼˜åŒ–ã€‚  </p>
<h2 id="1-é¢„å¤„ç†"><a href="#1-é¢„å¤„ç†" class="headerlink" title="1. é¢„å¤„ç†"></a>1. é¢„å¤„ç†</h2><p>é¢„å¤„ç†ä¸»è¦æŒ‡çš„æ˜¯è§†è§‰å‰ç«¯é‡Œçš„å›¾åƒå¤„ç†ä»¥åŠIMU æµ‹é‡é‡çš„å¤„ç†ã€‚</p>
<p><strong>å›¾åƒï¼š</strong>æå–å›¾åƒ Harris è§’ç‚¹ï¼Œ åˆ©ç”¨<strong>é‡‘å­—å¡”å…‰æµ</strong>è·Ÿè¸ªç›¸é‚»å¸§ï¼Œåˆ©ç”¨<strong>åŸºç¡€çŸ©é˜µæ¨¡å‹çš„RANSACç®—æ³•</strong>è¿›è¡Œå¼‚å¸¸ç‚¹å‰”é™¤  ï¼Œæœ€åå°†è·Ÿè¸ªåˆ°çš„ç‰¹å¾ç‚¹ push åˆ°å›¾åƒé˜Ÿåˆ—ä¸­ï¼Œå¹¶é€šçŸ¥åç«¯è¿›è¡Œå¤„ç†ã€‚  </p>
<p>å¦å¤–ï¼Œåœ¨æ­¤æ­¥éª¤ä¸­è¿˜é€‰æ‹©äº†å…³é”®å¸§ã€‚  å¹¶å®šä¹‰ä¸¤ç§é€‰æ‹©å…³é”®å¸§çš„æ ‡å‡†ï¼šâ‘  ä¸ä¸Šä¸€ä¸ªå…³é”®å¸§çš„å¹³å‡è§†å·®å’ŒæŸä¸ªç‰¹å®šé˜ˆå€¼ç›¸æ¯”è¾ƒï¼›â‘¡ è·Ÿè¸ªè´¨é‡ã€‚</p>
<p><strong>IMUï¼š</strong> å°† IMU æ•°æ®è¿›è¡Œç§¯åˆ†ï¼Œå¾—åˆ°å½“å‰æ—¶åˆ»çš„ä½ç½®ã€é€Ÿåº¦å’Œæ—‹è½¬ï¼ˆ <strong>PVQ</strong>ï¼‰ï¼ŒåŒæ—¶è®¡ç®—åœ¨åç«¯ä¼˜åŒ–ä¸­å°†ç”¨åˆ°çš„ç›¸é‚»å¸§çš„<strong>é¢„ç§¯åˆ†å¢é‡</strong>ï¼ŒåŠé¢„ç§¯åˆ†è¯¯å·®çš„ <strong>Jacobian çŸ©é˜µ</strong>å’Œ<strong>åæ–¹å·®é¡¹</strong>ã€‚ </p>
<p>è¿™é‡Œæ¶‰åŠåŸºäºå››å…ƒæ•°çš„ IMU æ¨å¯¼è¿‡ç¨‹ï¼Œå…·ä½“æŸ¥çœ‹ï¼š</p>
<p>LKå…‰æµæ³•ï¼š<a href="https://blog.csdn.net/sgfmby1994/article/details/68489944">æ€»ç»“ï¼šå…‰æµâ€”LKå…‰æµâ€”åŸºäºé‡‘å­—å¡”åˆ†å±‚çš„LKå…‰æµâ€”ä¸­å€¼æµ</a></p>
<p>åŸºç¡€çŸ©é˜µæ¨¡å‹çš„RANSACç®—æ³•ï¼š<a href="https://blog.csdn.net/qq_38898129/article/details/93982154">è®¡ç®—æœºè§†è§‰ï¼šRANSACå‰”é™¤åŸºç¡€çŸ©é˜µFé”™è¯¯åŒ¹é…(Pythonå®ç°)</a></p>
<h2 id="2-åˆå§‹åŒ–"><a href="#2-åˆå§‹åŒ–" class="headerlink" title="2. åˆå§‹åŒ–"></a>2. åˆå§‹åŒ–</h2><p>é¦–å…ˆï¼Œ åˆ©ç”¨ SFM è¿›è¡Œçº¯è§†è§‰ä¼°è®¡æ»‘çª—å†…æ‰€æœ‰å¸§çš„ä½å§¿åŠ 3D ç‚¹é€†æ·±åº¦ï¼Œ æœ€åä¸ IMU é¢„<br>ç§¯åˆ†è¿›è¡Œå¯¹é½æ±‚è§£åˆå§‹åŒ–å‚æ•° ã€‚</p>
<p>SfMç®—æ³•ï¼š<a href="https://zhuanlan.zhihu.com/p/55712813">åŸºäºå•ç›®è§†è§‰çš„ä¸‰ç»´é‡å»ºç®—æ³•ç»¼è¿°</a>ã€<a href="https://blog.csdn.net/qq_20791919/article/details/74936438">SFMç®—æ³•æµç¨‹</a>ã€<a href="https://blog.csdn.net/Mahabharata_/article/details/70799695">[CV] Structure from motionï¼ˆSFMï¼‰- é™„æˆ‘çš„å®ç°ç»“æœ</a></p>
<p>é€†æ·±åº¦ï¼š<a href="https://blog.csdn.net/weixin_39568744/article/details/88582406">SLAMä¸­çš„é€†æ·±åº¦åŠå‚æ•°åŒ–é—®é¢˜</a></p>
<h2 id="3-åç«¯æ»‘çª—ä¼˜åŒ–"><a href="#3-åç«¯æ»‘çª—ä¼˜åŒ–" class="headerlink" title="3. åç«¯æ»‘çª—ä¼˜åŒ–"></a>3. åç«¯æ»‘çª—ä¼˜åŒ–</h2><p>å°†è§†è§‰çº¦æŸï¼ˆè§†è§‰æµ‹é‡æ®‹å·®ï¼‰ã€ IMU çº¦æŸï¼ˆIMUæµ‹é‡æ®‹å·®ï¼‰å’Œé—­ç¯çº¦æŸæ”¾åœ¨ä¸€ä¸ªå¤§çš„ç›®æ ‡å‡½æ•°ä¸­è¿›è¡Œéçº¿æ€§ä¼˜åŒ–ï¼Œæ±‚è§£æ»‘çª—å†…æ‰€æœ‰å¸§çš„ PVQã€ bias ç­‰ ã€‚</p>
<h2 id="4-é—­ç¯æ£€æµ‹å’Œä¼˜åŒ–"><a href="#4-é—­ç¯æ£€æµ‹å’Œä¼˜åŒ–" class="headerlink" title="4. é—­ç¯æ£€æµ‹å’Œä¼˜åŒ–"></a>4. é—­ç¯æ£€æµ‹å’Œä¼˜åŒ–</h2><p>åˆ©ç”¨ DBoW è¿›è¡Œ<strong>é—­ç¯æ£€æµ‹</strong>ï¼Œå½“æ£€æµ‹æˆåŠŸåè¿›è¡Œ<strong>é‡å®šä½</strong>ï¼Œæœ€åå¯¹æ•´ä¸ªç›¸æœºè½¨è¿¹è¿›è¡Œ<strong>é—­ç¯ä¼˜</strong><br><strong>åŒ–</strong>ã€‚  </p>
]]></content>
      <categories>
        <category>VINS</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>VINS</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸ƒã€æ»‘åŠ¨çª—å£ç®—æ³•</title>
    <url>/posts/a39e0cda.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>éšç€ VSLAM ç³»ç»Ÿä¸æ–­å¾€æ–°ç¯å¢ƒæ¢ç´¢ï¼Œå°±ä¼šæœ‰æ–°çš„ç›¸æœºå§¿æ€ä»¥åŠçœ‹åˆ°æ–°çš„ç¯å¢ƒç‰¹å¾ï¼Œæœ€å°äºŒä¹˜æ®‹å·®å°±ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¿¡æ¯çŸ©é˜µè¶Šæ¥è¶Šå¤§ï¼Œè®¡ç®—é‡å°†ä¸æ–­å¢åŠ ã€‚ä¸ºäº†ä¿æŒä¼˜åŒ–å˜é‡çš„ä¸ªæ•°åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œéœ€è¦ä½¿ç”¨æ»‘åŠ¨çª—å£ç®—æ³•åŠ¨æ€å¢åŠ æˆ–ç§»é™¤ä¼˜åŒ–å˜é‡ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>åœ¨å­¦ä¹ æ»‘åŠ¨çª—å£ç®—æ³•ä¹‹å‰ï¼Œæ¨èè¯»è€…å…ˆé˜…è¯»ï¼Œ<a href="https://lukeyalvin.top/posts/2613d057.html">SLAMä¸­çš„æ¦‚ç‡åŸºç¡€</a>ä»¥åŠ<a href="https://lukeyalvin.top/posts/48933.html#more">VSLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–</a>ï¼Œè¿™ä¸¤ç¯‡åšå®¢å¥ å®šäº†æœ¬æ–‡çš„åŸºç¡€ï¼Œæœ‰åŠ©äºå¯¹æœ¬æ–‡çš„ç†è§£ã€‚</p>
<h1 id="å¼•ä¾‹"><a href="#å¼•ä¾‹" class="headerlink" title="å¼•ä¾‹"></a>å¼•ä¾‹</h1><p>æˆ‘ä»¬çŸ¥é“ï¼ŒSLAMä¸­çš„ä¼˜åŒ–é—®é¢˜ï¼Œå°±æ˜¯ä¼˜åŒ–ä¸€ä¸ªæœ€å°äºŒä¹˜çš„é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬é¦–å…ˆä»‹ç»ä¸€ä¸ªå¼•ä¾‹ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå­˜åœ¨è¿™ä¹ˆä¸€ä¸ªå›¾æ¨¡å‹ï¼Œå¯¹äºå›¾æ¨¡å‹å¤§å®¶è‚¯å®šä¸æ˜¯å¾ˆé™Œç”Ÿï¼Œäº†è§£è¿‡g2oçš„éƒ½åº”è¯¥å¾ˆæ¸…æ¥šï¼Œå›¾ä¸­åœ†åœˆè¡¨ç¤ºé¡¶ç‚¹ï¼Œæ˜¯å¾…ä¼˜åŒ–çš„å˜é‡ï¼Œè€Œé¡¶ç‚¹ä¹‹é—´çš„è¾¹ï¼Œè¡¨ç¤ºçš„é¡¶ç‚¹ä¹‹é—´æ„å»ºçš„æ®‹å·®ã€‚</p>
<p><img src="/images/æ»‘åŠ¨çª—å£ç®—æ³•/image-20220513195856537.png" alt="image-20220513195856537" style="zoom:50%;" /></p>
<blockquote>
<p>å¼•è‡ªï¼šMatthew R Walter, Ryan M Eustice, and John J Leonard. â€œExactly sparse extended information filters for feature-based SLAMâ€. </p>
</blockquote>
<p>å¯¹äºè¿™æ ·ä¸€ä¸ªç³»ç»Ÿï¼Œæˆ‘ä»¬é¦–å…ˆæ„å»ºå‡ºæœ€å°äºŒä¹˜ï¼Œå¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\xi^*=\underset{\xi}{\arg\min}\frac{1}{2}\sum_i\parallel r_i \parallel^2_{\Sigma_i}\tag{1}</script><p>å…¶ä¸­ï¼Œ$\xi=[\xi_1,\xi_2,\xi_3,\xi_4,\xi_5,\xi_6]^T$ï¼Œ$r=[r_{12},r_{13},r_{14},r_{15},r_{56}]$</p>
<p>æ ¹æ®æ–‡ç« <a href="https://lukeyalvin.top/posts/48933.html#more">VSLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–</a>ä¸­æåˆ°çš„ï¼ŒSLAMä¼˜åŒ–é—®é¢˜ï¼Œæœ€ç»ˆè¿åŠ¨è§‚æµ‹æ–¹ç¨‹ä¼˜åŒ–çš„éƒ¨åˆ†æ˜¯<strong>é©¬æ°è·ç¦»</strong>ï¼Œæ®‹å·®é¡¹å³ä¸º<strong>é©¬æ°è·ç¦»</strong>:</p>
<script type="math/tex; mode=display">
\parallel r_i \parallel^2_{\Sigma_i}=r^T\Sigma^{-1}r\tag{2}</script><p>å…¶ä¸­ $\Sigma$ è¡¨ç¤ºæ®‹å·®çš„<strong>åæ–¹å·®çŸ©é˜µ</strong>ï¼Œ $\Sigma^{-1}$ è¡¨ç¤ºæ®‹å·®çš„<strong>ä¿¡æ¯çŸ©é˜µ</strong>ï¼Œå› æ­¤ï¼Œæ­¤å¤„ç›¸å½“äºä¸€ç§<strong>åŠ æƒçš„</strong>æœ€å°äºŒä¹˜é—®é¢˜ã€‚</p>
<p>åº”ç”¨é«˜æ–¯ç‰›é¡¿æ³•ï¼Œå¯ä»¥æ±‚è§£ä¸Šè¿°æœ€å°äºŒä¹˜é—®é¢˜çš„<strong>æ­£è§„æ–¹ç¨‹</strong>ï¼š</p>
<script type="math/tex; mode=display">
J^T\Sigma^{-1}J\ \delta\xi = -J^T\Sigma^{-1}\ r\tag{3}</script><p>å…¶ä¸­æµ·å¡çŸ©é˜µ $H=J^T\Sigma^{-1}J$ï¼ŒçŸ©é˜µ $g= -J^T\Sigma^{-1}\ r$ï¼Œé›…å¯æ¯”çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
J=\frac{\partial r}{\partial \xi}=\begin{bmatrix}
\frac{\partial r_{12} }{\partial \xi}\\\frac{\partial r_{13} }{\partial \xi}\\
\frac{\partial r_{14} }{\partial \xi}\\\frac{\partial r_{15} }{\partial \xi}\\
\frac{\partial r_{56} }{\partial \xi}
\end{bmatrix}=\begin{bmatrix}J_1\\J_2\\J_3\\J_4\\J_5\\J_6 \end{bmatrix}\tag{4}</script><p>å…¶ä¸­ï¼Œ$\xi=[\xi_1,\xi_2,\xi_3,\xi_4,\xi_5,\xi_6]^T$ï¼Œ$r=[r_{12},r_{13},r_{14},r_{15},r_{56}]$</p>
<p>çŸ©é˜µä¹˜æ³•å…¬å¼ $(3)$ å¯ä»¥å†™æˆè¿åŠ ï¼š</p>
<script type="math/tex; mode=display">
\sum^{5}_{i=1}J^T_i\Sigma^{-1}_i J_i\ \delta\xi=-\sum^{5}_{i=1}J^T_i\Sigma^{-1}_i\ r\tag{5}</script><p>ç”±äºæ¯ä¸ªæ®‹å·®åªå’ŒæŸå‡ ä¸ªçŠ¶æ€é‡æœ‰å…³ï¼Œå› æ­¤ï¼Œé›…å…‹æ¯”çŸ©é˜µæ±‚å¯¼æ—¶ï¼Œæ— å…³é¡¹çš„é›…å…‹æ¯”ä¸º 0ã€‚æ¯”å¦‚</p>
<script type="math/tex; mode=display">
J_2=\frac{\partial r_{13} }{\partial \xi}=
\begin{bmatrix}
\frac{\partial r_{13} }{\partial \xi_1}&0&
\frac{\partial r_{13} }{\partial \xi_3}&0&0&0
\end{bmatrix}\tag{6}</script><p>å¯¹åº”çš„æ–°çš„ä¿¡æ¯çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
Î›_2=J^T_2\Sigma^{-1}_2J_2=\begin{bmatrix}
(\frac{\partial r_{13} }{\partial \xi_1})^T\Sigma^{-1}_2\frac{\partial r_{13} }{\partial \xi_1}&0&(\frac{\partial r_{13} }{\partial \xi_1})^T\Sigma^{-1}_2\frac{\partial r_{13} }{\partial \xi_3}&0&0&0\\0&0&0&0&0&0\\
(\frac{\partial r_{13} }{\partial \xi_3})^T\Sigma^{-1}_2\frac{\partial r_{13} }{\partial \xi_1}&0&(\frac{\partial r_{13} }{\partial \xi_3})^T\Sigma^{-1}_2\frac{\partial r_{13} }{\partial \xi_3}&0&0&0\\
0&0&0&0&0&0\\0&0&0&0&0&0
\end{bmatrix}\tag{7}</script><p>åŒç†ï¼Œå¯ä»¥è®¡ç®— $Î›_1 , Î›_3 , Î›_4 , Î›_5 $ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯ç¨€ç–çš„ã€‚</p>
<p><strong>å°†äº”ä¸ªæ®‹å·®çš„ä¿¡æ¯çŸ©é˜µåŠ èµ·æ¥</strong>ï¼Œå¾—åˆ°æ ·ä¾‹æœ€ç»ˆçš„<strong>ä¿¡æ¯çŸ©é˜µ</strong> $Î›$ï¼Œå¯è§†åŒ–å¦‚ä¸‹ï¼š</p>
<p><img src="/images/æ»‘åŠ¨çª—å£ç®—æ³•/image-20220513203817364.png" alt="image-20220513203817364" style="zoom: 33%;" /></p>
<p>å…³äºç¨€ç–çŸ©é˜µã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¯ä»¥ç”¨èˆ’å°”æ¶ˆå…ƒæ³•æˆ–è€…ç§°ä¹‹ä¸ºè¾¹ç¼˜åŒ–ï¼Œæ¥ä½¿ä¹‹å˜å¾—ç¨ å¯†ï¼Œå‡å°‘è®¡ç®—é‡ã€‚</p>
<h1 id="åŸºäºè¾¹é™…æ¦‚ç‡çš„æ»‘åŠ¨çª—å£ç®—æ³•"><a href="#åŸºäºè¾¹é™…æ¦‚ç‡çš„æ»‘åŠ¨çª—å£ç®—æ³•" class="headerlink" title="åŸºäºè¾¹é™…æ¦‚ç‡çš„æ»‘åŠ¨çª—å£ç®—æ³•"></a>åŸºäºè¾¹é™…æ¦‚ç‡çš„æ»‘åŠ¨çª—å£ç®—æ³•</h1><h2 id="ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ç®—æ³•ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ç®—æ³•ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ç®—æ³•ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ç®—æ³•ï¼Ÿ</h2><p><strong>ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ç®—æ³•</strong></p>
<p>åœ¨å¼•ä¾‹çš„æ¡ä»¶ä¸‹ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSLAMé—®é¢˜æ„å»ºçš„æ®‹å·®çš„ä¿¡æ¯çŸ©é˜µæ˜¯ä¸€ä¸ªç¨€ç–çŸ©é˜µï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è®¨è®ºSLAMä¸­çš„æ»‘åŠ¨çª—å£ç®—æ³•ã€‚</p>
<p>æ‰€è°“çš„æ»‘åŠ¨çª—å£ç®—æ³•ï¼Œå¹¶æ²¡æœ‰æ˜ç¡®çš„å®šä¹‰ï¼Œæˆ‘åšäº†ä¸€ä¸ªåŠ¨å›¾ï¼Œå…¶å±•ç¤ºçš„è¿‡ç¨‹å°±æ˜¯æ»‘åŠ¨çª—å£ç®—æ³•ï¼š</p>
<p><img src="/images/æ»‘åŠ¨çª—å£ç®—æ³•/cell-16526620480511.gif" alt="cell"></p>
<p>**ä¸ºä»€ä¹ˆä½¿ç”¨æ»‘åŠ¨çª—å£ç®—æ³•ï¼Ÿ</p>
<p>é‚£ä¹ˆï¼Œä½¿ç”¨å®ƒæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿåœ¨æ–‡ç« å¼€ç¯‡çš„æ¦‚è¿°ä¸­å·²ç»æåŠï¼Œè¿™é‡Œå†åšå¼ºè°ƒï¼š</p>
<ul>
<li>éšç€ VSLAM ç³»ç»Ÿä¸æ–­å¾€æ–°ç¯å¢ƒæ¢ç´¢ï¼Œå°±ä¼šæœ‰æ–°çš„ç›¸æœºå§¿æ€ä»¥åŠçœ‹åˆ°æ–°çš„ç¯å¢ƒç‰¹å¾ï¼Œæœ€å°äºŒä¹˜æ®‹å·®å°±ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¿¡æ¯çŸ©é˜µè¶Šæ¥è¶Šå¤§ï¼Œè®¡ç®—é‡å°†ä¸æ–­å¢åŠ ã€‚</li>
<li>ä¸ºäº†ä¿æŒä¼˜åŒ–å˜é‡çš„ä¸ªæ•°åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œéœ€è¦ä½¿ç”¨æ»‘åŠ¨çª—å£ç®—æ³•åŠ¨æ€<strong>å¢åŠ æˆ–ç§»é™¤ä¼˜åŒ–å˜é‡</strong>ã€‚</li>
</ul>
<p>å…¶å®å®ƒçš„ä½œç”¨ä¹Ÿæ˜¯åŠ¨å›¾ä¸­å±•ç¤ºçš„ï¼Œæˆ‘ä»¬ä¼˜åŒ–çš„å˜é‡å°±æ˜¯çº¢è‰²æ¡†ä¸­çš„éƒ¨åˆ†ï¼Œå¤–éƒ¨çš„å˜é‡ä¸æ–­å¢åŠ è¿›æ¥ï¼Œä¸€äº›å†å²çš„å˜é‡åšæ¸…é™¤ã€‚</p>
<p><strong>æ»‘åŠ¨çª—å£ä¸­çš„å…³é”®é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>ä½†æ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘çš„å…³é”®å°±æ˜¯ï¼Œå¦‚ä½•å¢åŠ æˆ–è€…ç§»é™¤ï¼Ÿç›´æ¥ç§»é™¤å—ï¼Ÿæ¯”å¦‚å¼•ä¾‹ä¸­çš„å˜é‡ $\xi_1$å¦‚æœç›´æ¥æŠŠé¡¶ç‚¹è¿åŒè¾¹ä¸€èµ·ç§»é™¤ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å…¶ä»–å˜é‡ä¹‹é—´çš„è¾¹å¯å°±éƒ½æ²¡äº†ï¼Œè¾¹å°±æ˜¯è¯¯å·®é¡¹ï¼Œè¯¯å·®éƒ½æ²¡äº†ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿè¿™æ˜¯ä¸‹é¢æˆ‘ä»¬éœ€è¦ä»‹ç»çš„é‡è¦å†…å®¹ã€‚</p>
<p><strong>æ»‘åŠ¨çª—å£ç®—æ³•å¤§è‡´æµç¨‹</strong></p>
<p>â‘  å¢åŠ æ–°çš„å˜é‡è¿›å…¥æœ€å°äºŒä¹˜ç³»ç»Ÿä¼˜åŒ–</p>
<p>â‘¡ å¦‚æœå˜é‡æ•°ç›®è¾¾åˆ°äº†ä¸€å®šçš„ç»´åº¦ï¼Œåˆ™ç§»é™¤è€çš„å˜é‡ã€‚</p>
<p>â‘¢ SLAM ç³»ç»Ÿä¸æ–­å¾ªç¯å‰é¢ä¸¤æ­¥</p>
<h2 id="åŸºäºè¾¹é™…æ¦‚ç‡çš„æ»‘åŠ¨çª—å£ç®—æ³•-1"><a href="#åŸºäºè¾¹é™…æ¦‚ç‡çš„æ»‘åŠ¨çª—å£ç®—æ³•-1" class="headerlink" title="åŸºäºè¾¹é™…æ¦‚ç‡çš„æ»‘åŠ¨çª—å£ç®—æ³•"></a>åŸºäºè¾¹é™…æ¦‚ç‡çš„æ»‘åŠ¨çª—å£ç®—æ³•</h2><p>å…³äºè¿™é‡Œï¼Œæœ‰å¿…è¦å›é¡¾æ–‡ç« <a href="https://lukeyalvin.top/posts/2613d057.html">SLAMä¸­çš„æ¦‚ç‡åŸºç¡€</a>ä¸­çš„æ¡ˆä¾‹ï¼Œä¼šå¯¹æ­¤æœ‰æ›´åŠ æ·±åˆ»çš„ç†è§£ã€‚</p>
<p>ç›´æ¥ä¸¢å¼ƒå˜é‡å’Œå¯¹åº”çš„æµ‹é‡å€¼ï¼Œä¼šæŸå¤±ä¿¡æ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ç§â€œä¼˜é›…çš„â€æ–¹å¼ä¸¢æ‰å†å²ä¿¡æ¯ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨<strong>è¾¹é™…æ¦‚ç‡</strong>ï¼Œå°†ä¸¢å¼ƒå˜é‡æ‰€æºå¸¦çš„ä¿¡æ¯ä¼ é€’ç»™å‰©ä½™å˜é‡ã€‚æ„æ€å°±æ˜¯ï¼Œå†å²å˜é‡è™½ç„¶è¢«ç§»é™¤äº†ï¼Œä½†æ˜¯å®ƒçš„â€œå½±å“åŠ›â€è¿˜åœ¨ã€‚</p>
<p>è¿˜æ˜¯ç”¨å¼•ä¾‹ï¼Œæˆ‘ä»¬å°†å¼•ä¾‹ä¸­çš„å†å²å˜é‡ $\xi_1$ ä¸¢æ‰ï¼Œåº”è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ</p>
<blockquote>
<p>å¼•è‡ªï¼šMatthew R Walter, Ryan M Eustice, and John J Leonard. â€œExactly sparse extended information filters for feature-based SLAMâ€. </p>
</blockquote>
<p><img src="/images/æ»‘åŠ¨çª—å£ç®—æ³•/image-20220513210526896.png" alt="image-20220513210526896"></p>
<p>å¾ˆæ˜æ˜¾ï¼Œå»é™¤å†å²å˜é‡ $\xi_1$ ä¹‹åï¼Œå…¶ä»–å‡ºç°äº†äº’ç›¸ä¹‹é—´çš„å…³è”ï¼Œè¿™å°±æ˜¯è¯´å†å²å˜é‡ $\xi_1$ è™½ç„¶è¢«å»é™¤äº†ï¼Œä½†æ˜¯å®ƒæŠŠè‡ªå·±çš„ä¿¡æ¯ä¼ é€’ç»™å…¶ä»–å˜é‡äº†ï¼Œè™½ç„¶è‡ªå·±å‡‰äº†ï¼Œä½†æ˜¯å®Œæˆäº†ç«ç‚¬çš„ä¼ é€’ã€‚</p>
<p><strong>ç»“è®ºï¼š</strong><span style="color:red;"><strong>marginalization ä¼šä½¿å¾—ä¿¡æ¯çŸ©é˜µå˜ç¨ å¯†ï¼åŸå…ˆæ¡ä»¶ç‹¬ç«‹çš„å˜é‡ï¼Œå¯èƒ½å˜å¾—ç›¸å…³ã€‚</strong></span> å¦å¤–ï¼Œmargçš„è¿™ä¸€ç‰¹å¾ä¹Ÿç»™æˆ‘ä»¬å¯ç¤ºï¼Œå°±æ˜¯åœ¨SLAMè¿åŠ¨è§‚æµ‹æ¨¡å‹ä¸­ï¼Œmargç‰¹å¾ç‚¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦<strong>margé‚£äº›ä¸è¢«å…¶ä»–å¸§è§‚æµ‹åˆ°çš„ç‰¹å¾ç‚¹</strong>ã€‚å› ä¸ºä»–ä»¬ä¸ä¼šæ˜¾è‘—çš„ä½¿å¾— H å˜å¾—ç¨ å¯†ã€‚å¯¹äºé‚£äº›è¢«å…¶ä»–å¸§è§‚æµ‹åˆ°çš„ç‰¹å¾ç‚¹ï¼Œè¦ä¹ˆå°±åˆ«è®¾ç½®ä¸ºmargï¼Œè¦ä¹ˆå°±å®æ„¿ä¸¢å¼ƒï¼Œè¿™å°±æ˜¯okviså’Œdsoä¸­ç”¨åˆ°çš„ä¸€äº›ç­–ç•¥ã€‚</p>
<hr>
<p>é‚£ä¹ˆï¼Œå¦‚æœåœ¨ç§»é™¤å˜é‡ $\xi_1$ çš„åŒæ—¶ï¼ŒåŠ å…¥æ–°çš„å˜é‡ $\xi_7$ï¼Œæ•´ä¸ªä¿¡æ¯çŸ©é˜µåˆå¦‚ä½•å˜åŒ–å‘¢ï¼Ÿ</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ $t \in [0, k]$s æ—¶åˆ», ç³»ç»Ÿä¸­çŠ¶æ€é‡ä¸º $\xi_i , i \in [1, 6]$ã€‚</p>
<p>åœ¨ç¬¬ $k $ æ—¶åˆ»ï¼Œæœ€å°äºŒä¹˜ä¼˜åŒ–å®Œä»¥åï¼Œmarg æ‰å˜é‡ $\xi_1$  ã€‚è¢« marg çš„çŠ¶æ€é‡è®°ä¸º $x_m$ , å‰©ä½™çš„å˜é‡ $Î¾_i , i \in [2, 5]$ è®°ä¸º $x_r $ï¼Œmarg å‘ç”Ÿä»¥åï¼Œ $x_m$ æ‰€æœ‰çš„å˜é‡ä»¥åŠå¯¹åº”çš„æµ‹é‡å°†è¢«ä¸¢å¼ƒã€‚åŒæ—¶ï¼Œè¿™éƒ¨åˆ†ä¿¡æ¯é€šè¿‡ marg æ“ä½œä¼ é€’ç»™äº†ä¿ç•™å˜é‡ $x_r$ ã€‚</p>
<p>ç¬¬ $k^â€²$ æ—¶åˆ»ï¼ŒåŠ å…¥æ–°çš„è§‚æµ‹å’ŒçŠ¶æ€é‡  $\xi_7$ï¼Œæ–°çš„å˜é‡  $\xi_7$ è·Ÿè€çš„å˜é‡  $\xi_2$ ä¹‹é—´å­˜åœ¨è§‚æµ‹ä¿¡æ¯ï¼Œèƒ½æ„å»ºæ®‹å·® $r_{27}$ ã€‚ç„¶åå¼€å§‹æ–°ä¸€è½®æœ€å°äºŒä¹˜ä¼˜åŒ–ã€‚</p>
<p><img src="/images/æ»‘åŠ¨çª—å£ç®—æ³•/image-20220513213728826.png" alt="image-20220513213728826"></p>
<p>æ–°æ®‹å·®åŠ ä¸Šä¹‹å‰ <strong>marg ç•™ä¸‹çš„ä¿¡æ¯</strong>ï¼Œæ„å»ºæ–°çš„æœ€å°äºŒä¹˜ç³»ç»Ÿï¼Œå¯¹åº”çš„ä¿¡æ¯çŸ©é˜µçš„å˜åŒ–å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/æ»‘åŠ¨çª—å£ç®—æ³•/image-20220513212137697.png" alt="image-20220513212137697" style="zoom:40%;" /></p>
<p>æ³¨æ„ï¼š  $\xi_2$  è‡ªèº«çš„ä¿¡æ¯çŸ©é˜µç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†æ˜¯åŸæ¥çš„$Î›^{\prime}$  ä¸­çš„è€ä¿¡æ¯ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯æ–°ç”Ÿæˆçš„ $Î›_6$ä¸­çš„æ–°ä¿¡æ¯ï¼Œè¿™ä¼šä½¿å¾—ç³»ç»Ÿå­˜åœ¨<strong>æ½œåœ¨é£é™©</strong>ã€‚</p>
<p>æ–°è€ä¿¡æ¯èåˆçš„é—®é¢˜åœ¨äº<strong>æ—§çš„æ±‚è§£é›…å…‹æ¯”çŸ©é˜µçš„å˜é‡çº¿æ€§åŒ–ç‚¹å’Œå’Œæ–°çš„æ±‚è§£é›…å…‹æ¯”çŸ©é˜µçš„å˜é‡çº¿æ€§åŒ–ç‚¹ä¸åŒï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¿¡æ¯çŸ©é˜µçš„é›¶ç©ºé—´å‘ç”Ÿå˜åŒ–ï¼Œä½¿å¾—ä¸å®¢è§‚çš„å˜é‡å˜å¾—å¯è§‚ï¼Œä»è€Œå¼•å…¥é”™è¯¯ä¿¡æ¯</strong>ã€‚å¯¹äºé›¶ç©ºé—´çš„ä»‹ç»åœ¨åæ–‡ä¸­ã€‚</p>
<hr>
<p><span style="color:red;"><strong>marg ç•™ä¸‹çš„ä¿¡æ¯åˆ°åº•æ˜¯å•¥ï¼Ÿ</strong></span></p>
<p>marg å‘ç”Ÿåï¼Œç•™ä¸‹çš„åˆ°åº•æ˜¯ä»€ä¹ˆä¿¡æ¯ï¼Ÿ  </p>
<p>marg å‰ï¼Œå˜é‡ $x_m$ ï¼ˆæŒ‡å°†è¦è¢« marg çš„å˜é‡ï¼Œ$\xi_i,i=1$ï¼‰ä»¥åŠå¯¹åº”æµ‹é‡ $\mathcal{S}_m$ ï¼ˆæŒ‡çš„æ˜¯ä¸ $\xi_1$ æ„æˆçš„è¾¹ $r_{1j},j\in[2,5]$ï¼‰æ„å»ºçš„æœ€å°äºŒä¹˜ä¿¡æ¯çŸ©é˜µä¸ºï¼ˆä½¿ç”¨é«˜æ–¯ç‰›é¡¿ï¼‰ï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
b_m(k)&=
\begin{bmatrix}b_{mm}(k)\\b_{mr}(k)\end{bmatrix}
=-\sum_{(i,j)\in\mathcal{S}_m}J^T_{ij}(k)\Sigma^{-1}_{ij}r_{ij}\\
Î›_m(k)&=
\begin{bmatrix}Î›_{mm}(k)&Î›_{mr}(k)\\Î›_{rm}(k)&Î›_{rr}(k)\end{bmatrix}
=\sum_{(i,j)\in\mathcal{S}_m}J^T_{ij}(k)\Sigma^{-1}_{ij}J_{ij}(k)
\end{align*}\tag{8}</script><p>ç„¶åmargæ‰  $\xi_1$ ï¼Œå³ä¸¢æ‰å˜418133364é‡  $x_m$ ï¼Œ è€Œ $x_m$ çš„æµ‹é‡ä¿¡æ¯ï¼Œä¼ é€’ç»™äº†å˜é‡  $x_r$ ï¼ˆæŒ‡çš„æ˜¯ marg å‰©ä½™åçš„å˜é‡ $\xi_i,i\in[2,5]$ï¼‰:  </p>
<script type="math/tex; mode=display">
\begin{align*}
b_p(k)&=b_{mr}(k)-Î›_{rm}(k)Î›^{-1}_{mm}(k)b_{mm}(k)\\
Î›_p(k)&=Î›_{rr}(k)-Î›_{rm}(k)Î›^{-1}_{mm}(k)Î›_{mm}(k)
\end{align*}\tag{9}</script><p>ä¸‹æ ‡ p è¡¨ç¤º prior. å³è¿™äº›ä¿¡æ¯å°†æ„å»ºä¸€ä¸ªå…³äº $x_r$ çš„å…ˆéªŒä¿¡æ¯ã€‚</p>
<p>ç”±ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
Î›_p(k)\delta x&=b_p(k)\\
J^T_{p}(k)\Sigma^{-1}J_{p}(k)\ \delta x&= -J^T_{p}(k)\Sigma^{-1}r_p(k)
\end{align*}\tag{10}</script><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä» $b_p(k),Î›_p(k)$åè§£å‡ºä¸€ä¸ªæ®‹å·® $r_p(k)$ å’Œå¯¹åº”çš„é›…å¯æ¯”çŸ©é˜µ $J_{p}(k)$ ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯<strong>ï¼Œéšç€å˜é‡ $x_r(k)$ çš„åç»­ä¸æ–­ä¼˜åŒ–å˜åŒ–ï¼Œæ®‹å·® $r_p(k)$ æˆ–è€… $b_p(k)$ ä¹Ÿè·Ÿç€å˜æ¢ï¼Œä½†æ˜¯é›…å¯æ¯” $J_{p}(k)$ åˆ™å›ºå®šä¸å˜äº†ã€‚</strong></p>
<p>åœ¨ $k^â€²$ æ—¶åˆ»ï¼Œæ–°æ®‹å·® $r_{27}$ å’Œå…ˆéªŒä¿¡æ¯  $b_p(k),Î›_p(k)$ ä»¥åŠæ®‹å·® $r_{56}$ æ„å»ºæ–°çš„æœ€å°äºŒä¹˜é—®é¢˜ :</p>
<script type="math/tex; mode=display">
\begin{align*}
b_m(k^â€²)&=\Pi^Tb_p(k)
-\sum_{(i,j)\in\mathcal{S}_a(k^â€²)}J^T_{ij}(k^â€²)\Sigma^{-1}_{ij}r_{ij}(k^â€²)\\
Î›_m(k^â€²)&=\Pi^TÎ›_p(k) \Pi
+\sum_{(i,j)\in\mathcal{S}_a(k^â€²)}J^T_{ij}(k^â€²)\Sigma^{-1}_{ij}J_{ij}(k^â€²)
\end{align*}\tag{11}</script><p>å…¶ä¸­ï¼Œ$\Pi=[I_{dim\ x_r}\ \ 0]$ç”¨æ¥å°†çŸ©é˜µçš„ç»´åº¦è¿›è¡Œæ‰©å¼ ã€‚ $\mathcal{S}_a$ ç”¨æ¥è¡¨ç¤ºé™¤è¢«marg æ‰çš„æµ‹é‡ä»¥å¤–çš„å…¶ä»–æµ‹é‡ï¼ŒåŒ…æ‹¬åŸæœ¬çš„ä¸marg å˜é‡æ— å…³çš„  $r_{56}$ï¼Œä»¥åŠæ–°åŠ å…¥çš„å˜é‡ $r_{27}$ã€‚  </p>
<p><strong>å‡ºç°çš„é—®é¢˜</strong></p>
<p>ç”±äº  $Î¾_2$  çš„ä¿¡æ¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li><p>ä¸€éƒ¨åˆ†æ˜¯marg å‰çš„å…ˆéªŒä¿¡æ¯  $Î›_p(k)$ ï¼Œåœ¨marg åï¼Œç”±äºè¢« marg çš„å˜é‡ä»¥åŠå¯¹åº”çš„æµ‹é‡å·²è¢«ä¸¢å¼ƒï¼Œå› æ­¤ä¹‹å‰çš„é›…å¯æ¯”ä¸ä¼šè¢«æ›´æ–°äº†ï¼Œå› æ­¤å…¬å¼ $(11)$ çš„ç­‰å·å³ä¾§ç¬¬ä¸€éƒ¨åˆ†çš„çº¿æ€§åŒ–ç‚¹æ˜¯<strong>ä¸å˜çš„</strong>ï¼›</p>
</li>
<li><p>å¦ä¸€éƒ¨åˆ†ä¿¡æ¯å°±æ˜¯æ–°çš„è¾¹ $r_{27}$ ï¼Œå…¶é›…å…‹æ¯”ä¼šéšç€ $Î¾_2$  çš„è¿­ä»£æ›´æ–°è€Œä¸æ–­åœ¨æœ€æ–°çš„çº¿æ€§åŒ–ç‚¹å¤„è®¡ç®—ï¼Œå› æ­¤å…¬å¼ $(11)$ çš„ç­‰å·å³ä¾§ç¬¬äºŒéƒ¨åˆ†çš„çº¿æ€§åŒ–ç‚¹æ˜¯<strong>ä¸æ–­å˜åŒ–çš„</strong>ï¼›</p>
</li>
<li><strong>æ—§çš„æ±‚è§£é›…å…‹æ¯”çŸ©é˜µçš„å˜é‡çº¿æ€§åŒ–ç‚¹å’Œå’Œæ–°çš„æ±‚è§£é›…å…‹æ¯”çŸ©é˜µçš„å˜é‡çº¿æ€§åŒ–ç‚¹ä¸åŒï¼Œå®ƒä»¬åœ¨ç›¸åŠ çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¿¡æ¯çŸ©é˜µçš„é›¶ç©ºé—´å‘ç”Ÿå˜åŒ–ï¼Œä½¿å¾—ä¸å®¢è§‚çš„å˜é‡å˜å¾—å¯è§‚ï¼Œä»è€Œå¼•å…¥é”™è¯¯ä¿¡æ¯</strong>ã€‚</li>
</ul>
<h2 id="ä¿¡æ¯çŸ©é˜µçš„é›¶ç©ºé—´å˜åŒ–"><a href="#ä¿¡æ¯çŸ©é˜µçš„é›¶ç©ºé—´å˜åŒ–" class="headerlink" title="ä¿¡æ¯çŸ©é˜µçš„é›¶ç©ºé—´å˜åŒ–"></a>ä¿¡æ¯çŸ©é˜µçš„é›¶ç©ºé—´å˜åŒ–</h2><p>æ»‘åŠ¨çª—å£ç®—æ³•ä¼˜åŒ–çš„æ—¶å€™ï¼Œä¿¡æ¯çŸ©é˜µå¦‚å…¬å¼ $(11)$ å˜æˆäº†ä¸¤éƒ¨åˆ†ï¼Œä¸”è¿™ä¸¤éƒ¨åˆ†è®¡ç®—é›…å…‹æ¯”æ—¶çš„<strong>çº¿æ€§åŒ–ç‚¹ä¸åŒ</strong>ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä¿¡æ¯çŸ©é˜µçš„é›¶ç©ºé—´å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œåœ¨æ±‚è§£æ—¶å¼•å…¥é”™è¯¯ä¿¡æ¯ã€‚  </p>
<p>è¿™é‡Œå¼•ç”¨è´ºåšçš„åšå®¢ï¼š<a href="https://blog.csdn.net/heyijia0327/article/details/52822104?spm=1001.2014.3001.5501">SLAMä¸­çš„marginalization å’Œ Schur complement</a></p>
<p><img src="/images/æ»‘åŠ¨çª—å£ç®—æ³•/image-20220514165208897-16526621209192.png" alt="image-20220514165208897" style="zoom: 33%;" /></p>
<p>åœ¨åˆ˜æ¯…(ç¨€ç–æ¯…)ï¼Œç‹äº¬ï¼Œæ™“ä½³ç­‰äººè®¨è®ºä¸‹ï¼Œå¯¹è¿™å¼ å›¾ä½œå‡ºäº†å¦‚ä¸‹è§£é‡Šï¼š</p>
<p>å››å¼ èƒ½é‡å›¾ä¸­ï¼Œç¬¬ä¸€å¼ æ˜¯è¯´æ˜èƒ½é‡å‡½æ•° $E$ ç”±ä¸¤ä¸ªåŒæ ·çš„éçº¿æ€§å‡½æ•° $E_1$å’Œ $E_2$ç»„æˆï¼Œæˆ‘ä»¬ä»¤å‡½æ•° $E=0$ï¼Œè¿™æ—¶æ–¹ç¨‹çš„è§£ä¸º $x y = 1$ ï¼Œå¯¹åº”å›¾ä¸­æ·±è“è‰²çš„ä¸€æ¡æ›²çº¿ã€‚</p>
<p>ç¬¬äºŒå¼ èƒ½é‡å‡½æ•°å›¾ä¸­çš„ $E_1^â€²$å¯¹åº”å‡½æ•°  $E_1$ åœ¨ç‚¹ $(0.5,1.4)$ å¤„çš„äºŒé˜¶æ³°å‹’å±•å¼€;</p>
<p>ç¬¬ä¸‰å¼ èƒ½é‡å‡½æ•°å›¾ä¸­çš„ $E_2^â€²$ å¯¹åº”å‡½æ•°åœ¨  $E_2$ ç‚¹ $(1.2,0.5)$ å¤„çš„äºŒé˜¶æ³°å‹’å±•å¼€ã€‚æ³¨æ„è¿™ä¸¤ä¸ªè¿‘ä¼¼çš„èƒ½é‡å‡½æ•° $E_1^â€²$ å’Œ $E_2^â€²$æ˜¯åœ¨ä¸åŒçš„çº¿æ€§ç‚¹é™„è¿‘å¯¹åŸå‡½æ•°å±•å¼€å¾—åˆ°çš„ã€‚</p>
<p>æœ€åä¸€å¼ å›¾å°±æ˜¯æŠŠè¿™ä¸ªè¿‘ä¼¼å¾—åˆ°çš„èƒ½é‡å‡½æ•°åˆå¹¶èµ·æ¥ï¼Œå¯¹æ•´ä¸ªç³»ç»Ÿ $E$ çš„äºŒé˜¶è¿‘ä¼¼ã€‚</p>
<p>ä»ç¬¬å››ä¸ªèƒ½é‡å‡½æ•°å›¾ä¸­ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªå¤§é—®é¢˜ï¼Œèƒ½é‡å‡½æ•°ä¸º $0$ çš„è§£ç”±ä»¥å‰çš„ä¸€æ¡æ›²çº¿å˜æˆäº†ä¸€ä¸ªç‚¹ï¼Œ<strong>ä¸ç¡®å®šæ€§çš„ä¸œè¥¿å˜å¾—ç¡®å®šäº†</strong>ï¼Œä¸“ä¸šçš„æœ¯è¯­å«<strong>ä¸å¯è§‚çš„çŠ¶æ€å˜é‡å˜å¾—å¯è§‚äº†</strong>ï¼Œè¯´æ˜æˆ‘ä»¬äººä¸ºçš„å¼•å…¥äº†é”™è¯¯çš„ä¿¡æ¯ã€‚å›åˆ°margè¿‡ç¨‹ï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­å‘Šè¯‰æˆ‘ä»¬ï¼Œmarg æ—¶ï¼Œè¢« marg çš„é‚£äº›å˜é‡çš„é›…å…‹æ¯”å·²ç»ä¸æ›´æ–°äº†ï¼Œè€Œæ­¤æ—¶ç•™åœ¨æ»‘åŠ¨çª—å£é‡Œçš„å…¶ä»–å˜é‡çš„é›…å…‹æ¯”è¦ç”¨å’Œ marg æ—¶ä¸€æ ·çš„çº¿æ€§ç‚¹ï¼Œå°±æ˜¯ $FEJ,(first\ estimate\ jocabian)$ ç®—æ³•ï¼Œä¸è¦ç”¨æ–°çš„çº¿æ€§ç‚¹äº†ã€‚</p>
<hr>
<p><strong>FEJ ç®—æ³•ï¼š</strong>$FEJ,(first\ estimate\ jocabian)$ ,ä¸åŒæ®‹å·®å¯¹åŒä¸€ä¸ªçŠ¶æ€æ±‚é›…å…‹æ¯”æ—¶ï¼Œçº¿æ€§åŒ–ç‚¹å¿…é¡»ä¸€è‡´ã€‚è¿™æ ·å°±èƒ½é¿å…é›¶ç©ºé—´é€€åŒ–è€Œä½¿å¾—ä¸å¯è§‚å˜é‡å˜å¾—å¯è§‚ã€‚  æ¯”å¦‚: å¼•ä¾‹ä¸­è®¡ç®— $r_{27}$ å¯¹ $Î¾_2$ çš„é›…å…‹æ¯”æ—¶ï¼Œ $Î¾_2$ çš„çº¿æ€§è¯ç‚¹å¿…é¡»å’Œ $r_{12}$å¯¹å…¶æ±‚å¯¼æ—¶ä¸€è‡´ã€‚  </p>
]]></content>
      <categories>
        <category>ä»é›¶å¼€å§‹æ‰‹å†™VIO</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>æ»‘åŠ¨çª—å£ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>VSLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–</title>
    <url>/posts/48933.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>ç”±äºå™ªå£°çš„å­˜åœ¨ï¼Œè¿åŠ¨æ–¹ç¨‹å’Œè§‚æµ‹æ–¹ç¨‹çš„ç­‰å¼å¿…å®šä¸æ˜¯ç²¾ç¡®æˆç«‹çš„ã€‚å³ä½¿æˆ‘ä»¬æœ‰ç€é«˜ç²¾åº¦çš„ç›¸æœºï¼Œè¿åŠ¨æ–¹ç¨‹å’Œè§‚æµ‹æ–¹ç¨‹ä¹Ÿåªèƒ½è¿‘ä¼¼çš„æˆç«‹ã€‚æ‰€ä»¥ï¼Œä¸å…¶å‡è®¾æ•°æ®å¿…é¡»ç¬¦åˆæ–¹ç¨‹ï¼Œä¸å¦‚æ¥è®¨è®ºï¼Œå¦‚ä½•åœ¨æœ‰å™ªå£°çš„æ•°æ®ä¸­è¿›è¡Œå‡†ç¡®çš„çŠ¶æ€ä¼°è®¡ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="æå‡º"><a href="#æå‡º" class="headerlink" title="æå‡º"></a>æå‡º</h1><h2 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h2><p>ç»å…¸ SLAM æ¨¡å‹ã€‚å®ƒç”±ä¸€ä¸ªçŠ¶æ€æ–¹ç¨‹å’Œä¸€ä¸ªè¿åŠ¨æ–¹ç¨‹æ„æˆï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
x_k&=f(x_{k-1},u_{k})+w_{k}\\
z_{k,j}&=h(y_j,x_k)+v_{k,j}
\end{align*}\tag{1}</script><p>å…¶ä¸­$w_{k}$ä¸ºè¿‡ç¨‹å™ªå£°(Process Noise)ï¼Œ$v_k$ä¸ºæµ‹é‡å™ªå£°(Measurement Noise)ï¼Œæš‚ä¸”è®¤ä¸ºå®ƒä»¬ç¬¦åˆé«˜æ–¯åˆ†å¸ƒï¼Œå³$p_{(w)}\sim N(0,Q)ï¼Œp_{(v)}\sim N(0,R)$ï¼Œå…¶ä¸­$0$è¡¨ç¤ºæœŸæœ›ï¼Œ$Q,R$ä»£è¡¨åæ–¹å·®çŸ©é˜µï¼Œä¸”$Q=E[ww^T],R=[vv^T]$</p>
<p>å¯¹åº”è§†è§‰$SLAM$ï¼Œè¿™é‡Œçš„ $x_k $ä¹ƒæ˜¯ç›¸æœºçš„ä½å§¿ï¼Œ$u_k$ æ˜¯è¿åŠ¨ä¼ æ„Ÿå™¨çš„è¯»æ•°ï¼ˆæœ‰æ—¶ä¹Ÿå«è¾“å…¥ï¼‰ï¼Œ$y_j$ä»£è¡¨çš„æ˜¯ç›¸æœºåœ¨$x_k $å¤„è§‚å¯Ÿåˆ°çš„è·¯æ ‡ï¼Œå¹¶ä¸”è§‚å¯Ÿåˆ°$y_j$åï¼Œäº§ç”Ÿäº†ä¸€ä¸ªè§‚æµ‹æ•°æ® $z_{k,j}$ã€‚æ•´ä¸ªæ–¹ç¨‹é‡Œé¢ï¼Œæ±‚è§£ç›¸æœºçš„ä½å§¿$x_k $å°±æ˜¯ä¸€ä¸ªå®šä½çš„é—®é¢˜ï¼Œè€Œæ±‚è§£è·¯æ ‡$y_j$å°±æ˜¯ä¸€ä¸ªå»ºå›¾çš„è¿‡ç¨‹ï¼Œä½†æ˜¯ç”±äºå™ªå£°$w_{k}ï¼Œv_{k,j}$çš„å½±å“ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ä¼ æ„Ÿå™¨æ•°æ®$u_k$ å’Œ$z_{k,j}$è‚¯å®šä¸æ˜¯å®Œå…¨å‡†ç¡®çš„ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨è¿™ä¸¤ç»„ä¸å¤ªå‡†ç¡®çš„æ•°æ®ï¼Œå¯»æ‰¾ä¸€ä¸ªç›¸å¯¹æœ€ä¼˜çš„ç›¸æœºä½å§¿$x_k $ä»¥åŠè·¯æ ‡$y_j$ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯SLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–é—®é¢˜ã€‚</p>
<h2 id="éœ€è¦ä¼˜åŒ–ä»€ä¹ˆï¼Ÿ"><a href="#éœ€è¦ä¼˜åŒ–ä»€ä¹ˆï¼Ÿ" class="headerlink" title="éœ€è¦ä¼˜åŒ–ä»€ä¹ˆï¼Ÿ"></a>éœ€è¦ä¼˜åŒ–ä»€ä¹ˆï¼Ÿ</h2><p>æˆ‘ä»¬æŠŠæ‰€æœ‰å¸¦ä¼°è®¡çš„æ•°æ®æ”¾åœ¨ä¸€ä¸ªé›†åˆï¼š</p>
<script type="math/tex; mode=display">
x=\left\{x_1,....,x_N,y_1,...y_M\}\right.\tag{2}</script><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬çš„é—®é¢˜å°±å˜æˆæ±‚å·²çŸ¥è¾“å…¥æ•°æ® $u$ å’Œè§‚æµ‹æ•°æ® $z$ çš„æ¡ä»¶ä¸‹ï¼Œè®¡ç®—çŠ¶æ€ $x$ çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒï¼š</p>
<script type="math/tex; mode=display">
P(x|z,u)\tag{3}</script><hr>
<p>ä½†æ˜¯å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæœ‰ç›¸æœºè§‚å¯Ÿåˆ°çš„ä¸€å¸§å¸§çš„å›¾ç‰‡$z_{k,j}$ï¼Œå³åªè€ƒè™‘è§‚æµ‹æ–¹ç¨‹å¸¦æ¥çš„æ•°æ®æ—¶ï¼Œæ²¡æœ‰è¿åŠ¨ä¼ æ„Ÿå™¨$u_k$ ï¼Œè¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒå°±å˜æˆ$P(x|z)$ï¼Œåˆ©ç”¨è´å¶æ–¯æ³•åˆ™ï¼š</p>
<script type="math/tex; mode=display">
P(x|z)=\frac{P(z|x)P(x)}{P(z)}âˆP (z|x) P (x) .\tag{4}</script><p>$\frac{P(z|x)P(x)}{P(z)}$ç§°ä¸º<strong>åéªŒä¼°è®¡</strong>ï¼Œ$P (z|x)$ ç§°ä¸º<strong>ä¼¼ç„¶</strong>ï¼Œå¦ä¸€éƒ¨åˆ†$ P (x)$ ç§°ä¸º<strong>å…ˆéªŒ</strong>ã€‚</p>
<p>ç›´æ¥æ±‚åéªŒåˆ†å¸ƒæ˜¯å›°éš¾çš„ï¼Œä½†æ˜¯æ±‚ä¸€ä¸ªçŠ¶æ€æœ€ä¼˜ä¼°è®¡ï¼Œä½¿å¾—åœ¨è¯¥çŠ¶æ€ä¸‹ï¼ŒåéªŒæ¦‚ç‡æœ€å¤§åŒ–ï¼ˆMaximize a Posteriorï¼ŒMAPï¼‰ï¼Œåˆ™æ˜¯å¯è¡Œçš„ï¼š</p>
<script type="math/tex; mode=display">
x^âˆ—_{MAP} = \arg \max P (x|z) = \arg \max P (z|x)P (x).\tag{5}</script><p>ä½†æ˜¯å½“æˆ‘ä»¬ä¸çŸ¥é“æœºå™¨äººä½å§¿å¤§æ¦‚åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œæ­¤æ—¶å°±æ²¡æœ‰äº†å…ˆéªŒ,é‚£ä¹ˆï¼Œå¯ä»¥æ±‚è§£$x $çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆMaximize Likelihood Estimation, MLEï¼‰ï¼š</p>
<script type="math/tex; mode=display">
x^âˆ—_{MLE} = \arg \max P (z|x)\tag{6}</script><p>æœ€å¤§ä¼¼ç„¶ä¼°è®¡çš„å«ä¹‰å°±æ˜¯ï¼šç›¸æœºåœ¨ä»€ä¹ˆæ ·çš„çŠ¶æ€ä¸‹ï¼ˆè¿™é‡ŒæŒ‡é›†åˆ$x$å³ä¸ºç›¸æœºä½å§¿$x_{k}$ä»¥åŠè·¯æ ‡$y_{j}$ï¼‰ï¼Œæœ€å¯èƒ½äº§ç”Ÿå½“å‰è§‚æµ‹åˆ°çš„æ•°æ®$z_{k,j}$ã€‚</p>
<p><strong>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¼˜åŒ–çš„å†…å®¹å°±æ˜¯ï¼šæ±‚è§£æœ€ä¼˜çš„$x_k , y_j$ï¼Œä½¿å¾—è§‚æµ‹æ–¹ç¨‹å¸¦æ¥çš„æœ€å°è¯¯å·®ï¼Œæ­¤æ—¶å°±æ˜¯æ±‚$x$ï¼ˆæˆ–è€…æ˜¯è¯´$x_k , y_j$ï¼‰çš„æœ€å¤§ä¼¼ç„¶ç„¶ä¼°è®¡ã€‚</strong></p>
<h2 id="æœ€å°äºŒä¹˜é—®é¢˜"><a href="#æœ€å°äºŒä¹˜é—®é¢˜" class="headerlink" title="æœ€å°äºŒä¹˜é—®é¢˜"></a>æœ€å°äºŒä¹˜é—®é¢˜</h2><p>åªè€ƒè™‘è§‚æµ‹æ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
z_{k,j}=h(y_j,x_k)+v_{k,j}\tag{7}</script><p>ç”±äºæˆ‘ä»¬å‡è®¾äº†å™ªå£°é¡¹ $v_k âˆ¼ N (0, Q)$ï¼Œæ‰€ä»¥è§‚æµ‹æ•°æ®çš„æ¡ä»¶æ¦‚ç‡ä¸ºï¼š</p>
<script type="math/tex; mode=display">
P (z_{j,k} |x_k , y_j ) = N (h(y_j , x_k ), Q) .\tag{8}</script><p>æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯æœ€å¤§åŒ–$x_k , y_j$ï¼Œä½¿å¾—è¯¥çŠ¶æ€ä¸‹æœ€å¯èƒ½äº§ç”Ÿå½“å‰è§‚æµ‹åˆ°çš„æ•°æ®$z_{k,j}$ã€‚</p>
<p>è€ƒè™‘ä¸€ä¸ªä»»æ„çš„é«˜ç»´é«˜æ–¯åˆ†å¸ƒ $x âˆ¼ N (\mu, \Sigma)$ï¼Œå®ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°å±•å¼€å½¢å¼ä¸º:</p>
<script type="math/tex; mode=display">
\begin{align*}
p(x)=\frac{1}{\sqrt{(2\pi)^N det(\Sigma)} }exp(âˆ’(xâˆ’\mu)\Sigma^{-1} (xâˆ’\mu))
\end{align*}\tag{9}</script><p>å–è´Ÿå¯¹æ•°:</p>
<script type="math/tex; mode=display">
\begin{align*}
-ln(p(x))=\frac{1}{2}ln((2\pi)^N det(Î£))+\frac{1}{2}(xâˆ’\mu)^TÎ£^{-1} (xâˆ’\mu)
\end{align*}\tag{10}</script><p>å¯¹åŸåˆ†å¸ƒæ±‚æœ€å¤§åŒ–ç›¸å½“äºå¯¹è´Ÿå¯¹æ•°æ±‚æœ€å°åŒ–ã€‚åœ¨æœ€å°åŒ–ä¸Šå¼çš„ $x$ æ—¶ï¼Œç¬¬ä¸€é¡¹ä¸ $x $æ— å…³ï¼Œå¯ä»¥ç•¥å»äºæ˜¯ï¼Œåªè¦æœ€å°åŒ–å³ä¾§çš„äºŒæ¬¡å‹é¡¹ï¼Œä¹Ÿç§°ä¸º<strong>é©¬æ°è·ç¦»</strong>ã€‚å¸¦å…¥ SLAM è§‚æµ‹æ¨¡å‹ï¼š</p>
<script type="math/tex; mode=display">
x^*=\arg\min\left((z_{k,j}-h(x_k,y_j))^TQ^{-1}_{k,j}(z_{k,j}-h(x_k,y_j))\right)\tag{11}</script><p>å®šä¹‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
e_{v,k}&=x_k-f(x_{k-1},u_k)\\
e_{u,j,k}&=z_{k,j}-h(x_k,y_j)
\end{align*}\tag{12}</script><p>è€ƒè™‘è¿åŠ¨ä¸è§‚æµ‹æ–¹ç¨‹ç»“åˆæ¥çœ‹ï¼Œæˆ‘ä»¬æ±‚è§£çš„å°±æ˜¯æ€»çš„<strong>è¯¯å·®çš„å¹³æ–¹å’Œ</strong>ï¼š</p>
<script type="math/tex; mode=display">
J(x)=\sum_ke^T_{v,k}R^{-1}e_{v,k}+\sum_k\sum_je^T_{y,k,j}Q^{-1}e_{y,k,j}\tag{13}</script><p>è¿™å°±å¾—åˆ°äº†ä¸€ä¸ªæ€»ä½“æ„ä¹‰ä¸‹çš„<strong>æœ€å°äºŒä¹˜é—®é¢˜</strong>ï¼ˆLeast Square Problemï¼‰ã€‚æˆ‘ä»¬æ˜ç™½å®ƒçš„æœ€ä¼˜è§£ç­‰ä»·äºçŠ¶æ€çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ã€‚ç›´è§‚æ¥è®²ï¼Œç”±äºå™ªå£°çš„å­˜åœ¨ï¼Œå½“æˆ‘ä»¬æŠŠä¼°è®¡çš„è½¨è¿¹ä¸åœ°å›¾ä»£å…¥ SLAM çš„è¿åŠ¨ã€è§‚æµ‹æ–¹ç¨‹ä¸­æ—¶ï¼Œå®ƒä»¬å¹¶ä¸ä¼šå®Œç¾çš„æˆç«‹ã€‚è¿™æ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬æŠŠçŠ¶æ€çš„ä¼°è®¡å€¼è¿›è¡Œå¾®è°ƒï¼Œä½¿å¾—æ•´ä½“çš„è¯¯å·®ä¸‹é™ä¸€äº›ã€‚å½“ç„¶è¿™ä¸ªä¸‹é™ä¹Ÿæœ‰é™åº¦ï¼Œå®ƒä¸€èˆ¬ä¼šåˆ°è¾¾ä¸€ä¸ªæå°å€¼ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹éçº¿æ€§ä¼˜åŒ–çš„è¿‡ç¨‹ã€‚</p>
<h2 id="éçº¿æ€§å‡½æ•°çº¿æ€§åŒ–"><a href="#éçº¿æ€§å‡½æ•°çº¿æ€§åŒ–" class="headerlink" title="éçº¿æ€§å‡½æ•°çº¿æ€§åŒ–"></a>éçº¿æ€§å‡½æ•°çº¿æ€§åŒ–</h2><p>åœ¨éçº¿æ€§ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œç”±äºé«˜æ–¯åˆ†å¸ƒç»è¿‡éçº¿æ€§æ˜ å°„åä¸ä¼šå†ç¬¦åˆé«˜æ–¯åˆ†å¸ƒï¼Œå› æ­¤ï¼Œä¸€èˆ¬æˆ‘ä»¬å¯¹éçº¿æ€§è¿›è¡Œçº¿æ€§åŒ–ï¼Œè¿™é‡Œç”¨åˆ°æ³°å‹’çº§æ•°ï¼š</p>
<p>æ³°å‹’çº§æ•°å±•å¼€å¼ï¼šå¯¹äºå‡½æ•°$f(x)$åœ¨ä»»æ„ä¸€ç‚¹$x_0$å¤„å±•å¼€</p>
<script type="math/tex; mode=display">
f(x)=f(x_0)+\frac{f^\prime(x_0)}{1!}(x-x_0)+\frac{f^{\prime \prime}(x_0)}{2!}(x-x_0)^2+...+\frac{f^{(n)}(x_0)}{1!}(x-x_0)^{n}\tag{14}</script><p>ä¸€èˆ¬å½“$x-x_0\rightarrow0$æ—¶ï¼Œåˆ™$(x-x_0)^{n}\rightarrow0,n\geq 2$ï¼Œåªå–ä¸€é˜¶æ³°å‹’ï¼š</p>
<script type="math/tex; mode=display">
f(x)=f(x_0)+f^\prime(x_0)(x-x_0)\tag{15}</script><p>å¦‚æœå¯¹äºäºŒç»´ä»¥ä¸Šçš„ï¼Œæˆ‘ä»¬çš„ä¸€é˜¶æ³°å‹’å±•å¼€å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
f(xï¼Œy)&=f(x_0)+\frac{\partial f}{\partial x}|_{x=x_0}(x-x_0)\\
&=f(x_0)+J(x)(x-x_0)
\end{align*}\tag{16}</script><p>è¿™é‡Œçš„é›…å…‹æ¯”çŸ©é˜µä»£è¡¨çš„å°±æ˜¯$f(x)$å¯¹äº$x$çš„åå¯¼æ•°ã€‚</p>
<h1 id="æ±‚è§£éçº¿æ€§æœ€å°äºŒä¹˜"><a href="#æ±‚è§£éçº¿æ€§æœ€å°äºŒä¹˜" class="headerlink" title="æ±‚è§£éçº¿æ€§æœ€å°äºŒä¹˜"></a>æ±‚è§£éçº¿æ€§æœ€å°äºŒä¹˜</h1><p>å¯¹äºä¸Šæ–‡ï¼Œæˆ‘ä»¬çŸ¥é“é€šè¿‡æŠŠæœ€å¤§ä¼¼ç„¶ä¼°è®¡é—®é¢˜è½¬åŒ–ä¸ºæœ€å°åŒ–å…¶è´Ÿå¯¹æ•°çš„é—®é¢˜ï¼Œå…¶å®å°±æ˜¯æ±‚è§£ä¸€ä¸ªéçº¿æ€§å‡½æ•°çš„æœ€å°å€¼çš„é—®é¢˜ï¼Œæˆ‘ä»¬æš‚ä¸”è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªéçº¿æ€§çš„å‡½æ•°$f(x)$ï¼Œå¦‚ä½•æ±‚è§£å®ƒçš„æœ€å°å€¼ï¼Ÿ</p>
<p>è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„æœ€å°äºŒä¹˜é—®é¢˜ï¼š</p>
<script type="math/tex; mode=display">
\underset{x}{min}\frac{1}{2}\parallel f(x) \parallel^2\tag{17}</script><p>è¿™é‡Œè‡ªå˜é‡ $x\in \mathbb R^n$ ï¼Œ$f $æ˜¯ä»»æ„ä¸€ä¸ªéçº¿æ€§å‡½æ•°ï¼Œæˆ‘ä»¬è®¾å®ƒæœ‰ $m $ç»´ï¼š$f (x) \in \mathbb R^m$ ã€‚</p>
<p>ä¸€èˆ¬æ±‚è§£å°±æ˜¯ç±»ä¼¼äºäºŒå…ƒå‡½æ•°æ±‚æå€¼ï¼Œå¯¹$x$æ±‚å¯¼ï¼Œä½¿å¾—$\frac{df}{dx}=0$ï¼Œå³å¯å¾—åˆ°$f(x)$çš„æå€¼ï¼Œä½†æ˜¯ä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªç‚¹å¯èƒ½æ˜¯æå¤§å€¼ã€æå°å€¼ä¹Ÿå¯èƒ½æ˜¯éç‚¹ï¼Œå› æ­¤éœ€è¦æ¯”è¾ƒæ‰€æœ‰ä½¿å¾—$\frac{df}{dx}=0$çš„è‡ªå˜é‡å¯¹åº”çš„å‡½æ•°å€¼$f(x)$.</p>
<p>ä½†æ˜¯åœ¨SLAMä¸­ï¼Œ$f(x)$å°†æ˜¯ä¸€ä¸ªå¤æ‚çš„éçº¿æ€§æ–¹ç¨‹ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨è¿­ä»£çš„æ–¹æ³•ï¼Œä»ä¸€ä¸ªåˆå§‹å€¼å‡ºå‘ï¼Œä¸æ–­åœ°æ›´æ–°å½“å‰çš„ä¼˜åŒ–å˜é‡ï¼Œä½¿ç›®æ ‡å‡½æ•°ä¸‹é™ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç»™å®šæŸä¸ªåˆå§‹å€¼$ x_0$</li>
<li>å¯¹äºç¬¬$k$æ¬¡è¿­ä»£ï¼Œå¯»æ‰¾ä¸€ä¸ªå¢é‡$\Delta x_k$ï¼Œä½¿å¾—$\parallel f(x_k+\Delta x_k)\parallel^2_2$è¾¾åˆ°æå°å€¼ã€‚</li>
<li>è‹¥$\Delta x_k$è¶³å¤Ÿå°ï¼Œåˆ™åœæ­¢</li>
<li>å¦åˆ™ï¼Œä»¤$x_{k+1}=x_k+\Delta x_k$ï¼Œè¿”å›ç¬¬äºŒæ­¥ã€‚</li>
</ul>
<p>è¿™è®©æ±‚è§£å¯¼å‡½æ•°ä¸ºé›¶çš„é—®é¢˜ï¼Œå˜æˆäº†ä¸€ä¸ªä¸æ–­å¯»æ‰¾æ¢¯åº¦å¹¶ä¸‹é™çš„è¿‡ç¨‹ã€‚ç›´åˆ°æŸä¸ªæ—¶åˆ»å¢é‡éå¸¸å°ï¼Œæ— æ³•å†ä½¿å‡½æ•°ä¸‹é™ã€‚æ­¤æ—¶ç®—æ³•æ”¶æ•›ï¼Œç›®æ ‡è¾¾åˆ°äº†ä¸€ä¸ªæå°ï¼Œæˆ‘ä»¬å®Œæˆäº†å¯»æ‰¾æå°å€¼çš„è¿‡ç¨‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªè¦æ‰¾åˆ°è¿­ä»£ç‚¹çš„æ¢¯åº¦æ–¹å‘å³å¯ï¼Œè€Œæ— éœ€å¯»æ‰¾å…¨å±€å¯¼å‡½æ•°ä¸ºé›¶çš„æƒ…å†µã€‚</p>
<hr>
<p><strong>å¦‚ä½•å¯»æ‰¾$\Delta x_k$?</strong></p>
<h2 id="ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•"><a href="#ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•" class="headerlink" title="ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•"></a>ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•</h2><p>æˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡éçº¿æ€§çš„çº¿æ€§åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªéçº¿æ€§å‡½æ•°åœ¨æŸä¸ªç‚¹é™„ä»¶è¿›è¡Œæ³°å‹’å±•å¼€ã€‚</p>
<p>æ¯”å¦‚ï¼šå¯¹äºå¢é‡æ–¹ç¨‹åœ¨$x$é™„è¿‘è¿›è¡Œæ³°å‹’å±•å¼€ï¼š</p>
<script type="math/tex; mode=display">
\parallel f(x+\Delta x)\parallel^2_2\approx\parallel f(x)\parallel^2_2+J(x)\Delta x +\frac{1}{2}\Delta x^TH\Delta x\tag{18}</script><p>è¿™é‡Œ$J$æ˜¯ $\parallel f(x)\parallel^2$ å…³äº$ x $çš„å¯¼æ•°ï¼ˆé›…å¯æ¯”çŸ©é˜µï¼‰ï¼Œè€Œ$ H $åˆ™æ˜¯äºŒé˜¶å¯¼æ•°ï¼ˆæµ·å¡ï¼ˆHessianï¼‰çŸ©é˜µï¼‰ã€‚ä¿ç•™ä¸€é˜¶äºŒé˜¶åˆ†åˆ«å°±å¯¹åº”äº†ä¸€é˜¶æ¢¯åº¦æ³•å’ŒäºŒé˜¶æ¢¯åº¦æ³•ã€‚</p>
<h3 id="ä¸€é˜¶æ¢¯åº¦æ³•"><a href="#ä¸€é˜¶æ¢¯åº¦æ³•" class="headerlink" title="ä¸€é˜¶æ¢¯åº¦æ³•"></a>ä¸€é˜¶æ¢¯åº¦æ³•</h3><script type="math/tex; mode=display">
\Delta x^*=\arg\min\parallel f(x)\parallel^2_2+J(x)\Delta x\tag{19}</script><p>å¯¹å³è¾¹ç­‰å¼å…³äº$\Delta x$æ±‚å¯¼ï¼Œå¹¶ä»¤å®ƒä¸º0ï¼š</p>
<script type="math/tex; mode=display">
\Delta x^*=-J^T(x)\tag{20}</script><p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¯¥æ–¹å‘ä¸Šå–ä¸€ä¸ªæ­¥é•¿$\lambda$ï¼Œæ±‚å¾—æœ€å¿«çš„ä¸‹é™æ–¹å¼ã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä¸º<strong>æœ€é€Ÿä¸‹é™æ³•</strong>ã€‚ä½†æ˜¯å®ƒæœ¬èº«ä¹Ÿæœ‰ç¼ºç‚¹ï¼šæœ€é€Ÿä¸‹é™æ³•è¿‡äºè´ªå¿ƒï¼Œå®¹æ˜“èµ°å‡ºé”¯é½¿è·¯çº¿ï¼Œåè€Œå¢åŠ äº†è¿­ä»£æ¬¡æ•°ã€‚</p>
<h3 id="äºŒé˜¶æ¢¯åº¦-ç‰›é¡¿æ³•"><a href="#äºŒé˜¶æ¢¯åº¦-ç‰›é¡¿æ³•" class="headerlink" title="äºŒé˜¶æ¢¯åº¦(ç‰›é¡¿æ³•)"></a>äºŒé˜¶æ¢¯åº¦(ç‰›é¡¿æ³•)</h3><script type="math/tex; mode=display">
\Delta x^*=\arg\min\parallel f(x)\parallel^2_2+J(x)\Delta x +\frac{1}{2}\Delta x^TH\Delta x\tag{21}</script><p>å¯¹å³è¾¹ç­‰å¼å…³äº$\Delta x$æ±‚å¯¼ï¼Œå¹¶ä»¤å®ƒä¸º0ï¼š</p>
<script type="math/tex; mode=display">
H\Delta x=-J^T.\tag{22}</script><p>ä½†æ˜¯ç‰›é¡¿æ³•éœ€è¦è®¡ç®—ç›®æ ‡å‡½æ•°çš„ $H $çŸ©é˜µï¼Œè¿™åœ¨é—®é¢˜è§„æ¨¡è¾ƒå¤§æ—¶éå¸¸å›°éš¾ï¼Œæˆ‘ä»¬é€šå¸¸å€¾å‘äºé¿å…$ H $çš„è®¡ç®—ã€‚</p>
<h2 id="Gauss-Newton"><a href="#Gauss-Newton" class="headerlink" title="Gauss-Newton"></a>Gauss-Newton</h2><p>Gauss Newton æ˜¯æœ€ä¼˜åŒ–ç®—æ³•é‡Œé¢æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒçš„æ€æƒ³æ˜¯$f(x)$è€Œä¸æ˜¯$f(x)^2$åœ¨$x$å¤„è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€ï¼š</p>
<script type="math/tex; mode=display">
f(x+\Delta x)\approx f(x)+J(x)\Delta x\tag{23}</script><p>è¿™é‡Œ$ J (x)$ ä¸º$ f (x) $å…³äº$ x$ çš„å¯¼æ•°ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ª$ m Ã— n$ çš„çŸ©é˜µï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé›…å¯æ¯”çŸ©é˜µã€‚</p>
<p>å½“å‰çš„ç›®æ ‡æ˜¯ä¸ºäº†å¯»æ‰¾ä¸‹é™çŸ¢é‡ $\Delta x$ï¼Œä½¿å¾—$ f(x+\Delta x)$è¾¾åˆ°æœ€å°ã€‚ä¸ºäº†æ±‚ $\Delta x$ï¼Œæˆ‘ä»¬éœ€è¦è§£ä¸€ä¸ªçº¿æ€§çš„æœ€å°äºŒä¹˜é—®é¢˜ï¼š</p>
<script type="math/tex; mode=display">
\Delta x^*=\arg\min\frac{1}{2}\parallel f(x)+J(x)\Delta x \parallel^2\tag{24}</script><p>å¯¹ä¸Šå¼å¹³æ–¹é¡¹è¿›è¡Œå±•å¼€ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{1}{2}\parallel f(x)+J(x)\Delta x \parallel^2&=\frac{1}{2}
\left(f(x)+J(x)\Delta x)^T(f(x)+J(x)\Delta x\right)\\
&=\frac{1}{2}\left(\parallel f(x)\parallel^2_2+2f(x)^TJ(x)\Delta x+\Delta x^TJ(x)^TJ(x)\Delta x\right)\\
\end{align*}\tag{25}</script><p>æ±‚ä¸Šå¼å…³äº $\Delta x$ çš„å¯¼æ•°ï¼Œå¹¶ä»¤å…¶ä¸ºé›¶ï¼š</p>
<script type="math/tex; mode=display">
2J(x)^Tf(x)+2J(x)^TJ(x)\Delta x=0\tag{26}</script><p>åŒ–ç®€ï¼š</p>
<script type="math/tex; mode=display">
J(x)^TJ(x)\Delta x=-J(x)^Tf(x)\tag{27}</script><p>è¦æ±‚è§£çš„å˜é‡æ˜¯  $\Delta x$ï¼Œå› æ­¤è¿™æ˜¯ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ç»„ï¼Œæˆ‘ä»¬ç§°å®ƒä¸ºå¢é‡æ–¹ç¨‹ï¼Œä¹Ÿå¯ä»¥ç§°ä¸º<strong>é«˜æ–¯ç‰›é¡¿æ–¹ç¨‹ (Gauss Newton equations)</strong> æˆ–è€…<strong>æ­£è§„æ–¹ç¨‹ (Normal equations)</strong>ã€‚æˆ‘ä»¬æŠŠå·¦è¾¹çš„ç³»æ•°å®šä¹‰ä¸º $H$ï¼Œå³è¾¹å®šä¹‰ä¸º $g$ï¼Œé‚£ä¹ˆä¸Šå¼å˜ä¸ºï¼š</p>
<script type="math/tex; mode=display">
H \Delta x=g\tag{28}</script><p>å¯¹æ¯”ç‰›é¡¿æ³•å¯è§ï¼ŒGauss-Newton ç”¨$J(x)^TJ(x)$ä½œä¸ºç‰›é¡¿æ³•ä¸­äºŒé˜¶ Hessian çŸ©é˜µçš„è¿‘ä¼¼ï¼Œä»è€Œçœç•¥äº†è®¡ç®— $H $çš„è¿‡ç¨‹ã€‚æ±‚è§£å¢é‡æ–¹ç¨‹æ˜¯æ•´ä¸ªä¼˜åŒ–é—®é¢˜çš„æ ¸å¿ƒæ‰€åœ¨ã€‚</p>
<p>Gauss Newton æ±‚è§£æ­¥éª¤ï¼š</p>
<ul>
<li>ç»™å®šåˆå§‹å€¼$x_0$</li>
<li>å¯¹äºç¬¬$k$æ¬¡è¿­ä»£ï¼Œæ±‚å‡ºå½“å‰çš„é›…å¯æ¯”çŸ©é˜µ$J(x_k)å’Œè¯¯å·®$$f(x_k)$</li>
<li>æ±‚è§£å¢é‡æ–¹ç¨‹ï¼š$H \Delta x=g$</li>
<li>è‹¥$\Delta x_k$è¶³å¤Ÿå°ï¼Œåˆ™åœæ­¢ã€‚å¦åˆ™ï¼Œä»¤$x_{k+1}=x_k+\Delta x_k$ï¼Œè¿”å›æ­¥éª¤2.</li>
</ul>
<p>æ•´ä¸ªæ­¥éª¤ä¸­ï¼Œå¢é‡æ–¹ç¨‹çš„æ±‚è§£å æ®ç€ä¸»è¦åœ°ä½ã€‚åŸåˆ™ä¸Šï¼Œå®ƒè¦æ±‚æˆ‘ä»¬æ‰€ç”¨çš„è¿‘ä¼¼ $H$ çŸ©é˜µæ˜¯å¯é€†çš„ï¼ˆè€Œä¸”æ˜¯æ­£å®šçš„ï¼‰ï¼Œä½†å®é™…æ•°æ®ä¸­è®¡ç®—å¾—åˆ°çš„ $J(x)^TJ(x)$å´åªæœ‰åŠæ­£å®šæ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½¿ç”¨ Gauss Newton æ–¹æ³•æ—¶ï¼Œå¯èƒ½å‡ºç°$J(x)^TJ(x)$ä¸º<strong>å¥‡å¼‚çŸ©é˜µ</strong>æˆ–è€…<strong>ç—…æ€ (ill-condition)</strong> çš„æƒ…å†µï¼Œæ­¤æ—¶å¢é‡çš„ç¨³å®šæ€§è¾ƒå·®ï¼Œå¯¼è‡´ç®—æ³•ä¸æ”¶æ•›ã€‚</p>
<p>æ›´ä¸¥é‡çš„æ˜¯ï¼Œå°±ç®—æˆ‘ä»¬å‡è®¾$ H $éå¥‡å¼‚ä¹Ÿéç—…æ€ï¼Œå¦‚æœæˆ‘ä»¬æ±‚å‡ºæ¥çš„æ­¥é•¿$ âˆ†x $å¤ªå¤§ï¼Œä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬é‡‡ç”¨çš„å±€éƒ¨è¿‘ä¼¼ä¸å¤Ÿå‡†ç¡®ï¼Œè¿™æ ·ä¸€æ¥æˆ‘ä»¬ç”šè‡³éƒ½æ— æ³•ä¿è¯å®ƒçš„è¿­ä»£æ”¶æ•›ï¼Œå“ªæ€•æ˜¯è®©ç›®æ ‡å‡½æ•°å˜å¾—æ›´å¤§éƒ½æ˜¯æœ‰å¯èƒ½çš„ã€‚</p>
<h2 id="Levenberg-Marquadt"><a href="#Levenberg-Marquadt" class="headerlink" title="Levenberg-Marquadt"></a>Levenberg-Marquadt</h2><p>ç”±äº Gauss-Newton æ–¹æ³•ä¸­é‡‡ç”¨çš„è¿‘ä¼¼äºŒé˜¶æ³°å‹’å±•å¼€<strong>åªèƒ½åœ¨å±•å¼€ç‚¹é™„è¿‘æœ‰è¾ƒå¥½çš„è¿‘ä¼¼æ•ˆæœ</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆè‡ªç„¶åœ°æƒ³åˆ°åº”è¯¥ç»™ $\Delta x$ æ·»åŠ ä¸€ä¸ªä¿¡èµ–åŒºåŸŸï¼ˆ$Trust\ Region$ï¼‰ï¼Œä¸èƒ½è®©å®ƒå¤ªå¤§è€Œä½¿å¾—è¿‘ä¼¼ä¸å‡†ç¡®ã€‚éçº¿æ€§ä¼˜åŒ–ç§æœ‰ä¸€ç³»åˆ—è¿™ç±»æ–¹æ³•ï¼Œè¿™ç±»æ–¹æ³•ä¹Ÿè¢«ç§°ä¹‹ä¸ºä¿¡èµ–åŒºåŸŸæ–¹æ³• $ (Trust\ Region\ Method)$ã€‚<strong>åœ¨ä¿¡èµ–åŒºåŸŸé‡Œè¾¹ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿‘ä¼¼æ˜¯æœ‰æ•ˆçš„ï¼›å‡ºäº†è¿™ä¸ªåŒºåŸŸï¼Œè¿‘ä¼¼å¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚</strong> </p>
<p>é‚£ä¹ˆå¦‚ä½•ç¡®å®šè¿™ä¸ªä¿¡èµ–åŒºåŸŸçš„èŒƒå›´å‘¢ï¼Ÿä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯<strong>æ ¹æ®æˆ‘ä»¬çš„è¿‘ä¼¼æ¨¡å‹è·Ÿå®é™…å‡½æ•°ä¹‹é—´çš„å·®å¼‚æ¥ç¡®å®šè¿™ä¸ªèŒƒå›´</strong>ï¼šå¦‚æœå·®å¼‚å°ï¼Œæˆ‘ä»¬å°±è®©èŒƒå›´å°½å¯èƒ½å¤§ï¼›å¦‚æœå·®å¼‚å¤§ï¼Œæˆ‘ä»¬å°±ç¼©å°è¿™ä¸ªè¿‘ä¼¼èŒƒå›´ã€‚å› æ­¤ï¼Œè€ƒè™‘ä½¿ç”¨ $(29)$ æ¥åˆ¤æ–­æ³°å‹’è¿‘ä¼¼æ˜¯å¦å¤Ÿå¥½ã€‚</p>
<script type="math/tex; mode=display">
\rho=\frac{f(x+\Delta x)-f(x)}{J(x)\Delta x }\tag{29}</script><p>$\rho$ çš„åˆ†å­æ˜¯<strong>å®é™…å‡½æ•°ä¸‹é™</strong>çš„å€¼ï¼Œåˆ†æ¯æ˜¯<strong>è¿‘ä¼¼æ¨¡å‹ä¸‹é™</strong>çš„å€¼ã€‚å¦‚æœ $\rho$ æ¥è¿‘äº 1ï¼Œåˆ™è¿‘ä¼¼æ˜¯å¥½çš„ã€‚å¦‚æœ $\rho$  å¤ªå°ï¼Œè¯´æ˜å®é™…å‡å°çš„å€¼è¿œå°‘äºè¿‘ä¼¼å‡å°çš„å€¼ï¼Œåˆ™è®¤ä¸ºè¿‘ä¼¼æ¯”è¾ƒå·®ï¼Œéœ€è¦ç¼©å°è¿‘ä¼¼èŒƒå›´ã€‚åä¹‹ï¼Œå¦‚æœ $\rho$  æ¯”è¾ƒå¤§ï¼Œåˆ™è¯´æ˜å®é™…ä¸‹é™çš„æ¯”é¢„è®¡çš„æ›´å¤§ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¤§è¿‘ä¼¼èŒƒå›´ã€‚</p>
<p><img src="/images/SLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–æ•°å­¦æ¨å¯¼/image-20220513154553510.png" alt="image-20220513154553510" style="zoom: 67%;" /></p>
<p>æˆ‘ä»¬ç”¨ Lagrange ä¹˜å­å°†$(6.24)$ è½¬åŒ–ä¸ºä¸€ä¸ªæ— çº¦æŸä¼˜åŒ–é—®é¢˜ï¼š</p>
<script type="math/tex; mode=display">
\underset{\Delta x_K}{\min}\frac{1}{2}
\parallel f(x_k)+J(x_k)\Delta x_k
\parallel^2
=\frac{\lambda}{2}\parallel D\Delta x \parallel^2\tag{30}</script><p>ç±»ä¼¼äº Gauss-Newton ä¸­çš„åšæ³•ï¼ŒæŠŠå®ƒå±•å¼€åï¼Œæˆ‘ä»¬å‘ç°è¯¥æ–¹æ³•æœ€ç»ˆä¹Ÿæ˜¯è®¡ç®—å¢é‡çš„çº¿æ€§æ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
(H+\lambda D^TD)\Delta x=g\tag{31}</script><p>å¯ä»¥çœ‹åˆ°ï¼Œå¢é‡æ–¹ç¨‹ç›¸æ¯”äº Gauss-Newtonï¼Œå¤šäº†ä¸€é¡¹ $\lambda D^T D$ã€‚å¦‚æœè€ƒè™‘å®ƒçš„ç®€åŒ–å½¢ å¼ï¼Œå³ $D = I$ï¼Œé‚£ä¹ˆç›¸å½“äºæ±‚è§£ï¼š</p>
<script type="math/tex; mode=display">
(H+\lambda I)\Delta x=g\tag{32}</script><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå½“å‚æ•° $Î»$ æ¯”è¾ƒå°æ—¶ï¼Œ$H $å ä¸»è¦åœ°ä½ï¼Œè¿™è¯´æ˜äºŒæ¬¡è¿‘ä¼¼æ¨¡å‹åœ¨è¯¥èŒƒå›´å†…æ˜¯æ¯” è¾ƒå¥½çš„ï¼ŒL-M æ–¹æ³•æ›´æ¥è¿‘äº G-N æ³•ã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ $Î»$ æ¯”è¾ƒå¤§æ—¶ï¼Œ$Î»I $å æ®ä¸»è¦åœ°ä½ï¼ŒL-M æ›´æ¥è¿‘äºä¸€é˜¶æ¢¯åº¦ä¸‹é™æ³•ï¼ˆå³æœ€é€Ÿä¸‹é™ï¼‰ï¼Œè¿™è¯´æ˜é™„è¿‘çš„äºŒæ¬¡è¿‘ä¼¼ä¸å¤Ÿå¥½ã€‚L-M çš„æ±‚è§£æ–¹ å¼ï¼Œå¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…çº¿æ€§æ–¹ç¨‹ç»„çš„ç³»æ•°çŸ©é˜µçš„éå¥‡å¼‚å’Œç—…æ€é—®é¢˜ï¼Œæä¾›æ›´ç¨³å®šæ›´å‡†ç¡® çš„å¢é‡ $âˆ†x$ã€‚</p>
<h1 id="BAæ±‚è§£"><a href="#BAæ±‚è§£" class="headerlink" title="BAæ±‚è§£"></a>BAæ±‚è§£</h1><p>é€šè¿‡å‰æ–‡ã€‚æˆ‘ä»¬çŸ¥é“SLAM ä¸­çš„ä¼˜åŒ–é—®é¢˜ä»€ä¹ˆï¼Œè€Œä¸”æˆ‘ä»¬çŸ¥é“ä¼˜åŒ–çš„æ•°å­¦å·¥å…·æœ€å°äºŒä¹˜æ³•ï¼Œé‚£ä¹ˆå¦‚ä½•è¿›è¡Œä¼˜åŒ–ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸‹é¢è®¨è®ºçš„ä¸»è¦é—®é¢˜ã€‚</p>
<h2 id="æŠ•å½±æ¨¡å‹"><a href="#æŠ•å½±æ¨¡å‹" class="headerlink" title="æŠ•å½±æ¨¡å‹"></a>æŠ•å½±æ¨¡å‹</h2><p>ä»ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ä¸­çš„ç‚¹ $p$ å‡ºå‘ï¼ŒæŠŠç›¸æœºçš„å†…å¤–å‚æ•°å’Œç•¸å˜éƒ½è€ƒè™‘è¿›æ¥ï¼Œæœ€åæŠ•å½±æˆåƒç´ åæ ‡ï¼Œä¸€å…±éœ€è¦å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>é¦–å…ˆï¼ŒæŠŠä¸–ç•Œåæ ‡è½¬æ¢åˆ°ç›¸æœºåæ ‡ï¼Œè¿™é‡Œå°†ç”¨åˆ°ç›¸æœºå¤–å‚æ•°$ (R, t)$ï¼š</li>
</ol>
<script type="math/tex; mode=display">
P^\prime=Rp+t=[X^\prime,Y^\prime,Z^\prime]^T\tag{33}</script><ol>
<li>ç„¶åï¼Œå°† $P^\prime$ æŠ•è‡³å½’ä¸€åŒ–å¹³é¢ï¼Œå¾—åˆ°å½’ä¸€åŒ–åæ ‡ï¼š</li>
</ol>
<script type="math/tex; mode=display">
P_c=[u_c,v_c,1]^T=[\frac{X^\prime}{Z^\prime},\frac{Y^\prime}{Z^\prime},1]^T\tag{34}</script><ol>
<li>å¯¹å½’ä¸€åŒ–åæ ‡å»ç•¸å˜ï¼Œå¾—åˆ°å»ç•¸å˜åçš„åæ ‡ã€‚è¿™é‡Œæš‚æ—¶åªè€ƒè™‘å¾„å‘ç•¸å˜ï¼š</li>
</ol>
<script type="math/tex; mode=display">
\begin{align*}
u_c^\prime=u_c(1+k_1r_c^2+k_2r_c^4)\\
v_c^\prime=v_c(1+k_1r_c^2+k_2r_c^4)\\
\end{align*}
\tag{35}</script><ol>
<li>æœ€åï¼Œæ ¹æ®å†…å‚æ¨¡å‹ï¼Œè®¡ç®—åƒç´ åæ ‡ï¼š</li>
</ol>
<script type="math/tex; mode=display">
\begin{align*}
u_s=f_xu_c^\prime+c_x\\
v_s=f_yv_c^\prime+c_y
\end{align*}
\tag{36}</script><p>å¯¹äºè§‚æµ‹æ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
z_{k,j}=h(y_j,x_k)+v_{k,j}\tag{37}</script><p>è¿™é‡Œçš„ $x$ æŒ‡ä»£æ­¤æ—¶ç›¸æœºçš„ä½å§¿ï¼Œå³å¤–å‚ $R, t$ï¼Œå®ƒå¯¹åº”çš„æä»£æ•°ä¸º $Î¾$ã€‚è·¯æ ‡ $y$ å³è¿™é‡Œçš„ä¸‰ç»´ç‚¹ $p$ï¼Œè€Œè§‚æµ‹æ•°æ®åˆ™æ˜¯åƒç´ åæ ‡$z = [u_s , v_s ]^T $ã€‚</p>
<p><img src="/images/SLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–æ•°å­¦æ¨å¯¼/image-20220405145736323.png" alt="image-20220405145736323"></p>
<p>ä»¥æœ€å°äºŒä¹˜çš„è§’åº¦æ¥è€ƒè™‘ï¼Œé‚£ä¹ˆå¯ä»¥åˆ—å†™å…³äºæ­¤æ¬¡è§‚æµ‹çš„è¯¯å·®ï¼š</p>
<script type="math/tex; mode=display">
e=z-h(\xi,p)\tag{38}</script><p>è®¾ $z_{ij}$ä¸ºåœ¨ä½å§¿ $\xi_i $å¤„è§‚å¯Ÿè·¯æ ‡ $p_j $äº§ç”Ÿçš„æ•°æ®ï¼Œé‚£ä¹ˆæ•´ä½“çš„æŸå¤±å‡½æ•°ï¼ˆCost Functionï¼‰ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\frac{1}{2}\sum^m_{i=1}\sum^n_{j=1}\parallel e_{ij}\parallel^2=\frac{1}{2}\sum^m_{i=1}\sum^n_{j=1}\parallel z_{ij}-h(Î¾_i,p_j) \parallel^2\tag{39}</script><p>å¯¹è¿™ä¸ªæœ€å°äºŒä¹˜è¿›è¡Œæ±‚è§£ï¼Œç›¸å½“äºå¯¹ä½å§¿å’Œè·¯æ ‡åŒæ—¶ä½œäº†è°ƒæ•´ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„$BA$ã€‚</p>
<h2 id="BAæ±‚è§£-1"><a href="#BAæ±‚è§£-1" class="headerlink" title="BAæ±‚è§£"></a>BAæ±‚è§£</h2><p>åœ¨æ•´ä½“ $BA$ç›®æ ‡å‡½æ•°ä¸Šï¼Œæˆ‘ä»¬å¿…é¡»æŠŠè‡ªå˜é‡å®šä¹‰æˆæ‰€æœ‰å¾…ä¼˜åŒ–çš„å˜é‡ï¼š</p>
<script type="math/tex; mode=display">
x=[\xi_1,...,\xi_m,p_1,...,p_n]^T\tag{40}</script><p>ç›¸åº”çš„ï¼Œå¢é‡æ–¹ç¨‹ä¸­çš„$ âˆ†x $åˆ™æ˜¯å¯¹æ•´ä½“è‡ªå˜é‡çš„å¢é‡ã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸‹ï¼Œå½“æˆ‘ä»¬ç»™è‡ªå˜é‡ä¸€ä¸ªå¢é‡æ—¶ï¼Œç›®æ ‡å‡½æ•°å˜ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\frac{1}{2}\parallel f(x+\Delta x)\parallel^2\approx \frac{1}{2}\sum^m_{i=1}\sum^n_{j=1}\parallel e_{ij}+F_{ij}\Delta\xi_i+E_{ij}\Delta p_i \parallel^2\tag{41}</script><p>å…¶ä¸­$ F_{ij} $è¡¨ç¤ºæ•´ä¸ªä»£ä»·å‡½æ•°åœ¨å½“å‰çŠ¶æ€ä¸‹å¯¹<strong>ç›¸æœºå§¿æ€</strong>çš„åå¯¼æ•°ï¼Œè€Œ $E_{ij}$ è¡¨ç¤ºè¯¥å‡½æ•°å¯¹<strong>è·¯æ ‡ç‚¹ä½ç½®</strong>çš„åå¯¼ã€‚</p>
<p><strong>è§‚æµ‹ç›¸æœºæ–¹ç¨‹å…³äºç›¸æœºä½å§¿çš„å¯¼æ•°çŸ©é˜µï¼š</strong></p>
<script type="math/tex; mode=display">
\begin{align*}
F&=-
\begin{bmatrix}
\frac{f_x}{Z^â€²}&0&-\frac{f_xX^â€²}{Z^{â€²2}}
&-\frac{f_xX^â€²Y^â€²}{Z^{â€²2}}&f_x+\frac{f_xX^2}{Z^{â€²2}}&-\frac{f_xY^â€²}{Z^{â€²}}
\\
0&\frac{f_y}{Z^â€²}&-\frac{f_yY^â€²}{Z^{â€²2}}
&-f_y-\frac{f_yY^{â€²2}}{Z^{â€²2}}&\frac{f_yX^â€²Y^â€²}{Z^{â€²}}&\frac{f_yX^â€²}{Z^{â€²}}
\end{bmatrix}\\
\end{align*}\tag{42}</script><p><strong>è§‚æµ‹ç›¸æœºæ–¹ç¨‹å…³äºç‰¹å¾ç‚¹çš„å¯¼æ•°çŸ©é˜µ</strong></p>
<script type="math/tex; mode=display">
E=\begin{bmatrix}
\frac{f_x}{Z^â€²}&0&-\frac{f_xX^â€²}{Z^{â€²2}}\\
0&\frac{f_y}{Z^â€²}&-\frac{f_yY^â€²}{Z^{â€²2}}
\end{bmatrix}R\tag{43}</script><p>å…³äº$E,F$é›…å¯æ¯”çŸ©é˜µçš„å…·ä½“æ±‚å¯¼è¿‡ç¨‹ï¼Œå¯ä»¥æŸ¥é˜…ï¼š<a href="https://lukeyalvin.top/posts/20908.html">ch7_æ±‚è§£PnPå¹¶ä½¿ç”¨BAä¼˜åŒ–</a></p>
<p>ç°åœ¨ï¼ŒæŠŠç›¸æœºä½å§¿å˜é‡æ”¾åœ¨ä¸€èµ·ï¼š</p>
<script type="math/tex; mode=display">
x_c=[\xi_1,\xi_2,...,\xi_m]\in\mathbb{R}^{6m}\tag{44}</script><p>å¹¶æŠŠç©ºé—´ç‚¹çš„å˜é‡ä¹Ÿæ”¾åœ¨ä¸€èµ·ï¼š</p>
<script type="math/tex; mode=display">
x_p=[p_1,p_2,...,p_n]^T\in \mathbb{R}^{3n}\tag{45}</script><p>ç›®æ ‡å‡½æ•°å˜ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\frac{1}{2}\parallel f(x+\Delta x)\parallel^2\approx \frac{1}{2}\sum^m_{i=1}\sum^n_{j=1}\parallel e+F\Delta x_c+E_\Delta x_p \parallel^2\tag{46}</script><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥å¼ä»ä¸€ä¸ªç”±<strong>å¾ˆå¤šä¸ªå°å‹äºŒæ¬¡é¡¹ä¹‹å’Œ</strong>ï¼Œå˜æˆäº†ä¸€ä¸ªæ›´æ•´ä½“çš„æ ·å­ã€‚è¿™é‡Œçš„é›…å¯æ¯”çŸ©é˜µ $E $å’Œ$ F$ å¿…é¡»æ˜¯æ•´ä½“ç›®æ ‡å‡½æ•°å¯¹æ•´ä½“å˜é‡çš„å¯¼æ•°ï¼Œå®ƒå°†æ˜¯ä¸€ä¸ªå¾ˆå¤§å—çš„çŸ©é˜µï¼Œè€Œé‡Œå¤´æ¯ä¸ªå°åˆ†å—ï¼Œéœ€è¦ç”±æ¯ä¸ªè¯¯å·®é¡¹çš„å¯¼æ•° $F_{ij} $å’Œ $E_{ij}$ â€œæ‹¼å‡‘â€èµ·æ¥ã€‚ç„¶åï¼Œæ— è®ºæˆ‘ä»¬ä½¿ç”¨ $G-N$ è¿˜æ˜¯$ L-M $æ–¹æ³•ï¼Œæœ€åéƒ½å°†é¢å¯¹å¢é‡çº¿æ€§æ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
H\Delta x = g\tag{47}</script><p>å¦‚æœæ˜¯é«˜æ–¯ç‰›é¡¿ï¼Œ$H$ å–$J^TJ$ï¼›åˆ—æ–‡ä¼¯æ ¼æ˜¯ $J^T J + Î»I $çš„å½¢å¼</p>
<p>ç”±äºæˆ‘ä»¬æŠŠå˜é‡å½’ç±»æˆäº†ä½å§¿å’Œç©ºé—´ç‚¹ä¸¤ç§ï¼Œæ‰€ä»¥é›…å¯æ¯”çŸ©é˜µå¯ä»¥åˆ†å—ä¸ºï¼š</p>
<script type="math/tex; mode=display">
J=
\begin{bmatrix}
F & E
\end{bmatrix}\tag{48}</script><p>å…¶ä¸­$F$æ˜¯$2 Ã— 6$çš„çŸ©é˜µï¼Œ$E$æ˜¯$2 Ã— 3$çš„çŸ©é˜µ.</p>
<p>ä»¥ G-N ä¸ºä¾‹ï¼Œåˆ™ H çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
H=J^TJ=
\begin{bmatrix}
F^TF & F^TE\\
E^TF & E^TE
\end{bmatrix}\tag{49}</script><p>åœ¨SLAMä¸­æˆ‘ä»¬ä¼šè€ƒè™‘HçŸ©é˜µçš„ç¨€ç–æ€§ï¼Œè¿›è€ŒåŠ é€ŸBAçš„æ±‚è§£ã€‚</p>
<h2 id="ç¨€ç–æ€§å’Œè¾¹ç¼˜åŒ–"><a href="#ç¨€ç–æ€§å’Œè¾¹ç¼˜åŒ–" class="headerlink" title="ç¨€ç–æ€§å’Œè¾¹ç¼˜åŒ–"></a>ç¨€ç–æ€§å’Œè¾¹ç¼˜åŒ–</h2><p>åœ¨è§†è§‰ SLAM ä¸­ï¼Œä¸€ä¸ªå›¾åƒå°±ä¼šæå‡ºæ•°ç™¾ä¸ªç‰¹å¾ç‚¹ï¼Œå¤§å¤§å¢åŠ äº†è¿™ä¸ªçº¿æ€§æ–¹ç¨‹çš„è§„æ¨¡ã€‚å¦‚æœç›´æ¥å¯¹ H æ±‚é€†æ¥è®¡ç®—å¢é‡æ–¹ç¨‹ï¼Œç”±äºçŸ©é˜µæ±‚é€†æ˜¯å¤æ‚åº¦ä¸º $O(n^3 )$ çš„æ“ä½œï¼Œè¿™æ˜¯éå¸¸æ¶ˆè€—è®¡ç®—èµ„æºçš„ã€‚å¹¸è¿åœ°æ˜¯ï¼Œè¿™é‡Œçš„ H çŸ©é˜µæ˜¯æœ‰ä¸€å®šçš„ç‰¹æ®Šç»“æ„çš„ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ®Šç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥åŠ é€Ÿæ±‚è§£è¿‡ç¨‹ã€‚</p>
<p>21 ä¸–çºªè§†è§‰ SLAM çš„ä¸€ä¸ªé‡è¦è¿›å±•æ˜¯è®¤è¯†åˆ°äº†çŸ©é˜µ H çš„ç¨€ç–ç»“æ„ï¼Œå¹¶å‘ç°è¯¥ç»“æ„å¯ä»¥è‡ªç„¶ã€æ˜¾å¼åœ°ç”¨å›¾ä¼˜åŒ–æ¥è¡¨ç¤º ã€‚</p>
<p>ä¸¾ä¾‹ï¼šå‡è®¾ä¸€ä¸ªåœºæ™¯å†…æœ‰ $2$ ä¸ªç›¸æœºä½å§¿ $(C_1 , C_2 )$ å’Œ $6$ ä¸ªè·¯æ ‡ $(P_1 , P_2 , P_3 , P_4 , P_5 , P_6 )$ã€‚è¿™äº›ç›¸æœºå’Œç‚¹äº‘æ‰€å¯¹åº”çš„å˜é‡ä¸º $Î¾_i , i = 1, 2$ ä»¥åŠ $p_j , j = 1, . . . , 6$ã€‚ç›¸æœº $C_1$ è§‚æµ‹åˆ°è·¯æ ‡ $P_1 , P_2 , P_3 , P_4$ ï¼Œç›¸æœº $C_2$ è§‚æµ‹åˆ°äº†è·¯æ ‡ $P_3 , P_4 , P_5 , P_6$ ã€‚</p>
<p>å¦‚å›¾æ‰€ç¤ºï¼šç›¸æœºå’Œè·¯æ ‡ä»¥åœ†å½¢èŠ‚ç‚¹è¡¨ç¤ºã€‚å¦‚æœ $i$ ç›¸æœºèƒ½å¤Ÿè§‚æµ‹åˆ° $j$ ç‚¹äº‘ï¼Œæˆ‘ä»¬å°±åœ¨å®ƒä»¬å¯¹åº”çš„èŠ‚ç‚¹è¿ä¸Šä¸€æ¡è¾¹ã€‚</p>
<p><img src="/images/SLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–æ•°å­¦æ¨å¯¼/image-20220513160409346.png" alt="image-20220513160409346" style="zoom: 33%;" /></p>
<p>å¯ä»¥æ¨å‡ºè¯¥åœºæ™¯ä¸‹çš„ BA ç›®æ ‡å‡½æ•°åº”è¯¥æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
\frac{1}{2}\left(
\parallel e_{11} \parallel^2+\parallel e_{12} \parallel^2+\parallel e_{13} \parallel^2+
\parallel e_{14} \parallel^2+\parallel e_{23} \parallel^2+\parallel e_{24} \parallel^2+
\parallel e_{25} \parallel^2+\parallel e_{26} \parallel^2
\right)\tag{50}</script><p>è¿™é‡Œçš„ $e_{ij}$ ä½¿ç”¨ä¹‹å‰å®šä¹‰è¿‡çš„ä»£ä»·å‡½æ•°ï¼Œå³å¼ $(39)$ã€‚ä»¥ $e_{11}$ ä¸ºä¾‹ï¼Œå®ƒæè¿°äº†åœ¨ $C_1$ çœ‹åˆ°äº† $P_1$ è¿™ä»¶äº‹ï¼Œä¸å…¶ä»–çš„ç›¸æœºä½å§¿å’Œè·¯æ ‡æ— å…³ã€‚ä»¤ $J_{11}$  ä¸º  $e_{11}$  æ‰€å¯¹åº”çš„é›…å¯æ¯”çŸ©é˜µï¼Œä¸éš¾çœ‹å‡º  $e_{11}$  å¯¹ç›¸æœºå˜é‡ $\xi_2$ å’Œè·¯æ ‡ç‚¹ $p_2 , . . . , p_6$ çš„åå¯¼éƒ½ä¸º 0ã€‚æˆ‘ä»¬æŠŠæ‰€æœ‰å˜é‡ä»¥ $x = (Î¾_1 , Î¾_2 , p_1 , . . . , p_6 )^T$ çš„é¡ºåºæ‘†æ”¾ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">
J_{11}=\frac{\partial e_{11} }{\partial x}
=\left(
\frac{\partial e_{11} }{\partial \xi_1},0,\frac{\partial e_{11} }{\partial p_1}
,0,0,0,0,0
\right)\tag{51}</script><p><img src="/images/SLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–æ•°å­¦æ¨å¯¼/image-20220513161314472.png" alt="image-20220513161314472" style="zoom:50%;" /></p>
<p>ç±»ä¼¼åœ°ï¼Œå¯ä»¥æ¨å¯¼å‡ºå¦‚ä¸‹å›¾æ¡ˆï¼š</p>
<p><img src="/images/SLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–æ•°å­¦æ¨å¯¼/image-20220513161435601.png" alt="image-20220513161435601" style="zoom: 50%;" /></p>
<p>ç°åœ¨è€ƒè™‘æ›´ä¸€èˆ¬çš„æƒ…å†µï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ $m$ ä¸ªç›¸æœºä½å§¿ï¼Œ$n $ ä¸ªè·¯æ ‡ç‚¹ã€‚ç”±äºé€šå¸¸è·¯æ ‡æ•°é‡ è¿œè¿œä¼šæ¯”ç›¸æœºå¤šï¼Œäºæ˜¯æœ‰ $n â‰« m$ã€‚ç”±ä¸Šé¢æ¨ç†å¯çŸ¥ï¼Œå®é™…å½“ä¸­çš„ H çŸ©é˜µä¼šåƒä¸‹å›¾æ‰€ç¤ºçš„é‚£æ ·ã€‚å®ƒçš„å·¦ä¸Šè§’å—æ˜¾å¾—éå¸¸å°ï¼Œè€Œå³ä¸‹è§’çš„å¯¹è§’å—å æ®äº†å¤§é‡åœ°æ–¹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé å¯¹è§’éƒ¨åˆ†åˆ™åˆ†å¸ƒç€æ•£ä¹±çš„è§‚æµ‹æ•°æ®ã€‚ç”±äºå®ƒçš„å½¢çŠ¶å¾ˆåƒç®­å¤´ï¼Œåˆç§°ä¸º<strong>ç®­å¤´å½¢ï¼ˆArrow-likeï¼‰ çŸ©é˜µ</strong>ã€‚åŒæ—¶å®ƒåˆå¾ˆåƒä¸€æŠŠé•å­ï¼Œæ‰€ä»¥ä¹Ÿå«<strong>é•å½¢çŸ©é˜µ</strong>ã€‚</p>
<p><img src="/images/SLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–æ•°å­¦æ¨å¯¼/image-20220513161821872.png" alt="image-20220513161821872" style="zoom: 33%;" /></p>
<p>äºæ˜¯ï¼Œå¯¹åº”çš„çº¿æ€§æ–¹ç¨‹ç»„ä¹Ÿå¯ä»¥ç”± $Hâˆ†x = g $ å˜ä¸ºå¦‚ä¸‹å½¢å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
B&E\\E^T&C
\end{bmatrix}
\begin{bmatrix}
\Delta x_c\\\Delta x_p
\end{bmatrix}=
\begin{bmatrix}
v\\w
\end{bmatrix}\tag{52}</script><p>å…¶ä¸­ $B$ æ˜¯å¯¹è§’å—çŸ©é˜µï¼Œæ¯ä¸ªå¯¹è§’å—çš„ç»´åº¦å’Œç›¸æœºå‚æ•°çš„ç»´åº¦ç›¸åŒï¼Œå¯¹è§’å—çš„ä¸ªæ•°æ˜¯ç›¸æœºå˜é‡çš„ä¸ªæ•°ã€‚ç”±äºè·¯æ ‡æ•°é‡ä¼šè¿œè¿œå¤§äºç›¸æœºå˜é‡ä¸ªæ•°ï¼Œæ‰€ä»¥ $C$ å¾€å¾€ä¹Ÿè¿œå¤§äº $B$ã€‚ä¸‰ ç»´ç©ºé—´ä¸­æ¯ä¸ªè·¯æ ‡ç‚¹ä¸ºä¸‰ç»´ï¼Œäºæ˜¯ $C$ çŸ©é˜µä¸ºå¯¹è§’å—çŸ©é˜µï¼Œæ¯ä¸ªå—ä¸º $3 \times 3$ ç»´çŸ©é˜µã€‚</p>
<p>è€ƒè™‘åˆ°å¯¹è§’å—çŸ©é˜µæ±‚é€†çš„éš¾åº¦è¿œå°äºå¯¹ä¸€èˆ¬çŸ©é˜µçš„æ±‚é€†éš¾åº¦ï¼Œæˆ‘ä»¬å¯¹çº¿æ€§æ–¹ç¨‹ç»„è¿›è¡Œé«˜æ–¯æ¶ˆå…ƒï¼Œç›®æ ‡æ˜¯æ¶ˆå»å³ä¸Šè§’çš„éå¯¹è§’éƒ¨åˆ† $E$ï¼Œå¾—ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
I&-EC^{-1}\\0&I
\end{bmatrix}
\begin{bmatrix}
B&E\\E^T&C
\end{bmatrix}
\begin{bmatrix}
\Delta x_c\\\Delta x_p
\end{bmatrix}=
\begin{bmatrix}
I&-EC^{-1}\\0&I
\end{bmatrix}
\begin{bmatrix}
v\\w
\end{bmatrix}\tag{53}</script><p>æ•´ç†å¾—ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
B-EC^{-1}E^T&0\\E^T&C
\end{bmatrix}
\begin{bmatrix}
\Delta x_c\\\Delta x_p
\end{bmatrix}=
\begin{bmatrix}
v-EC^{-1}w\\w
\end{bmatrix}\tag{54}</script><p>ç»è¿‡æ¶ˆå…ƒä¹‹åï¼Œç¬¬ä¸€è¡Œæ–¹ç¨‹ç»„å˜æˆå’Œ $âˆ†x_p$ æ— å…³çš„é¡¹ã€‚å•ç‹¬æŠŠå®ƒæ‹¿å‡ºæ¥ï¼Œå¾—åˆ°å…³äºä½å§¿éƒ¨åˆ†çš„å¢é‡æ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
[B-EC^{-1}E^T]\Delta x_c=v-EC^{-1}w\tag{55}</script><p>è¿™ä¸ªçº¿æ€§æ–¹ç¨‹ç»„çš„ç»´åº¦å’Œ $B$ çŸ©é˜µä¸€æ ·ã€‚æˆ‘ä»¬çš„åšæ³•æ˜¯å…ˆæ±‚è§£è¿™ä¸ªæ–¹ç¨‹ï¼Œç„¶åæŠŠè§£å¾— çš„ $âˆ†x_c$ ä»£å…¥åˆ°åŸæ–¹ç¨‹ï¼Œç„¶åæ±‚è§£ $âˆ†x_p$ ã€‚</p>
<script type="math/tex; mode=display">
\Delta x_p=C^{-1}(w-E^T\Delta x_c)\tag{56}</script><p>è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º <strong>Marginalization</strong>ï¼Œæˆ–è€… <strong>Schur æ¶ˆå…ƒ (Schur Elimination)</strong>ã€‚</p>
<p>æˆ‘ä»¬è®° å¼ $(55)$ ä¸­çš„ $\Delta x_c$çš„ç³»æ•°ä¸º $S=B-EC^{-1}E^T$ ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒçš„ç¨€ç–æ€§ï¼š</p>
<p><img src="/images/SLAMä¸­çš„éçº¿æ€§ä¼˜åŒ–æ•°å­¦æ¨å¯¼/image-20220513165129947.png" alt="image-20220513165129947" style="zoom: 33%;" /></p>
<p>$S$ çŸ©é˜µçš„éå¯¹è§’çº¿ä¸Šçš„éé›¶çŸ©é˜µå—ï¼Œè¡¨ç¤ºäº†è¯¥å¤„å¯¹åº”çš„ä¸¤ä¸ªç›¸æœºå˜é‡ä¹‹é—´å­˜åœ¨ç€å…±åŒè§‚æµ‹çš„è·¯æ ‡ç‚¹ï¼Œæœ‰æ—¶å€™ç§°ä¸º<strong>å…±è§†ï¼ˆCo-visibilityï¼‰</strong>ã€‚åä¹‹ï¼Œå¦‚æœè¯¥å—ä¸ºé›¶ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸¤ä¸ªç›¸æœºæ²¡æœ‰å…±åŒè§‚æµ‹ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºçš„ç¨€ç–çŸ©é˜µï¼Œå·¦ä¸Šè§’å‰ $4 \times 4$ ä¸ªçŸ©é˜µå—å¯ä»¥è¡¨ç¤ºå¯¹åº”çš„ç›¸ æœºå˜é‡ $C_1 , C_2 , C_3 , C_4$ ä¹‹é—´æœ‰å…±åŒè§‚æµ‹ã€‚</p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>æœ€å°äºŒä¹˜æ³•</tag>
        <tag>åç«¯ä¼˜åŒ–</tag>
        <tag>BAä¸å›¾ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>é«˜æ–¯åˆ†å¸ƒã€åæ–¹å·®çŸ©é˜µä»¥åŠèˆ’å°”è¡¥çš„åº”ç”¨</title>
    <url>/posts/2613d057.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬æ–‡ä¸»è¦ä»‹ç»SLAMç›¸å…³çš„ä¸€äº›åŸºç¡€çš„æ¦‚ç‡å­¦çŸ¥è¯†ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯¹é«˜æ–¯åˆ†å¸ƒçš„åæ–¹å·®çŸ©é˜µä»¥åŠä¿¡æ¯çŸ©é˜µè¿›è¡Œäº†æ¯”è¾ƒç³»ç»Ÿçš„é˜è¿°ï¼Œå¹¶å¼•å…¥è¾¹ç¼˜åŒ–ä»¥åŠèˆ’å°”è¡¥çš„æ¦‚å¿µï¼Œå¹¶åˆ©ç”¨èˆ’å°”è¡¥åˆ†è§£å¤šå…ƒè”åˆé«˜æ–¯åˆ†å¸ƒï¼Œåˆ©ç”¨è¾¹ç¼˜åŒ–â€œä¼˜é›…â€çš„å»é™¤å¤šå…ƒè”åˆé«˜æ–¯åˆ†å¸ƒä¸­çš„å…ƒç´ ã€‚è¿™äº›ä¸ºä¹‹åçš„SLAM æ»‘åŠ¨çª—å£ç†è®ºå¥ å®šäº†åŸºç¡€ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><h2 id="æ¦‚ç‡ä¸æ¦‚ç‡å¯†åº¦"><a href="#æ¦‚ç‡ä¸æ¦‚ç‡å¯†åº¦" class="headerlink" title="æ¦‚ç‡ä¸æ¦‚ç‡å¯†åº¦"></a>æ¦‚ç‡ä¸æ¦‚ç‡å¯†åº¦</h2><p><img src="/images/SLAMä¸­çš„æ¦‚ç‡åŸºç¡€/image-20220511204935450.png" alt="image-20220511204935450" style="zoom:50%;" /></p>
<p>å›¾ä¸­ï¼Œå‡½æ•° $p(x)$ è¡¨ç¤º $x$ åœ¨åŒºé—´ $[a,b]$ ä¸Šçš„<strong>æ¦‚ç‡å¯†åº¦</strong>ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯éšæœºå˜é‡åœ¨åŒºé—´çš„åˆ†å¸ƒæƒ…å†µã€‚</p>
<p>$Pr$ ä»£è¡¨çš„æ˜¯ $x$ åœ¨åŒºé—´ $[c,d]$ ä¸Šçš„<strong>æ¦‚ç‡</strong>ï¼Œå®ƒæ˜¯æ¦‚ç‡å¯†åº¦å‡½æ•°çš„ç§¯åˆ†ï¼š</p>
<script type="math/tex; mode=display">
Pr(c\leq x \leq d)=\int^d_c p(x)dx\tag{1}</script><p>æˆ‘ä»¬å¹³æ—¶æ‰€è¯´â€œé«˜æ–¯åˆ†å¸ƒâ€ã€â€œéé«˜æ–¯åˆ†å¸ƒâ€å‡æ˜¯æŒ‡å®ƒçš„æ¦‚ç‡å¯†åº¦ã€‚</p>
<h2 id="è”åˆæ¦‚ç‡"><a href="#è”åˆæ¦‚ç‡" class="headerlink" title="è”åˆæ¦‚ç‡"></a>è”åˆæ¦‚ç‡</h2><p><strong>è”åˆæ¦‚ç‡</strong>è¡¨ç¤ºä¸¤ä¸ªäº‹ä»¶å…±åŒå‘ç”Ÿçš„æ¦‚ç‡ã€‚äº‹ä»¶ $A$ å’Œäº‹ä»¶ $B$ çš„è”åˆæ¦‚ç‡è¡¨ç¤ºä¸º $P(A\cap B),P(A,B),P(AB)$ </p>
<p>æ¯”å¦‚ $x\in[a,b]$ å’Œ $y\in[r,s]$ çš„è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸º $p(x,y)$ï¼Œå…¶ç§¯åˆ†è¡¨ç¤º $x,y$ åŒå¤„åœ¨æŸä¸ªåŒºé—´çš„æ¦‚ç‡ï¼Œæ»¡è¶³ä¸‹å¼ï¼š</p>
<script type="math/tex; mode=display">
\int^b_a\int^s_rp(x,y)dydx=1\tag{2}</script><p>ç‰¹åˆ«åœ°ï¼Œå½“ $x$ å’Œ $y$ ç›¸äº’ç‹¬ç«‹çš„æ—¶å€™ï¼š</p>
<script type="math/tex; mode=display">
p(x,y)=p(x)p(y)\tag{3}</script><h2 id="æ¡ä»¶æ¦‚ç‡"><a href="#æ¡ä»¶æ¦‚ç‡" class="headerlink" title="æ¡ä»¶æ¦‚ç‡"></a>æ¡ä»¶æ¦‚ç‡</h2><p>å°±æ˜¯äº‹ä»¶ $A$ åœ¨äº‹ä»¶ $B$ å‘ç”Ÿçš„æ¡ä»¶ä¸‹å‘ç”Ÿçš„æ¦‚ç‡ã€‚å³ä¸º $P(B|A)$.</p>
<p>æ¯”å¦‚ $x\in[a,b]$ å’Œ $y\in[r,s]$ ï¼Œå½“åœ¨ $y$ å·²çŸ¥çš„å‰æä¸‹ï¼Œ$x$ çš„æ¦‚ç‡åˆ†å¸ƒæ»¡è¶³ä¸‹å¼ï¼š</p>
<script type="math/tex; mode=display">
p(x)=\int^s_r p(x|y)p(y)dy\tag{4}</script><p>ç‰¹åˆ«åœ°ï¼Œå½“ $x$ å’Œ $y$ ç›¸äº’ç‹¬ç«‹çš„æ—¶å€™ï¼š</p>
<script type="math/tex; mode=display">
p(x|y)=p(x)\tag{5}</script><h2 id="è´å¶æ–¯å…¬å¼"><a href="#è´å¶æ–¯å…¬å¼" class="headerlink" title="è´å¶æ–¯å…¬å¼"></a>è´å¶æ–¯å…¬å¼</h2><p>è”åˆæ¦‚ç‡åˆ†è§£æˆæ¡ä»¶æ¦‚ç‡å’Œè¾¹ç¼˜æ¦‚ç‡çš„ä¹˜ç§¯ï¼Œå³</p>
<script type="math/tex; mode=display">
p(x,y)=p(x|y)p(y)=p(y|x)p(x)\tag{6}</script><p>é‡æ–°æ•´ç†ï¼Œå³å¯å¾—è´å¶æ–¯å…¬å¼</p>
<script type="math/tex; mode=display">
p(x|y)=\frac{p(y|x)p(x)}{p(y)}\tag{7}</script><h2 id="è´å¶æ–¯æ¨æ–­"><a href="#è´å¶æ–¯æ¨æ–­" class="headerlink" title="è´å¶æ–¯æ¨æ–­"></a>è´å¶æ–¯æ¨æ–­</h2><p>è´å¶æ–¯æ¨æ–­å¯ä»¥ç†è§£ä¸ºè´å¶æ–¯å…¬å¼çš„è¿ç”¨ï¼Œå®ƒæ˜¯æŒ‡ï¼Œå¦‚æœå·²çŸ¥<strong>å…ˆéªŒ</strong>æ¦‚ç‡å¯†åº¦å‡½æ•° $p(x)$ï¼Œä»¥åŠ<strong>ä¼ æ„Ÿå™¨æ¨¡å‹</strong> $p(y|x)$ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ ¹æ®è´å¶æ–¯å…¬å¼æ¨æ–­å‡º<strong>åéªŒ</strong>æ¦‚ç‡å¯†åº¦ã€‚</p>
<script type="math/tex; mode=display">
p(x|y)=\frac{p(y|x)p(x)}{\int p(y|x)p(x)dx}\tag{8}</script><p>å®é™…ä¸­ï¼Œè´å¶æ–¯æ¨æ–­æœ‰æ—¶ä¹Ÿå«è´å¶æ–¯ä¼°è®¡ã€‚</p>
<h2 id="é«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°"><a href="#é«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°" class="headerlink" title="é«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°"></a>é«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°</h2><p><strong>ä¸€ç»´æƒ…å†µä¸‹ï¼Œ</strong>é«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°è¡¨ç¤ºï¼š</p>
<script type="math/tex; mode=display">
p(x|\mu,\sigma^2)=\frac{1}{\sqrt{2\pi\sigma^2} }\exp(-\frac{1}{2}\frac{(x-\mu)^2}{\sigma^2})\tag{9}</script><p>å…¶ä¸­ $\mu$ ä¸ºå‡å€¼ï¼Œ $\sigma$ ä¸ºæ–¹å·®ã€‚</p>
<p><strong>å¤šç»´æƒ…å†µä¸‹ï¼Œ</strong>é«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°è¡¨ç¤ºä¸ºï¼š</p>
<script type="math/tex; mode=display">
p(x|\mu,\Sigma)=\frac{1}{\sqrt{(2\pi)^N\det\Sigma} }\exp\left(
-\frac{1}{2}(x-\mu)^T\Sigma^{-1}(x-\mu)
\right)\tag{10}</script><p>å…¶ä¸­ $\mu$ ä¸ºå‡å€¼ï¼Œ $\Sigma$ ä¸ºæ–¹å·®ã€‚</p>
<p>ä¸€èˆ¬æŠŠé«˜æ–¯åˆ†å¸ƒå†™æˆ $x\sim\mathcal{N}(\mu,\Sigma)$ã€‚</p>
<h2 id="è”åˆé«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°"><a href="#è”åˆé«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°" class="headerlink" title="è”åˆé«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°"></a>è”åˆé«˜æ–¯æ¦‚ç‡å¯†åº¦å‡½æ•°</h2><p>è‹¥æœ‰é«˜æ–¯åˆ†å¸ƒï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p(x)&=\mathcal{N}(\mu_x,\Sigma_{xx})\\
p(x)&=\mathcal{N}(\mu_y,\Sigma_{yy})
\end{align*}\tag{11}</script><p>åˆ™å®ƒä»¬çš„è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸º:</p>
<script type="math/tex; mode=display">
p(x,y)=\mathcal{N}
\left(
\begin{bmatrix}\mu_x\\\mu_y\end{bmatrix},
\begin{bmatrix}\Sigma_{xx}&\Sigma_{xy}\\\Sigma_{yx}&\Sigma_{yy}\end{bmatrix}
\right)\tag{12}</script><p>ç”±äºè”åˆæ¦‚ç‡æ»¡è¶³ä¸‹å¼:</p>
<script type="math/tex; mode=display">
p(x,y)=p(x|y)p(y)\tag{13}</script><p>è¯¥å¼åœ¨é«˜æ–¯åˆ†å¸ƒçš„å‰æä¸‹å¯ä»¥é‡æ–°åˆ†è§£ã€‚</p>
<h1 id="é«˜æ–¯åˆ†å¸ƒå’Œåæ–¹å·®çŸ©é˜µ"><a href="#é«˜æ–¯åˆ†å¸ƒå’Œåæ–¹å·®çŸ©é˜µ" class="headerlink" title="é«˜æ–¯åˆ†å¸ƒå’Œåæ–¹å·®çŸ©é˜µ"></a>é«˜æ–¯åˆ†å¸ƒå’Œåæ–¹å·®çŸ©é˜µ</h1><h2 id="é«˜æ–¯åˆ†å¸ƒ"><a href="#é«˜æ–¯åˆ†å¸ƒ" class="headerlink" title="é«˜æ–¯åˆ†å¸ƒ"></a>é«˜æ–¯åˆ†å¸ƒ</h2><p>ç”±å…¬å¼ $(10)$å¯çŸ¥ï¼Œé›¶å‡å€¼çš„å¤šå…ƒé«˜æ–¯åˆ†å¸ƒæœ‰å¦‚ä¸‹æ¦‚ç‡å½¢å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p(x)=&\frac{1}{\sqrt{(2\pi)^N\det\Sigma} }\exp\left(
-\frac{1}{2}x^T\Sigma^{-1}x
\right)\\
=&\frac{1}{Z }\exp\left(
-\frac{1}{2}x^T\Sigma^{-1}x
\right)
\end{align*}
\tag{14}</script><p>å…¶ä¸­ $\Sigma$ æ˜¯<strong>åæ–¹å·®çŸ©é˜µ</strong>ï¼Œåæ–¹å·®çŸ©é˜µçš„é€†è®°ä½œ $Î› = \Sigma^{-1}$ ï¼Œä¹Ÿç§°ä¹‹ä¸º<strong>ä¿¡æ¯çŸ©é˜µ</strong>ã€‚</p>
<p>æ¯”å¦‚å˜é‡ $x$ ä¸ºä¸‰ç»´çš„å˜é‡æ—¶ï¼Œåæ–¹å·®çŸ©é˜µä¸º:</p>
<script type="math/tex; mode=display">
\Sigma=\begin{bmatrix}
\Sigma_{11}&\Sigma_{12}&\Sigma_{13}\\
\Sigma_{21}&\Sigma_{22}&\Sigma_{23}\\
\Sigma_{31}&\Sigma_{32}&\Sigma_{33}
\end{bmatrix}\tag{15}</script><p>æ ¹æ®åæ–¹å·®çš„å®šä¹‰ï¼Œå…¶ä¸­ $Î£_{ij} = E(x_ix_j ) $ä¸ºå¯¹åº”å…ƒç´ æ±‚æœŸæœ›ã€‚</p>
<p>å…³äºåæ–¹å·®çŸ©é˜µçš„ä¸€äº›æ¡ˆä¾‹ä»‹ç»ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œ<a href="https://lukeyalvin.top/posts/8369.html#%E5%8D%8F%E6%96%B9%E5%B7%AE%E7%9F%A9%E9%98%B5">åæ–¹å·®çŸ©é˜µ</a></p>
<h2 id="åæ–¹å·®çŸ©é˜µä¸ä¿¡æ¯çŸ©é˜µ"><a href="#åæ–¹å·®çŸ©é˜µä¸ä¿¡æ¯çŸ©é˜µ" class="headerlink" title="åæ–¹å·®çŸ©é˜µä¸ä¿¡æ¯çŸ©é˜µ"></a>åæ–¹å·®çŸ©é˜µä¸ä¿¡æ¯çŸ©é˜µ</h2><h3 id="æ¡ˆä¾‹1"><a href="#æ¡ˆä¾‹1" class="headerlink" title="æ¡ˆä¾‹1"></a>æ¡ˆä¾‹1</h3><p>è®¾ $x_2$ ä¸ºå®¤å¤–çš„æ¸©åº¦ï¼Œ$x_1 , x_3$ åˆ†åˆ«ä¸ºæˆ¿é—´ $1$ å’Œæˆ¿é—´ $3$ çš„å®¤å†…æ¸©åº¦:</p>
<script type="math/tex; mode=display">
\begin{align*}
x_2&=v_2\\
x_1&=w_1x_2+v_1\\
x_3&=w_3x_2+v_3\\
\end{align*}\tag{16}</script><p>å…¶ä¸­ï¼Œ$w_i$ ä¸ºæ­£çš„å¸¸æ•°å€¼ï¼Œ$v_i$ ç›¸äº’ç‹¬ç«‹ï¼Œä¸”å„è‡ªæœä»åæ–¹å·®çŸ©é˜µä¸º $\sigma_i^2$ çš„é«˜æ–¯åˆ†å¸ƒã€‚</p>
<p><img src="/images/SLAMä¸­çš„æ¦‚ç‡åŸºç¡€/image-20220512153417672.png" alt="image-20220512153417672" style="zoom:25%;" /></p>
<p>ä»ä¸Šè¿°å…³ç³»ï¼Œæ ¹æ®åæ–¹å·®å…¬å¼çš„è®¡ç®—æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡º $x$ çš„åæ–¹å·®çŸ©é˜µï¼Œå…ˆä»å¯¹è§’å…ƒç´ å¼€å§‹è®¡ç®—ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Sigma_{11}=E(x_1x_1)&=E(({\color{red}w_1}{\color{green}v_2}+{\color{red}v_1})({\color{red}w_1}{\color{green}v_2}+{\color{red}v_1}))\\
&={\color{red}w_1^2}E({\color{green}v_2^2})+2{\color{red}w_1}E({\color{red}v_1}{\color{green}v_2})+E({\color{red}v_1^2})\\
&={\color{red}w_1^2}{\color{green}\sigma_2^2}+{\color{red}\sigma_1^2}
\end{align*}\tag{17}</script><p>åŒç†æœ‰ $\Sigma_{22}={\color{green}\sigma_2^2},\Sigma_{33}={\color{blue}w_3^2}{\color{green}\sigma_2^2}+{\color{blue}\sigma_3^2}$ ï¼Œå¯¹äºåæ–¹å·®çŸ©é˜µçš„éå¯¹è§’å…ƒç´ ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Sigma_{12}&=E(x_1x_2)=E(({\color{red}w_1}{\color{green}v_2}+{\color{red}v_1} ){\color{green}v_2})={\color{red}w_1}{\color{green}\sigma_2^2}\\
\Sigma_{13}&=E(({\color{red}w_1}{\color{green}v_2}+{\color{red}v_1} )({\color{blue}w_3}{\color{green}v_2}+{\color{blue}v_3} ))={\color{red}w_1}{\color{blue}w_3}{\color{green}\sigma_2^2}
\end{align*}\tag{18}</script><p>ä»¥æ­¤ç±»æ¨ï¼Œå¯ä»¥å¾—åˆ°æ•´ä¸ª<strong>åæ–¹å·®çŸ©é˜µ</strong>ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Sigma=\begin{bmatrix}
{\color{red}w_1^2}{\color{green}\sigma_2^2}+{\color{red}\sigma_1^2}&{\color{red}w_1}{\color{green}\sigma_2^2}&{\color{red}w_1}{\color{blue}w_3}{\color{green}\sigma_2^2}\\
{\color{red}w_1}{\color{green}\sigma_2^2}&{\color{green}\sigma_2^2}&{\color{blue}w_3}{\color{green}\sigma_2^2}\\{\color{red}w_1}{\color{blue}w_3}{\color{green}\sigma_2^2}&{\color{blue}w_3}{\color{green}\sigma_2^2}&{\color{blue}w_3^2}{\color{green}\sigma_2^2}+{\color{blue}\sigma_3^2}
\end{bmatrix}
\end{align*}\tag{19}</script><p>é€šè¿‡è®¡ç®—<strong>è”åˆé«˜æ–¯åˆ†å¸ƒ</strong>ä»è€Œå¾—åˆ°åæ–¹å·®çŸ©é˜µçš„é€†ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p(x_1,x_2,x_3)&=p(x_2)p(x_1|x_2)p(x_3|x_2)\\
&={\color{green}\frac{1}{Z_2}\exp(-\frac{x^2_2}{2\sigma_2^2})}
{\color{red}\frac{1}{Z_1}\exp(-\frac{(x_1-w_1x_2)^2}{2\sigma_1^2})}
{\color{blue}\frac{1}{Z_3}\exp(-\frac{(x_3-w_3x_2)^2}{2\sigma_3^2})}\\
&=\frac{1}{Z}\exp(
-x_2^2[{\color{green}\frac{1}{2\sigma_2^2} }
+{\color{red}\frac{w_1^2}{2\sigma_1^2} }
-{\color{blue}\frac{w_3^2}{2\sigma_3^2} }]
-x_1^2{\color{red}\frac{1}{2\sigma_1^2} }
+2x_1x_2{\color{red}\frac{w_1}{2\sigma_1^2} }
-x_3^2{\color{blue}\frac{1}{2\sigma_3^2} }
+2x_3x_2{\color{blue}\frac{w_3}{2\sigma_3^2} })\\
&=\frac{1}{Z}\exp(-\frac{1}{2}
\begin{bmatrix}x_1&x_2&x_3\end{bmatrix}
\begin{bmatrix}
{\color{red}\frac{1}{\sigma_1^2} }&{\color{red}\frac{w_1}{\sigma_1^2} }&0\\
{\color{red}\frac{w_1}{\sigma_1^2} }&{\color{red}\frac{w_1^2}{\sigma_1^2} }+{\color{green}\frac{1}{\sigma_2^2} }+{\color{blue}\frac{w_3^2}{\sigma_3^2} }&
{\color{blue}-\frac{w_3}{\sigma_3^2} }\\
0&{\color{blue}-\frac{w_3}{\sigma_3^2} }&{\color{blue}-\frac{1}{\sigma_3^2} }
\end{bmatrix}
\begin{bmatrix}x_1\\x_2\\x_3\end{bmatrix}
)
\end{align*}\tag{20}</script><p>ç”±æ­¤å¾—åˆ°åæ–¹å·®çŸ©é˜µçš„é€†ï¼Œå³<strong>ä¿¡æ¯çŸ©é˜µ</strong>ï¼š</p>
<script type="math/tex; mode=display">
Î› =\Sigma^{-1} =\begin{bmatrix}
{\color{red}\frac{1}{\sigma_1^2} }&{\color{red}\frac{w_1}{\sigma_1^2} }&0\\
{\color{red}\frac{w_1}{\sigma_1^2} }&{\color{red}\frac{w_1^2}{\sigma_1^2} }+{\color{green}\frac{1}{\sigma_2^2} }+{\color{blue}\frac{w_3^2}{\sigma_3^2} }&
{\color{blue}-\frac{w_3}{\sigma_3^2} }\\
0&{\color{blue}-\frac{w_3}{\sigma_3^2} }&{\color{blue}-\frac{1}{\sigma_3^2} }
\end{bmatrix}\tag{21}</script><p><strong>æ€»ç»“ï¼š</strong></p>
<p><font color="#660066">åæ–¹å·®çŸ©é˜µä¸­ï¼Œéå¯¹è§’å…ƒç´  $\Sigma_{ij}&gt;0ï¼Œi\ne j$ è¡¨ç¤ºä¸¤ä¸ªå˜é‡ä¹‹é—´æ˜¯<strong>æ­£ç›¸å…³</strong>ï¼›éå¯¹è§’å…ƒç´  $\Sigma_{ij}=0ï¼Œi\ne j$ è¡¨ç¤ºä¸¤ä¸ªå˜é‡ä¹‹é—´æ˜¯<strong>ç›¸äº’ç‹¬ç«‹</strong>ï¼›</font><br /></p>
<p><font color="#660066">ä¿¡æ¯çŸ©é˜µä¸­ï¼Œéå¯¹è§’å…ƒç´  $Î›_{ij}&lt;0ï¼Œi\ne j$ ç”šè‡³äº  $Î›_{ij}=0ï¼Œi\ne j$ ï¼Œæ¯”å¦‚ $Î›_{12} &lt; 0$   è¡¨ç¤ºåœ¨å˜é‡ $x_3$ å‘ç”Ÿçš„æ¡ä»¶ä¸‹ï¼Œå…ƒç´  $x_1$ å’Œ $x_2$ <strong>æ­£ç›¸å…³</strong>ã€‚  </font><br /></p>
<h3 id="æ¡ˆä¾‹2"><a href="#æ¡ˆä¾‹2" class="headerlink" title="æ¡ˆä¾‹2"></a>æ¡ˆä¾‹2</h3><p>ç±»ä¼¼ä¸æ¡ˆä¾‹ä¸€ï¼Œå®šä¹‰ $x_1,x_2,x_3$ å…³ç³»å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
x_2=w_1x_1+w_3x_3+v_2\tag{22}</script><p>æ¯”å¦‚ç‰¹å¾ä¸‰è§’åŒ–ï¼Œä¸¤ä¸ªç›¸æœº pose å¾—åˆ°ç‰¹å¾ä¸‰ç»´åæ ‡ã€‚</p>
<p><img src="/images/SLAMä¸­çš„æ¦‚ç‡åŸºç¡€/image-20220512164657043.png" alt="image-20220512164657043" style="zoom:25%;" /></p>
<p>åŒç†ï¼Œæ ¹æ®åæ–¹å·®çŸ©é˜µçš„å®šä¹‰ï¼Œå¯ä»¥å¾—åˆ°åæ–¹å·®çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
\Sigma=\begin{bmatrix}
{\color{red}\sigma_1^2}&{\color{red}w_1} {\color{red}\sigma_1^2}&0\\
{\color{red}w_1} {\color{red}\sigma_1^2}
&{\color{green}\sigma_2^2}+{\color{red}w_1} {\color{red}\sigma_1^2}+{\color{blue}w_3}  {\color{blue}\sigma_3^2}
&{\color{blue}w_3}  {\color{blue}\sigma_3^2}\\
0&{\color{blue}w_3}  {\color{blue}\sigma_3^2}&{\color{blue}\sigma_3^2}
\end{bmatrix}\tag{23}</script><p><strong>åæ–¹å·®çŸ©é˜µä¸­éå¯¹è§’å…ƒç´ ä¸º 0 è¡¨ç¤ºå˜é‡ä¹‹ é—´æ²¡æœ‰ç›¸å…³æ€§ã€‚</strong>è¿™æ˜¯å¦æ„å‘³ç€ä¿¡æ¯çŸ©é˜µä¸­ä¹Ÿä¼šä¸º 0 å‘¢ï¼Ÿ</p>
<p>åŒæ ·çš„æ–¹æ³•æ±‚å¾—åæ–¹å·®çŸ©é˜µçš„é€†ï¼Œå³<strong>ä¿¡æ¯çŸ©é˜µ</strong>ï¼š</p>
<script type="math/tex; mode=display">
Î› =\Sigma^{-1} =\begin{bmatrix}
{\color{red}\frac{1}{\sigma_1^2} }
+{\color{green}\frac{w_1^2}{\sigma_2^2} }&{\color{green}-\frac{w_1}{\sigma_2^2} }&{\color{green}\frac{w_1w_3}{\sigma_2^2} }\\
{\color{green}-\frac{w_1}{\sigma_2^2} }&{\color{green}\frac{1}{\sigma_2^2} }&{\color{green}-\frac{w_3}{\sigma_2^2} }\\
{\color{green}\frac{w_1w_3}{\sigma_2^2} }&{\color{green}-\frac{w_3}{\sigma_2^2} }&
{\color{BLUE}\frac{1}{\sigma_3^2} }+{\color{green}\frac{w_3^2}{\sigma_2^2} }
\end{bmatrix}\tag{24}</script><p><strong>æ€»ç»“ï¼š</strong></p>
<p><span style="color:red;">è™½ç„¶ $x_1$ å’Œ $x_3$ <strong>ä¸ç›¸å…³</strong>ï¼Œä½†æ˜¯ä¸è¯´æ˜ä»–ä»¬çš„ä¿¡æ¯çŸ©é˜µå¯¹åº”å…ƒç´  $Î›_{13}$<br>ä¸º 0ï¼›æ°æ°ä¿¡æ¯çŸ©é˜µä¸­ $Î›_{13} &gt; 0$, è¡¨ç¤ºçš„æ˜¯åœ¨å˜é‡ $x_2$ å‘ç”Ÿçš„æ¡ä»¶ä¸‹ï¼Œå˜ é‡$x_1$ å’Œ $x_3$ æˆ<strong>è´Ÿç›¸å…³</strong>ã€‚å¯¹åº”ä¸Šé¢çš„ä¾‹å­å³  $x_2$ ä¸ºå¸¸æ•°ï¼Œ<strong>å¦‚æœ $x_1$  å¤§ï¼Œåˆ™ $x_3$ å°</strong>ã€‚</span></p>
<p><strong>æ ·ä¾‹çš„æ„ä¹‰: éå¸¸æœ‰åŠ©äºæˆ‘ä»¬äº†è§£ SLAM çš„ä¿¡æ¯çŸ©é˜µ H çš„ç»„æˆã€‚</strong></p>
<h3 id="å»é™¤æ¡ˆä¾‹1ä¸­å˜é‡"><a href="#å»é™¤æ¡ˆä¾‹1ä¸­å˜é‡" class="headerlink" title="å»é™¤æ¡ˆä¾‹1ä¸­å˜é‡"></a>å»é™¤æ¡ˆä¾‹1ä¸­å˜é‡</h3><p>å¦‚æœæˆ‘ä»¬ç§»é™¤å˜é‡ï¼Œä¿¡æ¯çŸ©é˜µæˆ–åæ–¹å·®çŸ©é˜µå¦‚ä½•å˜åŒ–å‘¢?</p>
<p>æ¯”å¦‚å¯¹äºæ¡ˆä¾‹ä¸€æ¥è¯´ï¼Œå»é™¤å˜é‡$x_3$ï¼Œé‚£ä¹ˆå®ƒçš„ä¿¡æ¯çŸ©é˜µæˆ–åæ–¹å·®çŸ©é˜µå¦‚ä½•å˜åŒ–å‘¢?</p>
<p><img src="/images/SLAMä¸­çš„æ¦‚ç‡åŸºç¡€/image-20220512170647991.png" alt="image-20220512170647991" style="zoom:25%;" /></p>
<p>åˆ©ç”¨åæ–¹å·®çš„è®¡ç®—å…¬å¼å¯çŸ¥ï¼Œ$x_1 , x_2$ è®¡ç®—åæ–¹å·®æ—¶è·Ÿ $x_3$ ï¼Œå¹¶æ— å…³ç³»ï¼Œæ‰€ä»¥:</p>
<script type="math/tex; mode=display">
\begin{align*}
\Sigma=\begin{bmatrix}
{\color{red}w_1^2}{\color{green}\sigma_2^2}+{\color{red}\sigma_1^2}&{\color{red}w_1}{\color{green}\sigma_2^2}&
\xcancel{ {\color{red}w_1}{\color{blue}w_3}{\color{green}\sigma_2^2} }\\
{\color{red}w_1}{\color{green}\sigma_2^2}&{\color{green}\sigma_2^2}&
\xcancel{ {\color{blue}w_3}{\color{green}\sigma_2^2} }\\
\xcancel{ {\color{red}w_1}{\color{blue}w_3}{\color{green}\sigma_2^2} }&
\xcancel{ {\color{blue}w_3}{\color{green}\sigma_2^2} }&
\xcancel{ {\color{blue}w_3^2}{\color{green}\sigma_2^2}+{\color{blue}\sigma_3^2} }
\end{bmatrix}
\end{align*}\tag{25}</script><p>å°±èƒ½å¾—åˆ°å»é™¤ $x_3$  åçš„åæ–¹å·®çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Sigma=\begin{bmatrix}
{\color{red}w_1^2}{\color{green}\sigma_2^2}+{\color{red}\sigma_1^2}&{\color{red}w_1}{\color{green}\sigma_2^2}\\
{\color{red}w_1}{\color{green}\sigma_2^2}&{\color{green}\sigma_2^2}\\
\end{bmatrix}
\end{align*}\tag{26}</script><p>åŒæ ·ï¼Œæˆ‘ä»¬åª418133364éœ€è¦æŠŠä¿¡æ¯çŸ©é˜µå…¬å¼ $(16)$ ä¸­ $x_3$  å¯¹åº”çš„éƒ¨åˆ† (è“è‰²) å»æ‰ å°±å¯ä»¥:</p>
<script type="math/tex; mode=display">
Î› =\Sigma^{-1} =\begin{bmatrix}
{\color{red}\frac{1}{\sigma_1^2} }&{\color{red}\frac{w_1}{\sigma_1^2} }&\xcancel{0}\\
{\color{red}\frac{w_1}{\sigma_1^2} }&
{\color{red}\frac{w_1^2}{\sigma_1^2} }+{\color{green}\frac{1}{\sigma_2^2}+\xcancel{ {\color{blue}\frac{w_3^2}{\sigma_3^2} } } }&
\xcancel{ {\color{blue}-\frac{w_3}{\sigma_3^2} } }\\
\xcancel{0}&
\xcancel{ {\color{blue}-\frac{w_3}{\sigma_3^2} } }&
\xcancel{ {\color{blue}-\frac{1}{\sigma_3^2} } }
\end{bmatrix}\tag{27}</script><p>ä»è€Œå¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
Î› =\Sigma^{-1} =\begin{bmatrix}
{\color{red}\frac{1}{\sigma_1^2} }&{\color{red}\frac{w_1}{\sigma_1^2} }\\
{\color{red}\frac{w_1}{\sigma_1^2} }&
{\color{red}\frac{w_1^2}{\sigma_1^2} }+{\color{green}\frac{1}{\sigma_2^2} }\\
\end{bmatrix}\tag{28}</script><p>æ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Ÿä½†æ˜¯é—®é¢˜åœ¨äºï¼š<strong>å®é™…æ“ä½œè¿‡ç¨‹ä¸­å¹¶ä¸ä¼šæœ‰è¿™ç§é¢œè‰²æ ‡è®°ã€‚</strong></p>
<p>è¿™æ—¶ï¼Œéœ€è¦å¼•å…¥ marginalization <strong>(è¾¹ç¼˜åŒ–)</strong> å’Œ Schurâ€™s complement <strong>(èˆ’å°”è¡¥)</strong>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h1 id="èˆ’å°”è¡¥åŠå…¶åº”ç”¨"><a href="#èˆ’å°”è¡¥åŠå…¶åº”ç”¨" class="headerlink" title="èˆ’å°”è¡¥åŠå…¶åº”ç”¨"></a>èˆ’å°”è¡¥åŠå…¶åº”ç”¨</h1><h2 id="èˆ’å°”è¡¥çš„æ¦‚å¿µ"><a href="#èˆ’å°”è¡¥çš„æ¦‚å¿µ" class="headerlink" title="èˆ’å°”è¡¥çš„æ¦‚å¿µ"></a>èˆ’å°”è¡¥çš„æ¦‚å¿µ</h2><p>ç»™å®šä»»æ„çŸ©é˜µå— $M$ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<script type="math/tex; mode=display">
M=\begin{bmatrix}A&B\\C&D\end{bmatrix}\tag{29}</script><p>å¦‚æœï¼ŒçŸ©é˜µå— $D$ æ˜¯å¯é€†çš„ï¼Œåˆ™ $A âˆ’ BD^{âˆ’1} C$ç§°ä¹‹ä¸º $D$ å…³äº $M$ çš„èˆ’å°”è¡¥ã€‚</p>
<p>å¦‚æœï¼ŒçŸ©é˜µå— $A$ æ˜¯å¯é€†çš„ï¼Œåˆ™ $D âˆ’ CA^{âˆ’1} B$ ç§°ä¹‹ä¸º $A$ å…³äº $M$ çš„èˆ’å°”è¡¥ã€‚</p>
<h2 id="èˆ’å°”è¡¥çš„æ¥ç”±"><a href="#èˆ’å°”è¡¥çš„æ¥ç”±" class="headerlink" title="èˆ’å°”è¡¥çš„æ¥ç”±"></a>èˆ’å°”è¡¥çš„æ¥ç”±</h2><p>å°† $M$ çŸ©é˜µå˜æˆä¸Šä¸‰è§’æˆ–è€…ä¸‹ä¸‰è§’å½¢è¿‡ç¨‹ä¸­ï¼Œéƒ½ä¼šé‡åˆ°èˆ’å°”è¡¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\begin{bmatrix}
I&0\\-CA^{-1}&I
\end{bmatrix}
\begin{bmatrix}
A&B\\C&D
\end{bmatrix}=
\begin{bmatrix}
A&B\\0&\Delta_A
\end{bmatrix}\\
\begin{bmatrix}
A&B\\C&D
\end{bmatrix}
\begin{bmatrix}
I&-A^{-1}B\\0&I
\end{bmatrix}=
\begin{bmatrix}
A&0\\C&\Delta_A
\end{bmatrix}
\end{align*}\tag{30}</script><p>å…¶ä¸­ï¼š$âˆ†_A = D âˆ’ CA^{âˆ’1} B$ã€‚è”åˆèµ·æ¥ï¼Œå°† $M$ å˜å½¢æˆå¯¹è§’å½¢ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
I&0\\-CA^{-1}&I
\end{bmatrix}
\begin{bmatrix}
A&B\\C&D
\end{bmatrix}
\begin{bmatrix}
I&-A^{-1}B\\0&I
\end{bmatrix}=
\begin{bmatrix}
A&0\\0&\Delta_A
\end{bmatrix}\tag{31}</script><p>åè¿‡æ¥ï¼Œæˆ‘ä»¬åˆèƒ½ä»å¯¹è§’å½¢æ¢å¤æˆçŸ©é˜µ $M$ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
I&0\\CA^{-1}&I
\end{bmatrix}
\begin{bmatrix}
A&0\\0&\Delta_A
\end{bmatrix}
\begin{bmatrix}
I&A^{-1}B\\0&I
\end{bmatrix}=
\begin{bmatrix}
A&B\\C&D
\end{bmatrix}
\tag{32}</script><h2 id="èˆ’å°”è¡¥åˆ†è§£çš„å¥½å¤„"><a href="#èˆ’å°”è¡¥åˆ†è§£çš„å¥½å¤„" class="headerlink" title="èˆ’å°”è¡¥åˆ†è§£çš„å¥½å¤„"></a>èˆ’å°”è¡¥åˆ†è§£çš„å¥½å¤„</h2><p><strong>å¿«é€Ÿæ±‚è§£çŸ©é˜µ M çš„é€†</strong>ã€‚ç”±äºçŸ©é˜µ $M$ å¯ä»¥å†™æˆï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
A&B\\C&D
\end{bmatrix}=
\begin{bmatrix}
I&0\\CA^{-1}&I
\end{bmatrix}
\begin{bmatrix}
A&0\\0&\Delta_A
\end{bmatrix}
\begin{bmatrix}
I&A^{-1}B\\0&I
\end{bmatrix}
\tag{33}</script><p>ç”±æ­¤å¯å¾—åˆ°çŸ©é˜µ $M$ çš„é€†ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
A&B\\C&D
\end{bmatrix}^{-1}=
\begin{bmatrix}
I&-A^{-1}B\\0&I
\end{bmatrix}
\begin{bmatrix}
A^{-1}&0\\0&\Delta_A^{-1}
\end{bmatrix}
\begin{bmatrix}
I&0\\-CA^{-1}&I
\end{bmatrix}
\tag{34}</script><p>æˆ‘ä»¬å‘ç°ï¼ŒåŸæœ¬å¤æ‚çš„æ±‚é€†çŸ©é˜µçš„è¿‡ç¨‹å˜å¾—æ›´åŠ å®¹æ˜“äº†ã€‚</p>
<h2 id="èˆ’å°”è¡¥åº”ç”¨äºå¤šå…ƒé«˜æ–¯åˆ†å¸ƒ"><a href="#èˆ’å°”è¡¥åº”ç”¨äºå¤šå…ƒé«˜æ–¯åˆ†å¸ƒ" class="headerlink" title="èˆ’å°”è¡¥åº”ç”¨äºå¤šå…ƒé«˜æ–¯åˆ†å¸ƒ"></a>èˆ’å°”è¡¥åº”ç”¨äºå¤šå…ƒé«˜æ–¯åˆ†å¸ƒ</h2><p>å‡è®¾å¤šå…ƒå˜é‡ $x$ æœä»é«˜æ–¯åˆ†å¸ƒï¼Œä¸”ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š$x=\begin{bmatrix}a\\b\end{bmatrix}$ï¼Œå˜é‡ä¹‹é—´çš„åæ–¹å·®çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
K=\begin{bmatrix}Cov(a,a)&Cov(a,b)\\Cov(b,a)&Cov(b,b)\end{bmatrix}=\begin{bmatrix}A&C^T\\C&D\end{bmatrix}\tag{35}</script><p>ä¾æ®å…¬å¼ $(6)$ ï¼Œå˜é‡ $x$ çš„æ¦‚ç‡åˆ†å¸ƒä¸ºï¼š</p>
<script type="math/tex; mode=display">
P(a,b)=p(b|a)p(a)âˆ\exp
\left(
-\frac{1}{2}
\begin{bmatrix}a\\b\end{bmatrix}^T
\begin{bmatrix}A&C^T\\C&D\end{bmatrix}^{-1}
\begin{bmatrix}a\\b\end{bmatrix}
\right)\tag{36}</script><p>åˆ©ç”¨èˆ’å°”è¡¥è¿›è¡Œåˆ†è§£æŒ‡æ•°éƒ¨åˆ†ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&âˆ\exp\left(-\frac{1}{2}\begin{bmatrix}a\\b\end{bmatrix}^T\begin{bmatrix}A&C^T\\C&D\end{bmatrix}^{-1}\begin{bmatrix}a\\b\end{bmatrix}\right)\\
&âˆ\exp\left(-\frac{1}{2}\begin{bmatrix}a\\b\end{bmatrix}^T\begin{bmatrix}
I&-A^{-1}C^T\\0&I\end{bmatrix}\begin{bmatrix}A^{-1}&0\\0&\Delta_A^{-1}\end{bmatrix}\begin{bmatrix}I&0\\-CA^{-1}&I\end{bmatrix}\begin{bmatrix}a\\b\end{bmatrix}\right)\\
&âˆ\exp\left(-\frac{1}{2}\begin{bmatrix}a^T&(b-CA^{-1}a)^T\end{bmatrix}\begin{bmatrix}A^{-1}&0\\0&\Delta_A^{-1}\end{bmatrix}\begin{bmatrix}a\\b-CA^{-1}a\end{bmatrix}\right)\\
&âˆ\exp\left(-\frac{1}{2}(a^TA^{-1}a)+(b-CA^{-1}a)^T)\Delta_A^{-1}(b-CA^{-1}a)\right)\\
&âˆ\exp\left(-\frac{1}{2}(a^TA^{-1}a)\right)\exp\left(-\frac{1}{2}(b-CA^{-1}a)^T)\Delta_A^{-1}(b-CA^{-1}a)\right)\\
&âˆp(a)p(b|a)
\end{align*}\tag{37}</script><p>ç±»ä¼¼ä¸å…¬å¼ $(6)$ çš„è´å¶æ–¯å…¬å¼ï¼Œæˆ‘ä»¬å°†è”åˆæ¦‚ç‡åˆ†è§£æˆæ¡ä»¶æ¦‚ç‡å’Œè¾¹ç¼˜æ¦‚ç‡çš„ä¹˜ç§¯ã€‚å¯¹äºé«˜æ–¯åˆ†å¸ƒè€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ $P(a,b)$ ä¸­åˆ†è§£å¾—åˆ°è¾¹é™…æ¦‚ç‡ $p(a)$ å’Œ æ¡ä»¶æ¦‚ç‡ $p(b|a)$ã€‚</p>
<h3 id="P-a-P-b-a-çš„åæ–¹å·®çŸ©é˜µ"><a href="#P-a-P-b-a-çš„åæ–¹å·®çŸ©é˜µ" class="headerlink" title="$P(a), P(b|a)$ çš„åæ–¹å·®çŸ©é˜µ"></a>$P(a), P(b|a)$ çš„åæ–¹å·®çŸ©é˜µ</h3><p>$P(a)$ çš„å¯ç¤º:</p>
<script type="math/tex; mode=display">
P(a)âˆ\exp
\left(
-\frac{1}{2}a^TA^{-1}a
\right)\sim\mathcal{N}(0,A)\tag{38}</script><p><span style="color:red;"><strong>å¯ç¤ºï¼šè¾¹é™…æ¦‚ç‡çš„åæ–¹å·®å°±æ˜¯ä»è”åˆåˆ†å¸ƒä¸­å–å¯¹åº”çš„çŸ©é˜µå—å°±è¡Œäº†ã€‚</strong></span></p>
<p>$P(b|a)$ çš„å¯ç¤º:</p>
<script type="math/tex; mode=display">
P(b|a)âˆ\exp
\left(
-\frac{1}{2}(b-CA^{-1}a)^T\Delta_A^{-1}(b-CA^{-1}a)\tag{39}
\right)</script><p><span style="color:red;"><strong>å¯ç¤ºï¼š$P(b|a)\sim \mathcal{N} (CA^{âˆ’1} a,\Delta_A )$ã€‚æ¡ä»¶æ¦‚ç‡çš„åæ–¹å·®å˜ä¸º $a$ å¯¹åº”çš„èˆ’å°”è¡¥ï¼Œå‡å€¼ä¹Ÿå˜äº†ã€‚</strong></span></p>
<h3 id="P-a-P-b-a-çš„ä¿¡æ¯çŸ©é˜µ"><a href="#P-a-P-b-a-çš„ä¿¡æ¯çŸ©é˜µ" class="headerlink" title="$P(a), P(b|a)$ çš„ä¿¡æ¯çŸ©é˜µ"></a>$P(a), P(b|a)$ çš„ä¿¡æ¯çŸ©é˜µ</h3><p><strong>ä¸ºä»€ä¹ˆè¦è®¨è®º $P (a), P (b|a)$ çš„ä¿¡æ¯çŸ©é˜µï¼Ÿ</strong><br>å› ä¸ºåŸºäºä¼˜åŒ–çš„ SLAM é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ç›´æ¥æ“ä½œçš„æ˜¯<strong>ä¿¡æ¯çŸ©é˜µ</strong>ï¼Œè€Œä¸æ˜¯åæ–¹å·®çŸ©é˜µã€‚æ‰€ä»¥ï¼Œæœ‰å¿…è¦çŸ¥é“è¾¹é™…æ¦‚ç‡ï¼Œæ¡ä»¶æ¦‚ç‡çš„ä¿¡æ¯çŸ©é˜µæ˜¯ä½•å½¢å¼ã€‚</p>
<p>å‡è®¾å·²çŸ¥<strong>è”åˆåˆ†å¸ƒçš„ä¿¡æ¯çŸ©é˜µ</strong>ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
A&B\\C&D
\end{bmatrix}^{-1}=
\begin{bmatrix}
Î›_{aa}&Î›_{ab}\\Î›_{ba}&Î›_{bb}
\end{bmatrix}\tag{40}</script><p>å¦å¤–ï¼Œç”±å…¬å¼ $(34)$ å¯çŸ¥ï¼Œåæ–¹å·®çŸ©é˜µå„å—å’Œä¿¡æ¯çŸ©é˜µä¹‹é—´æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
A&B\\C&D
\end{bmatrix}^{-1}=
\begin{bmatrix}
A^{-1}+A^{-1}C^T\Delta_A^{-1}CA^{-1}
&-A^{-1}C^T\Delta_A^{-1}\\
-\Delta_A^{-1}CA^{-1}&\Delta_A^{-1}
\end{bmatrix}
\triangleq
\begin{bmatrix}
Î›_{aa}&Î›_{ab}\\Î›_{ba}&Î›_{bb}
\end{bmatrix}\tag{41}</script><p>å…¶ä¸­ï¼š$âˆ†_A^{-1} = [D âˆ’ CA^{âˆ’1} B]^{-1}$ã€‚</p>
<p>ç”±æ¡ä»¶æ¦‚ç‡ $P (b|a)$ çš„<strong>åæ–¹å·®çŸ©é˜µ</strong>ä¸º $âˆ†_A$ ä»¥åŠå…¬å¼ $(41)$ï¼Œæ˜“å¾—å…¶<strong>ä¿¡æ¯çŸ©é˜µ</strong>ä¸ºï¼š</p>
<script type="math/tex; mode=display">
âˆ†_A^{-1}=Î›_{bb}\tag{42}</script><p>ç”±è¾¹é™…æ¦‚ç‡ $P (a)$ çš„<strong>åæ–¹å·®çŸ©é˜µ</strong>ä¸º $A$ ä»¥åŠå…¬å¼$(41)$ï¼Œæ˜“å¾—å…¶<strong>ä¿¡æ¯çŸ©é˜µ</strong>ä¸ºï¼š</p>
<script type="math/tex; mode=display">
A^{-1}=Î›_{aa}-Î›_{ab}Î›_{bb}^{-1}Î›_{ba}\tag{43}</script><p>ç”±æ­¤æˆ‘ä»¬å°±çŸ¥é“å¦‚ä½•ä»<strong>è”åˆåˆ†å¸ƒçš„ä¿¡æ¯çŸ©é˜µ</strong>ä¸­æ±‚è§£ $P ( a )$å’Œ $P(b|a)$ çš„<strong>ä¿¡æ¯çŸ©é˜µ</strong>äº†ã€‚</p>
<h2 id="å›é¡¾æ ·ä¾‹"><a href="#å›é¡¾æ ·ä¾‹" class="headerlink" title="å›é¡¾æ ·ä¾‹"></a>å›é¡¾æ ·ä¾‹</h2><p>å›é¡¾ â€œ<strong>å»é™¤æ¡ˆä¾‹1ä¸­å˜é‡</strong>â€ ä¸­å»é™¤å˜é‡ $x_3$ çš„æ“ä½œ</p>
<p><img src="/images/SLAMä¸­çš„æ¦‚ç‡åŸºç¡€/image-20220512213456958.png" alt="image-20220512213456958" style="zoom: 33%;" /></p>
<p>ä»è”åˆåˆ†å¸ƒ $P (x_1 , x_2 , x_3 )$ä¸­ marg æ‰å˜é‡ $x_3$ ï¼Œå³ $P (x_1 , x_2 )$ å¯¹åº”çš„ä¿¡æ¯çŸ©é˜µå¯ä»¥ç”¨å…¬å¼ $(43)$ å¾—åˆ°ã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
\Sigma^{-1}_2&=Î›_{aa}-Î›_{ab}Î›_{bb}^{-1}Î›_{ba}\\
&=Î›_{aa}-\begin{bmatrix}0\\-\frac{w_3}{\sigma^2_3}\end{bmatrix}\sigma^2_3
\begin{bmatrix}0&-\frac{w_3}{\sigma^2_3}\end{bmatrix}\\
&=Î›_{aa}-\begin{bmatrix}0&0\\0&\frac{w_3}{\sigma^2_3}\end{bmatrix}\\
&=\begin{bmatrix}
{\color{red}\frac{1}{\sigma_1^2} }&{\color{red}\frac{w_1}{\sigma_1^2} }\\
{\color{red}\frac{w_1}{\sigma_1^2} }&
{\color{red}\frac{w_1^2}{\sigma_1^2} }+{\color{green}\frac{1}{\sigma_2^2} }\\
\end{bmatrix}
\end{align*}\tag{44}</script><p>è¿™ä¹ˆæ“ä½œï¼Œå°±ä½¿å¾—åœ¨å·²çŸ¥<strong>è”åˆåˆ†å¸ƒçš„ä¿¡æ¯çŸ©é˜µ</strong>çš„å‰æä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡èˆ’å°”è¡¥çš„æ“ä½œï¼Œå³ $(44)$ ä¸­çš„ $Î›_{aa}-Î›_{ab}Î›_{bb}^{-1}Î›_{ba}$ï¼Œ65                   </p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>è¾¹é™…æ¦‚ç‡å¯¹äºåæ–¹å·®çŸ©é˜µçš„æ“ä½œæ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†ä¸å¥½æ“ä½œä¿¡æ¯çŸ©é˜µã€‚ æ¡ä»¶æ¦‚ç‡æ°å¥½ç›¸åï¼Œå¯¹äºä¿¡æ¯çŸ©é˜µå®¹æ˜“æ“ä½œï¼Œä¸å¥½æ“ä½œåæ–¹å·®çŸ©é˜µã€‚</strong> è¡¨æ ¼æ€»ç»“å¦‚ä¸‹:</p>
<script type="math/tex; mode=display">
P(a,b)=\mathcal{N}\left(
\begin{bmatrix}\mu_a\\\mu_b\end{bmatrix},
\begin{bmatrix}\Sigma_{aa}&\Sigma_{ab}\\\Sigma_{ba}&\Sigma_{bb}\end{bmatrix}
\right)=
\mathcal{N}^{-1}
\left(
\begin{bmatrix}\eta_a\\\eta_b\end{bmatrix},
\begin{bmatrix}Î›_{aa}&Î›_{ab}\\Î›_{ba}&Î›_{bb}\end{bmatrix}
\right)
\tag{45}</script><p><img src="/images/SLAMä¸­çš„æ¦‚ç‡åŸºç¡€/image-20220512215118251.png" alt="image-20220512215118251" style="zoom:50%;" /></p>
]]></content>
      <categories>
        <category>æ•°å­¦åŸºç¡€</category>
      </categories>
      <tags>
        <tag>æ¦‚ç‡åŸºç¡€</tag>
        <tag>èˆ’å°”è¡¥</tag>
      </tags>
  </entry>
  <entry>
    <title>å…­ã€VIOè§†è§‰æ®‹å·®çš„æ„å»ºä»¥åŠé›…å¯æ¯”çš„æ±‚å–</title>
    <url>/posts/c041a7d0.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>åœ¨è§†è§‰ SLAM ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æœ€å°åŒ–ç‰¹å¾ç‚¹åœ¨å½’ä¸€åŒ–å¹³é¢ä¸Šçš„ä½ç½®ï¼ˆä¼°è®¡å€¼ï¼‰å’Œå›¾åƒä¸­åŒ¹é…åˆ°çš„è¯¥å›¾åƒçš„ä½ç½®ï¼ˆè§‚æµ‹å€¼ï¼‰çš„å·®å³é‡æŠ•å½±è¯¯å·®æ¥å¯¹ç‰¹å¾ç‚¹å’Œä½å§¿è¿›è¡Œä¼˜åŒ–ã€‚è¿™é‡Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªè§‚æµ‹ä½œä¸ºä¿¡æ¯æ¥æºå³ç›¸æœºè·å–çš„å›¾åƒï¼Œè€Œåœ¨ VIO ä¸­ï¼Œé™¤äº†ç›¸æœºä»¥å¤–æˆ‘ä»¬è¿˜æœ‰ IMU çš„æµ‹é‡æ•°æ®ä½œä¸ºå¦ä¸€ä¿¡æ¯æ¥æºï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬æ€ä¹ˆå¯¹è¿™ä¸ªè§‚æµ‹è¿›è¡Œè¯¯å·®æ„å»ºå‘¢ï¼Ÿå¹¶ä¸”å¯¹äº IMU çš„è¯¯å·®å’Œè§†è§‰çš„è¯¯å·®æ€ä¹ˆåˆ†é…æƒé‡å¹¶ä¸”æ±‚å…¶æœ€å°å€¼å‘¢ï¼Œè¿™æ˜¯è¿™ç¯‡åšå®¢æƒ³è¦è§£å†³çš„é—®é¢˜ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>åœ¨è§†è§‰ SLAM ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æœ€å°åŒ–ç‰¹å¾ç‚¹åœ¨å½’ä¸€åŒ–å¹³é¢ä¸Šçš„ä½ç½®ï¼ˆä¼°è®¡å€¼ï¼‰å’Œå›¾åƒä¸­åŒ¹é…åˆ°çš„è¯¥å›¾åƒçš„ä½ç½®ï¼ˆè§‚æµ‹å€¼ï¼‰çš„å·®å³é‡æŠ•å½±è¯¯å·®æ¥å¯¹ç‰¹å¾ç‚¹å’Œä½å§¿è¿›è¡Œä¼˜åŒ–ã€‚è¿™é‡Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªè§‚æµ‹ä½œä¸ºä¿¡æ¯æ¥æºå³ç›¸æœºè·å–çš„å›¾åƒï¼Œè€Œåœ¨ VIO ä¸­ï¼Œé™¤äº†ç›¸æœºä»¥å¤–æˆ‘ä»¬è¿˜æœ‰ IMU çš„æµ‹é‡æ•°æ®ä½œä¸ºå¦ä¸€ä¿¡æ¯æ¥æºï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬æ€ä¹ˆå¯¹è¿™ä¸ªè§‚æµ‹è¿›è¡Œè¯¯å·®æ„å»ºå‘¢ï¼Ÿå¹¶ä¸”å¯¹äº IMU çš„è¯¯å·®å’Œè§†è§‰çš„è¯¯å·®æ€ä¹ˆåˆ†é…æƒé‡å¹¶ä¸”æ±‚å…¶æœ€å°å€¼å‘¢ï¼Œè¿™æ˜¯è¿™ç¯‡åšå®¢æƒ³è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<h1 id="VIOæ®‹å·®æ„å»º"><a href="#VIOæ®‹å·®æ„å»º" class="headerlink" title="VIOæ®‹å·®æ„å»º"></a>VIOæ®‹å·®æ„å»º</h1><p>VIOé‡æŠ•å½±è¯¯å·®ï¼š</p>
<p>å…·ä½“è¯¦è§£è§ï¼š<a href="https://lukeyalvin.top/posts/ddbf64.html#VIO%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE"><a href="https://lukeyalvin.top/posts/ddbf64.html#VIOé‡æŠ•å½±è¯¯å·®">VIOé‡æŠ•å½±è¯¯å·®</a></a></p>
<p><img src="/images/5-VIOè§†è§‰æ®‹å·®çš„æ„å»ºä»¥åŠé›…å¯æ¯”çš„æ±‚å–/image-20220505205125811-16522560257751.png" alt="image-20220505205125811" style="zoom: 33%;" /></p>
<p>ç‰¹å¾ç‚¹é€†æ·±åº¦åœ¨ç¬¬$i$å¸§ä¸­åˆå§‹åŒ–å¾—åˆ°ï¼Œåœ¨ç¬¬ $j$ å¸§åˆè¢«è§‚æµ‹åˆ°ï¼Œé¢„æµ‹å…¶åœ¨ç¬¬$ j$ ä¸­çš„åæ ‡ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
\begin{bmatrix}X_{cj}\\Y_{cj}\\Z_{cj}\\1\end{bmatrix}=
T^{-1}_{bc}T^{-1}_{wb_j}T_{wb_i}T_{bc}
\begin{bmatrix}\frac{1}{\lambda}u_{ci}\\\frac{1}{\lambda}v_{ci}\\\frac{1}{\lambda}\\1\end{bmatrix}\tag{1}</script><p>è®¾ç‰¹å¾ç‚¹$P$ç»è¿‡ç‰¹å¾åŒ¹é…ï¼Œå¾—åˆ°åœ¨$i,j$ä¸¤å¸§ä¸Šçš„æŠ•å½±è§‚æµ‹å€¼ï¼Œç›®å‰ç‰¹å¾ç‚¹åœ¨$i$å¸§çš„è§‚æµ‹å€¼æ˜¯åˆå§‹åŒ–å€¼ï¼Œæ‰€ä»¥åœ¨$i$å¸§ç›¸æœºåæ ‡ä¸º$\begin{bmatrix}\frac{1}{\lambda}u_{cj}\\\frac{1}{\lambda}v_{cj}\\\frac{1}{\lambda}\\1\end{bmatrix}$ï¼Œç„¶åä½¿ç”¨ä¼°è®¡çš„ä½å§¿å˜æ¢$T^{-1}_{bc}T^{-1}_{wb_j}T_{wb_i}T_{bc}$è¿›è¡Œä¸€ç³»åˆ—åæ ‡å˜æ¢ï¼Œå¾—åˆ°çš„æ˜¯è¯¥ç‰¹å¾ç‚¹åœ¨ç¬¬$j$å¸§ä¼°è®¡çš„ç›¸æœºåæ ‡$\begin{bmatrix}X_{cj}\\Y_{cj}\\Z_{cj}\\1\end{bmatrix}$ï¼ŒæŠŠå®ƒåŒ–ä¸ºå½’ä¸€åŒ–åæ ‡ï¼Œå¾—åˆ°$\begin{bmatrix}\frac{X_{cj} }{Z_{cj} }\\\frac{Y_{cj} }{Z_{cj} }\end{bmatrix}$,æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å¿½ç•¥$K$çš„å‰æä¸‹ï¼Œå½’ä¸€åŒ–åæ ‡å°±æ˜¯åƒç´ åæ ‡ï¼Œç”±äºä¸€ç›´ç¬¬$j$å¸§ä¸‹çš„åƒç´ åæ ‡è§‚æµ‹å€¼ä¸º$\begin{bmatrix}u_{c_j}\\v_{c_j}\end{bmatrix}$,æ‰€ä»¥ï¼Œå°±å¯ä»¥æ„å»ºå¦‚ä¸‹çš„æ®‹å·®é¡¹ï¼š</p>
<script type="math/tex; mode=display">
r_c=\begin{bmatrix}\frac{X_{cj} }{Z_{cj} }-u_{cj}\\\frac{Y_{cj} }{Z_{cj} }-v_{cj}\end{bmatrix}\tag{2}</script><h1 id="VIOæ®‹å·®çš„é›…å¯æ¯”æ¨å¯¼"><a href="#VIOæ®‹å·®çš„é›…å¯æ¯”æ¨å¯¼" class="headerlink" title="VIOæ®‹å·®çš„é›…å¯æ¯”æ¨å¯¼"></a>VIOæ®‹å·®çš„é›…å¯æ¯”æ¨å¯¼</h1><p>æŒ‰ç…§å˜æ¢çŸ©é˜µå’Œæ—‹è½¬çŸ©é˜µä¹‹é—´çš„å…³ç³»ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
T_{bc}^{-1}&=\begin{bmatrix}R^T_{bc}&-R^T_{bc}p_{bc}\\0^T&1\end{bmatrix},\ 
T_{wb_j}^{-1}=\begin{bmatrix}R^T_{wb_j}&-R^T_{wb_j}p_{wb_j}\\0^T&1\end{bmatrix}\\
T_{wb_j}&=\begin{bmatrix}R^T_{wb_j}&p_{wb_j}\\0^T&1\end{bmatrix},
\ \ \ \ \  \ \  \ 
T_{bc}=\begin{bmatrix}R^T_{bc}&p_{bc}\\0^T&1\end{bmatrix}
\end{align*}\tag{3}</script><p>æ ¹æ®å…¬å¼$(3)$å°†å…¬å¼$(1)$ä¸­æ‹†åˆ†æˆä¸‰ç»´åæ ‡å½¢å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
f_{c_j}=\begin{bmatrix}X_{cj}\\Y_{cj}\\Z_{cj}\end{bmatrix}&=
R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}\frac{1}{\lambda}
\begin{bmatrix}u_{c_i}\\v_{c_i}\end{bmatrix}\\
&+R^{T}_{bc}
\left(
R^{T}_{wb_j}\left( (R_{wb_i}p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right)
\end{align*}
\tag{4}</script><p>ä¸ºäº†æ¨å¯¼çš„æ–¹ä¾¿å®šä¹‰å¦‚ä¸‹å…¬å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
f_{c_i}&=\frac{1}{\lambda}
\begin{bmatrix}u_{c_i}\\v_{c_i}\end{bmatrix}\\
f_{b_i}&=R_{bc}f_{c_i}+p_{bc}\\
f_w&=R_{wb_i}f_{b_i}+p_{wb_i}\\
f_{b_j}&=R^T_{wb_j}(f_{w}-p_{bc})\\
\end{align*}\tag{5}</script><p>é›…å¯æ¯”çŸ©é˜µ ä¸ºè§†è§‰è¯¯å·®å¯¹ä¸¤ä¸ªæ—¶åˆ»çš„çŠ¶æ€é‡ï¼Œå¤–å‚ä»¥åŠé€†æ·±åº¦æ±‚å¯¼ï¼š</p>
<script type="math/tex; mode=display">
J=\begin{bmatrix}
\frac{\partial r_c}{\partial\begin{bmatrix}
\delta\mathbf{p}_{b_ib_i^\prime}\\ \delta\theta_{b_ib_i^\prime} \end{bmatrix} }&
\frac{\partial r_c}{\partial\begin{bmatrix}\delta\mathbf{p}_{b_jb_j^\prime}\\ \delta\theta_{b_jb_j^\prime} \end{bmatrix} }&
\frac{\partial r_c}{\partial\begin{bmatrix}\delta\mathbf{p}_{cc^\prime}\\ \delta\theta_{cc^\prime} \end{bmatrix} }&
\frac{\partial r_c}{\partial\delta\lambda } 
\end{bmatrix}\tag{6}</script><p>æ ¹æ®é“¾å¼æ³•åˆ™ï¼Œ Jacobian çš„è®¡ç®—å¯ä»¥åˆ†ä¸¤æ­¥èµ°:</p>
<ul>
<li>ç¬¬ä¸€æ­¥è¯¯å·®å¯¹ $f_{c_j}$ æ±‚å¯¼ï¼š  </li>
</ul>
<script type="math/tex; mode=display">
\frac{\partial r_c}{\partial f_{c_j} }=
\begin{bmatrix}
\frac{1}{Z_{c_j} }&0&\frac{X_{c_j}}{Z_{c_j}^2 }\\
0&\frac{1}{Z_{c_j} }&\frac{Y_{c_j}}{Z_{c_j}^2 }
\end{bmatrix}\tag{7}</script><ul>
<li>ç¬¬äºŒæ­¥å¯¹ $f_{c_j}$ å¯¹å„çŠ¶æ€é‡æ±‚å¯¼ï¼š</li>
</ul>
<ol>
<li><strong>å¯¹ $i$ æ—¶åˆ»çš„çŠ¶æ€é‡æ±‚å¯¼</strong></li>
</ol>
<p>â‘  å¯¹ $i$ æ—¶åˆ»çš„<strong>ä½ç§»</strong>æ±‚å¯¼ï¼Œå¯ä»¥ç›´æ¥å†™å‡ºå¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial f_{c_j} }{\partial\delta\mathbf{p}_{b_ib_i^\prime} }=R^{T}_{bc}R^{T}_{wb_j}\tag{8}</script><p>â‘¡ å¯¹ $i$ æ—¶åˆ»çš„<strong>è§’åº¦</strong>å¢é‡æ±‚å¯¼</p>
<script type="math/tex; mode=display">
\begin{align*}
f_{c_j}=
R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }R_{bc}f_{c_i}+R^{T}_{bc}
\left(
R^{T}_{wb_j}\left( ({\color{red}R_{wb_i} }p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right)
\end{align*}
\tag{9}</script><p>ä¸Šé¢å…¬å¼å’Œ $i$ æ—¶åˆ»è§’åº¦ç›¸å…³çš„é‡å¹¶ä¸å¤šï¼Œä¸‹é¢ä¸ºäº†ç®€åŒ–ï¼Œç›´æ¥ä¸¢å¼ƒäº†ä¸ç›¸å…³çš„éƒ¨åˆ† :</p>
<script type="math/tex; mode=display">
\begin{align*}
f_{c_j}&=
R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }R_{bc}f_{c_i}+R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }p_{bc}+(Â·Â·Â·)\\
&=R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }(R_{bc}f_{c_i}+p_{bc})+(Â·Â·Â·)\\
&=R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }f_{b_i}+(Â·Â·Â·)
\end{align*}
\tag{9}</script><p> é›…å¯æ¯”çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial f_{c_j} }{\partial\delta\theta_{b_ib^\prime_i} }
&=\underset{\delta\theta_{b_{i}b^{\prime}_{i} }\rightarrow0}{lim}
\frac{\partial
R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }(I+[\delta\theta_{b_ib^\prime_i}]^{\land})f_{b_i}-R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }f_{b_i}
}{\partial\delta\theta_{b_ib^\prime_i} }\\
&=\underset{\delta\theta_{b_{i}b^{\prime}_{i} }\rightarrow0}{lim}
\frac{\partial
R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }[\delta\theta_{b_ib^\prime_i}]^{\land}f_{b_i} }{\partial\delta\theta_{b_ib^\prime_i} }\\
&=-\underset{\delta\theta_{b_{i}b^{\prime}_{i} }\rightarrow0}{lim}
\frac{\partial
R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }[f_{b_i}]^{\land} [\delta\theta_{b_ib^\prime_i}]}{\partial\delta\theta_{b_ib^\prime_i} }\\
&=-R^{T}_{bc}R^{T}_{wb_j}{\color{red}R_{wb_i} }[f_{b_i}]^{\land} 
\end{align*}\tag{10}</script><ol>
<li><strong>å¯¹ $j$ æ—¶åˆ»çš„çŠ¶æ€é‡æ±‚å¯¼</strong></li>
</ol>
<p>â‘  å¯¹ $j$ æ—¶åˆ»çš„<strong>ä½ç§»</strong>æ±‚å¯¼ï¼Œå¯ä»¥ç›´æ¥å†™å‡ºå¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial f_{c_j} }{\partial\delta\mathbf{p}_{b_jb_j^\prime} }=-R^{T}_{bc}R^{T}_{wb_j}\tag{11}</script><p>â‘¡ å¯¹ $j$ æ—¶åˆ»çš„<strong>è§’åº¦</strong>å¢é‡æ±‚å¯¼</p>
<script type="math/tex; mode=display">
\begin{align*}
f_{c_j}&=
R^{T}_{bc}{\color{green}R^{T}_{wb_j} }R_{wb_i}R_{bc}f_{c_i}+R^{T}_{bc}
\left(
{\color{green}R^{T}_{wb_j} }\left( (R_{wb_i}p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right)\\
&=R^{T}_{bc}{\color{green}R^{T}_{wb_j} }\left(
R_{wb_i}(R_{bc}f_{c_i}+p_{bc})+p_{wb_j}-p_{wb_j}
\right)+(Â·Â·Â·)\\
&=R^{T}_{bc}{\color{green}R^{T}_{wb_j} }(f_w-p_{wb_j})+(Â·Â·Â·)\\
\end{align*}
\tag{12}</script><p> é›…å¯æ¯”çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial f_{c_j} }{\partial\delta\theta_{b_ib^\prime_i} }
&=\underset{\delta\theta_{b_{j}b^{\prime}_{j} }\rightarrow0}{lim}
\frac{\partial
R^{T}_{bc}(I-[\delta\theta_{b_ib^\prime_j}]^{\land}){\color{green}R^T_{wb_j} }(f_w-p_{wb_j})-R^{T}_{bc}{\color{green}R^T_{wb_j} }(f_w-p_{wb_j})
}{\partial\delta\theta_{b_ib^\prime_i} }\\
&=\underset{\delta\theta_{b_{j}b^{\prime}_{j} }\rightarrow0}{lim}
\frac{\partial
R^{T}_{bc}[\delta\theta_{b_ib^\prime_j}]^{\land}{\color{green}R^T_{wb_j} }(f_w-p_{wb_j})}{\partial\delta\theta_{b_ib^\prime_i} }\\
&=\underset{\delta\theta_{b_{j}b^{\prime}_{j} }\rightarrow0}{lim}
\frac{\partial
R^{T}_{bc}[\delta\theta_{b_ib^\prime_j}]^{\land}f_{b_j} }{\partial\delta\theta_{b_ib^\prime_i} }\\
&-=\underset{\delta\theta_{b_{j}b^{\prime}_{j} }\rightarrow0}{lim}
\frac{\partial
R^{T}_{bc}[f_{b_j}]^{\land}[\delta\theta_{b_ib^\prime_j}] }{\partial\delta\theta_{b_ib^\prime_i} }\\
&=-R^{T}_{bc}[f_{b_j}]^{\land}
\end{align*}\tag{13}</script><ol>
<li><strong>å¯¹ imu å’Œç›¸æœºä¹‹é—´çš„å¤–å‚æ±‚å¯¼</strong>  </li>
</ol>
<p>â‘  å¯¹<strong>ä½ç§»</strong>æ±‚å¯¼</p>
<script type="math/tex; mode=display">
\frac{\partial f_{c_j} }{\partial\delta\mathbf{p}_{cc^\prime} }=R^{T}_{bc}(R^{T}_{wb_j}R_{wb_i}-I_{3\times 3})\tag{14}</script><p>â‘¡ å¯¹<strong>è§’åº¦</strong>å¢é‡æ±‚å¯¼ï¼Œç”±äº $f_{c_j}$ éƒ½å’Œ $R_{bc}$ æœ‰å…³ï¼Œå¹¶ä¸”æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥è¿™æ¬¡åˆ†ä¸¤éƒ¨åˆ†æ±‚å¯¼  </p>
<script type="math/tex; mode=display">
\begin{align*}
f_{c_j}&=
{\color{green}R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}f_{c_i} }
+
{\color{blue}
R^{T}_{bc}\left(
R^{T}_{wb_j}\left( (R_{wb_i}p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right)}\\
&={\color{green}f^1_{c_j} }+{\color{blue}f^2_{c_j} }
\end{align*}
\tag{15}</script><p>ç¬¬ä¸€éƒ¨åˆ† ${\color{green}f^1_{c_j} }$ é›…å¯æ¯”ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial f_{c_j}^1 }{\partial\delta\theta_{cc^\prime} }=
&=\underset{\delta\theta_{cc^{\prime} }\rightarrow0}{lim}
\frac{\partial(I-[\delta\theta_{cc^\prime}]^{\land}) R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}(I+[\delta\theta_{cc^\prime}]^{\land}) f_{c_i}-R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc} }{\partial\delta\theta_{cc^\prime} }\\
&=\underset{\delta\theta_{cc^{\prime} }\rightarrow0}{lim}
\frac{\partial R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}[\delta\theta_{cc^\prime}]^{\land}f_{c_i}-
[\delta\theta_{cc^\prime}]^{\land} R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}f_{c_i}+o^2(\theta_{cc^\prime}) }{\partial\delta\theta_{cc^\prime} }\\
&\approx \underset{\delta\theta_{cc^{\prime} }\rightarrow0}{lim}
\frac{\partial -R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}[f_{c_i}]^{\land}[\delta\theta_{cc^\prime}]+
[R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}f_{c_i}]^{\land}[\delta\theta_{cc^\prime}] ) }{\partial\delta\theta_{cc^\prime} }\\
&=-R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}[f_{c_i}]^{\land}+[R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}f_{c_i}]^{\land}
\end{align*}\tag{16}</script><p>ç¬¬ä¸€éƒ¨åˆ† ${\color{blue}f^2_{c_j} }$ é›…å¯æ¯”ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial f_{c_j}^2 }{\partial\delta\theta_{cc^\prime} }
&=\underset{\delta\theta_{cc^{\prime} }\rightarrow0}{lim}
\frac{\partial(I-[\delta\theta_{cc^\prime}]^{\land} ) R^{T}_{bc}\left(
R^{T}_{wb_j}\left( (R_{wb_i}p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right)-R^{T}_{bc}\left(
R^{T}_{wb_j}\left( (R_{wb_i}p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right) }{\partial\delta\theta_{cc^\prime} }\\
&=\underset{\delta\theta_{cc^{\prime} }\rightarrow0}{lim}
\frac{\partial-[\delta\theta_{cc^\prime}]^{\land} R^{T}_{bc}\left(
R^{T}_{wb_j}\left( (R_{wb_i}p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right) }{\partial\delta\theta_{cc^\prime} }\\
&=\underset{\delta\theta_{cc^{\prime} }\rightarrow0}{lim}
\frac{\partial-[R^{T}_{bc}\left(
R^{T}_{wb_j}\left( (R_{wb_i}p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right)]^{\land}[\delta\theta_{cc^\prime}]  }{\partial\delta\theta_{cc^\prime} }\\
&=[R^{T}_{bc}\left(
R^{T}_{wb_j}\left( (R_{wb_i}p_{bc}+p_{wb_j})-p_{wb_j} \right)-p_{bc}
\right)]^{\land}
\end{align*}\tag{17}</script><p>ä¸¤ä¸ª Jacobian ç›¸åŠ å°±æ˜¯è§†è§‰è¯¯å·®å¯¹å¤–å‚ä¸­çš„è§’åº¦å¢é‡çš„æœ€ç»ˆç»“æœã€‚  </p>
<ol>
<li><strong>è§†è§‰è¯¯å·®å¯¹ç‰¹å¾é€†æ·±åº¦çš„æ±‚å¯¼</strong>  </li>
</ol>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial f_{c_j} }{\partial \delta\lambda}&=
\frac{\partial f_{c_j} }{\partial f_{c_i} }
\frac{\partial f_{c_i} }{\partial \delta\lambda}\\
&=R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}(-\frac{1}{\lambda^2}\begin{bmatrix}
u_{c_i}\\v_{c_i}\\1 \end{bmatrix})\\
&=-\frac{1}{\lambda}R^{T}_{bc}R^{T}_{wb_j}R_{wb_i}R_{bc}f_{c_i}
\end{align*}\tag{18}</script>]]></content>
      <categories>
        <category>ä»é›¶å¼€å§‹æ‰‹å†™VIO</category>
      </categories>
      <tags>
        <tag>VIO</tag>
      </tags>
  </entry>
  <entry>
    <title>äº”ã€é¢„ç§¯åˆ†æ®‹å·®çš„é›…å…‹æ¯”æ±‚å–</title>
    <url>/posts/b68d674.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬èŠ‚ä¸»è¦è®¨è®ºé¢„ç§¯åˆ†å¯¹äºå„ä¸ªçŠ¶æ€é‡çš„é›…å¯æ¯”çŸ©é˜µçš„æ±‚è§£ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="çº¦å®š"><a href="#çº¦å®š" class="headerlink" title="çº¦å®š"></a>çº¦å®š</h1><p>å¯¹äºå³ä¹˜é›…å¯æ¯”ï¼Œæˆ‘ä»¬åšå¦‚ä¸‹çš„å…¬å¼ç®€åŒ–ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial x_a}{\partial \delta\theta}=
\underset{\delta\theta\rightarrow0}{lim}\frac{R_{ab}\exp([\delta\theta]^{\land})x_b-R_{ab}x_b}{\delta\theta}</script><p>åç»­ç®€å†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial x_a}{\partial \delta\theta}=
\frac{R_{ab}\exp([\delta\theta]^{\land})x_b}{\delta\theta}</script><h1 id="é¢„ç§¯åˆ†æ®‹å·®çš„é›…å…‹æ¯”æ±‚å–"><a href="#é¢„ç§¯åˆ†æ®‹å·®çš„é›…å…‹æ¯”æ±‚å–" class="headerlink" title="é¢„ç§¯åˆ†æ®‹å·®çš„é›…å…‹æ¯”æ±‚å–"></a>é¢„ç§¯åˆ†æ®‹å·®çš„é›…å…‹æ¯”æ±‚å–</h1><p>å®šä¹‰ï¼šä¸€æ®µæ—¶é—´å†… IMU æ„å»ºçš„é¢„ç§¯åˆ†é‡ä½œä¸º<strong>æµ‹é‡å€¼</strong>ï¼Œå¯¹ä¸¤æ—¶åˆ»ä¹‹é—´çš„çŠ¶æ€é‡è¿›è¡Œçº¦æŸï¼Œ  </p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbf{e}_{B}(x_i,x_j)=\begin{bmatrix}
r_p\\r_q\\r_v\\r_{ba}\\r_{bg}
\end{bmatrix}_{15\times1}=
\begin{bmatrix}
q_{b_iw}(p_{wb_j}-p_{wb_i}-v^w_i \Delta t+\frac{1}{2}g^w\Delta t^2)-
{\color{blue}\alpha_{b_ib_j} }\\
2[{\color{blue}q_{b_jb_i} }\otimes(q_{b_iw}\otimes q_{wb_j})]_{xyz}\\
q_{b_iw}(v^w_j-v^w_i+g^w\Delta t)-{\color{blue}\beta_{b_ib_j} }\\
b^a_j-b^a_i\\
b^g_j-b^g_i
\end{bmatrix}
\end{align*}\tag{1}</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\alpha_{b_ib_j}&=\iint_{t\in[i,j]}(q_{b_ib_t}a^{b_t})\delta t^2\\
\beta_{b_ib_j}&=\int_{t\in[i,j]}(q_{b_ib_t}a^{b_t})\delta t\\
q_{b_ib_j}&=\int_{t\in[i,j]}q_{b_ib_t}\otimes \begin{bmatrix}0\\ \frac{1}{2}w^{b_t}\end{bmatrix}\delta t
\end{align*}</script><p>ä¸Šé¢è¯¯å·®ä¸­ä½ç§»ï¼Œé€Ÿåº¦ï¼Œåç½®éƒ½æ˜¯ç›´æ¥ç›¸å‡å¾—åˆ°ã€‚ç¬¬äºŒé¡¹æ˜¯å…³äºå››å…ƒæ•°çš„<strong>æ—‹è½¬è¯¯å·®</strong>ï¼Œå…¶ä¸­$[Â·]_{xyz }$è¡¨ç¤ºåªå–å››å…ƒæ•°çš„è™šéƒ¨ $(x, y, z)$ç»„æˆçš„ä¸‰ç»´å‘é‡ã€‚  </p>
<p>åœ¨æ±‚è§£éçº¿æ€§æ–¹ç¨‹æ—¶ï¼Œéœ€è¦çŸ¥é“è¯¯å·® $\mathbf{e}_{B}$ å¯¹ä¸¤ä¸ªå…³é”®å¸§ $i, j$ çš„çŠ¶æ€é‡ $p, q, v, ba, bg$ çš„é›…å¯æ¯”ã€‚å¯¹ $i, j$ æ—¶åˆ»çš„çŠ¶æ€é‡ $p, q, v$ æ±‚å¯¼è¿˜æ˜¯æ¯”è¾ƒç›´è§‚çš„ï¼Œç›´æ¥å¯¹è¯¯å·®å…¬å¼è¿›è¡Œè®¡ç®—å°±è¡Œã€‚ä½†æ˜¯å¯¹ $i$ æ—¶åˆ»çš„ $b^a_i , b^g_i$ æ±‚å¯¼å°±æ˜¾å¾—ååˆ†å¤æ‚ï¼Œä¸‹é¢æˆ‘ä»¬è¯¦ç»†è®¨è®ºã€‚  </p>
<p>å› ä¸º $i$ æ—¶åˆ»çš„ bias ç›¸å…³çš„é¢„ç§¯åˆ†è®¡ç®—æ˜¯é€šè¿‡è¿­ä»£ä¸€æ­¥ä¸€æ­¥ç´¯è®¡é€’æ¨çš„ï¼Œå¯ä»¥ç®—ä½†æ˜¯å¤ªå¤æ‚ã€‚æ‰€ä»¥å¯¹äºé¢„ç§¯åˆ†é‡ç›´æ¥åœ¨ $i$ æ—¶åˆ»çš„ bias é™„è¿‘ç”¨<strong>ä¸€é˜¶æ³°å‹’å±•å¼€</strong>æ¥è¿‘ä¼¼ï¼Œè€Œä¸ç”¨çœŸçš„å»è¿­ä»£è®¡ç®—ã€‚  </p>
<script type="math/tex; mode=display">
\begin{align*}
\alpha_{b_ib_j}&=\alpha_{b_ib_j}+J^{\alpha}_{b^a_i}\delta b^a_i+J^{\alpha}_{b^g_i}\delta b^g_i\\
\beta_{b_ib_j}&=\beta_{b_ib_j}+J^{\beta}_{b^a_i}\delta b^a_i+J^{\beta}_{b^g_i}\delta b^g_i\\
q_{b_ib_j}&=q_{b_ib_j}\otimes\begin{bmatrix}1\\\frac{1}{2}J^{q}_{b^g_i}\delta b^g_i \end{bmatrix}
\end{align*}\tag{2}</script><p>å…¶ä¸­ $J^{\alpha}_{b^a_i}=\frac{\partial \alpha_{b_ib_j} }{\partial\delta b^a_i},J^{\alpha}_{b^g_i}=\frac{\partial \alpha_{b_ib_j} }{\partial\delta b^g_i},J^{\beta}_{b^a_i}=\frac{\partial \beta_{b_ib_j} }{\partial\delta b^a_i},J^{\beta}_{b^g_i}=\frac{\partial \beta_{b_ib_j} }{\partial\delta b^g_i},J^{q}_{b^g_i}=\frac{\partial q_{b_ib_j} }{\partial\delta b^g_i}$ï¼Œè¡¨ç¤ºé¢„ç§¯åˆ†é‡å¯¹ $i$ æ—¶åˆ»çš„ bias æ±‚å¯¼ã€‚</p>
<p>è¿™äº›é›…å…‹æ¯”æ ¹æ®å‰é¢è®¨è®ºçš„<strong>åæ–¹å·®ä¼ é€’å…¬å¼</strong>ï¼Œèƒ½ä¸€æ­¥æ­¥é€’æ¨å¾—åˆ°ï¼š  </p>
<script type="math/tex; mode=display">
J_{k+1}=\mathbf{F}J_k\tag{3}</script><h2 id="r-v-å¯¹å„çŠ¶æ€é‡çš„é›…å¯æ¯”"><a href="#r-v-å¯¹å„çŠ¶æ€é‡çš„é›…å¯æ¯”" class="headerlink" title="$r_v$ å¯¹å„çŠ¶æ€é‡çš„é›…å¯æ¯”"></a>$r_v$ å¯¹å„çŠ¶æ€é‡çš„é›…å¯æ¯”</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥è®¨è®º IMU è¯¯å·®ç›¸å¯¹äºä¸¤å¸§çš„ PVQ çš„ é›…å…‹æ¯”:ç”±äº $r_p$ å’Œ $r_v$ çš„è¯¯å·®å½¢å¼å¾ˆç›¸è¿‘ï¼Œå¯¹å„çŠ¶æ€é‡æ±‚å¯¼çš„ é›…å…‹æ¯”å½¢å¼ä¹Ÿå¾ˆç›¸ä¼¼ï¼Œæ‰€ä»¥è¿™é‡Œåªå¯¹ $r_v$ çš„æ¨å¯¼è¿›è¡Œè¯¦ç»†ä»‹ç»  </p>
<p>â‘  å¯¹ $i$ æ—¶åˆ»<strong>ä½ç§»</strong>çš„é›…å¯æ¯”</p>
<script type="math/tex; mode=display">
\frac{\partial r_v}{\partial\delta p_{b_ib^\prime_i} }=0\tag{4}</script><p>â‘¡ å¯¹ $i$ æ—¶åˆ»<strong>æ—‹è½¬</strong>çš„é›…å¯æ¯”</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial r_v}{\partial\delta \theta_{b_ib^\prime_i} }&=
\frac{\partial (q_{wb_i}\otimes\begin{bmatrix}1\\\frac{1}{2} \delta \theta_{b_ib^\prime_i}\end{bmatrix})^{-1}(v^w_j-v^w_i+g^w\Delta t)}{\partial\delta \theta_{b_ib^\prime_i} }\\ 
&=
\frac{\partial (R_{wb_i}\exp([\delta \theta_{b_ib^\prime_i}]^{\land}))^{-1}(v^w_j-v^w_i+g^w\Delta t)}{\partial\delta \theta_{b_ib^\prime_i} }\\ 
&=
\frac{\partial\exp([-\delta \theta_{b_ib^\prime_i}]^{\land})R_{b_iw}(v^w_j-v^w_i+g^w\Delta t)}{\partial\delta \theta_{b_ib^\prime_i} }\\ 
&=
\frac{\partial(I-[\delta \theta_{b_ib^\prime_i}]^{\land})R_{b_iw}(v^w_j-v^w_i+g^w\Delta t)}{\partial\delta \theta_{b_ib^\prime_i} }\\ 
&=
\frac{\partial -[\delta \theta_{b_ib^\prime_i}]^{\land}[R_{b_iw}(v^w_j-v^w_i+g^w\Delta t)]}{\partial\delta \theta_{b_ib^\prime_i} }\\ 
&=
\frac{\partial -[R_{b_iw}(v^w_j-v^w_i+g^w\Delta t)]^{\land}[\delta \theta_{b_ib^\prime_i}]}{\partial\delta \theta_{b_ib^\prime_i} }\\
&=[R_{b_iw}(v^w_j-v^w_i+g^w\Delta t)]^{\land}
\end{align*}\tag{5}</script><p>â‘¢ å¯¹ $i$ æ—¶åˆ»<strong>é€Ÿåº¦</strong>çš„é›…å¯æ¯”</p>
<script type="math/tex; mode=display">
\frac{\partial r_v}{\partial\delta v_i^w}=-R_{b_iw}\tag{6}</script><p>â‘£ å¯¹ $i$ æ—¶åˆ»<strong>åŠ é€Ÿåº¦ bais</strong>çš„é›…å¯æ¯” ,æ³¨æ„ bias é‡åªå’Œé¢„ç§¯åˆ† $\beta$ æœ‰å…³ï¼š  </p>
<script type="math/tex; mode=display">
\frac{\partial r_v}{\partial\delta b_i^a}
=-\frac{\partial \beta_{b_ib_j} }{\partial\delta b_i^a}
=-J^{\beta}_{b^a_i}\tag{7}</script><h2 id="r-q-å¯¹å„çŠ¶æ€é‡çš„é›…å¯æ¯”"><a href="#r-q-å¯¹å„çŠ¶æ€é‡çš„é›…å¯æ¯”" class="headerlink" title="$r_q$ å¯¹å„çŠ¶æ€é‡çš„é›…å¯æ¯”"></a>$r_q$ å¯¹å„çŠ¶æ€é‡çš„é›…å¯æ¯”</h2><p>â‘  å¯¹ $i$ æ—¶åˆ»<strong>æ—‹è½¬</strong>çš„é›…å¯æ¯”</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial r_q}{\partial \delta\theta_{b_ib^\prime_i} }
&=\frac{\partial2[q_{b_jb_i}\otimes(q_{b_iw}\otimes q_{wb_j})]_{xyz} }{\partial \delta\theta_{b_ib^\prime_i} }\\
&=\frac{\partial2[q^*_{b_ib_j}\otimes(q_{wb_i}\otimes\begin{bmatrix}
1\\\frac{1}{2}\delta\theta_{b_ib^\prime_i}\end{bmatrix})^*
\otimes q_{wb_j}]_{xyz} }{\partial \delta\theta_{b_ib^\prime_i} }\\
&=\frac{\partial-2[(q^*_{b_ib_j}\otimes(q_{wb_i}\otimes\begin{bmatrix}
1\\\frac{1}{2}\delta\theta_{b_ib^\prime_i}\end{bmatrix})^*
\otimes q_{wb_j})^*]_{xyz} }{\partial \delta\theta_{b_ib^\prime_i} }\\
&=\frac{\partial-2[q_{wb_j}^* \otimes (q_{wb_i}\otimes\begin{bmatrix}
1\\\frac{1}{2}\delta\theta_{b_ib^\prime_i}\end{bmatrix})\otimes q_{b_ib_j}
 ]_{xyz}}{\partial \delta\theta_{b_ib^\prime_i} }\\
&=-2[0\ \ I]
\frac{\partial[q_{wb_j}^* \otimes q_{wb_i}]_L[q_{b_ib_j}]_R
\begin{bmatrix}
1\\\frac{1}{2}\delta\theta_{b_ib^\prime_i}
\end{bmatrix} }
{\partial \delta\theta_{b_ib^\prime_i} }\\
&=-2[0\ \ I]
[q_{wb_j}^* \otimes q_{wb_i}]_L[q_{b_ib_j}]_R
\begin{bmatrix}
0\\\frac{1}{2}I
\end{bmatrix}
\end{align*}\tag{8}</script><p>å…¶ä¸­ $[Â·]_L$ å’Œ $[Â·]_R$ ä¸ºå››å…ƒæ•°è½¬ä¸ºå·¦/å³æ—‹è½¬çŸ©é˜µçš„ç®—å­ã€‚  </p>
<p>â‘¡ å¯¹ $j$ æ—¶åˆ»<strong>æ—‹è½¬</strong>çš„é›…å¯æ¯”</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial r_q}{\partial \delta\theta_{b_ib^\prime_i} }
&=\frac{\partial2[q_{b_jb_i}
\otimes(q_{b_iw}
\otimes q_{wb_j})]_{xyz} }
{\partial \delta\theta_{b_jb^\prime_j} }\\
&=\frac{\partial2[q_{b_ib_j}^*
\otimes q_{wb_i}^*
\otimes q_{wb_j}
\otimes 
\begin{bmatrix}
1\\\frac{1}{2}\delta\theta_{b_jb^\prime_j}
\end{bmatrix} 
]_{xyz} }
{\partial \delta\theta_{b_jb^\prime_j} }\\
&=\frac{\partial2[[q_{b_ib_j}^*
\otimes q_{wb_i}^*
\otimes q_{wb_j}]_L
\begin{bmatrix}
1\\\frac{1}{2}\delta\theta_{b_jb^\prime_j}
\end{bmatrix} 
]_{xyz} }
{\partial \delta\theta_{b_jb^\prime_j} }\\
&=2[0\ \ I][q_{b_ib_j}^*
\otimes q_{wb_i}^*
\otimes q_{wb_j}]_L
\begin{bmatrix}
0\\\frac{1}{2}I
\end{bmatrix}
\end{align*}\tag{9}</script><p>â‘¡ å¯¹ $i$ æ—¶åˆ»<strong>é™€èºä»ªåç½® $b^g_i$</strong> çš„é›…å¯æ¯”</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial r_v}{\partial\delta b_i^g}
&=\frac{\partial2[q_{b_jb_i}
\otimes(q_{b_iw}
\otimes q_{wb_j})]_{xyz} }
{\partial\delta b_i^g}\\
&=\frac{\partial2
[(q_{b_ib_j}\otimes
\begin{bmatrix}1\\\frac{1}{2}J^q_{b^g_i\delta b_i^g}\end{bmatrix})^*
\otimes q_{wb_i}^*
\otimes q_{wb_j}]_{xyz} }
{\partial\delta b_i^g}\\
&=\frac{\partial-2
[((q_{b_ib_j}\otimes
\begin{bmatrix}1\\\frac{1}{2}J^q_{b^g_i\delta b_i^g}\end{bmatrix})^*
\otimes q_{wb_i}^*
\otimes q_{wb_j})^*]_{xyz} }
{\partial\delta b_i^g}\\
&=\frac{\partial-2
[q_{wb_j}^*\otimes q_{wb_i}\otimes
(q_{b_ib_j} \otimes 
\begin{bmatrix}1\\\frac{1}{2}J^q_{b^g_i\delta b_i^g}\end{bmatrix}
)]_{xyz} }
{\partial\delta b_i^g}\\
&=-2[0\ \ I][q_{wb_j}^*\otimes q_{wb_i}\otimes q_{b_ib_j}]_L
\begin{bmatrix}0\\\frac{1}{2}J^q_{b^g_i}\end{bmatrix}
\end{align*}\tag{10}</script>]]></content>
      <categories>
        <category>ä»é›¶å¼€å§‹æ‰‹å†™VIO</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>é¢„ç§¯åˆ†ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>å››ã€IMUè¯¯å·®çŠ¶æ€ä¼ é€’æ–¹ç¨‹çš„æ¨å¯¼</title>
    <url>/posts/aaff1b40.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬èŠ‚ä¸»è¦ç ”ç©¶ä¸Šä¸€å¸§çš„è¯¯å·®å¦‚ä½•ä¼ åˆ°ä¸‹ä¸€å¸§çš„ï¼Œä¼ é€’è¯¯å·®çš„æ–¹ç¨‹æ˜¯å¦‚ä½•æ¨å¯¼çš„ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="IMUè¯¯å·®çŠ¶æ€ä¼ é€’æ–¹ç¨‹çš„æ¨å¯¼"><a href="#IMUè¯¯å·®çŠ¶æ€ä¼ é€’æ–¹ç¨‹çš„æ¨å¯¼" class="headerlink" title="IMUè¯¯å·®çŠ¶æ€ä¼ é€’æ–¹ç¨‹çš„æ¨å¯¼"></a>IMUè¯¯å·®çŠ¶æ€ä¼ é€’æ–¹ç¨‹çš„æ¨å¯¼</h1><h2 id="åæ–¹å·®çš„ä¼ æ’­"><a href="#åæ–¹å·®çš„ä¼ æ’­" class="headerlink" title="åæ–¹å·®çš„ä¼ æ’­"></a>åæ–¹å·®çš„ä¼ æ’­</h2><p>ä¾‹å¦‚ï¼Œå·²çŸ¥ä¸€ä¸ªå˜é‡$y=Ax,x\in \mathcal{N}(0,\Sigma_{x})$ï¼Œåˆ™æœ‰$\Sigma_y=A\Sigma_xA^T$</p>
<script type="math/tex; mode=display">
\begin{align*}
\Sigma_y&=E((Ax)(Ax)^T)\\
&=E(Axx^TA^T)\\
&=A\Sigma_xA^T
\end{align*}\tag{1}</script><p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªIMUæ•°æ®ä½œä¸ºæµ‹é‡å€¼çš„å™ªå£°æ–¹å·®æˆ‘ä»¬å¯ä»¥æ ‡å®š ï¼ˆç±»ä¼¼å…¬å¼$(1)$ä¸­çš„å·²çŸ¥é‡$x$ï¼‰ï¼Œé‚£ä¹ˆä¸€æ®µæ—¶é—´çš„å¤šä¸ªIMUæ•°æ®å½¢æˆçš„IMUæ•°æ®ç§¯åˆ†å½¢å¼çš„é¢„ç§¯åˆ†é‡çš„æ–¹å·®ï¼ˆç±»ä¼¼å…¬å¼$(1)$ä¸­çš„å·²çŸ¥é‡$y$ï¼‰ï¼Œå°±å¯ä»¥é€šè¿‡ä»¥ä¸Šå½¢å¼æ±‚è§£ï¼Œå…³é”®æ˜¯æ‰¾å‡ºIMU  å™ªå£°ä¸é¢„ç§¯åˆ†é‡ä¹‹é—´çš„<strong>çº¿æ€§é€’æ¨å…³ç³»</strong>ï¼ˆç±»ä¼¼å…¬å¼$(1)$ä¸­çš„å·²çŸ¥é‡$y=Ax$ï¼‰ã€‚</p>
<p>å‡è®¾å·²çŸ¥äº†<strong>ç›¸é‚»æ—¶åˆ»è¯¯å·®çš„çº¿æ€§ä¼ é€’æ–¹ç¨‹ï¼š</strong></p>
<script type="math/tex; mode=display">
\eta_{ik}=\mathbf{F}_{k-1}\eta_{ik-1}+\mathbf{G}_{k-1}\mathbf{n}_{k-1}\tag{2}</script><p>æ¯”å¦‚ï¼šçŠ¶æ€é‡è¯¯å·®ä¸º $\eta_{ik}=[\delta\theta_{ik},\delta\mathbf{v}_{ik},\delta\mathbf{p}_{ik}]$ï¼Œ$\eta_{ik}$ä¸ºå½“å‰æ—¶åˆ»çš„è¯¯å·®ï¼Œ$\eta_{ik-1}$ä¸ºä¸Šä¸€æ—¶åˆ»çš„è¯¯å·®ï¼›<strong>æµ‹é‡å™ªå£°</strong>ä¸º $\mathbf{n}_{k}=[\mathbf{n}_{k}^a,\mathbf{n}_{k}^g]$ï¼Œå› æ­¤ï¼Œè¯¯å·®çš„ä¼ é€’ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå³<strong>å½“å‰æ—¶åˆ»çš„è¯¯å·®ä¼ é€’ç»™ä¸‹ä¸€æ—¶åˆ»ï¼Œå½“å‰æ—¶åˆ»çš„æµ‹é‡å™ªå£°ä¼ é€’ç»™ä¸‹ä¸€æ—¶åˆ»</strong>ã€‚</p>
<p>å¦‚æœå·²çŸ¥ä¸Šé¢çš„è¯¯å·®çŠ¶æ€ä¼ é€’æ–¹ç¨‹ï¼Œé‚£ä¹ˆä¸€æ®µæ—¶é—´å†…IMUç§¯åˆ†çš„åæ–¹å·®çŸ©é˜µå°±å¯ä»¥è½»æ¾é€’æ¨ç®—å‡ºï¼š</p>
<script type="math/tex; mode=display">
\Sigma_{ik}=\mathbf{F}_{k-1}\Sigma_{ik-1}\mathbf{F}_{k-1}^T+\mathbf{G}_{k-1}\Sigma_\mathbf{n}\mathbf{G}_{k-1}^T\tag{3}</script><p>å…¶ä¸­ï¼Œ$\Sigma_n$æ˜¯<strong>æµ‹é‡å™ªå£°çš„åæ–¹å·®çŸ©é˜µ</strong>ï¼Œæ–¹å·®ä» $i$ æ—¶åˆ»å¼€å§‹è¿›è¡Œé€’æ¨ï¼Œ$\Sigma_{ii}=0$</p>
<h2 id="çŠ¶æ€è¯¯å·®çº¿æ€§é€’æ¨æ–¹ç¨‹çš„æ¨å¯¼"><a href="#çŠ¶æ€è¯¯å·®çº¿æ€§é€’æ¨æ–¹ç¨‹çš„æ¨å¯¼" class="headerlink" title="çŠ¶æ€è¯¯å·®çº¿æ€§é€’æ¨æ–¹ç¨‹çš„æ¨å¯¼"></a>çŠ¶æ€è¯¯å·®çº¿æ€§é€’æ¨æ–¹ç¨‹çš„æ¨å¯¼</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹äºçŠ¶æ€é‡ä¹‹é—´çš„é€’æ¨å…³ç³»æ˜¯éçº¿æ€§çš„æ–¹ç¨‹ï¼Œå¦‚ $x_k=f(x_{k-1},\mathbf{u}_{k-1})$ï¼Œå…¶ä¸­çŠ¶æ€é‡ $x,\mathbf{u}$ ä¸ºç³»ç»Ÿçš„è¾“å…¥é‡ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•æ¥æ¨å¯¼è¯¯å·®ä¼ é€’çš„çº¿æ€§é€’æ¨å…³ç³»ï¼š</p>
<ul>
<li>ä¸€ç§æ˜¯<strong>åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€</strong>çš„è¯¯å·®ä¼ é€’æ–¹ç¨‹ï¼Œä¸»è¦åº”ç”¨äº EKF çš„åæ–¹å·®é¢„æµ‹ã€‚</li>
<li>ä¸€ç§æ˜¯<strong>åŸºäºè¯¯å·®éšæ—¶é—´å˜åŒ–</strong>çš„é€’æ¨æ–¹ç¨‹ã€‚</li>
</ul>
<h3 id="åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€"><a href="#åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€" class="headerlink" title="åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€"></a>åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€</h3><p>ä»¤çŠ¶æ€é‡ä¸º $x=\hat{x}+\delta x$ï¼Œå…¶ä¸­ï¼ŒçœŸå€¼ä¸º$\hat{x}$ï¼Œè¯¯å·®ä¸º $\delta x$ï¼Œå¦å¤–è¾“å…¥é‡ $\mathbf{u}$ çš„å™ªå£°ä¸º $\mathbf{n}$ã€‚</p>
<p>å¯¹äºéçº¿æ€§ç³»ç»Ÿ  $x_k=f(x_{k-1},\mathbf{u}_{k-1})$ è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
x_k&=f(x_{k-1},\mathbf{u}_{k-1})\\
\hat{x}_k+\delta x_k&=f(\hat{x}_{k-1}+\delta x_{k-1},\hat{\mathbf{u} }_{k-1}+\mathbf{n}_{k-1})\\
{\color{blue}\hat{x}_k}+\delta x_k&=
{\color{blue}f(\hat{x}_{k-1},\hat{\mathbf{u} }_{k-1})}+\mathbf{F}\delta x_{k-1}+\mathbf{G}\mathbf{n}_{k-1}
\end{align*}\tag{4}</script><p>å¯ä»¥çœ‹å‡ºè“è‰²å­—ä½“éƒ¨åˆ†è¡¨ç¤ºçœŸå€¼ï¼Œä»–ä»¬ç›¸äº’æŠµæ¶ˆæ‰äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯è¯¯å·®çš„çº¿æ€§é€’æ¨å…³ç³»ï¼š</p>
<script type="math/tex; mode=display">
\delta x_k = \mathbf{F}\delta x_{k-1}+\mathbf{G}\mathbf{n}_{k-1}\tag{5}</script><p>å…¶ä¸­ï¼Œ$\mathbf{F}$ æ˜¯çŠ¶æ€é‡ $x_k$ å¯¹çŠ¶æ€é‡ $x_{k-1}$ çš„é›…å¯æ¯”çŸ©é˜µï¼Œ $\mathbf{G}$ æ˜¯çŠ¶æ€é‡ $x_k$ å¯¹è¾“å…¥é‡ $\mathbf{u}_{k-1}$ çš„é›…å¯æ¯”çŸ©é˜µã€‚</p>
<h3 id="åŸºäºè¯¯å·®éšæ—¶é—´å˜åŒ–"><a href="#åŸºäºè¯¯å·®éšæ—¶é—´å˜åŒ–" class="headerlink" title="åŸºäºè¯¯å·®éšæ—¶é—´å˜åŒ–"></a>åŸºäºè¯¯å·®éšæ—¶é—´å˜åŒ–</h3><p>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ¨å¯¼çŠ¶æ€è¯¯å·®éšç€æ—¶é—´å˜æ¢çš„å€’æ•°å…³ç³»ï¼Œæ¯”å¦‚ï¼š</p>
<script type="math/tex; mode=display">
\dot{\delta x}=\mathbf{A}\delta x+\mathbf{B}\mathbf{n}\tag{6}</script><p>åˆ™è¯¯å·®çŠ¶æ€çš„é€’æ¨æ–¹ç¨‹ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&\delta x_k = \delta x_{k-1} + \dot{\delta x_{k-1} }\Delta t\\
\rightarrow&\delta x_k=(\mathbf{I}+\mathbf{A}\Delta t)\delta x_{k-1}+\mathbf{B}\Delta t \mathbf{n}_{k-1} 
\end{align*}\tag{7}</script><p>ç»¼åˆä¸¤ç§æ–¹æ³•å¯ä»¥å‘ç°ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{F}=\mathbf{I}+\mathbf{A}\Delta t,\ \ \ \ \mathbf{G}=\mathbf{B}\Delta t\tag{8}</script><p>ç”±äºåœ¨ VIO ç³»ç»Ÿä¸­æˆ‘ä»¬å·²ç»çŸ¥é“äº†çŠ¶æ€çš„å¯¼æ•°ä¸çŠ¶æ€ä¹‹é—´çš„æ—‹è½¬çŸ©é˜µï¼Œå¦‚å…¬å¼ $(26)$:</p>
<script type="math/tex; mode=display">
\dot{\mathbf{v} }=Ra^b+g\tag{9}</script><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ¨å¯¼<strong>é€Ÿåº¦è¯¯å·®</strong>å’Œ<strong>çŠ¶æ€è¯¯å·®</strong>ä¹‹é—´çš„å…³ç³»ï¼Œå†æ¯ä¸€é¡¹ä¸Šéƒ½åŠ ä¸Šå„è‡ªçš„è¯¯å·®ï¼Œæ—¢æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot{\mathbf{v} }+\dot{\delta\mathbf{v} }&=R(\mathbf{I}+[\delta\theta]^{\land})(a^b+\delta a^b)+g+\delta g\\
\dot{\delta\mathbf{v} }&=R\delta a^b+R[\delta\theta]^{\land}(a^b+\delta a^b)+\delta g\\
\dot{\delta\mathbf{v} }&=R\delta a^b-R[a^b]^{\land}\delta\theta+\delta g
\end{align*}\tag{10}</script><p>ç”±æ­¤å°±å¯ä»¥ä»¥æ­¤ç±»æ¨ï¼Œå¾ˆè½»æ˜“çš„å†™å‡ºæ•´ä¸ª $\mathbf{A}$ å’Œ $\mathbf{B}$ ï¼Œè¿™ä¹Ÿæ˜¯æ­¤æ–¹æ³•çš„ä¼˜ç‚¹ã€‚ </p>
<h1 id="åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€çš„æ¨å¯¼"><a href="#åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€çš„æ¨å¯¼" class="headerlink" title="åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€çš„æ¨å¯¼"></a>åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€çš„æ¨å¯¼</h1><p>ç”±ä¸Šä¸€èŠ‚çš„å…¬å¼$(17)$ï¼šIMU é¢„ç§¯åˆ†è¯¯å·®çš„ç¦»æ•£å½¢å¼ ï¼Œæ­¤æ—¶å°†å™ªå£°æ¨¡å‹ä¹Ÿè€ƒè™‘è¿›å»ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
a&=\frac{1}{2}[q_{b_ib_k}(a^{b_k}{\color{red}+\mathbf{n}^a_{k} }-b^a_k)+q_{b_ib_{k+1} }(a^{b_{k+1} }{\color{red}+\mathbf{n}^a_{k+1} }-b^a_k)]\\
w&=\frac{1}{2}[(w^{b_k}{\color{red}+\mathbf{n}^g_{k} }-b^g_k)+(w^{b_{k+1} }{\color{red}+\mathbf{n}^g_{k+1} }-b^g_k)]\\
{\color{blue}q_{b_ib_{k+1} } }&=q_{b_ib_k}\otimes\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}\\
{\color{blue}\alpha_{b_ib_{k+1} } }&=\alpha_{b_ib_k}+\beta_{b_ib_k}\delta t +\frac{1}{2}a\delta t^2\\
{\color{blue}\beta_{b_ib_{k+1} } }&=\beta_{b_ib_k}+a\delta t\\
b^a_{k+1}&=b^a_k+n_{b^a_k}\delta t\\
b^g_{k+1}&=b^g_k+n_{b^g_k}\delta t
\end{align*}\tag{11}</script><p>ç”¨å‰é¢ä¸€é˜¶æ³°å‹’å±•å¼€çš„æ¨å¯¼æ–¹å¼ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½æ¨å¯¼å‡ºå¦‚ä¸‹çš„å½¢å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
\delta\alpha_{b_{k+1}b^{\prime}_{k+1} }\\
\delta\theta_{b_{k+1}b^{\prime}_{k+1} }\\
\delta\beta_{b_{k+1}b^{\prime}_{k+1} }\\
\delta\mathbf{b}^a_{k+1}\\
\delta\mathbf{b}^g_{k+1}\\
\end{bmatrix}=\mathbf{F}
\begin{bmatrix}
\delta\alpha_{b_{k}b^{\prime}_{k} }\\
\delta\theta_{b_{k}b^{\prime}_{k} }\\
\delta\beta_{b_{k}b^{\prime}_{k} }\\
\delta\mathbf{b}^a_{k}\\
\delta\mathbf{b}^g_{k}\\
\end{bmatrix}+\mathbf{G}
\begin{bmatrix}
\mathbf{n}^a_{k}\\
\mathbf{n}^g_{k}\\
\mathbf{n}^a_{k+1}\\
\mathbf{n}^g_{k+1}\\
\mathbf{n}_{\mathbf{b}^a_k}\\
\mathbf{n}_{\mathbf{b}^g_k}\\
\end{bmatrix}\tag{12}</script><p>$\mathbf{F},\mathbf{G}$ä¸ºä¸¤ä¸ªæ—¶åˆ»é—´çš„åæ–¹å·®ä¼ é€’çŸ©é˜µã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥ç»™å‡º $\mathbf{F},\mathbf{G}$ çš„æœ€ç»ˆå½¢å¼ï¼Œåé¢ä¼šå¯¹éƒ¨åˆ†é¡¹è¿›è¡Œè¯¦ç»†æ¨å¯¼ï¼š  </p>
<script type="math/tex; mode=display">
\mathbf{F}=
\begin{bmatrix}
\mathbf{I}&f_{12}&\mathbf{I}\delta t&-\frac{1}{4}(q_{b_ib_{k} }+q_{b_ib_{k+1} })\delta t^2&f_{15}\\
0&\mathbf{I}-[\omega]^{\land}&0&0&-\mathbf{I}\delta t\\
0&f_{32}&\mathbf{I}&-\frac{1}{2}(q_{b_ib_{k} }+q_{b_ib_{k+1} })\delta t&f_{35}\\
0&0&0&\mathbf{I}&0\\
0&0&0&0&\mathbf{I}
\end{bmatrix}\tag{13}</script><script type="math/tex; mode=display">
\mathbf{G}=
\begin{bmatrix}
\frac{1}{4}q_{b_ib_k}\delta t^2&g_{12}&\frac{1}{4}q_{b_ib_{k+1} }\delta t^2&g_{14}&0&0\\
0&\frac{1}{2}\mathbf{I}\delta t&0&\frac{1}{2}\mathbf{I}\delta t&0&0\\
\frac{1}{2}q_{b_ib_k}\delta t&g_{32}&\frac{1}{2}q_{b_ib_{k+1} }\delta t&g_{34}&0&0\\
0&0&0&0&\mathbf{I}\delta t&0\\
0&0&0&0&0&\mathbf{I}\delta t
\end{bmatrix}\tag{14}</script><p>å…¶ä¸­çš„ç³»æ•°å¦‚ä¸‹ï¼š</p>
<p><img src="/images/3-2-IMUè¯¯å·®çŠ¶æ€ä¼ é€’çš„æ¨å¯¼/image-20220509150144881-16521033725157.png" alt="image-20220509150144881"></p>
<h2 id="é›…å…‹æ¯”çŸ©é˜µ-mathbf-F-çš„æ¨å¯¼"><a href="#é›…å…‹æ¯”çŸ©é˜µ-mathbf-F-çš„æ¨å¯¼" class="headerlink" title="é›…å…‹æ¯”çŸ©é˜µ $\mathbf{F}$ çš„æ¨å¯¼"></a>é›…å…‹æ¯”çŸ©é˜µ $\mathbf{F}$ çš„æ¨å¯¼</h2><h3 id="é€Ÿåº¦é¢„ç§¯åˆ†é‡çš„é›…å¯æ¯”"><a href="#é€Ÿåº¦é¢„ç§¯åˆ†é‡çš„é›…å¯æ¯”" class="headerlink" title="é€Ÿåº¦é¢„ç§¯åˆ†é‡çš„é›…å¯æ¯”"></a>é€Ÿåº¦é¢„ç§¯åˆ†é‡çš„é›…å¯æ¯”</h3><p>$\beta$ å¯¹äºå„ä¸ªçŠ¶æ€é‡çš„é›…å¯æ¯”çŸ©é˜µæ¨å¯¼ï¼Œå³ $\mathbf{F}$ çŸ©é˜µç¬¬ä¸‰è¡Œã€‚é€Ÿåº¦é¢„ç§¯åˆ†é‡ $\beta$ çš„é€’æ¨è®¡ç®—å½¢å¼:  </p>
<script type="math/tex; mode=display">
\begin{align*}
\beta_{b_ib_{k+1} }&=\beta_{b_ib_k}+a\delta t\\
&=\beta_{b_ib_k}+\frac{1}{2}[q_{b_ib_k}(a^{b_k}-b^a_k)+q_{b_ib_{k+1} }(a^{b_{k+1} }-b^a_k)]\delta t
\end{align*}\tag{15}</script><p>$f_{33}$: å¯¹ä¸Šä¸€æ—¶åˆ»<strong>é€Ÿåº¦é¢„ç§¯åˆ†é‡</strong>çš„ é›…å¯æ¯”ï¼š</p>
<script type="math/tex; mode=display">
f_{33}=\frac{\partial \beta_{b_ib_{k+1} } }{\partial\delta\beta_{b_{k}b^{\prime}_{k} } }
=\mathbf{I}_{3\times 3}
\tag{16}</script><p>$f_{32}$: å¯¹ä¸Šä¸€æ—¶åˆ»<strong>è§’åº¦é¢„ç§¯åˆ†é‡</strong>çš„ é›…å¯æ¯”ï¼š</p>
<p>é¦–å…ˆå°†å…¬å¼ $(32)$å†™æˆå¦‚ä¸‹å½¢å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\beta_{b_ib_{k+1} }&=\beta_{b_ib_k}+a\delta t\\
&=\beta_{b_ib_k}+\frac{1}{2}[q_{b_ib_k}(a^{b_k}-b^a_k)+
q_{b_ib_{k} }\otimes\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}
(a^{b_{k+1} }-b^a_k)]\delta t
\end{align*}\tag{17}</script><p>é‚£ä¹ˆï¼Œ<strong>é€Ÿåº¦çš„é¢„ç§¯åˆ†é‡å¯¹è§’åº¦é¢„ç§¯åˆ†é‡</strong>çš„ é›…å¯æ¯”ï¼š  </p>
<script type="math/tex; mode=display">
f_{32}=\frac{\partial \beta_{b_ib_{k+1} } }{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }
=\frac{\partial a\delta t}{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }
\tag{18}</script><p>å…¶ä¸­åˆ†å­å¯ä»¥å†™æˆï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
a\delta t &=\frac{1}{2}q_{b_ib_{k} }\otimes\begin{bmatrix}
1\\\frac{1}{2}\delta\theta_{b_kb^{\prime}_{k} }\end{bmatrix}(a^{b_k}-b^a_k)\delta t\\
&+\frac{1}{2}q_{b_ib_{k} }\otimes\begin{bmatrix}
1\\\frac{1}{2}\delta\theta_{b_kb^{\prime}_{k} }\end{bmatrix}\otimes\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}
(a^{b_{k+1} }-b^a_k)\delta t\\
&=\frac{1}{2}R_{b_ib_{k} }\exp([\delta\theta_{b_kb^{\prime}_{k} }]^{\land})(a^{b_{k} }-b^a_k)\delta t\\
&+\frac{1}{2}R_{b_ib_{k} }\exp([\delta\theta_{b_kb^{\prime}_{k} }]^{\land})\exp([\omega\delta t]^{\land})(a^{b_{k+1} }-b^a_k)\delta t
\end{align*}\tag{19}</script><p>åˆ†åˆ«å¯¹åˆ†å­çš„ä¸¤é¡¹è¿›è¡Œæ±‚å¯¼ï¼š</p>
<p>â‘ ç¬¬ä¸€é¡¹</p>
<script type="math/tex; mode=display">
\begin{align*}
&\frac{\partial R_{b_ib_{k} }\exp([\delta\theta_{b_kb^{\prime}_{k} }]^{\land})(a^{b_{k} }-b^a_k)\delta t}{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=\underset{\delta\theta_{b_{k}b^{\prime}_{k} }\rightarrow0}{lim}
\frac{\partial R_{b_ib_{k} }(I + [\delta\theta_{b_kb^{\prime}_{k} }]^{\land})(a^{b_{k} }-b^a_k)\delta t-R_{b_ib_{k} }(a^{b_{k} }-b^a_k)\delta t
}{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=\underset{\delta\theta_{b_{k}b^{\prime}_{k} }\rightarrow0}{lim}
\frac{\partial R_{b_ib_{k} }[\delta\theta_{b_kb^{\prime}_{k} }]^{\land}[(a^{b_{k} }-b^a_k)\delta t]}{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=-\underset{\delta\theta_{b_{k}b^{\prime}_{k} }\rightarrow0}{lim}
\frac{\partial R_{b_ib_{k} }[(a^{b_{k} }-b^a_k)\delta t]^{\land}[\delta\theta_{b_kb^{\prime}_{k} }]}
{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=-R_{b_ib_{k} }[(a^{b_{k} }-b^a_k)\delta t]^{\land}
\end{align*}\tag{20}</script><p>â‘¡ç¬¬äºŒé¡¹</p>
<script type="math/tex; mode=display">
\begin{align*}
&\frac{\partial R_{b_ib_{k} }\exp([\delta\theta_{b_kb^{\prime}_{k} }]^{\land})\exp([\omega\delta t]^{\land})(a^{b_{k+1} }-b^a_k)\delta t}
{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=\underset{\delta\theta_{b_{k}b^{\prime}_{k} }\rightarrow0}{lim}
\frac{\partial R_{b_ib_{k} }(I+[\delta\theta_{b_kb^{\prime}_{k} }]^{\land})\exp([\omega\delta t]^{\land})(a^{b_{k+1} }-b^a_k)\delta t
-R_{b_ib_{k} }\exp([\omega\delta t]^{\land})(a^{b_{k+1} }-b^a_k)\delta t}
{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=\underset{\delta\theta_{b_{k}b^{\prime}_{k} }\rightarrow0}{lim}
\frac{\partial R_{b_ib_{k} }[\delta\theta_{b_kb^{\prime}_{k} }]^{\land}[\exp([\omega\delta t]^{\land})(a^{b_{k+1} }-b^a_k)\delta t]}
{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=-\underset{\delta\theta_{b_{k}b^{\prime}_{k} }\rightarrow0}{lim}
\frac{\partial R_{b_ib_{k} }\left[\exp([\omega\delta t]^{\land})(a^{b_{k+1} }-b^a_k)\delta t]^{\land}\ [\delta\theta_{b_kb^{\prime}_{k} }\right]}
{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=-\underset{\delta\theta_{b_{k}b^{\prime}_{k} }\rightarrow0}{lim}
\frac{\partial R_{b_ib_{k} }\exp([\omega\delta t]^{\land})\left[(a^{b_{k+1} }-b^a_k)\delta t]^{\land}\exp([-\omega\delta t]^{\land})[\delta\theta_{b_kb^{\prime}_{k} }\right]}
{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=-R_{b_ib_{k} }\exp([\omega\delta t]^{\land})[(a^{b_{k+1} }-b^a_k)\delta t]^{\land}\exp([-\omega\delta t]^{\land})\\
&=-R_{b_ib_{k+1} }[(a^{b_{k+1} }-b^a_k)\delta t]^{\land}\exp([-\omega\delta t]^{\land})\\
&\approx-R_{b_ib_{k+1} }[(a^{b_{k+1} }-b^a_k)\delta t]^{\land}(I-[\omega\delta t]^{\land})
\end{align*}
\tag{21}</script><p>å°†ä¸Šé¢ä¸¤éƒ¨åˆ†ç»¼åˆèµ·æ¥å°±èƒ½å¾—åˆ°  :</p>
<script type="math/tex; mode=display">
\begin{align*}
f_{32}&=\frac{\partial \beta_{b_ib_{k+1} } }{\partial\delta\theta_{b_{k}b^{\prime}_{k} } }\\
&=-\frac{1}{2}\left([a^{b_{k} }-b^a_k]^{\land}\delta t+
R_{b_ib_{k+1} }[a^{b_{k+1} }-b^a_k]^{\land}(I-[\omega]^{\land}\delta t)
\delta t \right)
\end{align*}
\tag{22}</script><p>$f_{35}$: <strong>é€Ÿåº¦é¢„ç§¯åˆ†é‡</strong>å¯¹ $k$ æ—¶åˆ»<strong>è§’é€Ÿåº¦ bias</strong> çš„ é›…å¯æ¯”ï¼š</p>
<p>é€’æ¨å…¬å¼å¦‚ä¸‹:</p>
<script type="math/tex; mode=display">
\begin{align*}
\beta_{b_ib_{k+1} }&=\beta_{b_ib_k}+a\delta t\\
&=\beta_{b_ib_k}+\frac{1}{2}[q_{b_ib_k}(a^{b_k}-b^a_k)+q_{b_ib_{k+1} }(a^{b_{k+1} }-b^a_k)]\delta t\\
&=\beta_{b_ib_k}+\frac{1}{2}[q_{b_ib_k}(a^{b_k}-b^a_k)+q_{b_ib_{k} }\otimes 
\begin{bmatrix}
1\\{\color{red}\frac{1}{2}w\delta t}
\end{bmatrix}
(a^{b_{k+1} }-b^a_k)]\delta t
\end{align*}\tag{23}</script><p>åªæœ‰çº¢è‰²å…¬å¼éƒ¨åˆ†å’Œè§’é€Ÿåº¦ bias æœ‰å…³ç³»ï¼Œå› æ­¤é›…å…‹æ¯”çš„æ¨å¯¼åªè€ƒè™‘çº¢è‰²å…¬å¼éƒ¨åˆ†ã€‚  </p>
<script type="math/tex; mode=display">
\begin{align}
f_{35}&=\frac{\partial \beta_{b_ib_{k+1} } }{\partial\delta\mathbf{b}^g_k}\\
&=\underset{\delta\mathbf{b}^g_k \rightarrow0}{lim}
\frac{\partial \frac{1}{2}q_{b_ib_{k} }\otimes 
\begin{bmatrix}1\\\frac{1}{2}w\delta t\end{bmatrix}\otimes 
\begin{bmatrix}1\\-\frac{1}{2}\mathbf{b}^g_k\delta t\end{bmatrix}
(a^{b_{k+1} }-b^a_k)\delta t-
\partial \frac{1}{2}q_{b_ib_{k} }\otimes 
\begin{bmatrix}1\\\frac{1}{2}w\delta t\end{bmatrix}\otimes 
(a^{b_{k+1} }-b^a_k)\delta t
}{\partial\delta\mathbf{b}^g_k}\\
&=\underset{\delta\mathbf{b}^g_k \rightarrow0}{lim}
\frac{1}{2}\frac{
\partial R_{b_ib_{k+1} }\exp([-\delta\mathbf{b}^g_k\delta t]^{\land})
(a^{b_{k+1} }-b^a_k)\delta t-
R_{b_ib_{k+1} }(a^{b_{k+1} }-b^a_k)\delta t
}
{\partial\delta\mathbf{b}^g_k}\\
&=\underset{\delta\mathbf{b}^g_k \rightarrow0}{lim}
\frac{1}{2}\frac{
\partial R_{b_ib_{k+1} }(I+[-\delta\mathbf{b}^g_k\delta t]^{\land})
(a^{b_{k+1} }-b^a_k)\delta t-
R_{b_ib_{k+1} }(a^{b_{k+1} }-b^a_k)\delta t
}
{\partial\delta\mathbf{b}^g_k}\\
&=\underset{\delta\mathbf{b}^g_k \rightarrow0}{lim}
\frac{1}{2}\frac{
\partial R_{b_ib_{k+1} }[-\delta\mathbf{b}^g_k\delta t]^{\land}
[(a^{b_{k+1} }-b^a_k)\delta t]}
{\partial\delta\mathbf{b}^g_k}\\
&=-\underset{\delta\mathbf{b}^g_k \rightarrow0}{lim}
\frac{1}{2}\frac{
\partial R_{b_ib_{k+1} }[(a^{b_{k+1} }-b^a_k)\delta t]^{\land}
[-\delta\mathbf{b}^g_k\delta t]}
{\partial\delta\mathbf{b}^g_k}\\
&=-\frac{1}{2}(R_{b_ib_{k+1} }[(a^{b_{k+1} }-b^a_k)]^{\land}\delta t)(-\delta t)
\end{align}\tag{24}</script><h3 id="æ—‹è½¬é¢„ç§¯åˆ†é‡çš„é›…å¯æ¯”"><a href="#æ—‹è½¬é¢„ç§¯åˆ†é‡çš„é›…å¯æ¯”" class="headerlink" title="æ—‹è½¬é¢„ç§¯åˆ†é‡çš„é›…å¯æ¯”"></a>æ—‹è½¬é¢„ç§¯åˆ†é‡çš„é›…å¯æ¯”</h3><p>æ—‹è½¬é¢„ç§¯åˆ†çš„é€’æ¨å…¬å¼ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
q_{b_ib_{k+1} }&=q_{b_ib_{k} }\otimes\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}\\
&=q_{b_ib_{k} }\otimes\begin{bmatrix}1\\
\frac{1}{2}(\frac{1}{2}(\omega^{b_k}+\omega^{b_{k+1} })-\mathbf{b}^g_k)\delta t
\end{bmatrix}
\end{align*}\tag{25}</script><p>$f_{22}$: å‰ä¸€æ—¶åˆ»çš„æ—‹è½¬è¯¯å·® $\delta\theta_{b_{k}b^{\prime}_{k} }$ å¦‚ä½•å½±å“å½“å‰çš„æ—‹è½¬è¯¯å·®  $\delta\theta_{b_{k+1}b^{\prime}_{k+1} }$ ï¼Ÿ</p>
<p>å‡è®¾ä¸¤ä¸ªæ—¶åˆ»çš„çœŸå€¼ä¸º $q_{b_ib_{k+1} },\ q_{b_ib_{k} }$ï¼Œä¸¤ä¸ªæ—¶é—´çš„å¢é‡çœŸå€¼ä¸º $q_{b_kb_{k+1} }$ã€‚æ¨å¯¼è¿‡ç¨‹åªè€ƒè™‘ä¸€ä¸ªå˜é‡ï¼Œå³æ—‹è½¬è¯¯å·® $\delta\theta_{b_{k}b^{\prime}_{k} }$ çš„å½±å“ï¼Œè€Œä¸è€ƒè™‘æµ‹é‡å€¼ è§’é€Ÿåº¦ bias è¯¯å·®å½±å“ï¼Œå¯ä»¥å‡è®¾ $q_{b_kb_{k+1} }\approx\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}$ã€‚</p>
<p>å¦å¤–ï¼Œä¸‰å…ƒç»„å››å…ƒæ•°ç›¸ä¹˜æœ‰å¦‚ä¸‹æ€§è´¨ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{q}\otimes\mathbf{p}\otimes\mathbf{q}^*=
[\mathbf{q}]_L[\mathbf{q}]_R^T\mathbf{p}=\begin{bmatrix}p_w\\R\mathbf{p}_v\end{bmatrix}\tag{26}</script><p>å…¶ä¸­ $R$æ˜¯ $\mathbf{q}$ å¯¹åº”çš„æ—‹è½¬çŸ©é˜µï¼Œ$\mathbf{q}^*$ æ˜¯ $\mathbf{q}$ çš„å…±è½­ï¼Œ $p_w$ ä¸º $\mathbf{p}$ çš„å®éƒ¨ï¼Œ  $\mathbf{p}_v$ ä¸º  $\mathbf{p}$ çš„è™šéƒ¨ã€‚</p>
<p>ä¸‹é¢å¼€å§‹è¯¦ç»†æ¨å¯¼ï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
q_{b_ib_{k+1} }\otimes\begin{bmatrix}1\\\frac{1}{2}\delta\theta_{b_{k+1}b^{\prime}_{k+1} }\end{bmatrix}
&=q_{b_ib_{k} }\otimes\begin{bmatrix}1\\\frac{1}{2}\delta\theta_{b_{k}b^{\prime}_{k} }\end{bmatrix}\otimes
\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}\\
\begin{bmatrix}1\\\frac{1}{2}\delta\theta_{b_{k+1}b^{\prime}_{k+1} }\end{bmatrix}
&=q_{b_ib_{k+1} }^*\otimes q_{b_ib_{k} }\otimes\begin{bmatrix}1\\\frac{1}{2}\delta\theta_{b_{k}b^{\prime}_{k} }\end{bmatrix}\otimes
\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}\\
&=q_{b_{k+1}b_{k} }\otimes\begin{bmatrix}1\\\frac{1}{2}\delta\theta_{b_{k}b^{\prime}_{k} }\end{bmatrix}\otimes
\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}\\
&\approx \begin{bmatrix}1\\-\frac{1}{2}\omega\delta t\end{bmatrix}\otimes
\begin{bmatrix}1\\\frac{1}{2}\delta\theta_{b_{k}b^{\prime}_{k} }\end{bmatrix}\otimes
\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}\\
&=\begin{bmatrix}1\\\frac{1}{2}R\delta\theta_{b_{k}b^{\prime}_{k} }\end{bmatrix}
\end{align*}\tag{27}</script><p>æ³¨æ„ï¼šä¸Šé¢æ¨å¯¼è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥ç”¨æä»£æ•°çš„å³æ‰°åŠ¨   $R\exp([\delta\theta_{k+1}]^{\land})$</p>
<p>åªè€ƒè™‘å…¬å¼ $(27)$ ä¸­çš„è™šéƒ¨ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta\theta_{b_{k+1}b^{\prime}_{k+1} }
&=R\delta\theta_{b_{k+1}b^{\prime}_{k+1} }\\
&=\exp([-w\delta t]^{\land})\delta\theta_{b_{k}b^{\prime}_{k} }\\
&\approx (I-[w\delta t]^{\land})\delta\theta_{b_{k}b^{\prime}_{k} }
\end{align*}\tag{28}</script><p>é‚£ä¹ˆï¼Œç¬¬ $k+1$ æ—¶åˆ»çš„æ—‹è½¬é¢„ç§¯åˆ†çš„è¯¯å·®ç›¸å¯¹äºç¬¬ $k$ æ—¶åˆ»çš„ é›…å¯æ¯”ä¸ºï¼š</p>
<script type="math/tex; mode=display">
f_{22}=\frac{\partial \delta\theta_{b_{k+1}b^{\prime}_{k+1} } }{\partial \delta\theta_{b_{k}b^{\prime}_{k} } }=I-[w\delta t]^{\land}\tag{29}</script>]]></content>
      <categories>
        <category>ä»é›¶å¼€å§‹æ‰‹å†™VIO</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>é¢„ç§¯åˆ†ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‰ã€é¢„ç§¯åˆ†æ¨¡å‹ä»¥åŠæ®‹å·®çš„æ„å»º</title>
    <url>/posts/285413d6.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬èŠ‚ä¸»è¦è®¨è®ºIMU çš„è¯¯å·®æ¨¡å‹ã€ç§¯åˆ†æ¨¡å‹ä»¥åŠé¢„ç§¯åˆ†æ¨¡å‹ï¼Œè¯»è€…å¯ä»¥æ¸…æ¥šä¸ºä»€ä¹ˆä½¿ç”¨é¢„ç§¯åˆ†ï¼Œä»¥åŠå¦‚ä½•æ„å»ºé¢„ç§¯åˆ†çš„æ®‹å·®ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="IMUçš„è¯¯å·®æ¨¡å‹"><a href="#IMUçš„è¯¯å·®æ¨¡å‹" class="headerlink" title="IMUçš„è¯¯å·®æ¨¡å‹"></a>IMUçš„è¯¯å·®æ¨¡å‹</h1><ul>
<li><strong>åŠ é€Ÿåº¦è®¡çš„è¯¯å·®æ¨¡å‹</strong></li>
</ul>
<p>è®¾å¯¼èˆªç³»$G$ä¸ºä¸œåŒ—å¤©ï¼Œ$g^G=(0,0,-9.81)^T$ã€‚</p>
<p>ç†è®ºæµ‹é‡å€¼ï¼š</p>
<script type="math/tex; mode=display">
a_m^B=R_{BG}(a^G-g^G)
\tag{1}</script><p>å¦‚æœè€ƒè™‘é«˜æ–¯ç™½å™ªå£°ï¼Œbiasï¼Œä»¥åŠå°ºåº¦å› å­(é€šå¸¸å‡è®¾å°ºåº¦å› å­ä¸ºå•ä½çŸ©é˜µã€‚)ï¼Œåˆ™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
a_m^B=S_aR_{BG}(a^G-g^G)+n_a+b_a\tag{2}</script><p><img src="/images/ä¸‰ã€VIOé¢„ç§¯åˆ†çš„æ®‹å·®æ„å»ºä»¥åŠé›…å¯æ¯”æ±‚è§£/image-20220423171217806.png" alt="image-20220423171217806" style="zoom:50%;" /></p>
<ul>
<li><strong>é™€èºä»ªçš„è¯¯å·®æ¨¡å‹</strong></li>
</ul>
<p>è€ƒè™‘å°ºåº¦å› å­ï¼Œé«˜æ–¯ç™½å™ªå£°ï¼Œä»¥åŠ bias, é™€èºä»ªçš„è¯¯å·®æ¨¡å‹å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
w^b_m=S_gw^b+n_g+b_g\tag{3}</script><p>ä½ç«¯ä¼ æ„Ÿå™¨ï¼Œè€ƒè™‘åŠ é€Ÿåº¦å¯¹é™€èºä»ªçš„å½±å“ï¼Œå³ g-çµæ•åº¦ï¼š</p>
<script type="math/tex; mode=display">
w^b_m=S_gw^b+S_{ga}a^b+n_g+b_g\tag{4}</script><p>é™€èºä»ªå—å››ç§å™ªå£°çš„å½±å“åˆ†åˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/ä¸‰ã€VIOé¢„ç§¯åˆ†çš„æ®‹å·®æ„å»ºä»¥åŠé›…å¯æ¯”æ±‚è§£/image-20220423190440715.png" alt="image-20220423190440715" style="zoom: 50%;" /></p>
<h1 id="IMUæ¨¡å‹ä¸è¿åŠ¨ç§¯åˆ†"><a href="#IMUæ¨¡å‹ä¸è¿åŠ¨ç§¯åˆ†" class="headerlink" title="IMUæ¨¡å‹ä¸è¿åŠ¨ç§¯åˆ†"></a>IMUæ¨¡å‹ä¸è¿åŠ¨ç§¯åˆ†</h1><p>å¿½ç•¥ scale çš„å½±å“ï¼Œæ ¹æ®imuçš„è¯¯å·®æ¨¡å‹æˆ‘ä»¬å¯ä»¥å‡è®¾ï¼šè§’é€Ÿåº¦è¯»æ•°ä¼šåœ¨çœŸå®å€¼çš„åŸºç¡€ä¸Šå—åˆ°<strong>biaså’Œç™½å™ªå£°</strong>çš„å½±å“ï¼ŒåŠ é€Ÿåº¦é™¤äº†å—åˆ°<strong>biaså’Œç™½å™ªå£°</strong>çš„å½±å“ï¼Œè¿˜ä¼šå—åˆ°<strong>é‡åŠ›</strong>çš„å½±å“ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ä»IMUä¸­å¾—åˆ°è§’é€Ÿåº¦å’ŒåŠ é€Ÿåº¦çš„è¯»æ•°ï¼Œå¦‚å…¬å¼$(5)(6)$çš„ç­‰å¼å·¦è¾¹ï¼Œå®ƒä»¬éƒ½æ˜¯åŸºäºIMUåæ ‡ç³»çš„ã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
\tilde{w}^b&=w^b+b_g+n_g\tag{5}
\end{align*}</script><script type="math/tex; mode=display">
\begin{align*}
\tilde{a}^b&=q_{bw}(a^w-g^w)+b_a+n_a\tag{6}
\end{align*}</script><p>ä¸Šæ ‡$ g$ è¡¨ç¤º gyroï¼Œa è¡¨ç¤º accï¼Œ$^w $è¡¨ç¤ºåœ¨ä¸–ç•Œåæ ‡ç³» worldï¼Œ$^b$è¡¨ç¤ºimu æœºä½“åæ ‡ç³» bodyã€‚IMU çš„çœŸå®å€¼ä¸º$w, a$, æµ‹é‡å€¼ä¸º$\tilde w, \tilde a$ï¼Œæµ‹é‡å€¼å³ä¸ºIMUçš„è¯»æ•°ã€‚ </p>
<p>æˆ‘ä»¬çŸ¥é“<strong>è§’é€Ÿåº¦$w$</strong>ç§¯åˆ†å¾—åˆ°<strong>å§¿æ€$q$</strong>ï¼Œ<strong>åŠ é€Ÿåº¦$a$</strong>ç§¯åˆ†å¾—åˆ°<strong>é€Ÿåº¦$v$</strong>ï¼Œ<strong>é€Ÿåº¦$v$</strong>ç§¯åˆ†å¾—åˆ°<strong>ä½ç§»$p$</strong>ã€‚è€Œç°åœ¨çš„ç›®æ ‡æ˜¯ä» IMU æµ‹é‡ä¸­æ¨æ–­ç³»ç»Ÿçš„è¿åŠ¨ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä»¥ä¸‹è¿åŠ¨å­¦æ¨¡å‹ï¼Œ <strong>P(ose)ï¼ˆä½ç½®ï¼‰ï¼ŒV(elocity)ï¼ˆé€Ÿåº¦ï¼‰ï¼ŒQ(uaternion) ï¼ˆæ—‹è½¬ï¼‰</strong>å¯¹æ—¶é—´çš„å¯¼æ•°å¯å†™æˆï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot p_{wb}&=v^w_t\\
\dot v^w_t &=a^w_t\\
\dot q_{wb_t} &=q_{wb_t} \otimes 
\begin{bmatrix}0\\ \frac{1}{2}w^{b_t} \end{bmatrix}
\end{align*}\tag{7}</script><p>å®ƒæè¿°äº† IMUåæ ‡ç³» çš„å§¿åŠ¿å’Œé€Ÿåº¦çš„æ¼”å˜ã€‚</p>
<p>ç¬¬ä¸‰é¡¹ï¼Œå››å…ƒæ•°æ±‚å¯¼å‚è€ƒ <a href="https://lukeyalvin.top/posts/28639.html#B-%E5%9B%9B%E5%85%83%E6%95%B0">ä¸€ã€VIOæ¦‚è¿°ä»¥åŠä¸‰ç»´åˆšä½“è¿åŠ¨çŸ¥è¯†ç‚¹å›é¡¾</a></p>
<p> $t + \Delta t $æ—¶åˆ»çš„çŠ¶æ€æ˜¯é€šè¿‡ç§¯åˆ†æ–¹ç¨‹$(7)$è·å¾—çš„ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p_{wb}(t+\Delta t)&=p_{wb}(t)+\int^{t+\Delta t}_t v^w(\tau)d\tau+\iint^{t+\Delta t}_t a^w d\tau^2\\
v^w(t+\Delta t)&=v^w(t)+\int^{t+\Delta t}_t a^w d\tau\\
q_{wb}(t+\Delta t)&=\int^{t+\Delta t}_t q_{wb}(\tau)\otimes \begin{bmatrix}0\\ \frac{1}{2}w^{b}(\tau)\end{bmatrix}d\tau
\end{align*}\tag{8}</script><p>æ ¹æ®ç§¯åˆ†çš„æ€§è´¨ï¼Œè¿™é‡Œçš„ $\tau$ æ˜¯æŠŠ $[t,t+\Delta t]$åˆ†å‰²çš„æ— é™å°éƒ¨åˆ†ã€‚</p>
<p>å‡è®¾ $a^w$ å’Œ $q_{wb}\otimes \begin{bmatrix}0\\ \frac{1}{2}w^{b}\end{bmatrix}$ åœ¨æ—¶é—´é—´éš” $[t, t + \Delta t]$ å†…ä¿æŒä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p_{wb}(t+\Delta t)&=p_{wb}(t)+ v^w(t)\Delta t+\frac{1}{2} a^w \Delta t^2\\
v^w(t+\Delta t)&=v^w(t)+ a^w \Delta t\\
q_{wb}(t+\Delta t)&= q_{wb}(t)\otimes \begin{bmatrix}0\\ \frac{1}{2}w^{b}(t)\Delta t\end{bmatrix}
\end{align*}\tag{9}</script><p>æ ¹æ®å…¬å¼$(5)(6)$å¯ä»¥å°† $a^w$ å’Œ $q_{wb}\otimes \begin{bmatrix}0\\ \frac{1}{2}w^{b}\end{bmatrix}$ å†™æˆ IMU æµ‹é‡çš„å‡½æ•°ï¼Œå› æ­¤ $(9)$ å˜ä¸º:</p>
<script type="math/tex; mode=display">
\begin{align*}
p_{wb}(t+\Delta t)&=p_{wb}(t)+ v^w(t)\Delta t+\frac{1}{2}g^w\Delta t^2+\frac{1}{2}q_{wb}(t)\left(\tilde a(t)-b_a(t)-n_a(t)\right)\Delta t^2\\
v^w(t+\Delta t)&=v^w(t)+g^w\Delta t+ q_{wb}(t)\left(\tilde a(t)-b_a(t)-n_a(t)\right)\Delta t\\
q_{wb}(t+\Delta t)&= q_{wb}(t)\otimes \begin{bmatrix}0\\ \frac{1}{2}(\tilde{w}^b(t)-b_g(t)-n_g(t))\Delta t\end{bmatrix}
\end{align*}\tag{10}</script><p>æ–¹ç¨‹ $(10)$  å°†æ—¶é—´ $t$ å’Œ $t + \Delta t$ çš„çŠ¶æ€å…³è”èµ·æ¥ï¼Œå…¶ä¸­ $\Delta t$ æ˜¯ IMU çš„é‡‡æ ·å‘¨æœŸã€‚<strong>è¿™æ ·å°±å¯ä»¥å¾—åˆ°æ—‹è½¬ï¼Œé€Ÿåº¦ï¼Œå¹³ç§»ä¸ IMU è¯»æ•°ä¹‹é—´çš„å…³ç³»ï¼Œè¿›è€Œå¯ä»¥æ ¹æ®IMU çš„è¯»æ•°æ¥ä¼°è®¡ä½å§¿ã€‚</strong></p>
<h1 id="IMUé¢„ç§¯åˆ†æ¨¡å‹"><a href="#IMUé¢„ç§¯åˆ†æ¨¡å‹" class="headerlink" title="IMUé¢„ç§¯åˆ†æ¨¡å‹"></a>IMUé¢„ç§¯åˆ†æ¨¡å‹</h1><h2 id="IMU-é¢„ç§¯åˆ†"><a href="#IMU-é¢„ç§¯åˆ†" class="headerlink" title="IMU é¢„ç§¯åˆ†"></a>IMU é¢„ç§¯åˆ†</h2><p>å¦‚å›¾æ‰€ç¤ºï¼Œç›¸æœºçš„é‡‡æ ·é¢‘ç‡æ˜¯æ˜æ˜¾ä½äº IMU çš„é‡‡æ ·é¢‘ç‡çš„ï¼Œç›¸æœºæˆ–æ¿€å…‰ä¸€èˆ¬åœ¨å‡ å HZï¼Œè€Œ IMU å¯ä»¥è¾¾åˆ°å‡ ç™¾ HZï¼Œè€Œåœ¨ SLAM ä¸­æˆ‘ä»¬é€šå¸¸æ˜¯æ±‚è§£æ¯ä¸€å¸§å›¾åƒ/æ¿€å…‰çš„ä½å§¿ï¼Œå› æ­¤éœ€è¦å¯¹ä¸¤å¸§å›¾åƒ/æ¿€å…‰ä¹‹é—´çš„æ‰€æœ‰IMUè§‚æµ‹è¿›è¡Œç´¯åŠ ï¼Œå¯ä»¥å¾—åˆ° $i$ å¸§å’Œ $j$ å¸§ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´çš„å•ä¸ªå¤åˆçš„æµ‹é‡å€¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>é¢„ç§¯åˆ†</strong>ã€‚</p>
<p><img src="/images/3-é¢„ç§¯åˆ†æ¨¡å‹ä»¥åŠè¯¯å·®é€’æ¨æ–¹ç¨‹çš„æ¨å¯¼/image-20220507202527649-16521033725156.png" alt="image-20220507202527649"></p>
<p>æˆ‘ä»¬å‡è®¾ IMU ä¸ç›¸æœºåŒæ­¥ï¼Œå¹¶åœ¨ç¦»æ•£æ—¶é—´ $k$ å¤„æä¾›æµ‹é‡å€¼ï¼ˆå‚è§å›¾ 4ï¼‰ã€‚åœ¨æ—¶é—´ $k = i$ å’Œ $k= j$ å¤„å¯¹ä¸¤ä¸ªè¿ç»­å…³é”®å¸§ä¹‹é—´çš„æ‰€æœ‰ $\Delta t$ é—´éš”è¿­ä»£ä½¿ç”¨ IMU ç§¯åˆ† $(10)$ï¼Œæˆ‘ä»¬å‘ç°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
{p_{wb} }_j&={p_{wb} }_i+\sum^{j-1}_{k=i}\left[
v^w(t)\Delta t+\frac{1}{2}g^w\Delta t^2+\frac{1}{2}q_{wb_k}\left(\tilde a_k-b_{ak}-n_{ak}\right)\Delta t^2\right]\\
v^w_j&=v^w_i+g^w\Delta t_{ij}+ \prod^{j-1}_{k=i} q_{wb_k}(t)\left(\tilde a_k-b_{ak}-n_{ak}\right)\Delta t\\
q_{wb_j}&= q_{wb_i}\otimes \begin{bmatrix}0\\ \frac{1}{2}\prod^{j-1}_{k=i}(\tilde{w}^b_k-b_{gk}-n_{gk})\Delta t\end{bmatrix}
\end{align*}\tag{11}</script><p>ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œæˆ‘ä»¬å¼•å…¥äº†ç®€å†™ $\Delta t_{ij} \doteq  \sum^{jâˆ’1}_{k=i} \Delta t$ å’Œ $(Â·)_i \doteq (Â·)(t_i)$ã€‚ $(11)$ å·²ç»æä¾›äº†æ—¶é—´ $t_i$ å’Œ $t_j$ ä¹‹é—´è¿åŠ¨çš„ä¼°è®¡ï¼Œå®ƒçš„ç¼ºç‚¹æ˜¯ï¼Œåªè¦æ—¶é—´ $t_i$  çš„çº¿æ€§åŒ–ç‚¹å‘ç”Ÿå˜åŒ–ï¼Œå°±å¿…é¡»é‡å¤ $(11)$ ä¸­çš„ç§¯åˆ†ï¼ˆç›´è§‚åœ°è¯´ï¼Œæ—‹è½¬ $q_{wb_i}$ çš„å˜åŒ–ï¼Œæ„å‘³ç€æ‰€æœ‰æœªæ¥æ—‹è½¬ $q_{wb_k}ã€k = i,â€¦,j-1$ çš„å˜åŒ–ï¼Œå› æ­¤æœ‰å¿…è¦é‡æ–°è¯„ä¼° $(11)$ ä¸­çš„æ±‚å’Œå’Œä¹˜ç§¯ã€‚</p>
<blockquote>
<p>è¿™é‡Œæ²¡æœ‰æ‰¾åˆ°ç¦»æ•£å½¢åŠ¿ä¸‹ä½¿ç”¨å››å…ƒæ•°çš„é¢„ç§¯åˆ†æ¨å¯¼ç›¸å…³èµ„æ–™ï¼Œè€Œåœ¨é«˜åšç­‰äººçš„ã€Šä»é›¶å¼€å§‹æ‰‹å†™VIOã€‹è¯¾ç¨‹ä¸­ï¼Œç”¨çš„æ˜¯å¦‚ä¸‹è¿ç»­å½¢å¼è¿›è¡Œæ¨å¯¼çš„ï¼Œäº‹å®ä¸Šï¼Œæˆ‘è®¤ä¸º $(12)$ ä¸­çš„è¿ç»­å½¢å¼ä¸­åœ¨é€’æ¨ $p_{wb_j}$çš„æ—¶å€™ï¼Œå¯¹é€Ÿåº¦æ²¡æœ‰ç§¯åˆ†æ˜¯ä¸å¯¹çš„ï¼Œæ­¤å¤„æš‚ä¸”ç•™ç–‘ç‚¹ã€‚</p>
</blockquote>
<p>åŒæ ·çš„ï¼Œè¿ç»­å½¢å¼ä¸‹ï¼Œå¯ä»¥å¾—åˆ°:</p>
<script type="math/tex; mode=display">
\begin{align*}
p_{wb_j}&=p_{wb_i}+v^w_i \Delta t+\iint_{t\in[i,j]}(q_{wb_t}a^{b_t}-g^w)\delta t^2\\
v^w_j&=v^w_i+\int_{t\in[i,j]}(q_{wb_t}a^{b_t}-g^w)\delta t\\
q_{wb_j}&=\int_{t\in[i,j]}q_{wb_t}\otimes \begin{bmatrix}0\\ \frac{1}{2}w^{b_t} \end{bmatrix}\delta t
\end{align*}\tag{12}</script><p>å…¶ä¸­ï¼Œä¸éš¾å‘ç°ï¼Œæ—‹è½¬ $q_{wb_i}$ çš„å˜åŒ–ï¼Œæ„å‘³ç€æ‰€æœ‰æœªæ¥æ—‹è½¬ $q_{wb_t}ã€t \in [i,j]$ çš„å˜åŒ–ï¼Œå¯¼è‡´å¯¹ $(12)$ä¸­çš„ç§¯åˆ†è¿›è¡Œé‡å¤è®¡ç®—ã€‚</p>
<p>ä¸€ä¸ªå¾ˆç®€å•çš„å…¬å¼è½¬æ¢ï¼Œå°±å¯ä»¥å°†ç§¯åˆ†æ¨¡å‹è½¬ä¸ºé¢„ç§¯åˆ†æ¨¡å‹ï¼š  </p>
<script type="math/tex; mode=display">
q_{wb_t}=q_{wb_i}\otimes q_{b_ib_t}\tag{13}</script><p>å…¶ä¸­ $\otimes$ è¡¨ç¤ºå››å…ƒæ•°çš„ä¹˜æ³•ï¼Œå…·ä½“å¯ä»¥å¯ä»¥å‚è€ƒï¼Œ<a href="https://lukeyalvin.top/posts/28639.html#B-%E5%9B%9B%E5%85%83%E6%95%B0"><strong>å››å…ƒæ•°çš„ä¹˜æ³•è¿ç®—</strong></a></p>
<p>é‚£ä¹ˆï¼Œ PVQ ç§¯åˆ†å…¬å¼ä¸­çš„ç§¯åˆ†é¡¹åˆ™å˜æˆç›¸å¯¹äºç¬¬ $i$ æ—¶åˆ»çš„å§¿æ€ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»çš„å§¿æ€ï¼Œåˆ™å…¬å¼$(12)$å˜æ¢ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p_{wb_j}&=p_{wb_i}+v^w_i \Delta t-\frac{1}{2}g^w\Delta t^2+
q_{wb_i}\iint_{t\in[i,j]}(q_{b_ib_t}a^{b_t})\delta t^2\\
v^w_j&=v^w_i-g^w\Delta t+q_{wb_i}\int_{t\in[i,j]}(q_{b_ib_t}a^{b_t})\delta t\\
q_{wb_j}&=q_{wb_i}\int_{t\in[i,j]}q_{b_ib_t}\otimes \begin{bmatrix}0\\ \frac{1}{2}w^{b_t} \end{bmatrix}\delta t
\end{align*}\tag{14}</script><p>è¿™æ ·çš„è¯ï¼Œç§¯åˆ†é‡Œçš„æŠŠç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»çš„çŠ¶æ€é‡ $q_{wb_i}$ ç§»å‡ºå»äº†ï¼Œç§¯åˆ†é‡Œé¢éƒ½æ˜¯ç›¸å¯¹äºç¬¬ $i$ æ—¶åˆ»çš„çŠ¶æ€é‡ $q_{b_ib_t}$ã€‚</p>
<p>å®šä¹‰é¢„ç§¯åˆ†é‡å¦‚ä¸‹ï¼Œé¢„ç§¯åˆ†é‡ä»…ä»…è·Ÿ IMU æµ‹é‡å€¼æœ‰å…³ï¼Œå®ƒå°†ä¸€æ®µæ—¶é—´å†…çš„ IMU æ•°æ®ç›´æ¥ç§¯åˆ†èµ·æ¥å°±å¾—åˆ°äº†<strong>é¢„ç§¯åˆ†é‡</strong>ï¼š  </p>
<script type="math/tex; mode=display">
\begin{align*}
\alpha_{b_ib_j}&=\iint_{t\in[i,j]}(q_{b_ib_t}a^{b_t})\delta t^2\\
\beta_{b_ib_j}&=\int_{t\in[i,j]}(q_{b_ib_t}a^{b_t})\delta t\\
q_{b_ib_j}&=\int_{t\in[i,j]}q_{b_ib_t}\otimes \begin{bmatrix}0\\ \frac{1}{2}w^{b_t}\end{bmatrix}\delta t
\end{align*}\tag{15}</script><p>ç”±å…¬å¼$(14)$ä¸$(15)$é‡æ–°æ•´ç†PVQçš„ç§¯åˆ†å…¬å¼ï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\begin{bmatrix}
p_{wb_j}\\v^w_{j}\\q_{wb_j}\\b^a_j\\b^g_j
\end{bmatrix}=
\begin{bmatrix}
p_{wb_i}+v^w_i \Delta t-\frac{1}{2}g^w\Delta t^2+
q_{wb_i}\alpha_{b_ib_j}\\
v^w_i-g^w\Delta t+q_{wb_i}\beta_{b_ib_j}\\
q_{wb_i}q_{b_ib_j}\\b^a_i\\b^g_i
\end{bmatrix}
\end{align*}\tag{16}</script><h2 id="IMU-é¢„ç§¯åˆ†æ®‹å·®"><a href="#IMU-é¢„ç§¯åˆ†æ®‹å·®" class="headerlink" title="IMU é¢„ç§¯åˆ†æ®‹å·®"></a>IMU é¢„ç§¯åˆ†æ®‹å·®</h2><p>å®šä¹‰ï¼šä¸€æ®µæ—¶é—´å†… <strong>IMU æ„å»ºçš„é¢„ç§¯åˆ†é‡ä½œä¸ºæµ‹é‡å€¼</strong>ï¼Œå¯¹ä¸¤æ—¶åˆ»ä¹‹é—´çš„çŠ¶æ€é‡è¿›è¡Œçº¦æŸï¼Œ  </p>
<script type="math/tex; mode=display">
\begin{align*}
\begin{bmatrix}
r_p\\r_v\\r_q\\r_{ba}\\r_{bg}
\end{bmatrix}_{15\times1}=
\begin{bmatrix}
q_{b_iw}(p_{wb_j}-p_{wb_i}-v^w_i \Delta t+\frac{1}{2}g^w\Delta t^2)-
{\color{red}\alpha_{b_ib_j} }\\
q_{b_iw}(v^w_j-v^w_i+g^w\Delta t)-{\color{red}\beta_{b_ib_j} }\\
2[{\color{red}q_{b_jb_i} }\otimes(q_{b_iw}\otimes q_{wb_j})]_{xyz}\\
b^a_j-b^a_i\\
b^g_j-b^g_i
\end{bmatrix}
\end{align*}\tag{16}</script><p>ä¸Šé¢è¯¯å·®ä¸­ä½ç§»ï¼Œé€Ÿåº¦ï¼Œåç½®éƒ½æ˜¯ç›´æ¥ç›¸å‡å¾—åˆ°ã€‚ç¬¬ä¸‰é¡¹æ˜¯å…³äºå››å…ƒæ•°çš„<strong>æ—‹è½¬è¯¯å·®</strong>ï¼Œå…¶ä¸­$[Â·]_{xyz }$è¡¨ç¤ºåªå–å››å…ƒæ•°çš„è™šéƒ¨ $(x, y, z)$ç»„æˆçš„ä¸‰ç»´å‘é‡ã€‚  </p>
<h2 id="IMU-é¢„ç§¯åˆ†æ®‹å·®çš„ç¦»æ•£å½¢å¼"><a href="#IMU-é¢„ç§¯åˆ†æ®‹å·®çš„ç¦»æ•£å½¢å¼" class="headerlink" title="IMU é¢„ç§¯åˆ†æ®‹å·®çš„ç¦»æ•£å½¢å¼"></a>IMU é¢„ç§¯åˆ†æ®‹å·®çš„ç¦»æ•£å½¢å¼</h2><p>ä½¿ç”¨ mid-point æ–¹æ³•ï¼Œå³ä¸¤ä¸ªç›¸é‚»æ—¶åˆ»$ k$åˆ°$ k+1$ çš„ä½å§¿æ˜¯ç”¨ä¸¤ä¸ªæ—¶åˆ»çš„æµ‹é‡å€¼$ a,w $çš„å¹³å‡å€¼æ¥è®¡ç®—ã€‚å‚è€ƒå…¬å¼$(11)(12)$:</p>
<script type="math/tex; mode=display">
\begin{align*}
a&=\frac{1}{2}[q_{b_ib_k}(a^{b_k}-b^a_k)+q_{b_ib_{k+1} }(a^{b_{k+1} }-b^a_k)]\\
w&=\frac{1}{2}[(w^{b_k}-b^g_k)+(w^{b_{k+1} }-b^g_k)]\\
{\color{blue}q_{b_ib_{k+1} } }&=q_{b_ib_k}\otimes\begin{bmatrix}1\\\frac{1}{2}\omega\delta t\end{bmatrix}\\
{\color{blue}\alpha_{b_ib_{k+1} } }&=\alpha_{b_ib_k}+\beta_{b_ib_k}\delta t +\frac{1}{2}a\delta t^2\\
{\color{blue}\beta_{b_ib_{k+1} } }&=\beta_{b_ib_k}+a\delta t\\
b^a_{k+1}&=b^a_k+n_{b^a_k}\delta t\\
b^g_{k+1}&=b^g_k+n_{b^g_k}\delta t
\end{align*}\tag{17}</script>]]></content>
      <categories>
        <category>ä»é›¶å¼€å§‹æ‰‹å†™VIO</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>é¢„ç§¯åˆ†ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€æ–‡çŒ®é˜…è¯»ã€‘On-Manifold Preintegration for Real-Time Visual-Inertial Odometry</title>
    <url>/posts/e6b6704d.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬æ–‡å¯¹ç»å…¸çš„é¢„ç§¯åˆ†ç†è®ºçš„åŸå§‹è®ºæ–‡è¿›è¡Œäº†ç¿»è¯‘ï¼Œä½†æ˜¯é‡Œé¢çš„ç»†èŠ‚æš‚æ—¶ä¸æ˜¯å¾ˆç†è§£ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="On-Manifold-Preintegration-for-Real-Time-Visual-Inertial-Odometry"><a href="#On-Manifold-Preintegration-for-Real-Time-Visual-Inertial-Odometry" class="headerlink" title="On-Manifold Preintegration for Real-Time Visual-Inertial Odometry"></a>On-Manifold Preintegration for Real-Time Visual-Inertial Odometry</h1><p>æ‘˜è¦ï¼šå½“å‰çš„è§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡ï¼ˆVIOï¼‰æ–¹æ³•èƒ½å¤Ÿé€šè¿‡éçº¿æ€§ä¼˜åŒ–è·å¾—é«˜åº¦å‡†ç¡®çš„çŠ¶æ€ä¼°è®¡ã€‚ç„¶è€Œï¼Œéšç€è½¨è¿¹éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®æ—¶ä¼˜åŒ–å¾ˆå¿«å˜å¾—ä¸å¯è¡Œã€‚å°¤å…¶æ˜¯æƒ¯æ€§æµ‹é‡ä»¥é«˜é€Ÿç‡å‡ºç°çš„æ—¶å€™ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ›´åŠ çªå‡ºï¼Œå› æ­¤å¯¼è‡´ä¼˜åŒ–ä¸­å˜é‡æ•°é‡çš„å¿«é€Ÿå¢é•¿ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬<strong>é€šè¿‡é¢„ç§¯åˆ†å…³é”®å¸§ä¹‹é—´çš„æƒ¯æ€§æµ‹é‡ä»¥å¾—åˆ°å•ä¸ªç›¸å¯¹è¿åŠ¨çº¦æŸ</strong>ã€‚</p>
<p>æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè´¡çŒ®æ˜¯ä¸€ä¸ªé¢„ç§¯åˆ†ç†è®ºï¼Œå®ƒæ­£ç¡®åœ°è§£å†³äº†<strong>æ—‹è½¬ç¾¤çš„æµå½¢ç»“æ„</strong>ã€‚æˆ‘ä»¬æ­£å¼è®¨è®ºç”Ÿæˆæµ‹é‡æ¨¡å‹ä»¥åŠæ—‹è½¬å™ªå£°çš„æ€§è´¨ï¼Œå¹¶æ¨å¯¼å‡ºæœ€å¤§åéªŒçŠ¶æ€ä¼°è®¡å™¨çš„è¡¨è¾¾å¼ã€‚æˆ‘ä»¬çš„ç†è®ºå‘å±•èƒ½å¤Ÿè®¡ç®—æ‰€æœ‰å¿…è¦çš„é›…å¯æ¯”çŸ©é˜µï¼Œä»¥åˆ†æå½¢å¼çš„ä¼˜åŒ–å’ŒåéªŒåå·®æ ¡æ­£ã€‚</p>
<p>ç¬¬äºŒä¸ªè´¡çŒ®æ˜¯è¡¨æ˜é¢„ç§¯åˆ†çš„ IMU æ¨¡å‹å¯ä»¥åœ¨å› å­å›¾çš„ç»Ÿä¸€æ¡†æ¶ä¸‹è¢«æ•´åˆåˆ°è§†è§‰-æƒ¯æ€§æµç¨‹ä¸­ã€‚è¿™ä½¿å¾—<strong>å¢é‡å¹³æ»‘ç®—æ³•</strong>çš„åº”ç”¨å’Œ<strong>è§†è§‰æµ‹é‡çš„æ— ç»“æ„æ¨¡å‹</strong>çš„ä½¿ç”¨æˆä¸ºå¯èƒ½ï¼Œé¿å…äº†å¯¹ 3D ç‚¹çš„ä¼˜åŒ–ï¼Œè¿›ä¸€æ­¥åŠ é€Ÿäº†è®¡ç®—ã€‚</p>
<p>æˆ‘ä»¬åœ¨çœŸå®å’Œæ¨¡æ‹Ÿæ•°æ®é›†ä¸Šå¯¹æˆ‘ä»¬çš„å•ç›® VIO æµç¨‹è¿›è¡Œäº†å¹¿æ³›çš„è¯„ä¼°ã€‚ç»“æœè¯å®ï¼Œæˆ‘ä»¬çš„å»ºæ¨¡å·¥ä½œå¯ä»¥å®æ—¶è¿›è¡Œå‡†ç¡®çš„çŠ¶æ€ä¼°è®¡ï¼Œä¼˜äºæœ€å…ˆè¿›çš„æ–¹æ³•ã€‚</p>
<h1 id="ä¸€ã€å¼•è¨€"><a href="#ä¸€ã€å¼•è¨€" class="headerlink" title="ä¸€ã€å¼•è¨€"></a>ä¸€ã€å¼•è¨€</h1><p>ä½¿ç”¨ç›¸æœºå’Œæƒ¯æ€§ä¼ æ„Ÿå™¨è¿›è¡Œä¸‰ç»´ç»“æ„å’Œè¿åŠ¨ä¼°è®¡å·²ç»å—åˆ°æœºå™¨äººç•Œçš„æå¤§å…³æ³¨ã€‚ä¸¤ç§ä¼ æ„Ÿå™¨ç±»å‹éƒ½ä¾¿å®œã€æ— å¤„ä¸åœ¨ä¸”äº’è¡¥ã€‚<strong>ç§»åŠ¨ç›¸æœº</strong>æ˜¯ä¸€ç§å¤–æ„ŸçŸ¥ä¼ æ„Ÿå™¨ï¼Œå®ƒå…è®¸æˆ‘ä»¬æµ‹é‡ä¸‰ç»´åœºæ™¯çš„å¤–è§‚å’Œå‡ ä½•å½¢çŠ¶ï¼Œç›´è‡³æœªçŸ¥çš„åº¦é‡å°ºåº¦ï¼›<strong>æƒ¯æ€§æµ‹é‡å•å…ƒ (IMU)</strong> æ˜¯ä¸€ç§æœ¬ä½“æ„Ÿå—ä¼ æ„Ÿå™¨ï¼Œå¯å‘ˆç°å•ç›®è§†è§‰å’Œé‡åŠ›å¯è§†åŒ–çš„åº¦é‡å°ºåº¦ [1]ï¼Œå¹¶æä¾›ç¨³å¥ä¸”å‡†ç¡®çš„å¸§é—´è¿åŠ¨ä¼°è®¡ã€‚<strong>è§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡ï¼ˆVIOï¼‰</strong>çš„åº”ç”¨èŒƒå›´ä»æ— GPSç¯å¢ƒçš„è‡ªåŠ¨é©¾é©¶åˆ°3Dé‡å»ºå’Œå¢å¼ºç°å®ã€‚</p>
<p>ç°æœ‰çš„å…³äº VIO çš„æ–‡çŒ®åœ¨å‡†ç¡®æ€§å’Œè®¡ç®—æ•ˆç‡ä¹‹é—´è¿›è¡Œäº†æƒè¡¡ï¼ˆç¬¬ II èŠ‚ç»™å‡ºäº†è¯¦ç»†çš„å›é¡¾ï¼‰ã€‚ä¸€æ–¹é¢ï¼Œ<strong>æ»¤æ³¢æ–¹æ³•</strong>å¯ä»¥å®ç°å¿«é€Ÿæ¨æ–­ï¼Œä½†å…¶å‡†ç¡®æ€§ä¼šå› çº¿æ€§åŒ–è¯¯å·®çš„ç´¯ç§¯è€Œä¸‹é™ã€‚å¦ä¸€æ–¹é¢ï¼Œ<strong>åŸºäºéçº¿æ€§ä¼˜åŒ–çš„å®Œå…¨å¹³æ»‘æ–¹æ³•</strong>æ˜¯å‡†ç¡®çš„ï¼Œä½†è®¡ç®—é‡å¾ˆå¤§ã€‚å›ºå®šæ»åå¹³æ»‘ï¼ˆ$Fixed-lag\ Smoothing$ï¼‰åœ¨ç²¾åº¦å’Œæ•ˆç‡ä¹‹é—´æä¾›æŠ˜ä¸­ï¼›ä½†æ˜¯ï¼Œå°šä¸æ¸…æ¥šå¦‚ä½•è®¾ç½®ä¼°è®¡çª—å£çš„é•¿åº¦ä»¥ä¿è¯ç»™å®šçš„æ€§èƒ½æ°´å¹³ã€‚</p>
<p>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è¡¨æ˜å¯ä»¥å…‹æœè¿™ç§æƒè¡¡ã€‚æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ª VIO ç³»ç»Ÿï¼Œå¯ä»¥å®ç°å¿«é€Ÿå¢é‡å¹³æ»‘å¹¶å®æ—¶è®¡ç®—æœ€ä¼˜çš„æœ€å¤§åéªŒ (MAP) ä¼°è®¡ã€‚ç¬¬IVç»™å‡ºäº†æˆ‘ä»¬æ–¹æ³•çš„æ¦‚è¿°ã€‚</p>
<p>å®ç°è¿™ä¸€ç›®æ ‡çš„ç¬¬ä¸€æ­¥æ˜¯å‘å±•ä¸€ä¸ªæ–°çš„é¢„ç§¯åˆ†ç†è®ºã€‚åœ¨ [2] ä¸­é¦–æ¬¡æå‡ºä½¿ç”¨é¢„ç§¯åˆ† IMU æµ‹é‡ï¼Œå…¶ç»„åˆä¸¤ä¸ªå…³é”®å¸§é—´çš„è®¸å¤šæƒ¯æ€§æµ‹é‡ä¸ºå•ä¸ªç›¸å¯¹è¿åŠ¨çº¦æŸã€‚æˆ‘ä»¬åœ¨è¿™é¡¹å·¥ä½œçš„åŸºç¡€ä¸Šæå‡ºäº†ä¸€ä¸ªé¢„ç§¯åˆ†ç†è®ºï¼Œè¯¥ç†è®ºæ­£ç¡®åœ°<strong>è§£å†³äº†æ—‹è½¬ç¾¤ $SO(3)$ çš„æµå½¢ç»“æ„</strong>ã€‚æˆ‘ä»¬çš„é¢„ç§¯åˆ†ç†è®ºåœ¨ç¬¬ V-VI èŠ‚ä¸­ä»‹ç»ã€‚ä¸[2]ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„ç†è®ºå¯¹æ—‹è½¬å™ªå£°æä¾›äº†æ›´æ­£å¼çš„å¤„ç†ï¼Œå¹¶é¿å…äº†æ—‹è½¬è¡¨ç¤ºä¸­çš„å¥‡å¼‚æ€§ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»¥è§£æå½¢å¼æ¨å¯¼å‡ºæ‰€æœ‰å¿…è¦çš„é›…å¯æ¯”çŸ©é˜µï¼šå…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æœ¬æ–‡çš„é™„å½•ä¸­æŠ¥å‘Šäº†æ®‹å·®ã€å™ªå£°ä¼ æ’­å’ŒåéªŒåå·®æ ¡æ­£çš„è§£æé›…å¯æ¯”çŸ©é˜µã€‚</p>
<p>æˆ‘ä»¬çš„ç¬¬äºŒä¸ªè´¡çŒ®æ˜¯<strong>å°† IMU é¢„ç§¯åˆ†ç†è®ºæ¡†æ¶åŒ–ä¸ºå› å­å›¾æ¨¡å‹</strong>ã€‚è¿™ä½¿å¾—å¢é‡å¹³æ»‘ç®—æ³•çš„åº”ç”¨æˆä¸ºå¯èƒ½ï¼Œå¦‚ iSAM2 [3]ï¼Œå®ƒé¿å…äº†çº¿æ€§åŒ–è¯¯å·®çš„ç´¯ç§¯ï¼Œå¹¶æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹å¼æ¥æƒè¡¡ç²¾åº¦å’Œæ•ˆç‡ã€‚å— [4, 5] çš„å¯å‘ï¼Œæˆ‘ä»¬è¿˜<strong>é‡‡ç”¨æ— ç»“æ„æ¨¡å‹è¿›è¡Œè§†è§‰æµ‹é‡</strong>ï¼Œå…è®¸åœ¨å¢é‡å¹³æ»‘æœŸé—´æ¶ˆé™¤å¤§é‡å˜é‡ï¼ˆå³æ‰€æœ‰ 3D ç‚¹ï¼‰ï¼Œä»è€Œè¿›ä¸€æ­¥åŠ é€Ÿè®¡ç®—ï¼ˆç¬¬ VII èŠ‚ï¼‰ã€‚ä¸ [5] ç›¸æ¯”ï¼Œæˆ‘ä»¬åœ¨å¢é‡å¹³æ»‘æ¡†æ¶ä¸­ä½¿ç”¨æ— ç»“æ„æ¨¡å‹ã€‚è¿™æœ‰ä¸¤ä¸ªä¸»è¦ä¼˜ç‚¹ï¼šæˆ‘ä»¬ä¸éœ€è¦å»¶è¿Ÿè§†è§‰æµ‹é‡çš„å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥å¤šæ¬¡é‡æ–°çº¿æ€§åŒ–è§†è§‰æµ‹é‡ã€‚</p>
<p>ä¸ºäº†è¯æ˜æˆ‘ä»¬æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œæˆ‘ä»¬å°†æè®®çš„ IMU é¢„ç§¯åˆ†é›†æˆåˆ°æœ€å…ˆè¿›çš„ VIO æµç¨‹ä¸­ï¼Œå¹¶åœ¨çœŸå®å’Œæ¨¡æ‹Ÿæ•°æ®é›† 2ï¼ˆç¬¬ VIII èŠ‚ï¼‰ä¸Šå¯¹å…¶è¿›è¡Œäº†æµ‹è¯•ã€‚æˆ‘ä»¬çš„ç†è®ºå‘å±•å¸¦æ¥äº†åˆ‡å®çš„å®é™…ä¼˜åŠ¿ï¼šæœ¬æ–‡æå‡ºçš„æ–¹æ³•çš„å®ç°ä»¥ 100 Hz çš„é€Ÿç‡æ‰§è¡Œå®Œå…¨å¹³æ»‘ï¼Œå¹¶ç›¸å¯¹äºå…·æœ‰ç«äº‰åŠ›çš„æœ€å…ˆè¿›çš„è¿‡æ»¤å’Œä¼˜åŒ–æ–¹æ³•å®ç°äº†å“è¶Šçš„ç²¾åº¦ã€‚</p>
<p>é™¤äº†æŠ€æœ¯è´¡çŒ®ï¼Œè®ºæ–‡è¿˜ä¸ºå®è·µè€…æä¾›äº†æ•™ç¨‹è´¡çŒ®ã€‚åœ¨ç¬¬IIIéƒ¨åˆ†å’Œæ•´ç¯‡è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬å¯¹æµå½¢ä¸Šçš„ä¸ç¡®å®šæ€§è¡¨ç¤ºä»¥åŠä¸ç¡®å®šæ€§ä¼ æ’­å’Œé›…å¯æ¯”è®¡ç®—çš„ç¤ºä¾‹æ¨å¯¼è¿›è¡Œäº†ç®€çŸ­è€Œç®€æ´çš„æ€»ç»“ã€‚æ‰€æœ‰æ–¹ç¨‹å’Œé›…å¯æ¯”çŸ©é˜µçš„å®Œæ•´æ¨å¯¼â€”â€”å®ç°æˆ‘ä»¬çš„æ¨¡å‹æ‰€å¿…éœ€çš„â€”â€”åœ¨é™„å½•ä¸­ç»™å‡ºã€‚</p>
<p>æœ¬æ–‡æ˜¯æˆ‘ä»¬ä¹‹å‰å·¥ä½œ [6] çš„æ‰©å±•ï¼ŒåŒ…æ‹¬é¢å¤–çš„å®éªŒã€å¯¹ç›¸å…³å·¥ä½œçš„æ·±å…¥è®¨è®ºå’Œå…¨é¢çš„æŠ€æœ¯æ¨å¯¼ã€‚æ–°å®éªŒçš„ç»“æœçªå‡ºäº†åå·®ä¼°è®¡çš„å‡†ç¡®æ€§ï¼Œè¯æ˜äº†æˆ‘ä»¬æ–¹æ³•çš„ä¸€è‡´æ€§ï¼Œå¹¶æä¾›äº†ä¸å…¨æ‰¹æ¬¡ä¼°è®¡çš„æ¯”è¾ƒã€‚æˆ‘ä»¬åœ¨ GTSAM 4.0 ä¼˜åŒ–å·¥å…·ç®±ä¸­å‘å¸ƒäº†é¢„é›†æˆ IMU å’Œæ— ç»“æ„è§†è§‰å› ç´ çš„å®ç°ã€‚</p>
<h1 id="äºŒã€ç›¸å…³å·¥ä½œ"><a href="#äºŒã€ç›¸å…³å·¥ä½œ" class="headerlink" title="äºŒã€ç›¸å…³å·¥ä½œ"></a>äºŒã€ç›¸å…³å·¥ä½œ</h1><p>è§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡çš„ç›¸å…³å·¥ä½œå¯ä»¥æ²¿ç€ä¸‰ä¸ªä¸»è¦ç»´åº¦è¿›è¡Œåˆ’åˆ†ã€‚<strong>ç¬¬ä¸€ä¸ªç»´åº¦æ˜¯ åœ¨ä¼°è®¡ä¸­æ¶‰åŠçš„ç›¸æœºä½å§¿çš„æ•°é‡ã€‚</strong>è™½ç„¶å®Œå…¨å¹³æ»‘å™¨ï¼ˆ$full\ smoothers$ï¼‰ï¼ˆæˆ–æ‰¹é‡éçº¿æ€§æœ€å°äºŒä¹˜ç®—æ³•ï¼ˆ$batch\ nonlinear\ least-squares\ algorithms$ï¼‰ä¼°è®¡å§¿åŠ¿çš„å®Œæ•´å†å²ï¼Œä½†å›ºå®šæ»åå¹³æ»‘å™¨ï¼ˆ$fixed-lag\ smoothers$ï¼‰ï¼ˆæˆ–æ»‘åŠ¨çª—å£ä¼°è®¡å™¨ï¼ˆ$fixed-lag\ smoothers$ï¼‰è€ƒè™‘æœ€æ–°å§¿åŠ¿çš„çª—å£ï¼Œè€Œè¿‡æ»¤æ–¹æ³•ä»…ä¼°è®¡æœ€æ–°çŠ¶æ€ã€‚å›ºå®šæ»åå¹³æ»‘å™¨å’Œæ»¤æ³¢å™¨éƒ½ä¼š<strong>è¾¹ç¼˜åŒ–</strong>æ—§çŠ¶æ€å¹¶<strong>å¸æ”¶</strong>é«˜æ–¯å…ˆéªŒä¸­çš„ç›¸åº”ä¿¡æ¯ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªç»´åº¦æ˜¯ å…³äºæµ‹é‡ä¸ç¡®å®šæ€§å’Œé«˜æ–¯å…ˆéªŒçš„è¡¨ç¤º</strong>ï¼šæ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨ (EKF) ä½¿ç”¨åæ–¹å·®çŸ©é˜µè¡¨ç¤ºä¸ç¡®å®šæ€§ï¼›ç›¸åï¼Œä¿¡æ¯æ»¤æ³¢å™¨å’Œå¹³æ»‘å™¨æ±‚åŠ©äºä¿¡æ¯çŸ©é˜µï¼ˆåæ–¹å·®çš„å€’æ•°ï¼‰æˆ–ä¿¡æ¯çŸ©é˜µçš„å¹³æ–¹æ ¹ [3, 8]</p>
<p>æœ€åï¼Œ<strong>ç¬¬ä¸‰ä¸ªç»´åº¦ é€šè¿‡æŸ¥çœ‹æµ‹é‡æ¨¡å‹çº¿æ€§åŒ–çš„æ¬¡æ•°æ¥åŒºåˆ†ç°æœ‰æ–¹æ³•ã€‚</strong>è™½ç„¶æ ‡å‡† EKFï¼ˆä¸è¿­ä»£ EKF ç›¸æ¯”ï¼‰åªå¤„ç†ä¸€æ¬¡æµ‹é‡ï¼Œä½†å¹³æ»‘æ–¹æ³•å…è®¸å¤šæ¬¡çº¿æ€§åŒ–ã€‚</p>
<p>è™½ç„¶æœ¯è¯­å¾ˆå¤šï¼Œä½†åº•å±‚ç®—æ³•æ˜¯ç´§å¯†ç›¸å…³çš„ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è¯æ˜<strong>è¿­ä»£æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨æ–¹ç¨‹ç­‰ä»·äºé«˜æ–¯ç‰›é¡¿ç®—æ³•</strong>ï¼Œé€šå¸¸ç”¨äºå¹³æ»‘ [9]</p>
<h2 id="A-æ»¤æ³¢"><a href="#A-æ»¤æ³¢" class="headerlink" title="A. æ»¤æ³¢"></a>A. æ»¤æ³¢</h2><p>æ»¤æ³¢ç®—æ³•é€šè¿‡å°†æ¨ç†è¿‡ç¨‹é™åˆ¶åœ¨ç³»ç»Ÿçš„æœ€æ–°çŠ¶æ€æ¥å®ç°æœ‰æ•ˆçš„ä¼°è®¡ã€‚ EKF çš„å¤æ‚æ€§åœ¨ä¼°è®¡çš„åœ°æ ‡æ•°é‡ä¸Šå‘ˆäºŒæ¬¡å¢é•¿ï¼Œå› æ­¤ï¼Œé€šå¸¸ä¼šè·Ÿè¸ªå°‘é‡åœ°æ ‡ï¼ˆå¤§çº¦ 20 ä¸ªï¼‰ä»¥å…è®¸å®æ—¶æ“ä½œ [10-12]ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯é‡‡ç”¨<strong>â€œæ— ç»“æ„â€æ–¹æ³•</strong>ï¼Œå…¶ä¸­åœ°æ ‡ä½ç½®è¢«<strong>è¾¹ç¼˜åŒ–</strong>å‡ºçŠ¶æ€å‘é‡ã€‚è¿™ç§ç­–ç•¥çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯<strong>å¤šçŠ¶æ€çº¦æŸå¡å°”æ›¼æ»¤æ³¢å™¨</strong>ï¼ˆ$Multi-State\ Constraint\ Kalman\ filter\ ï¼ŒMSC-KF$ï¼‰[5]ã€‚æ— ç»“æ„æ–¹æ³•éœ€è¦é€šè¿‡<strong>éšæœºå…‹éš†</strong>ï¼ˆ$stochastic\ cloning$ï¼‰ [13] å°†å…ˆå‰çš„å§¿åŠ¿ä¿ç•™åœ¨çŠ¶æ€å‘é‡ä¸­ã€‚</p>
<p>ä½¿ç”¨æ— ç»“æ„æ–¹æ³•è¿›è¡Œè¿‡æ»¤çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œ<strong>åœ°æ ‡æµ‹é‡çš„å¤„ç†</strong>éœ€è¦å»¶è¿Ÿï¼Œç›´åˆ°è·å¾—åœ°æ ‡çš„æ‰€æœ‰æµ‹é‡å€¼ [5]ã€‚è¿™ä¼šå¦¨ç¢å‡†ç¡®æ€§ï¼Œå› ä¸ºæ»¤æ³¢å™¨ä¸èƒ½ä½¿ç”¨æ‰€æœ‰å½“å‰çš„è§†è§‰ä¿¡æ¯ã€‚<strong>è¾¹ç¼˜åŒ–</strong>ä¹Ÿæ˜¯é”™è¯¯çš„æ¥æºï¼Œå› ä¸ºå®ƒé”å®šäº†<strong>çº¿æ€§åŒ–è¯¯å·®</strong>å’Œ<strong>é”™è¯¯çš„å¼‚å¸¸å€¼æµ‹é‡</strong>ã€‚å› æ­¤ï¼Œæ»¤é™¤è™šå‡æµ‹é‡å€¼å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå•ä¸ªå¼‚å¸¸å€¼ä¼šä¸å¯é€†è½¬åœ°ç ´åæ»¤æ³¢å™¨ [14]ã€‚æ­¤å¤–ï¼Œ<strong>çº¿æ€§åŒ–è¯¯å·®</strong>ä¼šåœ¨ä¼°è®¡ä¸­å¼•å…¥æ¼‚ç§»å¹¶å¯¼è‡´æ»¤æ³¢å™¨ä¸ä¸€è‡´ã€‚ä¸ä¸€è‡´çš„ä¸€ä¸ªå½±å“æ˜¯<strong>ä¼°è®¡å™¨</strong>å˜å¾—è¿‡äºè‡ªä¿¡ï¼Œå¯¼è‡´éæœ€ä¼˜ä¿¡æ¯èåˆã€‚é€šå¸¸ï¼ŒVIO é—®é¢˜æœ‰å››ä¸ªä¸å¯è§‚å¯Ÿçš„æ–¹å‘ï¼š<strong>å…¨å±€ä½ç½®</strong>å’Œå›´ç»•é‡åŠ›æ–¹å‘ï¼ˆ<strong>åèˆª</strong>ï¼Œyawï¼‰çš„æ–¹å‘ [15, 16]ã€‚åœ¨ [16] ä¸­è¡¨æ˜ï¼Œ<strong>é”™è¯¯ä¼°è®¡çš„çº¿æ€§åŒ–</strong>ä»…å¯¼è‡´ä¸‰ä¸ªä¸å¯è§‚å¯Ÿçš„æ–¹å‘ï¼ˆå…¨å±€ä½ç½®ï¼‰ï¼›å› æ­¤ï¼Œé”™è¯¯çš„çº¿æ€§åŒ–å°†åèˆªæ–¹å‘çš„è™šå‡ä¿¡æ¯æ·»åŠ åˆ°é«˜æ–¯å…ˆéªŒä¸­ï¼Œä»è€Œå¯¼è‡´æ»¤æ³¢å™¨ä¸ä¸€è‡´ã€‚è¿™ä¸ªé—®é¢˜å·²é€šè¿‡<strong>é¦–æ¬¡ä¼°è®¡é›…å¯æ¯”æ–¹æ³•</strong> ï¼ˆ$first-estimates\ jacobian$ï¼‰[17] å¾—åˆ°è§£å†³ï¼Œ<strong>è¯¥æ–¹æ³•ç¡®ä¿çŠ¶æ€ä¸ä¼šä½¿ç”¨ä¸åŒçš„çº¿æ€§åŒ–ç‚¹è¿›è¡Œæ›´æ–°</strong>â€”â€”è¿™æ˜¯ä¸ä¸€è‡´çš„æ¥æºã€‚åœ¨å¯è§‚å¯Ÿæ€§çº¦æŸï¼ˆ$observability-constrained$ï¼‰çš„ EKF (OC-EKF) ä¸­ï¼Œç»´æŒå¯¹ä¸å¯è§‚å¯Ÿæ–¹å‘çš„ä¼°è®¡ï¼Œè¿™å…è®¸ä»…åœ¨å¯è§‚å¯Ÿçš„æ–¹å‘ä¸Šæ›´æ–°æ»¤æ³¢å™¨ [16, 18]ã€‚åœ¨ [1, 15, 19] ä¸­ç»™å‡ºäº†å¯¹ VIO å¯è§‚å¯Ÿæ€§å±æ€§çš„å…¨é¢åˆ†æã€‚</p>
<h2 id="B-å›ºå®šæ»åå¹³æ»‘"><a href="#B-å›ºå®šæ»åå¹³æ»‘" class="headerlink" title="B.å›ºå®šæ»åå¹³æ»‘"></a>B.å›ºå®šæ»åå¹³æ»‘</h2><p>å›ºå®šæ»åå¹³æ»‘å™¨ï¼ˆ$fixed-lag\ smoothers$ï¼‰ä¼°è®¡è½åœ¨ç»™å®šæ—¶é—´çª—å£å†…çš„çŠ¶æ€ï¼ŒåŒæ—¶è¾¹ç¼˜åŒ–è¾ƒæ—§çš„çŠ¶æ€[20-24]ã€‚åœ¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡è®¾ç½®ä¸­ï¼Œå›ºå®šæ»åå¹³æ»‘å™¨ä¼š<strong>å¯¼è‡´ä¸€ç»„æœ€è¿‘çŠ¶æ€çš„ä¼˜åŒ–é—®é¢˜</strong>ã€‚å¯¹äºéçº¿æ€§é—®é¢˜ï¼Œ<strong>å¹³æ»‘æ–¹æ³•</strong>é€šå¸¸æ¯”æ»¤æ³¢æ›´å‡†ç¡®ï¼Œå› ä¸ºå®ƒä»¬ä¼š<strong>é‡æ–°çº¿æ€§åŒ–è¿‡å»çš„æµ‹é‡</strong> [25]ã€‚æ­¤å¤–ï¼Œè¿™äº›æ–¹æ³•<strong>å¯¹å¼‚å¸¸å€¼æ›´å…·å¼¹æ€§</strong>ï¼Œå¯ä»¥åœ¨åéªŒï¼ˆå³ä¼˜åŒ–ä¹‹åï¼‰ä¸¢å¼ƒï¼Œæˆ–è€…å¯ä»¥é€šè¿‡ä½¿ç”¨é²æ£’ä»£ä»·å‡½æ•°æ¥ç¼“è§£ã€‚ä¸åˆ©çš„ä¸€é¢æ˜¯ï¼Œ<strong>ä¼°è®¡çª—å£å¤–çš„çŠ¶æ€è¾¹ç¼˜åŒ–ä¼šå¯¼è‡´å¯†é›†çš„é«˜æ–¯å…ˆéªŒï¼Œä»è€Œé˜»ç¢æœ‰æ•ˆçš„æ¨ç†ã€‚</strong>å‡ºäºè¿™ä¸ªåŸå› ï¼Œæœ‰äººæå‡ºä¸ºäº†<strong>ç¨€ç–æ€§</strong>è€Œæ”¾å¼ƒæŸäº›æµ‹é‡å€¼[24]ã€‚æ­¤å¤–ï¼Œç”±äºè¾¹ç¼˜åŒ–ï¼Œå›ºå®šæ»åå¹³æ»‘å™¨å…·æœ‰è¿‡æ»¤çš„éƒ¨åˆ†é—®é¢˜ï¼ˆä¸€è‡´æ€§ã€çº¿æ€§åŒ–è¯¯å·®çš„ç´¯ç§¯ï¼‰[18ã€22ã€26]ã€‚</p>
<h2 id="C-å®Œå…¨å¹³æ»‘"><a href="#C-å®Œå…¨å¹³æ»‘" class="headerlink" title="C. å®Œå…¨å¹³æ»‘"></a>C. å®Œå…¨å¹³æ»‘</h2><p>å®Œå…¨å¹³æ»‘ï¼ˆ$Full\ Smoothing$ï¼‰æ–¹æ³•<strong>é€šè¿‡è§£å†³å¤§å‹éçº¿æ€§ä¼˜åŒ–é—®é¢˜æ¥ä¼°è®¡çŠ¶æ€çš„æ•´ä¸ªå†å²</strong>ï¼ˆç›¸æœºè½¨è¿¹å’Œ 3D åœ°æ ‡ï¼‰[27-31]ã€‚å…¨å¹³æ»‘ä¿è¯äº†æœ€é«˜ç²¾åº¦ï¼›ç„¶è€Œï¼Œéšç€è½¨è¿¹å’Œåœ°å›¾éšç€æ—¶é—´çš„æ¨ç§»è€Œå¢é•¿ï¼Œå®æ—¶æ“ä½œå¾ˆå¿«å˜å¾—ä¸å¯è¡Œã€‚å› æ­¤ï¼Œå·²ç»æå‡ºä¸¢å¼ƒé™¤é€‰å®š<strong>å…³é”®å¸§</strong>ä¹‹å¤–çš„å¸§ [24, 32-34] æˆ–ä½¿ç”¨<strong>è·Ÿè¸ªå’Œå»ºå›¾åŒé‡æ¶æ„</strong> [20, 35] åœ¨å¹¶è¡Œçº¿ç¨‹ä¸­è¿è¡Œä¼˜åŒ–ã€‚ä¸€é¡¹çªç ´æ˜¯<strong>å¢é‡å¹³æ»‘æŠ€æœ¯</strong>ï¼ˆ$incremental\ smoothing\ techniques$ï¼‰ï¼ˆiSAM [36]ã€iSAM2 [3]ï¼‰çš„å‘å±•ï¼Œè¯¥æŠ€æœ¯<strong>åˆ©ç”¨å› å­å›¾çš„è¡¨è¾¾æ€§æ¥ä¿æŒç¨€ç–æ€§ï¼Œå¹¶ä»…è¯†åˆ«å’Œæ›´æ–°å—æ–°æµ‹é‡å½±å“çš„é€šå¸¸è¾ƒå°çš„å˜é‡å­é›†ã€‚</strong></p>
<p>å°½ç®¡å¦‚æ­¤ï¼Œé«˜é¢‘ç‡çš„æƒ¯æ€§æµ‹é‡ï¼ˆé€šå¸¸ä¸º $100 Hz$ è‡³ $1 kHz$ï¼‰ä»ç„¶å¯¹å¹³æ»‘æ–¹æ³•æ„æˆæŒ‘æˆ˜ã€‚ä¸€ä¸ªç®€å•çš„å®ç°éœ€è¦åœ¨æ¯æ¬¡ IMU æµ‹é‡æ—¶æ·»åŠ ä¸€ä¸ªæ–°çŠ¶æ€ï¼Œè¿™å¾ˆå¿«å°±ä¼šå˜å¾—éå¸¸æ…¢ [37]ã€‚å› æ­¤ï¼Œæƒ¯æ€§æµ‹é‡é€šå¸¸åœ¨å¸§ä¹‹é—´é›†æˆä»¥å½¢æˆç›¸å¯¹è¿åŠ¨çº¦æŸ[24,30,38-40]ã€‚<strong>å¯¹äºä¸¤å¸§ä¹‹é—´çš„æ ‡å‡† IMU é›†æˆï¼Œåˆå§‹æ¡ä»¶ç”±ç¬¬ä¸€å¸§çš„çŠ¶æ€ä¼°è®¡ç»™å‡ºã€‚</strong>å› æ­¤ï¼Œæƒ¯æ€§æµ‹é‡é€šå¸¸åœ¨å¸§ä¹‹é—´é›†æˆä»¥å½¢æˆç›¸å¯¹è¿åŠ¨çº¦æŸ[24,30,38-40]ã€‚å¯¹äºä¸¤å¸§ä¹‹é—´çš„æ ‡å‡† IMU ç§¯åˆ†ï¼Œåˆå§‹æ¡ä»¶ç”±ç¬¬ä¸€å¸§çš„çŠ¶æ€ä¼°è®¡ç»™å‡ºã€‚ç„¶è€Œï¼Œ<strong>åœ¨ä¼˜åŒ–çš„æ¯æ¬¡è¿­ä»£ä¸­ï¼ŒçŠ¶æ€ä¼°è®¡éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™éœ€è¦åœ¨æ‰€æœ‰å¸§ä¹‹é—´é‡å¤ IMU ç§¯åˆ†</strong>[24]ã€‚ Lupton å’Œ Sukkarieh [2] è¡¨æ˜ï¼Œ<strong>é€šè¿‡é‡æ–°å‚æ•°åŒ–ç›¸å¯¹è¿åŠ¨çº¦æŸå¯ä»¥é¿å…è¿™ç§é‡å¤ç§¯åˆ†ã€‚è¿™ç§é‡æ–°å‚æ•°åŒ–ç§°ä¸º IMU é¢„ç§¯åˆ†ã€‚</strong></p>
<p>åœ¨ç›®å‰çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä»¥å¼€åˆ›æ€§å·¥ä½œ [2] ä¸ºåŸºç¡€ï¼Œé€šè¿‡é€‚å½“<strong>è§£å†³æ—‹è½¬ç¾¤ SO(3) çš„æµå½¢ç»“æ„</strong>ï¼Œä½¿ IMU é¢„ç§¯åˆ†ç†è®ºèµ°å‘æˆç†Ÿã€‚å·¥ä½œ[2]é‡‡ç”¨æ¬§æ‹‰è§’ä½œä¸ºæ—‹è½¬çš„å…¨å±€å‚æ•°ã€‚åœ¨åˆšæ€§å˜æ¢çš„ä½œç”¨ä¸‹ï¼Œä½¿ç”¨æ¬§æ‹‰è§’å¹¶åº”ç”¨æ¬§å‡ é‡Œå¾—ç©ºé—´çš„é€šå¸¸å¹³å‡å’Œå¹³æ»‘æŠ€æœ¯è¿›è¡ŒçŠ¶æ€ä¼ æ’­å’Œåæ–¹å·®ä¼°è®¡å¹¶ä¸å…·æœ‰ä¸å˜æ€§[41, 42]ã€‚æ­¤å¤–ï¼Œæ¬§æ‹‰è§’å…·æœ‰å¥‡å¼‚æ€§ã€‚æˆ‘ä»¬çš„ç ”ç©¶ï¼Œå¦ä¸€æ–¹é¢ï¼Œæä¾›äº†ä¸€ä¸ªæ­£å¼çš„æ—‹è½¬æµ‹é‡çš„è¡¨ç¤ºï¼ˆå’Œå¯¹åº”å™ªå£°ï¼‰ï¼Œå¹¶æä¾›äº†å®Œæ•´çš„æœ€å¤§åéªŒä¼°è®¡é‡çš„æ¨å¯¼ã€‚æˆ‘ä»¬è¿˜æ¨å¯¼å‡ºé›…å¯æ¯”çŸ©é˜µçš„è§£æè¡¨è¾¾å¼ï¼ˆä¼˜åŒ–æ‰€éœ€ï¼‰ï¼Œæ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œè¿™äº›è¡¨è¾¾å¼ä»¥å‰æ²¡æœ‰åœ¨æ–‡çŒ®ä¸­æŠ¥é“è¿‡ã€‚åœ¨å®éªŒéƒ¨åˆ†ï¼Œæˆ‘ä»¬è¡¨æ˜æ—‹è½¬æµå½¢çš„æ­£ç¡®è¡¨ç¤ºä¼šå¯¼è‡´æ›´é«˜çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ï¼Œä»è€Œæ¯”åŸå§‹æè®® [2] å¸¦æ¥åˆ‡å®çš„ä¼˜åŠ¿ã€‚</p>
<h1 id="ä¸‰ã€é¢„å¤‡çŸ¥è¯†"><a href="#ä¸‰ã€é¢„å¤‡çŸ¥è¯†" class="headerlink" title="ä¸‰ã€é¢„å¤‡çŸ¥è¯†"></a>ä¸‰ã€é¢„å¤‡çŸ¥è¯†</h1><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ ¹æ® MAP ä¼°è®¡æ¥åˆ¶å®š VIOã€‚åœ¨æˆ‘ä»¬çš„æ¨¡å‹ä¸­ï¼ŒMAP ä¼°è®¡ä¼šå¯¼è‡´éçº¿æ€§ä¼˜åŒ–é—®é¢˜ï¼Œè¯¥é—®é¢˜æ¶‰åŠå­˜åœ¨äº<strong>å¹³æ»‘æµå½¢</strong>ä¸Šçš„é‡ï¼ˆä¾‹å¦‚ï¼Œæ—‹è½¬ã€å§¿åŠ¿ï¼‰ã€‚å› æ­¤ï¼Œåœ¨æ·±å…¥ç ”ç©¶ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬æ–¹ä¾¿åœ°å›é¡¾ä¸€äº›æœ‰ç”¨çš„å‡ ä½•æ¦‚å¿µã€‚ä¸“å®¶è¯»è€…å¯ä»¥è·³è¿‡æœ¬èŠ‚ã€‚</p>
<p>æˆ‘ä»¬å°†æœ¬èŠ‚ç»“æ„å¦‚ä¸‹ï¼šç¬¬ III-A èŠ‚æä¾›äº†ä¸ä¸¤ä¸ªä¸»è¦<strong>é»æ›¼æµå½¢</strong>ç›¸å…³çš„æœ‰ç”¨æ¦‚å¿µï¼š<strong>ç‰¹æ®Šæ­£äº¤ç¾¤</strong> $SO(3)$ å’Œ<strong>ç‰¹æ®Šæ¬§å‡ é‡Œå¾—ç¾¤</strong>$ SE(3)$ã€‚æˆ‘ä»¬çš„ä»‹ç»åŸºäº [43, 44]ã€‚ç¬¬ III-B èŠ‚æè¿°äº†ä¸€ä¸ªåˆé€‚çš„æ¨¡å‹æ¥æè¿°$ SO(3) $ä¸­çš„ä¸ç¡®å®šæ—‹è½¬ã€‚ç¬¬ III-C èŠ‚æ ¹æ®æ ‡å‡†å‚è€ƒæ–‡çŒ® [45] å›é¡¾äº†æµå½¢ä¸Šçš„ä¼˜åŒ–ã€‚</p>
<h2 id="A-é»æ›¼å‡ ä½•çš„æ¦‚å¿µ"><a href="#A-é»æ›¼å‡ ä½•çš„æ¦‚å¿µ" class="headerlink" title="A. é»æ›¼å‡ ä½•çš„æ¦‚å¿µ"></a>A. é»æ›¼å‡ ä½•çš„æ¦‚å¿µ</h2><p>a) ç‰¹æ®Šæ­£äº¤ç¾¤ï¼šSO(3) æè¿°äº†ä¸€ç»„ 3D æ—‹è½¬çŸ©é˜µï¼Œæ­£å¼å®šä¹‰ä¸º$SO(3)\doteq \{R\in\mathbb{R}^{3\times3}:R^TR=I,\det(R)=1\}.$ç¾¤è¿ç®—å°±æ˜¯é€šå¸¸çš„çŸ©é˜µä¹˜æ³•ï¼Œé€†è¿ç®—å°±æ˜¯çŸ©é˜µè½¬ç½®ã€‚ç¾¤ $ SO(3) $ä¹Ÿå½¢æˆä¸€ä¸ª<strong>å…‰æ»‘çš„æµå½¢</strong>ã€‚æµå½¢ï¼ˆæ’ç­‰å¼ï¼‰çš„<strong>åˆ‡çº¿ç©ºé—´è¡¨ç¤º</strong>ä¸º $\mathfrak{so}(3)$ï¼Œä¹Ÿç§°ä¸º<strong>æä»£æ•°</strong>ï¼Œä¸ $3\times3$ æ–œå¯¹ç§°çŸ©é˜µçš„ç©ºé—´é‡åˆã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨$hat$ç®—å­åœ¨ R3 ä¸­ç”¨ä¸€ä¸ªå‘é‡è¯†åˆ«æ¯ä¸ªå€¾æ–œå¯¹ç§°çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
w^{\land}=\begin{bmatrix}w_1\\w_2\\w_3\end{bmatrix}^{\land}=
\begin{bmatrix}0&-w_3&w_2\\w_3&0&-w_1\\-w_2&w_1&0\end{bmatrix}\in\mathfrak{so}(3).\tag{1}</script><p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ $vee $ç®—å­$(\cdot)^{\lor}$ å°†æ–œå¯¹ç§°çŸ©é˜µæ˜ å°„åˆ°$\mathbb{R}^3 $ä¸­çš„å‘é‡ï¼šå¯¹äº<strong>æ–œå¯¹ç§°çŸ©é˜µ</strong> $S= Ï‰^{\land}$ï¼Œ$vee $ ç®—å­ä½¿å¾— $S^{\lor}= Ï‰$ã€‚ç¨åå°†æœ‰ç”¨çš„æ–œå¯¹ç§°çŸ©é˜µçš„å±æ€§æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
a^{\land}b=-b^{\land}a,\forall a,b\in\mathbb{R}^3.\tag{2}</script><p><strong>æŒ‡æ•°æ˜ å°„</strong>ï¼ˆæ’ç­‰å¼ï¼‰$ \exp : \mathfrak{so}(3)\rightarrow SO(3)$å°†æä»£æ•°çš„ä¸€ä¸ªå…ƒç´ ä¸æ—‹è½¬ç›¸å…³è”ï¼Œå¹¶ä¸æ ‡å‡†çŸ©é˜µæŒ‡æ•°ï¼ˆç½—å¾·é‡Œæ ¼æ–¯å…¬å¼ï¼‰ä¸€è‡´ï¼š</p>
<script type="math/tex; mode=display">
\exp(\phi)^{\land}=I+\frac{\sin(\parallel\phi\parallel)}{\parallel\phi\parallel}\phi^{\land}+
\frac{1-\cos(\parallel\phi\parallel)}{\parallel\phi\parallel}(\phi^{\land})^2.\tag{3}</script><p>æˆ‘ä»¬ç¨åå°†ä½¿ç”¨çš„æŒ‡æ•°æ˜ å°„çš„ä¸€é˜¶è¿‘ä¼¼æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
\exp(\phi)^{\land}\approx I+\phi^{\land}.\tag{4}</script><p><strong>å¯¹æ•°æ˜ å°„</strong>ï¼ˆæ’ç­‰å¼ï¼‰å°† $SO(3)$ ä¸­çš„çŸ©é˜µ $R\ne I $ä¸æ–œå¯¹ç§°çŸ©é˜µç›¸å…³è”ï¼š</p>
<script type="math/tex; mode=display">
\log(R)=\frac{\varphi\cdot(R-R^T)}{2\sin(\varphi)},\varphi=\cos^{-1}(\frac{\tr(R)-1}{2}).\tag{5}</script><p>æ³¨æ„$ \log(R)^{\lor}= a\varphi$ï¼Œå…¶ä¸­ $a $å’Œ $\varphi $åˆ†åˆ«æ˜¯ $R$ çš„æ—‹è½¬è½´å’Œæ—‹è½¬è§’åº¦ã€‚å¦‚æœ $R = I$ï¼Œåˆ™ $\varphi= 0 $ï¼Œå¹¶ä¸” $a$ æ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤å¯ä»¥ä»»æ„é€‰æ‹©ã€‚</p>
<p>å¦‚æœé™åˆ¶åœ¨ä¸€ä¸ªå¼€æ”¾çš„çƒå†…$\parallel\phi\parallel&lt;\pi$ï¼Œ<strong>æŒ‡æ•°æ˜ å°„</strong>æ˜¯<strong>åŒå°„</strong>ï¼Œå¯¹åº”çš„é€†æ˜¯<strong>å¯¹æ•°æ˜ å°„</strong>ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä¸é™åˆ¶å®šä¹‰åŸŸï¼ŒæŒ‡æ•°æ˜ å°„å°±ä¼šå˜æˆ<strong>æ»¡å°„</strong>çš„ï¼Œå› ä¸ºæ¯ä¸ªå‘é‡$ \phi= (\varphi + 2k\pi)a, k \in \mathbb{Z}$ å°†æ˜¯ $R$ çš„ä¸€ä¸ªå¯å®¹è®¸å¯¹æ•°ã€‚</p>
<p><img src="/images/ã€æ–‡çŒ®é˜…è¯»ã€‘On-Manifold-Preintegration-for-Real-Time-Visual-Inertial-Odometry/image-20220507100016617.png" alt="image-20220507100016617"></p>
<p>ä¸ºäº†ç¬¦å·æ–¹ä¾¿ï¼Œæˆ‘ä»¬é‡‡ç”¨æŒ‡æ•°å’Œå¯¹æ•°å›¾çš„â€œçŸ¢é‡åŒ–â€ç‰ˆæœ¬ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
Exp&:\ \mathbb{R}^3\rightarrow SO(3)\ ;\ \phi\mapsto \exp(\phi^{\land})\\
Log&:\ SO(3)\rightarrow \mathbb{R}^3\ ;\ R\mapsto \log(R)^{\lor}
\end{align*}\tag{6}</script><p>å®ƒç›´æ¥å¯¹å‘é‡è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯å¯¹$ \mathfrak{so}(3) $ä¸­çš„æ–œå¯¹ç§°çŸ©é˜µè¿›è¡Œæ“ä½œã€‚</p>
<p>ç¨åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹ä¸€é˜¶è¿‘ä¼¼ï¼š</p>
<script type="math/tex; mode=display">
Exp(\phi+\delta\phi)\approx Exp(\phi)\ Exp(J_r(\phi)\delta\phi).\tag{7}</script><p>$J_r(\phi)$æ˜¯$SO(3)$ [43, p.40] çš„å³é›…å¯æ¯”è¡Œåˆ—å¼ï¼Œå¹¶å°†åˆ‡çº¿ç©ºé—´ä¸­çš„åŠ æ³•å¢é‡ä¸å³ä¾§åº”ç”¨çš„ä¹˜æ³•å¢é‡ç›¸å…³è”ï¼ˆå›¾ 1ï¼‰ï¼š</p>
<script type="math/tex; mode=display">
J_r(\phi)=I-\frac{1-\cos(\parallel\phi\parallel)}{\parallel\phi\parallel^2}\phi^{\land}+
\frac{\parallel\phi\parallel-\sin(\parallel\phi\parallel)}{\parallel\phi^3\parallel}(\phi^{\land})^2.\tag{8}</script><p><img src="/images/ã€æ–‡çŒ®é˜…è¯»ã€‘On-Manifold-Preintegration-for-Real-Time-Visual-Inertial-Odometry/image-20220507102404953.png" alt="image-20220507102404953" style="zoom: 50%;" /></p>
<blockquote>
<p>å›¾ 1ï¼šå³é›…å¯æ¯”$ J_r $å°†åˆ‡çº¿ç©ºé—´ä¸­çš„åŠ æ€§å¾®æ‰° $\delta\phi$ ä¸æµå½¢$ SO(3)$ ä¸Šçš„ä¹˜æ€§å¾®æ‰°è”ç³»èµ·æ¥ï¼Œå¦‚æ–¹ç¨‹ã€‚ (7)ã€‚</p>
</blockquote>
<p>ç±»ä¼¼çš„ä¸€é˜¶è¿‘ä¼¼é€‚ç”¨äºå¯¹æ•°ï¼š</p>
<script type="math/tex; mode=display">
Log(Exp(\phi)\ Exp(\delta\phi))\approx\phi+J_r^{-1}(\phi)\delta\phi.\tag{9}</script><p>å³é›…å¯æ¯”è¡Œåˆ—å¼çš„å€’æ•°æ˜¯:</p>
<script type="math/tex; mode=display">
\begin{align*}
J_r^{-1}=I+\frac{1}{2}\phi^{\land}+
\left(\frac{1}{\parallel\phi\parallel^2}+\frac{1+\cos(\parallel\phi\parallel)}{2\parallel\phi\parallel\sin(\parallel\phi\parallel)}
\right)(\phi^{\land})^2,
\end{align*}</script><p>å½“$\parallel\phi\parallel= 0$ æ—¶ï¼Œå³é›…å¯æ¯” $J_r(\phi)$ åŠå…¶é€†$J_r^{-1}(\phi)$ç®€åŒ–ä¸ºå•ä½çŸ©é˜µã€‚</p>
<p>æŒ‡æ•°æ˜ å°„çš„å¦ä¸€ä¸ªæœ‰ç”¨å±æ€§æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&R \ Exp(\phi)R^T=\exp(R\phi^{\land}R^T)=Exp(R\phi)\tag{10} \\
 &\Leftrightarrow Exp(\phi)R=RExp(R^T\phi)\tag{11}
\end{align*}</script><p>b) ç‰¹æ®Šæ¬§å‡ é‡Œå¾—ç¾¤ï¼š$SE(3)$ æè¿°äº† $3D$ ä¸­åˆšä½“è¿åŠ¨çš„ç¾¤ï¼Œæ˜¯ $SO(3)$ å’Œ $\mathbb{R}^3 $çš„åŠç›´ç§¯ï¼Œå®šä¹‰ä¸º $SE(3) \doteq \{(R, p ) : R \in SO(3), p \in\mathbb{R}^3\}$ã€‚ç»™å®š $T_1, T_2 âˆˆ SE(3)$ï¼Œç»„è¿ç®—ä¸º$ T_1 \cdot T_2 = (R_1R_2 , p_1 + R_1p_2)$ï¼Œé€†è¿ç®—ä¸º$ T_1^{-1} = (R^T_1 , âˆ’R^T_1 p_1)$ã€‚ $SE(3)$çš„æŒ‡æ•°æ˜ å°„å’Œå¯¹æ•°æ˜ å°„åœ¨ [44] ä¸­å®šä¹‰ã€‚ä½†æ˜¯ï¼Œæœ¬æ–‡ä¸éœ€è¦è¿™äº›ï¼ŒåŸå› å°†åœ¨ç¬¬ III-C èŠ‚ä¸­æ˜ç¡®è¯´æ˜ã€‚</p>
<h2 id="B-SO-3-ä¸­çš„ä¸ç¡®å®šæ€§æè¿°"><a href="#B-SO-3-ä¸­çš„ä¸ç¡®å®šæ€§æè¿°" class="headerlink" title="B. SO(3) ä¸­çš„ä¸ç¡®å®šæ€§æè¿°"></a>B. SO(3) ä¸­çš„ä¸ç¡®å®šæ€§æè¿°</h2><p>$SO(3)$ä¸­ä¸ç¡®å®šæ€§çš„è‡ªç„¶å®šä¹‰æ˜¯å®šä¹‰åˆ‡çº¿ç©ºé—´ä¸­çš„åˆ†å¸ƒï¼Œç„¶åé€šè¿‡æŒ‡æ•°æ˜ å°„$(6)$[44, 46, 47] å°†å…¶æ˜ å°„åˆ°$ SO(3)$ï¼š</p>
<script type="math/tex; mode=display">
\tilde{R}=R\ Exp(\epsilon),\epsilon \sim\mathcal{N}(0,\Sigma),\tag{12}</script><p>å…¶ä¸­ $R$æ˜¯ç»™å®šçš„æ— å™ªå£°æ—‹è½¬ï¼ˆå¹³å‡å€¼ï¼‰å¹¶ä¸”$\epsilon$æ˜¯ä¸€ä¸ªå°çš„æ­£æ€åˆ†å¸ƒæ‰°åŠ¨ï¼Œå‡å€¼ä¸ºé›¶ï¼Œåæ–¹å·®ä¸º$\Sigma$ã€‚</p>
<p>ä¸ºäº†è·å¾— $R$åˆ†å¸ƒçš„æ˜¾å¼è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬ä»$\mathbb{R}^3$ä¸­é«˜æ–¯åˆ†å¸ƒçš„ç§¯åˆ†å¼€å§‹ï¼š</p>
<script type="math/tex; mode=display">
\int_{\mathbb{R}^3}p(\epsilon)d\epsilon=\int_{\mathbb{R}^3}\alpha e^{-\frac{1}{2}\parallel\epsilon\parallel^2_{\Sigma} }d\epsilon=1,\tag{13}</script><p>å…¶ä¸­$ \alpha= 1/\sqrt{(2\pi)^3 \det(\Sigma)} $ï¼Œ $\parallel\epsilon\parallel^2_{\Sigma}\doteq\epsilon^T\Sigma^{-1}\epsilon$æ˜¯å…·æœ‰åæ–¹å·® $\Sigma$ çš„å¹³æ–¹<strong>é©¬æ°è·ç¦»</strong>ã€‚ç„¶åï¼Œåº”ç”¨åæ ‡çš„å˜åŒ–$\epsilon = Log(R^{âˆ’1}\tilde{R})$ ï¼ˆå½“$ \parallel\epsilon\parallel&lt;\pi$ æ—¶ï¼Œè¿™æ˜¯ $(12)$ çš„å€’æ•°ï¼‰ï¼Œç§¯åˆ† $(13)$ å˜ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\int_{SO(3)}\beta(\tilde{R})e^{
-\frac{1}{2} \parallel Log(R^{-1}\tilde{R}) \parallel^2_{\Sigma}
}d\tilde{R}=1,\tag{14}</script><p>å…¶ä¸­ $\beta(\tilde{R})$æ˜¯å½’ä¸€åŒ–å› å­ã€‚å½’ä¸€åŒ–å› å­çš„å½¢å¼ä¸º $\beta(\tilde{R})= Î±/|\det\left(\mathcal{J} (\tilde{R})\right)|$ï¼Œå…¶ä¸­$ \mathcal{J} (\tilde{R}) \doteq J_r( Log(R^{-1}\tilde{R})) $ï¼Œå¹¶ä¸”$ J_r(Â·)$ æ˜¯å³é›…å¯æ¯”è¡Œåˆ—å¼ $(8)$ï¼›$\mathcal{J} (\tilde{R})$ æ˜¯å˜é‡å˜åŒ–çš„å‰¯äº§å“ï¼Œæ¨å¯¼å‚è§ [46]ã€‚</p>
<p>æ ¹æ®$ (14) $çš„è®ºç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¯»å– $SO(3)$ ä¸­çš„â€œé«˜æ–¯â€åˆ†å¸ƒï¼š</p>
<script type="math/tex; mode=display">
p(\tilde{R})=\beta(\tilde{R})e^{
-\frac{1}{2} \parallel Log(R^{-1}\tilde{R}) \parallel^2_{\Sigma} }.\tag{15}</script><p>å¯¹äºå°çš„åæ–¹å·®ï¼Œæˆ‘ä»¬å¯ä»¥é€¼è¿‘$ Î²\simeqÎ±$ï¼Œå› ä¸ºå½“æ¥$\tilde{R}$è¿‘ $R$ æ—¶ï¼Œ$J_r( Log(R^{-1}\tilde{R}))$ å¯ä»¥å¾ˆå¥½åœ°ç”±å•ä½çŸ©é˜µé€¼è¿‘ã€‚è¯·æ³¨æ„ï¼Œ$(14)$ å·²ç»å‡è®¾åæ–¹å·® $\Sigma$ç›¸å¯¹è¾ƒå°ï¼Œå› ä¸ºå®ƒâ€œå‰ªè£â€äº†åŠå¾„ä¸º $\pi$çš„å¼€æ”¾çƒä¹‹å¤–çš„æ¦‚ç‡å°¾éƒ¨ï¼ˆè¿™æ˜¯ç”±äºé‡æ–°å‚æ•°åŒ–$\epsilon = Log(R^{âˆ’1}\tilde{R})$ï¼Œå°† $\epsilon $é™åˆ¶ä¸º $\parallel\epsilon\parallel &lt; \pi$ï¼‰ã€‚å°†$ Î²$ è¿‘ä¼¼ä¸ºä¸€ä¸ªå¸¸æ•°ï¼Œç»™å®šä¸€ä¸ªå¦‚$(15)$ä¸­åˆ†å¸ƒçš„æµ‹é‡å€¼$\tilde{R}$ï¼Œæ—‹è½¬ $R$ çš„è´Ÿå¯¹æ•°ä¼¼ç„¶æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
\mathcal{L}(R)=\frac{1}{2}\parallel Log(R^{âˆ’1}\tilde{R}) \parallel^2_{\Sigma}+const=
\frac{1}{2}\parallel Log(\tilde{R}^{âˆ’1}R) \parallel^2_{\Sigma}+const.\tag{16}</script><p>å‡ ä½•ä¸Šå¯ä»¥è§£é‡Šä¸ºç”±é€†ä¸ç¡®å®šæ€§$Î£^{-1}$åŠ æƒçš„$\tilde{R}$å’Œ$R$ä¹‹é—´çš„å¹³æ–¹è§’ï¼ˆ$SO(3)$ä¸­çš„æµ‹åœ°çº¿è·ç¦»ï¼‰ã€‚</p>
<h2 id="C-æµå½¢ä¸Šçš„é«˜æ–¯-ç‰›é¡¿æ³•"><a href="#C-æµå½¢ä¸Šçš„é«˜æ–¯-ç‰›é¡¿æ³•" class="headerlink" title="C. æµå½¢ä¸Šçš„é«˜æ–¯-ç‰›é¡¿æ³•"></a>C. æµå½¢ä¸Šçš„é«˜æ–¯-ç‰›é¡¿æ³•</h2><p>æ¬§å‡ é‡Œå¾—ç©ºé—´ä¸­çš„æ ‡å‡†é«˜æ–¯-ç‰›é¡¿æ–¹æ³•é€šè¿‡åå¤ä¼˜åŒ–ï¼ˆé€šå¸¸ä¸ºéå‡¸çš„ï¼‰ç›®æ ‡å‡½æ•°çš„äºŒæ¬¡è¿‘ä¼¼æ¥å·¥ä½œã€‚æ±‚è§£äºŒæ¬¡è¿‘ä¼¼ç®€åŒ–ä¸ºæ±‚è§£ä¸€ç»„çº¿æ€§æ–¹ç¨‹ï¼ˆæ­£è§„æ–¹ç¨‹ï¼‰ï¼Œå¹¶ä¸”è¿™ä¸ªå±€éƒ¨è¿‘ä¼¼çš„è§£ç”¨äºæ›´æ–°å½“å‰ä¼°è®¡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹å¦‚ä½•å°†è¿™ç§æ–¹æ³•æ‰©å±•åˆ°ï¼ˆæ— çº¦æŸçš„ï¼‰ä¼˜åŒ–é—®é¢˜ï¼Œå…¶å˜é‡å±äºæŸä¸ªæµå½¢ $\mathcal{M}$ã€‚è®©æˆ‘ä»¬è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–é—®é¢˜ï¼š</p>
<p>è®©æˆ‘ä»¬è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–é—®é¢˜ï¼š</p>
<script type="math/tex; mode=display">
\underset{x\in\mathcal{M} }{\min}f(x),\tag{17}</script><p>å…¶ä¸­å˜é‡ $x$ å±äºæµå½¢$\mathcal{M}$ï¼›ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨ $(17)$ ä¸­è€ƒè™‘å•ä¸ªå˜é‡ï¼Œè€Œæè¿°å¾ˆå®¹æ˜“æ¨å¹¿åˆ°å¤šä¸ªå˜é‡ã€‚</p>
<p>ä¸æ¬§å‡ é‡Œå¾—æƒ…å†µç›¸åï¼Œä¸èƒ½ç›´æ¥å°† $(17) $è¿‘ä¼¼ä¸º $x$ çš„äºŒæ¬¡å‡½æ•°ã€‚è¿™æ˜¯ç”±äºä¸¤ä¸ªä¸»è¦åŸå› ã€‚é¦–å…ˆï¼Œç›´æ¥åœ¨ $x$ä¸Šå·¥ä½œä¼šå¯¼è‡´é—®é¢˜çš„è¿‡åº¦å‚æ•°åŒ–ï¼ˆä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯¹å…·æœ‰ $9$ ä¸ªå…ƒç´ çš„æ—‹è½¬çŸ©é˜µè¿›è¡Œå‚æ•°åŒ–ï¼Œè€Œ $3D$ æ—‹è½¬å®Œå…¨ç”± $\mathbb{R}^3$ä¸­çš„å‘é‡å®šä¹‰ï¼‰ï¼Œè¿™ä¼šä½¿æ­£è§„æ–¹ç¨‹ä¸ç¡®å®šï¼Œå…¶æ¬¡ï¼Œæ‰€å¾—è¿‘ä¼¼çš„è§£ä¸€èˆ¬ä¸å±äº $\mathcal{M}$ã€‚</p>
<p>æµå½¢ä¼˜åŒ–çš„æ ‡å‡†æ–¹æ³• [45, 48] åŒ…æ‹¬å®šä¹‰<strong>å›ç¼©</strong>ï¼ˆ$retraction$ï¼‰$ \mathcal{R}_x$ï¼Œå®ƒæ˜¯åˆ‡çº¿ç©ºé—´ï¼ˆåœ¨$ x$ å¤„ï¼‰çš„å…ƒç´  $\delta x$ å’Œ $x \in\mathcal{M} $çš„é‚»åŸŸä¹‹é—´çš„<strong>åŒå°„æ˜ å°„</strong>ã€‚ä½¿ç”¨å›ç¼©ï¼ˆ$retraction$ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„é—®é¢˜é‡æ–°å‚æ•°åŒ–å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\underset{x\in\mathcal{M} }{\min}f(x)  \Longrightarrow \underset{\delta x\in\mathbb{R}^n }{\min}f(\mathcal{R}_x(\delta x)).\tag{18}</script><p>é‡æ–°å‚æ•°åŒ–é€šå¸¸ç§°ä¸º<strong>æå‡</strong>ï¼ˆ$lifting$ï¼‰ [45]ã€‚ç²—ç•¥åœ°è¯´ï¼Œæˆ‘ä»¬åœ¨å½“å‰ä¼°è®¡å®šä¹‰çš„åˆ‡ç©ºé—´ä¸­å·¥ä½œï¼Œè¯¥ç©ºé—´åœ¨å±€éƒ¨è¡¨ç°ä¸ºæ¬§å‡ é‡Œå¾—ç©ºé—´ã€‚ä½¿ç”¨<strong>å›ç¼©</strong>ï¼ˆ$retraction$ï¼‰å…è®¸åœ¨åˆé€‚ç»´åº¦çš„æ¬§å‡ é‡Œå¾·ç©ºé—´ä¸Šæ„å»ºä¼˜åŒ–é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬åœ¨ $SO(3) $ä¸­å·¥ä½œæ—¶ï¼Œ$\delta x âˆˆ \mathbb{R}^3$ï¼‰ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥å°†æ ‡å‡†ä¼˜åŒ–æŠ€æœ¯åº”ç”¨äº $(18) $å³ä¾§çš„é—®é¢˜ã€‚åœ¨ Gauss-Newton æ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬å°†å½“å‰ä¼°è®¡çš„æˆæœ¬å¹³æ–¹ã€‚ç„¶åæˆ‘ä»¬æ±‚è§£äºŒæ¬¡é€¼è¿‘å¾—åˆ°ä¸€ä¸ªå‘é‡$\delta x^{\star}$åœ¨åˆ‡çº¿ç©ºé—´ã€‚æœ€åï¼Œæµå½¢ä¸Šçš„å½“å‰çŒœæµ‹è¢«æ›´æ–°ä¸º:</p>
<script type="math/tex; mode=display">
\hat{x}\leftarrow \mathcal{R}_{\hat{x} }(\delta x^{\star}).\tag{19}</script><p>è¿™ç§â€œlift-solve-retractâ€æ–¹æ¡ˆå¯ä»¥æ¨å¹¿åˆ°ä»»ä½•ä¿¡ä»»åŒºåŸŸæ–¹æ³•[45]ã€‚æ­¤å¤–ï¼Œå®ƒæä¾›äº†é”™è¯¯çŠ¶æ€æ¨¡å‹çš„åŸºç¡€å’Œç»Ÿä¸€æ¦‚æ‹¬ï¼Œè¯¥æ¨¡å‹é€šå¸¸ç”¨äºèˆªç©ºèˆªå¤©æ–‡çŒ®ä¸­çš„è¿‡æ»¤[49]ï¼Œæœ€è¿‘åœ¨æœºå™¨äººæŠ€æœ¯ä¸­ç”¨äºä¼˜åŒ–[23, 34]ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡è®¨è®º<strong>å›ç¼©</strong>ï¼ˆ$retraction$ï¼‰$ \mathcal{R}_x$çš„é€‰æ‹©æ¥ç»“æŸæœ¬èŠ‚ã€‚ä¸€ä¸ªå¯èƒ½çš„<strong>å›ç¼©</strong>ï¼ˆ$retraction$ï¼‰æ˜¯æŒ‡æ•°æ˜ å°„ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨è®¡ç®—ä¸Šï¼Œè¿™å¯èƒ½ä¸æ˜¯æœ€æ–¹ä¾¿çš„é€‰æ‹©ï¼Œå‚è§ [50]ã€‚</p>
<p>è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¯¹ $SO(3)$ ä½¿ç”¨ä»¥ä¸‹<strong>å›ç¼©</strong>ï¼ˆ$retraction$ï¼‰ï¼Œ</p>
<script type="math/tex; mode=display">
\mathcal{R}_R(\phi)=R\ Exp(\delta\phi),\ \ \delta\phi\in\mathbb{R}^3,\tag{20}</script><p>å¯¹äº$SE(3)$ï¼Œæˆ‘ä»¬ä½¿ç”¨$ T \doteq(R, p) $å¤„çš„<strong>å›ç¼©</strong>ï¼ˆ$retraction$ï¼‰ï¼š</p>
<script type="math/tex; mode=display">
\mathcal{R}_T(\delta\phi,\delta p)=(R\ Exp(\delta\phi),p+R\delta p),\ \ [\delta\phi\ \delta p]\in\mathbb{R}^6,\tag{21}</script><p>è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨ç¬¬ III-A èŠ‚ä¸­æˆ‘ä»¬åªå®šä¹‰äº† $SO(3)$ çš„æŒ‡æ•°æ˜ å°„ï¼šé€šè¿‡è¿™ç§<strong>å›ç¼©</strong>ï¼ˆ$retraction$ï¼‰é€‰æ‹©ï¼Œæˆ‘ä»¬æ°¸è¿œä¸éœ€è¦è®¡ç®— SE(3) çš„æŒ‡æ•°æ˜ å°„ã€‚</p>
<h1 id="å››ã€æœ€å¤§åéªŒè§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡"><a href="#å››ã€æœ€å¤§åéªŒè§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡" class="headerlink" title="å››ã€æœ€å¤§åéªŒè§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡"></a>å››ã€æœ€å¤§åéªŒè§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡</h1><p>æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªVIOé—®é¢˜ï¼Œå…¶ä¸­æˆ‘ä»¬æƒ³è·Ÿè¸ªä¸€ä¸ª<strong>æ„ŸçŸ¥ç³»ç»Ÿ</strong>ï¼ˆ$sensing\ system$ï¼‰ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªè‡ªä¸»æœºå™¨äººï¼Œä¸€ä¸ªUAVï¼Œæˆ–è€…ä¸€ä¸ªæ‰‹æŒè®¾å¤‡ï¼‰çš„çŠ¶æ€ï¼Œå…¶è£…å¤‡ä¸€ä¸ªIMUå’Œä¸€ä¸ªå•ç›®ç›¸æœºã€‚æˆ‘ä»¬å‡è®¾IMUåæ ‡ç³»â€œBâ€å’Œæˆ‘ä»¬æƒ³è¦è·Ÿè¸ªçš„èº«ä½“åæ ‡ç³»é‡åˆï¼Œç›¸æœºå’ŒIMUä¹‹é—´çš„å˜æ¢æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”é€šè¿‡ä¹‹å‰çš„æ ‡å®šå·²ç»çŸ¥é“ï¼ˆè§å›¾2ï¼‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å‡è®¾ä¸€ä¸ªå‰ç«¯æä¾›åœ¨æœªçŸ¥ä½ç½®çš„3Dè·¯æ ‡çš„å›¾ç‰‡æµ‹é‡ã€‚å‰ç«¯è¿˜é€‰æ‹©ä¸€ç»„å›¾ç‰‡ï¼Œç§°ä¸º<strong>å…³é”®å¸§</strong>[32]ï¼Œæˆ‘ä»¬æƒ³è®¡ç®—å®ƒçš„ä½å§¿ä¼°è®¡ã€‚ç¬¬7èŠ‚-B1è®¨è®ºäº†åº”ç”¨ï¼ŒåŒ…æ‹¬æˆ‘ä»¬å®éªŒçš„å‰ç«¯é€‰æ‹©ã€‚</p>
<p><img src="/images/ã€æ–‡çŒ®é˜…è¯»ã€‘On-Manifold-Preintegration-for-Real-Time-Visual-Inertial-Odometry/image-20220507153228526.png" alt="image-20220507153228526" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ 2ï¼š$T_{WB}\doteq  (R_{WB}, _\mathrm{W}\mathbf{p})$ æ˜¯Bodyåæ ‡ç³»ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³» $W$çš„ä½å§¿ã€‚æˆ‘ä»¬å‡è®¾Bodyåæ ‡ä¸ IMU åæ ‡ç³»é‡åˆã€‚ $T_{BC}$ æ˜¯ç›¸æœºåœ¨Bodyåæ ‡ä¸­çš„ä½å§¿ï¼Œç”±å…ˆéªŒæ ‡å®šå·²çŸ¥ã€‚</p>
</blockquote>
<h2 id="A-çŠ¶æ€"><a href="#A-çŠ¶æ€" class="headerlink" title="A. çŠ¶æ€"></a>A. çŠ¶æ€</h2><p>ç³»ç»Ÿåœ¨æ—¶é—´ $i $çš„çŠ¶æ€ç”± IMU æ–¹å‘ã€ä½ç½®ã€é€Ÿåº¦å’Œåå·®æè¿°ï¼š</p>
<script type="math/tex; mode=display">
\mathrm{x}_i\doteq    [R_i,\mathbf{p}_i,\mathbf{v}_i,\mathbf{b}_i].\tag{22}</script><p>å§¿æ€ $(R_i,\mathbf{p}_i)$å±äº$ SE(3)$ï¼Œè€Œé€Ÿåº¦å­˜åœ¨äºå‘é‡ç©ºé—´ä¸­ï¼Œå³ $\mathbf{v}_i \in \mathbb{R}^3$ã€‚ IMU åå·®å¯ä»¥å†™ä¸º $\mathbf{b}_i = [\mathbf{b}_i^g\ \ \mathbf{b}_i^a] \in \mathbb{R}^6$ï¼Œå…¶ä¸­ $\mathbf{b}_i^g\ , \mathbf{b}_i^a\in \mathbb{R}^3 $åˆ†åˆ«æ˜¯é™€èºä»ªå’ŒåŠ é€Ÿåº¦è®¡åå·®ã€‚</p>
<p>ä»¤ $\mathcal{K}_k$ è¡¨ç¤ºç›´åˆ°æ—¶é—´ $k$ çš„æ‰€æœ‰å…³é”®å¸§çš„é›†åˆã€‚åœ¨æˆ‘ä»¬çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¼°è®¡æ‰€æœ‰å…³é”®å¸§çš„çŠ¶æ€ï¼š</p>
<script type="math/tex; mode=display">
\mathcal{X}_k\doteq    \{\mathrm{x}_i\}_{i\in\mathcal{K_k} }.\tag{23}</script><p>åœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†<strong>æ— ç»“æ„</strong>çš„æ–¹æ³•ï¼ˆå‚è§ç¬¬ VII èŠ‚ï¼‰ï¼Œå› æ­¤ 3D åœ°æ ‡ä¸æ˜¯è¦ä¼°è®¡çš„å˜é‡ã€‚ä½†æ˜¯ï¼Œæå‡ºçš„æ–¹æ³•å¯ä»¥æ¨å¹¿åˆ°ä¸€èˆ¬æ–¹æ³•æ¥ä¼°è®¡è·¯æ ‡å’Œç›¸æœºå†…å‚ä»¥åŠå¤–å‚ã€‚</p>
<h2 id="B-æµ‹é‡"><a href="#B-æµ‹é‡" class="headerlink" title="B. æµ‹é‡"></a>B. æµ‹é‡</h2><p>æˆ‘ä»¬ä¼°è®¡é—®é¢˜çš„<strong>è¾“å…¥æ˜¯æ¥è‡ªç›¸æœºå’Œ IMU çš„æµ‹é‡å€¼</strong>ã€‚æˆ‘ä»¬ç”¨ $\mathcal{C}_i$è¡¨ç¤ºå…³é”®å¸§$i$å¤„çš„å›¾åƒæµ‹é‡å€¼ã€‚åœ¨æ—¶é—´ $i$ï¼Œç›¸æœºå¯ä»¥è§‚å¯Ÿåˆ°å¤šä¸ªåœ°æ ‡ $l$ï¼Œå› æ­¤ $\mathcal{C}_i$åŒ…å«å¤šä¸ªå›¾åƒæµ‹é‡å€¼ $\mathrm{z}_{il}$ã€‚æˆ‘ä»¬ç¨å¾®æ»¥ç”¨ç¬¦å·ï¼Œæˆ‘ä»¬è®° $ l \in \mathcal{C}_i$ ä¸ºåœ¨ $i$ æ—¶åˆ»çœ‹åˆ°åœ°æ ‡ $l$ ã€‚</p>
<p>æˆ‘ä»¬ç”¨ $\mathcal{I}_{ij}$ è¡¨ç¤ºåœ¨ä¸¤ä¸ªè¿ç»­å…³é”®å¸§ $i$ å’Œ $j$ ä¹‹é—´è·å¾—çš„<strong>ä¸€ç»„ IMU æµ‹é‡å€¼</strong>ã€‚æ ¹æ® IMU æµ‹é‡é€Ÿç‡å’Œæ‰€é€‰å…³é”®å¸§çš„é¢‘ç‡ï¼Œæ¯ä¸ªé›†åˆ $\mathcal{I}_{ij}$ å¯ä»¥åŒ…å«ä»å°‘é‡åˆ°æ•°ç™¾ä¸ª IMU æµ‹é‡å€¼ã€‚åˆ°æ—¶é—´ $k$ æ”¶é›†çš„æµ‹é‡å€¼é›†æ˜¯:</p>
<script type="math/tex; mode=display">
\mathcal{Z}_k\doteq\{\mathcal{C}_i,\mathcal{I}_{ij}\}_{(i,j)\in\mathcal{K}_k}.\tag{24}</script><h2 id="C-å› å­å›¾å’Œ-MAP-ä¼°è®¡"><a href="#C-å› å­å›¾å’Œ-MAP-ä¼°è®¡" class="headerlink" title="C. å› å­å›¾å’Œ MAP ä¼°è®¡"></a>C. å› å­å›¾å’Œ MAP ä¼°è®¡</h2><p>ç»™å®šå¯ç”¨çš„è§†è§‰å’Œæƒ¯æ€§æµ‹é‡ $\mathcal{Z}_k$ å’Œå…ˆéªŒ $p(\mathcal{X}_0)$ï¼Œå˜é‡ $\mathcal{X}_k$ çš„åéªŒæ¦‚ç‡ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p(\mathcal{X}_k|\mathcal{Z}_k)&\propto p(\mathcal{X}_0)\ p(\mathcal{X}_k|\mathcal{Z}_k)\overset{(a)}{=}p(\mathcal{X}_0)\prod_{(i,j)\in\mathcal{K}_k}p(\mathcal{C}_i,\mathcal{I}_{ij}|\mathcal{X}_k)\\
&\overset{(b)}{=}
p(\mathcal{X}_0)\prod_{(i,j)\in\mathcal{K}_k}p(\mathcal{I}_{ij}|\mathrm{x}_i,\mathrm{x}_j)
\prod_{i\in\mathcal{K}_k}\prod_{l\in\mathcal{C}_i}p(\mathrm{z}_{il}|\mathrm{x}_i)
\end{align*}\tag{25}</script><p>åˆ†è§£ $(a)$ å’Œ $(b)$ éµå¾ªæµ‹é‡ä¹‹é—´çš„æ ‡å‡†ç‹¬ç«‹å‡è®¾ã€‚æ­¤å¤–ï¼Œé©¬å°”å¯å¤«å±æ€§åº”ç”¨äº$(b)$ï¼ˆä¾‹å¦‚ï¼Œæ—¶é—´ $i$ çš„å›¾åƒæµ‹é‡ä»…å–å†³äºæ—¶é—´ $i$ çš„çŠ¶æ€ï¼‰ã€‚</p>
<p>ç”±äºæµ‹é‡å€¼ $\mathcal{Z}_k$ æ˜¯å·²çŸ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±åœ°å°†å®ƒä»¬ä½œä¸ºå˜é‡æ¶ˆé™¤ï¼Œå¹¶å°†å®ƒä»¬è§†ä¸º<strong>å®é™…æœªçŸ¥æ•°çš„è”åˆæ¦‚ç‡å› å­</strong>çš„å‚æ•°ã€‚è¿™è‡ªç„¶ä¼šå¯¼è‡´ä¼—æ‰€å‘¨çŸ¥çš„å› å­å›¾è¡¨ç¤ºï¼Œè¿™æ˜¯ä¸€ç±»å¯ç”¨äºè¡¨ç¤ºè¿™ç§å› å­å¯†åº¦çš„<strong>äºŒåˆ†å›¾æ¨¡å‹</strong> [51, 52]ã€‚å›¾ 3 ç»™å‡ºäº† VIO é—®é¢˜èƒŒåçš„å› å­å›¾çš„è¿é€šæ€§ç¤ºæ„å›¾ï¼ˆæ— ç»“æ„è§†è§‰å› å­çš„è¿é€šæ€§å°†åœ¨ç¬¬ VII èŠ‚ä¸­é˜æ˜ï¼‰ã€‚<strong>å› å­å›¾</strong>ç”±<strong>æœªçŸ¥æ•°èŠ‚ç‚¹</strong>å’Œå®šä¹‰åœ¨å…¶ä¸Šçš„<strong>æ¦‚ç‡å› å­èŠ‚ç‚¹</strong>ç»„æˆï¼Œ<strong>å›¾ç»“æ„è¡¨ç¤ºæ¯ä¸ªå› å­æ¶‰åŠå“ªäº›æœªçŸ¥æ•°</strong>ã€‚</p>
<p><img src="/images/ã€æ–‡çŒ®é˜…è¯»ã€‘On-Manifold-Preintegration-for-Real-Time-Visual-Inertial-Odometry/image-20220507162306950.png" alt="image-20220507162306950"></p>
<blockquote>
<p>å›¾ 3ï¼šå·¦ï¼šVIO ä¸­çš„è§†è§‰å’Œæƒ¯æ€§æµ‹é‡ã€‚å³å›¾ï¼šå› å­å›¾ï¼Œå…¶ä¸­å‡ ä¸ª IMU æµ‹é‡å€¼æ±‡æ€»åœ¨å•ä¸ªé¢„ç§¯åˆ† IMU å› å­ä¸­ï¼Œæ— ç»“æ„è§†è§‰å› å­çº¦æŸå…³é”®å¸§è§‚å¯Ÿç›¸åŒçš„åœ°æ ‡ã€‚</p>
</blockquote>
<p>MAP ä¼°è®¡ $\mathcal{X}_k^{\star}$ å¯¹åº”äº $(25)$ çš„æœ€å¤§å€¼ï¼Œæˆ–è€…ç­‰æ•ˆåœ°ï¼Œè´Ÿå¯¹æ•°åéªŒçš„æœ€å°å€¼ã€‚åœ¨é›¶å‡å€¼é«˜æ–¯å™ªå£°çš„å‡è®¾ä¸‹ï¼Œ<strong>è´Ÿå¯¹æ•°åéªŒ</strong>å¯ä»¥å†™ä¸º<strong>æ®‹å·®å¹³æ–¹å’Œ</strong>ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathcal{X}_k^{\star}&\doteq\arg\underset{\mathcal{X}_k}{\min}-\log_ep(\mathcal{X}_k|\mathcal{Z}_k)\\
&=\arg\underset{\mathcal{X}_k}{\min}\parallel r_0 \parallel^2_{\Sigma_0}+
\sum_{(i,j)\in\mathcal{K}_k}\parallel r_{\mathcal{I}_{ij} } \parallel^2_{\Sigma_{ij} }
+\sum_{i\in\mathcal{K}_k}\sum_{j\in\mathcal{C}_i}\parallel r_{\mathcal{C}_{il} } \parallel^2_{\Sigma_{\mathcal{C} } }
\end{align*}\tag{26}</script><p>å…¶ä¸­ $r_0,r_{\mathcal{I}_{ij} },r_{\mathcal{C}_{il} }$ æ˜¯ä¸æµ‹é‡ç›¸å…³çš„<strong>æ®‹å·®</strong>ï¼Œè€Œ $\Sigma_0,\Sigma_{ij} $å’Œ $\Sigma_{\mathcal{C} }$ æ˜¯ç›¸åº”çš„<strong>åæ–¹å·®çŸ©é˜µ</strong>ã€‚ç²—ç•¥åœ°è¯´ï¼Œæ®‹å·®æ˜¯ $\mathcal{X}_k$ çš„å‡½æ•°ï¼Œå…¶åœ¨ç»™å®šçŠ¶æ€ $\mathcal{X}_k$ å’Œå…ˆéªŒçš„å‰æä¸‹ï¼Œé‡åŒ–æµ‹é‡å€¼å’Œé¢„æµ‹å€¼çš„å·®ã€‚ä»¥ä¸‹éƒ¨åˆ†çš„ç›®æ ‡æ˜¯æä¾›æ®‹å·®å’Œåæ–¹å·®çš„è¡¨è¾¾å¼ã€‚</p>
<h1 id="äº”ã€IMUæ¨¡å‹ä¸è¿åŠ¨ç§¯åˆ†"><a href="#äº”ã€IMUæ¨¡å‹ä¸è¿åŠ¨ç§¯åˆ†" class="headerlink" title="äº”ã€IMUæ¨¡å‹ä¸è¿åŠ¨ç§¯åˆ†"></a>äº”ã€IMUæ¨¡å‹ä¸è¿åŠ¨ç§¯åˆ†</h1><p>IMU é€šå¸¸åŒ…æ‹¬ä¸€ä¸ª 3 è½´åŠ é€Ÿåº¦è®¡å’Œä¸€ä¸ª 3 è½´é™€èºä»ªï¼Œï¼Œå¹¶å…è®¸æˆ‘ä»¬æ¥æµ‹é‡ä¼ æ„Ÿå™¨ç›¸å¯¹ä¸€ä¸ªæƒ¯æ€§åæ ‡ç³»çš„æ—‹è½¬é€Ÿåº¦å’ŒåŠ é€Ÿåº¦ã€‚æµ‹é‡å€¼ï¼Œå³ $_B\tilde{a}(t)$ å’Œ $_B\tilde{w}_{WB}(t)$ï¼Œå—åŠ æ€§ç™½å™ªå£° $\eta$ å’Œç¼“æ…¢å˜åŒ–çš„ä¼ æ„Ÿå™¨åå·® $\mathbf{b}$ çš„å½±å“ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
_\mathrm{B}\tilde{\omega}_{\mathrm{WB} }(t)&= \ _\mathrm{B}\omega_{\mathrm{WB} }(t)+\mathbf{b}^g(t)+\mathbf{\eta}^g(t)\tag{27}\\
_\mathrm{B}\tilde{a}(t)&=R^T_{\mathrm{WB} }(t)(\ _\mathrm{W}\mathbf{a}(t)-\ _\mathrm{W}\mathbf{g})+\mathbf{b}^a(t)+\mathbf{\eta}^a(t)\tag{28}
\end{align*}</script><p>åœ¨æˆ‘ä»¬çš„ç¬¦å·ä¸­ï¼Œå‰ç¼€ $\mathrm{B}$ è¡¨ç¤ºç›¸åº”çš„é‡åœ¨åæ ‡ç³»ä¸­ $\mathrm{B}$ è¡¨ç¤ºï¼ˆå‚è§å›¾ 2ï¼‰ã€‚ IMU çš„ä½å§¿ç”±å˜æ¢ $\{R_\mathrm{WB},\ _\mathrm{W}p\}$ æè¿°ï¼Œè¯¥å˜æ¢å°†ä¼ æ„Ÿå™¨åæ ‡ç³» $\mathrm{B}$ ä¸­çš„ä¸€ä¸ªç‚¹æ˜ å°„åˆ° $\mathrm{W}$ ã€‚å‘é‡ $ \ _\mathrm{B}\omega_{\mathrm{WB} }(t)\in \mathbb{R}^3$ æ˜¯åæ ‡ç³» $\mathrm{B}$ ä¸­è¡¨ç¤ºçš„ $\mathrm{B}$ ç›¸å¯¹äº $\mathrm{W}$ çš„<strong>ç¬æ—¶è§’é€Ÿåº¦</strong>ï¼Œè€Œ$\ _\mathrm{W}\mathbf{a}(t)\in \mathbb{R}^3$æ˜¯ä¼ æ„Ÿå™¨çš„<strong>åŠ é€Ÿåº¦</strong>ï¼› $\ _\mathrm{W}\mathbf{g}$ æ˜¯ä¸–ç•Œåæ ‡ä¸­çš„<strong>é‡åŠ›åŠ é€Ÿåº¦</strong>ã€‚æˆ‘ä»¬å¿½ç•¥äº†åœ°çƒè‡ªè½¬çš„å½±å“ï¼Œè¿™ç›¸å½“äºå‡è®¾ $\mathrm{W}$ æ˜¯ä¸€ä¸ªæƒ¯æ€§ç³»ã€‚</p>
<p>ç°åœ¨çš„ç›®æ ‡æ˜¯ä» IMU æµ‹é‡ä¸­æ¨æ–­ç³»ç»Ÿçš„è¿åŠ¨ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä»¥ä¸‹è¿åŠ¨å­¦æ¨¡å‹ [49, 53]ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot{R}_\mathrm{WB}&={R}_\mathrm{WB}\ _B{\omega}^{\land}_\mathrm{WB}\\
_\mathrm{W}\dot{\mathbf{v} }&=\ _\mathrm{W}\mathbf{a}\\
_\mathrm{W}\dot{\mathbf{p} }&=\ _\mathrm{W}\mathbf{v}
\end{align*}\tag{29}</script><p>å®ƒæè¿°äº† $\mathrm{B}$ çš„å§¿åŠ¿å’Œé€Ÿåº¦çš„æ¼”å˜ã€‚</p>
<p> $t + \Delta t $æ—¶åˆ»çš„çŠ¶æ€æ˜¯é€šè¿‡ç§¯åˆ†æ–¹ç¨‹$(29)$è·å¾—çš„ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
{R}_\mathrm{WB}(t + \Delta t )&={R}_\mathrm{WB}(t)Exp\left(\int^{t + \Delta t }_t
\ _B{\omega}_\mathrm{WB}(\tau)d\tau\right) \\
_\mathrm{W}\mathbf{v}(t + \Delta t)&=\ _\mathrm{W}\mathbf{v}(t)+ \int^{t + \Delta t }_t\  _\mathrm{W}\mathbf{a}(\tau)d\tau\\
_\mathrm{W}\mathbf{p}(t + \Delta t)&=\ _\mathrm{W}\mathbf{p}(t)+\int^{t + \Delta t }_t\  _\mathrm{W}\mathbf{v}(\tau)d\tau+\iint^{t + \Delta t }_t\  _\mathrm{W}\mathbf{a}(\tau)d\tau^2
\end{align*}</script><p>å‡è®¾ $\ _\mathrm{W}\mathbf{a}$ å’Œ $ \ _\mathrm{B}\omega_{\mathrm{WB} }(t)$ åœ¨æ—¶é—´é—´éš” $[t, t + \Delta t]$ å†…ä¿æŒä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
{R}_\mathrm{WB}(t + \Delta t )&={R}_\mathrm{WB}(t)Exp\left(
\ _B{\omega}_\mathrm{WB}(t)\Delta t\right) \\
_\mathrm{W}\mathbf{v}(t + \Delta t)&=\ _\mathrm{W}\mathbf{v}(t)+\ _\mathrm{W}\mathbf{a}(t)\Delta t\\
_\mathrm{W}\mathbf{p}(t + \Delta t)&=\ _\mathrm{W}\mathbf{p}(t)+\  _\mathrm{W}\mathbf{v}(t)\Delta t+\frac{1}{2}\  _\mathrm{W}\mathbf{a}(t)\Delta t^2
\end{align*}\tag{30}</script><p>ä½¿ç”¨æ–¹ç¨‹å¼ã€‚ (27)â€“(28)ï¼Œæˆ‘ä»¬å¯ä»¥å°†  $\ _\mathrm{W}\mathbf{a}$ å’Œ $ \ _\mathrm{B}\omega_{\mathrm{WB} }(t)$  å†™ä¸º IMU æµ‹é‡çš„å‡½æ•°ï¼Œå› æ­¤ (30) å˜ä¸º:</p>
<script type="math/tex; mode=display">
\begin{align*}
{R}(t + \Delta t )&={R}(t)Exp\left(
\ (\tilde{\omega}(t)-\mathbf{b}^g(t)-\mathbf{\eta}^{gd}(t))
\Delta t\right) \\
\mathbf{v}(t + \Delta t)&=\ \mathbf{v}(t)+\mathbf{g}\Delta t+\ R(t)(\tilde{\mathbf{a} }(t)-\mathbf{b}^a(t)-\mathbf{\eta}^{ad}(t))\Delta t\\
\mathbf{p}(t + \Delta t)&=\ \mathbf{p}(t)+\  \mathbf{v}(t)\Delta t+\frac{1}{2}\  \mathbf{g}\Delta t^2+\frac{1}{2}R(t)(\tilde{\mathbf{a} }(t)-\mathbf{b}^a(t)-\mathbf{\eta}^{ad}(t))\Delta t^2
\end{align*}\tag{31}</script><p>ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œæˆ‘ä»¬åˆ é™¤äº†åæ ‡ç³»ä¸‹æ ‡ï¼ˆä»ç°åœ¨å¼€å§‹ï¼Œç¬¦å·åº”è¯¥æ˜¯æ˜ç¡®çš„ï¼‰ã€‚é€Ÿåº¦å’Œä½ç½®çš„è¿™ç§æ•°å€¼ç§¯åˆ†å‡å®šä¸¤ä¸ªæµ‹é‡ä¹‹é—´ $R(t)$æ˜¯å¸¸æ•°ï¼Œå¯¹äºå…·æœ‰éé›¶æ—‹è½¬é€Ÿç‡çš„æµ‹é‡ï¼Œè¿™ä¸æ˜¯å¾®åˆ†æ–¹ç¨‹ $(29)$ çš„ç²¾ç¡®è§£ã€‚åœ¨å®è·µä¸­ï¼Œä½¿ç”¨é«˜é€ŸIMU å¯ä»¥å‡è½»è¿™ç§è¿‘ä¼¼çš„å½±å“ã€‚æˆ‘ä»¬é‡‡ç”¨ $(31)$ çš„ç§¯åˆ†æ–¹æ¡ˆï¼Œ<strong>å› ä¸ºå®ƒç®€å•ï¼Œä¸”å¯¹äºå»ºæ¨¡å’Œä¸ç¡®å®šæ€§ä¼ æ’­æ˜¯ç»å¾—èµ·æ£€éªŒçš„ã€‚</strong>è™½ç„¶æˆ‘ä»¬è¡¨æ˜è¿™ç§ç§¯åˆ†æ–¹æ¡ˆåœ¨å®è·µä¸­è¡¨ç°éå¸¸å¥½ï¼Œä½†æˆ‘ä»¬æ³¨æ„åˆ°å¯¹äºè¾ƒæ…¢çš„ IMU æµ‹é‡é€Ÿç‡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨é«˜é˜¶æ•°å€¼ç§¯åˆ†æ–¹æ³• [54-57]ã€‚</p>
<p>ç¦»æ•£æ—¶é—´å™ªå£° $\eta^{gd}$ çš„åæ–¹å·®æ˜¯é‡‡æ ·ç‡çš„å‡½æ•°ï¼Œå¹¶ä¸”é€šè¿‡ $Cov(\eta^{gd}(t)) = \frac{1}{\Delta t}Cov(\eta^{g}(t))$ ä¸è¿ç»­æ—¶é—´é¢‘è°±å™ªå£° $\eta^{g}$ ç›¸å…³ã€‚åŒæ ·çš„å…³ç³»ä¹Ÿé€‚ç”¨äº $\eta^{ad}$ï¼ˆå‚è§ [58, é™„å½•]ï¼‰ã€‚</p>
<h1 id="å…­ã€-æµå½¢ä¸Šçš„IMUé¢„ç§¯åˆ†"><a href="#å…­ã€-æµå½¢ä¸Šçš„IMUé¢„ç§¯åˆ†" class="headerlink" title="å…­ã€ æµå½¢ä¸Šçš„IMUé¢„ç§¯åˆ†"></a>å…­ã€ æµå½¢ä¸Šçš„IMUé¢„ç§¯åˆ†</h1><p>è™½ç„¶ç­‰å¼ $(31)$  å¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«è§†ä¸ºå› å­å›¾ä¸­çš„æ¦‚ç‡çº¦æŸï¼Œå®ƒéœ€è¦åœ¨å› å­å›¾ä¸­ä»¥é«˜é€Ÿç‡åŒ…å«çŠ¶æ€ã€‚ç›´è§‚åœ°è¯´ï¼Œæ–¹ç¨‹ã€‚ $(31)$  å°†æ—¶é—´ $t$ å’Œ $t + \Delta t$ çš„çŠ¶æ€å…³è”èµ·æ¥ï¼Œå…¶ä¸­ $\Delta t$ æ˜¯ IMU çš„é‡‡æ ·å‘¨æœŸã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ¯æ¬¡æ–°çš„ IMU æµ‹é‡æ—¶åœ¨ä¼°è®¡ä¸­æ·»åŠ æ–°çŠ¶æ€ [37]ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å±•ç¤ºäº†åœ¨æ—¶é—´ $k = i$ å’Œ $k = j$ï¼ˆè§å›¾ 4ï¼‰çš„ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´çš„æ‰€æœ‰æµ‹é‡å€¼å¯ä»¥æ€»ç»“ä¸ºå•ä¸ªå¤åˆæµ‹é‡å€¼ï¼Œç§°ä¸ºé¢„ç§¯åˆ† IMU æµ‹é‡å€¼ï¼Œå®ƒé™åˆ¶äº†è¿ç»­å…³é”®å¸§ä¹‹é—´çš„è¿åŠ¨ã€‚è¿™ä¸ªæ¦‚å¿µæœ€åˆæ˜¯åœ¨ [2] ä¸­ä½¿ç”¨æ¬§æ‹‰è§’æå‡ºçš„ï¼Œæˆ‘ä»¬é€šè¿‡å¼€å‘ä¸€ç§é€‚ç”¨äºæµå½¢ $SO(3)$ ä¸Šçš„é¢„ç§¯åˆ†çš„ç†è®ºæ¥æ‰©å±•å®ƒã€‚</p>
<p><img src="/images/ã€æ–‡çŒ®é˜…è¯»ã€‘On-Manifold-Preintegration-for-Real-Time-Visual-Inertial-Odometry/image-20220507202527649.png" alt="image-20220507202527649"></p>
<blockquote>
<p>å›¾ 4ï¼šIMU å’Œç›¸æœºçš„ä¸åŒé€Ÿç‡ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å‡è®¾ IMU ä¸ç›¸æœºåŒæ­¥ï¼Œå¹¶åœ¨ç¦»æ•£æ—¶é—´ $k$ å¤„æä¾›æµ‹é‡å€¼ï¼ˆå‚è§å›¾ 4ï¼‰ã€‚åœ¨æ—¶é—´ $k = i$ å’Œ $k= j$ å¤„å¯¹ä¸¤ä¸ªè¿ç»­å…³é”®å¸§ä¹‹é—´çš„æ‰€æœ‰ $\Delta t$ é—´éš”è¿­ä»£ä½¿ç”¨ IMU ç§¯åˆ† (31)ï¼Œæˆ‘ä»¬å‘ç°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
{R}_j&={R}_i\prod^{j-1}_{k=i} Exp\left(
 (\tilde{\omega}_k-\mathbf{b}^g_k-\mathbf{\eta}^{gd}_k)
\Delta t\right) \\
\mathbf{v}_j&=\ \mathbf{v}_i+\mathbf{g}\Delta t_{ij}+\ \prod^{j-1}_{k=i}R_k(\tilde{\mathbf{a} }_k-\mathbf{b}^a_k-\mathbf{\eta}^{ad}_k)\Delta t\\
\mathbf{p}_j&=\mathbf{p}_i+\sum^{j-1}_{k=i}\left[\  \mathbf{v}(t)\Delta t+\frac{1}{2}\  \mathbf{g}\Delta t^2+\frac{1}{2}R_k(\tilde{\mathbf{a} }_k-\mathbf{b}^a_k-\mathbf{\eta}^{ad}_k)\Delta t^2\right] 
\end{align*}\tag{32}</script><p>ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œæˆ‘ä»¬å¼•å…¥äº†ç®€å†™ $\Delta t_{ij} \doteq  \sum^{jâˆ’1}_{k=i} \Delta t$ å’Œ $(Â·)_i \doteq (Â·)(t_i)$ã€‚è™½ç„¶ç­‰å¼ã€‚ $(32)$ å·²ç»æä¾›äº†æ—¶é—´ $t_i$ å’Œ $t_j$ ä¹‹é—´è¿åŠ¨çš„ä¼°è®¡ï¼Œå®ƒçš„ç¼ºç‚¹æ˜¯ï¼Œåªè¦æ—¶é—´ $t_i$  çš„çº¿æ€§åŒ–ç‚¹å‘ç”Ÿå˜åŒ–ï¼Œå°±å¿…é¡»é‡å¤ $(32)$ ä¸­çš„ç§¯åˆ† [24]ï¼ˆç›´è§‚åœ°è¯´ï¼Œæ—‹è½¬ $R_i$ çš„å˜åŒ–ï¼Œæ„å‘³ç€æ‰€æœ‰æœªæ¥æ—‹è½¬ $R_kã€k = i,â€¦,j-1$ çš„å˜åŒ–ï¼Œå› æ­¤æœ‰å¿…è¦é‡æ–°è¯„ä¼° $(32)$ ä¸­çš„æ±‚å’Œå’Œä¹˜ç§¯ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›é¿å…åœ¨æ—¶é—´ $t_i$ çš„çº¿æ€§åŒ–ç‚¹å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°è®¡ç®—ä¸Šè¿°ç§¯åˆ†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éµå¾ª [2] å¹¶å®šä¹‰ä»¥ä¸‹ç›¸å¯¹è¿åŠ¨å¢é‡ï¼Œè¿™äº›å¢é‡ä¸ $t_i$ å¤„çš„ä½å§¿å’Œé€Ÿåº¦æ— å…³:</p>
<script type="math/tex; mode=display">
\begin{align*}
\Delta{R}_{ij}&\doteq{R}^T_iR_j\prod^{j-1}_{k=i} Exp\left(
 (\tilde{\omega}_k-\mathbf{b}^g_k-\mathbf{\eta}^{gd}_k)
\Delta t\right) \\
\Delta\mathbf{v}_{ij}&\doteq{R}^T_i(\mathbf{v}_j-\mathbf{v}_i-\mathbf{g}\Delta t_{ij})\ = \sum^{j-1}_{k=i}\Delta R_{ij}(\tilde{\mathbf{a} }_k-\mathbf{b}^a_k-\mathbf{\eta}^{ad}_k)\Delta t\\
\Delta\mathbf{p}_{ij}&\doteq{R}^T_i(\mathbf{p}_j-\mathbf{p}_i-\mathbf{v}_i\Delta t_{ij}-\frac{1}{2}\sum^{j-1}_{k=i}\mathbf{g}\Delta t^2)\\
&=\sum^{j-1}_{k=i}\left[\  \mathbf{v}_{ik}\Delta t+\frac{1}{2}\Delta R_{ik}(\tilde{\mathbf{a} }_k-\mathbf{b}^a_k-\mathbf{\eta}^{ad}_k)\Delta t^2\right] 
\end{align*}\tag{33}</script><p>å…¶ä¸­ $\Delta{R}_{ik}\doteq R^T_i R_k $ å’Œ $\Delta\mathbf{v}_{ik} \doteq R^T_i (\mathbf{v}_{k}âˆ’\mathbf{v}_{i}âˆ’\mathbf{g}\Delta t_{ik})$ã€‚æˆ‘ä»¬å¼ºè°ƒï¼Œä¸â€œdeltaâ€æ—‹è½¬ $\Delta{R}_{ij}$ ç›¸æ¯”ï¼Œ $\Delta\mathbf{v}_{ij}$  å’Œ $\Delta\mathbf{p}_{ij}$éƒ½ä¸å¯¹åº”äºé€Ÿåº¦å’Œä½ç½®çš„çœŸå®ç‰©ç†å˜åŒ–ï¼Œè€Œæ˜¯ä»¥ä¸€ç§æ–¹å¼å®šä¹‰çš„ï¼Œä½¿å¾— $(33)$ çš„å³ä¾§ç‹¬ç«‹äºæ—¶é—´ $i$ çš„çŠ¶æ€ä»¥åŠå¼•åŠ›æ•ˆåº”ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿç›´æ¥ä»ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´çš„æƒ¯æ€§æµ‹é‡ä¸­è®¡ç®— $(33)$ çš„å³ä¾§ã€‚</p>
<p>ä¸å¹¸çš„æ˜¯ï¼Œ$(33)$ ä¸­çš„æ±‚å’Œå’Œä¹˜ç§¯ä»ç„¶æ˜¯åå·®ä¼°è®¡çš„å‡½æ•°ã€‚æˆ‘ä»¬åˆ†ä¸¤æ­¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨ç¬¬ VI-A èŠ‚ä¸­ï¼Œæˆ‘ä»¬å‡è®¾$\mathbf{b}_{i}$ æ˜¯å·²çŸ¥çš„ï¼›ç„¶åï¼Œåœ¨ç¬¬ VI-C èŠ‚ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•åœ¨åå·®ä¼°è®¡å‘ç”Ÿå˜åŒ–æ—¶é¿å…é‡å¤ç§¯åˆ†ã€‚</p>
<p>åœ¨æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å‡è®¾ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´çš„åå·®ä¿æŒä¸å˜ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{b}^g_{i}=\mathbf{b}^g_{i+1}=Â·Â·Â·=\mathbf{b}^g_{j-1},\ \ \ \ 
\mathbf{b}^a_{i}=\mathbf{b}^a_{i+1}=Â·Â·Â·=\mathbf{b}^a_{j-1}.
\tag{34}</script><h2 id="A-é¢„ç§¯åˆ†-IMU-æµ‹é‡"><a href="#A-é¢„ç§¯åˆ†-IMU-æµ‹é‡" class="headerlink" title="A. é¢„ç§¯åˆ† IMU æµ‹é‡"></a>A. é¢„ç§¯åˆ† IMU æµ‹é‡</h2><p>ç­‰å¼ $(33)$ å°†å…³é”®å¸§ $i$ å’Œ $j$ çš„çŠ¶æ€ï¼ˆå·¦ä¾§ï¼‰ä¸æµ‹é‡å€¼ï¼ˆå³ä¾§ï¼‰ç›¸å…³è”ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œå®ƒå·²ç»å¯ä»¥ç†è§£ä¸ºä¸€ç§æµ‹é‡æ¨¡å‹ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒå¯¹æµ‹é‡å™ªå£°æœ‰ç›¸å½“å¤æ‚çš„ä¾èµ–æ€§ï¼Œè¿™ä½¿å¾— MAP ä¼°è®¡çš„ç›´æ¥åº”ç”¨å˜å¾—å¤æ‚ã€‚ç›´è§‚åœ°è¯´ï¼ŒMAP ä¼°è®¡å™¨éœ€è¦æ¸…æ¥šåœ°å®šä¹‰æµ‹é‡çš„å¯†åº¦ï¼ˆåŠå…¶å¯¹æ•°ä¼¼ç„¶ï¼‰ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¿®æ”¹ $(33)$  ä»¥ä¾¿æ›´å®¹æ˜“æ¨å¯¼æµ‹é‡å¯¹æ•°ä¼¼ç„¶ã€‚åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬åœ¨ $(33)$ ä¸­éš”ç¦»äº†å•ä¸ªæƒ¯æ€§æµ‹é‡çš„å™ªå£°é¡¹ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œåœ¨æœ¬èŠ‚ä¸­ï¼Œå‡è®¾æ—¶é—´ $t_i$ çš„åå·®æ˜¯å·²çŸ¥çš„ã€‚</p>
<p>è®©æˆ‘ä»¬ä» $(33)$ ä¸­çš„æ—‹è½¬å¢é‡ $\Delta{R}_{ij}$ å¼€å§‹ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€é˜¶è¿‘ä¼¼ $(7)$ï¼ˆæ—‹è½¬å™ªå£°â€œå°â€ï¼‰å¹¶é‡æ–°æ’åˆ—æœ¯è¯­ï¼Œé€šè¿‡ä½¿ç”¨å…³ç³»$(11)$å°†å™ªå£°â€œç§»åŠ¨â€åˆ°æœ«å°¾ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Delta{R}_{ij} &\overset{eq.(7)}{\simeq}\prod^{j-1}_{k=i}\left[
Exp((\tilde{\omega}_k-\mathbf{b}^g_i)\Delta t)
Exp(-J^k_r\eta^{gd}_k\Delta t)\right]\\
&\overset{eq.(11)}{\simeq}\Delta{\tilde R}_{ij}\prod^{j-1}_{k=i}Exp(-\Delta \tilde R^T_{k+1 j} J^k_r \eta^{gd}_k \Delta t)\\
&\doteq    \Delta{\tilde R}_{ij}Exp(-\delta \phi_{ij})    
\end{align*}\tag{35}</script><p>å…¶ä¸­ï¼Œ$J^k_r \doteq J^k_r(( \tilde\omega_k âˆ’ b^g_i )Î”t)$ã€‚åœ¨ $(35)$ çš„æœ€åä¸€è¡Œï¼Œæˆ‘ä»¬å®šä¹‰äº†é¢„ç§¯åˆ†æ—‹è½¬æµ‹é‡ $\Delta{\tilde R}_{ij} \doteq \prod^{jâˆ’1}_{k=i} Exp (( \tilde\omega_k âˆ’ b^g_i) Î”t)$ï¼ŒåŠå…¶å™ªå£° $\delta\phi_{ij}$ï¼Œå°†åœ¨ä¸‹ä¸€èŠ‚ä¸­åˆ†æã€‚</p>
<p>å°† $(35)$ ä»£å› $(33)$ ä¸­ $\Delta\mathbf{v}_{ij}$ çš„è¡¨è¾¾å¼ï¼Œä½¿ç”¨ $Exp(-\delta \phi_{ij})    $ çš„ä¸€é˜¶è¿‘ä¼¼ $(4)$ï¼Œå¹¶å»æ‰é«˜é˜¶å™ªå£°é¡¹ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Delta\mathbf{v}_{ij} &\overset{eq.(4)}{\simeq}\sum^{j-1}_{k=i}\Delta{\tilde R}_{ik}(I-\delta\phi^{\land}_{ik})(\tilde{\mathbf{a} }_{k}-\mathbf{b}^a_i)\Delta t -\Delta{\tilde R}_{ik}\eta^{gd}_k\Delta t\\
&\overset{eq.(2)}{\simeq}\Delta\tilde{\mathbf{v} }_{ij}+\sum^{j-1}_{k=i}\left[
\Delta{\tilde R}_{ik}(\tilde{\mathbf{a} }_{k}-\mathbf{b}^a_i)^{\land}\delta\phi_{ik}\Delta t - \Delta{\tilde R}_{ik}\eta^{ad}_k\Delta t
\right]\\
&\doteq    \Delta\tilde{\mathbf{v} }_{ij}-\delta\mathbf{v}_{ij}
\end{align*}\tag{36}</script><p>å…¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†é¢„ç§¯åˆ†é€Ÿåº¦æµ‹é‡ $\Delta\tilde{\mathbf{v} }_{ij}\doteq\sum^{j-1}_{k=i}<br>\Delta{\tilde R}_{ik}(\tilde{\mathbf{a} }_{k}-\mathbf{b}^a_i)^{\land}\Delta t $åŠå…¶å™ªå£° $\delta\mathbf{v}_{ij}$ã€‚</p>
<p>ç±»ä¼¼åœ°ï¼Œå°†$(35)$ å’Œ$(36)$ ä»£å…¥$(33)$ ä¸­çš„ $\Delta\mathbf{p}_{ij}$ è¡¨è¾¾å¼ï¼Œå¹¶ä½¿ç”¨ä¸€é˜¶è¿‘ä¼¼ $(4)$ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Delta\mathbf{p}_{ij} &\overset{eq.(4)}{\simeq}\sum^{j-1}_{k=i}\left[
(\Delta\tilde{\mathbf{v} }_{ik}-\delta\mathbf{v}_{ik})\Delta t+\frac{1}{2}
\Delta{\tilde R}_{ik}(I-\delta\phi^{\land}_{ik})(\tilde{\mathbf{a} }_{k}-\mathbf{b}^a_i)\Delta t^2 -\frac{1}{2}\Delta{\tilde R}_{ik}\eta^{ad}_k\Delta t^2 \right]\\
&\overset{eq.(2)}{\simeq}\Delta\tilde{\mathbf{p} }_{ij}+\sum^{j-1}_{k=i}\left[
-\delta\mathbf{v}_{ik}\Delta t+
\frac{1}{2}\Delta{\tilde R}_{ik}(\tilde{\mathbf{a} }_{k}-\mathbf{b}^a_i)^{\land}\delta\phi_{ik}\Delta t^2 - \frac{1}{2}\Delta{\tilde R}_{ik}\eta^{ad}_k\Delta t^2
\right]\\
&\doteq    \Delta\tilde{\mathbf{p} }_{ij}-\delta\mathbf{p}_{ij}
\end{align*}\tag{37}</script><p>å…¶ä¸­æˆ‘ä»¬å®šä¹‰äº†é¢„é›†æˆçš„ä½ç½®æµ‹é‡ $\Delta\tilde{\mathbf{p} }_{ij}$ åŠå…¶å™ªå£° $\delta\mathbf{p}_{ij}$ã€‚</p>
<p>å°†è¡¨è¾¾å¼ $(35), (36), (37)$ ä»£å…¥$ (33)$ ä¸­ $\Delta{R}_{ij}, \Delta\mathbf{v}_{ij}, \Delta\mathbf{p}_{ij}$ çš„åŸå§‹å®šä¹‰ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°äº†æˆ‘ä»¬çš„<strong>é¢„ç§¯åˆ†æµ‹é‡æ¨¡å‹</strong>ï¼ˆè®°ä½ $Exp(-\delta\phi_{ij})^T = Exp(\delta\phi_{ij})$):</p>
<script type="math/tex; mode=display">
\begin{align*}
\Delta{\tilde R}_{ij}&=R^T_iR_j\mathrm{Exp}(\delta\phi_{ij})
\\R^T_i
\Delta\tilde{\mathbf{v} }_{ij}&=R^T_i(\mathbf{v}_j-\mathbf{v}_i-\mathbf{g}\Delta t_{ij})+\delta\mathbf{v}_{ij}
\\
\Delta\tilde{\mathbf{p} }_{ij}&=R^T_i(\mathbf{p}_j-\mathbf{p}_i-\mathbf{v}_i\Delta t_{ij}-\frac{1}{2}\mathbf{g}\Delta t_{ij}^2)+\delta\mathbf{p}_{ij}
\end{align*}\tag{38}</script><p>å…¶ä¸­æˆ‘ä»¬çš„å¤åˆæµ‹é‡è¢«å†™ä¸ºï¼ˆå¾…ä¼°è®¡ï¼‰çŠ¶æ€â€œåŠ ä¸Šâ€éšæœºå™ªå£°çš„å‡½æ•°ï¼Œç”±éšæœºå‘é‡ $[\delta\phi^T_{ij},\ \delta\mathbf{v}_{ij}^T,\ \delta\mathbf{p}_{ij}^T]^T$ æè¿°ã€‚</p>
<p>ä¸ºäº†æ€»ç»“æœ¬èŠ‚çš„å†…å®¹ï¼Œæˆ‘ä»¬å°† $(33)$ çš„æµ‹é‡æ¨¡å‹é‡æ–°å†™ä¸º $(38)$ã€‚$(38)$ çš„ä¼˜åŠ¿åœ¨äºï¼Œå¯¹äºä¸€ä¸ªåˆé€‚çš„å™ªå£°åˆ†å¸ƒï¼Œå®ƒç›´æ¥å®šä¹‰äº†å¯¹æ•°ä¼¼ç„¶ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰é›¶å‡å€¼åŠ æ€§é«˜æ–¯å™ªå£°ï¼ˆ $(38)$çš„æœ€åä¸¤è¡Œï¼‰æµ‹é‡çš„ï¼ˆè´Ÿï¼‰å¯¹æ•°æ˜¯ä¸€ä¸ªäºŒæ¬¡å‡½æ•°ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœ $\delta\phi_{ij}$  æ˜¯é›¶å‡å€¼é«˜æ–¯å™ªå£°ï¼Œæˆ‘ä»¬è®¡ç®—ä¸ $\Delta\tilde R_{ij}$ ç›¸å…³çš„ï¼ˆè´Ÿï¼‰å¯¹æ•°ä¼¼ç„¶ã€‚å™ªå£°é¡¹çš„æ€§è´¨å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­è®¨è®ºã€‚</p>
<h2 id="B-å™ªå£°ä¼ æ’­"><a href="#B-å™ªå£°ä¼ æ’­" class="headerlink" title="B. å™ªå£°ä¼ æ’­"></a>B. å™ªå£°ä¼ æ’­</h2><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¨å¯¼å‡ºå™ªå£°å‘é‡  $[\delta\phi^T_{ij},\ \delta\mathbf{v}_{ij}^T,\ \delta\mathbf{p}_{ij}^T]^T$ çš„ç»Ÿè®¡é‡ã€‚è™½ç„¶æˆ‘ä»¬å·²ç»è§‚å¯Ÿåˆ°å°†å™ªå£°å‘é‡è¿‘ä¼¼ä¸ºé›¶å‡å€¼æ­£æ€åˆ†å¸ƒæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä½†å‡†ç¡®åœ°å»ºæ¨¡å™ªå£°åæ–¹å·®æ˜¯è‡³å…³é‡è¦çš„ã€‚å®é™…ä¸Šï¼Œå™ªå£°åæ–¹å·®å¯¹ MAP ä¼°è®¡å™¨æœ‰å¾ˆå¤§çš„å½±å“ï¼ˆé€†å™ªå£°åæ–¹å·®ç”¨äºå¯¹ä¼˜åŒ–ä¸­çš„é¡¹è¿›è¡ŒåŠ æƒ $(26)$ï¼‰ã€‚å› æ­¤ï¼Œåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†é¢„ç§¯åˆ†æµ‹é‡çš„åæ–¹å·® $\Sigma_{ij}$ çš„æ¨å¯¼ï¼š</p>
<script type="math/tex; mode=display">
\eta^{\Delta}_{ij}\doteq[\delta\phi^T_{ij},\ \delta\mathbf{v}_{ij}^T,\ \delta\mathbf{p}_{ij}^T]^T\sim\mathcal{N}(0_{9\times1},\Sigma_{ij})\tag{39}</script><p>æˆ‘ä»¬é¦–å…ˆè€ƒè™‘é¢„ç§¯åˆ†çš„æ—‹è½¬å™ªå£° $\delta\phi_{ij}$ã€‚å›æƒ³ä¸€ä¸‹ $(35)$</p>
<script type="math/tex; mode=display">
\mathrm{Exp}(-\delta\phi_{ij})\doteq\prod^{j-1}_{k=1}\mathrm{Exp}(-\Delta\tilde R^T_{K+1j} J^k_r\eta^{gd}_k\Delta t)\tag{40}</script><p>å–ä¸¤è¾¹çš„å¯¹æ•°å¹¶æ”¹å˜ç¬¦å·ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\delta\phi_{ij}=-\mathrm{Log}\left(\prod^{j-1}_{k=1}\mathrm{Exp}(-\Delta\tilde R^T_{K+1j} J^k_r\eta^{gd}_k\Delta t)\right)\tag{41}</script><p>ä¸€é˜¶è¿‘ä¼¼ $(9)$ çš„é‡å¤åº”ç”¨ï¼ˆå›æƒ³ä¸€ä¸‹ï¼Œ$\eta^{gd}_k$ å’Œ $\delta\phi_{ij}$ éƒ½æ˜¯å°çš„æ—‹è½¬å™ªå£°ï¼Œå› æ­¤å³é›…å¯æ¯”çŸ©é˜µæ¥è¿‘æ’ç­‰å¼ï¼‰äº§ç”Ÿï¼š</p>
<script type="math/tex; mode=display">
\delta\phi_{ij}\simeq\sum^{j-1}_{k=1}\Delta\tilde R^T_{K+1j}J^k_r\eta^{gd}_k\Delta t\tag{42}</script><p>ä¿ç•™åˆ°ä¸€é˜¶ï¼Œå™ªå£°  $\delta\phi_{ij}$ æ˜¯é›¶å‡å€¼å’Œé«˜æ–¯çš„ï¼Œå› ä¸ºå®ƒæ˜¯é›¶å‡å€¼å™ªå£°é¡¹ $\eta^{gd}_k$ çš„çº¿æ€§ç»„åˆã€‚è¿™æ˜¯å¯å–çš„ï¼Œå› ä¸ºå®ƒä½¿æ—‹è½¬æµ‹é‡æ¨¡å‹ $(38)$ å®Œå…¨ç¬¦åˆå½¢å¼ $(12)$ã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
\delta \mathbf{v}_{ij}&\simeq \sum^{j-1}_{k=i}\left[
-\Delta{\tilde R}_{ik}(\tilde{\mathbf{a} }_{k}
-\mathbf{b}^a_i)^{\land}\delta\phi_{ik}\Delta t 
+\Delta{\tilde R}_{ik}\eta^{ad}_k\Delta t
\right]\\
\delta\mathbf{p}_{ij} &\simeq\sum^{j-1}_{k=i}\left[
\delta\mathbf{v}_{ik}\Delta t-\frac{1}{2}\Delta{\tilde R}_{ik}(\tilde{\mathbf{a} }_{k}
-\mathbf{b}^a_i)^{\land}\delta\phi_{ik}\Delta t ^2 
+\frac{1}{2}\Delta{\tilde R}_{ik}\eta^{ad}_k\Delta t^2 \right]
\end{align*}\tag{43}</script><p>å…¶ä¸­å…³ç³»åˆ°ä¸€é˜¶éƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>æ–¹ç¨‹ã€‚ $(42)-(43)$ å°†é¢„ç§¯åˆ†å™ªå£° $\eta^{\Delta}_{ij}$ è¡¨ç¤ºä¸º IMU æµ‹é‡å™ªå£° $\eta^d_k \doteq [\eta^{gd}_k , \eta^{ad}_k ], k = 1, . . .,j âˆ’ 1$, çš„çº¿æ€§å‡½æ•°ã€‚å› æ­¤ï¼Œæ ¹æ® $\eta^{d}_{k}$  çš„åæ–¹å·®çŸ¥è¯†ï¼ˆåœ¨ IMU è§„èŒƒä¸­ç»™å‡ºï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•çš„çº¿æ€§ä¼ æ’­è®¡ç®— $\eta^{\Delta}_{ij}$ çš„åæ–¹å·®ï¼Œå³ $\Sigma_{ij}$ã€‚</p>
<p>åœ¨é™„å½• IX-A ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´å·§å¦™çš„æ–¹æ³•æ¥è®¡ç®—$\Sigma_{ij}$ã€‚ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬å±•ç¤ºäº† $\Sigma_{ij}$ å¯ä»¥æ–¹ä¾¿åœ°ä»¥è¿­ä»£å½¢å¼è®¡ç®—ï¼šå½“ä¸€ä¸ªæ–°çš„ IMU æµ‹é‡åˆ°è¾¾æ—¶ï¼Œæˆ‘ä»¬åªæ›´æ–° $\Sigma_{ij}$ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹é‡æ–°è®¡ç®—ã€‚è¿­ä»£è®¡ç®—å¯¼è‡´æ›´ç®€å•çš„è¡¨è¾¾å¼å¹¶ä¸”æ›´é€‚åˆåœ¨çº¿æ¨ç†ã€‚</p>
<h2 id="C-ç»„åˆåå·®æ›´æ–°"><a href="#C-ç»„åˆåå·®æ›´æ–°" class="headerlink" title="C. ç»„åˆåå·®æ›´æ–°"></a>C. ç»„åˆåå·®æ›´æ–°</h2><p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å‡è®¾åœ¨ $k = i$ å’Œ $k = j$ ä¹‹é—´çš„é¢„ç§¯åˆ†æœŸé—´ä½¿ç”¨çš„åå·® $\{\overline{b}^a_i , \overline{b}^g_i\}$ æ˜¯æ­£ç¡®çš„å¹¶ä¸”ä¸ä¼šæ”¹å˜ã€‚ç„¶è€Œï¼Œæ›´æœ‰å¯èƒ½çš„æ˜¯ï¼Œåå·®ä¼°è®¡åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿå°‘é‡ $\delta\mathbf{b}$ çš„å˜åŒ–ã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯åœ¨åå·®å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°è®¡ç®— delta æµ‹é‡å€¼ï¼›ä½†æ˜¯ï¼Œè¿™åœ¨è®¡ç®—ä¸Šæ˜¯æ˜‚è´µçš„ã€‚ç›¸åï¼Œç»™å®šåå·®æ›´æ–° $\mathbf{b}\gets \mathbf{b} + \delta\mathbf{b}$ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€é˜¶å±•å¼€æ›´æ–° delta æµ‹é‡ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Delta\tilde{R}_{ij}(\mathbf{b}^g_i)&\simeq\Delta\tilde{R}_{ij}(\overline{\mathbf{b} }^g_i)\mathrm{Exp}\left(\frac{\partial\Delta\overline{R}_{ij} }{\partial\mathbf{b}^g}\delta\mathbf{b}^g \right)
\\
\Delta\tilde{\mathbf{v} }_{ij}(\mathbf{b}^g_i,\mathbf{b}^a_i) &\simeq
\Delta\tilde{\mathbf{v} }_{ij}(\overline{\mathbf{b} }^g_i,\overline{\mathbf{b} }^a_i)
+\frac{\partial\Delta\overline{\mathbf{v} }_{ij} }{\partial\mathbf{b}^g}\delta\mathbf{b}^g_i
+\frac{\partial\Delta\overline{\mathbf{v} }_{ij} }{\partial\mathbf{b}^a}\delta\mathbf{b}^a_i\\
\Delta\tilde{\mathbf{p} }_{ij}(\mathbf{b}^g_i,\mathbf{b}^a_i) &\simeq
\Delta\tilde{\mathbf{p} }_{ij}(\overline{\mathbf{b} }^g_i,\overline{\mathbf{b} }^a_i)
+\frac{\partial\Delta\overline{\mathbf{p} }_{ij} }{\partial\mathbf{b}^g}\delta\mathbf{b}^g_i
+\frac{\partial\Delta\overline{\mathbf{p} }_{ij} }{\partial\mathbf{b}^a}\delta\mathbf{b}^a_i
\end{align*}\tag{44}</script><p>è¿™ç±»ä¼¼äº [2] ä¸­çš„åå·®æ ¡æ­£ï¼Œä½†ç›´æ¥åœ¨ $SO(3)$ ä¸Šè¿è¡Œã€‚é›…å¯æ¯”çŸ©é˜µ $\{ \frac{\partial\Delta\overline{R}_{ij} }{\partial\mathbf{b}^g} , \frac{\partial\Delta\overline{\mathbf{v} }_{ij} }{\partial\mathbf{b}^g} , . . .\}$ï¼ˆåœ¨  $\overline{\mathbf{b} }_i$ è®¡ç®—ï¼Œç§¯åˆ†æ—¶çš„åå·®ä¼°è®¡ï¼‰æè¿°äº†æµ‹é‡å€¼å¦‚ä½•ç”±äºåå·®ä¼°è®¡çš„å˜åŒ–è€Œå˜åŒ–ã€‚é›…å¯æ¯”çŸ©é˜µä¿æŒä¸å˜ï¼Œå¹¶ä¸”å¯ä»¥åœ¨é¢„ç§¯åˆ†æœŸé—´é¢„å…ˆè®¡ç®—ã€‚é›…å¯æ¯”çŸ©é˜µçš„æ¨å¯¼ä¸æˆ‘ä»¬åœ¨ç¬¬ VI-A èŠ‚ä¸­ç”¨äºå°†æµ‹é‡å€¼è¡¨ç¤ºä¸ºå¤§å€¼åŠ ä¸Šå°æ‰°åŠ¨çš„æ¨å¯¼éå¸¸ç›¸ä¼¼ï¼Œå¹¶åœ¨é™„å½• IX-B ä¸­ç»™å‡ºã€‚</p>
<h2 id="D-é¢„ç§¯åˆ†IMUå› å­"><a href="#D-é¢„ç§¯åˆ†IMUå› å­" class="headerlink" title="D. é¢„ç§¯åˆ†IMUå› å­"></a>D. é¢„ç§¯åˆ†IMUå› å­</h2><p>ç»™å®š $(38)$ ä¸­çš„é¢„ç§¯åˆ†æµ‹é‡æ¨¡å‹ï¼Œå¹¶ä¸”ç”±äºæµ‹é‡å™ªå£°æ˜¯é›¶å‡å€¼å’Œé«˜æ–¯ï¼ˆåæ–¹å·® $\Sigma_{ij}$ï¼‰ç›´åˆ°ä¸€é˜¶ $(39)$ï¼Œç°åœ¨å¾ˆå®¹æ˜“å†™å‡ºæ®‹å·® $r_{\mathcal{I}_{ij} }\doteq [r^T_{\Delta R_{ij} }, r^T_{\Delta \mathbf{v}_{ij} },r^T_{\Delta \mathbf{p}_{ij} }]^T \in \mathbb{R}^9$, å…¶ä¸­:</p>
<script type="math/tex; mode=display">
\begin{align*}
r_{\Delta R_{ij} }&\doteq \mathrm{Log}\left(
\left(
\Delta\tilde{R}_{ij}(\overline{\mathbf{b} }^g_i)\mathrm{Exp}\left(\frac{\partial\Delta\overline{R}_{ij} }{\partial\mathbf{b}^g}\delta\mathbf{b}^g \right)
\right)^TR^T_iR_j
\right)
\\
r_{\Delta \mathbf{v}_{ij} }&\doteq 
R^T_i(\mathbf{v}_j-\mathbf{v}_i-\mathbf{g}\Delta t_{ij})-\left[
\Delta\tilde{\mathbf{v} }_{ij}(\overline{\mathbf{b} }^g_i,\overline{\mathbf{b} }^a_i)
+\frac{\partial\Delta\overline{\mathbf{v} }_{ij} }{\partial\mathbf{b}^g}\delta\mathbf{b}^g
+\frac{\partial\Delta\overline{\mathbf{v} }_{ij} }{\partial\mathbf{b}^a}\delta\mathbf{b}^a
\right]
\\
r_{\Delta \mathbf{p}_{ij} }&\doteq 
R^T_i(\mathbf{p}_j-\mathbf{p}_i-\mathbf{v}_i\Delta t_{ij}-\frac{1}{2}\mathbf{g}\Delta t_{ij}^2)-\left[
\Delta\tilde{\mathbf{p} }_{ij}(\overline{\mathbf{b} }^g_i,\overline{\mathbf{b} }^a_i)
+\frac{\partial\Delta\overline{\mathbf{p} }_{ij} }{\partial\mathbf{b}^g}\delta\mathbf{b}^g
+\frac{\partial\Delta\overline{\mathbf{p} }_{ij} }{\partial\mathbf{b}^a}\delta\mathbf{b}^a
\right]
\\
\end{align*}\tag{45}</script><p>å…¶ä¸­æˆ‘ä»¬è¿˜åŒ…æ‹¬äº†æ–¹ç¨‹çš„åå·®æ›´æ–° $(44)$ã€‚</p>
<p>æ ¹æ®â€œlift-solve-retractâ€æ–¹æ³•ï¼ˆç¬¬ III-C èŠ‚ï¼‰ï¼Œåœ¨æ¯æ¬¡ Gauss-Newton è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<strong>å›ç¼©($retraction$)</strong> $(21)$é‡æ–°å‚æ•°åŒ– $(45)$ã€‚ç„¶åï¼Œâ€œè§£å†³â€æ­¥éª¤éœ€è¦å›´ç»•å½“å‰ä¼°è®¡çº¿æ€§åŒ–ç»“æœæˆæœ¬ã€‚å‡ºäºçº¿æ€§åŒ–çš„ç›®çš„ï¼Œè®¡ç®—æ®‹å·®çš„é›…å¯æ¯”è¡Œåˆ—å¼åˆ†æè¡¨è¾¾å¼å¾ˆæ–¹ä¾¿ï¼Œæˆ‘ä»¬åœ¨é™„å½• IX-C ä¸­æ¨å¯¼å‡ºäº†è¯¥è¡¨è¾¾å¼ã€‚</p>
<h2 id="E-åç½®æ¨¡å‹"><a href="#E-åç½®æ¨¡å‹" class="headerlink" title="E. åç½®æ¨¡å‹"></a>E. åç½®æ¨¡å‹</h2><p>åœ¨ä»‹ç» IMU æ¨¡å‹ $(27)$ æ—¶ï¼Œæˆ‘ä»¬è¯´åå·®æ˜¯ç¼“æ…¢éšæ—¶é—´å˜åŒ–çš„é‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç”¨â€œå¸ƒæœ—è¿åŠ¨â€å¯¹å®ƒä»¬è¿›è¡Œå»ºæ¨¡ï¼Œå³ç»¼åˆç™½å™ªå£°ï¼š</p>
<script type="math/tex; mode=display">
\dot{b}^g(t)=\eta^{bg}, \ \ \ \ \dot{b}^a(t)=\eta^{ba}\tag{46}</script><p>åœ¨ä¸¤ä¸ªè¿ç»­å…³é”®å¸§ $i$ å’Œ $j$ ä¹‹é—´çš„æ—¶é—´é—´éš” $[t_i, t_j]$ ä¸Šå¯¹ $(46)$ è¿›è¡Œç§¯åˆ†ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{b}^g_j(t)=\mathbf{b}^g_i+\eta^{bgd}, \ \ \ \ \ \mathbf{b}^a_j(t)=\mathbf{b}^a_i+\eta^{bad}\tag{47}</script><p>å…¶ä¸­ï¼Œå¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬ä½¿ç”¨ç®€å†™ $\mathbf{b}^g_j\doteq \mathbf{b}^g(t_i)$ï¼Œæˆ‘ä»¬å®šä¹‰ç¦»æ•£å™ªå£° $\eta^{bgd}$ å’Œ $\eta^{bad}$ï¼Œå®ƒä»¬çš„å‡å€¼å’Œåæ–¹å·®ä¸ºé›¶ $\Sigma^{bgd}\doteq \Delta t_{ij} Cov(\eta^{bg})$ å’Œ $\Sigma^{bad}\doteq \Delta t_{ij} Cov(\eta^{ba})$ï¼Œåˆ†åˆ«ï¼ˆå‚è§[58ï¼Œé™„å½•]ï¼‰ã€‚</p>
<p>æ¨¡å‹ $(47)$ å¯ä»¥å¾ˆå®¹æ˜“åœ°åŒ…å«åœ¨æˆ‘ä»¬çš„å› å­å›¾ä¸­ï¼Œä½œä¸º $(26)$ ä¸­æ‰€æœ‰è¿ç»­å…³é”®å¸§çš„è¿›ä¸€æ­¥é™„åŠ é¡¹ï¼š</p>
<script type="math/tex; mode=display">
\parallel r_{b_{ij} } \parallel^2 \doteq\parallel \mathbf{b}^g_j- \mathbf{b}^g_i \parallel^2_{\Sigma_{bgd} }+\parallel \mathbf{b}^a_j- \mathbf{b}^a_i \parallel^2_{\Sigma_{bad} }\tag{48}</script><h1 id="ä¸ƒã€æ— ç»“æ„è§†è§‰å› å­"><a href="#ä¸ƒã€æ— ç»“æ„è§†è§‰å› å­" class="headerlink" title="ä¸ƒã€æ— ç»“æ„è§†è§‰å› å­"></a>ä¸ƒã€æ— ç»“æ„è§†è§‰å› å­</h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»æˆ‘ä»¬ç”¨äºè§†è§‰æµ‹é‡çš„æ— ç»“æ„æ¨¡å‹ã€‚æˆ‘ä»¬æ–¹æ³•çš„å…³é”®ç‰¹å¾æ˜¯åœ°æ ‡çš„çº¿æ€§æ¶ˆé™¤ã€‚è¯·æ³¨æ„ï¼Œåœ¨æ¯æ¬¡ Gauss-Newton è¿­ä»£ä¸­éƒ½ä¼šé‡å¤æ¶ˆé™¤ï¼Œå› æ­¤æˆ‘ä»¬ä»ç„¶å¯ä»¥ä¿è¯è·å¾—æœ€ä½³ MAP ä¼°è®¡ã€‚</p>
<p>è§†è§‰æµ‹é‡é€šè¿‡å¦‚ä¸‹æ±‚å’Œè´¡çŒ®åˆ°ä»£ä»·å‡½æ•° $(26)$ ä¸­:</p>
<script type="math/tex; mode=display">
\sum_{i\in\mathcal{K}_k}\sum_{l\in\mathcal{C}_i}\parallel r_{\mathcal{C}_{il} } \parallel^2=\sum^L_{l=1}\sum_{i\in\mathcal{X}(l)}\parallel r_{\mathcal{C}_{il} } \parallel^2_{\Sigma_{\mathcal{C} } }\tag{49}</script><p>å…¶ä¸­ï¼Œåœ¨å³ä¾§ï¼Œæˆ‘ä»¬å°†å…¶é‡å†™ä¸ºæ¯ä¸ªåœ°æ ‡ $l = 1 ,. . , L$, çš„è´¡çŒ®çš„æ€»å’Œã€‚åœ¨ (49) ä¸­ï¼Œ$\mathcal{X}(l)$ è¡¨ç¤ºçœ‹åˆ° $l$ çš„å…³é”®å¸§çš„å­é›†ã€‚</p>
<p>å•ä¸ªå›¾åƒæµ‹é‡ $\mathbf{z}_{il}$ çš„æ®‹å·®çš„ä¸€ä¸ªç›¸å½“æ ‡å‡†çš„æ¨¡å‹æ˜¯é‡æŠ•å½±è¯¯å·®ï¼š</p>
<script type="math/tex; mode=display">
r_{\mathcal{c}_{il} }=\mathbf{z}_{il}-\pi(R_i,\mathbf{p}_{i},Ï_l)\tag{50}</script><p>å…¶ä¸­ $Ï_l \in \mathbb{R}^3$ è¡¨ç¤ºç¬¬ $l$ ä¸ªåœ°æ ‡çš„ä½ç½®ï¼Œ$Ï€(Â·)$ æ˜¯æ ‡å‡†é€è§†æŠ•å½±ï¼Œå®ƒä¹Ÿç¼–ç äº†ï¼ˆå·²çŸ¥çš„ï¼‰IMU ç›¸æœºå˜æ¢ $T_{BC}$ã€‚</p>
<p>ç›´æ¥ä½¿ç”¨ $(50)$ å°†éœ€è¦åŒ…æ‹¬åœ°æ ‡ä½ç½® $Ï_l, l = 1, ã€‚ . . , L$ åœ¨ä¼˜åŒ–ä¸­ï¼Œè¿™å¯¹è®¡ç®—äº§ç”Ÿè´Ÿé¢å½±å“ã€‚å› æ­¤ï¼Œåœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç§æ— ç»“æ„çš„æ–¹æ³•ï¼Œé¿å…å¯¹åœ°æ ‡è¿›è¡Œä¼˜åŒ–ï¼Œä»è€Œç¡®ä¿æ£€ç´¢ MAP ä¼°è®¡</p>
<p>æ­£å¦‚åœ¨ç¬¬ III-C èŠ‚ä¸­å›é¡¾çš„é‚£æ ·ï¼Œåœ¨æ¯æ¬¡ GN è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<strong>å›ç¼©($retraction$)</strong> $(21)$æ¥æå‡æˆæœ¬å‡½æ•°ã€‚å¯¹äºè§†è§‰å› ç´ ï¼Œè¿™æ„å‘³ç€åŸå§‹æ®‹å·® $(49)$ å˜ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\sum^L_{l=1}\sum_{i\in\mathcal{X}(l)}\parallel 
\mathbf{z}_{il}-\check{\pi}(\delta\phi_i,\delta\mathbf{p}_i,\deltaÏ_l)
\parallel^2_{\Sigma_{\mathcal{C} } }\tag{51}</script><p>å…¶ä¸­ $\delta\phi_i,\delta\mathbf{p}_i,\deltaÏ_l$ æ˜¯æ¬§å‡ é‡Œå¾—ä¿®æ­£ï¼Œ$\check{\pi}(Â·)$ æ˜¯æå‡çš„æˆæœ¬å‡½æ•°ã€‚ GN æ–¹æ³•ä¸­çš„â€œæ±‚è§£â€æ­¥éª¤åŸºäºæ®‹å·®çš„çº¿æ€§åŒ–ï¼š</p>
<script type="math/tex; mode=display">
\sum^L_{l=1}\sum_{i\in\mathcal{X}(l)}\parallel 
\mathbf{F}_{il}\delta\mathbf{T}_{i}+\mathbf{E}_{il}\delta Ï_l-\mathbf{b}_{il}
\parallel^2\tag{52}</script><p>å…¶ä¸­ $\delta \mathbf{T}_i \doteq [\delta\phi_i,\delta\mathbf{p}_i]^T$; é›…å¯æ¯”çŸ©é˜µ $\mathbf{F}_{il},\mathbf{E}_{il}$ å’Œå‘é‡ $\mathbf{b}_{il}$ï¼ˆå‡ç”± $\Sigma^{1/2}_{\mathcal{C}}$ å½’ä¸€åŒ–ï¼‰æ¥è‡ªçº¿æ€§åŒ–ã€‚å‘é‡$\mathbf{b}_{il}$æ˜¯çº¿æ€§åŒ–ç‚¹å¤„çš„æ®‹å·®ã€‚å°† $(52)$ ä¸­çš„ç¬¬äºŒä¸ªå’Œå†™æˆçŸ©é˜µå½¢å¼ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\sum^L_{l=1}\parallel 
\mathbf{F}_{l}\delta\mathbf{T}_{\mathcal{X}(l)}+\mathbf{E}_{l}\delta Ï_l-\mathbf{b}_{l}
\parallel^2\tag{53}</script><p>å…¶ä¸­ï¼Œå¯¹äºæ‰€æœ‰ $i \in \mathcal{X}(l)ï¼Œ\mathbf{F}_{il},\mathbf{E}_{il},\mathbf{b}_{il}$ åˆ†åˆ«é€šè¿‡å †å  $\mathbf{F}_{il},\mathbf{E}_{il},\mathbf{b}_{il}$ è·å¾—ã€‚</p>
<p>ç”±äºåœ°æ ‡ $l$ å‡ºç°åœ¨æ€»å’Œ $(53)$ çš„å•ä¸ªé¡¹ä¸­ï¼Œå› æ­¤å¯¹äºä»»ä½•ç»™å®šçš„å§¿æ€æ‰°åŠ¨ $\delta\mathbf{T}_{\mathcal{X}(l)}$ é€‰æ‹©ï¼Œæœ€å°åŒ–ä»£ä»·å‡½æ•° $\parallel<br>\mathbf{F}_{l}\delta\mathbf{T}_{\mathcal{X}(l)}+\mathbf{E}_{l}\delta Ï_l-\mathbf{b}_{l}<br>\parallel^2$ çš„åœ°æ ‡æ‰°åŠ¨ $\deltaÏ_l$ æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
\deltaÏ_l=-(\mathbf{E}_{l}^T\mathbf{E}_{l})^{-1}\mathbf{E}_{l}^T(\mathbf{F}_{l}\delta\mathbf{T}_{\mathcal{X}(l)}-\mathbf{b}_{l})\tag{54}</script><p>å°† $(54)$ ä»£å› $(53)$ æˆ‘ä»¬å¯ä»¥ä»ä¼˜åŒ–é—®é¢˜ä¸­æ¶ˆé™¤å˜é‡ $\deltaÏ_l$ ï¼š</p>
<script type="math/tex; mode=display">
\sum^L_{l=1}\parallel 
(\mathbf{I}-\mathbf{E}_{l}(\mathbf{E}_{l}^T\mathbf{E}_{l})^{-1}\mathbf{E}_{l}^T)
(\mathbf{F}_{l}\delta\mathbf{T}_{\mathcal{X}(l)}-\mathbf{b}_{l})
\parallel^2\tag{55}</script><p>å…¶ä¸­ $\mathbf{I}-\mathbf{E}_{l}(\mathbf{E}_{l}^T\mathbf{E}_{l})^{-1}\mathbf{E}_{l}^T$ æ˜¯ $\mathbf{E}_{l}$çš„æ­£äº¤æŠ•å½±ã€‚åœ¨é™„å½• IX-D ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¯ä»¥è¿›ä¸€æ­¥æ“çºµæˆæœ¬ $(55)$ï¼Œä»è€Œå®ç°æ›´æœ‰æ•ˆçš„å®æ–½ã€‚</p>
<p>è¿™ç§æ–¹æ³•åœ¨BAæ–‡çŒ®ä¸­è¢«ç§°ä¸º Schur è¡¥ç æŠ€å·§($Schur\ complement\ trick$)ï¼Œå…¶ä¸­ä¸€ç§æ ‡å‡†åšæ³•æ˜¯é€šè¿‡åå‘æ›¿æ¢æ¥æ›´æ–° $Ï_l$ çš„çº¿æ€§åŒ–ç‚¹ [61]ã€‚ç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨å¿«é€Ÿçº¿æ€§ä¸‰è§’æµ‹é‡ä»å§¿åŠ¿çš„çº¿æ€§åŒ–ç‚¹è·å¾—æ›´æ–°çš„åœ°æ ‡ä½ç½®ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å°†æ¶‰åŠå§¿åŠ¿å’Œåœ°æ ‡çš„å¤§é‡å› å­ $(51)$ å‡å°‘ä¸ºä»…æ¶‰åŠå§¿åŠ¿çš„è¾ƒå° $L$ å› å­é›† $(55)$ã€‚ç‰¹åˆ«æ˜¯ï¼Œä¸ç•Œæ ‡ $l$ å¯¹åº”çš„å› å­ä»…æ¶‰åŠè§‚å¯Ÿ $l$ çš„çŠ¶æ€ $\mathcal{X}(l)$ï¼Œåˆ›å»ºå›¾ 3 çš„è¿æ¥æ¨¡å¼ã€‚MSCKF [5] ä¸­ä¹Ÿä½¿ç”¨ç›¸åŒçš„æ–¹æ³•æ¥é¿å…åœ¨çŠ¶æ€å‘é‡ä¸­åŒ…å«ç•Œæ ‡.</p>
]]></content>
      <categories>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>é¢„ç§¯åˆ†ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤–ç§¯ã€å†…ç§¯ã€å¼ é‡ç§¯ã€Kroneckerç§¯</title>
    <url>/posts/bdcf3114.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬æ–‡ä¸»è¦è®¨è®ºæ•°å­¦ä¸Šçš„å†…ç§¯ã€å¤–ç§¯ï¼Œä¸ºäº†ä¸åœ¨å­¦ä¹ ä¸­æ··æ·†ï¼Œå…¶ä¸­SLAMä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„è¿˜æ˜¯ç‚¹ä¹˜å’Œå‰ä¹˜ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="å†…ç§¯"><a href="#å†…ç§¯" class="headerlink" title="å†…ç§¯"></a>å†…ç§¯</h1><p>å†…ç§¯åˆç§°ä¸ºç‚¹ç§¯ï¼Œæœ‰ä¸¤ç§å®šä¹‰æ–¹å¼ï¼Œä¸€ç§æ˜¯ä»£æ•°æ–¹å¼ï¼Œä¸€ç§æ˜¯é›†åˆæ–¹å¼ã€‚</p>
<ul>
<li><strong>ä»£æ•°å®šä¹‰</strong></li>
</ul>
<p>ä¸¤ä¸ªå‘é‡$\vec{a}=[a_1,a_2,Â·Â·Â·,a_n]$å’Œ$\vec{b}=[b_1,b_2,Â·Â·Â·,b_n]$çš„ç‚¹ç§¯å®šä¹‰ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\vec{a}\cdot\vec{b}=\sum^{n}_{i=1}a_ib_i=a_1b_1+a_2b_2+Â·Â·Â·+a_nb_n\tag{1}</script><p>ç‚¹ç§¯ä¹Ÿå¯ä»¥å†™æˆ$\vec{a}\vec{b}^T$</p>
<ul>
<li><strong>å‡ ä½•å®šä¹‰</strong></li>
</ul>
<p>åœ¨æ¬§å‡ é‡Œå¾—ç©ºé—´ä¸­ï¼Œç‚¹ç§¯å¯ä»¥ç›´è§‚åœ°å®šä¹‰ä¸º:</p>
<script type="math/tex; mode=display">
\vec{a}\cdot\vec{b}=|\vec{a}||\vec{b}|\cos\theta\tag{2}</script><p>å…¶ä¸­ï¼Œ$|\vec{x}|$è¡¨ç¤º$\vec{x}$çš„æ¨¡é•¿ï¼Œ$\theta$è¡¨ç¤ºä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’ã€‚</p>
<h1 id="å‰ç§¯ï¼ˆCross-productï¼‰"><a href="#å‰ç§¯ï¼ˆCross-productï¼‰" class="headerlink" title="å‰ç§¯ï¼ˆCross productï¼‰"></a>å‰ç§¯ï¼ˆCross productï¼‰</h1><ul>
<li><strong>å®šä¹‰</strong></li>
</ul>
<p>å‰ç§¯åˆç§°ä¸ºå‘é‡ç§¯ï¼ˆæœ‰æ—¶å€™ä¹Ÿè¯´æ˜¯å¤–ç§¯ï¼Œè¿™é‡Œä¸ºäº†åŒºåˆ†ï¼Œå°±ä¸è¿™ä¹ˆè¯´ï¼Œå› ä¸ºä½ ä¼šå‘ç°å¥½å¤šå¤–ç§¯ï¼‰ï¼Œæ˜¯å¯¹ä¸‰ç»´ç©ºé—´ä¸­çš„ä¸¤ä¸ªå‘é‡çš„äºŒå…ƒè¿ç®—ï¼Œä½¿ç”¨ç¬¦å·$\times$ã€‚ä¸ç‚¹ç§¯ä¸åŒï¼Œå®ƒçš„è¿ç®—ç»“æœæ˜¯å‘é‡ã€‚å¯¹äºçº¿æ€§æ— å…³çš„ä¸¤ä¸ªå‘é‡$a$å’Œ$b$ï¼Œå®ƒä»¬çš„å¤–ç§¯å†™ä½œ $a\times b$ï¼Œæ˜¯ $ a $å’Œ$b$æ‰€åœ¨å¹³é¢çš„æ³•çº¿å‘é‡ï¼Œä¸$ a $å’Œ$b$éƒ½å‚ç›´ã€‚</p>
<p><img src="/images/å¤–ç§¯ã€å†…ç§¯ã€å¼ é‡ç§¯ã€Kroneckerç§¯/image-20220506153837169.png" alt="image-20220506153837169" style="zoom: 25%;" /></p>
<p>ä¸¤ä¸ªå‘é‡$a$å’Œ$b$çš„å‰ç§¯ä»…åœ¨ä¸‰ç»´ç©ºé—´æœ‰å®šä¹‰ï¼Œå†™ä½œ $a\times b$ï¼Œå‰ç§¯ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºï¼š</p>
<script type="math/tex; mode=display">
a\times b=\parallel a \parallel \parallel b\parallel \sin(\theta)n\tag{3}</script><p>å…¶ä¸­$\theta$è¡¨ç¤º$a$å’Œ$b$åœ¨å®ƒä»¬æ‰€å®šä¹‰çš„å¹³é¢ä¸Šçš„å¤¹è§’ï¼Œ$\parallel a \parallel$å’Œ$\parallel b \parallel$è¡¨ç¤ºå‘é‡$a$å’Œ$b$çš„æ¨¡é•¿ï¼Œè€Œ$n$åˆ™æ˜¯ä¸€ä¸ªä¸$a$å’Œ$b$æ‰€æ„æˆçš„å¹³é¢çš„å‚ç›´çš„å•ä½å‘é‡ï¼Œæ–¹å‘ç”±å³æ‰‹å®šåˆ™å†³å®šã€‚</p>
<ul>
<li><strong>çŸ©é˜µè¡¨ç¤º</strong></li>
</ul>
<p>å‰ç§¯ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºï¼š</p>
<script type="math/tex; mode=display">
a\times b=\left|\begin{matrix}i&j&k\\a_1&a_2&a_3\\b_1&b_2&b_3\end{matrix}\right|=
\begin{bmatrix}a_2b_3-a_3b_2\\a_3b_1-a_1b_3\\a_1b_2-a_2b_1\end{bmatrix}=
\begin{bmatrix}0&-a_3&a_2\\a_3&0&-a_1\\-a_2&a_1&0\end{bmatrix}b\triangleq a^{\land}b
\tag{4}</script><p>è¿™é‡Œå¼•å…¥ç¬¦å·$^{\land}$ï¼Œæˆä¸ºåå¯¹ç§°ç¬¦å·ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠå¤–ç§¯$a\times b$å†™æˆäº†çŸ©é˜µä¸å‘é‡çš„ä¹˜æ³•$a^{\land}b$ï¼ŒæŠŠå®ƒå˜æˆå¯çº¿æ€§è¿ç®—ã€‚åœ¨ã€Šè§†è§‰SLAMåå››è®²ã€‹ä¸­ä¹Ÿæœ‰æåŠã€‚</p>
<h1 id="å¼ é‡ç§¯"><a href="#å¼ é‡ç§¯" class="headerlink" title="å¼ é‡ç§¯"></a>å¼ é‡ç§¯</h1><p>åœ¨æ•°å­¦ä¸­ï¼Œå¼ é‡ç§¯ï¼Œè®°ä¸º$\otimes$ï¼Œå¯ä»¥åº”ç”¨äºä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å¦‚å‘é‡ã€çŸ©é˜µã€å¼ é‡ã€å‘é‡ç©ºé—´ã€ä»£æ•°ã€æ‹“æ‰‘å‘é‡ç©ºé—´å’Œæ¨¡ã€‚åœ¨å„ç§æƒ…å†µä¸‹è¿™ä¸ªç¬¦å·çš„æ„ä¹‰æ˜¯åŒæ ·çš„:æœ€ä¸€èˆ¬çš„åŒçº¿æ€§è¿ç®—ã€‚åœ¨æŸäº›ä¸Šä¸‹æ–‡ä¸­ä¹Ÿå«åšå¤–ç§¯ã€‚</p>
<script type="math/tex; mode=display">
b\otimes a \rightarrow \begin{bmatrix}b_1\\b_2\\b_3\\b_4\end{bmatrix}_{4\times 1}
\begin{bmatrix}a_1&a_2&a_3\end{bmatrix}_{1\times 3}=
\begin{bmatrix}a_1b_1&a_2b_1&a_3b_1\\a_1b_2&a_2b_2&a_3b_2\\a_1b_3&a_2b_3&a_3b_3\\a_1b_4&a_2b_4&a_3b_4\\\end{bmatrix}_{4\times 3}\tag{5}</script><p>å¯¹äºå¼ é‡ç§¯ä¹‹åçš„ç§©ï¼š</p>
<script type="math/tex; mode=display">
rank(V\otimes U)=rank(V)+rank(U)\tag{6}</script><h1 id="Kroneckerç§¯"><a href="#Kroneckerç§¯" class="headerlink" title="Kroneckerç§¯"></a>Kroneckerç§¯</h1><p>æ•°å­¦ä¸Šï¼Œå…‹ç½—å†…å…‹ç§¯ï¼ˆè‹±è¯­ï¼šKronecker productï¼‰æ˜¯ä¸¤ä¸ªä»»æ„å¤§å°çš„çŸ©é˜µé—´çš„è¿ç®—ï¼Œè¡¨ç¤ºä¸ºâŠ—ã€‚å…‹ç½—å†…å…‹ç§¯æ˜¯å¤–ç§¯ä»å‘é‡åˆ°çŸ©é˜µçš„æ¨å¹¿ï¼Œä¹Ÿæ˜¯å¼ é‡ç§¯åœ¨æ ‡å‡†åŸºä¸‹çš„çŸ©é˜µè¡¨ç¤ºã€‚</p>
<p>å¦‚æœ$A$æ˜¯ä¸€ä¸ª$m\times n$çš„çŸ©é˜µï¼Œ$B$æ˜¯ä¸€ä¸ª$p\times q$çš„çŸ©é˜µï¼Œå…‹ç½—å†…å…‹ç§¯ä¸º$A\otimes B$åˆ™æ˜¯ä¸€ä¸ª$mp\times nq$çš„çŸ©é˜µï¼š</p>
<p><img src="/images/å¤–ç§¯ã€å†…ç§¯ã€å¼ é‡ç§¯ã€Kroneckerç§¯/image-20220506162341626.png" alt="image-20220506162341626" style="zoom: 20%;" /></p>
<p>æ›´å…·ä½“çš„è¡¨ç¤ºä¸ºï¼š</p>
<p><img src="/images/å¤–ç§¯ã€å†…ç§¯ã€å¼ é‡ç§¯ã€Kroneckerç§¯/image-20220506162438902.png" alt="image-20220506162438902" style="zoom:40%;" /></p>
]]></content>
      <categories>
        <category>æ•°å­¦åŸºç¡€</category>
      </categories>
      <tags>
        <tag>å†…ç§¯ä¸å¤–ç§¯</tag>
      </tags>
  </entry>
  <entry>
    <title>ç›¸æœºæ¨¡å‹ç®€è¦åˆ†æ</title>
    <url>/posts/ddbf64.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬èŠ‚ä¸»è¦å¯¹ç›¸æœºæ¨¡å‹åšè¯¦ç»†çš„è§£è¯»ï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šå¯¹VOä»¥åŠVIOé‡æŠ•å½±è¯¯å·®é—®é¢˜ä½œç®€è¦çš„æ¦‚æ‹¬ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="ç›¸æœºæˆåƒæ¨¡å‹"><a href="#ç›¸æœºæˆåƒæ¨¡å‹" class="headerlink" title="ç›¸æœºæˆåƒæ¨¡å‹"></a>ç›¸æœºæˆåƒæ¨¡å‹</h1><p>ç›¸æœºæ¨¡å‹åŸºäºå°å­”æˆåƒï¼š</p>
<p><img src="/images/ç›¸æœºæ¨¡å‹ç®€è¦åˆ†æ/image-20220505170737171.png" alt="image-20220505170737171" style="zoom: 67%;" /></p>
<p>è¿™é‡Œå‡ºç°äº†å‡ ä¸ªåæ ‡ç³»ï¼š</p>
<ul>
<li>ä¸–ç•Œåæ ‡ç³»$\{W\}$ï¼Œåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹ï¼Œç‰¹å¾ç‚¹$P$åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„åæ ‡ä¸º$P_w=(X_w,Y_w,Z_w)$</li>
<li><p>ç›¸æœºåæ ‡ç³»$\{C\}$ï¼Œå¯¹ç›¸æœºæ¥è¯´ï¼Œä¹Ÿæœ‰ä¸€ä¸ªç›¸æœºåæ ‡ç³»ï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºæœºå™¨äººæœ¬ä½“åæ ‡ç³»ï¼Œå› ä¸ºç›¸æœºå±äºæœºå™¨äººï¼Œç‰¹å¾ç‚¹$P$åœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ä¸º$P_c=(X_c,Y_c,Z_c)$</p>
</li>
<li><p>åƒç´ å¹³é¢åæ ‡ç³»$\{P^{\prime}\}$ï¼Œè¿™ä¸ªæ˜¯é€šè¿‡ç›¸æœºå†…éƒ¨å¾—åˆ°çš„æŠ•å½±å¹³é¢åæ ‡ç³»ï¼Œå®ƒæ˜¯ä¸€ä¸ªäºŒç»´çš„å¹³é¢ï¼Œç‰¹å¾ç‚¹$P$åœ¨åƒç´ å¹³é¢åæ ‡ç³»ä¸‹çš„åæ ‡ä¸º$P^{\prime}=(X^{\prime},Y^{\prime})$ï¼Œ</p>
</li>
<li><p>åƒç´ åæ ‡ç³»$\{P_{uv}\}$ï¼Œåƒç´ åæ ‡ç³»æ˜¯ç´ å¹³é¢åæ ‡ç³»$\{P^{\prime}\}$ç»è¿‡ç¼©æ”¾å’Œå¹³ç§»å¾—åˆ°çš„ï¼Œåé¢ä»‹ç»ã€‚</p>
</li>
</ul>
<p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ˜ç™½è¿™å‡ ä¸ªåæ ‡ç³»ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src="/images/ç›¸æœºæ¨¡å‹ç®€è¦åˆ†æ/image-20220505171918452.png" alt="image-20220505171918452"></p>
<h2 id="ä¸–ç•Œåæ ‡ç³»â€”â€”ç›¸æœºåæ ‡ç³»"><a href="#ä¸–ç•Œåæ ‡ç³»â€”â€”ç›¸æœºåæ ‡ç³»" class="headerlink" title="ä¸–ç•Œåæ ‡ç³»â€”â€”ç›¸æœºåæ ‡ç³»"></a>ä¸–ç•Œåæ ‡ç³»â€”â€”ç›¸æœºåæ ‡ç³»</h2><p>è¿™ä¸ªå¾ˆç®€å•ï¼Œä¸¤è€…å°±ç›¸å·®ä¸€ä¸ªåˆšä½“å˜æ¢ï¼Œè¿™å˜æ¢çŸ©é˜µä¸º$T_{cw}$ï¼Œåˆ™å¯¹äºç‰¹å¾ç‚¹$P$æ¥è¯´ï¼Œå°±æœ‰ï¼š</p>
<script type="math/tex; mode=display">
P_{c}=(T_{cw}P_{w})_{(1:3)}=(T_{cw}\begin{bmatrix}X_{w}\\Y_{w}\\Z_{w}\end{bmatrix})_{(1:3)}\tag{1}</script><p>è¿™é‡Œ$(T_{cw})_{(1:3)}$æŒ‡çš„æ˜¯çº¯æ—‹è½¬çš„æƒ…å†µä¸‹ï¼Œè€ƒè™‘ä»–çš„å‰ä¸‰é¡¹ã€‚</p>
<h2 id="ç›¸æœºåæ ‡ç³»â€”â€”åƒå¹³é¢åæ ‡ç³»"><a href="#ç›¸æœºåæ ‡ç³»â€”â€”åƒå¹³é¢åæ ‡ç³»" class="headerlink" title="ç›¸æœºåæ ‡ç³»â€”â€”åƒå¹³é¢åæ ‡ç³»"></a>ç›¸æœºåæ ‡ç³»â€”â€”åƒå¹³é¢åæ ‡ç³»</h2><p><img src="/images/ç›¸æœºæ¨¡å‹ç®€è¦åˆ†æ/image-20220505172602891.png" alt="image-20220505172602891"></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œå±•ç¤ºç›¸æœºå†…éƒ¨æŠ•å½±çš„è¿‡ç¨‹ï¼Œ</p>
<script type="math/tex; mode=display">
\begin{align*}
X^{\prime}=f\frac{X_c}{Z_c}\\
Y^{\prime}=f\frac{Y_c}{Z_c}
\end{align*}\tag{2}</script><h2 id="åƒå¹³é¢åæ ‡ç³»â€”â€”åƒç´ åæ ‡ç³»"><a href="#åƒå¹³é¢åæ ‡ç³»â€”â€”åƒç´ åæ ‡ç³»" class="headerlink" title="åƒå¹³é¢åæ ‡ç³»â€”â€”åƒç´ åæ ‡ç³»"></a>åƒå¹³é¢åæ ‡ç³»â€”â€”åƒç´ åæ ‡ç³»</h2><p>åƒç´ åæ ‡ç³»ä¸æˆåƒå¹³é¢ä¹‹é—´ï¼Œç›¸å·®äº†ä¸€ä¸ªç¼©æ”¾å’Œä¸€ä¸ªåŸç‚¹çš„å¹³ç§»ã€‚æˆ‘ä»¬è®¾åƒç´ åæ ‡åœ¨$u$ è½´ä¸Šç¼©æ”¾äº† $\alpha$å€ï¼Œåœ¨ $v$ä¸Šç¼©æ”¾äº† $\beta$ å€ã€‚åŒæ—¶ï¼ŒåŸç‚¹å¹³ç§»äº†$ [c_x,c_y]^T$ã€‚é‚£ä¹ˆï¼Œ $P^â€²$ çš„åæ ‡ä¸åƒç´ åæ ‡ $[u,v]^T $çš„å…³ç³»ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
\left\{
\begin{array}{L}
u=\alpha X^{\prime}+c_x\\
v=\alpha Y^{\prime}+c_y
\end{array}
\right.\
\tag{3}</script><p>å°†$(2)$å¸¦å…¥$(3)$:</p>
<script type="math/tex; mode=display">
\left\{
\begin{array}{L}
u=f_x \frac{X_c}{Z_c}+c_x\\
v=f_y \frac{Y_c}{Z_c}+c_y
\end{array}
\right.\
\tag{3}</script><p>å…¶ä¸­$f_x= \alpha f$ï¼Œ$f_y= \beta f$ï¼Œ$f$ çš„å•ä½ä¸ºç±³ï¼Œ $\alpha,\beta$ çš„å•ä½ä¸ºåƒç´ æ¯ç±³ï¼Œæ‰€ä»¥ $f_x,f_y $çš„å•ä½ä¸ºåƒç´  ã€‚</p>
<h2 id="ç›¸æœºåæ ‡ç³»â€”â€”åƒç´ åæ ‡ç³»"><a href="#ç›¸æœºåæ ‡ç³»â€”â€”åƒç´ åæ ‡ç³»" class="headerlink" title="ç›¸æœºåæ ‡ç³»â€”â€”åƒç´ åæ ‡ç³»"></a>ç›¸æœºåæ ‡ç³»â€”â€”åƒç´ åæ ‡ç³»</h2><script type="math/tex; mode=display">
\begin{bmatrix}u\\v\\1\end{bmatrix}=\frac{1}{Z_c}
\begin{bmatrix}f_x&0&c_x\\0&f_y&c_y\\0&0&1\end{bmatrix}
\begin{bmatrix}X_c\\Y_c\\Z_c\end{bmatrix}
\triangleq \lambda KP_c\tag{4}</script><p>å…¶ä¸­ï¼Œ$\lambda$ç§°ä¸ºé€†æ·±åº¦ï¼Œ$K$è¡¨ç¤ºç›¸æœºçš„å†…å‚ã€‚</p>
<ul>
<li>é‡‡ç”¨é€†æ·±åº¦çš„æ–¹å¼ï¼Œè¡¨è¾¾ä¸€ä¸ªç‚¹çš„åæ ‡$(x,y,z)$å˜æˆæˆäº†$1/Î» * [u,v,1]^T$ï¼Œå°†$3$ä¸ªä¼˜åŒ–å˜é‡ï¼Œå˜æˆäº†ä¸€ä¸ªä¼˜åŒ–å˜é‡ï¼ˆ$u,v$ä¸ºå½’ä¸€åŒ–ç›¸æœºåæ ‡ç³»ä¸‹çš„ä¸‰ç»´ç‚¹çš„åæ ‡ï¼Œé€šè¿‡è§‚æµ‹æ•°æ®æ˜¯å¯çŸ¥çš„ï¼‰ï¼Œæ‰€ä»¥ä¼˜åŒ–å˜é‡å°‘ã€‚</li>
<li>åŒæ—¶ï¼Œå¯¹äºæ·±åº¦å¾ˆå¤§çš„ç‚¹ï¼Œåœ¨æ•°å€¼ä¸Šå¾ˆå¤§ï¼Œé‡‡ç”¨é€†æ·±åº¦çš„æ–¹å¼ï¼Œå€’ä¸€ä¸‹ï¼Œæ•°å€¼ä¸Šå˜å°äº†ï¼Œæœ‰åˆ©äºä¼˜åŒ–è¿‡ç¨‹ä¸­æ•°å€¼çš„ç¨³å®šæ€§ï¼Œä¸ä¼šå› ä¸ºå¾ˆè¿œçš„ç‚¹ï¼ˆæ·±åº¦å€¼å¾ˆå¤§ï¼‰å¯¼è‡´ä¸€æ¬¡ä¼˜åŒ–è¿‡ç¨‹ä¸­å‡ºç°è¾ƒå¤§çš„è¯¯å·®å‡½æ•°çš„å˜æ¢ï¼Œå› æ­¤å†è¿œçš„ç‚¹ï¼ˆå¦‚å¤©ç©ºä¸­çš„ç‚¹ï¼‰ä¹Ÿèƒ½è¡¨è¾¾äº†ï¼Œæ‰€ä»¥èƒ½è¡¨è¾¾éå¸¸è¿œçš„ç‚¹ã€‚</li>
<li>å°†æ·±åº¦å€¼å€’æ•°ä¸€ä¸‹ï¼Œå˜æˆå°æ•°ï¼Œè·Ÿæ¥è¿‘é«˜æ–¯åˆ†å¸ƒçš„å‡½æ•°è¡¨è¾¾å½¢å¼ï¼Œæ–¹ä¾¿ä¼˜åŒ–ã€‚</li>
</ul>
<p><strong>å½’ä¸€åŒ–åæ ‡</strong></p>
<p>å¦å¤–æˆ‘ä»¬å¼•å…¥å½’ä¸€åŒ–åæ ‡çš„æ¦‚å¿µï¼Œå®ƒä½äºç›¸æœºå‰æ–¹ $z = 1$ å¤„çš„å¹³é¢ä¸Šã€‚è¯¥å¹³é¢ç§°ä¸º<strong>å½’ä¸€åŒ–å¹³é¢</strong>ã€‚  æ¯”å¦‚å¯¹$P_c$è¿›è¡Œå½’ä¸€åŒ–å¤„ç†å¾—åˆ°$\overline{P}$</p>
<script type="math/tex; mode=display">
\overline{P}=\frac{1}{Z_c}\begin{bmatrix}X_c\\Y_c\\Z_c\end{bmatrix}
=\begin{bmatrix}\frac{X_c}{Z_c}\\\frac{Y_c}{Z_c}\\1\end{bmatrix}\tag{5}</script><p>å› æ­¤ï¼Œå¯ä»¥å¾—åˆ°åƒç´ åæ ‡ä¸å½’ä¸€åŒ–åæ ‡ä¹‹é—´çš„å…³ç³»ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}u\\v\\1\end{bmatrix}=\frac{1}{Z_c}
\begin{bmatrix}f_x&0&c_x\\0&f_y&c_y\\0&0&1\end{bmatrix}
\begin{bmatrix}X_c\\Y_c\\Z_c\end{bmatrix}
\triangleq  K\overline{P}\tag{6}</script><p>å¯ä»¥å‘ç°ç›¸æœºå½’ä¸€åŒ–åæ ‡$\overline{P}$ç»è¿‡ç›¸æœºå†…å‚å°±å¯ä»¥å¾—åˆ°åƒç´ åæ ‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠåƒç´ åæ ‡$[u,v]^T$ ï¼Œçœ‹æˆå¯¹å½’ä¸€åŒ–å¹³é¢ä¸Šçš„ç‚¹è¿›è¡Œé‡åŒ–æµ‹é‡çš„ç»“æœã€‚  </p>
<h2 id="ç›¸æœºåæ ‡ç³»â€”â€”ä¸–ç•Œåæ ‡ç³»"><a href="#ç›¸æœºåæ ‡ç³»â€”â€”ä¸–ç•Œåæ ‡ç³»" class="headerlink" title="ç›¸æœºåæ ‡ç³»â€”â€”ä¸–ç•Œåæ ‡ç³»"></a>ç›¸æœºåæ ‡ç³»â€”â€”ä¸–ç•Œåæ ‡ç³»</h2><script type="math/tex; mode=display">
\begin{bmatrix}u\\v\\1\end{bmatrix}=\frac{1}{Z_c}
\begin{bmatrix}f_x&0&c_x\\0&f_y&c_y\\0&0&1\end{bmatrix}
(R_{cw}P_w+t)
\triangleq \lambda KT_{cw}P_w\tag{7}</script><h1 id="VOé‡æŠ•å½±è¯¯å·®"><a href="#VOé‡æŠ•å½±è¯¯å·®" class="headerlink" title="VOé‡æŠ•å½±è¯¯å·®"></a>VOé‡æŠ•å½±è¯¯å·®</h1><p>é‡æŠ•å½±è¯¯å·®å¦‚å›¾ç¤ºï¼Œæˆ‘ä»¬é€šè¿‡ç‰¹å¾åŒ¹é…å¯çŸ¥ï¼Œè§‚æµ‹å€¼$p_1$å’Œ$p_2$æ˜¯åŒä¸€ä¸ªç©ºé—´ç‚¹$P$çš„æŠ•å½±ï¼Œè€Œå®é™…ä¸Šæˆ‘ä»¬åˆ©ç”¨å¸§é—´çš„ä½å§¿ä¼°è®¡ï¼Œå¯ä»¥é€šè¿‡è§‚æµ‹å€¼$p_1$æ±‚å¾—å¯¹åº”çš„åŒ¹é…$\hat{p}_2$ï¼Œç†è®ºä¸Šï¼Œæˆ‘ä»¬çš„è®¡ç®—å€¼$\hat{p}_2$ä¸è§‚æµ‹å€¼$p_1$åº”è¯¥æ˜¯é‡åˆçš„ï¼Œä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬ä¼°è®¡çš„å¸§é—´ä½å§¿å¹¶ä¸æ˜¯å‡†ç¡®çš„ï¼Œå› æ­¤å°±ä¼šå‡ºç°è¯¯å·®$e$ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé‡æŠ•å½±è¯¯å·®ã€‚</p>
<p><img src="/images/ç›¸æœºæ¨¡å‹ç®€è¦åˆ†æ/image-20220505202300998.png" alt="image-20220505202300998" style="zoom:50%;" /></p>
<p>æŒ‰ç…§ä¹‹å‰çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯ä»¥æ¨å¯¼ï¼š</p>
<script type="math/tex; mode=display">
s_iu_i=K\exp(\xi^{\land})P_i\tag{8}</script><p>å…¶ä¸­ï¼Œ$u_i=[u_i,v_i]^T$è¡¨ç¤ºç‰¹å¾ç‚¹$P$çš„æŠ•å½±åæ ‡ï¼Œ$s_i$è¡¨ç¤ºæ·±åº¦ï¼Œ$K$è¡¨ç¤ºç›¸æœºå†…å‚ï¼Œ$\exp(\xi^{\land})$åˆ™æ˜¯å˜æ¢$T_{cw}$çš„æä»£æ•°å½¢å¼ï¼Œè¿™é‡Œçš„$P_i$æ˜¯ç‰¹å¾ç‚¹çš„ä¸–ç•Œåæ ‡ã€‚è¿™é‡Œç±»ä¼¼äºå…¬å¼$(7)$ã€‚</p>
<p>é€šè¿‡é‡æŠ•å½±è¯¯å·®çš„å®šä¹‰å¯çŸ¥ï¼Œæˆ‘ä»¬çš„ç›®çš„åœ¨äºä¸æ–­ä¼˜åŒ–å˜é‡$\xi$ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæœ€ä¼˜çš„$\xi$ä½¿å¾—$e$çš„å€¼è¾¾åˆ°æœ€å°ï¼Œå› æ­¤æ„å»ºæœ€å°äºŒä¹˜ï¼š</p>
<script type="math/tex; mode=display">
\xi^*=\arg\underset{\xi}{\min}\frac{1}{2}\sum^n_{i=1}\parallel u_i-\frac{1}{s_i}K\exp(\xi^{\land})P_i\parallel^2_2\tag{9}</script><p>ç„¶åå°±æ˜¯å¯¹å…¶ä¼˜åŒ–çš„å†…å®¹äº†ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒï¼š<a href="https://lukeyalvin.top/posts/20908.html#1-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE">PnP_é‡æŠ•å½±è¯¯å·®</a></p>
<h1 id="VIOé‡æŠ•å½±è¯¯å·®"><a href="#VIOé‡æŠ•å½±è¯¯å·®" class="headerlink" title="VIOé‡æŠ•å½±è¯¯å·®"></a>VIOé‡æŠ•å½±è¯¯å·®</h1><p>ç”±æ„å»ºäºVIOé‡æŠ•å½±è¯¯å·®çœç•¥äº†ç›¸æœºå†…å‚$K$ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬åœ¨å…¬å¼$(6)$çš„åŸºç¡€ä¸ŠæŠŠ$K$å»æ‰ï¼Œå°±å‘ç°<strong>ç‰¹å¾ç‚¹åœ¨ç›¸æœºå½’ä¸€åŒ–å¹³é¢çš„åæ ‡å°±æ˜¯åƒç´ åæ ‡</strong>$[u,v]^T$ï¼Œå…¶ä¸­$[u,v]^T$æ˜¯è§‚æµ‹å€¼ï¼Œç”±äº$T_{cw}$æ˜¯ä¼°è®¡å‡ºæ¥çš„ï¼Œæ‰€ä»¥ç­‰å¼å³è¾¹æ˜¯ä¼°è®¡å€¼ï¼Œç†æƒ³æƒ…å†µä¸‹æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}u\\v\\1\end{bmatrix}=
T_{cw}\begin{bmatrix}\frac{X_w}{Z_w}\\\frac{Y_w}{Z_w}\\1\end{bmatrix}=
\begin{bmatrix}\frac{X_c}{Z_c}\\\frac{Y_c}{Z_c}\\1\end{bmatrix}
\triangleq  \overline{P}</script><p>è€Œæ­¤æ—¶çš„é‡æŠ•å½±è¯¯å·®å°±å˜æˆäº†ï¼š</p>
<script type="math/tex; mode=display">
r_c=\begin{bmatrix}\frac{X_c}{Z_c}-u\\\frac{Y_c}{Z_c}-v\end{bmatrix}</script><p>ç†Ÿæ‚‰è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬å†æ¥å­¦ä¹ ä¸€ä¸‹VIOé‡æŠ•å½±è¯¯å·®ã€‚</p>
<p><img src="/images/ç›¸æœºæ¨¡å‹ç®€è¦åˆ†æ/image-20220505205125811.png" alt="image-20220505205125811" style="zoom: 33%;" /></p>
<p>ç‰¹å¾ç‚¹é€†æ·±åº¦åœ¨ç¬¬$i$å¸§ä¸­åˆå§‹åŒ–å¾—åˆ°ï¼Œåœ¨ç¬¬ $j$ å¸§åˆè¢«è§‚æµ‹åˆ°ï¼Œé¢„æµ‹å…¶åœ¨ç¬¬$ j$ ä¸­çš„åæ ‡ä¸ºï¼š  </p>
<script type="math/tex; mode=display">
\begin{bmatrix}X_{cj}\\Y_{cj}\\Z_{cj}\\1\end{bmatrix}=
T^{-1}_{bc}T^{-1}_{wb_j}T_{wb_i}T_{bc}
\begin{bmatrix}\frac{1}{\lambda}u_{ci}\\\frac{1}{\lambda}v_{ci}\\\frac{1}{\lambda}\\1\end{bmatrix}\tag{10}</script><p>è®¾ç‰¹å¾ç‚¹$P$ç»è¿‡ç‰¹å¾åŒ¹é…ï¼Œå¾—åˆ°åœ¨$i,j$ä¸¤å¸§ä¸Šçš„æŠ•å½±è§‚æµ‹å€¼ï¼Œç›®å‰ç‰¹å¾ç‚¹åœ¨$i$å¸§çš„è§‚æµ‹å€¼æ˜¯åˆå§‹åŒ–å€¼ï¼Œæ‰€ä»¥åœ¨$i$å¸§ç›¸æœºåæ ‡ä¸º$\begin{bmatrix}\frac{1}{\lambda}u_{cj}\\\frac{1}{\lambda}v_{cj}\\\frac{1}{\lambda}\\1\end{bmatrix}$ï¼Œç„¶åä½¿ç”¨ä¼°è®¡çš„ä½å§¿å˜æ¢$T^{-1}_{bc}T^{-1}_{wb_j}T_{wb_i}T_{bc}$è¿›è¡Œä¸€ç³»åˆ—åæ ‡å˜æ¢ï¼Œå¾—åˆ°çš„æ˜¯è¯¥ç‰¹å¾ç‚¹åœ¨ç¬¬$j$å¸§ä¼°è®¡çš„ç›¸æœºåæ ‡$\begin{bmatrix}X_{cj}\\Y_{cj}\\Z_{cj}\\1\end{bmatrix}$ï¼ŒæŠŠå®ƒåŒ–ä¸ºå½’ä¸€åŒ–åæ ‡ï¼Œå¾—åˆ°$\begin{bmatrix}\frac{X_{cj} }{Z_{cj} }\\\frac{Y_{cj} }{Z_{cj} }\end{bmatrix}$,æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å¿½ç•¥$K$çš„å‰æä¸‹ï¼Œå½’ä¸€åŒ–åæ ‡å°±æ˜¯åƒç´ åæ ‡ï¼Œç”±äºä¸€ç›´ç¬¬$j$å¸§ä¸‹çš„åƒç´ åæ ‡è§‚æµ‹å€¼ä¸º$\begin{bmatrix}u_{c_j}\\v_{c_j}\end{bmatrix}$,æ‰€ä»¥ï¼Œå°±å¯ä»¥æ„å»ºå¦‚ä¸‹çš„æ®‹å·®é¡¹ï¼š</p>
<script type="math/tex; mode=display">
r_c=\begin{bmatrix}\frac{X_{cj} }{Z_{cj} }-u\\\frac{Y_{cj} }{Z_{cj} }-v\end{bmatrix}\tag{11}</script>]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>ç›¸æœºæ¨¡å‹</tag>
        <tag>VO</tag>
      </tags>
  </entry>
  <entry>
    <title>çŠ¶æ€ä¼°è®¡æ¨¡å‹ä¸è´å¶æ–¯æ»¤æ³¢</title>
    <url>/posts/b04da399.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>åŸºäºæ»¤æ³¢å™¨çš„æ¿€å…‰SLAMæ–¹æ³•ï¼Œç›®å‰å·²ç»ç›¸å¯¹è½åï¼Œå› ä¸ºæ»¤æ³¢æ˜¯ç”¨äºä¼°è®¡å½“å‰çš„çŠ¶æ€ï¼Œå¦‚æœæˆ‘ä»¬ä¹‹å‰çš„æ•°æ®å‡ºç°é”™è¯¯ï¼Œæ˜¯æ²¡æœ‰åŠæ³•è¿›è¡Œä¿®æ­£çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•çš„æ•´ä½“æ•ˆæœå¹¶ä¸æ˜¯ç‰¹åˆ«å¥½ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•åœ¨æ•´ä¸ªæ¿€å…‰SLAMçš„å‘å±•ä¸­è¿˜æ˜¯å æœ‰å¾ˆé‡è¦çš„åœ°ä½çš„ï¼Œè€Œä¸”è¿™é‡Œè•´å«çš„å¾ˆå¤šæ•°å­¦çŸ¥è¯†æ˜¯éå¸¸é‡è¦çš„ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><strong>æ»¤æ³¢å™¨çš„æœ¬è´¨ï¼š</strong>ç»“åˆé¢„æµ‹å’Œè§‚æµ‹ï¼Œå¾—åˆ°â€œæœ€ç²¾ç¡®â€çš„åéªŒå€¼ã€‚è¿™ä¸ªç²¾ç¡®å€¼æ˜¯ç›¸å¯¹çš„ï¼Œå› ä¸ºå®é™…ä¸­ï¼Œé¢„æµ‹å’Œè§‚æµ‹å‡æ˜¯ä»ä¼ æ„Ÿå™¨è€Œæ¥çš„ï¼Œå› æ­¤æ»¤æ³¢å™¨çš„ä½œç”¨å°±æ˜¯ç»“åˆå„ä¸ªä¼ æ„Ÿå™¨å¾—åˆ°ä¸€ä¸ªæœ€å¥½çš„èåˆç»“æœã€‚è¿™å°±æ˜¯ä¸€ä¸ªæ•°æ®èåˆçš„è¿‡ç¨‹ï¼Œå…³äºæ•°æ®èåˆçš„ä»‹ç»å¯ä»¥å‚è€ƒï¼š<a href="https://lukeyalvin.top/posts/8369.html#%E6%95%B0%E6%8D%AE%E8%9E%8D%E5%90%88">æ•°æ®èåˆ</a></p>
<p><img src="/images/æ»¤æ³¢å™¨åŸºæœ¬åŸç†/image-20220504151009319.png" alt="image-20220504151009319" style="zoom:50%;" /></p>
<p>1) å®é™…ä¸­é¢„æµ‹å¾€å¾€ä»IMUã€ç¼–ç å™¨ç­‰ä¼ æ„Ÿå™¨é€’æ¨è€Œæ¥ï¼›<br>2) è§‚æµ‹å¾€å¾€ä»GPSã€é›·è¾¾ã€ç›¸æœºç­‰ä¼ æ„Ÿå™¨è€Œæ¥ï¼›<br>3) åéªŒä¸ºèåˆåçš„ç»“æœï¼Œå³å®šä½æ¨¡å—çš„è¾“å‡ºã€‚</p>
<h1 id="çŠ¶æ€ä¼°è®¡æ¨¡å‹"><a href="#çŠ¶æ€ä¼°è®¡æ¨¡å‹" class="headerlink" title="çŠ¶æ€ä¼°è®¡æ¨¡å‹"></a>çŠ¶æ€ä¼°è®¡æ¨¡å‹</h1><p>å®é™…çŠ¶æ€ä¼°è®¡ä»»åŠ¡ä¸­ï¼Œå¾…ä¼°è®¡çš„åéªŒæ¦‚ç‡å¯†åº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<script type="math/tex; mode=display">
p(x_k|\tilde{x}_0,v_{1:k},y_{0:k})\tag{1}</script><p>å…¶ä¸­ï¼š$\tilde{x}_0$è¡¨ç¤ºçš„æ˜¯çŠ¶æ€åˆå§‹å€¼ï¼›$v_{1:k}$è¡¨ç¤ºä»ç¬¬1æ—¶åˆ»åˆ°ç¬¬$k$æ—¶åˆ»çš„è¾“å…¥ï¼›$y_{0:k}$è¡¨ç¤ºä»ç¬¬0æ—¶åˆ»åˆ°ç¬¬$k$æ—¶åˆ»çš„è§‚æµ‹ã€‚</p>
<p>å› æ­¤ï¼Œæ»¤æ³¢é—®é¢˜å¯ä»¥ç›´è§‚è¡¨ç¤ºä¸ºï¼Œæ ¹æ®æ‰€æœ‰å†å²æ•°æ®ï¼ˆè¾“å…¥ã€è§‚æµ‹ã€åˆå§‹çŠ¶æ€ï¼‰ï¼Œå¾—å‡ºçš„æœ€ç»ˆçš„èåˆç»“æœã€‚å†å²æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å›¾æ¨¡å‹è¡¨ç¤ºï¼Œ</p>
<p><img src="/images/æ»¤æ³¢å™¨åŸºæœ¬åŸç†/image-20220504205031587.png" alt="image-20220504205031587" style="zoom: 33%;" /></p>
<p>å›¾æ¨¡å‹ä¸­ä½“ç°äº†<strong>é©¬å°”å¯å¤«æ€§</strong>ï¼Œå³å½“å‰çŠ¶æ€åªè·Ÿå‰ä¸€æ—¶åˆ»çŠ¶æ€ç›¸å…³ï¼Œå’Œå…¶ä»–å†å²æ—¶åˆ»çŠ¶æ€æ— å…³ã€‚æ•°å­¦è¡¨è¾¾è¯¥æ€§è´¨ï¼Œ</p>
<script type="math/tex; mode=display">
\left\{
\begin{aligned}
è¿åŠ¨æ–¹ç¨‹ï¼šx_k&=f(x_{k-1},v_k,w_k)\\
è§‚æµ‹æ–¹ç¨‹ï¼šy_k&=g(x_k,n_k)
\end{aligned}
\right.\tag{2}</script><h1 id="è´å¶æ–¯æ»¤æ³¢"><a href="#è´å¶æ–¯æ»¤æ³¢" class="headerlink" title="è´å¶æ–¯æ»¤æ³¢"></a>è´å¶æ–¯æ»¤æ³¢</h1><p>æ ¹æ®è´å¶æ–¯å…¬å¼ï¼Œ$k$æ—¶åˆ»åéªŒæ¦‚ç‡å¯†åº¦å¯ä»¥è¡¨ç¤ºä¸º</p>
<script type="math/tex; mode=display">
\begin{align*}
p(x_k|\tilde{x}_0,v_{1:k},y_{0:k})&=\frac
{p(y_k|x_k,\tilde{x}_0,v_{1:k},y_{0:k-1})p(x_k|\tilde{x}_0,v_{1:k},y_{0:k-1})}
{p(y_k|\tilde{x}_0,v_{1:k},y_{0:k-1})}\\
&=\eta p(y_k|x_k,\tilde{x}_0,v_{1:k},y_{0:k-1})p(x_k|\tilde{x}_0,v_{1:k},y_{0:k-1})
\end{align*}\tag{3}</script><p>æ ¹æ®è§‚æµ‹æ–¹ç¨‹ï¼Œ$y_k$åªä¸$x_k$ç›¸å…³ï¼Œå› æ­¤ä¸Šå¼å¯ä»¥ç®€å†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
p(x_k|\tilde{x}_0,v_{1:k},y_{0:k})=\eta p(y_k|x_k)p(x_k|\tilde{x}_0,v_{1:k},y_{0:k-1})\tag{4}</script><p>åº”ç”¨ç³»ç»Ÿçš„é©¬å°”å¯å¤«æ€§è¿›ä¸€æ­¥åŒ–ç®€å…¬å¼ï¼Œ</p>
<script type="math/tex; mode=display">
\begin{align*}
&p(x_k|\tilde{x}_0,v_{1:k},y_{0:k-1})\\
&=\int p(x_k,x_{k-1}|\tilde{x}_0,v_{1:k},y_{0:k-1})dx_{k-1}\\
&=\int p(x_k|x_{k-1}ï¼Œ\tilde{x}_0,v_{1:k},y_{0:k-1})p(x_{k-1}|\tilde{x}_0,v_{1:k},y_{0:k-1})dx_{k-1}\\
&=\int p(x_k|x_{k-1},v_{k})p(x_{k-1}|\tilde{x}_0,v_{1:k},y_{0:k-1})dx_{k-1}
\end{align*}\tag{3}</script><p>ç»è¿‡ä»¥ä¸ŠåŒ–ç®€ï¼Œæœ€ç»ˆåéªŒæ¦‚ç‡å¯ä»¥å†™ä¸º</p>
<p><img src="/images/æ»¤æ³¢å™¨åŸºæœ¬åŸç†/image-20220504211503741.png" alt="image-20220504211503741" style="zoom: 50%;" /></p>
<p>æ ¹æ®ä»¥ä¸Šç»“æœï¼Œå¯ä»¥ç”»å‡ºè´å¶æ–¯æ»¤æ³¢çš„ä¿¡æ¯æµå›¾å¦‚ä¸‹</p>
<p><img src="/images/æ»¤æ³¢å™¨åŸºæœ¬åŸç†/image-20220504210156815.png" alt="image-20220504210156815"></p>
<p>è´å¶æ–¯æ»¤æ³¢åˆ†ä¸ºå¾ˆå¤šç§å®ç°å½¢å¼ï¼š</p>
<p><img src="/images/æ»¤æ³¢å™¨åŸºæœ¬åŸç†/image-20220504211643228.png" alt="image-20220504211643228" style="zoom: 50%;" /></p>
<p>å®é™…ä¸­ï¼Œç²’å­æ»¤æ³¢ï¼ˆPFï¼‰å¤šç”¨äº(æ—©æœŸçš„)2Dæ¿€å…‰SLAMæ–¹æ¡ˆä¸­ã€‚åœ¨é«˜æ–¯å‡è®¾å‰æä¸‹ï¼Œç”¨è´å¶æ–¯æ»¤æ³¢çš„åŸå§‹å½¢å¼æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥åˆ©ç”¨é«˜æ–¯çš„ç‰¹å¾å¾—åˆ°ç®€åŒ–å½¢å¼ï¼Œå³å¹¿ä¹‰é«˜æ–¯æ»¤æ³¢ï¼Œåé¢KFã€EKFã€IEKFã€UKFçš„æ¨å¯¼å‡é‡‡ç”¨è¿™ç§å½¢å¼ï¼Œåªæœ‰PFä¾‹å¤–ï¼Œå› ä¸ºå®ƒæ˜¯é’ˆå¯¹éé«˜æ–¯çš„ã€‚</p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
      </categories>
      <tags>
        <tag>æ»¤æ³¢å™¨</tag>
        <tag>æ¦‚ç‡åŸºç¡€</tag>
        <tag>è´å¶æ–¯æ»¤æ³¢</tag>
      </tags>
  </entry>
  <entry>
    <title>ç‚¹äº‘åœ°å›¾çš„å»ºç«‹ã€ç•¸å˜è¡¥å¿å’Œå®šä½</title>
    <url>/posts/f737dac5.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>ç‚¹äº‘åœ°å›¾çš„å»ºç«‹</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="å»ºå›¾æµç¨‹"><a href="#å»ºå›¾æµç¨‹" class="headerlink" title="å»ºå›¾æµç¨‹"></a>å»ºå›¾æµç¨‹</h1><p>å»ºå›¾æµç¨‹è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™æ˜¯å‡†ç¡®ã€é«˜æ•ˆåœ°æŠŠ<strong>é‡Œç¨‹è®¡ç›¸å¯¹ä½å§¿</strong>ã€<strong>å›ç¯ç›¸å¯¹ä½å§¿</strong>ã€<strong>æƒ¯å¯¼å…ˆéªŒä½å§¿</strong>è¿›è¡Œèåˆã€‚</p>
<p><img src="/images/ç‚¹äº‘åœ°å›¾çš„å»ºç«‹/image-20220503190523343.png" alt="image-20220503190523343" style="zoom: 33%;" /></p>
<ul>
<li>è½¨è¿¹å¯¹é½</li>
</ul>
<p>é‡Œç¨‹è®¡çš„åˆå§‹ä½å§¿æ˜¯ä»æ¿€å…‰é›·è¾¾æ”¶åˆ°ç¬¬ä¸€å¸§ç‚¹äº‘å¼€å§‹çš„ï¼Œå®ƒçš„åˆå§‹ä½å§¿å°±æ˜¯å•ä½é˜µï¼Œå¹³ç§»å’Œæ—‹è½¬å‡ä¸º0ï¼›è€Œå¯¹äºæƒ¯å¯¼è€Œè¨€ï¼Œå®ƒçš„æ—‹è½¬æ˜¯ä»¥ä¸œåŒ—å¤©åæ ‡ç³»ä¸ºå‡†çš„ï¼Œå› æ­¤å®ƒçš„åˆå§‹ä½å§¿å¹¶ä¸ä¸€å®šä¸º0ï¼›å› æ­¤é‡Œç¨‹è®¡ç¬¬ä¸€å¸§ä¹‹é—´çš„ä½å§¿å’Œæƒ¯å¯¼ç¬¬ä¸€å¸§çš„ä½å§¿å‡ºç°äº†ç›¸å¯¹æ—‹è½¬ï¼Œè¿™ä¼šå¯¼è‡´é‡Œç¨‹è®¡å’Œå…ˆéªŒä¹‹é—´å‡ºç°å¾ˆå¤§çš„è¯¯å·®ï¼Œæ‰€ä»¥æˆ‘ä»¬æ±‚ç¬¬ä¸€å¸§æ—¶é‡Œç¨‹è®¡å’Œæƒ¯å¯¼ä½å§¿ä¹‹é—´çš„ç›¸å¯¹å˜æ¢å³å¯ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠé‡Œç¨‹è®¡çš„è½¨è¿¹æ‹‰åˆ°ä¸æƒ¯å¯¼è½¨è¿¹ï¼ˆä¸€èˆ¬å’Œå°è½¦è¡Œè¿›æ–¹å‘ä¸€è‡´ï¼‰ä¸€è‡´çš„æ–¹å‘ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯<strong>è½¨è¿¹å¯¹é½</strong>ã€‚</p>
<ul>
<li>å›ç¯æ£€æµ‹</li>
</ul>
<p>è¿™é‡Œæ¶‰åŠä¸€ä¸ªç®€å•çš„å›ç¯æ£€æµ‹çš„ç­–ç•¥ï¼Œæ¯”å¦‚å¦‚ä¸‹çš„å›ç¯ï¼Œæˆ‘ä»¬æ£€æµ‹å›ç¯ä¸å¯èƒ½æ¯ä¸€å¸§éƒ½è¿›è¡Œæ£€æµ‹ï¼Œè€Œæ˜¯åœ¨ä¸€å®šçš„èŒƒå›´å†…ï¼Œå¹¶ä¸”ä¸¤å¸§ä¹‹é—´çš„æ—¶é—´å·®å¿…é¡»å¤§äºä¸€å®šçš„é˜ˆå€¼ï¼Œå¦å¤–å½“æŸä¸€å¸§è¢«æ£€æµ‹ä¸ºé—­ç¯äº†ï¼Œé‚£ä¹ˆå®ƒç›¸é‚»çš„ä¸€äº›å¸§åˆ™ä¸åšé‡å¤çš„æ£€æµ‹ï¼ŒæŠŠç›¸é‚»å¸§åšâ€œå¸æ”¶åŒ–â€ä¹‹åï¼Œåœ¨åç»­æ®µè¿›è¡Œé—­ç¯æ£€æµ‹ã€‚</p>
<p><img src="/images/ç‚¹äº‘åœ°å›¾çš„å»ºç«‹/image-20220503191428273.png" alt="image-20220503191428273" style="zoom: 50%;" /></p>
<ul>
<li>ä¼˜åŒ–å‘¨æœŸ</li>
</ul>
<p>å›ºå®šä¼˜åŒ–å‘¨æœŸï¼Œå¯ä»¥åœ¨ä¸€å®šå‘¨æœŸå†…è¿›è¡Œä¼˜åŒ–ï¼Œå¯ä»¥åœ¨è¯¯å·®ç´¯ç§¯ç›¸å¯¹è¾ƒå°çš„æƒ…å†µä¸‹è¿›è¡Œä¼˜åŒ–ï¼Œå› ä¸ºç´¯ç§¯è¯¯å·®å°ï¼Œä¼˜åŒ–æ—¶é—´çŸ­ï¼Œè¿™æ ·å‰ç«¯é‡Œç¨‹è®¡æ„å»ºè¿‡ç¨‹ä¸­å¯ä»¥åŒæ­¥å®ç°åç«¯çš„ä¼˜åŒ–ï¼Œå¯ä»¥æé«˜æ•ˆç‡ã€‚</p>
<h1 id="ç•¸å˜è¡¥å¿"><a href="#ç•¸å˜è¡¥å¿" class="headerlink" title="ç•¸å˜è¡¥å¿"></a>ç•¸å˜è¡¥å¿</h1><ul>
<li><strong>äº§ç”ŸåŸå› ï¼š</strong></li>
</ul>
<p>ç”±äºä¸€å¸§ç‚¹äº‘ä¸­çš„æ¿€å…‰ç‚¹æ˜¯ä¸åŒæ—¶åˆ»é‡‡é›†çš„ï¼Œæ¿€å…‰ç‚¹çš„åæ ‡åŸç‚¹æ˜¯é‡‡é›†æ—¶åˆ»çš„é›·è¾¾ä½å§¿ï¼Œé›·è¾¾åœ¨ä¸åŒæ—¶åˆ»çš„ä½å§¿æœ‰å˜åŒ–çš„æ—¶å€™ï¼Œå„ä¸ªæ¿€å…‰ç‚¹åŸç‚¹ä¸ä¸€è‡´ï¼Œæ‹¼æ¥æˆä¸€å¸§æ—¶ï¼Œç‚¹äº‘çš„å½¢çŠ¶ä¾¿å’Œå®é™…ç‰©ä½“å½¢çŠ¶ä¸ä¸€è‡´ã€‚</p>
<p><img src="/images/ç‚¹äº‘åœ°å›¾çš„å»ºç«‹/image-20220503193403250.png" alt="image-20220503193403250" style="zoom:50%;" /></p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220411193701848.png" alt="image-20220411193701848" style="zoom:33%;" /></p>
<ul>
<li><strong>è¡¥å¿æ–¹æ³•ï¼š</strong></li>
</ul>
<p>å¯¹äºæ¯ä¸€ä¸ªæ¿€å…‰ç‚¹åæ ‡åšè¡¥å¿ï¼Œè¡¥å¿é‡ä¸ºæ¿€å…‰ç‚¹äº‘ä¸åŸç‚¹ï¼ˆå³å½“æ—¶æ¿€å…‰é›·è¾¾åæ ‡ï¼‰ç›¸å¯¹äºè¯¥å¸§èµ·å§‹æ—¶åˆ»çš„å˜æ¢ã€‚</p>
<h2 id="è®¡ç®—ç›¸å¯¹åæ ‡"><a href="#è®¡ç®—ç›¸å¯¹åæ ‡" class="headerlink" title="è®¡ç®—ç›¸å¯¹åæ ‡"></a>è®¡ç®—ç›¸å¯¹åæ ‡</h2><p>åœ¨åŒ€é€Ÿæ¨¡å‹å‡è®¾å‰æä¸‹ï¼Œåæ ‡ = è¿åŠ¨Ã—æ—¶é—´ã€‚</p>
<p>å‡è®¾ç¬¬ä¸€å¸§ç‚¹äº‘çš„èµ·å§‹ä½å§¿ä¸ºï¼š</p>
<script type="math/tex; mode=display">
T_0=\begin{bmatrix}R_0&t_0\\0&1\end{bmatrix}\tag{1}</script><p>ç¬¬$i$ä¸ªæ¿€å…‰ç‚¹é‡‡é›†æ—¶ï¼Œé›·è¾¾çš„ä½å§¿ä¸ºï¼š</p>
<script type="math/tex; mode=display">
T_i=\begin{bmatrix}R_i&t_i\\0&1\end{bmatrix}\tag{2}</script><p>ç¬¬$i$ä¸ªæ¿€å…‰ç‚¹çš„åæ ‡ä¸ºï¼š</p>
<script type="math/tex; mode=display">
P_i=[p_{ix} \ p_{iy} \ p_{iz}]^T\tag{3}</script><p>åˆ™ç¬¬$i$ä¸ªæ¿€å…‰ç‚¹è¡¥å¿ç•¸å˜åçš„åæ ‡åº”è¯¥ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\overline{P}_i=T_0^{-1}T_iP_i\tag{4}</script><p>ä¸Šå¼å¯ä»¥ç†è§£ä¸ºï¼Œåªéœ€è¦è®¡ç®—$0$åˆ°$i$æ—¶åˆ»ï¼Œæ¿€å…‰é›·è¾¾çš„ç›¸å¯¹æ—‹è½¬å’Œç›¸å¯¹å¹³ç§»å˜æ¢å³å¯ã€‚</p>
<p>å®é™…ä¸Šï¼Œé›·è¾¾ç‚¹äº‘æ˜¯å±€éƒ¨åæ ‡ç³»ä¸‹çš„è¡¨ç¤ºï¼Œå½“ä»¥0æ—¶åˆ»é›·è¾¾çš„ä½å§¿ä¸ºåŸºå‡†åæ ‡ç³»çš„æ—¶å€™ï¼Œæ­¤æ—¶$T_0$ä¸ºå•ä½é˜µï¼Œ$T_i$å³ä¸º$0$åˆ°$i$æ—¶åˆ»çš„ç›¸å¯¹æ—‹è½¬å’Œå¹³ç§»ã€‚</p>
<p>æ­¤æ—¶æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
R_i&=\omega\nabla t\\
t_i&=V\nabla t
\end{align*}\tag{5}</script><p>å³ï¼Œåªéœ€è¦çŸ¥é“$0$åˆ°$i$æ—¶åˆ»çš„å¹³å‡è§’é€Ÿåº¦å’Œå¹³å‡é€Ÿåº¦å³å¯ã€‚</p>
<p><strong>é‚£ä¹ˆæ—¶é—´å·®å¦‚ä½•è¿›è¡Œæ±‚å–å‘¢ï¼Ÿ</strong></p>
<p>ç”±äºæ˜¯é¡ºåºæ‰«æï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡$\arctan\frac{y}{x}$æ¥è®¡ç®—å‡ºè¯¥æ¿€å…‰ç‚¹ç›¸å¯¹äºç¬¬ä¸€ä¸ªæ¿€å…‰ç‚¹æ—‹è½¬è¿‡çš„è§’åº¦$\beta$ï¼Œå·²çŸ¥é›·è¾¾å†…éƒ¨æ—‹è½¬$360Â°$ç”¨äº†$100ms$ï¼Œé‚£ä¹ˆæ—‹è½¬$\beta$è§’åº¦æ‰€ç”¨çš„æ—¶é—´å°±å¯ä»¥è®¡ç®—å‡ºæ¥äº†ã€‚</p>
<p>ä½†æ˜¯ç”±äº$\arctan\frac{y}{x}\in[-90Â°,90Â°]$çš„èŒƒå›´ã€‚è€Œé›·è¾¾çš„å‘¨æœŸæ˜¯$360Â°$ï¼Œå› æ­¤è®¡ç®—å‡ºæ¥çš„$\arctan\frac{y}{x}$è¿˜éœ€è¦è¿›è¡Œè§’åº¦è¡¥å¿ã€‚</p>
<p>ä¸‹é¢æ‘˜è‡ªï¼š<a href="https://zhuanlan.zhihu.com/p/109379384">ä»é›¶å¼€å§‹åšè‡ªåŠ¨é©¾é©¶å®šä½(å…«): ç‚¹äº‘ç•¸å˜è¡¥å¿</a></p>
<h2 id="ç‚¹äº‘æ•°æ®æ’åˆ—æ–¹å¼"><a href="#ç‚¹äº‘æ•°æ®æ’åˆ—æ–¹å¼" class="headerlink" title="ç‚¹äº‘æ•°æ®æ’åˆ—æ–¹å¼"></a>ç‚¹äº‘æ•°æ®æ’åˆ—æ–¹å¼</h2><p>åšæ¿€å…‰å®šä½çš„å¤šæ•°éƒ½çœ‹è¿‡loamçš„ç¨‹åºï¼Œä¼šå‘ç°åœ¨è®¡ç®—æ¿€å…‰ç‚¹é‡‡é›†æ—¶åˆ»è¿™ä¸€æ­¥ä¸Šæˆ‘ä»¬å’Œå®ƒæ˜¯æœ‰åŒºåˆ«çš„ï¼Œè¿™å°±æ˜¯è¿™ä¸ªç‚¹äº‘æ’åˆ—æ–¹å¼å¯¼è‡´çš„ã€‚</p>
<p>ä»æ¿€å…‰é›·è¾¾åŸç†ä¸Šè®²ï¼Œæ¯æ¬¡é‡‡é›†ä¸€åˆ—ï¼Œè¾¹æ‰«æè¾¹é‡‡é›†ï¼Œæ‰€ä»¥æ•°æ®åº”è¯¥æ˜¯ä¸€åˆ—ä¸€åˆ—åœ°å­˜å‚¨ï¼Œè¿™æ ·ä¿è¯ç¬¬ä¸€ä¸ªç‚¹ä¸€å®šæ˜¯æœ€æ—©æ—¶åˆ»è¢«é‡‡é›†çš„ï¼Œæœ€åä¸€ä¸ªç‚¹æ˜¯æœ€æ™šæ—¶åˆ»è¢«é‡‡é›†çš„ï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªå¥½å¤„ï¼Œé‚£å°±æ˜¯å¯ä»¥è®¡ç®—é›·è¾¾çœŸæ­£æ‰«æäº†å¤šå°‘åº¦ï¼Œå› ä¸ºå®ƒå°±æ˜¯ç¬¬ä¸€ä¸ªç‚¹å’Œæœ€åä¸€ä¸ªç‚¹çš„è§’åº¦å·®ã€‚</p>
<p>è€Œåœ¨è¿™ä¸ªbagæ–‡ä»¶é‡Œï¼Œæ˜¯æŒ‰è¡Œå­˜å‚¨çš„ï¼Œä¹Ÿå°±æ˜¯å…ˆç´¢å¼•ç¬¬ä¸€æ ¹çº¿ä¸Šçš„ç‚¹ï¼Œå†ç¬¬äºŒæ ¹ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æœ€åä¸€æ ¹ï¼Œè¿™æ ·çš„ç¼ºç‚¹æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡è¿™ä¸ªæ¥è®¡ç®—é›·è¾¾å®é™…æ‰«æè§’åº¦äº†ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªç‚¹ä¸ä¸€å®šæ˜¯æ—¶é—´æœ€æ—©çš„ç‚¹ï¼Œå¦‚æœç¬¬ä¸€æ ¹çº¿å‰åŠéƒ¨åˆ†è¢«é®æŒ¡ï¼Œé‚£ä¹ˆä½ å°±ä¼šå¾—åˆ°é”™è¯¯çš„è®¡ç®—è§’åº¦ï¼Œæ‰€ä»¥è¿™æ—¶å€™ï¼Œåƒæˆ‘ä»¬è¿™æ ·ç›´æ¥å¼ºåˆ¶æŠŠæ‰«æè§’åº¦è®¾ç½®æˆ360åº¦æ˜¯æ›´ç¨³å¦¥çš„ï¼Œç¼ºç‚¹å°±æ˜¯å®ƒä¸å¤Ÿç²¾ç¡®ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜çš„åŸå› åº”è¯¥æ˜¯æ•°æ®çš„äºŒæ¬¡åŠ å·¥å¯¼è‡´çš„ï¼Œkittiå…ˆæŠŠæ•°æ®å­˜æˆbinæ–‡ä»¶ï¼Œkitti2bagå†è½¬æˆbagæ–‡ä»¶ï¼Œæ”¹å˜äº†åŸæ¥çš„æ’åˆ—æ–¹å¼ã€‚ä¸€èˆ¬é›·è¾¾é©±åŠ¨ä¸­è¾“å‡ºçš„æ•°æ®éƒ½æ˜¯æŒ‰åˆ—æ’åˆ—çš„ã€‚</p>
<p>æ‰€ä»¥å¦‚æœå„ä½ä»¥åä½¿ç”¨çš„æ•°æ®æ˜¯åˆ—æ’åˆ—çš„ï¼Œé‚£ä¹ˆæ—¶é—´è®¡ç®—ä¸Šå¯ä»¥ä½¿ç”¨loamé‡Œçš„æ–¹æ³•ï¼Œä¼šæ›´å‡†ç¡®ã€‚</p>
<h1 id="å®šä½æµç¨‹"><a href="#å®šä½æµç¨‹" class="headerlink" title="å®šä½æµç¨‹"></a>å®šä½æµç¨‹</h1><p>åœ¨åœ°å›¾åŒ¹é…çš„è¿‡ç¨‹ä¸­ï¼Œé²æ£’æ€§å’Œè¿è¡Œé€Ÿåº¦ç‰¹åˆ«é‡è¦ï¼Œå› æ­¤å®é™…ä¸­ï¼ŒåŸºäºNDTçš„åŒ¹é…ä½¿ç”¨æ›´ä¸ºå¹¿æ³›ã€‚ç”±äºNDTåŒ¹é…éœ€è¦è¾ƒå‡†ç¡®çš„åˆå§‹ä½å§¿ï¼Œå› æ­¤åœ¨å®šä½ä¹‹å‰éœ€è¦åˆå§‹åŒ–ç¯èŠ‚ï¼Œç»™å‡ºè½½ä½“çš„åˆå§‹ä½å§¿ã€‚<br>æŒ‰ç…§éš¾åº¦ç”±ä½åˆ°é«˜ï¼Œå¸¸è§çš„åˆå§‹åŒ–éœ€æ±‚æœ‰è¿™æ ·å‡ ç§ï¼š</p>
<p>1ï¼‰å·²çŸ¥ä½å§¿çš„åˆå§‹åŒ–<br>2ï¼‰ä½ç½®å·²çŸ¥è€Œå§¿æ€æœªçŸ¥çš„åˆå§‹åŒ–<br>3ï¼‰ä½ç½®å’Œå§¿æ€å‡æœªçŸ¥çš„åˆå§‹åŒ–</p>
<p><img src="/images/ç‚¹äº‘åœ°å›¾çš„å»ºç«‹/image-20220504092212456.png" alt="image-20220504092212456" style="zoom: 50%;" /></p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
      </categories>
      <tags>
        <tag>æ¿€å…‰SLAM</tag>
        <tag>å»ºå›¾</tag>
        <tag>ç•¸å˜è¡¥å¿</tag>
      </tags>
  </entry>
  <entry>
    <title>åç«¯ä½å§¿å›¾ä¼˜åŒ–</title>
    <url>/posts/aed03174.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>BA èƒ½ç²¾ç¡®åœ°ä¼˜åŒ–æ¯ä¸ªç›¸æœºä½å§¿ä¸ç‰¹å¾ç‚¹ä½ç½®ã€‚ä¸è¿‡åœ¨æ›´å¤§çš„åœºæ™¯ä¸­ï¼Œå¤§é‡ç‰¹å¾ç‚¹çš„å­˜åœ¨ä¼šä¸¥é‡é™ä½è®¡ç®—æ•ˆç‡ï¼Œå¯¼è‡´è®¡ç®—é‡è¶Šæ¥è¶Šå¤§ä»¥è‡³äºæ— æ³•å®æ—¶åŒ–ã€‚æœ¬è®²ä»‹ç»ä¸¤ç§åœ¨æ›´å¤§åœºæ™¯ä¸‹ä½¿ç”¨çš„åç«¯ä¼˜åŒ–æ–¹æ³•ï¼šä½å§¿å›¾ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="åç«¯ä¼˜åŒ–çš„åŸºæœ¬åŸç†"><a href="#åç«¯ä¼˜åŒ–çš„åŸºæœ¬åŸç†" class="headerlink" title="åç«¯ä¼˜åŒ–çš„åŸºæœ¬åŸç†"></a>åç«¯ä¼˜åŒ–çš„åŸºæœ¬åŸç†</h1><ul>
<li><strong>åç«¯ä¼˜åŒ–çš„ç›®çš„ï¼š</strong></li>
</ul>
<p>åˆ©ç”¨å›ç¯æ£€æµ‹ç»“æœå’Œæƒ¯å¯¼å…ˆéªŒä½å§¿ä¿®æ­£é‡Œç¨‹è®¡è¯¯å·®ï¼Œè€Œå›ç¯åœ¨æ­¤æä¾›çš„æ˜¯ä¸¤å¸§ä¹‹é—´çš„ç›¸å¯¹ä½å§¿ã€‚</p>
<ul>
<li><strong>åç«¯ä¼˜åŒ–çš„æ–¹æ³•ï¼š</strong></li>
</ul>
<p>å‡è®¾é©¬å°”å¯å¤«æ€§ï¼Œç®€å•çš„ä¸€é˜¶é©¬æ°æ€§è®¤ä¸ºï¼Œ$k $æ—¶åˆ»çŠ¶æ€åªä¸$ k âˆ’ 1 $æ—¶åˆ»çŠ¶æ€æœ‰å…³ï¼Œè€Œä¸å†ä¹‹å‰çš„æ— å…³ã€‚å¦‚æœåšå‡ºè¿™æ ·çš„å‡è®¾ï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä»¥æ‰©å±•å¡å°”æ›¼æ»¤æ³¢ï¼ˆEKFï¼‰ä¸ºä»£è¡¨çš„æ»¤æ³¢å™¨æ–¹æ³•ã€‚åœ¨æ»¤æ³¢æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¼šä»æŸæ—¶åˆ»çš„çŠ¶æ€ä¼°è®¡ï¼Œæ¨å¯¼åˆ°ä¸‹ä¸€ä¸ªæ—¶åˆ»ã€‚</p>
<p>å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯ä¾ç„¶è€ƒè™‘ $k$ æ—¶åˆ»çŠ¶æ€ä¸ä¹‹å‰æ‰€æœ‰çŠ¶æ€çš„å…³ç³»ï¼Œæ­¤æ—¶å°†å¾—åˆ°éçº¿æ€§ä¼˜åŒ–ä¸ºä¸»ä½“çš„ä¼˜åŒ–æ¡†æ¶ã€‚åœ¨è§†è§‰SLAMä¸­éçº¿æ€§ä¼˜åŒ–å¦‚BAä¸å›¾ä¼˜åŒ–ã€ä½å§¿å›¾ä¼˜åŒ–ç­‰ã€‚</p>
<ul>
<li><strong>æ€»ç»“è€Œè¨€ï¼Œåç«¯ä¼˜åŒ–çš„è§‚æµ‹ä¸»è¦ä»è¿™ä¸‰ä¸ªæ–¹é¢ï¼š</strong></li>
</ul>
<p>â‘ è¿ç»­ä¸¤å¸§ä¹‹é—´çš„ç›¸å¯¹ä½å§¿è§‚æµ‹ï¼ˆé‡Œç¨‹è®¡ï¼‰</p>
<p>â‘¡é—­ç¯åŒ¹é…å¾—åˆ°çš„ç›¸å¯¹ä½å§¿è§‚æµ‹ï¼ˆé—­ç¯æ£€æµ‹ï¼‰</p>
<p>â‘¢ç»„åˆå¯¼èˆªæä¾›çš„å…ˆéªŒä½å§¿ä¼°è®¡ï¼ˆIMUï¼‰</p>
<p>â‘ â‘¡çš„è§‚æµ‹æ„æˆäº†<strong>åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£</strong>ï¼Œâ‘ â‘¢çš„è§‚æµ‹æ„æˆäº†<strong>åŸºäºå…ˆéªŒè§‚æµ‹çš„ä½å§¿ä¿®æ­£ï¼Œ</strong>å½“ç„¶ä¸‰è€…ä¹Ÿå¯ä»¥ç»“åˆä½¿ç”¨ã€‚ä¸‰è€…çš„å…³ç³»æ˜¯ï¼Œâ‘¡â‘¢åœ¨â‘ çš„åŸºç¡€ä¸Šå¯¹ä½å§¿è¿›è¡Œä¿®æ­£ï¼Œè¿™é‡Œå¯¹é‡Œç¨‹è®¡çš„å¹³æ»‘æ€§æœ‰ä¸€å®šçš„è¦æ±‚ã€‚</p>
<h1 id="åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£"><a href="#åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£" class="headerlink" title="åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£"></a>åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£</h1><h2 id="å›ç¯æ£€æµ‹"><a href="#å›ç¯æ£€æµ‹" class="headerlink" title="å›ç¯æ£€æµ‹"></a>å›ç¯æ£€æµ‹</h2><p><img src="/images/åç«¯ä½å§¿å›¾ä¼˜åŒ–/fc51f93b-322d-475b-bfa5-cae57a6750f9.jpeg" alt="å›ç¯æ£€æµ‹æ˜¯ä»€ä¹ˆ"></p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ä»€ä¹ˆæ˜¯å›ç¯æ£€æµ‹ï¼Œå¦‚æ˜¯ä¸Šå›¾æ‰€ç¤ºï¼Œå¯¹äºé‡Œç¨‹è®¡è€Œè¨€ï¼Œå®ƒç”¨æ¥ä¼°è®¡å¸§ä¸å¸§ä¹‹é—´çš„ä½å§¿ä¼°è®¡ï¼Œè€Œè¿™ä¸ªä½å§¿ä¼°è®¡ä¼šå› ä¸ºå™ªå£°è€Œäº§ç”Ÿæ¼‚ç§»ï¼Œï¼ˆå³ä½¿æ¯ä¸€å¸§ä¹‹é—´æˆ‘ä»¬éƒ½è¿›è¡Œäº†BAä¼˜åŒ–ï¼Œä½†å¾®å°çš„æ¼‚ç§»ä»æ˜¯æ— æ³•é¿å…çš„ï¼‰ï¼Œç”±äºé‡Œç¨‹è®¡å¸§ä¹‹é—´çš„ä½å§¿ä¼°è®¡æœ‰å¾ˆå¤šï¼Œå› æ­¤ç§¯å°‘æˆå¤šï¼Œæ¼‚ç§»æœ€ç»ˆç´¯ç§¯ç‰¹åˆ«å¤§ï¼Œå°±ä¼šå¯¼è‡´æœºå™¨äººåœ¨è¾¾åˆ°åˆå§‹ä½ç½®æ˜¯ï¼Œè§‚æµ‹æ˜¾ç¤ºå·²ç»å›åˆ°åˆå§‹ä½ç½®ï¼Œè€Œä½å§¿ä¼°è®¡å´æ˜¾ç¤ºä¸åˆå§‹ä½ç½®ç›¸å·®ä¸€æ®µè·ç¦»ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡æ„å»ºä½å§¿ä¼°è®¡çš„ä½ç½®å’Œåˆå§‹ä½ç½®çš„æ®‹å·®é¡¹ï¼Œå¯¹æ•´ä¸ªå›ç¯è¿›è¡Œä¼˜åŒ–å’Œä¿®æ­£ï¼Œè¿›è€Œå¾—åˆ°å¦‚ä¸‹çš„åœ°å›¾ã€‚ï¼ˆç†è®ºè€Œè¨€ï¼Œæ²¡æœ‰æ¼‚ç§»çš„æƒ…å†µä¸‹ï¼Œä½å§¿ä¼°è®¡çš„ä½ç½®å’Œåˆå§‹ä½ç½®æ˜¯é‡åˆçš„ã€‚ï¼‰</p>
<p><img src="/images/åç«¯ä½å§¿å›¾ä¼˜åŒ–/32fa19ca-c057-4ccb-8075-802d0a456991.jpeg" alt="ä»€ä¹ˆæ˜¯å›ç¯æ£€æµ‹"></p>
<p>å› æ­¤ï¼Œå›ç¯æ£€æµ‹çš„ç›®çš„å°±æ˜¯æ¶ˆé™¤ç´¯ç§¯è¯¯å·®ã€‚</p>
<h2 id="ä½å§¿å›¾ä¼˜åŒ–"><a href="#ä½å§¿å›¾ä¼˜åŒ–" class="headerlink" title="ä½å§¿å›¾ä¼˜åŒ–"></a>ä½å§¿å›¾ä¼˜åŒ–</h2><p>ä¸ä¹‹å‰çš„BAä¼˜åŒ–ä¸åŒï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„é‡æŠ•å½±æ¨¡å‹ï¼Œå®ƒè€ƒè™‘çš„æ˜¯ç›¸é‚»å¸§ä¹‹é—´çš„ä½å§¿ä¼°è®¡ï¼Œéœ€è¦ä¼˜åŒ–æ¯ä¸ªç›¸æœºçš„ä½å§¿å’Œç‰¹å¾ç‚¹çš„ä½ç½®ï¼Œå³ä½¿æˆ‘ä»¬ä½¿ç”¨å…³é”®å¸§ï¼Œå¯¹äºå¤§åœºæ™¯è€Œè¨€ï¼Œç‰¹å¾ç‚¹çš„è§‚æµ‹æ˜¯éå¸¸å·¨å¤§çš„ï¼Œè¿™ç§è®¡ç®—é‡ä¹Ÿæ˜¯å·¨å¤§çš„ã€‚</p>
<p>è€Œä½å§¿å›¾ä¼˜åŒ–ï¼Œæ„å»ºä¸€ä¸ªåªæœ‰è½¨è¿¹çš„å›¾ä¼˜åŒ–ï¼Œè€Œä½å§¿èŠ‚ç‚¹ä¹‹é—´çš„è¾¹ï¼Œå¯ä»¥ç”±ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´é€šè¿‡ç‰¹å¾åŒ¹é…ä¹‹åå¾—åˆ°çš„è¿åŠ¨ä¼°è®¡æ¥ç»™å®šåˆå§‹å€¼ã€‚ä¸åŒçš„æ˜¯ï¼Œä¸€æ—¦åˆå§‹ä¼°è®¡å®Œæˆï¼Œæˆ‘ä»¬å°±ä¸å†ä¼˜åŒ–é‚£äº›è·¯æ ‡ç‚¹çš„ä½ç½®ï¼Œè€Œåªå…³å¿ƒæ‰€æœ‰çš„ç›¸æœºä½å§¿ä¹‹é—´çš„è”ç³»äº†ã€‚</p>
<p><img src="/images/åç«¯ä½å§¿å›¾ä¼˜åŒ–/image-20220503095925699.png" alt="image-20220503095925699" style="zoom:50%;" /></p>
<h2 id="åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£-1"><a href="#åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£-1" class="headerlink" title="åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£"></a>åŸºäºå›ç¯çš„ä½å§¿ä¿®æ­£</h2><h3 id="æ„å»ºæ®‹å·®"><a href="#æ„å»ºæ®‹å·®" class="headerlink" title="æ„å»ºæ®‹å·®"></a>æ„å»ºæ®‹å·®</h3><p>åœ¨ä¸Šæ–‡ï¼Œæˆ‘ä»¬æ‰¾åˆ°å¦‚ä½•æ„å»ºæ®‹å·®é¡¹ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¯¹æ®‹å·®é¡¹è¿›è¡Œä¿®æ­£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æ±‚å¾—æ®‹å·®é¡¹å¯¹ç›¸åº”çŠ¶æ€é‡çš„é›…å¯æ¯”çŸ©é˜µï¼Œä»è€Œæ‰èƒ½çŸ¥é“ä»å“ªä¸ªæ–¹å‘ä¿®æ­£çŠ¶æ€é‡èƒ½å¤Ÿè¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ã€‚</p>
<p>ä½å§¿å›¾ä¼˜åŒ–å…³å¿ƒçš„æ˜¯ä¸¤å¸§ä¹‹é—´çš„è§‚æµ‹ï¼Œè¿™ä¸¤å¸§å¹¶ä¸ä¸€å®šæ˜¯ç›¸é‚»çš„ä¸¤å¸§ï¼Œæ¯”å¦‚å›ç¯æ£€æµ‹ä¸­çš„ä¸¤å¸§ã€‚è®¾ç¬¬$i$å’Œç¬¬$j$å¸§ä¹‹é—´çš„è§‚æµ‹ï¼Œåœ¨æç¾¤SE3ä¸Šå¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<script type="math/tex; mode=display">
\Delta T_{ij}=T_i^{-1}T_j.\tag{1}</script><p>å¾ˆå®¹æ˜“ç†è§£ï¼Œå¦‚æœè¯´ç¬¬$i$å’Œç¬¬$j$å¸§æ„æˆå›ç¯ï¼Œé‚£ä¹ˆ$T_i^{-1}T_j=I$ï¼Œä¹Ÿå°±ä¸å­˜åœ¨è¯¯å·®ã€‚</p>
<p>ä¹Ÿå¯ä»¥ç”¨æä»£æ•°è¡¨ç¤ºï¼š</p>
<script type="math/tex; mode=display">
\Delta \xi_{ij}=\xi^{-1}_iâ—¦\xi_j=\ln(T_i^{-1}T_j)^{\lor}.\tag{2}</script><p>æ„å»ºæ®‹å·®ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
e_{ij}&=\ln(\Delta T_{ij}^{-1}T_i^{-1}T_j)^{\lor}\\
&=\ln(\exp((-\xi_{ij})^{\land})\exp((-\xi_i)^{\land})\exp(\xi^{\land}_j))^{\lor}
\end{align*}.\tag{3}</script><p>ä½å§¿å›¾ä¼˜åŒ–çš„æ€æƒ³æ˜¯é€šè¿‡è°ƒæ•´çŠ¶æ€é‡ï¼ˆå³ä½å§¿ï¼‰ï¼Œä½¿æ®‹å·®é¡¹çš„å€¼æœ€å°åŒ–ï¼Œè¿™å°±æ˜¯éœ€è¦ç”¨æ®‹å·®é¡¹æ±‚é›…å¯æ¯”çŸ©é˜µï¼Œæ‰èƒ½ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ–¹æ³•è¿›è¡Œè¿­ä»£ä¼˜åŒ–ã€‚</p>
<h3 id="æ±‚é›…å¯æ¯”çŸ©é˜µ"><a href="#æ±‚é›…å¯æ¯”çŸ©é˜µ" class="headerlink" title="æ±‚é›…å¯æ¯”çŸ©é˜µ"></a>æ±‚é›…å¯æ¯”çŸ©é˜µ</h3><p>æˆ‘ä»¬å¯¹ä½å§¿$T_i$å’Œ$T_j$åˆ†åˆ«å·¦ä¹˜ä¸€ä¸ªæ‰°åŠ¨$\Delta T=\exp(\delta\xi^{\land})$</p>
<script type="math/tex; mode=display">
\begin{align*}
\hat{e}_{ij}&=
\ln \left(
T_{ij}^{-1}T_i^{-1}
\exp((-\delta\xi_i)^{\land})
\exp(\delta\xi_j^{\land})T_j
\right)^{\lor}\\
&=\ln \left( T_{ij}^{-1}T_i^{-1}T_j
\exp\left(  (-Ad(T_j^{-1})\delta\xi_i)^{\land}  \right)
\exp\left(    (Ad(T_j^{-1})\delta\xi_j)^{\land} \right)
\right)^{\lor}\\
&\approx\ln \left( 
\exp(e_{ij})
\exp\left(
(-Ad(T_j^{-1})\delta\xi_i)^{\land}+(Ad(T_j^{-1})\delta\xi_j)^{\land}
\right)
\right)^{\lor}\\
&\approx e_{ij}-\mathcal{J}_r^{-1}(e_{ij})Ad(T_j^{-1})\delta\xi_i+\mathcal{J}_r^{-1}Ad(T_j^{-1})\delta\xi_j
\end{align*}
\tag{4}</script><hr>
<p>è¿™é‡Œæ¨å¯¼è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥åˆ°ç¬¬äºŒæ­¥åˆ©ç”¨äº†æç¾¤çš„ä¼´éšæ€§è´¨ï¼š</p>
<ul>
<li><strong>SO(3)ä¸Šçš„ä¼´éšæ€§è´¨</strong></li>
</ul>
<script type="math/tex; mode=display">
R\exp(p^{\land})R^T=\exp((Rp)^{\land})\\</script><ul>
<li><strong>SE(3)ä¸Šçš„ä¼´éšæ€§è´¨</strong></li>
</ul>
<script type="math/tex; mode=display">
T\exp(\xi^{\land})T^{-1}=\exp((Ad(T)\xi)^{\land})\\</script><p>å…¶ä¸­ä¼´éšçŸ©é˜µçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
Ad(T)=\begin{bmatrix}R&t^{\land}R\\ 0&R\end{bmatrix}</script><p>ç¬¬äºŒæ­¥ç¬¬ä¸‰æ­¥ä½¿ç”¨çš„æ˜¯BCHå…¬å¼ï¼š</p>
<ul>
<li><strong>SO(3)ä¸Šçš„BCHå…¬å¼</strong></li>
</ul>
<script type="math/tex; mode=display">
\ln(\exp(\phi_1^{\land})\exp(\phi_2^{\land}))\approx
\left\{
\begin{aligned}
J_l(\phi_2)^{-1}\phi_1+\phi_2\ ,\ å½“\phi_1ä¸ºå°é‡ \\
J_r(\phi_1)^{-1}\phi_2+\phi_1\ ,\ å½“\phi_2ä¸ºå°é‡
\end{aligned}
\right.</script><p>å…¶ä¸­å·¦ä¹˜é›…å¯æ¯”ä¸ºï¼š</p>
<script type="math/tex; mode=display">
J_l=\frac{\sin\theta}{\theta}I+(1-\frac{\sin\theta}{\theta})aa^T+\frac{1-\cos\theta}{\theta}a^{\land}</script><p>æ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
J_l^{-1}=\frac{\theta}{2}\cot\frac{\theta}{2}I+(1-\frac{\theta}{2}\cot\frac{\theta}{2})aa^T-\frac{\theta}{2}a^{\land}</script><p>å³ä¹˜é›…å¯æ¯”ä»…éœ€è¦åœ¨å·¦ä¹˜é›…å¯æ¯”çš„åŸºç¡€ä¸Šå¯¹è‡ªå˜é‡å–è´Ÿå·ï¼Œå³ï¼š</p>
<script type="math/tex; mode=display">
J_r(\phi)=J_l(-\phi)</script><ul>
<li><strong>SE(3)ä¸Šçš„BCHå…¬å¼</strong></li>
</ul>
<script type="math/tex; mode=display">
\ln(\exp(\xi_1^{\land})\exp(\xi_2^{\land}))^{\lor}\approx
\left\{
\begin{aligned}
J_l(\xi_2)^{-1}\xi_1+\xi_2\ ,\ å½“\xi_1ä¸ºå°é‡ \\
J_r(\xi_1)^{-1}\xi_2+\xi_1\ ,\ å½“\xi_2ä¸ºå°é‡
\end{aligned}
\right.</script><p>å…¶ä¸­å³ä¹˜é›…å¯æ¯”ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\mathcal{J}_r^{-1}(\xi)\approx I+\frac{1}{2}\begin{bmatrix}\phi^{\land}&\rho^{\land}\\0&\phi^{\land}\end{bmatrix}</script><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè‹¥$\xi$éå¸¸å°ï¼Œè¯¥é›…å…‹æ¯”çŸ©é˜µå¯ä»¥ç›´æ¥ä½¿ç”¨å•ä½é˜µï¼Œæ­¤æ—¶ï¼š</p>
<script type="math/tex; mode=display">
\ln(\exp(\xi_1^{\land})\exp(\xi_2^{\land}))^{\lor}\approx\ln(\exp(\xi_1^{\land}+\xi_2^{\land}))^{\lor}</script><p>è¿™é‡Œç¬¬äºŒæ­¥åˆ°ç¬¬ä¸‰æ­¥çš„æ¨å¯¼ç”¨çš„å°±æ˜¯è¿™ä¸ªå¼å­ã€‚</p>
<hr>
<p>æ‰€ä»¥ï¼Œæ®‹å·®å…³äº$T_i$çš„é›…å¯æ¯”ä¸ºï¼š</p>
<script type="math/tex; mode=display">
A_{ij}=\frac{\partial e_{ij} }{\partial \delta \xi_i}=-\mathcal{J}_r^{-1}(e_{ij})Ad(T_j^{-1})\tag{5}</script><p>æ®‹å·®å…³äº$T_j$çš„é›…å¯æ¯”ä¸ºï¼š</p>
<script type="math/tex; mode=display">
B_{ij}=\frac{\partial e_{ij} }{\partial \delta \xi_j}=\mathcal{J}_r^{-1}(e_{ij})Ad(T_j^{-1})\tag{6}</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">
\mathcal{J}_r^{-1}(\xi)\approx I+\frac{1}{2}\begin{bmatrix}\phi_e^{\land}&\rho_e^{\land}\\0&\phi_e^{\land}\end{bmatrix}\tag{7}</script><p>ä¸ºäº†æ‰¾åˆ°æ¢¯åº¦æ–¹å‘ï¼Œéœ€è¦å¯¹æ®‹å·®è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&e_{ij}(x_i+\Delta x_i,x_j+\Delta x_j)\\
=&e_{ij}(x+\Delta x)\\
\approx&e_{ij}+J_{ij}\Delta x
\end{align*}\tag{8}</script><p>å…¶ä¸­$J_{ij}$å³ä¸ºå‰é¢æ¨å¯¼çš„æ®‹å·®å…³äºä½å§¿çš„é›…å¯æ¯”ç»„æˆçš„çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
J_{ij}=(0Â·Â·Â·0\ A_{ij}\ 0Â·Â·Â·0 \ B_{ij} \ 0Â·Â·Â·0)</script><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æŠŠéçº¿æ€§ä¼˜åŒ–å˜æˆäº†ä¸€ä¸ªçº¿æ€§åŒ–é—®é¢˜ã€‚</p>
<h3 id="è¿›è¡Œä¼˜åŒ–"><a href="#è¿›è¡Œä¼˜åŒ–" class="headerlink" title="è¿›è¡Œä¼˜åŒ–"></a>è¿›è¡Œä¼˜åŒ–</h3><p>ä½å§¿å›¾ä¼˜åŒ–å°±æ˜¯æŠŠæ‰€æœ‰çš„è§‚æµ‹å’ŒçŠ¶æ€æ”¾åœ¨ä¸€èµ·ä¼˜åŒ–ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå„ä¸ªæ®‹å·®ä¼šè¢«åˆ†é…ä¸€ä¸ªæƒé‡ï¼Œä¹Ÿå°±æ˜¯ä¿¡æ¯çŸ©é˜µï¼Œå®ƒç›¸å½“äºå¯¹æ®‹å·®è¿›è¡ŒåŠ æƒï¼Œè€ƒè™‘ä¿¡æ¯çŸ©é˜µåï¼Œæ€»çš„æ®‹å·®å¯ä»¥è¡¨ç¤ºä¸º:</p>
<script type="math/tex; mode=display">
F(x)=\sum_{i,j\in \mathcal{C} }F_{ij}=\sum_{i,j\in \mathcal{C}} e_{ij}^T\Omega_{ij}e_{ij}\tag{9}</script><blockquote>
<p>æƒé‡çŸ©é˜µåˆç§°ä¸ºä¿¡æ¯çŸ©é˜µï¼Œå®ƒæ˜¯åæ–¹å·®çŸ©é˜µçš„é€†ï¼Œå³ä¸ºï¼š$\Omega_{ij}=\Sigma_{ij}^{-1}$ï¼Œå› ä¸ºæ¯ä¸ªæ®‹å·®éƒ½çœ‹ä½œé«˜æ–¯åˆ†å¸ƒï¼Œè€Œæ¯ä¸ªé«˜æ–¯åˆ†å¸ƒéƒ½å¯ä»¥å½’ä¸€åŒ–ä¸ºæ ‡å‡†çš„é«˜æ–¯åˆ†å¸ƒ$N(0,1)$ï¼Œè¿™ç§å½’ä¸€åŒ–æ“ä½œæ˜¯å‡å»å‡å€¼æ±‚å¹³æ–¹ç„¶åé™¤ä»¥æ–¹å·®ã€‚æ®‹å·®é¢„æœŸå‡å€¼ä¸º0ï¼Œæ‰€ä»¥ä¸ç”¨å‡åªéœ€è¦é™¤ä»¥æ–¹å·®ï¼Œæ‰©å±•åˆ°å¤šç»´çš„è¯å°±å˜æˆäº†ä¿¡æ¯çŸ©é˜µåŠ æƒå½¢å¼ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æ­¤æ—¶çš„ä¼˜åŒ–é—®é¢˜å°±æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
x^*=\arg\underset{x}{\min}\ F(x)\tag{10}</script><p>å¯¹äºæ¯ä¸€ä¸ªæ®‹å·®å—ï¼Œéƒ½æœ‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&F_{ij}(x+\Delta x)\\
&=e_{ij}(x+\Delta x)^T\Omega_{ij}e_{ij}(x+\Delta x)\\
&\approx e_{ij}^T\Omega_{ij}e_{ij}+2e_{ij}^T\Omega_{ij}J_{ij}\Delta x+\Delta x^TJ_{ij}^T\Omega_{ij}J_{ij}\Delta x\\
&=c_{ij}+2b^T_{ij}\Delta x+\Delta x^TH_{ij}\Delta x
\end{align*}\tag{11}</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">
c_{ij}=e_{ij}^T\Omega_{ij}e_{ij}</script><script type="math/tex; mode=display">
H^T_{ij}=J_{ij}^T\Omega_{ij}J_{ij}=
\begin{bmatrix}
Â·Â·Â· & Â·Â·Â· & Â·Â·Â· & Â·Â·Â· \\
Â·Â·Â· &A^T_{ij}\Omega_{ij}A_{ij}&Â·Â·Â·&A^T_{ij}\Omega_{ij}B_{ij}\\
Â·Â·Â· & Â·Â·Â· & Â·Â·Â· & Â·Â·Â· \\
Â·Â·Â· &B^T_{ij}\Omega_{ij}A_{ij}&Â·Â·Â·&B^T_{ij}\Omega_{ij}B_{ij}\\
Â·Â·Â· & Â·Â·Â· & Â·Â·Â· & Â·Â·Â· \\
\end{bmatrix}</script><script type="math/tex; mode=display">
b_{ij}=e_{ij}^T\Omega_{ij}J_{ij}=
\begin{bmatrix} 
Â·Â·Â·\\A^T_{ij}\Omega_{ij}e_{ij}\\Â·Â·Â·\\B^T_{ij}\Omega_{ij}e_{ij}\\Â·Â·Â·
\end{bmatrix}</script><p>æ‰€ä»¥ï¼Œè¦ä½¿å¾—è¯¯å·®æœ€å°ï¼Œåªéœ€è¦ä½¿å¾—ï¼š</p>
<script type="math/tex; mode=display">
H\Delta x = -b\tag{11}</script><p>æ ¹æ®ä¿®æ­£é‡ï¼Œä¿®æ­£$x$çš„å€¼ï¼Œå³å®Œæˆä¾æ¬¡è¿­ä»£ï¼š</p>
<script type="math/tex; mode=display">
x^*=x+\Delta x\tag{12}</script><p>å¤šæ¬¡è¿­ä»£ï¼Œç›´è‡³æ®‹å·®æ»¡è¶³æ”¶æ•›æ¡ä»¶æ—¶ï¼Œåˆ™ç»ˆæ­¢å¾ªç¯ï¼Œå®Œæˆä¼˜åŒ–ã€‚</p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>åç«¯ä¼˜åŒ–</tag>
        <tag>ä½å§¿å›¾ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>ScanContextè§£æä¸å®è·µ</title>
    <url>/posts/3df51dc4.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p><strong>Scan Context</strong> ç”±éŸ©å›½KAISTå¤§å­¦çš„ Giseop Kim, Ayoung Kim äº2018å¹´å‘è¡¨åœ¨<strong>IROS</strong>(International Conference on Intelligent Robots and Systems).Scan Context åº”ç”¨äºåŸºäº3Dç‚¹äº‘çš„é‡å®šä½å’Œåœºæ™¯è¯†åˆ«ï¼Œä¸»è¦æ€æƒ³æ˜¯å°†åœºæ™¯3ç»´ä¿¡æ¯å‹ç¼©ï¼Œå°†ç¬›å¡å°”åæ ‡ç³»çš„ä¿¡æ¯è½¬æ¢åˆ°æåæ ‡ç³»ä¸‹è®¡ç®—ã€‚ä¼˜åŠ¿æ˜¯é«˜æ•ˆåˆ©ç”¨åœºæ™¯ç‚¹äº‘åˆ†å¸ƒç‰¹å¾ï¼Œå¼•å…¥â€æ—‹è½¬ä¸å˜æ€§â€æè¿°å­ï¼Œå¿«é€Ÿæœç´¢ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/1-16512834289741.gif" alt="1"></p>
<p>å¯¹äºSLAMæ¥è¯´ï¼Œå›ç¯æ£€æµ‹æ˜¯é‡è¦çš„ä¸€æ­¥ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå½“æœºå™¨äººåšä¸€ä¸ªå›ç¯æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å·²ç»è¾¾åˆ°è¾¾èµ·å§‹ç‚¹ï¼Œä½†æ˜¯ç”±äºæ¼‚ç§»ï¼Œä½å§¿ä¼°è®¡å€¼å´æ˜¾ç¤ºå½“å‰ä½ç½®å’Œåˆå§‹ä½ç½®è¿˜æœ‰ç›¸å·®ä¸€æ®µè·ç¦»ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¾èµ–å›ç¯æ£€æµ‹ï¼ŒæŠŠå½“å‰ä½ç½®æ‹‰å›åˆå§‹ä½ç½®ï¼Œè¿™æ ·å°±æ¶ˆé™¤äº†æ¼‚ç§»ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å›ç¯æ£€æµ‹çš„ç›®çš„ã€‚</p>
<p>æ‰€ä»¥å›ç¯æ£€æµ‹çš„å…³é”®æ˜¯ï¼Œå¯¹äºæŸä¸€å¸§ç‚¹äº‘æ¥è¯´ï¼Œå®ƒç»è¿‡ä¸€ä¸ªå†å²çŠ¶æ€ä¹‹åï¼Œæˆ‘ä»¬å¦‚ä½•å»ç´¢å¼•å½“å‰å¸§æ˜¯å¦åœ¨å†å²å¸§ä¸­å‡ºç°è¿‡ï¼Œå³æ£€æµ‹æœ‰æ²¡æœ‰å‘ç”Ÿå›ç¯ã€‚å½“ç„¶ï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„ä¹Ÿæ˜¯æœ€æœ´ç´ çš„åšæ³•å°±æ˜¯ï¼Œå°†è¿™ä¸€å¸§çš„3Dç‚¹äº‘ä¸å†å²æ‰€æœ‰å¸§åšåŒ¹é…ï¼Œæ‰¾åˆ°æœ€æ¥è¿‘çš„é‚£ä¸€ä¸ªã€‚ä½†æ˜¯å¯¹äº3Dç‚¹äº‘æ¥è¿™ä¹ˆåšè®¡ç®—é‡æ— ç–‘æ˜¯å·¨å¤§çš„ï¼Œè€Œä¸”ä¸‰ç»´åŒ¹é…è¿˜å­˜åœ¨ä¸€ä¸ªåˆå€¼çš„é—®é¢˜ã€‚</p>
<p>å› æ­¤ï¼Œä½œè€…æå‡ºäº†ScanContextï¼Œä¸Šé¢çš„åŠ¨ç”»å¯ä»¥çœ‹å‡ºScanContextçš„å·¥ä½œè¿‡ç¨‹å°±æ˜¯æŠŠ3Dç‚¹äº‘é€šè¿‡ä¿¯è§†å›¾çš„æ–¹å¼è½¬æ¢ä¸º2Dï¼Œç„¶åç”¨è¿‡2DåŒ¹é…æ‰¾åˆ°å›ç¯ï¼Œè¾¾åˆ°å›ç¯æ£€æµ‹çš„ç›®çš„ï¼Œè¿™æ ·å°†ä¸‰ç»´é™ä¸ºä¸¤ç»´è¿›è¡ŒåŒ¹é…å¤§å¤§å‡å°äº†è®¡ç®—é‡ï¼Œå¹¶ä¸”å®ƒå¯¹åˆå€¼ç›¸å¯¹ä¸æ•æ„Ÿã€‚</p>
<p>ScanContextçš„ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/image-20220430131549451.png" alt="image-20220430131549451" style="zoom: 50%;" /></p>
<h1 id="ç‚¹äº‘åˆ‡å‰²"><a href="#ç‚¹äº‘åˆ‡å‰²" class="headerlink" title="ç‚¹äº‘åˆ‡å‰²"></a>ç‚¹äº‘åˆ‡å‰²</h1><p>é¦–å…ˆæ˜¯è¿›è¡Œç‚¹äº‘åˆ†å‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<p>é¦–å…ˆä½¿ç”¨æ¥è‡ª 3D æ‰«æçš„ç‚¹äº‘çš„ä¿¯è§†å›¾ï¼Œä»¥æ‰«æçš„ä¸­å¿ƒå……å½“å…¨å±€å…³é”®ç‚¹ã€‚å¯¹ç‚¹äº‘çš„ä¿¯è§†å›¾è¿›è¡Œåœ†ç¯åˆ†å‰²å’Œæ‰‡åŒºåˆ†å‰²ï¼Œå¯ä»¥çœ‹å‡ºä»¥æ‰«æä¸­å¿ƒä¸ºå…³é”®ç‚¹ï¼Œå‘å¤–æ‰©æ•£å½¢æˆ$N_r$ä¸ªåŒå¿ƒåœ†ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º$N_r$ä¸ªç¯ã€‚ç„¶åä»¥ä¸­å¿ƒä¸ºå…³é”®ç‚¹å¯¹åœ†ç¯çš„$[0,2\pi]$è¿›è¡Œå‡åŒ€åˆ†å‰²ï¼Œå¾—åˆ°$N_s$ ä¸ªæ‰‡åŒºã€‚è®ºæ–‡ä¸­å– $N_s= 60$ å’Œ $N_r = 20$ã€‚</p>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/image-20220430133756320.png" alt="image-20220430133756320" style="zoom: 33%;" /></p>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/image-20220430132509355.png" alt="image-20220430132509355"></p>
<p>å¯ä»¥å‘ç°ï¼Œæ²¿ç€åŠå¾„å¢å¤§çš„æ–¹å‘ï¼ˆç»¿è‰²ç®­å¤´çš„æ–¹å‘ï¼‰ï¼ŒæŠŠç‚¹äº‘åˆ†å‰²æˆäº†$N_r$ä¸ªåœ†ç¯ï¼Œæ¯ä¸ªåœ†ç¯çš„å®½åº¦ä¸ºï¼š</p>
<script type="math/tex; mode=display">
d_r=\frac{L_{max} }{N_r}\tag{1}</script><p>å…¶ä¸­$L_{max}$è¡¨ç¤ºæ¿€å…‰é›·è¾¾æµ‹å¾—ç‚¹äº‘çš„æœ€è¿œè·ç¦»ã€‚</p>
<p>é€šè¿‡å›¾ä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬ä¸€å…±å¾—åˆ°$N_r$ä¸ªç¯å’Œ$N_s$ ä¸ªæ‰‡åŒºï¼Œæ¯ä¸ªç¯éƒ½ä¸æ‰‡åŒºæœ‰é‡å åŒºåŸŸï¼Œè¿™ä¸ªé‡å åŒºåŸŸç§°ä¹‹ä¸ºbinï¼Œè€Œä¸”è¿œç¦»ä¼ æ„Ÿå™¨çš„ bin çš„ç‰©ç†é¢ç§¯æ¯”è¿‘çš„ bin æ›´å®½ã€‚è®¾$\mathcal{P}_{ij}$æ˜¯å±äºç¬¬$ i $ä¸ªç¯å’Œç¬¬ $j$ ä¸ªæ‰‡åŒºé‡å çš„ bin çš„ç‚¹é›†ã€‚è®¾æ¿€å…‰ç‚¹ç»è¿‡åˆ†å‰²åçš„é›†åˆä¸º$\mathcal{P}$ï¼Œåˆ™ï¼š</p>
<script type="math/tex; mode=display">
\mathcal{P}=\underset{i\in[N_r],j\in[N_s]}{\cup}\mathcal{P}_{ij}\tag{2}</script><p>å…¶ä¸­ï¼Œç¬¦å· $[N_s] =\{1, 2, â€¦, N_{s-1}, N_s\},[N_r] =\{1, 2, â€¦, N_{r-1}, N_r\}$ã€‚</p>
<h1 id="ç”ŸæˆScanContext"><a href="#ç”ŸæˆScanContext" class="headerlink" title="ç”ŸæˆScanContext"></a>ç”ŸæˆScanContext</h1><p>ç»è¿‡åˆ†å‰²åï¼Œæˆ‘ä»¬å‘ç°åˆ†å‰²åçš„ç‚¹äº‘çš„é›†åˆå°±æ˜¯binçš„é›†åˆï¼Œè€Œbinæ˜¯$N_r$ä¸ªç¯å’Œ$N_s$ ä¸ªæ‰‡åŒºçš„é‡å åŒºåŸŸï¼Œæ¯ä¸ªbinåŒºåŸŸå¯èƒ½ä¼šæœ‰ç‚¹äº‘ä¹Ÿå¯èƒ½æ²¡æœ‰ç‚¹äº‘ï¼ˆå›¾ï¼ˆbï¼‰ä¸­çš„è“è‰²åƒç´ ï¼‰ï¼Œè€Œæˆ‘ä»¬å°†binçš„é›†åˆè¡¨ç¤ºä¸ºçŸ©é˜µå½¢å¼ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ª$N_r\times N_s$çš„çŸ©é˜µï¼Œå…¶ä¸­çŸ©é˜µçš„æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªåœ†ç¯ï¼Œåˆ™ä¸€å…±æœ‰$N_r$è¡Œï¼Œæ‰€ä»¥ä¸‹å›¾çºµåæ ‡èŒƒå›´ä¸º$[0,L_{max}]$ï¼›çŸ©é˜µçš„æ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªæ‰‡åŒºï¼Œåˆ™ä¸€å…±æœ‰$N_s$åˆ—ï¼Œæ‰€ä»¥ä¸‹å›¾æ¨ªåæ ‡èŒƒå›´ä¸º$[0,2\pi]$ã€‚</p>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/image-20220430135402491.png" alt="image-20220430135402491" style="zoom: 67%;" /></p>
<p>é‚£ä¹ˆbinçš„å€¼å¦‚ä½•ç¡®å®šå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œæ²¡æœ‰ç‚¹äº‘çš„binï¼Œæˆ‘ä»¬å¯¹å…¶èµ‹å€¼ä¸º0ï¼Œå›¾ä¸­ç”¨è“è‰²åƒç´ è¡¨ç¤ºï¼›é‚£ä¹ˆæœ‰ç‚¹äº‘çš„binå¦‚ä½•è¡¨ç¤ºå‘¢ï¼Ÿä½œè€…åœ¨è¿™é‡Œä½¿ç”¨çš„æ˜¯<strong>æœ€å¤§é«˜åº¦</strong>ã€‚</p>
<p>è®¾æŸä¸ªç‚¹äº‘ä¸º$p$ï¼Œ $z(\cdot ) $æ˜¯è¿”å›ç‚¹ $p$ çš„$ z $åæ ‡å€¼çš„å‡½æ•°ï¼Œåˆ™ä»»ä¸€ä¸ªç‚¹äº‘é›†åˆbinçš„å€¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\phi(\mathcal{P}_{ij})=\underset{p\in\mathcal{P}_{ij}}{\max}z(p)\tag{3}</script><p>è¿™ä¹ˆåšæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å¼€å§‹æˆ‘ä»¬æŠŠä¸‰ç»´ç‚¹äº‘é™ä¸ºäºŒç»´ï¼ŒæŸå¤±äº†é«˜åº¦ä¿¡æ¯ï¼Œè€Œè¿™é‡Œå¯¹é«˜åº¦ä¿¡æ¯ç›¸å½“äºä¸€æ¬¡è¡¥å¿ä½œç”¨ï¼Œä¿ç•™äº†ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚</p>
<h1 id="åŸºäºScanContextçš„åŒ¹é…"><a href="#åŸºäºScanContextçš„åŒ¹é…" class="headerlink" title="åŸºäºScanContextçš„åŒ¹é…"></a>åŸºäºScanContextçš„åŒ¹é…</h1><p>åœ¨å¾—åˆ°ScanContextæ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨ScanContextè¿›è¡ŒåŒ¹é…ï¼Œè¿›è€Œå®Œæˆå›ç¯æ£€æµ‹ï¼Œè¿™æ˜¯ScanContextæœ€ç»ˆçš„ç›®çš„ã€‚</p>
<p>è®¾</p>
<ul>
<li><p>$I^q$ä¸ºå½“å‰å¸§çš„ScanContextï¼Œ $c^q_j $ä¸º$I^q$ä¸­çš„ç¬¬$j$åˆ—ï¼›</p>
</li>
<li><p>$ I^c $ä¸ºå†å²å¸§çš„ScanContextï¼Œ$c^c_j $ä¸º$I^c$ä¸­çš„ç¬¬$j$åˆ—ï¼›</p>
</li>
</ul>
<p>ä¸¤å¸§ä¹‹é—´çš„è·ç¦»å‡½æ•°å®šä¹‰ä¸ºï¼š</p>
<script type="math/tex; mode=display">
d(I^q,I^c)=\frac{1}{N_s}\sum^{N_s}_{j=1}(1-\frac{c^q_j\cdot c^c_j}{\parallel c^q_j \parallel \parallel c^c_j \parallel}).\tag{4}</script><p>é€šè¿‡è¿™ä¸ªè·ç¦»å‡½æ•°å¯ä»¥å‘ç°ï¼Œå®ƒååº”äº†ä¸¤å¸§ä¹‹é—´çš„å·®å¼‚æ€§ï¼Œå¯¹äºç›¸ä¼¼çš„ä¸¤å¸§ï¼Œå®ƒä»¬çš„ç›¸åŒåˆ—å‘é‡çš„å†…ç§¯çš„æ¨¡åº”è¯¥ä¸º1ï¼Œå³$\frac{c^q_j\cdot c^c_j}{\parallel c^q_j \parallel \parallel c^c_j \parallel}=1$ï¼Œåˆ™è·ç¦»æ¥è¿‘ä¸º0ï¼Œå½“ç„¶è¿™ä»…ä»…æ˜¯ç†æƒ³æƒ…å†µä¸‹ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬é€šè¿‡è®¾ç½®é˜ˆå€¼çš„æ–¹å¼ï¼Œå½“è·ç¦»å‡½æ•°å°äºæŸä¸€ä¸ªé˜ˆå€¼æ—¶ï¼Œè®¤ä¸ºè¯¥å†å²å¸§ä¸ºå›ç¯æ£€æµ‹çš„å›ç¯å¸§ã€‚</p>
<p><strong>ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å†å²å¸§æœ‰æ—‹è½¬çš„æ—¶å€™ï¼š</strong></p>
<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰çš„æ˜¯å½“å‰å¸§ä¸å†å²å¸§çš„ç›¸åŒåˆ—è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ä¸ªæ¡ä»¶æ˜¯ååˆ†å¼ºçš„ï¼Œå‡è®¾æ¿€å…‰é›·è¾¾åœ¨ç»è¿‡ä¸€ä¸ªåœ°æ–¹çš„æ—¶å€™æ–¹å‘ä¸ä¹‹å‰çš„æ–¹å‘æ°æ°ç›¸åï¼Œæˆ–è€…è¯¥åœ°æ–¹ä¸ºä¸€ä¸ªåå­—è·¯å£ï¼Œæ¿€å…‰é›·è¾¾ä»ä¸åŒçš„æ–¹å‘ç»è¿‡ä¸€ä¸ªåœ°æ–¹ï¼Œåˆ™é›·è¾¾ç›¸å¯¹äºå…¨å±€åæ ‡çš„åæ ‡ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´å¾—åˆ°çš„ScanContextä¸­çš„åˆ—å‘é‡é¡ºåºå¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œè¿›è€Œä½¿å¾—ä¸¤å¸§çš„è·ç¦»å‡½æ•°æ¯”è¾ƒå¤§ï¼Œå¯¼è‡´ç»è¿‡ç›¸åŒåœ°æ–¹çš„ä¸¤å¸§ç‚¹äº‘çš„è·ç¦»å‡½æ•°éå¸¸å¤§ï¼Œæœ€ç»ˆå›ç¯æ£€æµ‹åŒ¹é…å¤±è´¥ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™æ˜¯ç»è¿‡ç›¸åŒåœ°æ–¹çš„ä¸¤å¸§ç‚¹äº‘ï¼Œå®ƒä»¬ç”±äºæ¿€å…‰é›·è¾¾çš„æœå‘å‘ç”Ÿäº†æ”¹å˜ï¼Œå¯¼è‡´ä¸¤è€…çš„ScanContextä¸­çš„åˆ—å‘é‡é¡ºåºå‘ç”Ÿå˜åŒ–ï¼Œè·ç¦»å‡½æ•°å€¼éšä¹‹å˜å¾—éå¸¸å¤§ã€‚</p>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/image-20220430143355265.png" alt="image-20220430143355265" style="zoom:50%;" /></p>
<p>ä¸éš¾å‘ç°ï¼Œå°†å›¾(b)ååŠéƒ¨åˆ†åˆ‡å‰²æ”¾åˆ°å‰é¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°±å¯ä»¥å¾—åˆ°ä¸(a)ååˆ†ç›¸ä¼¼çš„ScanContext.</p>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/image-20220430143946603.png" alt="image-20220430143946603" style="zoom:50%;" /></p>
<p>å¯¹äºäººè€Œè¨€ï¼Œä¸Šè¿°è§„å¾‹æ˜¯éå¸¸å®¹æ˜“å‘ç°çš„ã€‚ä½†æ˜¯å®é™…ç¨‹åºä¸­æ€ä¹ˆåˆ‡å‰²ï¼Œæ€ä¹ˆç§»åŠ¨æ‰èƒ½è¾¾åˆ°ä¸Šè¿°æ•ˆæœï¼Ÿ</p>
<p>æœ€ç®€å•ä¹Ÿæ˜¯æœ€æœ´ç´ çš„åšæ³•å°±æ˜¯ï¼Œå°†å†å²å¸§$I^c$æŒ‰åˆ—å¹³ç§»ï¼Œå¾—åˆ°$[N_s]$ä¸ªScanContextï¼Œä¾æ¬¡ä¸å½“å‰å¸§çš„ScanContextè®¡ç®—è·ç¦»ï¼Œé€‰æ‹©è·ç¦»æœ€å°çš„ï¼Œå³ä¸ºé—­ç¯åŒ¹é…çš„å¸§ã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ–¹æ³•çš„è®¡ç®—é‡ä¹Ÿæ˜¯ç›¸å¯¹è¾ƒå¤§çš„ï¼Œä½œè€…åœ¨ä»£ç ä¸­å¯¹æ­¤æ–¹æ³•è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¼˜åŒ–æ–¹æ³•å°±æ˜¯å°†å½“å‰å¸§ä¸å†å²å¸§å¯¹åº”åˆ—åˆ†åˆ«æ±‚åˆ—å’Œï¼Œç„¶åæ ¹æ®åˆ—å’Œæˆ‘ä»¬æ‰¾åˆ°å¯èƒ½çš„æœ€ä½³åˆ‡å‰²ç‚¹ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬é™ç»´ä¹‹åä¼šæŸå¤±ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬å¯»æ‰¾çš„åˆ‡å‰²ç‚¹å¹¶ä¸æ˜¯è¶³å¤Ÿå‡†ç¡®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†åœ¨åˆ‡å‰²ç‚¹é™„è¿‘å¯¹å¯¹åº”çš„äºŒç»´$m$åˆ—ä¾æ¬¡è¿›è¡Œåˆ‡å‰²å¹³ç§»ï¼Œå¾—åˆ°è¿œè¿œå°äº$n(n&lt;&lt;[N_s])$ä¸ªçš„ScanContextï¼Œä¾æ¬¡ä¸å½“å‰å¸§çš„ScanContextè®¡ç®—è·ç¦»ï¼Œé€‰æ‹©è·ç¦»æœ€å°çš„ï¼Œå³ä¸ºé—­ç¯åŒ¹é…çš„å¸§ã€‚</p>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/image-20220430153440012.png" alt="image-20220430153440012" style="zoom: 67%;" /></p>
<h1 id="è®¡ç®—ç›¸å¯¹ä½å§¿"><a href="#è®¡ç®—ç›¸å¯¹ä½å§¿" class="headerlink" title="è®¡ç®—ç›¸å¯¹ä½å§¿"></a>è®¡ç®—ç›¸å¯¹ä½å§¿</h1><p>è®¾$I^c_n$ æ˜¯ä¸€ä¸ª$\mathrm{Scan Context}$ï¼Œå®ƒçš„ç¬¬$n$åˆ—æ˜¯ä»åŸå§‹çš„$\mathrm{Scan Context}$åç§»è¿‡æ¥çš„ã€‚ç”±äºåˆ—å‘é‡ä»£è¡¨çš„æ˜¯åˆ†è¾¨ç‡ä¸º$\frac{2\pi}{N_s}$çš„æ‰‡åŒºï¼Œæ‰€ä»¥æ¯ä¸ªåˆ—å¯¹åº”çš„è§’åº¦ä¸º$\frac{2\pi}{N_s}$ã€‚æ•´ä¸ªè¿‡ç¨‹ï¼ŒæŠŠå†å²å¸§åˆ‡å‰²ï¼Œç„¶åè¿›è¡Œåˆ—å¹³ç§»ä¹‹åï¼Œå¾—åˆ°ä¸å½“å‰å¸§çš„è‰¯å¥½åŒ¹é…ï¼Œ è‰¯å¥½çš„åŒ¹é…æ„å‘³ç€æˆ‘ä»¬é€šè¿‡åˆ†å‰²å¹³ç§»å°†å†å²å¸§å¯¹åº”çš„ä½å§¿æ—‹è½¬åˆ°å½“å‰å¸§å¯¹åº”ä½å§¿çš„æœå‘ï¼Œé‚£ä¹ˆï¼Œåè¿‡æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å¹³ç§»æ¥æ±‚å¾—æ—‹è½¬çš„è§’åº¦ã€‚</p>
<p>å‡è®¾è·ç¦»æœ€å°æ—¶ï¼Œå¯¹åº”çš„åˆ—çš„å¹³ç§»é‡ä¸ºï¼š</p>
<script type="math/tex; mode=display">
n^*=\underset{n\in[N_s]}{\arg\min} \ d(I^q,I^c_n)\tag{5}</script><p>å› æ­¤ï¼Œå†å²å¸§ä¸å½“å‰å¸§ä¹‹é—´çš„æ—‹è½¬çš„è§’åº¦ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\phi=\frac{2\pi}{N_s}\times n^*\tag{6}</script><p>è¿™ä¸ªæ—‹è½¬åˆ†è¾¨ç‡åœ¨ä½œè€…ä»£ç ä¸­ä¸º$\frac{2\pi}{N_s}=\frac{2\pi}{60}=6Â°$ï¼Œæ‰€ä»¥åŒ¹é…çš„ç²¾ç¡®åº¦å°äº$6Â°$ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç²¾ç¡®çš„å€¼ï¼Œéœ€è¦è¿›ä¸€æ­¥ç²¾ç¡®çš„è¯åˆ™éœ€è¦ä½¿ç”¨ICPæˆ–è€…NDTåŒ¹é…ã€‚å› æ­¤å¯ä»¥ä½œä¸ºICPæˆ–è€…NDTåŒ¹é…çš„åˆå§‹ä½å§¿ï¼Œç”¨äº<strong>ç²¾ç¡®åŒ¹é…</strong>å¾—åˆ°é—­ç¯çº¦æŸç›¸å¯¹ä½å§¿ã€‚</p>
<h1 id="è§£å†³æ—¶é—´å¤æ‚åº¦é—®é¢˜"><a href="#è§£å†³æ—¶é—´å¤æ‚åº¦é—®é¢˜" class="headerlink" title="è§£å†³æ—¶é—´å¤æ‚åº¦é—®é¢˜"></a>è§£å†³æ—¶é—´å¤æ‚åº¦é—®é¢˜</h1><p><strong>ç›®çš„ï¼š</strong>ScanContextå¯ä»¥ä½¿ç”¨çŸ©é˜µå¯¹åº”åˆ—çš„ç›¸ä¼¼åº¦æ¥è®¡ç®—ä¸¤å¸§çš„ç›¸ä¼¼æ€§ï¼Œä½†æ˜¯éå†æ‰€æœ‰å†å²å¸§çš„ç›¸ä¼¼åº¦è®¡ç®—é‡æ¯”è¾ƒé«˜ï¼Œéœ€è¦åšä¸€ä¸ªå¿«é€Ÿåˆæ­¥ç­›é€‰ã€‚</p>
<p><strong>æ€è·¯ï¼š</strong>ç›¸ä¼¼å¸§ä¹‹é—´ï¼Œè½åœ¨åŒç­‰åŠå¾„çš„åœ†ç¯ä¸­çš„ç‚¹çš„æ•°é‡åº”è¯¥ç›¸ä¼¼ï¼Œå¯ä»¥ç”¨æ¥å¿«é€ŸæŸ¥æ‰¾ã€‚</p>
<p>æ¯”å¦‚ï¼ŒæŸä¸€å¸§ä¸­ï¼Œåœ¨åœ†ç¯$r_i,i\in[N_r]$ä¸­ï¼Œè¢«$[N_s]$ä¸ªæ‰‡åŒºåˆ†å‰²ä¸º$[N_s]$ä¸ªbinï¼Œå¯¹äºç›¸ä¼¼çš„ä¸¤å¸§ï¼Œå¯¹åº”åœ†ç¯ä¸­ï¼Œå«æœ‰ç‚¹äº‘çš„binå æœ‰ç‡åº”è¯¥ç›¸åŒï¼Œå¦‚å…¬å¼$(8)$ã€‚é€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥è¿›è¡Œ<strong>ç¬¬ä¸€é˜¶æ®µçš„ç²—ç•¥åŒ¹é…</strong>ã€‚</p>
<p><strong>æ–¹æ³•ï¼š</strong></p>
<p><img src="/images/ScanContextè§£æä¸å®è·µ/image-20220430164906076.png" alt="image-20220430164906076" style="zoom:50%;" /></p>
<p>è¿™é‡Œä½œè€…å¼•å…¥äº†ä¸€ä¸ª$ring\ key$çš„æ¦‚å¿µã€‚</p>
<p><strong>ï¼ˆ1ï¼‰æ¯ä¸€å¸§ç”Ÿæˆä¸€ä¸ªå‘é‡$k$</strong></p>
<p>$ring\ key$å®è´¨ä¸Šå°±æ˜¯$\mathrm{Scan Context}$çš„æ¯ä¸€è¡Œ$r$ç»è¿‡ç¼–ç å‡½æ•°$\psi$ç¼–ç æˆä¸€ä¸ªå®æ•°å€¼åï¼Œ$N_r$ä¸ªåœ†ç¯ç»„æˆäº†ä¸€ä¸ª$N_r$ç»´å‘é‡çš„$ring\ key$ï¼Œå³ä¸º</p>
<script type="math/tex; mode=display">
k=(\psi(r_1),...,\psi(r_{N_r})),\mathrm{where}\ \psi:r_i\rightarrow\mathbb{R}\tag{7}</script><p>å…¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç¯ç¼–ç å‡½æ•°$\psi$æ˜¯ä½¿ç”¨ $L_0$èŒƒæ•°çš„ç¯çš„å ç”¨ç‡ï¼š</p>
<script type="math/tex; mode=display">
\psi(r_i)=\frac{\parallel r_i \parallel_0}{N_s}\tag{8}</script><p>$\parallel r_i \parallel_0$è¡¨ç¤ºåŠå¾„$r_i$å¯¹åº”çš„åœ†ç¯ä¸­éç©ºåˆ†å‰²å•å…ƒçš„ä¸ªæ•°ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰æ ¹æ®ï¼ˆ1ï¼‰ä¸­è®¡ç®—çš„å‘é‡ï¼Œæ‰€æœ‰å†å²å¸§å…±åŒæ„å»ºKDtree;</strong></p>
<p><strong>ï¼ˆ3ï¼‰ä½¿ç”¨å½“å‰å¸§å¯¹åº”çš„å‘é‡ï¼Œåœ¨KDtreeä¸­æŸ¥æ‰¾ï¼Œæ‰¾åˆ°$n$ä¸ªå¯èƒ½çš„ç›¸ä¼¼å¸§ï¼Œä½œä¸ºå€™é€‰ç´¢å¼•$\mathcal{C}$ ã€‚</strong></p>
<p><strong>ï¼ˆ4ï¼‰ä½¿ç”¨$\mathrm{Scan Context}$è¿›è¡Œç¬¬äºŒé˜¶æ®µçš„ç²¾ç¡®åŒ¹é…</strong></p>
<p>è™½ç„¶ä¸å¦‚$\mathrm{Scan Context}$ä¿¡æ¯ä¸°å¯Œï¼Œä½†$ring\ key$æ”¯æŒå¿«é€Ÿæœç´¢ï¼Œä»¥æ‰¾åˆ°$n$ä¸ªå¯èƒ½çš„å€™é€‰é—­ç¯ã€‚ä½¿ç”¨è·ç¦»å…¬å¼å°†è¿™äº›æ’å®šæ•°é‡çš„å€™é€‰$\mathrm{Scan Context}$ä¸è¦æŸ¥è¯¢çš„$\mathrm{Scan Context}$è¿›è¡Œæ¯”è¾ƒã€‚æœ€æ¥è¿‘çš„æ»¡è¶³ç»™å®šé˜ˆå€¼$\tau$ çš„å€™é€‰é¡¹è¢«é€‰ä¸ºé‡æ–°è®¿é—®çš„ä½ç½®ï¼š</p>
<script type="math/tex; mode=display">
c^*=\underset{c_k\in\mathcal{C} }{\arg\min}\ D(I^q,I^c),s.t. \ D<\tau\tag{9}</script><p>å…¶ä¸­ $\mathcal{C}$ æ˜¯ä» KD æ ‘ä¸­æå–çš„ä¸€ç»„å€™é€‰ç´¢å¼•ï¼Œ$\tau$ æ˜¯ç»™å®šçš„æ¥å—é˜ˆå€¼ã€‚ $c^âˆ— $æ˜¯ç¡®å®šä¸ºé—­ç¯çš„ä½ç½®çš„ç´¢å¼•ã€‚</p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
      </categories>
      <tags>
        <tag>ScanContext</tag>
        <tag>æ¿€å…‰SLAM</tag>
      </tags>
  </entry>
  <entry>
    <title>ScanContextè®ºæ–‡ç¿»è¯‘</title>
    <url>/posts/79ac789e.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p><strong>Scan Context</strong> ç”±éŸ©å›½KAISTå¤§å­¦çš„ Giseop Kim, Ayoung Kim äº2018å¹´å‘è¡¨åœ¨<strong>IROS</strong>(International Conference on Intelligent Robots and Systems).Scan Context åº”ç”¨äºåŸºäº3Dç‚¹äº‘çš„é‡å®šä½å’Œåœºæ™¯è¯†åˆ«ï¼Œä¸»è¦æ€æƒ³æ˜¯å°†åœºæ™¯3ç»´ä¿¡æ¯å‹ç¼©ï¼Œå°†ç¬›å¡å°”åæ ‡ç³»çš„ä¿¡æ¯è½¬æ¢åˆ°æåæ ‡ç³»ä¸‹è®¡ç®—ã€‚ä¼˜åŠ¿æ˜¯é«˜æ•ˆåˆ©ç”¨åœºæ™¯ç‚¹äº‘åˆ†å¸ƒç‰¹å¾ï¼Œå¼•å…¥â€æ—‹è½¬ä¸å˜æ€§â€æè¿°å­ï¼Œå¿«é€Ÿæœç´¢ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="mathrm-Scan-Context-ç”¨äº-3D-ç‚¹äº‘åœ°å›¾ä¸­åœ°ç‚¹è¯†åˆ«çš„ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„ç©ºé—´æè¿°å­"><a href="#mathrm-Scan-Context-ç”¨äº-3D-ç‚¹äº‘åœ°å›¾ä¸­åœ°ç‚¹è¯†åˆ«çš„ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„ç©ºé—´æè¿°å­" class="headerlink" title="$\mathrm{Scan Context}$:ç”¨äº 3D ç‚¹äº‘åœ°å›¾ä¸­åœ°ç‚¹è¯†åˆ«çš„ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„ç©ºé—´æè¿°å­"></a>$\mathrm{Scan Context}$:ç”¨äº 3D ç‚¹äº‘åœ°å›¾ä¸­åœ°ç‚¹è¯†åˆ«çš„ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„ç©ºé—´æè¿°å­</h1><p><img src="/images/Scan-Contextè®ºæ–‡é˜…è¯»/1-16512834289741.gif" alt="1"></p>
<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>ä¸ç”¨äºè§†è§‰åœºæ™¯çš„å„ç§ç‰¹å¾æ£€æµ‹å™¨å’Œæè¿°å­ç›¸æ¯”ï¼Œä½¿ç”¨ç»“æ„ä¿¡æ¯æè¿°åœ°ç‚¹çš„ç ”ç©¶ç›¸å¯¹è¾ƒå°‘ã€‚åŒæ—¶å®šä½å’Œå»ºå›¾ (SLAM) çš„æœ€æ–°è¿›å±•æä¾›äº†ç¯å¢ƒçš„å¯†é›† 3D åœ°å›¾ï¼Œå¹¶ä¸”å®šä½æ˜¯ç”±ä¸åŒçš„ä¼ æ„Ÿå™¨æå‡ºçš„ã€‚é’ˆå¯¹åŸºäºç»“æ„ä¿¡æ¯çš„å…¨å±€å®šä½ï¼Œæˆ‘ä»¬æå‡ºäº† $\mathrm{Scan Context}$ï¼Œè¿™æ˜¯ä¸€ç§æ¥è‡ª 3D å…‰æ£€æµ‹å’Œæµ‹è·ï¼ˆæ¿€å…‰é›·è¾¾ï¼‰ (Light Detection and Ranging ï¼ŒLiDAR) æ‰«æçš„åŸºäºéç›´æ–¹å›¾çš„å…¨å±€æè¿°å­ã€‚ä¸å…ˆå‰ç ”ç©¶çš„æ–¹æ³•ä¸åŒï¼Œæ‰€æå‡ºçš„æ–¹æ³•ç›´æ¥ä»ä¼ æ„Ÿå™¨è®°å½•å¯è§ç©ºé—´çš„ 3D ç»“æ„ï¼Œè€Œä¸ä¾èµ–äºç›´æ–¹å›¾æˆ–å…ˆå‰çš„è®­ç»ƒã€‚æ­¤å¤–ï¼Œè¯¥æ–¹æ³•æå‡ºäº†ä½¿ç”¨ç›¸ä¼¼åº¦åˆ†æ•°æ¥è®¡ç®—ä¸¤ä¸ª$\mathrm{Scan Context}$ä¹‹é—´çš„è·ç¦»ï¼Œä»¥åŠä¸€ç§ä¸¤é˜¶æ®µæœç´¢ç®—æ³•æ¥æœ‰æ•ˆåœ°æ£€æµ‹å›ç¯ã€‚$\mathrm{Scan Context}$åŠå…¶æœç´¢ç®—æ³•ä½¿å›ç¯æ£€æµ‹ä¸å—æ¿€å…‰é›·è¾¾è§†ç‚¹å˜åŒ–çš„å½±å“ï¼Œä»è€Œå¯ä»¥åœ¨é‡æ–°è®¿é—®åŒä¸€ä¸ªåœ°ç‚¹å’Œæ‹è§’ç­‰åœ°æ–¹æ£€æµ‹åˆ°é—­ç¯ã€‚$\mathrm{Scan Context}$æ€§èƒ½å·²ç»é€šè¿‡ 3Dæ¿€å…‰é›·è¾¾æ‰«æçš„å„ç§åŸºå‡†æ•°æ®é›†è¿›è¡Œäº†è¯„ä¼°ï¼Œå¹¶ä¸”æ‰€æå‡ºçš„æ–¹æ³•æ˜¾ç¤ºå‡ºå……åˆ†æ”¹è¿›çš„æ€§èƒ½ã€‚</p>
<h1 id="â… -å¼•è¨€"><a href="#â… -å¼•è¨€" class="headerlink" title="â… .å¼•è¨€"></a>â… .å¼•è¨€</h1><p>åœ¨è®¸å¤šæœºå™¨äººåº”ç”¨ä¸­ï¼Œä½ç½®è¯†åˆ«æ˜¯é‡è¦çš„é—®é¢˜ã€‚ç‰¹åˆ«æ˜¯å¯¹äº SLAMï¼Œè¿™ç§è¯†åˆ«ä¸ºé—­ç¯æä¾›äº†å€™é€‰é¡¹ï¼Œè¿™å¯¹äºçº æ­£æ¼‚ç§»è¯¯å·®å’Œæ„å»ºå…¨å±€ä¸€è‡´çš„åœ°å›¾è‡³å…³é‡è¦ [1]ã€‚è™½ç„¶é—­ç¯å¯¹æœºå™¨äººå¯¼èˆªè‡³å…³é‡è¦ï¼Œä½†é”™è¯¯çš„åŒ¹é…å¯èƒ½æ˜¯ç¾éš¾æ€§çš„ï¼Œéœ€è¦ä»”ç»†åŒ¹é…ã€‚è§†è§‰è¯†åˆ«éšç€ç›¸æœºä¼ æ„Ÿå™¨çš„å¹¿æ³›ä½¿ç”¨è€Œæµè¡Œï¼Œç„¶è€Œï¼Œç”±äºå…‰ç…§å˜åŒ–å’ŒçŸ­æœŸï¼ˆä¾‹å¦‚ï¼Œç§»åŠ¨çš„ç‰©ä½“ï¼‰æˆ–é•¿æœŸï¼ˆä¾‹å¦‚ï¼Œå­£èŠ‚ï¼‰çš„å˜åŒ–ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯å›°éš¾çš„ã€‚å› æ­¤ï¼Œæœ€è¿‘çš„æ–‡çŒ®é›†ä¸­åœ¨é€šè¿‡æ£€æŸ¥è¡¨ç¤º [2] å’Œå¼¹æ€§åç«¯ [3] çš„é²æ£’ä½ç½®è¯†åˆ«ã€‚</p>
<p>ä¸è¿™äº›è§†è§‰ä¼ æ„Ÿå™¨ä¸åŒï¼Œæ¿€å…‰é›·è¾¾æœ€è¿‘å› å…¶å¯¹æ„ŸçŸ¥æ–¹å·®çš„å¼ºä¸å˜æ€§è€Œå—åˆ°å…³æ³¨ã€‚æ—©æœŸï¼Œä¼ ç»Ÿçš„å±€éƒ¨å…³é”®ç‚¹æè¿°å­ [4, 5, 6, 7] æœ€åˆæ˜¯ä¸ºè®¡ç®—æœºè§†è§‰ä¸­çš„ 3D æ¨¡å‹è®¾è®¡çš„ï¼Œå°½ç®¡å®ƒä»¬å®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“ï¼Œä½†å·²è¢«ç”¨äºä½ç½®è¯†åˆ«ã€‚åŸºäºæ¿€å…‰é›·è¾¾çš„ä½ç½®è¯†åˆ«æ–¹æ³•å·²åœ¨æœºå™¨äººæ–‡çŒ®ä¸­å¹¿æ³›æå‡º [8, 9, 10]ã€‚è¿™äº›å·¥ä½œä¾§é‡äºä»ç»“æ„ä¿¡æ¯ï¼ˆä¾‹å¦‚ç‚¹äº‘ï¼‰ä¸­ä»¥å±€éƒ¨ [8] å’Œå…¨å±€æ–¹å¼ [10] å¼€å‘æè¿°å­ã€‚</p>
<p>ç°æœ‰çš„åŸºäº LiDAR çš„ä½ç½®è¯†åˆ«æ–¹æ³•ä¸€ç›´è¯•å›¾å…‹æœä¸¤ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼Œæ— è®ºè§†ç‚¹å˜åŒ–å¦‚ä½•ï¼Œéƒ½éœ€è¦æè¿°å­æ¥å®ç°æ—‹è½¬ä¸å˜æ€§ã€‚å…¶æ¬¡ï¼Œå™ªå£°å¤„ç†æ˜¯è¿™äº›ç©ºé—´æè¿°å­çš„å¦ä¸€ä¸ªä¸»é¢˜ï¼Œå› ä¸ºç‚¹äº‘çš„åˆ†è¾¨ç‡éšè·ç¦»è€Œå˜åŒ–ï¼Œå¹¶ä¸”æ³•çº¿æ˜¯æœ‰å™ªå£°çš„ã€‚ç°æœ‰æ–¹æ³•ä¸»è¦ä½¿ç”¨ç›´æ–¹å›¾[9,11,12]æ¥è§£å†³ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ã€‚ç„¶è€Œï¼Œç”±äºç›´æ–¹å›¾æ–¹æ³•åªæä¾›åœºæ™¯çš„éšæœºç´¢å¼•ï¼Œæè¿°åœºæ™¯çš„è¯¦ç»†ç»“æ„å¹¶ä¸ç®€å•ã€‚è¿™ç§é™åˆ¶ä½¿å¾—æè¿°å­å¯¹äºåœ°ç‚¹è¯†åˆ«é—®é¢˜çš„å¯è¯†åˆ«æ€§é™ä½ï¼Œä»è€Œå¯¼è‡´æ½œåœ¨çš„è¯¯åŒ¹é…ã€‚</p>
<p><img src="/images/Scan-Contextè®ºæ–‡é˜…è¯»/image-20220429164041335-16512834289762.png" alt="image-20220429164041335" style="zoom:50%;" /></p>
<p><img src="/images/Scan-Contextè®ºæ–‡é˜…è¯»/image-20220429164059389-16512834289774.png" alt="image-20220429164059389" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ 1. ä¸¤æ­¥$\mathrm{Scan Context}$åˆ›å»ºã€‚ä½¿ç”¨æ¥è‡ª 3D æ‰«æçš„ç‚¹äº‘çš„ä¿¯è§†å›¾ (a)ï¼Œæˆ‘ä»¬å°†åœ°é¢åŒºåŸŸåˆ’åˆ†ä¸º binï¼Œæ ¹æ®æ–¹ä½è§’ï¼ˆåœ¨ LiDAR æ¡†æ¶å†…ä» 0 åˆ° 2Ï€ï¼‰å’Œå¾„å‘ï¼ˆä»ä¸­å¿ƒåˆ°æœ€å¤§æ„Ÿåº”èŒƒå›´ï¼‰è¿›è¡Œåˆ’åˆ†æ–¹å‘ã€‚æˆ‘ä»¬å°†é»„è‰²åŒºåŸŸç§°ä¸ºä¸€ä¸ªç¯ï¼Œå°†é’è‰²åŒºåŸŸç§°ä¸ºä¸€ä¸ªæ‰‡åŒºï¼Œå°†é»‘è‰²å¡«å……åŒºåŸŸç§°ä¸ºä¸€ä¸ª binã€‚$\mathrm{Scan Context}$æ˜¯ï¼ˆbï¼‰ä¸­çš„çŸ©é˜µï¼Œå®ƒæ˜ç¡®åœ°ä¿ç•™äº†ç‚¹äº‘çš„ç»å¯¹å‡ ä½•ç»“æ„ã€‚ (a) ä¸­æè¿°çš„ç¯å’Œæ‰‡åŒºåœ¨ (b) ä¸­åˆ†åˆ«ç”±ç›¸åŒé¢œè‰²çš„åˆ—å’Œè¡Œè¡¨ç¤ºã€‚ä»ä½äºæ¯ä¸ª bin ä¸­çš„ç‚¹ä¸­æå–çš„ä»£è¡¨å€¼ç”¨ä½œ (b) çš„å¯¹åº”åƒç´ å€¼ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ bin ä¸­ç‚¹çš„æœ€å¤§é«˜åº¦ã€‚</p>
</blockquote>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº† $\mathrm{Scan Context}$ï¼Œè¿™æ˜¯ä¸€ç§å…·æœ‰åŒ¹é…ç®—æ³•çš„æ–°å‹ç©ºé—´æè¿°å­ï¼Œä¸“é—¨é’ˆå¯¹ä½¿ç”¨å•ä¸ª 3D æ‰«æçš„æˆ·å¤–åœ°ç‚¹è¯†åˆ«ã€‚æˆ‘ä»¬çš„è¡¨ç¤ºå°† 3D æ‰«æä¸­çš„æ•´ä¸ªç‚¹äº‘ç¼–ç ä¸ºçŸ©é˜µï¼ˆå›¾ 1ï¼‰ã€‚æ‰€æå‡ºçš„è¡¨ç¤ºæè¿°äº†ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„ 2.5D ä¿¡æ¯ã€‚è¯¥æ–¹æ³•çš„è´¡çŒ®ç‚¹æ˜¯ï¼š</p>
<ul>
<li><strong>é«˜æ•ˆçš„ bin ç¼–ç åŠŸèƒ½ã€‚</strong>ä¸ç°æœ‰çš„ç‚¹äº‘æè¿°å­ [7, 10] ä¸åŒï¼Œæ‰€æå‡ºçš„æ–¹æ³•ä¸éœ€è¦è®¡ç®— bin ä¸­çš„ç‚¹æ•°ï¼Œè€Œæ˜¯æå‡ºäº†ä¸€ç§æ›´æœ‰æ•ˆçš„ç”¨äºä½ç½®è¯†åˆ«çš„ bin ç¼–ç å‡½æ•°ã€‚è¿™ç§ç¼–ç å¯¹ç‚¹äº‘çš„å¯†åº¦å’Œæ³•çº¿å…·æœ‰ä¸å˜æ€§ã€‚</li>
<li><strong>ä¿ç•™ç‚¹äº‘çš„å†…éƒ¨ç»“æ„ã€‚</strong>å¦‚å›¾ 1 æ‰€ç¤ºï¼ŒçŸ©é˜µçš„æ¯ä¸ªå…ƒç´ å€¼ä»…ç”±å±äº bin çš„ç‚¹äº‘ç¡®å®šã€‚å› æ­¤ï¼Œä¸å°†ç‚¹çš„ç›¸å¯¹å‡ ä½•æè¿°ä¸ºç›´æ–¹å›¾å¹¶ä¸¢å¤±ç‚¹çš„ç»å¯¹ä½ç½®ä¿¡æ¯çš„[9]ä¸åŒï¼Œæˆ‘ä»¬çš„æ–¹æ³•é€šè¿‡æœ‰æ„é¿å…ä½¿ç”¨ç›´æ–¹å›¾æ¥ä¿ç•™ç‚¹äº‘çš„ç»å¯¹å†…éƒ¨ç»“æ„ã€‚è¿™æé«˜äº†åˆ¤åˆ«èƒ½åŠ›ï¼Œè¿˜å¯ä»¥åœ¨è®¡ç®—è·ç¦»æ—¶å°†æŸ¥è¯¢æ‰«æä¸å€™é€‰æ‰«æï¼ˆåœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œ6Â°æ–¹ä½è§’åˆ†è¾¨ç‡ï¼‰è¿›è¡Œè§†ç‚¹å¯¹é½ã€‚å› æ­¤ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨$\mathrm{Scan Context}$æ¥æ£€æµ‹åå‘é—­ç¯ã€‚</li>
<li><strong>æœ‰æ•ˆçš„ä¸¤ç›¸åŒ¹é…ç®—æ³•ã€‚</strong>ä¸ºäº†å®ç°å¯è¡Œçš„æœç´¢æ—¶é—´ï¼Œæˆ‘ä»¬ä¸ºç¬¬ä¸€ä¸ªæœ€è¿‘é‚»æœç´¢æä¾›äº†ä¸€ä¸ªæ—‹è½¬ä¸å˜çš„å­æè¿°å­ï¼Œå¹¶å°†å…¶ä¸æˆå¯¹ç›¸ä¼¼åº¦è¯„åˆ†åˆ†å±‚ç»“åˆï¼Œä»è€Œé¿å…æœç´¢æ‰€æœ‰æ•°æ®åº“è¿›è¡Œé—­ç¯æ£€æµ‹ã€‚</li>
<li><strong>é’ˆå¯¹å…¶ä»–æœ€å…ˆè¿›çš„ç©ºé—´æè¿°å­è¿›è¡Œå½»åº•éªŒè¯ã€‚</strong>ä¸å…¶ä»–ç°æœ‰çš„å…¨å±€ç‚¹äº‘æè¿°å­ç›¸æ¯”ï¼Œä¾‹å¦‚ M2DP [8]ã€å½¢çŠ¶å‡½æ•°é›†åˆ (ESF) [11] å’Œ Z æŠ•å½± [12]ï¼Œæ‰€æå‡ºçš„æ–¹æ³•å…·æœ‰å®è´¨æ€§çš„æ”¹è¿›ã€‚</li>
</ul>
<h1 id="â…¡-ç›¸å…³å·¥ä½œ"><a href="#â…¡-ç›¸å…³å·¥ä½œ" class="headerlink" title="â…¡.ç›¸å…³å·¥ä½œ"></a>â…¡.ç›¸å…³å·¥ä½œ</h1><p>ç§»åŠ¨æœºå™¨äººçš„ä½ç½®è¯†åˆ«æ–¹æ³•å¯ä»¥åˆ†ä¸ºåŸºäºè§†è§‰å’ŒåŸºäºæ¿€å…‰é›·è¾¾çš„æ–¹æ³•ã€‚è§†è§‰æ–¹æ³•å·²æ™®éç”¨äº SLAM æ–‡çŒ®ä¸­çš„åœ°ç‚¹è¯†åˆ« [13, 14, 15]ã€‚ FAB-MAP [13] é€šè¿‡å­¦ä¹ è§†è§‰è¯è¢‹çš„ç”Ÿæˆæ¨¡å‹ï¼Œä½¿ç”¨æ¦‚ç‡æ–¹æ³•æé«˜äº†é²æ£’æ€§ã€‚ç„¶è€Œï¼Œè§†è§‰è¡¨ç¤ºå…·æœ‰å±€é™æ€§ï¼Œä¾‹å¦‚æ˜“å—å…‰ç…§æ¡ä»¶å˜åŒ–çš„å½±å“[16]ã€‚å·²ç»æå‡ºäº†å‡ ç§æ–¹æ³•æ¥å…‹æœè¿™äº›é—®é¢˜ã€‚ SeqSLAM [17] æå‡ºäº†åŸºäºé“è·¯çš„æ–¹æ³•ï¼Œå¹¶æ˜¾ç¤ºå‡ºæ¯” FAB-MAP å¤§å¤§æé«˜çš„æ€§èƒ½ã€‚ SRAL [2] èåˆäº†å‡ ç§ä¸åŒçš„è¡¨ç¤ºï¼Œä¾‹å¦‚é¢œè‰²ã€GIST [18] å’Œ HOG [19]ï¼Œç”¨äºé•¿æœŸè§†è§‰ä½ç½®è¯†åˆ«ã€‚</p>
<p>LiDAR å¯¹ä¸Šè¿°è¿™äº›æ„ŸçŸ¥å˜åŒ–å…·æœ‰å¾ˆå¼ºçš„é²æ£’æ€§ã€‚åŸºäº LiDAR çš„æ–¹æ³•è¢«è¿›ä¸€æ­¥åˆ†ç±»ä¸ºå±€éƒ¨å’Œå…¨å±€æè¿°å­ã€‚å±€éƒ¨æè¿°å­ï¼Œä¾‹å¦‚ PFH [4]ã€SHOT [5]ã€shape context[7]æˆ– spin image [6]ï¼Œé¦–å…ˆæ‰¾åˆ°ä¸€ä¸ªå…³é”®ç‚¹ï¼Œå°†é™„è¿‘çš„ç‚¹åˆ†æˆ binï¼Œå¹¶å°†å‘¨å›´ bin çš„æ¨¡å¼ç¼–ç ä¸ºç›´æ–¹å›¾ã€‚Steder ç­‰äººæå‡ºäº†ä»¥è¯è¢‹çš„æ–¹å¼åˆ©ç”¨ç‚¹ç‰¹å¾å’Œå®Œå½¢æè¿°å­ï¼ˆgestalt descriptorï¼‰ [20] çš„ä½ç½®è¯†åˆ«æ–¹æ³•[8]ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™äº›å…³é”®ç‚¹æè¿°å­æ˜¾ç¤ºå‡ºå±€é™æ€§ï¼Œå› ä¸ºå®ƒä»¬æœ€åˆæ˜¯ä¸º 3D æ¨¡å‹éƒ¨åˆ†åŒ¹é…è€Œä¸æ˜¯ä¸ºä½ç½®è¯†åˆ«è€Œè®¾è®¡çš„ã€‚ä¾‹å¦‚ï¼Œä¸ 3D æ¨¡å‹ä¸åŒï¼Œ3D æ‰«æï¼ˆä¾‹å¦‚ï¼Œæ¥è‡ª VLP-16ï¼‰ä¸­çš„ç‚¹äº‘å¯†åº¦ä¼šéšç€ä¸ä¼ æ„Ÿå™¨çš„è·ç¦»è€Œå˜åŒ–ã€‚æ­¤å¤–ï¼Œç”±äºç°å®ä¸–ç•Œä¸­çš„éç»“æ„åŒ–å¯¹è±¡ï¼ˆä¾‹å¦‚æ ‘ï¼‰ï¼Œç‚¹çš„æ³•çº¿æ¯”æ¨¡å‹å™ªå£°æ›´å¤§ã€‚å› æ­¤ï¼Œå±€éƒ¨æ–¹æ³•é€šå¸¸éœ€è¦å…³é”®ç‚¹çš„æ³•çº¿ï¼Œå› æ­¤ä¸å¤ªé€‚åˆæˆ·å¤–çš„åœ°ç‚¹è¯†åˆ«ã€‚</p>
<p>å…¨å±€æè¿°å­ä¸åŒ…æ‹¬å…³é”®ç‚¹æ£€æµ‹é˜¶æ®µã€‚ GLARE [9] åŠå…¶å˜ä½“ [21, 22] å°†ç‚¹ä¹‹é—´çš„å‡ ä½•å…³ç³»ç¼–ç ä¸ºç›´æ–¹å›¾ï¼Œä»¥ä»£æ›¿æœç´¢å…³é”®ç‚¹å’Œæå–æè¿°å­ã€‚ ESF [11] ä½¿ç”¨äº†ç”±å½¢çŠ¶å‡½æ•°åˆ¶æˆçš„ç›´æ–¹å›¾çš„ä¸²è”ã€‚ Muhammad å’Œ Lacroix æå‡ºäº† Z æŠ•å½± [12]ï¼Œå®ƒæ˜¯æ³•å‘é‡çš„ç›´æ–¹å›¾ï¼Œä»¥åŠå…·æœ‰ä¸¤ä¸ªè·ç¦»å‡½æ•°çš„åŒé˜ˆå€¼æ–¹æ¡ˆã€‚Heet ç­‰äººæå‡ºäº† M2DP [10]ï¼Œå®ƒå°†æ‰«æçš„æ•´ä¸ª 3D ç‚¹äº‘æŠ•å½±åˆ°å¤šä¸ª 2D å¹³é¢å¹¶æå– 192 ç»´ç´§å‡‘çš„å…¨å±€è¡¨ç¤ºã€‚M2DP è¡¨ç°å‡ºæ¯”ç°æœ‰ç‚¹äº‘æè¿°å­æ›´é«˜çš„æ€§èƒ½ä»¥åŠå¯¹å™ªå£°å’Œåˆ†è¾¨ç‡å˜åŒ–çš„é²æ£’æ€§ã€‚å¦‚æœ¬æ®µæ‰€è¿°ï¼Œå…¨å±€æè¿°å­é€šå¸¸ä½¿ç”¨ç›´æ–¹å›¾ã€‚æœ€è¿‘ï¼ŒSegMatch [23] å¼•å…¥äº†ä¸€ç§åŸºäºåˆ†æ®µçš„åŒ¹é…ç®—æ³•ã€‚è¿™æ˜¯ä¸€ç§é«˜çº§æ„ŸçŸ¥ï¼Œä½†éœ€è¦ä¸€ä¸ªè®­ç»ƒæ­¥éª¤ï¼Œå¹¶ä¸”éœ€è¦åœ¨å…¨å±€å‚è€ƒæ¡†æ¶ä¸­è¡¨ç¤ºç‚¹ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„ä½ç½®æè¿°å­ï¼Œç§°ä¸º$\mathrm{Scan Context}$ï¼Œå®ƒå°† 3D æ‰«æçš„ç‚¹äº‘ç¼–ç ä¸ºçŸ©é˜µã€‚$\mathrm{Scan Context}$å¯ä»¥è¢«è®¤ä¸ºæ˜¯Shape Context [7] çš„æ‰©å±•ï¼Œç”¨äºå®šä½ 3D LiDAR æ‰«ææ•°æ®çš„ä½ç½®è¯†åˆ«ã€‚å…·ä½“æ¥è¯´ï¼Œ$\mathrm{Scan Context}$åŒ…å«ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼šåœ¨æ¯ä¸ª bin ä¸­ä¿ç•™ç‚¹äº‘çš„ç»å¯¹ä½ç½®ä¿¡æ¯çš„è¡¨ç¤ºã€é«˜æ•ˆçš„ bin ç¼–ç å‡½æ•°å’Œä¸¤æ­¥æœç´¢ç®—æ³•ã€‚</p>
<h1 id="â…¢-mathrm-Scan-Context-è¿›è¡Œåœ°ç‚¹è¯†åˆ«"><a href="#â…¢-mathrm-Scan-Context-è¿›è¡Œåœ°ç‚¹è¯†åˆ«" class="headerlink" title="â…¢.$\mathrm{Scan Context}$è¿›è¡Œåœ°ç‚¹è¯†åˆ«"></a>â…¢.$\mathrm{Scan Context}$è¿›è¡Œåœ°ç‚¹è¯†åˆ«</h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†ç»™å®šæ¥è‡ª 3D æ‰«æçš„ç‚¹äº‘çš„$\mathrm{Scan Context}$åˆ›å»ºï¼Œå¹¶æå‡ºäº†ä¸€ç§è®¡ç®—ä¸¤ä¸ª$\mathrm{Scan Context}$ä¹‹é—´è·ç¦»çš„åº¦é‡ã€‚æ¥ä¸‹æ¥ï¼Œä»‹ç»ä¸¤æ­¥æœç´¢è¿‡ç¨‹ã€‚ä½¿ç”¨$\mathrm{Scan Context}$è¿›è¡Œä½ç½®è¯†åˆ«çš„æ•´ä½“æµç¨‹å¦‚å›¾ 2 æ‰€ç¤ºã€‚$\mathrm{Scan Context}$çš„åˆ›å»ºå’ŒéªŒè¯ä¹Ÿå¯ä»¥åœ¨ scancontext.mp4 ä¸­æ‰¾åˆ°ã€‚</p>
<h2 id="A-mathrm-Scan-Context"><a href="#A-mathrm-Scan-Context" class="headerlink" title="A.$\mathrm{Scan Context}$"></a>A.$\mathrm{Scan Context}$</h2><p>æˆ‘ä»¬ä¸ºæˆ·å¤–åœ°ç‚¹è¯†åˆ«å®šä¹‰äº†ä¸€ä¸ªåä¸º $\mathrm{Scan Context}$ çš„åœ°ç‚¹æè¿°å­ã€‚</p>
<p><img src="/images/Scan-Contextè®ºæ–‡é˜…è¯»/image-20220429192701251-16512834289773.png" alt="image-20220429192701251" style="zoom: 50%;" /></p>
<blockquote>
<p>å›¾ 2. ç®—æ³•æ¦‚è¿°ã€‚é¦–å…ˆï¼Œå°†å•ä¸ª 3D æ‰«æä¸­çš„ç‚¹äº‘ç¼–ç åˆ°$\mathrm{Scan Context}$ä¸­ã€‚ç„¶åï¼Œä»$\mathrm{Scan Context}$ä¸­å¯¹ $N_t$ï¼ˆç¯æ•°ï¼‰ç»´å‘é‡è¿›è¡Œç¼–ç ï¼Œå¹¶ç”¨äºæ£€ç´¢æœ€è¿‘çš„å€™é€‰é¡¹ä»¥åŠ KD æ ‘çš„æ„é€ ã€‚æœ€åï¼Œå°†æ£€ç´¢åˆ°çš„å€™é€‰ä¸æŸ¥è¯¢$\mathrm{Scan Context}$è¿›è¡Œæ¯”è¾ƒã€‚æ»¡è¶³æ¥å—é˜ˆå€¼å¹¶æœ€æ¥è¿‘æŸ¥è¯¢çš„å€™é€‰è¢«è®¤ä¸ºæ˜¯é—­ç¯ã€‚</p>
</blockquote>
<p>$\mathrm{Scan Context}$çš„å…³é”®æ€æƒ³å—åˆ° Belongie ç­‰äººæå‡ºçš„ Shape Context [7] çš„å¯å‘ï¼Œå®ƒå°†å±€éƒ¨å…³é”®ç‚¹å‘¨å›´çš„ç‚¹äº‘çš„å‡ ä½•å½¢çŠ¶ç¼–ç ä¸ºå›¾åƒã€‚ç„¶è€Œä»–ä»¬çš„æ–¹æ³•åªæ˜¯ç®€å•åœ°è®¡ç®—ç‚¹çš„æ•°é‡æ¥æ€»ç»“ç‚¹çš„åˆ†å¸ƒï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä¸ä»–ä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºæˆ‘ä»¬ä½¿ç”¨æ¯ä¸ª bin ä¸­ç‚¹äº‘çš„é«˜åº¦ã€‚ä½¿ç”¨é«˜åº¦çš„åŸå› æ˜¯ä¸ºäº†æœ‰æ•ˆåœ°æ€»ç»“å‘¨å›´ç»“æ„çš„å‚ç›´å½¢çŠ¶ï¼Œè€Œä¸éœ€è¦å¤§é‡çš„è®¡ç®—æ¥åˆ†æç‚¹äº‘çš„ç‰¹å¾ã€‚æ­¤å¤–ï¼Œæœ€å¤§é«˜åº¦è¡¨ç¤ºä»ä¼ æ„Ÿå™¨å¯ä»¥çœ‹åˆ°å‘¨å›´ç»“æ„çš„å“ªä¸€éƒ¨åˆ†ã€‚è¿™ç§ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„å¯è§†åŒ–åœ¨åŸå¸‚è®¾è®¡æ–‡çŒ®ä¸­ä¸€ç›´æ˜¯ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„æ¦‚å¿µï¼Œç”¨äºåˆ†æä¸€ä¸ªåœ°æ–¹çš„èº«ä»½[24, 25]ã€‚</p>
<p>ä¸Shape Context [7] ç±»ä¼¼ï¼Œæˆ‘ä»¬é¦–å…ˆå°† 3D æ‰«æåˆ’åˆ†ä¸ºä¼ æ„Ÿå™¨åæ ‡ä¸­çš„æ–¹ä½è§’å’Œå¾„å‘ binï¼Œä½†é‡‡ç”¨ç­‰é—´è·çš„æ–¹å¼ï¼Œå¦‚å›¾ 1(a) æ‰€ç¤ºã€‚æ‰«æçš„ä¸­å¿ƒå……å½“å…¨å±€å…³é”®ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬å°†$\mathrm{Scan Context}$ç§°ä¸ºä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„ä½ç½®æè¿°å­ã€‚$N_s$ å’Œ $N_r$ åˆ†åˆ«æ˜¯æ‰‡åŒºå’Œç¯çš„æ•°é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬å°† LiDAR ä¼ æ„Ÿå™¨çš„æœ€å¤§æ„Ÿåº”èŒƒå›´è®¾ç½®ä¸º $L_{max}$ï¼Œåˆ™ç¯ä¹‹é—´çš„å¾„å‘é—´éš™ä¸º $\frac{L_{max} }{N_r}$ï¼Œæ‰‡å½¢çš„ä¸­å¿ƒè§’ç­‰äº$\frac{2\pi}{N_s}$ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ $N_s= 60$ å’Œ $N_r = 20$ã€‚</p>
<p>å› æ­¤ï¼Œåˆ¶ä½œ$\mathrm{Scan Context}$çš„ç¬¬ä¸€ä¸ªè¿‡ç¨‹æ˜¯å°† 3D æ‰«æçš„æ•´ä¸ªç‚¹åˆ’åˆ†ä¸ºç›¸äº’æ’æ–¥çš„ç‚¹äº‘ï¼Œå¦‚å›¾ 1(a) æ‰€ç¤ºã€‚$\mathcal{P}_{ij}$æ˜¯å±äºç¬¬$ i $ä¸ªç¯å’Œç¬¬ $j$ ä¸ªæ‰‡åŒºé‡å çš„ bin çš„ç‚¹é›†ã€‚ç¬¦å· $[N_s]$ ç­‰äº$ \{1, 2, â€¦, N_{s-1}, N_s\}$ã€‚å› æ­¤ï¼Œåˆ†åŒºåœ¨æ•°å­¦ä¸Šæ˜¯</p>
<script type="math/tex; mode=display">
\mathcal{P}=\underset{i\in[N_r],j\in[N_s]}{\cup}\mathcal{P}_{ij}\tag{1}</script><p>å› ä¸ºç‚¹äº‘æ˜¯æŒ‰å›ºå®šé—´éš”åˆ’åˆ†çš„ï¼Œæ‰€ä»¥è¿œç¦»ä¼ æ„Ÿå™¨çš„ bin çš„ç‰©ç†é¢ç§¯æ¯”è¿‘çš„ bin æ›´å®½ã€‚ä½†æ˜¯ï¼Œä¸¤è€…éƒ½è¢«åŒç­‰åœ°ç¼–ç åˆ°$\mathrm{Scan Context}$çš„å•ä¸ªåƒç´ ä¸­ã€‚å› æ­¤ï¼Œ$\mathrm{Scan Context}$è¡¥å¿äº†ç”±äºè¿œç‚¹ç¨€ç–å¯¼è‡´çš„ä¿¡æ¯é‡ä¸è¶³ï¼Œå¹¶å°†é™„è¿‘çš„åŠ¨æ€å¯¹è±¡è§†ä¸ºç¨€ç–å™ªå£°ã€‚</p>
<p>åœ¨ç‚¹äº‘åˆ†åŒºä¹‹åï¼Œä½¿ç”¨è¯¥ bin ä¸­çš„ç‚¹äº‘ä¸ºæ¯ä¸ª bin åˆ†é…ä¸€ä¸ªå®æ•°å€¼ï¼š</p>
<script type="math/tex; mode=display">
\phi:\mathcal{P}_{ij}\rightarrow\mathbb{R}\tag{2}</script><p>æˆ‘ä»¬ä½¿ç”¨æœ€å¤§é«˜åº¦ï¼Œå…¶çµæ„Ÿæ¥è‡ªåŸå¸‚èƒ½è§åº¦åˆ†æ [24, 25]ã€‚å› æ­¤ï¼Œbin ç¼–ç å‡½æ•°ä¸º:</p>
<script type="math/tex; mode=display">
\phi(\mathcal{P}_{ij})=\underset{p\in\mathcal{P}_{ij}}{\max}z(p)\tag{3}</script><p>å…¶ä¸­ $z(\cdot ) $æ˜¯è¿”å›ç‚¹ $p$ çš„$ z $åæ ‡å€¼çš„å‡½æ•°ã€‚æˆ‘ä»¬ä¸ºç©ºçš„binåˆ†é…é›¶ã€‚ä¾‹å¦‚ï¼Œå¦‚å›¾ 1(b) æ‰€ç¤ºï¼Œ$\mathrm{Scan Context}$ä¸­çš„è“è‰²åƒç´ æ„å‘³ç€ä¸å…¶ bin å¯¹åº”çš„ç©ºé—´æ˜¯ç©ºé—²çš„ï¼Œæˆ–è€…ç”±äºé®æŒ¡è€Œæœªè§‚å¯Ÿåˆ°ã€‚</p>
<p>é€šè¿‡ä¸Šè¿°è¿‡ç¨‹ï¼Œæœ€ç»ˆå°†$\mathrm{Scan Context}$ $I$ è¡¨ç¤ºä¸º$ N_r\times N_s$ çŸ©é˜µ:</p>
<script type="math/tex; mode=display">
I=(a_{ij})\in\mathbb{R}^{N_r\times N_s},a_{ij}=\phi(\mathcal{P}_{ij})\tag{4}</script><p>ä¸ºäº†å¯¹å˜æ¢è¿›è¡Œé²æ£’çš„è¯†åˆ«ï¼Œæˆ‘ä»¬é€šè¿‡$\mathit{ root\ shifting}$ æ¥å¢å¼º $\mathrm{Scan Context}$ã€‚é€šè¿‡è¿™æ ·åšï¼Œåœ¨è½»å¾®è¿åŠ¨æ‰°åŠ¨ä¸‹ä»åŸå§‹æ‰«æä¸­è·å–å„ç§$\mathrm{Scan Context}$å˜å¾—å¯è¡Œã€‚</p>
<p>åœ¨é‡æ–°è®¿é—®åˆ°è¿‡çš„åœ°æ–¹æ—¶ï¼Œå•ä¸ª$\mathrm{Scan Context}$å¯èƒ½å¯¹å¹³ç§»è¿åŠ¨ä¸‹çš„æ‰«æä¸­å¿ƒä½ç½®æ•æ„Ÿã€‚ä¾‹å¦‚ï¼Œå½“é‡æ–°è®¿é—®ä¸åŒé€šé“ä¸­çš„ç›¸åŒä½ç½®æ—¶ï¼Œå¯èƒ½ä¸ä¼šä¿ç•™$\mathrm{Scan Context}$çš„è¡Œé¡ºåºã€‚ä¸ºäº†å…‹æœè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æ ¹æ®æ°´å¹³é—´éš”å°†åŸå§‹ç‚¹äº‘è½¬æ¢ä¸º $N_{trans}$ ä¸ªé‚»å±…ï¼ˆæœ¬æ–‡ä¸­ä½¿ç”¨$N_{trans}=8$  ï¼‰ï¼Œå¹¶å°†ä»è¿™äº›$\mathit{ root\ shifting}$ ç‚¹äº‘è·å¾—çš„$\mathrm{Scan Context}$å­˜å‚¨åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬å‡è®¾å³ä½¿åœ¨å®é™…ç§»åŠ¨çš„ä½ç½®ä¹Ÿèƒ½è·å¾—ç±»ä¼¼çš„ç‚¹äº‘ï¼Œè¿™æ˜¯æœ‰æ•ˆçš„ï¼Œé™¤äº†å°‘æ•°æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä¸€ä¸ªæ–°ç©ºé—´çªç„¶å‡ºç°çš„äº¤å‰ç‚¹ã€‚</p>
<h2 id="B-mathrm-Scan-Context-ä¹‹é—´çš„ç›¸ä¼¼åº¦å¾—åˆ†"><a href="#B-mathrm-Scan-Context-ä¹‹é—´çš„ç›¸ä¼¼åº¦å¾—åˆ†" class="headerlink" title="B. $\mathrm{Scan Context}$ä¹‹é—´çš„ç›¸ä¼¼åº¦å¾—åˆ†"></a>B. $\mathrm{Scan Context}$ä¹‹é—´çš„ç›¸ä¼¼åº¦å¾—åˆ†</h2><p>ç»™å®šä¸€ä¸ª$\mathrm{Scan Context}$å¯¹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè·ç¦»åº¦é‡æ¥è¡¡é‡ä¸¤ä¸ªåœ°æ–¹çš„ç›¸ä¼¼æ€§ã€‚$I^q$ å’Œ$ I^c $åˆ†åˆ«æ˜¯ä»æŸ¥è¯¢ç‚¹äº‘å’Œå€™é€‰ç‚¹äº‘è·å–çš„$\mathrm{Scan Context}$ã€‚å®ƒä»¬ä»¥åˆ—æ–¹å¼è¿›è¡Œæ¯”è¾ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè·ç¦»æ˜¯åŒä¸€ç´¢å¼•å¤„çš„åˆ—ä¹‹é—´çš„è·ç¦»ä¹‹å’Œã€‚ä½™å¼¦è·ç¦»ç”¨äºè®¡ç®—ç›¸åŒç´¢å¼•å¤„çš„ä¸¤ä¸ªåˆ—å‘é‡ $c^q_j $å’Œ $c^c_j $ä¹‹é—´çš„è·ç¦»ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†æ€»å’Œé™¤ä»¥æ€»åˆ—æ•°$N_s$ç”¨äºå½’ä¸€åŒ–ã€‚å› æ­¤ï¼Œè·ç¦»å‡½æ•°ä¸º:</p>
<script type="math/tex; mode=display">
d(I^q,I^c)=\frac{1}{N_s}\sum^{N_s}_{j=1}(1-\frac{c^q_j\cdot c^c_j}{\parallel c^q_j \parallel \parallel c^c_j \parallel}).\tag{5}</script><p>è€ƒè™‘åˆ°è´¯ç©¿æ‰‡åŒºçš„ä¸€è‡´æ€§ï¼ŒåŸºäºåˆ—çš„æ¯”è¾ƒå¯¹åŠ¨æ€ç‰©ä½“ç‰¹åˆ«æœ‰æ•ˆã€‚ç„¶è€Œï¼Œå€™é€‰$\mathrm{Scan Context}$çš„åˆ—ç”šè‡³å¯ä»¥åœ¨ç›¸åŒçš„åœ°æ–¹ç§»åŠ¨ï¼Œå› ä¸ºæ¿€å…‰é›·è¾¾çš„è§†è§’å¯¹äºä¸åŒçš„åœ°æ–¹æ˜¯ä¸åŒçš„(ä¾‹å¦‚ï¼Œåœ¨ç›¸åçš„æ–¹å‘æˆ–è§’è½é‡æ–°è®¿é—®ä¸€ä¸ªåœ°æ–¹)ã€‚å›¾3è¯´æ˜äº†è¿™ç§æƒ…å†µã€‚ç”±äº$\mathrm{Scan Context}$æ˜¯ä¾èµ–äºä¼ æ„Ÿå™¨ä½ç½®çš„è¡¨ç¤ºï¼Œå› æ­¤è¡Œé¡ºåºå§‹ç»ˆæ˜¯ä¸€è‡´çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœ LiDAR ä¼ æ„Ÿå™¨ç›¸å¯¹äºå…¨å±€åæ ‡çš„åæ ‡å‘ç”Ÿå˜åŒ–ï¼Œåˆ™åˆ—é¡ºåºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</p>
<p><img src="/images/Scan-Contextè®ºæ–‡é˜…è¯»/image-20220429201446582-16512834290096.png" alt="image-20220429201446582" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ 3. å…·æœ‰æ—¶é—´é—´éš”çš„åŒä¸€åœ°ç‚¹çš„$\mathrm{Scan Context}$ç¤ºä¾‹ã€‚é‡æ–°è®¿é—®æ—¶ä¼ æ„Ÿå™¨è§†ç‚¹çš„å˜åŒ–å¯¼è‡´$\mathrm{Scan Context}$çš„åˆ—ç§»ä½ï¼Œå¦‚ (a) æ‰€ç¤ºã€‚ä½†æ˜¯ï¼Œè¿™ä¸¤ä¸ªçŸ©é˜µåŒ…å«ç›¸ä¼¼çš„å½¢çŠ¶å¹¶æ˜¾ç¤ºç›¸åŒçš„è¡Œé¡ºåºã€‚</p>
</blockquote>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨æ‰€æœ‰å¯èƒ½çš„åˆ—ç§»ä½åçš„$\mathrm{Scan Context}$æ¥è®¡ç®—è·ç¦»ï¼Œå¹¶æ‰¾åˆ°æœ€å°è·ç¦»ã€‚$I^c_n$ æ˜¯ä¸€ä¸ª$\mathrm{Scan Context}$ï¼Œå®ƒçš„ç¬¬$n$åˆ—æ˜¯ä»åŸå§‹çš„$\mathrm{Scan Context}$åç§»è¿‡æ¥çš„ã€‚è¿™ä¸ä»¥$\frac{2\pi}{N_s}$åˆ†è¾¨ç‡ç²—ç•¥å¯¹é½ä¸¤ä¸ªç‚¹äº‘ä»¥è·å–æ—‹è½¬åˆ†é‡ä¸­çš„åèˆªè§’çš„ä»»åŠ¡ç›¸åŒã€‚ç„¶åï¼Œæˆ‘ä»¬ç¡®å®šæœ€ä½³å¯¹é½çš„åˆ—ç§»ä½æ•°é‡$(7)$å’Œå¯¹åº”çš„è·ç¦»$(6)$:</p>
<script type="math/tex; mode=display">
\begin{align*}
D(I^q,I^c)&=\underset{n\in[N_s]}{\min}d(I^q,I^c_n),\tag{6}\\
n^*&=\underset{n\in[N_s]}{\arg\min}\ d(I^q,I^c_n),\tag{7}
\end{align*}</script><p>è¯·æ³¨æ„ï¼Œæ­¤é™„åŠ ç§»ä½ä¿¡æ¯å¯ä»¥ä½œä¸ºè¿›ä¸€æ­¥å®šä½ç»†åŒ–çš„è‰¯å¥½åˆå§‹å€¼ï¼Œä¾‹å¦‚è¿­ä»£æœ€è¿‘ç‚¹ (ICP)ï¼Œå¦‚ç¬¬ IV-C èŠ‚æ‰€ç¤ºã€‚</p>
<h2 id="C-ä¸¤é˜¶æ®µæœç´¢ç®—æ³•"><a href="#C-ä¸¤é˜¶æ®µæœç´¢ç®—æ³•" class="headerlink" title="C. ä¸¤é˜¶æ®µæœç´¢ç®—æ³•"></a>C. ä¸¤é˜¶æ®µæœç´¢ç®—æ³•</h2><p>å½“åœ¨ä½ç½®è¯†åˆ«çš„ScanContextæœç´¢æ—¶ï¼Œæœ‰ä¸‰ä¸ªä¸»è¦çš„å…¸å‹å·¥ä½œæµï¼šæˆå¯¹ç›¸ä¼¼æ€§è¯„åˆ†ã€æœ€è¿‘é‚»æœç´¢å’Œç¨€ç–ä¼˜åŒ–[26]ã€‚æˆ‘ä»¬çš„æœç´¢ç®—æ³•å°†æˆå¯¹è¯„åˆ†å’Œæœ€è¿‘é‚»æœç´¢åˆ†å±‚èåˆï¼Œä»¥è·å¾—å¯æ¥å—çš„æœç´¢æ—¶é—´ã€‚</p>
<p>ç”±äºæˆ‘ä»¬åœ¨(6)ä¸­çš„è·ç¦»è®¡ç®—æ¯”å…¶ä»–å…¨å±€æè¿°å­å¦‚[12ï¼Œ10]æ›´åŠ è€—æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡å¼•å…¥ring keyæä¾›äº†ä¸€ä¸ªä¸¤é˜¶æ®µåˆ†å±‚æœç´¢ç®—æ³•ã€‚Ring keyæ˜¯ä¸€ä¸ªå…·æœ‰æ—‹è½¬ä¸å˜æ€§çš„æè¿°å­ï¼Œå®ƒæ˜¯ä»$\mathrm{Scan Context}$ä¸­æå–çš„ã€‚$\mathrm{Scan Context}$çš„æ¯ä¸€è¡Œï¼Œ$r$ï¼Œéƒ½é€šè¿‡ç¯å½¢ç¼–ç å‡½æ•°$\psi$ç¼–ç æˆä¸€ä¸ªå®æ•°å€¼ã€‚çŸ¢é‡<strong>$k$</strong>çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ¥è‡ªè·ç¦»ä¼ æ„Ÿå™¨æœ€è¿‘çš„ç¯ï¼Œéšåçš„å…ƒç´ æ¥è‡ªä¸‹ä¸€ä¸ªç¯ï¼Œå¦‚å›¾4æ‰€ç¤ºã€‚å› æ­¤ï¼Œring keyæˆä¸ºä¸€ä¸ª $N_r$ ç»´å‘é‡ï¼Œå¦‚ (8)ï¼š</p>
<script type="math/tex; mode=display">
k=(\psi(r_1),...,\psi(r_{N_r})),\mathrm{where}\ \psi:r_i\rightarrow\mathbb{R}\tag{8}</script><p>æˆ‘ä»¬ä½¿ç”¨çš„ç¯ç¼–ç å‡½æ•°$\psi$æ˜¯ä½¿ç”¨ $L_0$èŒƒæ•°çš„ç¯çš„å ç”¨ç‡ï¼š</p>
<script type="math/tex; mode=display">
\psi(r_i)=\frac{\parallel r_i \parallel_0}{N_s}\tag{9}</script><p>ç”±äºå ç”¨ç‡ä¸è§†ç‚¹æ— å…³ï¼Œå› æ­¤ring keyå®ç°äº†æ—‹è½¬ä¸å˜æ€§ã€‚</p>
<p><img src="/images/Scan-Contextè®ºæ–‡é˜…è¯»/image-20220429203142763-16512834290095.png" alt="image-20220429203142763" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ 4. å¿«é€Ÿæœç´¢çš„ring keyç”Ÿæˆã€‚</p>
</blockquote>
<p>è™½ç„¶ä¸å¦‚$\mathrm{Scan Context}$ä¿¡æ¯ä¸°å¯Œï¼Œä½†ring keyæ”¯æŒå¿«é€Ÿæœç´¢ï¼Œä»¥æ‰¾åˆ°å¯èƒ½çš„å€™é€‰é—­ç¯ã€‚å‘é‡$k$ç”¨ä½œæ„å»ºKDæ ‘çš„keyã€‚åŒæ—¶ï¼Œè¦æŸ¥è¯¢æ‰«æçš„ring keyç”¨äºæŸ¥æ‰¾ç›¸ä¼¼çš„keyåŠå…¶å¯¹åº”çš„æ‰«æç´¢å¼•ã€‚å°†è¢«æ£€ç´¢çš„ç›¸ä¼¼keyçš„æ•°é‡ç”±ç”¨æˆ·å†³å®šã€‚ä½¿ç”¨è·ç¦»(6)å°†è¿™äº›æ’å®šæ•°é‡çš„å€™é€‰$\mathrm{Scan Context}$ä¸è¦æŸ¥è¯¢çš„$\mathrm{Scan Context}$è¿›è¡Œæ¯”è¾ƒã€‚æœ€æ¥è¿‘çš„æ»¡è¶³ç»™å®šé˜ˆå€¼çš„å€™é€‰é¡¹è¢«é€‰ä¸ºé‡æ–°è®¿é—®çš„ä½ç½®:</p>
<script type="math/tex; mode=display">
c^*=\underset{c_k\in\mathcal{C} }{\arg\min}\ D(I^q,I^c),s.t. \ D<\tau\tag{10}</script><p>å…¶ä¸­ $\mathcal{C}$ æ˜¯ä» KD æ ‘ä¸­æå–çš„ä¸€ç»„å€™é€‰ç´¢å¼•ï¼Œ$\tau$ æ˜¯ç»™å®šçš„æ¥å—é˜ˆå€¼ã€‚ $c^âˆ— $æ˜¯ç¡®å®šä¸ºé—­ç¯çš„ä½ç½®çš„ç´¢å¼•ã€‚</p>
<h1 id="â…£-å®éªŒè¯„ä¼°"><a href="#â…£-å®éªŒè¯„ä¼°" class="headerlink" title="â…£.å®éªŒè¯„ä¼°"></a>â…£.å®éªŒè¯„ä¼°</h1><p>ç•¥â€¦â€¦.</p>
<h1 id="â…¤-ç»“è®º"><a href="#â…¤-ç»“è®º" class="headerlink" title="â…¤.ç»“è®º"></a>â…¤.ç»“è®º</h1><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªç©ºé—´æè¿°å­â€”â€”$\mathrm{Scan Context}$ï¼Œå°†ä¸€ä¸ªåœ°æ–¹æ¦‚æ‹¬ä¸ºä¸€ä¸ªçŸ©é˜µï¼Œè¿™ä¸ªçŸ©é˜µæ˜ç¡®æè¿°äº†ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„ç¯å¢ƒçš„2.5Dç»“æ„ä¿¡æ¯ã€‚ä¸ä½¿ç”¨ç‚¹äº‘çš„ç°æœ‰å…¨å±€æè¿°å­ç›¸æ¯”ï¼Œ$\mathrm{Scan Context}$åœ¨å„ç§æ•°æ®é›†ä¸Šæ˜¾ç¤ºå‡ºæ›´é«˜çš„é—­ç¯æ£€æµ‹æ€§èƒ½ã€‚</p>
<p>åœ¨æœªæ¥çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è®¡åˆ’é€šè¿‡å¼•å…¥é¢å¤–çš„å±‚æ¥æ‰©å±•$\mathrm{Scan Context}$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶ä»–binç¼–ç å‡½æ•°(ä¾‹å¦‚ï¼Œbinçš„è¯­ä¹‰ä¿¡æ¯)å¯è¢«ç”¨äºæé«˜æ€§èƒ½ï¼Œå³ä½¿å¯¹äºå…·æœ‰é«˜åº¦é‡å¤ç»“æ„çš„æ•°æ®é›†ï¼Œå¦‚å¤æ‚åŸå¸‚æ¿€å…‰é›·è¾¾æ•°æ®é›†ã€‚</p>
<p>Lidarå®šä½ï¼šScan Context<a href="https://zhuanlan.zhihu.com/p/359523177">https://zhuanlan.zhihu.com/p/359523177</a></p>
<p>Scan Context ä»‹ç»åŠç†è§£<a href="https://zhuanlan.zhihu.com/p/393353116">https://zhuanlan.zhihu.com/p/393353116</a></p>
<p>ä»é›¶å¼€å§‹åšè‡ªåŠ¨é©¾é©¶å®šä½(äºŒ): æ•°æ®é›†<a href="https://zhuanlan.zhihu.com/p/104875159">https://zhuanlan.zhihu.com/p/104875159</a></p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>ScanContext</tag>
        <tag>æ¿€å…‰SLAM</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ç«¯é‡Œç¨‹è®¡æ–¹æ¡ˆ-åŸºäºç›´æ¥åŒ¹é…çš„ICP&amp;NDT</title>
    <url>/posts/eb43aafd.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸¤ç§åŸºäºç›´æ¥åŒ¹é…çš„å‰ç«¯é‡Œç¨‹è®¡æ–¹æ¡ˆï¼ŒICPä»¥åŠNDTï¼Œé‡ç‚¹ä»‹ç»å…¬å¼æ¨å¯¼ä»¥åŠä»£ç å®ç°ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="ICP"><a href="#ICP" class="headerlink" title="ICP"></a><a href="https://lukeyalvin.top/posts/12311.html">ICP</a></h1><p>ICPå³è¿­ä»£æœ€è¿‘ç‚¹$ï¼ˆIterative\ Closest\  Pointï¼‰$çš„å®ç°ä»¥åŠå…¬å¼æ¨å¯¼åœ¨è§†è§‰SLAMä¸­å·²ç»æåŠï¼Œå¹¶è¿›è¡Œäº†ç›¸å…³çš„å…¬å¼æ¨å¯¼å’Œä»£ç å®ç°ï¼Œè¯¦ç»†æŸ¥çœ‹ï¼š<a href="https://lukeyalvin.top/posts/12311.html">æ±‚è§£ICP</a>ï¼Œè¿™é‡Œä¸åšå…·ä½“å±•ç¤ºã€‚</p>
<p><img src="/images/å‰ç«¯é‡Œç¨‹è®¡æ–¹æ¡ˆ-åŸºäºç›´æ¥åŒ¹é…/image-20220428161431509.png" alt="image-20220428161431509" style="zoom: 67%;" /></p>
<h1 id="ç»å…¸NDT"><a href="#ç»å…¸NDT" class="headerlink" title="ç»å…¸NDT"></a>ç»å…¸NDT</h1><p>ç”±äºICPè¿­ä»£æ³•ä¸€èˆ¬èˆ¬éœ€è¦æä¾›ä¸€ä¸ªè¾ƒå¥½çš„åˆå€¼ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ç²—é…å‡†ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´è¿­ä»£ç»“æœå¯èƒ½ä¼šé™·å…¥å±€éƒ¨æœ€ä¼˜ï¼Œå¯¼è‡´é…å‡†å¤±è´¥ï¼Œå¾€å¾€è¾¾ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚ç›®å‰ï¼Œå®é™…å·¥ç¨‹ä¹‹ä¸­ï¼Œå¤§å¤šæ•°ä½¿ç”¨å¦ä¸€ç§æ¯”è¾ƒå¥½çš„é…å‡†ç®—æ³•ï¼ŒNDTé…å‡†ã€‚</p>
<p>æ‰€è°“NDTå°±æ˜¯æ­£æ€åˆ†å¸ƒå˜æ¢ï¼Œä½œç”¨ä¸ICPä¸€æ ·ç”¨æ¥ä¼°è®¡ä¸¤ä¸ªç‚¹äº‘ä¹‹é—´çš„åˆšä½“å˜æ¢ã€‚NDTç®—æ³•ä¸»è¦çš„æ€è·¯å°±æ˜¯<strong>å°†ç›®æ ‡ç‚¹äº‘åˆ»ç”»æˆå¤šä¸ªæ¦‚ç‡åˆ†å¸ƒ</strong>ï¼Œç„¶åé€šè¿‡ä½å§¿å˜æ¢å…³ç³»å°†å¾…é…å‡†ç‚¹äº‘è½¬æ¢åˆ°ç›®æ ‡ç‚¹äº‘åæ ‡ç³»ä¸‹ï¼Œè®¡ç®—è½¬æ¢åå¾…é…å‡†ç‚¹äº‘çš„æ€»æ¦‚ç‡ï¼Œå¹¶å°†æ­¤æ¦‚ç‡çš„è´Ÿå€¼ä½œä¸ºç›®æ ‡å‡½æ•°ï¼Œé€šè¿‡é«˜æ–¯ç‰›é¡¿è¿­ä»£æ³•ä¼˜åŒ–è¯¥ç›®æ ‡å‡½æ•°ä»¥æ±‚è·å¾—è´Ÿçš„æœ€å°æ¦‚ç‡å€¼(å³æœ€å¤§æ¦‚ç‡å€¼)ï¼</p>
<p>ç”±äºå…¶åœ¨é…å‡†è¿‡ç¨‹ä¸­<strong>ä¸åˆ©ç”¨å¯¹åº”ç‚¹çš„ç‰¹å¾è®¡ç®—å’ŒåŒ¹é…</strong>ï¼Œæ‰€ä»¥æ—¶é—´æ¯”å…¶ä»–æ–¹æ³•å¿«ã€‚è¿™ä¸ªé…å‡†ç®—æ³•è€—æ—¶ç¨³å®šï¼Œè·Ÿåˆå€¼ç›¸å…³ä¸å¤§ï¼Œåˆå€¼è¯¯å·®å¤§æ—¶ï¼Œä¹Ÿèƒ½å¾ˆå¥½çš„çº æ­£è¿‡æ¥ã€‚å› æ­¤ï¼ŒNDTç®—æ³•å› å…¶å…·æœ‰è¾ƒå¼ºçš„é²æ£’æ€§è€Œè¢«å¹¿æ³›çš„åº”ç”¨ã€‚</p>
<p><img src="/images/å‰ç«¯é‡Œç¨‹è®¡æ–¹æ¡ˆ-åŸºäºç›´æ¥åŒ¹é…/image-20220428161900963.png" alt="image-20220428161900963" style="zoom: 50%;" /></p>
<center>NDTç®—æ³•æµç¨‹</center>

<p>å¯¹ç‚¹äº‘è¿›è¡Œç›¸åº”çš„é¢„å¤„ç†ä¹‹åï¼Œæˆ‘ä»¬å°†ç©ºé—´åˆ’åˆ†ä¸ºæ …æ ¼ï¼ˆ2Då›¾åƒä¸­çš„æ­£æ–¹å½¢æˆ–3Dä¸­çš„ç«‹æ–¹ä½“ï¼‰ï¼Œå¹¶ç»Ÿè®¡è½åœ¨æ …æ ¼ä¸­çš„ç‚¹ï¼Œå¦‚å›¾æ‰€ç¤º</p>
<p><img src="/images/å‰ç«¯é‡Œç¨‹è®¡æ–¹æ¡ˆ-åŸºäºç›´æ¥åŒ¹é…/image-20220428170225779.png" alt="image-20220428170225779" style="zoom:50%;" /></p>
<p>åŒæ ·çš„ï¼Œæˆ‘ä»¬è®¾ä¸Šä¸€å¸§ç‚¹é›†å’Œå½“å‰ç‚¹é›†åˆ†åˆ«ä¸ºï¼š</p>
<script type="math/tex; mode=display">
X=\{x_1,x_2,...,x_{N_x}\} \\
Y=\{y_1,y_2,...,y_{N_y}\}</script><p>æ±‚$X$çš„å‡å€¼ï¼š</p>
<script type="math/tex; mode=display">
\mu=\frac{1}{N_x}\sum^{N_x}_{i=1}x_i</script><p>æ±‚$X$çš„åæ–¹å·®ï¼š</p>
<script type="math/tex; mode=display">
\Sigma=\frac{1}{N_x-1}\sum^{N_x}_{i=1}(x_i-\mu)(x_i-\mu)^T</script><p>æ ¹æ®é¢„æµ‹çš„ä½å§¿$R,t$ï¼Œå¯¹ç‚¹è¿›è¡Œæ—‹è½¬å’Œå¹³ç§»ï¼Œå¾—åˆ°ä¸Šä¸€å¸§çš„ç‚¹äº‘æŠ•å½±åˆ°å½“å‰å¸§ä¸‹çš„ç‚¹äº‘$y_i^{\prime}$ï¼š</p>
<script type="math/tex; mode=display">
y_i^{\prime}=T(p,y_i)=Ry_i+t</script><blockquote>
<p> å…¶ä¸­å¯¹äº2Dæ¨¡å‹çš„ç‚¹ï¼š$p=[t_x\ t_y\ \phi_z]^T$ï¼Œå¯¹äº3Dæ¨¡å‹çš„ç‚¹ï¼š$p=[t_x\ t_y\ t_z\ \phi_x\ \phi_y\ \phi_z]^T$</p>
</blockquote>
<p>å°†å½“å‰ç‚¹é›†$X$çš„å‡å€¼$\mu$å’Œåæ–¹å·®$\sum$ï¼Œä¸æŠ•å½±ç‚¹é›†$y_i^\prime$çš„æ¯ä¸€ä¸ªç‚¹åšè”ç³»ï¼Œæ„å»ºå¦‚ä¸‹çš„æ¦‚ç‡åˆ†å¸ƒï¼š</p>
<script type="math/tex; mode=display">
f(X,y_i^\prime)=\frac{1}{\sqrt{2\pi}\sqrt{|\Sigma|} }\exp(-\frac{(y_i^\prime-\mu)^T\Sigma^{-1}(y_i^\prime-\mu)}{2})\tag{1}</script><p>ç„¶åæ±‚æ‰€æœ‰ç‚¹çš„<strong>è”åˆæ¦‚ç‡åˆ†å¸ƒï¼š</strong></p>
<script type="math/tex; mode=display">
\begin{align*}
\Psi&=\prod_{i=1}^{N_y}f(X,y_i^\prime)\\
&=\prod_{i=1}^{N_y}\frac{1}{\sqrt{2\pi}\sqrt{|\Sigma|} }\exp(-\frac{(y_i^\prime-\mu)^T\Sigma^{-1}(y_i^\prime-\mu)}{2})
\end{align*}\tag{2}</script><p>å–å¯¹æ•°ï¼Œç®€åŒ–é—®é¢˜ï¼š</p>
<script type="math/tex; mode=display">
\ln\Psi=\sum^{N_y}_{i=1}(-\frac{(y_i^\prime-\mu)^T\Sigma^{-1}(y_i^\prime-\mu)}{2}+\ln(\frac{1}{\sqrt{2\pi}\sqrt{|\Sigma|} }))\tag{3}</script><p>å»é™¤å¸¸æ•°é¡¹ï¼š</p>
<script type="math/tex; mode=display">
\max\Psi=\max\ln\Psi=\min\Psi_1=\min\sum^{N_y}_{i=1}(y_i^\prime-\mu)^T{\Sigma}^{-1}(y_i^\prime-\mu)\tag{4}</script><p>æ‰€ä»¥æˆ‘ä»¬çš„ç›®æ ‡å‡½æ•°å°±å˜æˆäº†ï¼š$\min\sum^{N_y}_{i=1}(y_i^\prime-\mu)^T{\Sigma}^{-1}(y_i^\prime-\mu)$ï¼Œè€Œæ¥ä¸‹æ¥çš„ä»»åŠ¡å°±æ˜¯æ ¹æ®è¿™ä¸ªç›®æ ‡å‡½æ•°æ±‚å¾—å¯¹åº”çš„å‚æ•°$R,t$ã€‚</p>
<p>ä»¤ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
e_i(p)&=y_i^\prime-\mu\\
F_i(p)&=\sum^{N_y}_{i=1}(y_i^\prime-\mu)^T{\Sigma}^{-1}(y_i^\prime-\mu)\\
&=e_i(p)^T\Sigma^{-1}e_i(p)
\end{align*}\tag{5}</script><p>å› æ­¤ç›®æ ‡å‡½æ•°ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&\min\sum^{N_y}_{i=1}(y_i^\prime-\mu)^T{\Sigma}^{-1}(y_i^\prime-\mu)\\
&=\min\sum^{N_y}_{i=1}F_i(p)
\end{align*}\tag{6}</script><p>è¿­ä»£ä¼˜åŒ–ï¼Œå³æ‰¾åˆ°$\Delta p$ä½¿å¾—ä¸‹å¼ä¸­çš„å€¼è¾¾åˆ°æœ€å°ï¼š</p>
<script type="math/tex; mode=display">
\min\sum^{N_y}_{i=1}F_i(p+\Delta p)=\sum^{N_y}_{i=1}e_i(p+\Delta p)^T\Sigma^{-1}e_i(p+\Delta p)\tag{7}</script><p>å…¶ä¸­å¯¹$e_i(p+\Delta p)$è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
e_i(p+\Delta p)&\approx e_i(p)+\frac{de_i}{dp}\Delta p\\
&=e_i(p)+J_i\Delta p
\end{align*}\tag{8}</script><p>æ•…è€Œï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
F_i(p+\Delta p)&=e_i(p+\Delta p)^T\Sigma^{-1}e_i(p+\Delta p)\\
&\approx (e_i(p)+J_i\Delta p)^T\Sigma^{-1}(e_i(p)+J_i\Delta p)\\
&=e_i(p)^T\Sigma^{-1}e_i(p)+2e_i(p)^T\Sigma^{-1}J_i\Delta p+\Delta p^TJ_i^T\Sigma^{-1}J_i\Delta p\\
&=F_i(p)+2b_i^T\Delta p+\Delta p^TH_i\Delta p
\end{align*}\tag{9}</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">
b_i^T=e_i(p)^T\Sigma^{-1}J_iï¼Œ\ H_i=J_i^T\Sigma^{-1}J_i\tag{10}</script><p>å› æ­¤ï¼Œç›®æ ‡å‡½æ•°éšè‡ªå˜é‡çš„å˜åŒ–ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\Delta F_i(p)
&=F_i(p+\Delta p)-F_i(p)\\
&=2b_i^T\Delta p+\Delta p^TH_i\Delta p
\end{align*}\tag{11}</script><p>ä¸Šè¿°ä¼˜åŒ–é—®é¢˜è½¬æ¢ä¸ºï¼šæ‰¾åˆ°$\Delta p$ä½¿å¾—$\Delta F_i(p)$å–å¾—æå°å€¼ï¼Œä»¤å…¶å¯¼æ•°ä¸ºé›¶ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{d\Delta F_i(p)}{d\Delta p}&=2b_i+2H_i\Delta p=0\\
å³ï¼šH_i\Delta p&=-b_i
\end{align*}\tag{12}</script><p>æ ¹æ®$(10)$ä¸­çš„å®šä¹‰ï¼Œåªéœ€è¦æ±‚$J_i$ï¼Œå³å¯æ±‚å¾—$\Delta p $</p>
<script type="math/tex; mode=display">
J_i=\frac{de_i}{dp}</script><h2 id="2Dåœºæ™¯"><a href="#2Dåœºæ™¯" class="headerlink" title="2Dåœºæ™¯"></a>2Dåœºæ™¯</h2><p>å·²çŸ¥å¯¹äº2Dåœºæ™¯$p=[t_x\ t_y\ \phi_z]^T$ï¼Œ</p>
<script type="math/tex; mode=display">
\begin{align*}
y_i^{\prime}&=T(p,y_i)\\
&=Ry_i+t\\
&=\begin{bmatrix}
\cos\phi_z&-\sin\phi_z\\
\sin\phi_z&\cos\phi_z
\end{bmatrix}y_i+\begin{bmatrix}t_x\\t_y\end{bmatrix}\\
e_i&=y_i^{\prime}-\mu
\end{align*}</script><p>é›…å¯æ¯”çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
J_i=\begin{bmatrix}
1&0&-y_{i1}\sin\phi_z-y_{i2}\cos\phi_z\\
0&1&y_{i1}\cos\phi_z-y_{i2}\sin\phi_z\end{bmatrix}</script><h2 id="3Dåœºæ™¯"><a href="#3Dåœºæ™¯" class="headerlink" title="3Dåœºæ™¯"></a>3Dåœºæ™¯</h2><p>å·²çŸ¥å¯¹äº3Dåœºæ™¯$p=[t_x\ t_y\ t_z\ \phi_x\ \phi_y\ \phi_z]^T$ï¼Œ</p>
<script type="math/tex; mode=display">
\begin{align*}
y_i^{\prime}&=T(p,y_i)\\
&=Ry_i+t\\
&=R_xR_yR_zy_i+t\\
&=
\begin{bmatrix}
c_yc_z&-c_ys_z&s_y\\
c_xs_z+s_xs_yc_z&c_xc_z-s_xs_ys_z&-s_xc_y\\
s_xs_z-c_xs_yc_z&c_xs_ys_z+s_xc_z&c_xc_y
\end{bmatrix}y_i+\begin{bmatrix}t_x\\t_y\\t_z\end{bmatrix}\\
e_i&=y_i^{\prime}-\mu
\end{align*}</script><p>é›…å¯æ¯”çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
J_i=\begin{bmatrix}
1&0&0&0&c&f\\
0&1&0&a&d&g\\
0&0&1&b&e&h
\end{bmatrix}</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
a&=y_{i1}(-s_xs_z+c_xs_yc_z)+y_{i2}(-s_xc_z-c_xs_ys_z)+y_{i3}(-c_xc_y)\\
b&=y_{i1}(c_xs_z+s_xs_yc_z)+y_{i2}(c_xc_z-s_xs_ys_z)+y_{i3}(-s_xc_y)\\
c&=y_{i1}(-s_yc_z)+y_{i2}(s_ys_z)+y_{i3}(c_y)\\
d&=y_{i1}(s_xc_yc_z)+y_{i2}(-s_xc_ys_z)+y_{i3}(s_xs_y)\\
e&=y_{i1}(-c_xc_yc_z)+y_{i2}(c_xc_ys_z)+y_{i3}(-c_xs_y)\\
f&=y_{i1}(-c_ys_z)+y_{i2}(-c_yc_z)\\
g&=y_{i1}(c_xc_z-s_xs_ys_z)+y_{i2}(-c_xs_z-s_xs_yc_z)\\
h&=y_{i1}(s_xc_z+c_xs_ys_z)+y_{i2}(c_xs_yc_z-s_xs_z)
\end{align*}</script><h1 id="å…¶ä»–NDT"><a href="#å…¶ä»–NDT" class="headerlink" title="å…¶ä»–NDT"></a>å…¶ä»–NDT</h1><p><img src="/images/å‰ç«¯é‡Œç¨‹è®¡æ–¹æ¡ˆ-åŸºäºç›´æ¥åŒ¹é…/image-20220428210054855.png" alt="image-20220428210054855" style="zoom: 67%;" /></p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
      </categories>
      <tags>
        <tag>æ¿€å…‰SLAM</tag>
        <tag>ICP</tag>
        <tag>NDT</tag>
      </tags>
  </entry>
  <entry>
    <title>LeGO-LOAMè®ºæ–‡ç¿»è¯‘</title>
    <url>/posts/3766cfd.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>LeGO-LOAMæ˜¯Tixiao Shan å’Œ Brendan Englotäº2018å¹´æå‡ºçš„ä½¿ç”¨æ¿€å…‰é›·è¾¾å®Œæˆå®šä½ä¸ä¸‰ç»´å»ºå›¾çš„ç®—æ³•ï¼Œå…¨ç§°ä¸ºï¼šLightweight and Groud-Optimized Lidar Odometry and Mapping on Variable Terrainï¼Œä»æ ‡é¢˜å¯ä»¥çœ‹å‡º LeGO-LOAM ä¸ºåº”å¯¹<strong>å¯å˜åœ°é¢</strong>è¿›è¡Œäº†åœ°é¢ä¼˜åŒ–ï¼ŒåŒæ—¶ä¿è¯äº†è½»é‡çº§ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="LeGO-LOAMâ€”â€”åœ¨å¯å˜åœ°å½¢ä¸Šçš„è½»é‡çº§çš„åœ°é¢ç‚¹ä¼˜åŒ–çš„é›·è¾¾é‡Œç¨‹è®¡å’Œå»ºå›¾æ¨¡å—"><a href="#LeGO-LOAMâ€”â€”åœ¨å¯å˜åœ°å½¢ä¸Šçš„è½»é‡çº§çš„åœ°é¢ç‚¹ä¼˜åŒ–çš„é›·è¾¾é‡Œç¨‹è®¡å’Œå»ºå›¾æ¨¡å—" class="headerlink" title="LeGO-LOAMâ€”â€”åœ¨å¯å˜åœ°å½¢ä¸Šçš„è½»é‡çº§çš„åœ°é¢ç‚¹ä¼˜åŒ–çš„é›·è¾¾é‡Œç¨‹è®¡å’Œå»ºå›¾æ¨¡å—"></a>LeGO-LOAMâ€”â€”åœ¨å¯å˜åœ°å½¢ä¸Šçš„è½»é‡çº§çš„åœ°é¢ç‚¹ä¼˜åŒ–çš„é›·è¾¾é‡Œç¨‹è®¡å’Œå»ºå›¾æ¨¡å—</h1><h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§è½»é‡çº§å’ŒåŸºäºåœ°é¢ä¼˜åŒ–çš„æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡å’Œå»ºå›¾æ–¹æ³• LeGO-LOAMï¼Œç”¨äºåœ°é¢è½¦è¾†çš„å®æ—¶å…­è‡ªç”±åº¦å§¿æ€ä¼°è®¡ã€‚LeGO-LOAM æ˜¯è½»é‡çº§çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨ä½åŠŸè€—åµŒå…¥å¼ç³»ç»Ÿä¸Šå®ç°å®æ—¶å§¿æ€ä¼°è®¡ã€‚LeGOLOAM æ˜¯åŸºäºåœ°é¢ä¼˜åŒ–çš„ï¼Œå› ä¸ºå®ƒåœ¨å…¶åˆ†å‰²å’Œä¼˜åŒ–æ­¥éª¤ä¸­åˆ©ç”¨äº†åœ°å¹³é¢çš„å­˜åœ¨ã€‚æˆ‘ä»¬é¦–å…ˆåº”ç”¨ç‚¹äº‘åˆ†å‰²æ¥æ»¤é™¤å™ªå£°ï¼Œå¹¶è¿›è¡Œç‰¹å¾æå–ä»¥è·å¾—ç‹¬ç‰¹çš„å¹³é¢å’Œè¾¹ç¼˜ç‰¹å¾ã€‚ç„¶åï¼Œä½¿ç”¨ä¸¤æ­¥ Levenberg-Marquardt ä¼˜åŒ–æ–¹æ³•ï¼Œä½¿ç”¨å¹³é¢å’Œè¾¹ç¼˜ç‰¹å¾æ¥è§£å†³è¿ç»­æ‰«æä¸­å…­è‡ªç”±åº¦å˜æ¢çš„ä¸åŒåˆ†é‡ã€‚æˆ‘ä»¬ä½¿ç”¨åœ°é¢è½¦è¾†çš„å¯å˜åœ°å½¢ç¯å¢ƒä¸­æ”¶é›†çš„æ•°æ®é›†ï¼Œå°† LeGO-LOAM çš„æ€§èƒ½ä¸æœ€å…ˆè¿›çš„æ–¹æ³• LOAM è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶è¡¨æ˜ LeGO-LOAM åœ¨é™ä½è®¡ç®—æˆæœ¬çš„æƒ…å†µä¸‹å®ç°äº†ç›¸ä¼¼æˆ–æ›´å¥½çš„ç²¾åº¦ã€‚æˆ‘ä»¬è¿˜å°† LeGO-LOAM é›†æˆåˆ° SLAM æ¡†æ¶ä¸­ï¼Œä»¥æ¶ˆé™¤æ¼‚ç§»å¼•èµ·çš„ä½å§¿ä¼°è®¡è¯¯å·®ï¼Œå¹¶ä½¿ç”¨ KITTI æ•°æ®é›†è¿›è¡Œäº†æµ‹è¯•ã€‚</p>
<h1 id="â… -ä»‹ç»"><a href="#â… -ä»‹ç»" class="headerlink" title="â… .ä»‹ç»"></a>â… .ä»‹ç»</h1><p>åœ¨æ™ºèƒ½æœºå™¨äººçš„èƒ½åŠ›ä¸­ï¼Œåœ°å›¾æ„å»ºå’ŒçŠ¶æ€ä¼°è®¡æ˜¯æœ€åŸºæœ¬çš„å…ˆå†³æ¡ä»¶ã€‚äººä»¬ä¸€ç›´è‡´åŠ›äºé€šè¿‡åŸºäºè§†è§‰å’ŒåŸºäºæ¿€å…‰é›·è¾¾çš„æ–¹æ³•å®ç°å®æ—¶ 6 è‡ªç”±åº¦åŒæ—¶å®šä½å’Œå»ºå›¾ (SLAM)ã€‚å°½ç®¡åŸºäºè§†è§‰çš„æ–¹æ³•åœ¨é—­ç¯æ£€æµ‹æ–¹é¢å…·æœ‰ä¼˜åŠ¿ï¼Œä½†ç”±äºå®ƒä»¬å¯¹ç…§æ˜å’Œè§†ç‚¹å˜åŒ–çš„æ•æ„Ÿæ€§ï¼Œå¦‚æœç”¨ä½œå”¯ä¸€çš„å¯¼èˆªä¼ æ„Ÿå™¨ï¼Œå¯èƒ½ä¼šä½¿è¿™äº›èƒ½åŠ›ä¸å¯é ã€‚å¦ä¸€æ–¹é¢ï¼ŒåŸºäºæ¿€å…‰é›·è¾¾çš„æ–¹æ³•å³ä½¿åœ¨å¤œé—´ä¹Ÿèƒ½å‘æŒ¥ä½œç”¨ï¼Œè€Œä¸”è®¸å¤š 3D æ¿€å…‰é›·è¾¾çš„é«˜åˆ†è¾¨ç‡å…è®¸åœ¨å¤§å…‰åœˆä¸‹è¿œè·ç¦»æ•æ‰ç¯å¢ƒçš„ç²¾ç»†ç»†èŠ‚ã€‚å› æ­¤ï¼Œæœ¬æ–‡é‡ç‚¹ä»‹ç»ä½¿ç”¨ 3D æ¿€å…‰é›·è¾¾æ¥æ”¯æŒå®æ—¶çŠ¶æ€ä¼°è®¡å’Œå»ºå›¾ã€‚</p>
<p>å¯»æ‰¾ä¸¤æ¬¡æ¿€å…‰é›·è¾¾æ‰«æä¹‹é—´è½¬æ¢çš„å…¸å‹æ–¹æ³•æ˜¯è¿­ä»£æœ€è¿‘ç‚¹ (ICP) [1]ã€‚é€šè¿‡é€ç‚¹æŸ¥æ‰¾å¯¹åº”å…³ç³»ï¼ŒICP è¿­ä»£å¯¹é½ä¸¤ç»„ç‚¹ï¼Œç›´åˆ°æ»¡è¶³åœæ­¢æ¡ä»¶ä¸ºæ­¢ã€‚ä½†æ˜¯å½“æ‰«æåŒ…æ‹¬å¤§é‡ç‚¹æ—¶ï¼ŒICP å¯èƒ½ä¼šé­å—è¿‡é«˜çš„è®¡ç®—æˆæœ¬ã€‚å·²ç»æå‡ºäº†è®¸å¤š ICP å˜ä½“æ¥æé«˜å…¶æ•ˆç‡å’Œå‡†ç¡®æ€§ [2]ã€‚ [3] å¼•å…¥äº†ä¸€ç§ç‚¹åˆ°å¹³é¢ ICP å˜ä½“ï¼Œå°†ç‚¹ä¸å±€éƒ¨å¹³é¢è¡¥ä¸åŒ¹é…ã€‚Generalized-ICP [4] æå‡ºäº†ä¸€ç§åŒ¹é…æ¥è‡ªä¸¤æ¬¡æ‰«æçš„å±€éƒ¨å¹³é¢è¡¥ä¸çš„æ–¹æ³•ã€‚æ­¤å¤–ï¼Œä¸€äº› ICP å˜ä½“åˆ©ç”¨å¹¶è¡Œè®¡ç®—æ¥æé«˜æ•ˆç‡ [5]-[8]ã€‚</p>
<p>åŸºäºç‰¹å¾çš„åŒ¹é…æ–¹æ³•è¶Šæ¥è¶Šå—åˆ°å…³æ³¨ï¼Œå› ä¸ºå®ƒä»¬é€šè¿‡æå–ç¯å¢ƒä¸­çš„ä»£è¡¨æ€§ç‰¹å¾æ¥å‡å°‘è®¡ç®—èµ„æºã€‚è¿™äº›ç‰¹å¾åº”è¯¥é€‚ç”¨äºæœ‰æ•ˆåŒ¹é…å’Œè§†è§’ä¸å˜ã€‚è¿™äº›ç‰¹å¾åº”é€‚ç”¨äºæœ‰æ•ˆåŒ¹é…å’Œè§†ç‚¹ä¸å˜æ€§ã€‚ç¤¾åŒºå·²ç»æå‡ºäº†è®¸å¤šæ£€æµ‹å™¨ï¼Œä¾‹å¦‚ç‚¹ç‰¹å¾ç›´æ–¹å›¾ï¼ˆPFHï¼‰[9] å’Œè§†ç‚¹ç‰¹å¾ç›´æ–¹å›¾ï¼ˆVFHï¼‰[10]ï¼Œç”¨äºä½¿ç”¨ç®€å•æœ‰æ•ˆçš„æŠ€æœ¯ä»ç‚¹äº‘ä¸­æå–æ­¤ç±»ç‰¹å¾ã€‚[11] ä¸­ä»‹ç»äº†ä¸€ç§ä½¿ç”¨ Kanade-Tomasi è§’ç‚¹æ£€æµ‹å™¨ä»ç‚¹äº‘ä¸­æå–é€šç”¨ç‰¹å¾çš„æ–¹æ³•ã€‚[12] ä¸­è®¨è®ºäº†ä»å¯†é›†ç‚¹äº‘ä¸­æå–çº¿å’Œå¹³é¢ç‰¹å¾çš„æ¡†æ¶ã€‚</p>
<p>ç¤¾åŒºè¿˜æå‡ºäº†è®¸å¤šä½¿ç”¨ç‰¹å¾è¿›è¡Œç‚¹äº‘é…å‡†çš„ç®—æ³•ã€‚ [13] å’Œ [14] æå‡ºäº†ä¸€ç§åœ¨å±€éƒ¨é›†ç¾¤ä¸­æ‰§è¡Œç‚¹æ›²ç‡è®¡ç®—çš„å…³é”®ç‚¹é€‰æ‹©ç®—æ³•ï¼Œç„¶åä½¿ç”¨é€‰å®šçš„å…³é”®ç‚¹è¿›è¡ŒåŒ¹é…å’Œä½ç½®è¯†åˆ«ã€‚é€šè¿‡å°†ç‚¹äº‘æŠ•å½±åˆ°è·ç¦»å›¾åƒï¼ˆa range imageï¼‰ä¸Šå¹¶åˆ†ææ·±åº¦å€¼çš„äºŒé˜¶å¯¼æ•°ï¼Œ[15] ä»å…·æœ‰é«˜æ›²ç‡çš„ç‚¹ä¸­é€‰æ‹©ç‰¹å¾è¿›è¡ŒåŒ¹é…å’Œä½ç½®è¯†åˆ«ã€‚å‡è®¾ç¯å¢ƒç”±å¹³é¢ç»„æˆï¼Œåœ¨[16]ä¸­æå‡ºäº†ä¸€ç§åŸºäºå¹³é¢çš„é…å‡†ç®—æ³•ã€‚æˆ·å¤–ç¯å¢ƒï¼Œä¾‹å¦‚æ£®æ—ï¼Œå¯èƒ½ä¼šé™åˆ¶è¿™ç§æ–¹æ³•çš„åº”ç”¨ã€‚ [17] ä¸­ä»‹ç»äº†ä¸€ç§ä¸“ä¸ºVelodyne æ¿€å…‰é›·è¾¾è®¾è®¡çš„é¡¹åœˆçº¿æ®µ (collar line segments, CLS) æ–¹æ³•ã€‚CLS ä½¿ç”¨æ‰«æçš„ä¸¤ä¸ªè¿ç»­â€œç¯â€ä¸­çš„ç‚¹éšæœºç”Ÿæˆçº¿ã€‚å› æ­¤ç”Ÿæˆäº†ä¸¤æ¡çº¿äº‘å¹¶ç”¨äºé…å‡†ï¼Œç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å—åˆ°éšæœºç”Ÿæˆçº¿æ¡çš„æŒ‘æˆ˜ã€‚ [18]ä¸­æå‡ºäº†ä¸€ç§åŸºäºåˆ†å‰²çš„é…å‡†ç®—æ³•ã€‚SegMatch é¦–å…ˆå°†åˆ†å‰²åº”ç”¨äºç‚¹äº‘ï¼Œç„¶åæ ¹æ®å…¶ç‰¹å¾å€¼å’Œå½¢çŠ¶ç›´æ–¹å›¾ä¸ºæ¯ä¸ªæ®µè®¡ç®—ä¸€ä¸ªç‰¹å¾å‘é‡ã€‚éšæœºæ£®æ—ç”¨äºåŒ¹é…æ¥è‡ªä¸¤æ¬¡æ‰«æçš„ç‰‡æ®µã€‚è™½ç„¶è¿™ç§æ–¹æ³•å¯ä»¥ç”¨äºåœ¨çº¿å§¿æ€ä¼°è®¡ï¼Œä½†å®ƒåªèƒ½æä¾›å¤§çº¦ 1Hz çš„å®šä½æ›´æ–°ã€‚</p>
<p>åœ¨ [19] å’Œ [20] ä¸­æå‡ºäº†ä¸€ç§ä½æ¼‚ç§»å’Œå®æ—¶æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡å’Œå»ºå›¾(LOAM) æ–¹æ³•ã€‚ LOAM æ‰§è¡Œç‚¹ç‰¹å¾åˆ°è¾¹ç¼˜/å¹³é¢æ‰«æåŒ¹é…ä»¥æ‰¾åˆ°æ‰«æä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚é€šè¿‡è®¡ç®—å…¶å±€éƒ¨åŒºåŸŸä¸­ç‚¹çš„æ›²ç‡ï¼ˆroughnessï¼‰å€¼æ¥æå–ç‰¹å¾ã€‚é€‰æ‹©å…·æœ‰é«˜æ›²ç‡ï¼ˆroughnessï¼‰å€¼å€¼çš„ç‚¹ä½œä¸ºè¾¹ç¼˜ç‰¹å¾ã€‚ç±»ä¼¼åœ°ï¼Œå…·æœ‰ä½æ›²ç‡ï¼ˆroughnessï¼‰å€¼çš„ç‚¹è¢«æŒ‡å®šä¸ºå¹³é¢ç‰¹å¾ã€‚é€šè¿‡å°†ä¼°è®¡é—®é¢˜æ–°é¢–åœ°åˆ’åˆ†ä¸ºä¸¤ä¸ªå•ç‹¬çš„ç®—æ³•æ¥å®ç°å®æ—¶æ€§èƒ½ã€‚ä¸€ç§ç®—æ³•ä»¥é«˜é¢‘ç‡è¿è¡Œå¹¶ä»¥ä½ç²¾åº¦ä¼°è®¡ä¼ æ„Ÿå™¨é€Ÿåº¦ï¼Œå¦ä¸€ç§ç®—æ³•è¿è¡Œé¢‘ç‡è¾ƒä½ï¼Œä½†å¯ä»¥ä»¥é«˜ç²¾åº¦è·å¾—è¿åŠ¨ä¼°è®¡ã€‚å°†è¿™ä¸¤ä¸ªä¼°è®¡èåˆåœ¨ä¸€èµ·ä»¥äº§ç”Ÿé«˜é¢‘å’Œé«˜ç²¾åº¦çš„å•ä¸ªè¿åŠ¨ä¼°è®¡ã€‚åœ¨ KITTI é‡Œç¨‹è®¡åŸºå‡†ç«™ç‚¹ [21] ä¸Šï¼Œé€šè¿‡ä»…ä½¿ç”¨æ¿€å…‰é›·è¾¾çš„ä¼°ç®—æ–¹æ³•ï¼ŒLOAM çš„ç»“æœç²¾åº¦è¾¾åˆ°æœ€ä½³[21]ã€‚</p>
<p>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¸ºé…å¤‡ 3D æ¿€å…‰é›·è¾¾çš„åœ°é¢è½¦è¾†å¯»æ±‚å¯é ã€å®æ—¶çš„å…­è‡ªç”±åº¦å§¿æ€ä¼°è®¡ï¼Œå…¶æ–¹å¼é€‚åˆåœ¨å°å‹åµŒå…¥å¼ç³»ç»Ÿä¸Šæœ‰æ•ˆå®æ–½ã€‚ç”±äºå‡ ä¸ªåŸå› ï¼Œè¿™æ ·çš„ä»»åŠ¡å¹¶ä¸ç®€å•ã€‚ç”±äºå°ºå¯¸æœ‰é™ï¼Œè®¸å¤šæ— äººåœ°é¢è½¦è¾† (UGV) æ²¡æœ‰æ‚¬æ¶æˆ–å¼ºå¤§çš„è®¡ç®—å•å…ƒã€‚å°å‹ UGV åœ¨å¤šå˜çš„åœ°å½¢ä¸Šè¡Œé©¶æ—¶ç»å¸¸é‡åˆ°éå¹³ç¨³è¿åŠ¨ï¼Œå› æ­¤ï¼Œè·å–çš„æ•°æ®å¾€å¾€ä¼šå¸¦æœ‰è¿åŠ¨ç•¸å˜ã€‚ç”±äºåœ¨è¾ƒå¤§çš„è¿åŠ¨ä¸‹ï¼Œåªæœ‰æœ‰é™çš„é‡å åŒºåŸŸï¼Œå› æ­¤ï¼Œåœ¨ä¸¤æ¬¡è¿ç»­æ‰«æä¹‹é—´ä¹Ÿå¾ˆéš¾æ‰¾åˆ°å¯é çš„ç‰¹å¾å¯¹åº”ã€‚æ­¤å¤–ï¼Œä» 3D æ¿€å…‰é›·è¾¾æ¥æ”¶åˆ°çš„å¤§é‡ç‚¹å¯¹ä½¿ç”¨æœ‰é™çš„è½¦è½½è®¡ç®—èµ„æºè¿›è¡Œå®æ—¶å¤„ç†æå‡ºäº†æŒ‘æˆ˜ã€‚</p>
<p>å½“æˆ‘ä»¬ä¸ºæ­¤ç±»ä»»åŠ¡å®æ–½ LOAM æ—¶ï¼Œå½“ UGV ä»¥å¹³æ»‘è¿åŠ¨å…·æœ‰ç¨³å®šçš„ç‰¹å¾è¿è¡Œå¹¶ç”±è¶³å¤Ÿçš„è®¡ç®—èµ„æºæ”¯æŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ä½æ¼‚ç§»è¿åŠ¨ä¼°è®¡ã€‚ä½†æ˜¯ï¼Œå½“èµ„æºæœ‰é™æ—¶ï¼ŒLOAM çš„æ€§èƒ½ä¼šä¸‹é™ã€‚ç”±äºéœ€è¦è®¡ç®—å¯†é›† 3D ç‚¹äº‘ä¸­æ¯ä¸ªç‚¹çš„æ›²ç‡ï¼ˆroughnessï¼‰å€¼ï¼Œè½»é‡çº§åµŒå…¥å¼ç³»ç»Ÿä¸Šç‰¹å¾æå–çš„æ›´æ–°é¢‘ç‡æ— æ³•å§‹ç»ˆè·Ÿä¸Šä¼ æ„Ÿå™¨æ›´æ–°é¢‘ç‡ã€‚æ— äººè½¦åœ¨å˜ˆæ‚ç¯å¢ƒä¸­çš„è¿è¡Œä¹Ÿå¯¹ LOAM æå‡ºäº†æŒ‘æˆ˜ã€‚ç”±äºæ¿€å…‰é›·è¾¾çš„å®‰è£…ä½ç½®åœ¨å°å‹ UGV ä¸Šé€šå¸¸é è¿‘åœ°é¢ï¼Œå› æ­¤æ¥è‡ªåœ°é¢çš„ä¼ æ„Ÿå™¨å™ªå£°å¯èƒ½ä¼šæŒç»­å­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œä»è‰åœ°è¿”å›çš„èŒƒå›´å¯èƒ½ä¼šå¯¼è‡´é«˜æ›²ç‡ï¼ˆroughnessï¼‰å€¼ã€‚å› æ­¤ï¼Œå¯èƒ½ä¼šä»è¿™äº›ç‚¹ä¸­æå–ä¸å¯é çš„è¾¹ç¼˜ç‰¹å¾ã€‚ç±»ä¼¼åœ°ï¼Œè¾¹ç¼˜æˆ–å¹³é¢ç‰¹å¾ä¹Ÿå¯ä»¥ä»æ ‘å¶è¿”å›çš„ç‚¹ä¸­æå–ã€‚è¿™äº›ç‰¹å¾å¯¹äºæ‰«æåŒ¹é…é€šå¸¸ä¸å¯é ï¼Œå› ä¸ºåœ¨ä¸¤æ¬¡è¿ç»­æ‰«æä¸­å¯èƒ½çœ‹ä¸åˆ°ç›¸åŒçš„è‰å¶æˆ–å¶å­ã€‚ä½¿ç”¨è¿™äº›åŠŸèƒ½å¯èƒ½ä¼šå¯¼è‡´ä¸å‡†ç¡®çš„é…å‡†å’Œå¤§çš„æ¼‚ç§»ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§è½»é‡çº§å’Œåœ°é¢ä¼˜åŒ–çš„ LOAM (LeGO-LOAM)ï¼Œç”¨äºåœ¨å…·æœ‰å¯å˜åœ°å½¢çš„å¤æ‚ç¯å¢ƒä¸­å¯¹ UGV è¿›è¡Œå§¿æ€ä¼°è®¡ã€‚LeGO-LOAM æ˜¯è½»é‡çº§çš„ï¼Œå› ä¸ºå¯ä»¥åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸Šå®ç°å®æ—¶å§¿æ€ä¼°è®¡å’Œå»ºå›¾ã€‚æ‰§è¡Œç‚¹äº‘åˆ†å‰²ä»¥ä¸¢å¼ƒåœ¨åœ°é¢åˆ†ç¦»åå¯èƒ½ä»£è¡¨ä¸å¯é ç‰¹å¾çš„ç‚¹ã€‚LeGO-LOAM ä¹Ÿæ˜¯åœ°é¢ä¼˜åŒ–çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸ºå§¿åŠ¿ä¼°è®¡å¼•å…¥äº†ä¸¤æ­¥ä¼˜åŒ–ã€‚åœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œä»åœ°é¢æå–çš„å¹³é¢ç‰¹å¾ç”¨äºè·å¾— $[t_z, Î¸_{roll}, Î¸_{pitch}]$ã€‚åœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œé€šè¿‡åŒ¹é…ä»åˆ†å‰²ç‚¹äº‘ä¸­æå–çš„è¾¹ç¼˜ç‰¹å¾æ¥è·å¾—å…¶ä½™çš„å˜æ¢$[t_x, t_y, Î¸_{yaw}]$ã€‚æˆ‘ä»¬è¿˜é›†æˆäº†æ‰§è¡Œé—­ç¯ä»¥çº æ­£è¿åŠ¨ä¼°è®¡æ¼‚ç§»çš„èƒ½åŠ›ã€‚æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†å®‰æ’å¦‚ä¸‹ã€‚ç¬¬äºŒèŠ‚ä»‹ç»äº†ç”¨äºå®éªŒçš„ç¡¬ä»¶ã€‚ç¬¬ä¸‰èŠ‚è¯¦ç»†æè¿°äº†æ‰€æå‡ºçš„æ–¹æ³•ã€‚ç¬¬å››èŠ‚ä»‹ç»äº†ä¸€ç³»åˆ—åœ¨å„ç§æˆ·å¤–ç¯å¢ƒä¸­çš„å®éªŒã€‚</p>
<h1 id="â…¡-ç³»ç»Ÿç¡¬ä»¶"><a href="#â…¡-ç³»ç»Ÿç¡¬ä»¶" class="headerlink" title="â…¡.ç³»ç»Ÿç¡¬ä»¶"></a>â…¡.ç³»ç»Ÿç¡¬ä»¶</h1><p>æœ¬æ–‡æå‡ºçš„æ¡†æ¶ä½¿ç”¨ä» Velodyne VLP-16 å’Œ HDL-64E 3D æ¿€å…‰é›·è¾¾æ”¶é›†çš„æ•°æ®é›†è¿›è¡Œäº†éªŒè¯ã€‚VLP-16 çš„æµ‹é‡èŒƒå›´å¯è¾¾ $100m$ï¼Œç²¾åº¦ä¸º$ Â± 3cm$ã€‚å®ƒçš„å‚ç›´è§†é‡ (FOV) ä¸º $30Â°(Â±15Â°)$ï¼Œæ°´å¹³è§†é‡ (FOV) ä¸º$360Â°$ã€‚$16 $é€šé“ä¼ æ„Ÿå™¨æä¾› $2Â° $çš„å‚ç›´è§’åˆ†è¾¨ç‡ã€‚æ°´å¹³è§’åˆ†è¾¨ç‡æ ¹æ®æ—‹è½¬é€Ÿç‡ä» $0.1Â° $åˆ°$ 0.4Â°$ å˜åŒ–ã€‚åœ¨æ•´ç¯‡è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©äº† $10Hz $çš„æ‰«æé€Ÿç‡ï¼Œå®ƒæä¾›äº†$ 0.2Â° $çš„æ°´å¹³è§’åˆ†è¾¨ç‡ã€‚ HDL-64Eï¼ˆåœ¨è¿™é¡¹å·¥ä½œä¸­é€šè¿‡ KITTI æ•°æ®é›†è¿›è¡Œäº†æ¢ç´¢ï¼‰ä¹Ÿå…·æœ‰ $360Â° $çš„æ°´å¹³ FOVï¼Œä½†è¿˜æœ‰$ 48 $ä¸ªé€šé“ã€‚ HDL-64E çš„å‚ç›´ FOV ä¸º$ 26.9Â°$ã€‚</p>
<p>æœ¬æ–‡ä¸­ä½¿ç”¨çš„ UGV æ˜¯ Clearpath Jackalã€‚å®ƒç”±$ 270 $ç“¦æ—¶é”‚ç”µæ± ä¾›ç”µï¼Œæœ€å¤§é€Ÿåº¦ä¸º$ 2.0m/s$ï¼Œæœ€å¤§æœ‰æ•ˆè½½è·ä¸º $20kg$ã€‚ Jackal è¿˜é…å¤‡äº†ä½æˆæœ¬æƒ¯æ€§æµ‹é‡å•å…ƒ (IMU)ï¼Œå³ CH Robotics UM6 æ–¹å‘ä¼ æ„Ÿå™¨ã€‚</p>
<p>æè®®çš„æ¡†æ¶åœ¨ä¸¤å°è®¡ç®—æœºä¸Šå¾—åˆ°éªŒè¯ï¼šä¸€å° Nvidia Jetson TX2 å’Œä¸€å°é…å¤‡ 2.5GHz i74710MQ CPU çš„ç¬”è®°æœ¬ç”µè„‘ã€‚Jetson TX2 æ˜¯ä¸€æ¬¾é…å¤‡ ARM Cortex-A57 CPU çš„åµŒå…¥å¼è®¡ç®—è®¾å¤‡ã€‚é€‰æ‹©ç¬”è®°æœ¬ç”µè„‘ CPU ä»¥åŒ¹é… [19] å’Œ [20] ä¸­ä½¿ç”¨çš„è®¡ç®—ç¡¬ä»¶ã€‚æœ¬æ–‡æ‰€ç¤ºçš„å®éªŒä»…ä½¿ç”¨è¿™äº›ç³»ç»Ÿçš„ CPUã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220426195127090.png" alt="image-20220426195127090" style="zoom: 50%;" /></p>
<blockquote>
<p>å›¾ 1ï¼šLeGO-LOAM çš„ç¡¬ä»¶å’Œç³»ç»Ÿæ¦‚è§ˆ</p>
</blockquote>
<h1 id="â…¢-è½»å‹æ¿€å…‰é›·è¾¾æµ‹è·å’Œå»ºå›¾"><a href="#â…¢-è½»å‹æ¿€å…‰é›·è¾¾æµ‹è·å’Œå»ºå›¾" class="headerlink" title="â…¢.è½»å‹æ¿€å…‰é›·è¾¾æµ‹è·å’Œå»ºå›¾"></a>â…¢.è½»å‹æ¿€å…‰é›·è¾¾æµ‹è·å’Œå»ºå›¾</h1><h2 id="A-ç³»ç»Ÿæ¦‚è¿°"><a href="#A-ç³»ç»Ÿæ¦‚è¿°" class="headerlink" title="A.ç³»ç»Ÿæ¦‚è¿°"></a>A.ç³»ç»Ÿæ¦‚è¿°</h2><p>æ‰€æå‡ºæ¡†æ¶çš„æ¦‚è¿°å¦‚å›¾ $1$ æ‰€ç¤ºã€‚ç³»ç»Ÿä» 3D æ¿€å…‰é›·è¾¾æ¥æ”¶è¾“å…¥å¹¶è¾“å‡º 6 DOF å§¿æ€ä¼°è®¡ã€‚æ•´ä¸ªç³»ç»Ÿåˆ†ä¸ºäº”ä¸ªæ¨¡å—ã€‚ç¬¬ä¸€ä¸ªæ˜¯åˆ†å‰²ï¼Œé‡‡ç”¨å•æ¬¡æ‰«æçš„ç‚¹äº‘å¹¶å°†å…¶æŠ•å½±åˆ°èŒƒå›´å›¾åƒä¸Šè¿›è¡Œåˆ†å‰²ã€‚ç„¶åå°†åˆ†å‰²åçš„ç‚¹äº‘å‘é€åˆ°ç‰¹å¾æå–æ¨¡å—ã€‚ç„¶åï¼Œæ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡ä½¿ç”¨ä»å‰ä¸€ä¸ªæ¨¡å—ä¸­æå–çš„ç‰¹å¾æ¥æ‰¾åˆ°ä¸è¿ç»­æ‰«æç›¸å…³çš„å˜æ¢ã€‚è¿™äº›ç‰¹å¾åœ¨æ¿€å…‰é›·è¾¾å»ºå›¾ä¸­å¾—åˆ°è¿›ä¸€æ­¥å¤„ç†ï¼Œå°†å®ƒä»¬æ³¨å†Œåˆ°å…¨å±€ç‚¹äº‘åœ°å›¾ã€‚æœ€åï¼Œå˜æ¢ç§¯åˆ†æ¨¡å—å°†æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡å’Œæ¿€å…‰é›·è¾¾å»ºå›¾çš„å§¿æ€ä¼°è®¡ç»“æœè¿›è¡Œèåˆï¼Œè¾“å‡ºæœ€ç»ˆçš„å§¿æ€ä¼°è®¡ã€‚ç›¸å¯¹äº [19] å’Œ [20] çš„åŸå§‹é€šç”¨ LOAM æ¡†æ¶ï¼Œæ‰€æå‡ºçš„ç³»ç»Ÿæ—¨åœ¨æé«˜åœ°é¢è½¦è¾†çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚ä¸‹é¢ä»‹ç»è¿™äº›æ¨¡å—çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h2 id="B-åˆ†å‰²"><a href="#B-åˆ†å‰²" class="headerlink" title="B. åˆ†å‰²"></a>B. åˆ†å‰²</h2><p>ä»¤$ P_t = \{p_1, p_2, â€¦, p_n\} $ä¸ºåœ¨æ—¶é—´ $t $è·å–çš„ç‚¹äº‘ï¼Œå…¶ä¸­$p_i$ æ˜¯ $P_t $ä¸­çš„ä¸€ä¸ªç‚¹ã€‚$ P_t$ é¦–å…ˆæŠ•å½±åˆ°èŒƒå›´å›¾åƒä¸Šã€‚æŠ•å½±è·ç¦»å›¾åƒçš„åˆ†è¾¨ç‡ä¸º $1800 \times 16$ï¼Œå› ä¸º VLP-16 çš„æ°´å¹³å’Œå‚ç›´è§’åˆ†è¾¨ç‡åˆ†åˆ«ä¸º $0.2Â° $å’Œ$ 2Â°$ã€‚$ P_t$ ä¸­çš„æ¯ä¸ªæœ‰æ•ˆç‚¹ $p_i$ç°åœ¨ç”±èŒƒå›´å›¾åƒä¸­çš„å”¯ä¸€åƒç´ è¡¨ç¤ºã€‚ä¸ $p_i$å…³è”çš„èŒƒå›´å€¼$r_i$è¡¨ç¤ºä»å¯¹åº”ç‚¹ $p_i$åˆ°ä¼ æ„Ÿå™¨çš„æ¬§æ°è·ç¦»ã€‚ç”±äºæ–œå¡åœ°å½¢åœ¨è®¸å¤šç¯å¢ƒä¸­éƒ½å¾ˆå¸¸è§ï¼Œå› æ­¤æˆ‘ä»¬ä¸è®¤ä¸ºåœ°é¢æ˜¯å¹³å¦çš„ã€‚åœ¨åˆ†å‰²ä¹‹å‰ï¼Œå¯¹è·ç¦»å›¾åƒè¿›è¡Œåˆ—å¼è¯„ä¼°ï¼ˆå¯è§†ä¸ºåœ°å¹³é¢ä¼°è®¡ [22]ï¼‰ï¼Œä»¥æå–åœ°é¢ç‚¹ã€‚åœ¨æ­¤è¿‡ç¨‹ä¹‹åï¼Œå¯èƒ½ä»£è¡¨åœ°é¢çš„ç‚¹è¢«æ ‡è®°ä¸ºåœ°é¢ç‚¹ï¼Œä¸ç”¨äºåç»­åˆ†å‰²ï¼ˆåˆ†ç±»ï¼‰ã€‚</p>
<p>ç„¶åï¼Œå°†åŸºäºå›¾åƒçš„åˆ†å‰²æ–¹æ³•[23]åº”ç”¨äºèŒƒå›´å›¾åƒï¼Œå°†ç‚¹åˆ†ç»„ä¸ºè®¸å¤šç°‡ã€‚æ¥è‡ªåŒä¸€ç°‡çš„ç‚¹è¢«åˆ†é…äº†ä¸€ä¸ªå”¯ä¸€çš„æ ‡ç­¾ã€‚è¯·æ³¨æ„ï¼Œåœ°é¢ç‚¹æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„é›†ç¾¤ã€‚å°†åˆ†å‰²åº”ç”¨äºç‚¹äº‘å¯ä»¥æé«˜å¤„ç†æ•ˆç‡å’Œç‰¹å¾æå–ç²¾åº¦ã€‚å‡è®¾æœºå™¨äººåœ¨å˜ˆæ‚çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œå°ç‰©ä½“ï¼ˆä¾‹å¦‚æ ‘å¶ï¼‰å¯èƒ½ä¼šå½¢æˆå¾®ä¸è¶³é“ä¸”ä¸å¯é çš„ç‰¹å¾ï¼Œå› ä¸ºåœ¨ä¸¤æ¬¡è¿ç»­æ‰«æä¸­ä¸å¤ªå¯èƒ½çœ‹åˆ°ç›¸åŒçš„å¶å­ã€‚ä¸ºäº†ä½¿ç”¨åˆ†æ®µç‚¹äº‘è¿›è¡Œå¿«é€Ÿå¯é çš„ç‰¹å¾æå–ï¼Œæˆ‘ä»¬çœç•¥äº†å°‘äº 30 ä¸ªç‚¹çš„é›†ç¾¤ã€‚åˆ†å‰²å‰åç‚¹äº‘çš„å¯è§†åŒ–å¦‚å›¾ 2 æ‰€ç¤ºã€‚åŸå§‹ç‚¹äº‘åŒ…å«è®¸å¤šç‚¹ï¼Œè¿™äº›ç‚¹æ˜¯ä»å‘¨å›´çš„æ¤è¢«ä¸­è·å¾—çš„ï¼Œè¿™äº›ç‚¹å¯èƒ½ä¼šäº§ç”Ÿä¸å¯é çš„ç‰¹å¾ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220426194420416.png" alt="image-20220426194420416" style="zoom: 67%;" /></p>
<blockquote>
<p>å›¾ 2ï¼šå™ªå£°ç¯å¢ƒä¸­æ‰«æçš„ç‰¹å¾æå–è¿‡ç¨‹ã€‚åŸå§‹ç‚¹äº‘å¦‚$(a)$æ‰€ç¤ºã€‚åœ¨$(b)$ä¸­ï¼Œçº¢ç‚¹è¢«æ ‡è®°ä¸ºåœ°é¢ç‚¹ï¼Œå…¶ä½™çš„ç‚¹æ˜¯åˆ†å‰²åå‰©ä¸‹çš„ç‚¹ã€‚åœ¨$(c)$ä¸­ï¼Œè“è‰²å’Œé»„è‰²ç‚¹è¡¨ç¤º $F_e$ å’Œ $F_p$ ä¸­çš„è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾ã€‚åœ¨ $(d)$ä¸­ï¼Œç»¿è‰²å’Œç²‰è‰²ç‚¹åˆ†åˆ«ä»£è¡¨ $\mathbb{F}_e$ å’Œ $\mathbb{F}_p$ ä¸­çš„è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾ã€‚</p>
</blockquote>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¹‹åï¼Œåªæœ‰å¯èƒ½ä»£è¡¨å¤§ç‰©ä½“çš„ç‚¹ï¼ˆå›¾$2(b)$ ï¼‰è¢«ä¿ç•™ä¸‹æ¥ï¼Œä¾‹å¦‚æ ‘å¹²å’Œåœ°é¢ç‚¹ï¼Œä»¥ä¾›è¿›ä¸€æ­¥å¤„ç†ã€‚åŒæ—¶ï¼Œåªæœ‰è¿™äº›ç‚¹ä¿å­˜åœ¨è·ç¦»å›¾åƒä¸­ã€‚æˆ‘ä»¬è¿˜è·å¾—æ¯ä¸ªç‚¹çš„ä¸‰ä¸ªå±æ€§ï¼š$(1) $å…¶ä½œä¸ºåœ°é¢ç‚¹æˆ–åˆ†å‰²ç‚¹çš„æ ‡ç­¾ï¼Œ$(2) $å…¶åœ¨èŒƒå›´å›¾åƒä¸­çš„åˆ—å’Œè¡Œç´¢å¼•ï¼Œä»¥åŠ $(3)$ å…¶èŒƒå›´å€¼ã€‚è¿™äº›å±æ€§å°†åœ¨ä»¥ä¸‹æ¨¡å—ä¸­ä½¿ç”¨ã€‚</p>
<h2 id="C-ç‰¹å¾æå–"><a href="#C-ç‰¹å¾æå–" class="headerlink" title="C.ç‰¹å¾æå–"></a>C.ç‰¹å¾æå–</h2><p>ç‰¹å¾æå–è¿‡ç¨‹ç±»ä¼¼äº[20]ä¸­ä½¿ç”¨çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¸æ˜¯ä»åŸå§‹ç‚¹äº‘ä¸­æå–ç‰¹å¾ï¼Œè€Œæ˜¯ä»åœ°é¢ç‚¹å’Œåˆ†å‰²ç‚¹ä¸­æå–ç‰¹å¾ã€‚ä»¤ $S$ ä¸ºèŒƒå›´å›¾åƒåŒä¸€è¡Œä¸­ $p_i$ çš„è¿ç»­ç‚¹çš„é›†åˆã€‚ $S$ ä¸­çš„ä¸€åŠç‚¹ä½äº $p_i$ çš„ä¸¤ä¾§ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è®¾ç½® $|S|$è®¾ç½®ä¸º $10$ã€‚ ä½¿ç”¨åˆ†å‰²æœŸé—´è®¡ç®—çš„èŒƒå›´å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è¯„ä¼°ç‚¹ $p_i$åœ¨$S$ä¸­çš„æ›²ç‡ï¼ˆroughnessï¼‰å€¼ï¼Œ</p>
<script type="math/tex; mode=display">
c=\frac{1}{|S|\cdot\parallel r_i \parallel} \parallel \underset{j\in S,j\ne i}{\sum}(r_j-r_i) \parallel \tag{1}</script><p>ä¸ºäº†ä»å„ä¸ªæ–¹å‘å‡åŒ€åœ°æå–ç‰¹å¾ï¼Œæˆ‘ä»¬å°†è·ç¦»å›¾åƒæ°´å¹³åˆ’åˆ†ä¸ºå‡ ä¸ªç›¸ç­‰çš„å­å›¾åƒã€‚ç„¶åæˆ‘ä»¬æ ¹æ®å®ƒä»¬çš„æ›²ç‡ï¼ˆroughnessï¼‰å€¼$ c $ï¼Œå¯¹å­å›¾åƒçš„æ¯ä¸€è¡Œä¸­çš„ç‚¹è¿›è¡Œæ’åºã€‚ä¸ LOAM ç±»ä¼¼ï¼Œæˆ‘ä»¬ä½¿ç”¨é˜ˆå€¼$ c_{th}$æ¥åŒºåˆ†ä¸åŒç±»å‹çš„ç‰¹å¾ã€‚æˆ‘ä»¬ç§°$c$å¤§äº$ c_{th}$ä¸ºè¾¹ç¼˜ç‰¹å¾çš„ç‚¹ï¼Œ$c$å°äº$ c_{th}$ä¸ºå¹³é¢ç‰¹å¾çš„ç‚¹ã€‚</p>
<p>ç„¶åä»å­å›¾åƒçš„æ¯ä¸€è¡Œä¸­é€‰å–<strong>ä¸å±äºåœ°é¢</strong>ï¼Œä¸”æœ‰æœ€å¤§<code>c</code>å€¼çš„$n_{\mathbb{F}_e}$ä¸ªç‰¹å¾è¾¹ã€‚ä»¥ç›¸åŒæ–¹å¼é€‰æ‹©å…·æœ‰æœ€å°$c$å€¼çš„$n_{\mathbb{F}_p}$å¹³é¢ç‰¹å¾ç‚¹ï¼ˆå¯ä»¥æ ‡è®°ä¸ºåœ°é¢ç‚¹æˆ–åˆ†æ®µç‚¹ï¼‰ã€‚è®¾ $\mathbb{F}_e$ å’Œ$\mathbb{F}_p$æ˜¯æ‰€æœ‰å­å›¾åƒçš„æ‰€æœ‰è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾çš„é›†åˆï¼Œè¿™äº›ç‰¹å¾å¦‚å›¾ $2(d)$æ‰€ç¤ºã€‚ç„¶åï¼Œæˆ‘ä»¬ä»å­å›¾åƒçš„æ¯ä¸€è¡Œä¸­æå–<strong>ä¸å±äºåœ°é¢</strong>çš„å…·æœ‰æœ€å¤§$c$çš„$n_{F_e}$ä¸ªè¾¹ç¼˜ç‰¹å¾ã€‚ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬ä»å­å›¾åƒçš„æ¯ä¸€è¡Œä¸­æå–<strong>å¿…é¡»æ˜¯åœ°é¢ç‚¹</strong>çš„å…·æœ‰æœ€å°$c$çš„ $n_{F_p} $ä¸ªå¹³é¢ç‰¹å¾ã€‚è®¾$ F_e$ å’Œ $F_p$ åˆ†åˆ«æ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸­æ‰€æœ‰è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾çš„é›†åˆã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ $F_e\subset  \mathbb{F}_e$å’Œ $F_p \subset \mathbb{F}_p$ã€‚$ F_e$ å’Œ $F_p$ çš„ç‰¹å¾å¦‚å›¾$ 2(c)$ æ‰€ç¤ºã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°† $360Â° $èŒƒå›´å›¾åƒåˆ’åˆ†ä¸º $6 $ä¸ªå­å›¾åƒã€‚æ¯ä¸ªå­å›¾åƒçš„åˆ†è¾¨ç‡ä¸º $300 \times 16$ã€‚$n_{F_e}ã€n_{F_p}ã€n_{\mathbb{F}_e} $å’Œ$n_{\mathbb{F}_p}$ åˆ†åˆ«é€‰æ‹©ä¸º $2ã€4ã€40$ å’Œ $80$ã€‚</p>
<h2 id="D-æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡"><a href="#D-æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡" class="headerlink" title="D.æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡"></a>D.æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡</h2><p>æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡æ¨¡å—ä¼°è®¡ä¸¤æ¬¡è¿ç»­æ‰«æä¹‹é—´çš„ä¼ æ„Ÿå™¨è¿åŠ¨ã€‚é€šè¿‡æ‰§è¡Œç‚¹åˆ°è¾¹ç¼˜å’Œç‚¹åˆ°å¹³é¢çš„æ‰«æåŒ¹é…æ¥æ‰¾åˆ°ä¸¤æ¬¡æ‰«æä¹‹é—´çš„å˜æ¢ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä»å‰ä¸€æ¬¡æ‰«æçš„ç‰¹å¾é›† $\mathbb{F}^{t-1}_e$ å’Œ$\mathbb{F}^{t-1}_p$ ä¸­æ‰¾åˆ° $F^t_e$å’Œ $F^t_p$ä¸­ç‚¹çš„å¯¹åº”ç‰¹å¾ã€‚ä¸ºäº†ç®€æ´èµ·è§ï¼Œæ‰¾åˆ°è¿™äº›å¯¹åº”å…³ç³»çš„è¯¦ç»†è¿‡ç¨‹å¯ä»¥åœ¨[20]ä¸­æ‰¾åˆ°ã€‚</p>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°å¯ä»¥è¿›è¡Œä¸€äº›æ›´æ”¹ä»¥æé«˜ç‰¹å¾åŒ¹é…çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ï¼š</p>
<p>$1) $æ ‡ç­¾åŒ¹é…ï¼šç”±äº$F^t_e$å’Œ $F^t_p$ä¸­çš„æ¯ä¸ªç‰¹å¾åœ¨åˆ†å‰²åéƒ½ç”¨å…¶æ ‡ç­¾è¿›è¡Œç¼–ç ï¼Œæˆ‘ä»¬åªèƒ½ä» $\mathbb{F}^{t-1}_e$ å’Œ$\mathbb{F}^{t-1}_p$ä¸­æ‰¾åˆ°å…·æœ‰ç›¸åŒæ ‡ç­¾çš„å¯¹åº”å…³ç³»ã€‚å¯¹äº $F^t_p$ ä¸­çš„å¹³é¢ç‰¹å¾ï¼Œåªæœ‰åœ¨$\mathbb{F}^{t-1}_p$ä¸­æ ‡è®°ä¸ºåœ°é¢ç‚¹çš„ç‚¹æ‰ä¼šè¢«ç”¨äºå¯»æ‰¾å¯¹åº”çš„å¹³é¢è´´ç‰‡(patch)ã€‚å¯¹äº$F^t_e$ä¸­çš„è¾¹ç¼˜ç‰¹å¾ï¼Œåœ¨åˆ†å‰²ç°‡çš„$\mathbb{F}^{t-1}_e$ä¸­å¯»æ‰¾å¯¹åº”çš„è¾¹ç¼˜çº¿ã€‚ä»¥è¿™ç§æ–¹å¼æ‰¾åˆ°å¯¹åº”å…³ç³»æœ‰åŠ©äºæé«˜åŒ¹é…ç²¾åº¦ã€‚æ¢å¥è¯è¯´ï¼ŒåŒä¸€å¯¹è±¡çš„åŒ¹é…å¯¹åº”å…³ç³»æ›´æœ‰å¯èƒ½åœ¨ä¸¤æ¬¡æ‰«æä¹‹é—´æ‰¾åˆ°ã€‚è¿™ä¸€è¿‡ç¨‹ä¹Ÿç¼©å°äº†æ½œåœ¨åŒ¹é…å¯¹è±¡çš„èŒƒå›´ã€‚</p>
<p>$2)$ä¸¤æ­¥L-Mä¼˜åŒ–ï¼šåœ¨[20]ä¸­ï¼Œå°†å½“å‰æ‰«æçš„è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾ç‚¹ä¹‹é—´çš„è·ç¦»åŠå…¶ä¸å‰ä¸€æ¬¡æ‰«æçš„å¯¹åº”å…³ç³»çš„ä¸€ç³»åˆ—éçº¿æ€§è¡¨è¾¾å¼ç¼–è¯‘ä¸ºå•ä¸ªç»¼åˆè·ç¦»å‘é‡ã€‚åº”ç”¨ Levenberg-Marquardt (L-M) æ–¹æ³•æ¥æ‰¾åˆ°ä¸¤ä¸ªè¿ç»­æ‰«æä¹‹é—´çš„æœ€å°è·ç¦»å˜æ¢ã€‚</p>
<p>æˆ‘ä»¬åœ¨è¿™é‡Œä»‹ç»ä¸€ç§ä¸¤æ­¥ L-M ä¼˜åŒ–æ–¹æ³•ã€‚æœ€ä½³å˜æ¢ $T $åˆ†ä¸¤æ­¥æ‰¾åˆ°ï¼š</p>
<p>$(1)$ é€šè¿‡åŒ¹é…$F^t_p$ä¸­çš„å¹³é¢ç‰¹å¾åŠå…¶åœ¨ $\mathbb{F}^{t-1}_p$ ä¸­çš„å¯¹åº”å…³ç³»æ¥ä¼°è®¡$ [t_z, Î¸_{roll}, Î¸_{pitch}]$</p>
<p>$(2) $ç„¶åä½¿ç”¨ $F^t_e$ä¸­çš„è¾¹ç¼˜ç‰¹å¾åŠå…¶åœ¨ $\mathbb{F}^{t-1}_e$ ä¸­çš„å¯¹åº”å…³ç³»ï¼Œå¹¶åŒæ—¶ä½¿ç”¨ $[t_z, Î¸_{roll}, Î¸_{pitch}]$ ä½œä¸ºçº¦æŸä¸€èµ·æ¥ä¼°è®¡å‰©ä½™çš„ $[t_x, t_y, Î¸_{yaw}]$ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶$[t_x, t_y, Î¸_{yaw}]$ä¹Ÿå¯ä»¥ä»ç¬¬ä¸€ä¸ªä¼˜åŒ–æ­¥éª¤ä¸­è·å¾—ï¼Œä½†å®ƒä»¬çš„å‡†ç¡®åº¦è¾ƒä½ï¼Œå¾—åˆ°çš„ç»“æœä¹Ÿä¸èƒ½ç»§ç»­æ”¾åœ¨ç¬¬äºŒæ­¥ä¸­ä½¿ç”¨ã€‚æœ€åï¼Œé€šè¿‡èåˆ $[t_z, Î¸_{roll}, Î¸_{pitch}]$ å’Œ$[t_x, t_y, Î¸_{yaw}]$æ‰¾åˆ°ä¸¤ä¸ªè¿ç»­æ‰«æä¹‹é—´çš„$ 6D$ å˜æ¢ã€‚é€šè¿‡ä½¿ç”¨æ‰€æå‡ºçš„ä¸¤æ­¥ä¼˜åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°åœ¨è®¡ç®—æ—¶é—´å‡å°‘çº¦ $35\% $çš„åŒæ—¶å¯ä»¥å®ç°ç±»ä¼¼çš„ç²¾åº¦ï¼ˆè¡¨ IIIï¼‰ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427165436363.png" alt="image-20220427165436363" style="zoom: 33%;" /></p>
<blockquote>
<p>å›¾ 3ï¼šæ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡æ¨¡å—çš„ä¸¤æ­¥ä¼˜åŒ–ã€‚é¦–å…ˆé€šè¿‡åŒ¹é…ä»åœ°é¢ç‚¹æå–çš„å¹³é¢ç‰¹å¾æ¥è·å¾—$[t_z, Î¸_{roll}, Î¸_{pitch}]$ã€‚ ç„¶åä½¿ç”¨ä»åˆ†å‰²ç‚¹æå–çš„è¾¹ç¼˜ç‰¹å¾è¿›è¡Œä¼°è®¡ï¼ŒåŒæ—¶åº”ç”¨$[t_z, Î¸_{roll}, Î¸_{pitch}]$ä½œä¸ºçº¦æŸï¼Œä»è€Œè·å¾—$[t_x, t_y, Î¸_{yaw}]$</p>
</blockquote>
<h2 id="E-æ¿€å…‰é›·è¾¾å»ºå›¾"><a href="#E-æ¿€å…‰é›·è¾¾å»ºå›¾" class="headerlink" title="E. æ¿€å…‰é›·è¾¾å»ºå›¾"></a>E. æ¿€å…‰é›·è¾¾å»ºå›¾</h2><p>æ¿€å…‰é›·è¾¾å»ºå›¾æ¨¡å—è¿è¡Œé¢‘ç‡è¾ƒä½ï¼Œå®ƒå°†$\{\mathbb{F}^{t}_e, \mathbb{F}^{t}_p\}$ä¸­çš„ç‰¹å¾ä¸å‘¨å›´çš„ç‚¹äº‘å›¾ $\overline Q^{t-1}$åŒ¹é…ï¼Œä»¥è¿›ä¸€æ­¥ç»†åŒ–ä½å§¿å˜æ¢ï¼Œç„¶åè¿™é‡Œå†æ¬¡ä½¿ç”¨ L-M æ–¹æ³•å¾—åˆ°æœ€ç»ˆçš„å˜æ¢ã€‚æˆ‘ä»¬è¯·è¯»è€…å‚è€ƒ [20] ä¸­çš„æè¿°ï¼Œäº†è§£è¯¦ç»†çš„åŒ¹é…å’Œä¼˜åŒ–è¿‡ç¨‹ã€‚ LeGO-LOAM çš„ä¸»è¦åŒºåˆ«åœ¨äºæœ€ç»ˆç‚¹äº‘å›¾çš„å­˜å‚¨æ–¹å¼ã€‚æˆ‘ä»¬ä¸æ˜¯ä¿å­˜å•ä¸ªç‚¹äº‘å›¾ï¼Œè€Œæ˜¯ä¿å­˜æ¯ä¸ªå•ç‹¬çš„ç‰¹å¾é›†$ \{\mathbb{F}^{t}_e, \mathbb{F}^{t}_p\}$ã€‚ä»¤ $M^{tâˆ’1} = \{\{\mathbb{F}^{1}_e, \mathbb{F}^{1}_p\}, â€¦, \{\mathbb{F}^{t-1}_e, \mathbb{F}^{t-1}_p\}\} $æ˜¯ä¿å­˜æ‰€æœ‰å…ˆå‰ç‰¹å¾é›†çš„é›†åˆã€‚ $M^{tâˆ’1}$ä¸­çš„æ¯ä¸ªç‰¹å¾é›†ä¹Ÿä¸æ‰«ææ—¶ä¼ æ„Ÿå™¨çš„ä½å§¿ç›¸å…³è”ã€‚é‚£ä¹ˆ $\overline Q^{t-1}$å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä»$M^{tâˆ’1}$è·å¾—ã€‚</p>
<p>åœ¨ç¬¬ä¸€ç§æ–¹æ³•ä¸­ï¼Œé€šè¿‡é€‰æ‹©ä¼ æ„Ÿå™¨è§†é‡ä¸­çš„ç‰¹å¾é›†æ¥è·å¾— $\overline Q^{t-1}$ã€‚ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¼ æ„Ÿå™¨ä½å§¿åœ¨ä¼ æ„Ÿå™¨å½“å‰ä½ç½® $100m$ ä»¥å†…çš„ç‰¹å¾é›†ã€‚ç„¶åå°†æ‰€é€‰ç‰¹å¾é›†è½¬æ¢å¹¶èåˆåˆ°å•ä¸ªå‘¨å›´åœ°å›¾$\overline Q^{t-1}$ä¸­ã€‚è¿™ç§åœ°å›¾é€‰æ‹©æŠ€æœ¯ç±»ä¼¼äº[20]ä¸­ä½¿ç”¨çš„æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥å°†ä½å§¿å›¾ SLAM é›†æˆåˆ° LeGO-LOAM ä¸­ã€‚æ¯ä¸ªç‰¹å¾é›†çš„ä¼ æ„Ÿå™¨ä½å§¿å¯ä»¥å»ºæ¨¡ä¸ºä½å§¿å›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ç‰¹å¾é›†$ \{\mathbb{F}^{t}_e, \mathbb{F}^{t}_p\}$å¯ä»¥çœ‹ä½œæ˜¯è¯¥èŠ‚ç‚¹çš„ä¼ æ„Ÿå™¨æµ‹é‡æ•°æ®ã€‚ç”±äºæ¿€å…‰é›·è¾¾å»ºå›¾æ¨¡å—çš„ä½å§¿ä¼°è®¡æ¼‚ç§»éå¸¸ä½ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾åœ¨çŸ­æ—¶é—´å†…æ²¡æœ‰æ¼‚ç§»ã€‚è¿™æ ·ï¼Œ$\overline Q^{t-1}$å¯ä»¥é€šè¿‡é€‰æ‹©æœ€è¿‘çš„ä¸€ç»„ç‰¹å¾é›†æ¥å½¢æˆï¼Œå³ $\overline Q^{t-1}= \{\{\mathbb{F}^{t-k}_e, \mathbb{F}^{t-k}_p\}, â€¦, \{\mathbb{F}^{t-1}_e, \mathbb{F}^{t-1}_p\}\} $ ï¼Œå…¶ä¸­$ k $å®šä¹‰äº†$\overline Q^{t-1}$çš„å¤§å°ã€‚ç„¶åï¼Œå¯ä»¥ä½¿ç”¨ L-M ä¼˜åŒ–åè·å¾—çš„å˜æ¢æ·»åŠ $\overline Q^{t-1}$â€‹ä¸­æ–°èŠ‚ç‚¹å’Œæ‰€é€‰èŠ‚ç‚¹ä¹‹é—´çš„ç©ºé—´çº¦æŸã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œé—­ç¯æ£€æµ‹æ¥è¿›ä¸€æ­¥æ¶ˆé™¤è¯¥æ¨¡å—çš„æ¼‚ç§»ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä½¿ç”¨ ICP åœ¨å½“å‰ç‰¹å¾é›†å’Œå…ˆå‰ç‰¹å¾é›†ä¹‹é—´æ‰¾åˆ°åŒ¹é…é¡¹ï¼Œåˆ™ä¼šæ·»åŠ æ–°çº¦æŸã€‚ç„¶åé€šè¿‡å°†ä½å§¿å›¾å‘é€åˆ°ä¼˜åŒ–ç³»ç»Ÿï¼ˆä¾‹å¦‚ [24]ï¼‰æ¥æ›´æ–°ä¼ æ„Ÿå™¨çš„ä¼°è®¡ä½å§¿ã€‚è¯·æ³¨æ„ï¼Œåªæœ‰ Sec ä¸­çš„å®éªŒã€‚ IV(D) ä½¿ç”¨è¿™ç§æŠ€æœ¯æ¥åˆ›å»ºå®ƒçš„å‘¨å›´åœ°å›¾ã€‚æ³¨æ„ï¼Œåªæœ‰ç¬¬å››èŠ‚ï¼ˆDï¼‰ä¸­çš„å®éªŒä½¿ç”¨æ­¤æŠ€æœ¯æ¥åˆ›å»ºå…¶å‘¨å›´çš„åœ°å›¾ã€‚</p>
<h1 id="â…£-å®éªŒ"><a href="#â…£-å®éªŒ" class="headerlink" title="â…£.å®éªŒ"></a>â…£.å®éªŒ</h1><p>æˆ‘ä»¬ç°åœ¨æè¿°ä¸€ç³»åˆ—å®éªŒï¼Œä»¥å®šæ€§å’Œå®šé‡åˆ†æä¸¤ç§æ¯”è¾ƒæ–¹æ³•ï¼ŒLOAM å’Œ LeGO-LOAMï¼Œåœ¨ä¸¤ç§ç¡¬ä»¶å®‰æ’ä¸Šï¼Œä¸€ä¸ª Jetson TX2 å’Œä¸€ä¸ª Cortex-A57ï¼Œä¸€ä¸ªç¬”è®°æœ¬ç”µè„‘å’Œä¸€ä¸ª i7-4710MQã€‚è¿™ä¸¤ç§ç®—æ³•éƒ½æ˜¯ç”¨ C++ å®ç°çš„ï¼Œå¹¶ä½¿ç”¨ Ubuntu Linux1 ä¸­çš„æœºå™¨äººæ“ä½œç³»ç»Ÿ (ROS) [25] æ‰§è¡Œ$^1$ã€‚</p>
<blockquote>
<p>$^1$LeGO-LOAM çš„ä»£ç å¯åœ¨ <a href="https://github.com/RobustFieldAutonomyLab/LeGO-LOAM">https://github.com/RobustFieldAutonomyLab/LeGO-LOAM</a> è·å¾—</p>
</blockquote>
<h2 id="A-å°å‹-UGV-æµ‹è¯•"><a href="#A-å°å‹-UGV-æµ‹è¯•" class="headerlink" title="A. å°å‹ UGV æµ‹è¯•"></a>A. å°å‹ UGV æµ‹è¯•</h2><p>æˆ‘ä»¬åœ¨æ¤è¢«è¦†ç›–çš„å®¤å¤–ç¯å¢ƒä¸­æ‰‹åŠ¨é©±åŠ¨æœºå™¨äººã€‚æˆ‘ä»¬é¦–å…ˆå±•ç¤ºäº†åœ¨è¿™ç§ç¯å¢ƒä¸‹ç‰¹å¾æå–çš„å®šæ€§æ¯”è¾ƒã€‚ä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•ä»åŒä¸€æ‰«æä¸­æå–çš„è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾å¦‚å›¾ 4 æ‰€ç¤ºã€‚è¿™äº›ç‰¹å¾å¯¹åº”äºç¬¬ III èŠ‚ä¸­å‘é€åˆ°æ¿€å…‰é›·è¾¾å»ºå›¾æ¨¡å—çš„$\{\mathbb{F}^{t}_e, \mathbb{F}^{t}_p\}$ã€‚å¦‚å›¾$4(d)$ æ‰€ç¤ºï¼ŒLeGO-LOAM çš„ç‰¹å¾æ•°é‡åœ¨ç‚¹äº‘åˆ†å‰²åå¤§å¤§å‡å°‘ã€‚ä»æ ‘å¶è¿”å›çš„å¤§éƒ¨åˆ†ç‚¹è¢«ä¸¢å¼ƒï¼Œå› ä¸ºå®ƒä»¬åœ¨å¤šæ¬¡æ‰«æä¸­ä¸æ˜¯ç¨³å®šçš„ç‰¹å¾ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äºä»è‰åœ°è¿”å›çš„ç‚¹ä¹Ÿéå¸¸å˜ˆæ‚ï¼Œå› æ­¤åœ¨è¯„ä¼°åä¼šå¾—å‡ºè¾ƒå¤§çš„ç²—æ›²ç‡å€¼ã€‚å› æ­¤ï¼Œä½¿ç”¨åŸå§‹ çš„LOAMï¼Œ ä¸å¯é¿å…åœ°ä¼šä»è¿™äº›ç‚¹ä¸­æå–è¾¹ç¼˜ç‰¹å¾ã€‚å¦‚å›¾$4(c)$ æ‰€ç¤ºï¼Œä»åœ°é¢æå–çš„è¾¹ç¼˜ç‰¹å¾é€šå¸¸ä¸å¯é ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427090416034.png" alt="image-20220427090416034" style="zoom: 80%;" /></p>
<blockquote>
<p>å›¾ 4ï¼šåœ¨æ¤è¢«è¦†ç›–çš„å®¤å¤–ç¯å¢ƒä¸­ï¼Œä»ä¸¤ç§ä¸åŒçš„æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡å’Œåˆ¶å›¾æ¡†æ¶è·å¾—çš„è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾ã€‚è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾åˆ†åˆ«ä¸ºç»¿è‰²å’Œç²‰çº¢è‰²ã€‚ä» LOAM è·å¾—çš„ç‰¹å¾æ˜¾ç¤ºåœ¨$ (b) $å’Œ$ (c) $ä¸­ã€‚ä» LeGO-LOAM è·å¾—çš„ç‰¹å¾å¦‚ $(d) $å’Œ$ (e)$ æ‰€ç¤ºã€‚æ ‡ç­¾ (i) è¡¨ç¤ºæ ‘ï¼Œ(ii) è¡¨ç¤ºçŸ³å¢™ï¼Œ (iii) è¡¨ç¤ºæœºå™¨äººã€‚</p>
</blockquote>
<p>è™½ç„¶æˆ‘ä»¬å¯ä»¥æ›´æ”¹ LOAM ä¸­æå–è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾çš„æ›²ç‡é˜ˆå€¼ $c_{th}$ ä»¥å‡å°‘ç‰¹å¾æ•°é‡å¹¶ä»è‰å’Œæ ‘å¶ä¸­è¿‡æ»¤æ‰ä¸ç¨³å®šçš„ç‰¹å¾ï¼Œä½†åœ¨åº”ç”¨è¿™äº›æ›´æ”¹åæˆ‘ä»¬ä¼šé‡åˆ°æ›´ç³Ÿç³•çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ $c_{th}$ä»¥ä»ç¯å¢ƒä¸­æå–æ›´ç¨³å®šçš„è¾¹ç¼˜ç‰¹å¾ï¼Œä½†å¦‚æœæœºå™¨äººè¿›å…¥ç›¸å¯¹å¹²å‡€çš„ç¯å¢ƒï¼Œè¿™ç§å˜åŒ–å¯èƒ½ä¼šå¯¼è‡´æœ‰ç”¨çš„è¾¹ç¼˜ç‰¹å¾æ•°é‡ä¸è¶³ã€‚åŒæ ·ï¼Œå½“æœºå™¨äººä»æ¸…æ´ç¯å¢ƒç§»åŠ¨åˆ°å˜ˆæ‚ç¯å¢ƒæ—¶ï¼Œå‡å°$c_{th}$ä¹Ÿä¼šå¯¼è‡´ç¼ºä¹æœ‰ç”¨çš„å¹³é¢ç‰¹å¾ã€‚åœ¨è¿™é‡Œçš„æ‰€æœ‰å®éªŒä¸­ï¼Œæˆ‘ä»¬å¯¹ LOAM å’Œ LeGO-LOAM ä½¿ç”¨ç›¸åŒçš„$c_{th}$ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬åœ¨æµ‹è¯•ç¯å¢ƒä¸­æ¯”è¾ƒä¸¤ç§æ–¹æ³•çš„å»ºå›¾ç»“æœã€‚ä¸ºäº†æ¨¡æ‹Ÿå…·æœ‰æŒ‘æˆ˜æ€§çš„æ½œåœ¨ UGV æ“ä½œåœºæ™¯ï¼Œæˆ‘ä»¬æ‰§è¡Œäº†ä¸€ç³»åˆ—æ¿€è¿›çš„åèˆªæ“ä½œã€‚è¯·æ³¨æ„ï¼Œåœ¨æœ¬æ–‡çš„æ‰€æœ‰å®éªŒä¸­ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½æä¾›äº†ç›¸åŒçš„åˆå§‹å¹³ç§»å’Œæ—‹è½¬ä¼°è®¡ï¼ˆguessï¼‰ï¼Œè¯¥ä¼°è®¡ï¼ˆguessï¼‰æ˜¯ä» IMU è·å¾—çš„ã€‚è¿è¡Œ60ç§’åå¾—åˆ°çš„ç‚¹äº‘å›¾å¦‚å›¾5æ‰€ç¤ºã€‚ç”±äºä¸ç¨³å®šç‰¹å¾å¯¼è‡´çš„é”™è¯¯ç‰¹å¾å…³è”ï¼ŒLOAM çš„åœ°å›¾åœ¨æ“ä½œè¿‡ç¨‹ä¸­ä¼šå‘æ•£ä¸¤æ¬¡ã€‚å›¾ $5(a)$ä¸­ç”¨ç™½è‰²ç®­å¤´çªå‡ºæ˜¾ç¤ºçš„ä¸‰æ£µæ ‘å¹²ä»£è¡¨ç°å®ä¸­çš„åŒä¸€æ£µæ ‘ã€‚ä¸¤ç§é‡Œç¨‹è®¡æ–¹æ³•çš„å®Œæ•´æ˜ å°„è¿‡ç¨‹çš„å¯è§†åŒ–å¯ä»¥åœ¨è§†é¢‘é™„ä»¶ä¸­æ‰¾åˆ°$^2$ã€‚</p>
<blockquote>
<p>$^2$<a href="https://youtu.be/O3tz_ftHV48">https://youtu.be/O3tz_ftHV48</a></p>
</blockquote>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427090607185.png" alt="image-20220427090607185" style="zoom:80%;" /></p>
<blockquote>
<p>å›¾ 5ï¼šLOAM å’Œ LeGO-LOAM åœ¨å›¾ $4(a) $æ‰€ç¤ºåœ°å½¢ä¸Šçš„åœ°å›¾ã€‚ $(a) $ä¸­ç”¨ç™½è‰²ç®­å¤´æ ‡è®°çš„æ ‘ä»£è¡¨åŒä¸€æ£µæ ‘ã€‚</p>
</blockquote>
<h2 id="B-å¤§è§„æ¨¡-UGV-æµ‹è¯•"><a href="#B-å¤§è§„æ¨¡-UGV-æµ‹è¯•" class="headerlink" title="B. å¤§è§„æ¨¡ UGV æµ‹è¯•"></a>B. å¤§è§„æ¨¡ UGV æµ‹è¯•</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ä¸‰ä¸ªå¤§è§„æ¨¡æ•°æ®é›†ä¸Šå¯¹ LOAM å’Œ LeGO-LOAM è¿›è¡Œå®šé‡æ¯”è¾ƒï¼Œè¿™å°†è¢«ç§°ä¸ºå®éªŒ$ 1ã€2 $å’Œ$ 3$ã€‚å‰ä¸¤ä¸ªæ˜¯åœ¨å²è’‚æ–‡æ–¯ç†å·¥å­¦é™¢æ ¡å›­æ”¶é›†çš„ï¼Œé‚£é‡Œæœ‰è®¸å¤šå»ºç­‘ç‰©ã€æ ‘æœ¨ã€é“è·¯å’Œäººè¡Œé“ã€‚è¿™äº›å®éªŒåŠå…¶ç¯å¢ƒå¦‚å›¾ 6(a) æ‰€ç¤ºã€‚å®éªŒ 3 è·¨è¶Šäº†ä¸€æ¡æ£®æ—è¦†ç›–çš„è¿œè¶³å°å¾„ï¼Œå…¶ä¸­æœ‰æ ‘æœ¨ã€æŸæ²¹è·¯å’Œè¢«è‰å’ŒåœŸå£¤è¦†ç›–çš„å°å¾„ã€‚æ‰§è¡Œå®éªŒ 3 çš„ç¯å¢ƒå¦‚å›¾ 8 æ‰€ç¤ºã€‚æ¯ä¸ªå®éªŒçš„è¯¦ç»†ä¿¡æ¯åˆ—åœ¨è¡¨ I ä¸­ã€‚ä¸ºäº†è¿›è¡Œå…¬å¹³æ¯”è¾ƒï¼Œæ¯ä¸ªå®éªŒæ˜¾ç¤ºçš„æ‰€æœ‰æ€§èƒ½å’Œå‡†ç¡®åº¦ç»“æœå‡åœ¨æ¯ä¸ªæ•°æ®é›†çš„ 10 æ¬¡å®æ—¶å›æ”¾è¯•éªŒä¸­å¹³å‡å¾—å‡ºã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427102855741.png" alt="image-20220427102855741" style="zoom: 50%;" /></p>
<p>1)å®éªŒ1ï¼šç¬¬ä¸€ä¸ªå®éªŒæ—¨åœ¨è¯æ˜LOAMå’ŒLeGO-LOAMéƒ½å¯ä»¥åœ¨å…·æœ‰å¹³æ»‘è¿åŠ¨çš„åŸå¸‚ç¯å¢ƒä¸­å®ç°ä½æ¼‚ç§»å§¿æ€ä¼°è®¡ã€‚æˆ‘ä»¬é¿å…äº†æ¿€è¿›çš„åèˆªåŠ¨ä½œï¼Œå¹¶ä¸”æˆ‘ä»¬é¿å…é©¾é©¶æœºå™¨äººç©¿è¿‡åªèƒ½è·å¾—ä¸€äº›ç¨³å®šç‰¹å¾çš„ç¨€ç–åŒºåŸŸã€‚åœ¨æ•´ä¸ªæ•°æ®è®°å½•è¿‡ç¨‹ä¸­ï¼Œæœºå™¨äººåœ¨å¹³å¦çš„é“è·¯ä¸Šè¿è¡Œã€‚æœºå™¨äººçš„åˆå§‹ä½ç½®ï¼Œå¦‚å›¾6(b)æ‰€ç¤ºï¼Œä½äºæ–œå¡ä¸Šã€‚æœºå™¨äººä»¥å¹³å‡ 1.35m/s çš„å¹³å‡é€Ÿåº¦è¡Œé©¶ 807 ç§’åè¿”å›åŒä¸€ä½ç½®ã€‚</p>
<p>ä¸ºäº†è¯„ä¼°è¿™ä¸¤ç§æ–¹æ³•çš„å§¿æ€ä¼°è®¡ç²¾åº¦ï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†æœ€ç»ˆå§¿æ€å’Œåˆå§‹å§¿æ€ä¹‹é—´çš„å¹³ç§»å’Œæ—‹è½¬å·®å¼‚ã€‚è¿™é‡Œï¼Œé€šè¿‡æ‰€æœ‰å®éªŒï¼Œåˆå§‹ä½å§¿å®šä¹‰ä¸º$ [0, 0, 0, 0, 0, 0]$ã€‚å¦‚è¡¨ V æ‰€ç¤ºï¼ŒLOAM å’Œ LeGO-LOAM åœ¨ä¸¤ç§ä¸åŒçš„ç¡¬ä»¶å®‰æ’ä¸Šéƒ½å®ç°äº†ç›¸ä¼¼çš„ä½æ¼‚ç§»å§¿æ€ä¼°è®¡ã€‚å½“åœ¨ Jetson ä¸Šè¿è¡Œæ—¶ï¼Œæ¥è‡ª LeGO-LOAM çš„æœ€ç»ˆåœ°å›¾å¦‚å›¾ 6(b) æ‰€ç¤ºã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427101541012.png" alt="image-20220427101541012"></p>
<blockquote>
<p>å›¾ 6ï¼šå®éªŒ$1$å’Œ$2$çš„ LeGO-LOAM å›¾ã€‚$(c)$ä¸­çš„é¢œè‰²å˜åŒ–è¡¨ç¤ºçœŸå®çš„é«˜ç¨‹å˜åŒ–ã€‚ç”±äºå®éªŒ $1$ ä¸­æœºå™¨äººçš„åˆå§‹ä½ç½®åœ¨æ–œå¡ä¸Šï¼Œå› æ­¤ $(b)$ ä¸­çš„é¢œè‰²å˜åŒ–å¹¶ä¸ä»£è¡¨çœŸå®çš„é«˜ç¨‹å˜åŒ–ã€‚</p>
</blockquote>
<p>2)å®éªŒ2ï¼šè™½ç„¶å®éªŒ2æ˜¯åœ¨ä¸å®éªŒ1ç›¸åŒçš„ç¯å¢ƒä¸­è¿›è¡Œçš„ï¼Œä½†å®ƒçš„è½¨è¿¹ç•¥æœ‰ä¸åŒï¼Œè¡Œé©¶åœ¨å¦‚å›¾7(a)æ‰€ç¤ºçš„äººè¡Œé“ä¸Šã€‚è¿™æ¡äººè¡Œé“ä»£è¡¨äº† LOAM å¯èƒ½ç»å¸¸å¤±è´¥çš„ç¯å¢ƒã€‚äººè¡Œé“çš„ä¸€ç«¯æœ‰ä¸€å µå¢™å’ŒæŸ±å­â€”â€”ä»è¿™äº›ç»“æ„ä¸­æå–çš„è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾æ˜¯ç¨³å®šçš„ã€‚äººè¡Œé“çš„å¦ä¸€ç«¯æ˜¯ä¸€ç‰‡å¼€é˜”çš„åŒºåŸŸï¼Œä¸Šé¢è¦†ç›–ç€å˜ˆæ‚çš„ç‰©ä½“ï¼Œå³è‰å’Œæ ‘ï¼Œè¿™å°†å¯¼è‡´ç‰¹å¾æå–ä¸å¯é ã€‚å› æ­¤ï¼ŒLOAM çš„å§¿æ€ä¼°è®¡åœ¨é©¶è¿‡è¿™æ¡äººè¡Œé“åä¼šå‘æ•£ï¼ˆå›¾ 7(b)å’Œ(d)ï¼‰ã€‚LeGO-LOAM æ²¡æœ‰è¿™æ ·çš„é—®é¢˜ï¼š1ï¼‰æ²¡æœ‰ä»è¢«è‰è¦†ç›–çš„åœ°é¢ä¸­æå–è¾¹ç¼˜ç‰¹å¾ï¼Œ2ï¼‰åœ¨åˆ†å‰²åè¿‡æ»¤æ‰æ¥è‡ªæ ‘å¶çš„å™ªå£°ä¼ æ„Ÿå™¨è¯»æ•°ã€‚ä¸¤ç§æ–¹æ³•çš„ç²¾åº¦æ¯”è¾ƒå¦‚è¡¨ V æ‰€ç¤ºã€‚åœ¨æœ¬å®éªŒä¸­ï¼ŒLeGO-LOAM çš„ç²¾åº¦æ¯” LOAM é«˜ä¸€ä¸ªæ•°é‡çº§ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427101616762.png" alt="image-20220427101616762"></p>
<blockquote>
<p>å›¾ $7$ï¼šå®éªŒ$ 2 $ä¸­ LOAM åœ¨ç©¿è¿‡å²è’‚æ–‡æ–¯æ ¡å›­çš„äººè¡Œé“ä¸Šå‘ç”Ÿæ•…éšœçš„åœºæ™¯ï¼ˆä¸Šå›¾ $(a)$ ä¸­æœ€å·¦ä¾§çš„äººè¡Œé“ï¼‰ã€‚äººè¡Œé“çš„ä¸€ç«¯ç”±é™„è¿‘å»ºç­‘ç‰©çš„ç‰¹å¾æ”¯æ’‘ã€‚äººè¡Œé“çš„å¦ä¸€ç«¯ä¸»è¦è¢«å˜ˆæ‚çš„ç‰©ä½“åŒ…å›´ï¼Œå³è‰å’Œæ ‘ã€‚å¦‚æœæ²¡æœ‰ç‚¹äº‘åˆ†å‰²ï¼Œå°†ä»è¿™äº›å¯¹è±¡ä¸­æå–ä¸å¯é çš„è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾ã€‚å›¾åƒ $(b)$ å’Œ $(d)$ æ˜¾ç¤º LOAM åœ¨ç»è¿‡äººè¡Œé“åå¤±æ•ˆã€‚</p>
</blockquote>
<p>3)å®éªŒ 3ï¼šå®éªŒ 3 çš„æ•°æ®é›†æ˜¯ä»æ£®æ—è¿œè¶³å°å¾„è®°å½•çš„ï¼Œå…¶ä¸­ UGV ä»¥ 1.3m/s çš„å¹³å‡é€Ÿåº¦è¡Œé©¶ã€‚æœºå™¨äººè¡Œé©¶ 35 åˆ†é’Ÿåè¿”å›åˆå§‹ä½ç½®ã€‚è¿™ç§ç¯å¢ƒä¸‹çš„æµ·æ‹”å˜åŒ–çº¦ä¸º 19 ç±³ã€‚UGV åœ¨ä¸‰ä¸ªè·¯é¢ä¸Šè¡Œé©¶ï¼šæ³¥åœŸè¦†ç›–çš„å°å¾„ã€æ²¥é’å’Œè¢«è‰è¦†ç›–çš„åœ°é¢ã€‚è¿™äº›è¡¨é¢çš„ä»£è¡¨æ€§å›¾åƒåˆ†åˆ«æ˜¾ç¤ºåœ¨å›¾ 8 çš„åº•éƒ¨ã€‚æ ‘æœ¨æˆ–çŒæœ¨ä¸›å§‹ç»ˆå­˜åœ¨äºé“è·¯çš„è‡³å°‘ä¸€ä¾§ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427101634370.png" alt="image-20220427101634370" style="zoom:67%;" /></p>
<blockquote>
<p>å›¾ 8ï¼šå®éªŒ$3$ LeGO-LOAM å»ºå›¾ç»“æœã€‚</p>
</blockquote>
<p>æˆ‘ä»¬é¦–å…ˆåœ¨è¿™ç§ç¯å¢ƒä¸‹æµ‹è¯• LOAM çš„å‡†ç¡®æ€§ã€‚ç”Ÿæˆçš„åœ°å›¾åœ¨æ‰€ä½¿ç”¨çš„ä¸¤å°è®¡ç®—æœºä¸Šçš„ä¸åŒä½ç½®å­˜åœ¨åˆ†æ­§ã€‚ç›¸å¯¹äº UGV åˆå§‹ä½ç½®çš„æœ€ç»ˆå¹³ç§»å’Œæ—‹è½¬è¯¯å·®åœ¨ Jetson ä¸Šä¸º 69.40m å’Œ 27.38Â°ï¼Œåœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šä¸º 62.11m å’Œ 8.50Â°ã€‚å›¾ 9(a) å’Œ (b) æ˜¾ç¤ºäº†å¯¹ä¸¤ç§ç¡¬ä»¶å®‰æ’è¿›è¡Œ 10 æ¬¡è¯•éªŒçš„ç»“æœè½¨è¿¹ã€‚</p>
<p>å½“ LeGO-LOAM åº”ç”¨äºè¯¥æ•°æ®é›†æ—¶ï¼ŒJetson ä¸Šçš„æœ€ç»ˆç›¸å¯¹å¹³ç§»å’Œæ—‹è½¬è¯¯å·®ä¸º 13.93m å’Œ 7.73Â°ï¼Œç¬”è®°æœ¬ç”µè„‘ä¸Šä¸º 14.87m å’Œ 7.96Â°ã€‚ Jetson ä¸Š LeGO-LOAM çš„æœ€ç»ˆç‚¹äº‘å›¾å¦‚å›¾ 8 æ‰€ç¤ºï¼Œå åŠ åœ¨å«æ˜Ÿå›¾åƒä¸Šã€‚åœ¨å›¾ 8 çš„ä¸­å¿ƒæ”¾å¤§çš„å±€éƒ¨åœ°å›¾æ˜¾ç¤ºï¼Œæ¥è‡ª LeGO-LOAM çš„ç‚¹äº‘å›¾ä¸å¼€æ”¾ä¸­å¯è§çš„ä¸‰æ£µæ ‘åŒ¹é…å¾—å¾ˆå¥½ã€‚åœ¨ä¸¤å°è®¡ç®—æœºä¸Šä» LeGO-LOAM è·å¾—çš„æ‰€æœ‰è·¯å¾„ä¹‹é—´æ˜¾ç¤ºå‡ºé«˜åº¦ä¸€è‡´æ€§ã€‚å›¾ 9(c) å’Œ (d) æ˜¾ç¤ºäº†åœ¨æ¯å°è®¡ç®—æœºä¸Šè¿è¡Œçš„åæ¬¡è¯•éªŒã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427103924914.png" alt="image-20220427103924914" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ 9ï¼šLOAM å’Œ LeGO-LOAM åœ¨ 10 æ¬¡è¯•éªŒå’Œ 2 å°è®¡ç®—æœºä¸Šç”Ÿæˆçš„è·¯å¾„ï¼Œä»¥åŠå®éªŒ 3 æ•°æ®é›†ã€‚</p>
</blockquote>
<h2 id="C-åŸºå‡†æµ‹è¯•ç»“æœ"><a href="#C-åŸºå‡†æµ‹è¯•ç»“æœ" class="headerlink" title="C. åŸºå‡†æµ‹è¯•ç»“æœ"></a>C. åŸºå‡†æµ‹è¯•ç»“æœ</h2><p><strong>1)ç‰¹å¾æ•°é‡æ¯”è¾ƒ</strong>ï¼šæˆ‘ä»¬åœ¨è¡¨IIä¸­å±•ç¤ºäº†ä¸¤ç§æ–¹æ³•çš„ç‰¹å¾æå–æ¯”è¾ƒã€‚æ¯æ¬¡æ‰«æçš„ç‰¹å¾å†…å®¹å¹³å‡è¶…è¿‡æ¯ä¸ªæ•°æ®é›†çš„ 10 æ¬¡è¯•éªŒã€‚ç‚¹äº‘åˆ†å‰²åï¼Œå¯¹äºé›†åˆ$ F_eã€F_pã€\mathbb{F}_e $å’Œ$\mathbb{F}_p$ï¼Œéœ€è¦ LeGO-LOAM å¤„ç†çš„ç‰¹å¾æ•°é‡åˆ†åˆ«å‡å°‘äº†è‡³å°‘$ 29\%ã€40\%ã€68\%$ å’Œ $72\%$ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427105750858.png" alt="image-20220427105750858" style="zoom:50%;" /></p>
<p><strong>2)è¿­ä»£æ¬¡æ•°æ¯”è¾ƒï¼š</strong>åº”ç”¨æå‡ºçš„ä¸¤æ­¥L-Mä¼˜åŒ–æ–¹æ³•çš„ç»“æœå¦‚è¡¨IIIæ‰€ç¤ºã€‚æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ LeGO-LOAM åº”ç”¨åŸå§‹ L-M ä¼˜åŒ–ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æœ€å°åŒ–ä»è¾¹ç¼˜å’Œå¹³é¢ç‰¹å¾ä¸€èµ·è·å¾—çš„è·ç¦»å‡½æ•°ã€‚ç„¶åæˆ‘ä»¬å¯¹ LeGO-LOAM åº”ç”¨ä¸¤æ­¥ L-M ä¼˜åŒ–ï¼šâ‘ $F_p$ä¸­çš„å¹³é¢ç‰¹å¾ç”¨äºè·å¾—$[t_z, Î¸_{roll}, Î¸_{pitch}]$ï¼Œâ‘¡åˆ©ç”¨$F_e$ä¸­çš„è¾¹ç¼˜ç‰¹å¾å¾—åˆ°$[t_x, t_y, Î¸_{yaw}]$ã€‚è®°å½• L-M æ–¹æ³•åœ¨å¤„ç†ä¸€æ¬¡æ‰«æåç»ˆæ­¢æ—¶çš„å¹³å‡è¿­ä»£æ¬¡æ•°ä»¥è¿›è¡Œæ¯”è¾ƒã€‚å½“ä½¿ç”¨ä¸¤æ­¥ä¼˜åŒ–æ—¶ï¼Œç¬¬ä¸€æ­¥ä¼˜åŒ–åœ¨å®éªŒ 1 å’Œ 2 çš„ä¸¤æ¬¡è¿­ä»£ä¸­å®Œæˆã€‚è™½ç„¶ç¬¬äºŒæ­¥ä¼˜åŒ–çš„è¿­ä»£æ¬¡æ•°ä¸åŸå§‹L-Mæ–¹æ³•çš„æ•°é‡ç›¸ä¼¼ï¼Œä½†å¤„ç†çš„ç‰¹å¾è¾ƒå°‘ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ä¸¤æ­¥ L-M ä¼˜åŒ–åï¼Œæ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡çš„è¿è¡Œæ—¶é—´å‡å°‘äº† $34\%$ è‡³ $48\%$ã€‚ä¸¤æ­¥ä¼˜åŒ–çš„è¿è¡Œæ—¶é—´å¦‚è¡¨ IV æ‰€ç¤ºã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427105906074.png" alt="image-20220427105906074" style="zoom:50%;" /></p>
<p><strong>3)è¿è¡Œæ—¶é—´æ¯”è¾ƒï¼š</strong>LOAM å’Œ$\rm{LeGO-LOAM}$ çš„æ¯ä¸ªæ¨¡å—åœ¨ä¸¤å°è®¡ç®—æœºä¸Šçš„è¿è¡Œæ—¶é—´å¦‚è¡¨ IV æ‰€ç¤ºã€‚ä½¿ç”¨æ‰€æå‡ºçš„æ¡†æ¶ï¼Œ<strong>ç‰¹å¾æå–</strong>å’Œ<strong>æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡</strong>æ¨¡å—çš„è¿è¡Œæ—¶é—´åœ¨ LeGO-LOAM ä¸­å‡å°‘äº†ä¸€ä¸ªæ•°é‡çº§ã€‚è¯·æ³¨æ„ï¼Œåœ¨ Jetson ä¸Š,è¿™ä¸¤ä¸ªæ¨¡å—åœ¨ LOAM ä¸­çš„è¿è¡Œæ—¶é—´è¶…è¿‡ 100 æ¯«ç§’ã€‚å¯¼è‡´è®¸å¤šæ‰«æè¢«è·³è¿‡ï¼Œå› ä¸º LOAM åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸Šæ— æ³•å®ç°å®æ—¶æ€§èƒ½ã€‚ä½¿ç”¨ LeGO-LOAM æ—¶ï¼Œæ¿€å…‰é›·è¾¾å»ºå›¾çš„è¿è¡Œæ—¶é—´ä¹Ÿå‡å°‘äº†è‡³å°‘ $60\%$ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427110536203.png" alt="image-20220427110536203" style="zoom:50%;" /></p>
<p><strong>4)ä½å§¿è¯¯å·®æ¯”è¾ƒï¼š</strong>é€šè¿‡åœ¨æ‰€æœ‰å®éªŒä¸­å°†åˆå§‹ä½å§¿è®¾ç½®ä¸º$[0, 0, 0, 0, 0, 0]$ï¼Œæˆ‘ä»¬é€šè¿‡å°†æœ€ç»ˆä½å§¿ä¸åˆå§‹ä½å§¿è¿›è¡Œæ¯”è¾ƒæ¥è®¡ç®—ç›¸å¯¹ä½å§¿ä¼°è®¡è¯¯å·®ã€‚è¡¨ V åˆ—å‡ºäº†ä¸¤å°è®¡ç®—æœºä¸Šä¸¤ç§æ–¹æ³•çš„æ—‹è½¬è¯¯å·®ï¼ˆä»¥åº¦ä¸ºå•ä½ï¼‰å’Œå¹³ç§»è¯¯å·®ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ã€‚é€šè¿‡ä½¿ç”¨æ‰€æå‡ºçš„æ¡†æ¶ï¼ŒLeGO-LOAM å¯ä»¥ä»¥æ›´å°‘çš„è®¡ç®—æ—¶é—´å®ç°ç›¸å½“æˆ–æ›´å¥½çš„ä½ç½®ä¼°è®¡ç²¾åº¦ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427111646072.png" alt="image-20220427111646072" style="zoom:50%;" /></p>
<h2 id="D-ä½¿ç”¨-KITTI-æ•°æ®é›†çš„é—­ç¯æµ‹è¯•"><a href="#D-ä½¿ç”¨-KITTI-æ•°æ®é›†çš„é—­ç¯æµ‹è¯•" class="headerlink" title="D. ä½¿ç”¨ KITTI æ•°æ®é›†çš„é—­ç¯æµ‹è¯•"></a>D. ä½¿ç”¨ KITTI æ•°æ®é›†çš„é—­ç¯æµ‹è¯•</h2><p>æˆ‘ä»¬çš„æœ€ç»ˆå®éªŒå°† LeGO-LOAM åº”ç”¨äº KITTI æ•°æ®é›† [21]ã€‚ç”±äºåœ¨ [20] ä¸­å¯¹ KITTI æ•°æ®é›†çš„ LOAM æµ‹è¯•ä»¥ 10% çš„å®æ—¶é€Ÿåº¦è¿è¡Œï¼Œæˆ‘ä»¬åªæ¢ç´¢ LeGO-LOAM åŠå…¶åœ¨åµŒå…¥å¼ç³»ç»Ÿå®æ—¶åº”ç”¨ä¸­çš„æ½œåŠ›ï¼Œå…¶ä¸­è¡Œç¨‹é•¿åº¦è¶³å¤Ÿå¤§éœ€è¦å®Œæ•´çš„ SLAM è§£å†³æ–¹æ¡ˆã€‚LeGO-LOAM åœ¨ Jetson ä¸Šä½¿ç”¨åºåˆ— 00 çš„ç»“æœå¦‚å›¾ 10 æ‰€ç¤ºã€‚ä¸ºäº†åœ¨ Jetson ä¸Šå®ç°å®æ—¶æ€§èƒ½ï¼Œæˆ‘ä»¬å°† HDL-64E çš„æ‰«æä¸‹é‡‡æ ·åˆ°ä¸ç¬¬ III èŠ‚ä¸­ä½¿ç”¨çš„ç›¸åŒèŒƒå›´å›¾åƒVLP-16ã€‚æ¢è¨€ä¹‹ï¼Œæ¯æ¬¡æ‰«æçš„ 75% çš„ç‚¹åœ¨å¤„ç†å‰éƒ½è¢«çœç•¥æ‰äº†ã€‚ ICPåœ¨è¿™é‡Œç”¨äºåœ¨ä½å§¿å›¾ä¸­çš„èŠ‚ç‚¹ä¹‹é—´æ·»åŠ çº¦æŸã€‚ç„¶åä½¿ç”¨ iSAM2 [24] ä¼˜åŒ–è¯¥å›¾ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼˜åŒ–åçš„å›¾æ¥æ ¡æ­£ä¼ æ„Ÿå™¨ä½å§¿å’Œåœ°å›¾ã€‚æ›´å¤šé—­ç¯æµ‹è¯•å¯ä»¥åœ¨è§†é¢‘é™„ä»¶ä¸­æ‰¾åˆ°ã€‚</p>
<p><img src="/images/LeGO-LOAMè®ºæ–‡ç¿»è¯‘/image-20220427111714790.png" alt="image-20220427111714790" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ 10ï¼šLeGO-LOAMï¼ŒKITTI æ•°æ®é›†é—­ç¯æµ‹è¯•ï¼Œä½¿ç”¨ Jetsonã€‚é¢œè‰²å˜åŒ–è¡¨ç¤ºæµ·æ‹”å˜åŒ–ã€‚</p>
</blockquote>
<h1 id="â…¤-ç»“è®ºä¸è®¨è®º"><a href="#â…¤-ç»“è®ºä¸è®¨è®º" class="headerlink" title="â…¤.ç»“è®ºä¸è®¨è®º"></a>â…¤.ç»“è®ºä¸è®¨è®º</h1><p>æˆ‘ä»¬æå‡ºäº† LeGO-LOAMï¼Œä¸€ç§è½»é‡çº§å’Œåœ°é¢ä¼˜åŒ–çš„æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡å’Œå»ºå›¾æ–¹æ³•ï¼Œç”¨äºåœ¨å¤æ‚ç¯å¢ƒä¸­æ‰§è¡Œ UGV çš„å®æ—¶å§¿æ€ä¼°è®¡ã€‚ LeGO-LOAM æ˜¯è½»é‡çº§çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸Šä½¿ç”¨å¹¶å®ç°å®æ—¶æ€§èƒ½ã€‚LeGO-LOAM ä¹Ÿæ˜¯åœ°é¢ä¼˜åŒ–çš„ï¼Œåˆ©ç”¨åœ°é¢åˆ†ç¦»ã€ç‚¹äº‘åˆ†å‰²å’Œæ”¹è¿›çš„ L-M ä¼˜åŒ–ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­è¿‡æ»¤æ‰å¯èƒ½ä»£è¡¨ä¸å¯é ç‰¹å¾çš„æ— ä»·å€¼ç‚¹ã€‚ä¸¤æ­¥ L-M ä¼˜åŒ–åˆ†åˆ«è®¡ç®—å§¿åŠ¿å˜æ¢çš„ä¸åŒåˆ†é‡ã€‚æ‰€æå‡ºçš„æ–¹æ³•åœ¨å®¤å¤–ç¯å¢ƒä¸­æ”¶é›†çš„ä¸€ç³»åˆ— UGV æ•°æ®é›†ä¸Šè¿›è¡Œäº†è¯„ä¼°ã€‚ç»“æœè¡¨æ˜ï¼Œä¸æœ€å…ˆè¿›çš„ç®—æ³• LOAM ç›¸æ¯”ï¼ŒLeGO-LOAM å¯ä»¥è¾¾åˆ°ç›¸ä¼¼æˆ–æ›´å¥½çš„ç²¾åº¦ã€‚LeGO-LOAM çš„è®¡ç®—æ—¶é—´ä¹Ÿå¤§å¤§å‡å°‘ã€‚æœªæ¥çš„å·¥ä½œåŒ…æ‹¬æ¢ç´¢å…¶åœ¨å…¶ä»–ç±»å‹è½¦è¾†ä¸­çš„åº”ç”¨ã€‚å°½ç®¡ LeGO-LOAM ç‰¹åˆ«é’ˆå¯¹åœ°é¢è½¦è¾†çš„å§¿æ€ä¼°è®¡è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†å®ƒçš„åº”ç”¨å¯èƒ½ä¼šæ‰©å±•åˆ°å…¶ä»–è½¦è¾†ï¼Œä¾‹å¦‚æ— äººæœº (unmanned aerial vehiclesï¼ŒUAVs)ï¼Œåªéœ€ç¨ä½œæ”¹åŠ¨ã€‚å°† LeGO-LOAM åº”ç”¨äº UAV æ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šå‡è®¾åœ°é¢å­˜åœ¨äºæ‰«æä¸­ã€‚æ‰«æçš„ç‚¹äº‘å°†åœ¨æ²¡æœ‰åœ°é¢æå–çš„æƒ…å†µä¸‹è¢«åˆ†å‰²ã€‚å¯¹äº$ F_eã€\mathbb{F}_e$ å’Œ $\mathbb{F}_p $çš„é€‰æ‹©ï¼Œç‰¹å¾æå–è¿‡ç¨‹æ˜¯ç›¸åŒçš„ã€‚ä¸æ˜¯ä»æ ‡è®°ä¸ºåœ°é¢ç‚¹çš„ç‚¹ä¸­æå– $F_p$ çš„å¹³é¢ç‰¹å¾ï¼Œè€Œæ˜¯ä»æ‰€æœ‰åˆ†å‰²ç‚¹ä¸­é€‰æ‹© $F_p$ ä¸­çš„ç‰¹å¾ï¼Œç„¶åå°†ä½¿ç”¨åŸå§‹çš„ L-M æ–¹æ³•æ¥è·å¾—ä¸¤æ¬¡æ‰«æä¹‹é—´çš„è½¬æ¢ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸¤æ­¥ä¼˜åŒ–æ–¹æ³•ã€‚å°½ç®¡åœ¨è¿™äº›å˜åŒ–ä¹‹åè®¡ç®—æ—¶é—´ä¼šå¢åŠ ï¼Œä½† LeGO-LOAM ä»ç„¶æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸ºåœ¨åˆ†å‰²ååœ¨å˜ˆæ‚çš„å®¤å¤–ç¯å¢ƒä¸­ä¼šçœç•¥å¤§é‡çš„ç‚¹ã€‚ä¼°è®¡çš„ç‰¹å¾å¯¹åº”çš„å‡†ç¡®æ€§å¯èƒ½ä¼šæé«˜ï¼Œå› ä¸ºå®ƒä»¬å—ç›Šäºåˆ†å‰²ã€‚æ­¤å¤–ï¼Œä½¿ç”¨ LeGO-LOAM åœ¨çº¿æ‰§è¡Œå¾ªç¯é—­åˆçš„èƒ½åŠ›ä½¿å…¶æˆä¸ºé•¿æ—¶é—´å¯¼èˆªä»»åŠ¡çš„æœ‰ç”¨å·¥å…·ã€‚</p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>æ¿€å…‰SLAM</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
        <tag>LeGO-LOAM</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒã€IMUå·¥ä½œåŸç†ã€è¯¯å·®åŠå…¶æ ‡å®š</title>
    <url>/posts/19228.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬èŠ‚ä¸»è¦å¯¹IMUçš„å·¥ä½œåŸç†åšè¯¦ç»†çš„ä»‹ç»ï¼Œåˆ†æIMUä¸­çš„ç¡®å®šæ€§è¯¯å·®ä»¥åŠéšæœºè¯¯å·®ï¼Œå¹¶ç»™å‡ºè¯¯å·®æ ‡å®šçš„æ–¹æ³•ï¼Œå¦‚ç¡®å®šæ€§è¯¯å·®ä½¿ç”¨å…­é¢æ³•æ ‡å®šï¼Œéšæœºè¯¯å·®ä½¿ç”¨è‰¾ä¼¦æ–¹å·®æ ‡å®šç­‰ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="â… -æ—‹è½¬è¿åŠ¨å­¦"><a href="#â… -æ—‹è½¬è¿åŠ¨å­¦" class="headerlink" title="â… .æ—‹è½¬è¿åŠ¨å­¦"></a>â… .æ—‹è½¬è¿åŠ¨å­¦</h1><h2 id="A-çº¿é€Ÿåº¦ä¸è§’é€Ÿåº¦"><a href="#A-çº¿é€Ÿåº¦ä¸è§’é€Ÿåº¦" class="headerlink" title="A.çº¿é€Ÿåº¦ä¸è§’é€Ÿåº¦"></a>A.çº¿é€Ÿåº¦ä¸è§’é€Ÿåº¦</h2><p>å¦‚å›¾æ‰€ç¤ºï¼Œç²’å­åœ¨åæ ‡ç³»ä¸­çš„$z=h$çš„å¹³é¢å†…åšåœ†å‘¨è¿åŠ¨ï¼Œåæ ‡ä¸º$r=(a\cos\theta,a\sin\theta,h)$ï¼Œå¯¹åæ ‡æ±‚å¯¼å¾—ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot r&=(-a\dot\theta\sin\theta,a\dot\theta\cos\theta,0)^T\\
&=\begin{bmatrix}
0&-\dot\theta&0\\\dot\theta&0&0\\0&0&0
\end{bmatrix}
\begin{bmatrix}a\cos\theta\\a\sin\theta\\h\end{bmatrix}\\
&=w^{\land} r
\end{align*}\tag{1}</script><p>å…¶ä¸­$w$æ˜¯è§’é€Ÿåº¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªçŸ¢é‡ï¼Œå³$w=\begin{bmatrix}0\\0\\ \dot\theta\end{bmatrix}=\dot\theta z$,å…¶ä¸­$|\dot\theta|$æ˜¯è§’é€Ÿåº¦çš„å¤§å°ã€‚å¯¹å…¬å¼$(1)$å–æ¨¡ï¼š</p>
<script type="math/tex; mode=display">
|\dot r|=|w||r|sin\phi=a|\dot\theta|</script><p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220422093936869.png" alt="image-20220422093936869" style="zoom:50%;" /></p>
<h2 id="B-æ—‹è½¬åæ ‡ç³»ä¸‹çš„è¿åŠ¨å­¦"><a href="#B-æ—‹è½¬åæ ‡ç³»ä¸‹çš„è¿åŠ¨å­¦" class="headerlink" title="B.æ—‹è½¬åæ ‡ç³»ä¸‹çš„è¿åŠ¨å­¦"></a>B.æ—‹è½¬åæ ‡ç³»ä¸‹çš„è¿åŠ¨å­¦</h2><p>å¦‚å›¾ï¼Œè€ƒè™‘ä¸¤ä¸ªåæ ‡ç³»ï¼Œä¸€ä¸ªæ˜¯ä¸–ç•Œåæ ‡ç³»(æƒ¯æ€§åæ ‡ç³»)$W$ï¼Œå®ƒæœ¬èº«æ˜¯é™æ­¢ä¸åŠ¨çš„ï¼›ä¸€ä¸ªæ˜¯æœºå™¨äººæœ¬ä½“åæ ‡ç³»$B$ï¼Œå®ƒæœ¬èº«åœ¨åšè§’é€Ÿåº¦ä¸º$w_B$çš„çº¯æ—‹è½¬ï¼Œè®¾è´¨é‡å—åœ¨åæ ‡ç³»$B$ä¸‹åšé€Ÿåº¦ä¸º$v_B$ï¼ŒåŠ é€Ÿåº¦ä¸º$a_B$çš„åŒ€åŠ é€Ÿç›´çº¿è¿åŠ¨ï¼Œå®ƒåœ¨$B$åæ ‡ç³»ä¸‹åæ ‡ä¸º$r_B=(x_1,x_2,x_3)^T$ï¼Œè®¾ä»åæ ‡ç³»ä¸–ç•Œåæ ‡ç³»$W$åˆ°æ˜¯æœºå™¨äººæœ¬ä½“åæ ‡ç³»$B$åªè€ƒè™‘æ—‹è½¬çš„æ—¶å€™ï¼Œæ—‹è½¬çŸ©é˜µ$R_{WB}$ã€‚</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220422155242434.png" alt="image-20220422155242434"></p>
<p>è¿™é‡Œå®šä¹‰ä¸€äº›å˜é‡ï¼š</p>
<blockquote>
<p>â‘ è®¾ç‰©ä½“åœ¨åæ ‡ç³»$B$ä¸‹åšé€Ÿåº¦ä¸º$v_B$ï¼ŒåŠ é€Ÿåº¦ä¸º$a_B$ï¼Œå¯¹åº”åœ¨åæ ‡ç³»$W$ä¸‹çš„é€Ÿåº¦ä¸º$v_W$ï¼ŒåŠ é€Ÿåº¦ä¸º$a_W$</p>
<p>å¹¶ä¸”è®¾åæ ‡ç³»$B$ä¸‹çš„é€Ÿåº¦å’ŒåŠ é€Ÿåº¦åœ¨åæ ‡ç³»$W$ä¸‹çš„è¡¨ç¤ºåˆ†åˆ«ä¸ºï¼š$v=R_{WB}v_B$ï¼Œ$a=R_{WB}a_B$ï¼Œä¸€å®šæ³¨æ„è¿™é‡Œçš„$v\ne v_W,a\ne a_W$</p>
<p>â‘¡è®¾åæ ‡è½´$B$æ—‹è½¬çš„è§’é€Ÿåº¦ä¸º$w_B$ï¼Œå¯¹åº”åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­å…¶æ—‹è½¬çš„è§’é€Ÿåº¦å˜ä¸º$w_W$ï¼Œä¸”$w_W=R_{WB}w_B$</p>
<p>â‘¢è®¾ç‰©ä½“åœ¨åæ ‡ç³»$B$ä¸‹çš„åæ ‡ä¸º$r_B$ï¼Œå¯¹åº”åœ¨åæ ‡ç³»$W$ä¸‹çš„åæ ‡ä¸º$r_W$ï¼Œä¸”$r_W=R_{WB}r_B$</p>
</blockquote>
<p>åˆ™å¯¹åº”åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
r_W(t)=x_1(t)i+x_2(t)j+x_3(t)k=R_{WB}r_B</script><p>ä¸€èˆ¬ç®€å†™ä¸ºï¼š$r_B=x_ie_i$</p>
<p>ç»è¿‡ä¸€ç•ªå®šä¹‰ä¹‹åï¼Œæˆ‘ä»¬è€ƒè™‘å‡ ä¸ªé—®é¢˜:</p>
<ul>
<li><strong>æ±‚ç‰©ä½“åœ¨$W$åæ ‡ç³»ä¸‹çš„é€Ÿåº¦</strong></li>
</ul>
<p>å¯¹æ—¶é—´æ±‚å¯¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot r_W=v_W&=R_{WB}\dot r_B+\dot R_{WB} r_B\\
&=R_{WB}v_B+w_W^{\land} r_W \ \ \ \ å‚è§å…¬å¼(3) \\ 
&=v+w_W^{\land} r_W\Leftrightarrow v=v_W-w_W^{\land} r_W\\
\end{align*}\tag{2}</script><p>å…¶ä¸­$w_W=R_{WB}w_b$è¡¨ç¤ºbodyåæ ‡ç³»$B$çš„è§’é€Ÿåº¦åœ¨ä¸–ç•Œåæ ‡ç³»$W$ä¸‹çš„è¡¨ç¤ºã€‚å…·ä½“æ¨å¯¼å‚è§å…¬å¼$(3)$.</p>
<p>è¿™é‡Œå¯ä»¥æ˜æ˜¾çœ‹å‡º$v\ne v_W$ï¼Œä¸¤è€…ä¹‹é—´ç›¸å·®ä¸€ä¸ª$w_W^{\land} r_W$é¡¹ã€‚</p>
<hr>
<p>æ¨å¯¼$\dot R_{WB} r_B$ï¼Œä½¿ç”¨å³ä¹˜æ‰°åŠ¨æ¨¡å‹:</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot R_{WB} r_B&=\underset{\Delta t \rightarrow0}{lim}\frac{R_{WB}\exp([w_B\Delta t]^{\land})r_B-R_{WB}r_B}{\Delta t}\\
&\approx\underset{\Delta t \rightarrow0}{lim}\frac{R_{WB}(I+[w_B\Delta t]^{\land})r_B-R_{WB}r_B}{\Delta t}\\
&=\underset{\Delta t \rightarrow0}{lim}\frac{R_{WB}[w_B\Delta t]^{\land}r_B}{\Delta t}\\
&=\underset{\Delta t \rightarrow0}{lim}\frac{-R_{WB}r_B^{\land}[w_B\Delta t]}{\Delta t}\\
&=-R_{WB}r_B^{\land}w_B\\ 
&=R_{WB}w_B^{\land}r_B\\
&=(R_{WB}w_B)^{\land}R_{WB}r_B\\
&=w^{\land}_Wr_W
\end{align*}\tag{3}</script><hr>
<ul>
<li><strong>æ±‚ç‰©ä½“åœ¨$W$åæ ‡ç³»ä¸‹çš„åŠ é€Ÿåº¦</strong></li>
</ul>
<p>å¯¹æ—¶é—´æ±‚å¯¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\ddot r_W =\dot v_W = a_W&=\frac{d(R_{WB}v_B+w_W^{\land}\dot r_W)}{dt}\\
&=R_{WB}\dot v_B+\dot R_{WB} v_B+w_W^{\land}\dot r_W+\dot w_W^{\land}r_W\\
&=a+w^{\land}v+(w^{\land}v+w^{\land}(w^{\land} r_W))+\dot w^{\land}r_W\\
&=a+2w^{\land}v+w^{\land}(w^{\land} r_W)+\dot w^{\land}r_W\\
\end{align*}\tag{4}</script><p>ä¸Šå¼çš„æ¯ä¸€é¡¹çš„æ¨å¯¼è§ä¸‹é¢ã€‚è¿™é‡Œå¯ä»¥æ˜æ˜¾çœ‹å‡º$a\ne a_W$ï¼Œä¸¤è€…ä¹‹é—´ç›¸å·®ä¸‰ä¸ªé¡¹ï¼Œåˆ†åˆ«æ˜¯<strong>ç§‘æ°åŠ›ï¼š$2w^{\land}v$ï¼Œç¦»å¿ƒåŠ›ï¼š$w^{\land}(w^{\land} r_W)$ã€æ¬§æ‹‰åŠ›ï¼š$\dot w^{\land}r_W$ã€‚</strong></p>
<hr>
<ul>
<li>ç¬¬ä¸€é¡¹ï¼š</li>
</ul>
<script type="math/tex; mode=display">
R_{WB}\dot v_B=R_{WB}a_B=a</script><ul>
<li>ç¬¬äºŒé¡¹ï¼š</li>
</ul>
<p>å‚è€ƒå…¬å¼$(3)$ï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥æ¨å‡ºæ¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot R_{WB} v_B&=\underset{\Delta t \rightarrow0}{lim}\frac{R_{WB}\exp([w_B\Delta t]^{\land})v_B-R_{WB}v_B}{\Delta t}\\

&=(R_{WB}w_B)^{\land}R_{WB}r_B\\
&=w^{\land}_Wv
\end{align*}</script><ul>
<li>ç¬¬ä¸‰é¡¹ï¼š</li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
w_W^{\land}\dot r_W&=w_W^{\land}(v+w_W^{\land}r_W)\\
&=w_W^{\land}v+w_W^{\land}(w_W^{\land}r_W)
\end{align*}</script><hr>
<p><strong>æ•´ä¸ªè¿‡ç¨‹çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>æˆ‘ä»¬åœ¨<strong>å·²çŸ¥$B$åæ ‡ç³»ä¸‹çš„ç‰©ä½“çš„åŠ é€Ÿåº¦ã€é€Ÿåº¦ä»¥åŠæ—‹è½¬è½´çš„è§’é€Ÿåº¦</strong>ï¼Œï¼ˆè¿™é‡Œçš„Bå°±æ˜¯æˆ‘ä»¬ä»Šå¤©çš„â€IMUâ€ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ±‚å¾—å¯¹åº”ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ç›¸åº”çš„ç‰©ç†é‡ï¼Œé‚£ä¹ˆç›¸åº”çš„æ±‚å¯ä»¥æ±‚å¾—ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä½å§¿ï¼ˆé€Ÿåº¦ç§¯åˆ†å¾—åˆ°ä½å§¿ï¼‰ã€å››å…ƒæ•°ï¼ˆæ ¹æ®è§’é€Ÿåº¦ï¼‰ã€‚</p>
<p>å¤§ç¯‡å¹…åœ°ä»‹ç»è¿™ä¸ªæ¡ˆä¾‹ï¼Œä¸»è¦æ˜¯ä½¿è¯»è€…æ˜ç™½ï¼Œä¸‰ç»´ä¸–ç•Œä¸­çš„è¿åŠ¨ç‰©ä½“ï¼Œåœ¨æ—‹è½¬çš„åæ ‡ç³»ä¸‹ï¼ˆIMUåæ ‡ç³»ï¼‰,å¦‚ä½•å°†å…¶çŠ¶æ€é‡è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹ã€‚ä»¥åŠè½¬æ¢ä¹‹åå„ä¸ªçŠ¶æ€é‡å¤šå‡ºæ¥äº†ä»€ä¹ˆï¼Ÿ</p>
<h1 id="â…¡-IMU-å·¥ä½œåŸç†"><a href="#â…¡-IMU-å·¥ä½œåŸç†" class="headerlink" title="â…¡.IMU å·¥ä½œåŸç†"></a>â…¡.IMU å·¥ä½œåŸç†</h1><h2 id="A-åŠ é€Ÿåº¦è®¡å·¥ä½œåŸç†"><a href="#A-åŠ é€Ÿåº¦è®¡å·¥ä½œåŸç†" class="headerlink" title="A.åŠ é€Ÿåº¦è®¡å·¥ä½œåŸç†"></a>A.åŠ é€Ÿåº¦è®¡å·¥ä½œåŸç†</h2><p>æµ‹é‡åŸç†å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„è´¨é‡å— + å¼¹ç°§ + æŒ‡ç¤ºè®¡æ¥è¡¨ç¤º:</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220422191601477.png" alt="image-20220422191601477.png" style="zoom:33%;" /></p>
<p>æ³¨æ„è¿™é‡Œçš„åŠ é€Ÿåº¦è®¡æµ‹é‡å€¼$a_m$ä¸ºå¼¹ç°§æ‹‰åŠ›å¯¹åº”çš„åŠ é€Ÿåº¦ï¼Œæ‰€ä»¥æœ‰ï¼š</p>
<script type="math/tex; mode=display">
a_m=\frac{f}{m}=a-g\tag{5}</script><p>å…¶ä¸­$f $ä¸ºå¼¹ç°§æ‹‰åŠ›ï¼Œ$a$ ä¸ºç‰©ä½“åœ¨æƒ¯æ€§ç³»ä¸‹çš„åŠ é€Ÿåº¦ï¼Œ$g$ä¸ºé‡åŠ›åŠ é€Ÿåº¦ã€‚</p>
<p>å¦å¤–ï¼Œå®é™…çš„åŠ é€Ÿåº¦è®¡å¤§éƒ½æ˜¯$MEMS $åŠ é€Ÿåº¦è®¡ï¼Œå®ƒåˆ©ç”¨ç”µå®¹æˆ–è€…ç”µé˜»æ¡¥æ¥ç­‰åŸç†æ¥æµ‹é‡$ a_m$</p>
<p>å…¶åŸç†å¯ä»¥å‚è€ƒï¼š<a href="https://m.elecfans.com/article/596137.html"><strong>MEMS åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨çš„åŸç†ä¸æ„é€ ä»‹ç»</strong></a></p>
<p>é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬å‡è®¾åœ°çƒè¡¨é¢ä¸ºæƒ¯æ€§å‚è€ƒç³»ï¼Œä½†æ˜¯å¯¹äºé«˜ç«¯çš„æµ‹é‡å•å…ƒæ¥è¯´ï¼Œè¿™ç§ç²¾åº¦è¿œè¿œä¸å¤Ÿï¼ˆéœ€è¦è€ƒè™‘åœ°çƒè‡ªè½¬çš„å½±å“ï¼‰ï¼Œæ‰€ä»¥å°±å°†æƒ¯æ€§å‚è€ƒç³»çš„åŸç‚¹è®°ä¸ºåœ°çƒçš„è´¨å¿ƒï¼Œè€Œä½äºåœ°çƒè¡¨é¢çš„åæ ‡ç³»ç§°ä¸ºåœ°é¢å‚è€ƒç³»æˆ–ä¸œåŒ—å¤©åæ ‡ç³»ï¼ˆENUåæ ‡ç³»ï¼‰, å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚åœ¨æ­¤åæ ‡ç³»ä¸‹$g=(0,0,-9.81)^T$</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220422192532908.png" alt="image-20220422192532908.png" style="zoom:33%;" /></p>
<p>å‡è®¾ IMU åæ ‡ç³»å°±æ˜¯ ENU åæ ‡ç³»ï¼Œ$R_{WB }= I$ï¼Œé™æ­¢æ—¶æœ‰$a=0,a_m=-g$ï¼Œè‡ªç”±è½ä½“æ—¶æœ‰$a=g,a_m=0$</p>
<h2 id="B-é™€èºä»ªæµ‹é‡åŸç†"><a href="#B-é™€èºä»ªæµ‹é‡åŸç†" class="headerlink" title="B.é™€èºä»ªæµ‹é‡åŸç†"></a>B.é™€èºä»ªæµ‹é‡åŸç†</h2><p>é™€èºä»ªä¾¦æµ‹çš„æ˜¯è§’é€Ÿåº¦ã€‚å…¶å·¥ä½œåŸç†åŸºäºç§‘é‡Œå¥¥åˆ©åŠ›çš„åŸç†ï¼šå½“ä¸€ä¸ªç‰©ä½“åœ¨åæ ‡ç³»ä¸­ç›´çº¿ç§»åŠ¨æ—¶ï¼Œå‡è®¾åæ ‡ç³»åšä¸€ä¸ªæ—‹è½¬ï¼Œé‚£ä¹ˆåœ¨æ—‹è½¬çš„è¿‡ç¨‹ä¸­ï¼Œç‰©ä½“ä¼šæ„Ÿå—åˆ°ä¸€ä¸ªå‚ç›´çš„åŠ›å’Œå‚ç›´æ–¹å‘çš„åŠ é€Ÿåº¦ã€‚</p>
<p>æŒ‰æµ‹é‡åŸç†åˆ†æœ‰<strong>æŒ¯åŠ¨é™€èº</strong>ï¼Œ<strong>å…‰çº¤é™€èº</strong>ç­‰ã€‚</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/é™€èºä»ª.gif" alt="é™€èºä»ª.gif"></p>
<p>ä½ç«¯ MEMS é™€èºä¸Šä¸€èˆ¬é‡‡ç”¨æŒ¯åŠ¨é™€èºåŸç†ï¼Œé€šè¿‡æµ‹é‡ ç§‘æ°åŠ›ï¼ˆCoriolis force ï¼‰æ¥é—´æ¥å¾—åˆ°è§’é€Ÿåº¦ã€‚MEMS é™€èºä»ªï¼šä¸€ä¸ªä¸»åŠ¨è¿åŠ¨è½´ + ä¸€ä¸ªæ•æ„Ÿè½´ï¼Œæ¯”å¦‚ï¼Œå¦‚å›¾ç¤ºï¼Œé«˜é€Ÿè¿åŠ¨çš„ç‰©ä½“é€Ÿåº¦ä¸º$v$ï¼Œåœ¨æ—‹è½¬åæ ‡ç³»ä¸‹ï¼Œç‰©ä½“ä¼šå—åˆ°ç§‘æ°åŠ›çš„å½±å“ï¼Œæˆ‘ä»¬é€šè¿‡æ±‚ç§‘æ°åŠ›å°±å¯ä»¥æ±‚å¾—è§’é€Ÿåº¦$w$çš„å¤§å°ã€‚</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220422195814350.png" alt="image-20220422195814350.png" style="zoom:33%;" /></p>
<p>ä½†æ˜¯å®é™…åˆ¶ä½œçš„è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¸åªæ˜¯ä½¿ç”¨ä¸€ä¸ªè´¨é‡å—ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸¤ä¸ªè´¨é‡å—ï¼Œå°±æ˜¯<strong>éŸ³å‰é™€èºä»ª</strong>ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå‰å­çš„ä¸­é—´ä¸ºæ—‹è½¬è½´ï¼Œå‰å­å·¦å³ä¸¤ä¸ªè´¨é‡å—ï¼Œåšæ–¹åçš„æ­£å¼¦è¿åŠ¨ï¼Œè´¨é‡å—å—åˆ°çš„ç§‘æ°åŠ›æ–¹å‘ç›¸åã€‚</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/20210905220130.png" alt="20210905220130.png" style="zoom: 33%;" /></p>
<p>å½“ä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„è´¨é‡å—çš„è¿åŠ¨æ–¹å‘ç›¸åï¼Œä½†æ˜¯æ—‹è½¬ç›¸åŒçš„æ—¶å€™ï¼Œå®ƒä»¬å°±ä¼šå—åˆ°ç›¸åçš„ç§‘æ°åŠ›ä»¥åŠç›¸åŒçš„å¤–éƒ¨åŠ é€Ÿåº¦å½±å“åŠ›ã€‚å°†ä¸¤ä¸ªè´¨é‡å—æ‰€å—åˆ°è¯¥æ–¹å‘ä¸Šçš„åŠ›åšå·®ï¼Œå°±ä¼šå¾—åˆ°ä¸¤å€çš„ç§‘æ°åŠ›ã€‚</p>
<p><strong>ä½†æ˜¯ä¸ºå•¥è¦ç”¨è¿™ä¹ˆåšå‘¢? ä¸€ä¸ªè´¨é‡å—ä¸è¡Œä¹ˆï¼Ÿ</strong></p>
<p>â‘ åˆ©ç”¨äºŒå€çš„ç§‘æ°åŠ›å¯¹åº”çš„ç”µå‹æŒ‡æ•°æ›´å¤§ï¼Œæµ‹é‡ä¹Ÿå˜å¾—æ›´å‡†ç¡®ï¼›â‘¡å› ä¸ºæœ‰å¯èƒ½åœ¨ç§‘æ°åŠ›æ–¹å‘ä¸Šç‰©ä½“æœ¬èº«å…·æœ‰ä¸€å®šçš„åŠ é€Ÿåº¦ï¼Œæ‰€ä»¥åˆ©ç”¨éŸ³å‰é™€èºä»ªæ„æˆå·®åˆ†æ¨¡å‹ï¼Œå¯ä»¥å°†ä¸¤ä¸ªå¤–éƒ¨åŠ›ç›¸äº’æŠµæ¶ˆï¼ˆç§‘æ°åŠ›æ–¹å‘ç‰©ä½“æœ¬èº«çš„åŠ é€Ÿåº¦ï¼‰ï¼Œæ¶ˆé™¤è‡ªèº«çš„å½±å“ï¼Œæ˜¯çš„è·å¾—çš„ç§‘æ°åŠ›æ›´å‡†ã€‚</p>
<p>ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œä¸¤ä¸ªè´¨é‡å—ä¸å¯èƒ½å®Œå…¨ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´é™€èºä»ªçš„æµ‹é‡å¯èƒ½ä¼šå—åˆ°å¤–éƒ¨åŠ é€Ÿåº¦çš„å½±å“ï¼Œå³å¸¸ç§°çš„ <strong>G-sensitivity</strong>ï¼Œä¸€èˆ¬çš„IMUæ‰‹å†Œé‡Œé¢éƒ½ä¼šæœ‰è¿™ä¸ªæŒ‡æ•°ï¼Œå®ƒçš„å«ä¹‰å°±æ˜¯å‘Šè¯‰ä½ IMUå—åŠ é€Ÿåº¦å½±å“çš„ç³»æ•°æœ‰å¤šå¤§ã€‚</p>
<h1 id="â…¢-IMU-ä¸­çš„è¯¯å·®åŠå…¶æ ‡å®š"><a href="#â…¢-IMU-ä¸­çš„è¯¯å·®åŠå…¶æ ‡å®š" class="headerlink" title="â…¢.IMU ä¸­çš„è¯¯å·®åŠå…¶æ ‡å®š"></a>â…¢.IMU ä¸­çš„è¯¯å·®åŠå…¶æ ‡å®š</h1><p>è¯¯å·®çš„åˆ†ç±»ï¼šåŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªçš„è¯¯å·®å¯ä»¥åˆ†ä¸ºï¼šç¡®å®šæ€§è¯¯å·®ä»¥åŠéšæœºçš„è¯¯å·®ï¼Œç¡®å®šæ€§çš„è¯¯å·®ä¸€èˆ¬æ˜¯äº‹å…ˆé€šè¿‡æ ‡å®šç¡®å®šï¼Œä½†æ˜¯éšæœºè¯¯å·®é€šå¸¸æƒ…å†µä¸‹å‡è®¾å™ªå£°æœä»çš„æ˜¯é«˜æ–¯åˆ†å¸ƒã€‚</p>
<h2 id="A-ç¡®å®šæ€§è¯¯å·®ä¸æ ‡å®š"><a href="#A-ç¡®å®šæ€§è¯¯å·®ä¸æ ‡å®š" class="headerlink" title="A.ç¡®å®šæ€§è¯¯å·®ä¸æ ‡å®š"></a>A.ç¡®å®šæ€§è¯¯å·®ä¸æ ‡å®š</h2><h3 id="1-ç¡®å®šæ€§è¯¯å·®"><a href="#1-ç¡®å®šæ€§è¯¯å·®" class="headerlink" title="1.ç¡®å®šæ€§è¯¯å·®"></a>1.ç¡®å®šæ€§è¯¯å·®</h3><ul>
<li><strong>Bias</strong></li>
</ul>
<p>ç†è®ºä¸Šï¼Œå½“æ²¡æœ‰å¤–éƒ¨ä½œç”¨æ—¶ï¼ŒIMU ä¼ æ„Ÿå™¨çš„è¾“å‡ºåº”è¯¥ä¸º$0$ã€‚ä½†æ˜¯ï¼Œå®é™…æ•°æ®å­˜åœ¨ä¸€ä¸ªåç½®$ b$ã€‚åŠ é€Ÿåº¦è®¡ bias å¯¹ä½å§¿ä¼°è®¡çš„å½±å“ï¼š</p>
<script type="math/tex; mode=display">
v_{err}=b_at,\ \ \ p_{err}=\frac{1}{2}b_at^2</script><p>è¿™é‡Œçš„$p_{err}$æŒ‡çš„æ˜¯ä½ç§»ï¼Œå› ä¸ºæœ‰æ—¶é—´$t$çš„å­˜åœ¨ï¼Œä¸ºäº†åŒºåˆ†ï¼Œå°†ä½ç§»å®šä¹‰ä¸º$p$.</p>
<ul>
<li><strong>Scale(åˆ»åº¦ç³»æ•°è¯¯å·®)</strong></li>
</ul>
<p>scale å¯ä»¥çœ‹æˆæ˜¯å®é™…æ•°å€¼å’Œä¼ æ„Ÿå™¨è¾“å‡ºå€¼ä¹‹é—´çš„æ¯”å€¼ã€‚</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220422204953295.png" alt="image-20220422204953295.png" style="zoom:33%;" /></p>
<ul>
<li><strong>Nonorthogonality/Misalignment Errors(å®‰è£…è¯¯å·®)</strong></li>
</ul>
<p>ç‰¹åˆ«çš„åœ¨å¤šè½´çš„IMUä¼ æ„Ÿå™¨ä¸­ï¼Œç”±äºåˆ¶ä½œå·¥è‰ºçš„é—®é¢˜ï¼Œæœ‰å¯èƒ½å¯¹å¯¼è‡´$xyz$è½´å¹¶ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰çš„æ­£äº¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ$z$è½´å¹¶ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šä¸$xOy$å¹³é¢å‚ç›´ï¼Œåˆ™ä¼šå½±å“å¯¹åº”çš„$x,y$ä¸Šçš„åˆ†é‡ã€‚</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220422204127003.png" alt="image-20220422204127003.png" style="zoom:33%;" /></p>
<p>åŠ ä¸Šä¹‹å‰çš„scaleçš„å½±å“ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
scale+Misalignment:&\\
&\begin{bmatrix}
l_{ax}\\l_{ay}\\l_{az}
\end{bmatrix}=
\begin{bmatrix}
s_{xx}&m_{xy}&m_{xz}\\
m_{yx}&s_{yy}&m_{yz}\\
m_{zx}&m_{zy}&s_{zz}
\end{bmatrix}
\begin{bmatrix}
a_{x}\\a_{y}\\a_{z}
\end{bmatrix}
\end{align*}</script><h3 id="2-ç¡®å®šæ€§è¯¯å·®çš„æ ‡å®š"><a href="#2-ç¡®å®šæ€§è¯¯å·®çš„æ ‡å®š" class="headerlink" title="2.ç¡®å®šæ€§è¯¯å·®çš„æ ‡å®š"></a>2.ç¡®å®šæ€§è¯¯å·®çš„æ ‡å®š</h3><h4 id="å…­é¢æ³•æ ‡å®šåŠ é€Ÿåº¦è®¡å’Œé™€èºä»ª"><a href="#å…­é¢æ³•æ ‡å®šåŠ é€Ÿåº¦è®¡å’Œé™€èºä»ª" class="headerlink" title="å…­é¢æ³•æ ‡å®šåŠ é€Ÿåº¦è®¡å’Œé™€èºä»ª"></a>å…­é¢æ³•æ ‡å®šåŠ é€Ÿåº¦è®¡å’Œé™€èºä»ª</h4><p>å…­é¢æ³•æ˜¯æŒ‡å°†åŠ é€Ÿåº¦è®¡çš„ 3 ä¸ªè½´åˆ†åˆ«æœä¸Šæˆ–è€…æœä¸‹æ°´å¹³æ”¾ç½®ä¸€æ®µæ—¶é—´ï¼Œé‡‡é›† 6 ä¸ªé¢çš„æ•°æ®å®Œæˆæ ‡å®šã€‚<br>å¦‚æœå„ä¸ªè½´éƒ½æ˜¯æ­£äº¤çš„ï¼Œé‚£å¾ˆå®¹æ˜“å¾—åˆ° bias å’Œ scaleï¼š</p>
<p>å› ä¸ºé™æ­¢çŠ¶æ€ä¸‹ï¼Œå‘ä¸Šå’Œå‘ä¸‹æ‰€å¾—åˆ°IMUçš„ç¤ºæ•°ç›¸åŠ æ­£å¥½æŠµæ¶ˆæ‰äº†é‡åŠ›çš„å½±å“ï¼Œæ‰€ä»¥ä¸¤æ¬¡æµ‹é‡ç›¸åŠ å¾—åˆ°ä¸¤å€çš„biasï¼›</p>
<p>å‘ä¸Šå’Œå‘ä¸‹æ‰€å¾—åˆ°IMUçš„ç¤ºæ•°ç›¸å‡å¯ä»¥æŠµæ¶ˆbias;</p>
<script type="math/tex; mode=display">
b=\frac{l^{up}_f+l^{down}_f}{2}\\
S=\frac{l^{up}_f-l^{down}_f}{2g}\tag{6}</script><p>å…¶ä¸­ï¼Œ$l $ä¸ºåŠ é€Ÿåº¦è®¡æŸä¸ªè½´çš„æµ‹é‡å€¼ï¼Œ$g$ ä¸ºå½“åœ°çš„é‡åŠ›åŠ é€Ÿåº¦</p>
<p><strong>è€ƒè™‘è½´é—´è¯¯å·®çš„æ—¶å€™ï¼Œå®é™…åŠ é€Ÿåº¦å’Œæµ‹é‡å€¼ä¹‹é—´çš„å…³ç³»ä¸ºï¼š</strong></p>
<p>å½“è€ƒè™‘è½´é—´çš„è¯¯å·®çš„æ—¶å€™ï¼Œå°±å˜æˆ$L = S Â· a + b$ï¼Œå…¶ä¸­$S$ä¸º$3\times3$çš„çŸ©é˜µï¼Œ</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
l_{ax}\\l_{ay}\\l_{az}
\end{bmatrix}=
\begin{bmatrix}
s_{xx}&m_{xy}&m_{xz}\\
m_{yx}&s_{yy}&m_{yz}\\
m_{zx}&m_{zy}&s_{zz}
\end{bmatrix}
\begin{bmatrix}
a_{x}\\a_{y}\\a_{z}
\end{bmatrix}+
\begin{bmatrix}
b_{ax}\\b_{ay}\\b_{az}
\end{bmatrix}\tag{7}</script><p>æ°´å¹³æ”¾ç½®$6$é¢ï¼Œå°±ä¼šå¾—åˆ°$6$ä¸ª$a$å‘é‡ï¼ŒåŠ é€Ÿåº¦çš„ç†è®ºå€¼ä¸º</p>
<script type="math/tex; mode=display">
a_1=\begin{bmatrix}
g\\0\\0
\end{bmatrix},
a_2=\begin{bmatrix}
-g\\0\\0
\end{bmatrix},
a_3=\begin{bmatrix}
0\\g\\0
\end{bmatrix},
a_4=\begin{bmatrix}
0\\-g\\0
\end{bmatrix},
a_5=\begin{bmatrix}
0\\0\\g
\end{bmatrix},
a_6=\begin{bmatrix}
0\\0\\-g
\end{bmatrix}</script><p>å¯¹åº”çš„$L$ä¸º$L=\begin{bmatrix}l_1&amp;l_2&amp;l_3&amp;l_4&amp;l_5&amp;l_6\end{bmatrix}$</p>
<p>åœ¨å¾—çŸ¥å…­ç»„æ•°æ®$(a_1,l_1)â€¦(a_6.l_6)$ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨æœ€å°äºŒä¹˜å°±å¯ä»¥å¾—å‡º$S$å’Œ$b$çš„å…·ä½“å€¼ã€‚çº¿æ€§æœ€å°äºŒä¹˜å¯ä»¥å‚è€ƒï¼š<a href="https://lukeyalvin.top/2022/04/04/%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95/">çº¿æ€§æœ€å°äºŒä¹˜</a></p>
<p><strong>åŒç†é™€èºä»ªçš„å…­é¢æ³•æ ‡å®šä¸å…¶ç±»ä¼¼ï¼Œå’ŒåŠ é€Ÿåº¦è®¡å…­é¢æ³•ä¸åŒçš„æ˜¯ï¼Œé™€èºä»ªçš„çœŸå®å€¼ç”±é«˜ç²¾åº¦è½¬å°æä¾›ï¼Œè¿™é‡Œçš„$6 $é¢æ˜¯æŒ‡å„ä¸ªè½´é¡ºæ—¶é’ˆå’Œé€†æ—¶é’ˆæ—‹è½¬ã€‚</strong></p>
<h4 id="æ¸©åº¦ç›¸å…³çš„å‚æ•°æ ‡å®š"><a href="#æ¸©åº¦ç›¸å…³çš„å‚æ•°æ ‡å®š" class="headerlink" title="æ¸©åº¦ç›¸å…³çš„å‚æ•°æ ‡å®š"></a>æ¸©åº¦ç›¸å…³çš„å‚æ•°æ ‡å®š</h4><p>ç›®çš„ï¼šè¿™ä¸ªæ ‡å®šçš„ä¸»è¦ç›®çš„æ˜¯å¯¹ä¼ æ„Ÿå™¨ä¼°è®¡çš„ bias å’Œ scale è¿›è¡Œæ¸©åº¦è¡¥å¿ï¼Œè·å–ä¸åŒæ¸©åº¦æ—¶ bias å’Œ scale çš„å€¼ï¼Œç»˜åˆ¶æˆæ›²çº¿ã€‚</p>
<p>ä¸¤ç§æ ‡å®šæ–¹æ³•ï¼š</p>
<ul>
<li>soak methodï¼šæ§åˆ¶æ’æ¸©å®¤çš„æ¸©åº¦å€¼ï¼Œç„¶åè¯»å–ä¼ æ„Ÿå™¨æ•°å€¼è¿›è¡Œæ ‡å®šã€‚</li>
<li>ramp methodï¼šè®°å½•ä¸€æ®µæ—¶é—´å†…çº¿æ€§å‡æ¸©å’Œé™æ¸©æ—¶ä¼ æ„Ÿå™¨çš„æ•°æ®æ¥è¿›è¡Œæ ‡å®šã€‚</li>
</ul>
<h2 id="B-éšæœºè¯¯å·®ä¸æ ‡å®š"><a href="#B-éšæœºè¯¯å·®ä¸æ ‡å®š" class="headerlink" title="B.éšæœºè¯¯å·®ä¸æ ‡å®š"></a>B.éšæœºè¯¯å·®ä¸æ ‡å®š</h2><h3 id="1-éšæœºè¯¯å·®"><a href="#1-éšæœºè¯¯å·®" class="headerlink" title="1.éšæœºè¯¯å·®"></a>1.éšæœºè¯¯å·®</h3><h4 id="é«˜æ–¯ç™½å™ªå£°"><a href="#é«˜æ–¯ç™½å™ªå£°" class="headerlink" title="é«˜æ–¯ç™½å™ªå£°"></a>é«˜æ–¯ç™½å™ªå£°</h4><p>IMU æ•°æ®<strong>è¿ç»­æ—¶é—´</strong>ä¸Šå—åˆ°ä¸€ä¸ªå‡å€¼ä¸º$ 0$ï¼Œæ–¹å·®ä¸º$\sigma$ï¼Œå„æ—¶åˆ»ä¹‹é—´ç›¸äº’ç‹¬ç«‹çš„é«˜æ–¯è¿‡ç¨‹$ n(t)$ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&E[n(t)]\equiv0\\
&E[n(t_1)n(t_2)]=\sigma^2\delta(t_1-t_2)
\end{align*}\tag{8}</script><p>å…¶ä¸­$\delta()$è¡¨ç¤ºç‹„æ‹‰å…‹å‡½æ•°ã€‚</p>
<p>å®é™…ä¸Šï¼ŒIMU ä¼ æ„Ÿå™¨è·å–çš„æ•°æ®ä¸º<strong>ç¦»æ•£é‡‡æ ·</strong>ï¼Œç¦»æ•£å’Œè¿ç»­é«˜æ–¯ç™½å™ªå£°çš„æ–¹å·®ä¹‹é—´å­˜åœ¨å¦‚ä¸‹è½¬æ¢å…³ç³»ï¼š</p>
<p>å®šä¹‰$n_d[k]$</p>
<script type="math/tex; mode=display">
\begin{align*}
n_d[k]\triangleq n(t_0+t_1)â‰ƒ\frac{1}{\Delta t}\int^{t_0+\Delta t}_{t_0}{n(\tau)}dt
\end{align*}</script><p>å¯¹å…¶æ±‚æ–¹å·®$Var(X)=E[(X-\mu)^2]$,å·²çŸ¥å‡å€¼ä¸º$0$ï¼Œ$X=n_d[k]$ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
E(n_d[k]^2)&=E(\frac{1}{\Delta t^2}\int^{t_0+\Delta t}_{t_0}\int^{t_0+\Delta t}_{t_0}{n(\tau)}{n(t)}d\tau dt)\\
&=E(\frac{\sigma^2}{\Delta t^2}\int^{t_0+\Delta t}_{t_0}\int^{t_0+\Delta t}_{t_0}{\delta(t-\tau)}d\tau dt)\\
&=E(\frac{\sigma^2}{\Delta t})
\end{align*}\tag{9}</script><p>å¯¹åº”ç›¸ç­‰ï¼Œå¯å¾—ï¼š</p>
<script type="math/tex; mode=display">
n_d[k]=\sigma_dw[k]\tag{10}</script><p>å…¶ä¸­ï¼Œ</p>
<script type="math/tex; mode=display">
w[k]\sim N(0,1)\\
\sigma_d=\sigma\frac{1}{\sqrt{\Delta t} }\tag{11}</script><p><strong>ä¹Ÿå°±æ˜¯è¯´é«˜æ–¯ç™½å™ªå£°çš„è¿ç»­æ—¶é—´åˆ°ç¦»æ•£æ—¶é—´ä¹‹é—´å·®ä¸€ä¸ª$\frac{1}{\sqrt{\Delta t} }$ ï¼Œ$\sqrt{\Delta t} $æ˜¯ä¼ æ„Ÿå™¨çš„é‡‡æ ·æ—¶é—´ã€‚</strong></p>
<h4 id="Bias-éšæœºæ¸¸èµ°"><a href="#Bias-éšæœºæ¸¸èµ°" class="headerlink" title="Bias éšæœºæ¸¸èµ°"></a>Bias éšæœºæ¸¸èµ°</h4><p>é€šå¸¸ç”¨ç»´çº³è¿‡ç¨‹ (wiener process) æ¥å»ºæ¨¡ bias éšæ—¶é—´è¿ç»­å˜åŒ–çš„è¿‡ç¨‹ï¼Œç¦»æ•£æ—¶é—´ä¸‹ç§°ä¹‹ä¸ºéšæœºæ¸¸èµ°ã€‚</p>
<script type="math/tex; mode=display">
\dot b(t)=n(t)=\sigma_bw(t)\tag{12}</script><p>å…¶ä¸­$ w $æ˜¯æ–¹å·®ä¸º$ 1 $çš„ç™½å™ªå£°ã€‚</p>
<p>åŒæ ·ï¼Œç¦»æ•£å’Œè¿ç»­ä¹‹é—´çš„è½¬æ¢ï¼š</p>
<p>å®šä¹‰$b_d[k]$</p>
<script type="math/tex; mode=display">
b_d[k]\triangleq b(t_0)+\int^{t_0+\Delta t}_{t_0}{n(t)}dt</script><p>æ±‚æ–¹å·®ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
E((b_d[k]-b_d[k-1])^2)&=E(\int^{t_0+\Delta t}_{t_0}\int^{t_0+\Delta t}_{t_0}{n(t)}{n(\tau)}d\tau dt)\\
&=E(\sigma_b^2\int^{t_0+\Delta t}_{t_0}\int^{t_0+\Delta t}_{t_0}\delta (t-\tau)d\tau dt)\\
&=E(\sigma_b^2\Delta t)
\end{align*}\tag{13}</script><p>æ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
b_d[k]=b_d[k-1]+\sigma_{bd}w[k]\tag{14}</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">
w[k]\sim N(0,1)\\
\sigma_{bd}=\sigma_b \sqrt{\Delta t}\tag{15}</script><p><strong>bias éšæœºæ¸¸èµ°çš„å™ªå£°æ–¹å·®ä»è¿ç»­æ—¶é—´åˆ°ç¦»æ•£ä¹‹é—´éœ€è¦ä¹˜ä»¥</strong>$\sqrt{\Delta t}$</p>
<h3 id="2-éšæœºè¯¯å·®çš„æ ‡å®š"><a href="#2-éšæœºè¯¯å·®çš„æ ‡å®š" class="headerlink" title="2.éšæœºè¯¯å·®çš„æ ‡å®š"></a>2.éšæœºè¯¯å·®çš„æ ‡å®š</h3><h4 id="è‰¾ä¼¦æ–¹å·®æ ‡å®š"><a href="#è‰¾ä¼¦æ–¹å·®æ ‡å®š" class="headerlink" title="è‰¾ä¼¦æ–¹å·®æ ‡å®š"></a>è‰¾ä¼¦æ–¹å·®æ ‡å®š</h4><blockquote>
<p>åœ¨ç»Ÿè®¡å­¦ä¸­æè¿°éšæœºå˜é‡çš„ä¸¤ä¸ªç»å…¸å‚æ•°æ˜¯å‡å€¼å’Œæ–¹å·®ï¼Œæ—©æœŸåœ¨å®šé‡è¡¨å¾åŸå­é’Ÿçš„é¢‘ç‡ç¨³å®šåº¦æ—¶é‡‡ç”¨çš„å°±æ˜¯ç»å…¸æ–¹å·®æ–¹æ³•ã€‚1996 å¹´ï¼Œå­¦è€… D.W.Allan åœ¨åˆ†æé“¯åŸå­é’Ÿé¢‘æ ‡çš„é¢‘ç‡ç¨³å®šåº¦æ—¶å‘ç°ç»å…¸æ–¹å·®éšç€æ—¶é—´çš„å¢é•¿è€Œå‘æ•£ï¼Œä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„è¯„å®šæ–¹æ³•ï¼Œåæ¥ç§°ä¸ºè‰¾ä¼¦æ–¹å·®ã€‚ç”±äºæƒ¯æ€§å™¨ä»¶ä¹Ÿå…·æœ‰æŒ¯è¡å™¨çš„ç‰¹å¾ï¼ŒAllan æ–¹å·®åˆ†æä¹Ÿè¢«å¹¿æ³›åº”ç”¨äºæƒ¯æ€§å™¨ä»¶çš„éšæœºè¯¯å·®å»ºæ¨¡ï¼ŒIEEE æ ‡å‡†ä¸­å°±å°† Allan æ–¹å·®æ–¹æ³•å¼•å…¥åˆ°äº†æ¿€å…‰é™€èºçš„å»ºæ¨¡åˆ†æã€‚</p>
</blockquote>
<p>å…·ä½“çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<p>â‘ ä¿æŒä¼ æ„Ÿå™¨ç»å¯¹é™æ­¢è·å–æ•°æ®ã€‚</p>
<p>â‘¡å¯¹æ•°æ®è¿›è¡Œåˆ†æ®µï¼Œè®¾å®šæ—¶é—´æ®µçš„æ—¶é•¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220423162306358.png" alt="image-20220423162306358" style="zoom:50%;" /></p>
<p>â‘¢å°†ä¼ æ„Ÿå™¨æ•°æ®æŒ‰ç…§æ—¶é—´æ®µè¿›è¡Œå¹³å‡ã€‚</p>
<p>â‘£è®¡ç®—æ–¹å·®ï¼Œç»˜åˆ¶è‰¾ä¼¦æ›²çº¿ã€‚</p>
<p>å¾—åˆ°çš„è‰¾ä¼¦æ›²çº¿å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/2-IMUè¿åŠ¨å­¦æ¨¡å‹ä»¥åŠè¯¯å·®æ¨¡å‹/image-20220423162352964.png" alt="image-20220423162352964" style="zoom: 33%;" /></p>
<p>ä»è‰¾ä¼¦æ–¹å·®æ›²çº¿ä¸­å¯ä»¥è¾¨è¯†å‡º IMU çš„äº”ç§å™ªå£°ï¼Œåˆ†åˆ«ä¸ºï¼šé‡åŒ–å™ªå£°ã€è§’åº¦éšæœºæ¸¸èµ°ã€é›¶åä¸ç¨³å®šæ€§å™ªå£°ï¼Œè§’é€Ÿç‡éšæœºæ¸¸èµ°ï¼Œé€Ÿç‡æ–œå¡ï¼Œä¸€èˆ¬åœ¨ IMU å™ªå£°è¾¨è¯†ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ä¸­é—´ 3 ç§ã€‚</p>
]]></content>
      <categories>
        <category>ä»é›¶å¼€å§‹æ‰‹å†™VIO</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>IMUè¯¯å·®æ¨¡å‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€ã€VIOæ¦‚è¿°ä»¥åŠä¸‰ç»´åˆšä½“è¿åŠ¨çŸ¥è¯†ç‚¹å›é¡¾</title>
    <url>/posts/28639.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬èŠ‚ä¸»è¦é€šè¿‡å¼•è¨€éƒ¨åˆ†ï¼Œæå‡ºé—®ä»€ä¹ˆå¼•å…¥VIOä»¥åŠå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå…¶æ¬¡ä»‹ç»VIOçš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶ä¸ºäº†åç»­å†…å®¹çš„å±•å¼€ï¼Œå›é¡¾äº†ä¸€äº›åŸºæœ¬çš„æ•°å­¦åŸºç¡€ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="å¼•è¨€ï¼šWhy-VIO"><a href="#å¼•è¨€ï¼šWhy-VIO" class="headerlink" title="å¼•è¨€ï¼šWhy VIO ?"></a>å¼•è¨€ï¼šWhy VIO ?</h1><h2 id="VO-çš„ç¼ºé™·"><a href="#VO-çš„ç¼ºé™·" class="headerlink" title="VO çš„ç¼ºé™·"></a>VO çš„ç¼ºé™·</h2><p>ç»“åˆä¹‹å‰æ‰€å­¦ï¼Œæˆ‘ä»¬é¦–å…ˆè€ƒè™‘çº¯è§†è§‰çš„SLAMï¼Œå³VOï¼›</p>
<p>é¦–å…ˆæ˜¯<strong>å•ç›®è§†è§‰SLAM:</strong> å®ƒçš„ä¼˜ç‚¹å°±æ˜¯ä¾¿å®œï¼Œç®€å•æ˜“ç”¨ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯å•ç›®æ²¡æœ‰æ·±åº¦ä¿¡æ¯ï¼Œä¸»è¦å­˜åœ¨ä¸‰ä¸ªæ–¹é¢çš„ç¼ºé™·ï¼šâ‘ åˆåº¦ä¸ç¡®å®šæ€§ï¼›â‘¡éœ€è¦åˆå§‹åŒ–ï¼›â‘¢å­˜åœ¨å°ºåº¦æ¼‚ç§»ï¼›åŸºäºè¿™äº›é—®é¢˜ï¼Œè¿™é‡Œä¸åšè¯¦ç»†çš„å±•å¼€ï¼›</p>
<p>ä¸ºäº†è§£å†³å•ç›®è§†è§‰å­˜åœ¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¼€å§‹ä½¿ç”¨<strong>åŒç›®ç›¸æœºå’Œ RGBD ç›¸æœº</strong>ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æµ‹é‡æ·±åº¦ï¼Œè¿™æ ·çš„è¯å°±ä¸å­˜åœ¨åˆå§‹åŒ–å’Œå°ºåº¦ä¸Šçš„é—®é¢˜äº†ï¼Œä½†æ˜¯åŒç›®ç›¸æœºçš„æ ‡å®šå¾ˆå¤æ‚ï¼Œä¸”è§†å·®è®¡ç®—æ·±åº¦æ¯”è¾ƒæ¶ˆè€—èµ„æºï¼Œè€ŒRGBDå¯¹ç¯å¢ƒçš„è¦æ±‚ä¹Ÿæ¯”è¾ƒè‹›åˆ»ã€æµ‹é‡è·ç¦»ä¹Ÿå¾ˆæœ‰é™ï¼Œå…¶æ ‡å®šä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚</p>
<p>ä½†æ˜¯ç”±äºä¼ æ„Ÿå™¨ä¸»è¦æ˜¯ç›¸æœºï¼Œå› æ­¤ï¼Œ<strong>çº¯è§†è§‰</strong>å­˜åœ¨ä¸€äº›å…±æ€§çš„å¼Šç«¯ï¼šæ¯”å¦‚åœ¨<strong>å…‰ç…§å˜åŒ–è¾ƒå¤§æ—¶ï¼Œçº¹ç†ç‰¹å¾ç¼ºå¤±ã€å¿«é€Ÿè¿åŠ¨å¯¼è‡´æ¨¡ç³Šçš„æƒ…å†µä¸‹æ— æ³•ä½¿ç”¨</strong>ç­‰ç¼ºé™·ï¼›å…¶ä¸­å¿«é€Ÿè¿åŠ¨å¯¼è‡´æ— æ³•ä½¿ç”¨ï¼Œä¸»è¦æ˜¯å› ä¸ºå¿«é€Ÿè¿åŠ¨å¯èƒ½ä¼šå¯¼è‡´è·Ÿä¸¢ï¼Œç”±äºçº¯è§†è§‰ä¸åšä»»ä½•å¤„ç†ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯åŸºäºç¬¬ä¸€å¸§ä½œä¸ºä¸–ç•Œåæ ‡ç³»è€Œå»ºç«‹çš„ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºåœ°çƒæ°´å¹³é¢ (ä¸–ç•Œåæ ‡ç³») çš„ä½å§¿ï¼Œåè€…å´æ˜¯å¯¼èˆªä¸­çœŸæ­£éœ€è¦çš„ä½å§¿ï¼Œæ¢è¨€ä¹‹ï¼Œ<strong>è§†è§‰æ–¹æ³•ä¼°è®¡çš„ä½å§¿ä¸èƒ½å’Œé‡åŠ›æ–¹å‘å¯¹é½</strong>ã€‚è¿™å¯èƒ½ä¼šå‡ºç°è½¦åœ¨åœ°ä¸Šå¼€ï¼Œè¿åŠ¨è½¨è¿¹å¤©ä¸Šé£çš„ç°è±¡ã€‚</p>
<h2 id="VIO-çš„ä¼˜ç‚¹"><a href="#VIO-çš„ä¼˜ç‚¹" class="headerlink" title="VIO çš„ä¼˜ç‚¹"></a>VIO çš„ä¼˜ç‚¹</h2><p>VIO å°±æ˜¯ä¸€ç§éå¸¸ä¼˜ç¾çš„è§£å†³æ–¹å¼ï¼Œå› ä¸º IMU å¯ä»¥æä¾›ç‰©ç†ä¸–ç•Œçš„å°ºåº¦ï¼ŒçŸ­æ—¶é—´å†…ä¹Ÿèƒ½æä¾›æ¯”è¾ƒå‡†ç¡®çš„<strong>ä½å§¿ä¼°è®¡</strong>ï¼Œè¿˜èƒ½<strong>ä¼°è®¡å‡ºæƒ¯æ€§åæ ‡ç³»</strong>ã€‚è¿™ç§äº’è¡¥çš„æ€§è´¨ï¼Œè®© VIO åœ¨è¿‘å‡ å¹´å¾—åˆ°äº†æå¤§çš„å…³æ³¨ã€‚VIOèƒ½å¤Ÿè§£å†³è¿™äº›é—®é¢˜çš„åŸºç¡€æ˜¯å®ƒçš„åˆå§‹åŒ–ï¼ŒVIO åˆå§‹åŒ–ä¼šæŠŠè§†è§‰ SLAM æ‰€ç¼ºçš„ä¸œè¥¿å…¨éƒ¨éƒ½å…ˆä¼°è®¡å‡ºæ¥ï¼ŒåŒ…æ‹¬<strong>å°ºåº¦ä¿¡æ¯ï¼Œé‡åŠ›å‘é‡ï¼Œä½å§¿é€Ÿåº¦</strong>ã€‚</p>
<p>é€šè¿‡å°† IMU ä¼°è®¡çš„ä½å§¿åºåˆ—å’Œç›¸æœºä¼°è®¡çš„ä½å§¿åºåˆ—å¯¹é½å¯ä»¥<strong>ä¼°è®¡å‡ºç›¸æœºè½¨è¿¹çš„çœŸå®å°ºåº¦</strong>ï¼Œè€Œä¸” IMU å¯ä»¥å¾ˆå¥½åœ°é¢„æµ‹å‡ºå›¾åƒå¸§çš„ä½å§¿ä»¥åŠä¸Šä¸€æ—¶åˆ»ç‰¹å¾ç‚¹åœ¨ä¸‹å¸§å›¾åƒçš„ä½ç½®ï¼Œ<strong>æé«˜ç‰¹å¾è·Ÿè¸ªç®—æ³•åŒ¹é…é€Ÿåº¦å’Œåº”å¯¹å¿«é€Ÿæ—‹è½¬çš„ç®—æ³•é²æ£’æ€§</strong>ï¼Œæœ€å IMU ä¸­åŠ é€Ÿåº¦è®¡æä¾›çš„é‡åŠ›å‘é‡å¯ä»¥<strong>å°†ä¼°è®¡çš„ä½ç½®è½¬ä¸ºå®é™…å¯¼èˆªéœ€è¦çš„ä¸–ç•Œåæ ‡ç³»ä¸­</strong>ã€‚</p>
<p>å¦å¤–è¿˜éœ€è¦é€šè¿‡è§†è§‰ SLAM å¸®åŠ© IMU å»æå®šé™€èºä»ªå’ŒåŠ é€Ÿåº¦è®¡çš„åˆå§‹ biasã€‚å¦‚æœè¿™äº›ä¸œè¥¿ä¸€å¼€å§‹ä¼°è®¡çš„å¾ˆå·®ï¼Œé‚£æ•´ä¸ªç³»ç»Ÿçš„å‡†ç¡®æ€§ä¼šæ€¥å‰§ä¸‹é™ã€‚åŸºäºæ»¤æ³¢çš„å¾ˆå¯èƒ½å¾ˆå¿«å°±å‘æ•£å¾—å¾ˆè¿œäº†ï¼ŒåŸºäºéçº¿æ€§ä¼˜åŒ–çš„å¯èƒ½ç»å¸¸ä¼šé™·å…¥å±€éƒ¨æœ€ä¼˜è§£ã€‚</p>
<p>ç»¼åˆä»¥ä¸Šï¼Œèåˆ IMU å’Œè§†è§‰ä¿¡æ¯çš„ VINS ç®—æ³•å¯ä»¥å¾ˆå¤§ç¨‹åº¦åœ°æé«˜å•ç›® SLAM ç®—æ³•æ€§èƒ½ï¼Œæ˜¯ä¸€ç§ä½æˆæœ¬é«˜æ€§èƒ½çš„å¯¼èˆªæ–¹æ¡ˆï¼Œåœ¨æœºå™¨äººã€AR/VR é¢†åŸŸå¾—åˆ°äº†å¾ˆå¤§çš„å…³æ³¨ã€‚</p>
<h1 id="â… -VIO-æ¦‚è¿°"><a href="#â… -VIO-æ¦‚è¿°" class="headerlink" title="â… .VIO æ¦‚è¿°"></a>â… .VIO æ¦‚è¿°</h1><h2 id="A-IMUä¸è§†è§‰é‡Œç¨‹"><a href="#A-IMUä¸è§†è§‰é‡Œç¨‹" class="headerlink" title="A.IMUä¸è§†è§‰é‡Œç¨‹"></a>A.IMUä¸è§†è§‰é‡Œç¨‹</h2><p>IMUï¼ˆInertial Measurement Unitï¼‰ï¼Œæƒ¯æ€§æµ‹é‡å•å…ƒï¼Œç”¨äºæµ‹é‡ç‰©ä½“ä¸‰è½´å§¿æ€è§’(æˆ–è§’é€Ÿç‡)ä»¥åŠåŠ é€Ÿåº¦çš„è£…ç½®ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªIMUå†…ä¼šè£…æœ‰ä¸‰è½´çš„é™€èºä»ªå’Œä¸‰ä¸ªæ–¹å‘çš„åŠ é€Ÿåº¦è®¡ï¼Œåˆ†åˆ«ç”¨æ¥æµ‹é‡ç‰©ä½“åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„è§’é€Ÿåº¦å’ŒåŠ é€Ÿåº¦ï¼Œå¹¶ä»¥æ­¤è§£ç®—å‡ºç‰©ä½“çš„å§¿æ€ã€‚ä¸ºäº†æé«˜å¯é æ€§ï¼Œè¿˜å¯ä»¥ä¸ºæ¯ä¸ªè½´é…å¤‡æ›´å¤šçš„ä¼ æ„Ÿå™¨ã€‚ä¸€èˆ¬è€Œè¨€IMUè¦å®‰è£…åœ¨è¢«æµ‹ç‰©ä½“çš„é‡å¿ƒä¸Šã€‚</p>
<ul>
<li>å…¸å‹ 6 è½´ IMU æœ¬èº«ç”±ä¸€ä¸ªé™€èºä»ªå’Œä¸€ä¸ªåŠ é€Ÿåº¦è®¡ç»„æˆï¼Œåˆ†åˆ«æµ‹é‡è‡ªèº«çš„è§’é€Ÿåº¦å’ŒåŠ é€Ÿåº¦ï¼Œå¹¶ä»¥è¾ƒé«˜é¢‘ç‡ï¼ˆâ‰¥ 100Hzï¼‰è¿”å›ã€‚</li>
</ul>
<p><img src="/images/1-VIOæ¦‚è¿°ä»¥åŠä¸‰ç»´åˆšä½“è¿åŠ¨çŸ¥è¯†ç‚¹å›é¡¾/image-20220420150139375.png" alt="image-20220420150139375" style="zoom: 33%;" /></p>
<ul>
<li>ä½†æ˜¯IMUï¼Œå—è‡ªèº«æ¸©åº¦ã€é›¶åã€æŒ¯åŠ¨ç­‰å› ç´ å¹²æ‰°ï¼Œç§¯åˆ†å¾—åˆ°çš„å¹³ç§»å’Œæ—‹è½¬å®¹æ˜“æ¼‚ç§»</li>
</ul>
<p>æ‰‹æœºç­‰ç”µå­äº§å“å¤šä½¿ç”¨ä»·æ ¼ä½å»‰çš„ MEMS IMUï¼ˆå¦‚ MPU 6050ï¼‰ï¼Œè‡ªåŠ¨é©¾é©¶ç±»åˆ™å¤šä½¿ç”¨å‡ ä¸‡å…ƒçš„ IMUï¼ˆå¦‚ Apollo ä¸­ä½¿ç”¨çš„ Novatel SPAN-IGM-A1ï¼‰</p>
<p><img src="/images/1-VIOæ¦‚è¿°ä»¥åŠä¸‰ç»´åˆšä½“è¿åŠ¨çŸ¥è¯†ç‚¹å›é¡¾/image-20220420150543613.png" alt="image-20220420150543613" style="zoom: 50%;" /></p>
<p>è§†è§‰ Visual Odometry</p>
<ul>
<li>ä»¥å›¾åƒå½¢å¼è®°å½•æ•°æ®ï¼Œé¢‘ç‡è¾ƒä½ï¼ˆ15 âˆ’ 60Hz å±…å¤šï¼‰</li>
<li>é€šè¿‡å›¾åƒç‰¹å¾ç‚¹æˆ–åƒç´ æ¨æ–­ç›¸æœºè¿åŠ¨ï¼Œå› æ­¤å®¹æ˜“å—æˆåƒè´¨é‡çš„å½±å“ã€‚</li>
</ul>
<p><strong>IMU ä¸è§†è§‰å®šä½æ–¹æ¡ˆä¼˜åŠ¿ä¸åŠ£åŠ¿å¯¹æ¯”ï¼š</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ¡ˆ</th>
<th style="text-align:center">IMU</th>
<th style="text-align:center">è§†è§‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ä¼˜åŠ¿</td>
<td style="text-align:center">å¿«é€Ÿå“åº”<br/>ä¸å—æˆåƒè´¨é‡å½±å“<br/>è§’é€Ÿåº¦æ™®éæ¯”è¾ƒå‡†ç¡®<br/>å¯ä¼°è®¡ç»å¯¹å°ºåº¦</td>
<td style="text-align:center">ï¼ˆé™æ­¢ï¼‰ä¸äº§ç”Ÿæ¼‚ç§»<br/>ç›´æ¥æµ‹é‡æ—‹è½¬ä¸å¹³ç§»</td>
</tr>
<tr>
<td style="text-align:center">åŠ£åŠ¿</td>
<td style="text-align:center">å­˜åœ¨é›¶å<br/>ä½ç²¾åº¦ IMU ç§¯åˆ†ä½å§¿å‘æ•£<br/>é«˜ç²¾åº¦ä»·æ ¼æ˜‚è´µ</td>
<td style="text-align:center">å—å›¾åƒé®æŒ¡ã€è¿åŠ¨ç‰©ä½“å¹²æ‰°<br/>å•ç›®è§†è§‰æ— æ³•æµ‹é‡å°ºåº¦<br/>å•ç›®çº¯æ—‹è½¬è¿åŠ¨æ— æ³•ä¼°è®¡<br/>å¿«é€Ÿè¿åŠ¨æ—¶æ˜“ä¸¢å¤±</td>
</tr>
</tbody>
</table>
</div>
<p>æ•´ä½“ä¸Šï¼Œè§†è§‰å’Œ IMU å®šä½æ–¹æ¡ˆå­˜åœ¨ä¸€å®šäº’è¡¥æ€§è´¨ï¼š</p>
<ul>
<li>IMU é€‚åˆè®¡ç®—çŸ­æ—¶é—´ã€å¿«é€Ÿçš„è¿åŠ¨ï¼›</li>
<li>è§†è§‰é€‚åˆè®¡ç®—é•¿æ—¶é—´ã€æ…¢é€Ÿçš„è¿åŠ¨ã€‚</li>
</ul>
<p>åŒæ—¶ï¼Œå¯åˆ©ç”¨è§†è§‰å®šä½ä¿¡æ¯æ¥ä¼°è®¡ IMU çš„é›¶åï¼Œå‡å°‘ IMU ç”±é›¶åå¯¼è‡´çš„å‘æ•£å’Œç´¯ç§¯è¯¯å·®ï¼›åä¹‹ï¼ŒIMU å¯ä»¥ä¸ºè§†è§‰æä¾›å¿«é€Ÿè¿åŠ¨æ—¶çš„å®šä½ã€‚</p>
<h2 id="B-VIO"><a href="#B-VIO" class="headerlink" title="B.VIO"></a>B.VIO</h2><p>VIOï¼šï¼ˆVisual-Inertial Odometryï¼‰è§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡ï¼Œæœ‰æ—¶å€™ä¹Ÿå«è§†è§‰æƒ¯æ€§ç³»ç»Ÿï¼ˆVINSï¼Œvisual-inertial systemï¼‰ï¼Œæ˜¯èåˆç›¸æœºå’ŒIMUæ•°æ®å®ç°SLAMçš„ç®—æ³•ã€‚</p>
<p>IMU æ•°æ®å¯ä¸å¤šç§å®šä½æ–¹æ¡ˆèåˆï¼Œæ¯”å¦‚è‡ªåŠ¨é©¾é©¶ä¸­é€šå¸¸ç”¨ IMU+GPS/å·®åˆ† GPS/RTK çš„èåˆå®šä½æ–¹æ¡ˆï¼Œ<br>å½¢æˆ GNSS-INS ç»„åˆå¯¼èˆªç³»ç»Ÿï¼Œè¾¾åˆ°å˜ç±³ç»„å®šä½ç²¾åº¦ï¼›å¤´æˆ´å¼ AR/VR å¤´ç›”åˆ™å¤šä½¿ç”¨è§†è§‰ +IMU çš„ VIO å®šä½ç³»ç»Ÿï¼Œå½¢æˆé«˜å¸§ç‡å®šä½æ–¹æ¡ˆã€‚</p>
<p>æ ¹æ®èåˆæ¡†æ¶çš„åŒºåˆ«VIOå¯ä»¥åˆ†ä¸ºç´§è€¦åˆå’Œæ¾è€¦åˆï¼š</p>
<ul>
<li><strong>æ¾è€¦åˆ</strong></li>
</ul>
<p>æ¾è€¦åˆå°† IMU å®šä½ä¸è§†è§‰/GNSS çš„ä½å§¿ç›´æ¥è¿›è¡Œèåˆï¼Œèåˆè¿‡ç¨‹å¯¹äºŒè€…æœ¬èº«ä¸äº§ç”Ÿå½±å“ï¼Œä½œä¸ºåå¤„ç†æ–¹å¼è¾“å‡ºã€‚å…¸å‹æ–¹æ¡ˆä¸ºå¡å°”æ›¼æ»¤æ³¢å™¨ã€‚</p>
<p><img src="/images/1-VIOæ¦‚è¿°ä»¥åŠä¸‰ç»´åˆšä½“è¿åŠ¨çŸ¥è¯†ç‚¹å›é¡¾/image-20220420151628700.png" alt="image-20220420151628700" style="zoom: 33%;" /></p>
<ul>
<li><strong>ç´§è€¦åˆ</strong></li>
</ul>
<p>ç´§è€¦åˆåˆ™æ˜¯<strong>ä½¿ç”¨ä¸¤ä¸ªä¼ æ„Ÿå™¨çš„åŸå§‹æ•°æ®å…±åŒä¼°è®¡ä¸€ç»„å˜é‡ï¼Œä¼ æ„Ÿå™¨å™ªå£°ä¹Ÿæ˜¯ç›¸äº’å½±å“çš„</strong>ï¼Œç´§è€¦åˆç®—æ³•ä¸Šæ¯”è¾ƒå¤æ‚ï¼Œä½†å……åˆ†åˆ©ç”¨äº†ä¼ æ„Ÿå™¨æ•°æ®ï¼Œå¯ä»¥å®ç°æ›´å¥½çš„æ•ˆæœï¼Œæ˜¯ç›®å‰ç ”ç©¶çš„é‡ç‚¹ã€‚å…¸å‹æ–¹æ¡ˆä¸º MSCKF å’Œéçº¿æ€§ä¼˜åŒ–ã€‚</p>
<p><img src="/images/1-VIOæ¦‚è¿°ä»¥åŠä¸‰ç»´åˆšä½“è¿åŠ¨çŸ¥è¯†ç‚¹å›é¡¾/image-20220420151708384.png" alt="image-20220420151708384" style="zoom:33%;" /></p>
<p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç´§è€¦åˆï¼Ÿ</strong></p>
<ul>
<li>å•çº¯å‡­ï¼ˆå•ç›®ï¼‰è§†è§‰æˆ– IMU éƒ½ä¸å…·å¤‡ä¼°è®¡ Pose çš„èƒ½åŠ›ï¼šè§†è§‰å­˜åœ¨å°ºåº¦ä¸ç¡®å®šæ€§ã€IMU å­˜åœ¨é›¶åå¯¼è‡´æ¼‚ç§»ï¼›</li>
<li>æ¾è€¦åˆä¸­ï¼Œè§†è§‰å†…éƒ¨ BA æ²¡æœ‰ IMU çš„ä¿¡æ¯ï¼Œåœ¨æ•´ä½“å±‚é¢æ¥çœ‹ä¸æ˜¯æœ€ä¼˜çš„ã€‚</li>
<li>ç´§è€¦åˆå¯ä»¥ä¸€æ¬¡æ€§å»ºæ¨¡æ‰€æœ‰çš„è¿åŠ¨å’Œæµ‹é‡ä¿¡æ¯ï¼Œæ›´å®¹æ˜“è¾¾åˆ°æœ€ä¼˜ã€‚</li>
</ul>
<h1 id="â…¡-çŸ¥è¯†ç‚¹å›é¡¾"><a href="#â…¡-çŸ¥è¯†ç‚¹å›é¡¾" class="headerlink" title="â…¡.çŸ¥è¯†ç‚¹å›é¡¾"></a>â…¡.çŸ¥è¯†ç‚¹å›é¡¾</h1><h2 id="A-ä¸‰ç»´åˆšä½“è¿åŠ¨"><a href="#A-ä¸‰ç»´åˆšä½“è¿åŠ¨" class="headerlink" title="A.ä¸‰ç»´åˆšä½“è¿åŠ¨"></a>A.ä¸‰ç»´åˆšä½“è¿åŠ¨</h2><p>åœ¨ä¸‰ç»´åˆšä½“è¿åŠ¨ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰æœºå™¨äººä¸Šçš„å„ç§åæ ‡ç³»ï¼Œä¸–ç•Œåæ ‡ç³»$W$ï¼ŒIMUåæ ‡ç³»(Bodyç³»)$I$ï¼Œç›¸æœºåæ ‡ç³»$C$ã€‚é€šè¿‡åå››è®²çš„å­¦ä¹ æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œåæ ‡ç³»ä¹‹é—´çš„è½¬æ¢å¯ä»¥é€šè¿‡$SE(3)$ç»™å‡ºï¼Œæ¯”å¦‚$I$åˆ°$W$åæ ‡ç³»çš„å˜æ¢çŸ©é˜µä¸º$T_{WI}$:</p>
<script type="math/tex; mode=display">
T_{WI}=\begin{bmatrix}
R_{WI}&t_{WI}\\
0^T&1
\end{bmatrix}\in\mathbb{R}^{4Ã—4}\tag{1}</script><p>å…¶ä¸­ï¼Œ$R_{WI}$ä¸º$3Ã—3$çš„æ—‹è½¬çŸ©é˜µï¼Œ$t_{WI}$ä¸ºå¹³ç§»å‘é‡ã€‚æˆ‘ä»¬å¯ä»¥ç”¨$T_{WI}$å³ä¹˜ä¸€ä¸ª$I$åæ ‡ç³»ä¸‹çš„åæ ‡ï¼Œå°†å¾—åˆ°è¯¥ç‚¹$W$ç³»ä¸‹çš„åæ ‡ã€‚</p>
<h2 id="B-å››å…ƒæ•°"><a href="#B-å››å…ƒæ•°" class="headerlink" title="B.å››å…ƒæ•°"></a>B.å››å…ƒæ•°</h2><p>ä¸‰ç»´åˆšä½“çš„è¿åŠ¨å¯ä»¥æœ‰æ—‹è½¬çŸ©é˜µæ¥è¡¨è¾¾ï¼Œä¹Ÿå¯ä»¥ç”¨å››å…ƒæ•°$q$æè¿°ã€‚å››å…ƒæ•°æœ‰ä¸€ä¸ªå®éƒ¨å’Œä¸‰ä¸ªè™šéƒ¨ã€‚æˆ‘ä»¬æŠŠå®éƒ¨å†™åœ¨å‰ï¼š</p>
<script type="math/tex; mode=display">
q=[q_0,q_1,q_2,q_3]^Tæˆ–q=[w,x,y,z]^T\tag{2}</script><p>å…¶ä¸­ $q_0$ ä¸ºå®éƒ¨ï¼Œ$[q_1, q_2, q_3]^T$ä¸ºè™šéƒ¨ã€‚å› ä¸ºå®éƒ¨ä¸ºæ ‡é‡ï¼Œè™šéƒ¨ä¸ºçŸ¢é‡ï¼Œæ‰€ä»¥ä¹Ÿå¯è®°ä¸ºï¼š</p>
<script type="math/tex; mode=display">
q=[s,\pmb{v}]^T\tag{3}</script><p>å…¶ä¸­ $s $ä¸ºæ ‡é‡ï¼Œ$\pmb{v}$ä¸ºè™šéƒ¨çš„çŸ¢é‡ã€‚</p>
<p><strong>å››å…ƒæ•°çš„ä¹˜æ³•è¿ç®—ï¼š</strong></p>
<script type="math/tex; mode=display">
\begin{align*}
q_a\otimes q_b&=w_aw_b âˆ’ x_ax_b âˆ’ y_ay_b âˆ’ z_az_b\\
&+ (w_ax_b + x_aw_b + y_az_b âˆ’ z_ay_b)i\\
&+ (w_ay_b âˆ’ x_az_b + y_aw_b + z_ax_b) j\\
&+ (w_az_b + x_ay_b âˆ’ y_ax_b + z_aw_b) k.
\end{align*}\tag{4}</script><p>æˆ–è€…æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
q_a\otimes q_b=[s_as_b-\pmb{v}_a^T\pmb{v}_b,s_a\pmb{v}_b+s_b\pmb{v}_a+\pmb{v}_a\times\pmb{v}_b]^T\tag{5}</script><p>å››å…ƒæ•°çš„å…¶ä»–å››åˆ™è¿ç®—ï¼Œä¸ä½œå…·ä½“å±•å¼€ï¼Œå‚é˜…ã€Šè§†è§‰SLAMåå››è®²ã€‹ã€‚</p>
<p><strong>å››å…ƒæ•°è¡¨ç¤ºæ—‹è½¬ï¼š</strong></p>
<p>å¦å¤–å•ä½å››å…ƒæ•°å¯è¡¨è¾¾ä»»æ„ä¸‰ç»´æ—‹è½¬ï¼Œä¸”æ— å¥‡å¼‚æ€§ã€‚å¦‚è®¾è½´è§’ä¸º$w$å’Œ$\theta$ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„å››å…ƒæ•°ä¸ºï¼š</p>
<script type="math/tex; mode=display">
q=[cos\frac{\theta}{2},wsin\frac{\theta}{2}]^T\tag{6}</script><p>åˆ©ç”¨æ­¤æ€§è´¨å¯æ¨å¯¼å››å…ƒæ•°æ±‚å¯¼ã€‚</p>
<p><strong>å››å…ƒæ•°çš„æ±‚å¯¼ï¼š</strong></p>
<p>å››å…ƒæ•°æ—¶é—´å¯¼æ•°ï¼šè®¾åˆå§‹æ—‹è½¬ä¸º $q = [s, \pmb{v}]$ï¼Œç„¶åï¼Œå‘ç”Ÿäº†è§’è½´ä¸º $w, \theta$ çš„æ—‹è½¬ï¼ˆå³ä¹˜ï¼Œå¯¹åº”å››å…ƒæ•°è®°ä½œ$\Delta q=[cos\frac{\theta}{2},wsin\frac{\theta}{2}]^T$ï¼‰ï¼Œé‚£ä¹ˆ $q $ç›¸å¯¹è¯¥æ—‹è½¬çš„å¯¼æ•°ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\underset{\theta \rightarrow 0}{lim}\frac{q\otimes \Delta q-q}{\theta}
&=\underset{\theta \rightarrow 0}{lim}\frac{[s \cos\frac{\theta}{2}-\pmb{v}^Tw \sin\frac{\theta}{2},sw \sin\frac{\theta}{2}+cos\frac{\theta}{2}\pmb{v}+\pmb{v}\times w \sin\frac{\theta}{2}]^T-q}{\theta}\\
&=\underset{\theta \rightarrow 0}{lim}\frac{[s (\cos\frac{\theta}{2}-1)-\pmb{v}^Tw \sin\frac{\theta}{2},sw \sin\frac{\theta}{2}+(\cos\frac{\theta}{2}-1)\pmb{v}+\pmb{v}\times w \sin\frac{\theta}{2}]^T}{\theta}\\
&=[-\frac{1}{2}\pmb{v}^Tw,\frac{1}{2}sw+\frac{1}{2}\pmb{v}\times w]^T\\
&=q\otimes[0,\frac{1}{2}w]^T
\end{align*}\tag{7}</script><p>å› æ­¤ï¼Œè‹¥è§’é€Ÿåº¦ä¸º $w$ï¼Œé‚£ä¹ˆæ—‹è½¬çš„æ—¶é—´å¯¼æ•°å³ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\dot q= q\otimes[0,\frac{1}{2}w]^T\tag{8}</script><h2 id="C-æä»£æ•°"><a href="#C-æä»£æ•°" class="headerlink" title="C.æä»£æ•°"></a>C.æä»£æ•°</h2><p>é™¤äº†åˆ©ç”¨å››å…ƒæ•°æ±‚å¯¼ï¼Œäº¦å¯åˆ©ç”¨æä»£æ•°è¿›è¡Œæ—‹è½¬æ±‚å¯¼ã€‚<br>ä½¿ç”¨æ—‹è½¬çŸ©é˜µ$R$æ—¶ï¼Œè§’é€Ÿåº¦ä¸º $w$ï¼Œé‚£ä¹ˆ $R$ ç›¸å¯¹äºæ—¶é—´çš„å¯¼æ•°å¯å†™ä½œï¼š</p>
<script type="math/tex; mode=display">
\dot R= Rw^{\land}\tag{9}</script><p>è¯¥å¼è¢«ç§°ä¸º<strong>æ³Šæ¾å…¬å¼</strong>ï¼ˆPossionâ€™s equationï¼‰ï¼Œå…¶ä¸­${\land}$ä¸ºåå¯¹ç§°çŸ©é˜µç®—å­ï¼š</p>
<script type="math/tex; mode=display">
w^{\land}=\begin{bmatrix}
0&-w_3&w_2\\
w_3&0&-w_1\\
-w_2&w_1&0
\end{bmatrix}\tag{10}</script><p>å…¶å®ç»“åˆä¹‹å‰çš„çŸ¥è¯†ï¼Œå¯ä»¥å‘ç°ï¼Œè¿™é‡Œçš„$w^{\land}$ä¸å°±æ˜¯æ—‹è½¬çŸ©é˜µå¯¹åº”çš„æä»£æ•°$\mathfrak{so}(3)$å˜›ï¼Œåå››è®²é‡Œé¢ç”¨çš„æ˜¯$\phi^{\land}$ã€‚</p>
<p><strong>$\mathfrak{so}(3)$å¯¼æ•°ï¼š</strong></p>
<p>åœ¨ä¼˜åŒ–å¸¦æœ‰æ—‹è½¬çš„å‡½æ•°æ—¶ï¼Œé€šå¸¸è®¡ç®—ä¸€ä¸ªå¢é‡ $\phi\in \mathfrak{so}(3)$ï¼Œç„¶åç”¨å®ƒæ›´æ–°å½“å‰ä¼°è®¡å€¼ï¼š</p>
<script type="math/tex; mode=display">
R\leftarrow R\ exp(\phi^{\land})\tag{11}</script><p>å…¶ä¸­$exp$ä¸º$\mathfrak{so}(3)$è‡³$SO(3)$ä¸Šçš„æŒ‡æ•°æ˜ å°„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<blockquote>
<p>â‘ ä¸åŒçš„$R$å‡½æ•°ï¼Œå…·ä½“çš„å¯¼æ•°å½¢å¼ä¹Ÿä¸åŒ</p>
<p>â‘¡åœ¨ç¨‹åºä¸­ï¼Œä¸å¿…åŒºåˆ†$R$æ˜¯ä»¥çŸ©é˜µå­˜å‚¨æˆ–æ˜¯ä»¥å››å…ƒæ•°å­˜å‚¨ï¼Œåªéœ€æŒ‰ç…§è¯¥å¼æ›´æ–°å³å¯ã€‚</p>
</blockquote>
</blockquote>
<h2 id="D-æ‰°åŠ¨æ¨¡å‹çš„é›…å¯æ¯”"><a href="#D-æ‰°åŠ¨æ¨¡å‹çš„é›…å¯æ¯”" class="headerlink" title="D.æ‰°åŠ¨æ¨¡å‹çš„é›…å¯æ¯”"></a>D.æ‰°åŠ¨æ¨¡å‹çš„é›…å¯æ¯”</h2><p><strong>å¸¸è§çš„ä¸€äº›é›…å¯æ¯”ï¼š</strong>ï¼ˆä»¥è‡ªå˜é‡ä¸º$R$ä¸¾ä¾‹ï¼‰</p>
<ul>
<li>æ—‹è½¬ç‚¹çš„å·¦æ‰°åŠ¨é›…å¯æ¯”ï¼š</li>
</ul>
<p>è¿™é‡Œå°†å¯¹$R$è¿›è¡Œä¸€æ¬¡çš„æ‰°åŠ¨$\Delta R$åŠ åœ¨å…¶å¯¹åº”çš„æä»£æ•°$\varphi $ä¸Šï¼Œè€Œéæç¾¤ä¸Šã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial(Rp)}{\partial \varphi}
&=\underset{\varphi\rightarrow0}{lim}\frac{exp(\varphi^{\land})\cdot exp(\phi^{\land})p-exp(\phi^{\land})p}{\varphi}\\
&\approx \underset{\varphi\rightarrow0}{lim}\frac{(I+\varphi^{\land})\cdot exp(\phi^{\land})p-exp(\phi^{\land})p}{\varphi} \ \ \ ä¸€é˜¶æ³°å‹’å±•å¼€\\
&=\underset{\varphi\rightarrow0}{lim}\frac{\varphi^{\land}Rp}{\varphi} \ \ \ æ ¹æ® a^{\land}b=-b^{\land}a\\
&=\underset{\varphi\rightarrow0}{lim}\frac{-(Rp)^{\land}\varphi}{\varphi}\\
&=-(Rp)^{\land}
\end{align*}\tag{12}</script><ul>
<li>æ—‹è½¬ç‚¹çš„å³æ‰°åŠ¨é›…å¯æ¯”ï¼š</li>
</ul>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial(Rp)}{\partial \varphi}
&=\underset{\varphi\rightarrow0}{lim}\frac{ exp(\phi^{\land})\cdot exp(\varphi^{\land})p-exp(\phi^{\land})p}{\varphi}\\
&\approx \underset{\varphi\rightarrow0}{lim}\frac{ exp(\phi^{\land})\cdot(I+\varphi^{\land})p-exp(\phi^{\land})p}{\varphi} \ \ \ ä¸€é˜¶æ³°å‹’å±•å¼€\\
&=\underset{\varphi\rightarrow0}{lim}\frac{R\varphi^{\land}p}{\varphi} \ \ \ æ ¹æ® a^{\land}b=-b^{\land}a\\
&=\underset{\varphi\rightarrow0}{lim}\frac{-Rp^{\land}\varphi}{\varphi}\\
&=-Rp^{\land}
\end{align*}\tag{13}</script><ul>
<li>æ—‹è½¬è¿ä¹˜çš„é›…å¯æ¯”ï¼š</li>
</ul>
<p>â‘ è¿™é‡Œå°†å¯¹$R_2$è¿›è¡Œä¸€æ¬¡çš„æ‰°åŠ¨$\Delta R_2$åŠ åœ¨å…¶å¯¹åº”çš„æä»£æ•°$\phi $ä¸Šï¼Œè€Œéæç¾¤ä¸Šã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{d\ ln(R_1R_2)^{\lor} }{dR_2}
&=\underset{\phi\rightarrow0}{lim}\frac{ln(R_1R_2\cdot exp(\phi^{\land}))^{\lor}-ln(R_1R_2)^{\lor} }{\phi}\\
&\approx\underset{\phi\rightarrow0}{lim}\frac{ln(R_1R_2)^{\lor}+J^{-1}_r\phi-ln(R_1R_2)^{\lor} }{\phi}\\
&=J^{-1}_r(ln(R_1R_2)^{\lor})
\end{align*}\tag{14}</script><p>ç¬¬ä¸€æ­¥åˆ°ç¬¬äºŒæ­¥ä½¿ç”¨çš„æ˜¯$BCH$è¿‘ä¼¼å…¬å¼ï¼š</p>
<script type="math/tex; mode=display">
\ln (\exp(\phi_{1}^{\land})\exp(\phi_{2}^{\land}) )^{\lor} \approx
\left\{ \begin{array}{l}
J_l(\phi_{2})^{-1}\phi_{1}+\phi_{2}\ \ \ \ å½“\phi_{1}ä¸ºå°é‡\\
J_r(\phi_{1})^{-1}\phi_{2}+\phi_{1}\ \ \ \ å½“\phi_{2}ä¸ºå°é‡    \\
\end{array} \right.\tag{15}</script><p>æ­¤å¤„å°±æ˜¯ï¼šå¯¹ä»»æ„$R$</p>
<script type="math/tex; mode=display">
\ln (R\exp(\phi^{\land}) )^{\lor} \approx\ln(R)^{\lor}+J_r^{-1}\phi\tag{16}</script><p>å…¶ä¸­$J_r^{-1}$ä¸º$SO(3)$ä¸Šçš„å³é›…å¯æ¯”ï¼š</p>
<script type="math/tex; mode=display">
J_r^{-1}(\theta w)=\frac{1}{2}\cot\frac{\theta}{2}I+(1-\frac{\theta}{2}\cot\frac{\theta}{2})ww^T+\frac{\theta}{2}w^{\land}\tag{17}</script><p>â‘¡è¿™é‡Œå°†å¯¹$R_1$è¿›è¡Œä¸€æ¬¡çš„æ‰°åŠ¨$\Delta R_1$åŠ åœ¨å…¶å¯¹åº”çš„æä»£æ•°$\phi $ä¸Šï¼Œè€Œéæç¾¤ä¸Šã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{d\ ln(R_1R_2)^{\lor} }{dR_2}
&=\underset{\phi\rightarrow0}{lim}\frac{ln(R_1\cdot \exp(\phi^{\land})\ R_2)^{\lor}-ln(R_1R_2)^{\lor} }{\phi}\\
&=\underset{\phi\rightarrow0}{lim}\frac{ln(R_1R_2\cdot[R_2^T\cdot \exp(\phi^{\land})\ R_2])^{\lor}-ln(R_1R_2)^{\lor} }{\phi}\\
&=\underset{\phi\rightarrow0}{lim}\frac{ln(R_1R_2\exp((R_2^T\phi)^{\land}))^{\lor}-ln(R_1R_2)^{\lor} }{\phi}\\
&=J^{-1}_r(ln(R_1R_2)^{\lor})R_2^T
\end{align*}\tag{18}</script><p>ç¬¬ä¸€æ­¥åˆ°ç¬¬äºŒæ­¥ç”¨åˆ°äº†$sO(3)$çš„ä¼´éšæ€§è´¨ï¼š</p>
<script type="math/tex; mode=display">
R^T\exp(\phi^{\land})R=\exp((R^T\phi)^{\land})\tag{19}</script><p>æœ‰å…³ $SE(3)$ï¼šç”±äº$ SE(3)$ æä»£æ•°æ€§è´¨å¤æ‚ï¼Œåœ¨ VIO ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨$SO(3) + t $çš„å½¢å¼è¡¨è¾¾æ—‹è½¬å’Œå¹³ç§»ã€‚å¯¹å¹³ç§»éƒ¨åˆ†ä½¿ç”¨çŸ¢é‡æ›´æ–°è€Œé$SE(3) $ä¸Šçš„æ›´æ–°ã€‚</p>
]]></content>
      <categories>
        <category>ä»é›¶å¼€å§‹æ‰‹å†™VIO</category>
      </categories>
      <tags>
        <tag>VIO</tag>
        <tag>åˆšä½“è¿åŠ¨</tag>
      </tags>
  </entry>
  <entry>
    <title>aloam_velodyneyæºä»£ç æ·±åº¦è§£æ</title>
    <url>/posts/60089.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>ä½“éªŒè¿‡LOAMä»£ç ä¹‹åï¼Œå¤§å¤šæ•°äººåº”è¯¥å¯¹æºä»£ç æœ‰ç§ä¸å¤ªå¥½çš„å°è±¡ï¼Œæˆ‘è§‰å¾—æ›´å¤šæ˜¯å› ä¸ºLOAMä½œè€…å—å½“æ—¶å‘å±•çš„å±€é™ï¼Œæ²¡æœ‰ä½¿ç”¨åƒç°åœ¨æµè¡Œçš„æä»£æ•°ã€Eigenã€Ceresç­‰ï¼ŒA-LOAMå°±åœ¨å…¶åŸºç¡€ä¸Šå¯¹æºä»£ç è¿›è¡Œäº†æ”¹è¿›ï¼Œæœ€æ˜æ˜¾çš„å°±æ˜¯åæ ‡å˜åŒ–éƒ¨åˆ†å¼•å…¥äº†Eigenï¼Œä¼˜åŒ–éƒ¨åˆ†ä½¿ç”¨Ceresè‡ªåŠ¨æ±‚å¯¼ä»£æ›¿LOAMä½œè€…æ‰‹æ¨çš„ICPä¼˜åŒ–éƒ¨åˆ†ï¼Œä»£ç å˜å¾—ååˆ†ç®€æ´ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿé™ä½äº†LOAMç®—æ³•çš„æ•ˆç‡ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™ä½é¦™æ¸¯å¤§å­¦çš„ç§¦å¸ˆå…„å†™çš„ä»£ç è¿˜æ˜¯å¾ˆè®©äººä½©æœçš„ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹ROSèŠ‚ç‚¹å›¾ï¼Œæ˜æ˜¾å¯ä»¥å‘ç°æ¯”LOAMçš„ç®€æ´å¤ªå¤šäº†ï¼š</p>
<p><img src="/images/aloamæºç è§£æ/1308994-20200506202232477-859678963.png" alt="img"></p>
]]></content>
      <categories>
        <category>SLAMé¡¹ç›®å®è·µ</category>
      </categories>
      <tags>
        <tag>ALOAM</tag>
      </tags>
  </entry>
  <entry>
    <title>LOAMæºä»£ç æ·±åº¦è§£æ</title>
    <url>/posts/49015.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>å¯¹äºLOAMçš„è®ºæ–‡ä»¥åŠåŸç†æ¸…æ™°ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è®ºæ–‡ç®—æ³•çš„å…·ä½“å®ç°åšæ·±åº¦å‰–æï¼Œåšåˆ°å°†è®ºæ–‡çš„æ¯ä¸€éƒ¨åˆ†ä¸ä»£ç ç›¸å¯¹åº”ï¼Œå¹¶å­¦ä¹ LOAMå®ç°çš„æ–¹å¼ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="â… -æ¦‚è¿°"><a href="#â… -æ¦‚è¿°" class="headerlink" title="â… .æ¦‚è¿°"></a>â… .æ¦‚è¿°</h1><p>ç”±äºLOAMä½¿ç”¨æœºå™¨äººæ“ä½œç³»ç»Ÿ(ROS)è¿›è¡Œç®¡ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯”è¾ƒå…³æ³¨èŠ‚ç‚¹å’Œæ¶ˆæ¯å‘å¸ƒä¸æ¥æ”¶çš„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡rqt_graphæŸ¥çœ‹æ‰€æœ‰çš„èŠ‚ç‚¹ä»¥åŠæ¶ˆæ¯ä¹‹é—´çš„å…³ç³»ï¼Œä»£ç çš„æ¡†æ¶å›¾ï¼š</p>
<p><img src="/images/LOAMæºä»£ç è§£æ/rosgraph_loam-16498556914162.png" alt="rosgraph_loam"></p>
<p>å…¶ä¸­æ¤­åœ†æ¡†ä»£è¡¨èŠ‚ç‚¹(node)ï¼ŒçŸ©å½¢æ¡†ä»£è¡¨æ¶ˆæ¯(Message)ã€‚</p>
<h1 id="â…¡-scanRegistration"><a href="#â…¡-scanRegistration" class="headerlink" title="â…¡.scanRegistration"></a>â…¡.scanRegistration</h1><p> <span style="color:red;"><strong>èŠ‚ç‚¹çš„ä¸»è¦åŠŸèƒ½:</strong></span> <span style="color:blue;"><strong>å¯¹ç‚¹äº‘å’ŒIMUæ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œç”¨äºç‰¹å¾ç‚¹çš„é…å‡†ã€‚</strong></span> </p>
<p><img src="/images/LOAMæºä»£ç è§£æ/image-20220416144530168.png" alt="image-20220416144530168"></p>
<h2 id="A-laserCloudHandler"><a href="#A-laserCloudHandler" class="headerlink" title="A.laserCloudHandler"></a>A.laserCloudHandler</h2><p><img src="/images/LOAMæºä»£ç è§£æ/image-20220414193914478.png" alt="image-20220414193914478"></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ‰«æå‘¨æœŸ, velodyneé¢‘ç‡10Hzï¼Œå‘¨æœŸ0.1s</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> scanPeriod = <span class="number">0.1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–æ§åˆ¶å˜é‡</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> systemDelay = <span class="number">20</span>; <span class="comment">//å¼ƒç”¨å‰20å¸§åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="keyword">int</span> systemInitCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> systemInited = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¿€å…‰é›·è¾¾çº¿æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N_SCANS = <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç‚¹äº‘æ›²ç‡, 40000ä¸ºä¸€å¸§ç‚¹äº‘ä¸­ç‚¹çš„æœ€å¤§æ•°é‡</span></span><br><span class="line"><span class="keyword">float</span> cloudCurvature[<span class="number">40000</span>];</span><br><span class="line"><span class="comment">//æ›²ç‡ç‚¹å¯¹åº”çš„åºå·</span></span><br><span class="line"><span class="keyword">int</span> cloudSortInd[<span class="number">40000</span>];</span><br><span class="line"><span class="comment">//ç‚¹æ˜¯å¦ç­›é€‰è¿‡æ ‡å¿—ï¼š0-æœªç­›é€‰è¿‡ï¼Œ1-ç­›é€‰è¿‡</span></span><br><span class="line"><span class="keyword">int</span> cloudNeighborPicked[<span class="number">40000</span>];</span><br><span class="line"><span class="comment">//ç‚¹åˆ†ç±»æ ‡å·:2-ä»£è¡¨æ›²ç‡å¾ˆå¤§ï¼Œ1-ä»£è¡¨æ›²ç‡æ¯”è¾ƒå¤§,-1-ä»£è¡¨æ›²ç‡å¾ˆå°ï¼Œ0-æ›²ç‡æ¯”è¾ƒå°(å…¶ä¸­1åŒ…å«äº†2,0åŒ…å«äº†1,0å’Œ1æ„æˆäº†ç‚¹äº‘å…¨éƒ¨çš„ç‚¹)</span></span><br><span class="line"><span class="keyword">int</span> cloudLabel[<span class="number">40000</span>];</span><br></pre></td></tr></table></figure>
<p><code>N_SCANS</code> æ˜¯å°† <code>3D</code> çš„æ¿€å…‰ç‚¹äº‘æŒ‰ç…§æ¿€å…‰çš„æ¥å—å™¨åšäº†ä¸ªåˆ’åˆ†ï¼Œæ¯”å¦‚ <code>N_SCANS</code>æ˜¯ $16 $è¡¨æ˜æ˜¯ $16 $çº¿çš„æ¿€å…‰ï¼ˆç¨‹åºä¸­çš„é»˜è®¤å€¼ï¼Œä½œè€…ç”¨è¿‡ <code>velodyne16</code>ï¼‰ã€‚</p>
<p>è®ºæ–‡ä¸­å­˜å‚¨æ¯ä¸ªç‚¹çš„æ›²ç‡ç”¨çš„æ˜¯æ•°ç»„ï¼Œå› æ­¤éœ€è¦è€ƒè™‘æ•°ç»„çš„å¤§å°ï¼Œè¿™é‡Œè®¾ç½®ä¸ºäº†$40000$ï¼Œå¦å¤–ä½¿ç”¨<code>cloudLabel</code>æ¥æ ‡è®°è®ºæ–‡ä¸­æåˆ°çš„å°†æ‰«æåˆ†å‰²æˆå››ä¸ªç›¸åŒçš„å­åŒºåŸŸï¼Œ2-ä»£è¡¨æ›²ç‡å¾ˆå¤§(sharp)ï¼Œ1-ä»£è¡¨æ›²ç‡æ¯”è¾ƒå¤§(less_sharp)ï¼Œ-1-ä»£è¡¨æ›²ç‡å¾ˆå°(flat)ï¼Œ0-æ›²ç‡æ¯”è¾ƒå°(less_flat)ã€‚</p>
<h3 id="1-çº¿æŸæ¨¡å‹"><a href="#1-çº¿æŸæ¨¡å‹" class="headerlink" title="1.çº¿æŸæ¨¡å‹"></a>1.çº¿æŸæ¨¡å‹</h3><p>å¯¹äºä¸€å †ç‚¹äº‘å¹¶ä¸æ˜¯åƒ LaserScanï¼ˆäºŒç»´çš„æ•°æ®ç»“æ„ï¼‰é‚£æ ·æŒ‰ç…§è§’åº¦ç»™å‡ºä¸ªè·ç¦»å€¼ï¼Œä¿è¯æ¯æ¬¡çš„æ‰«æéƒ½èƒ½å¤Ÿæœ‰ç›¸åŒå¤§å°çš„æ•°æ®é‡ã€‚PointCloud2 æ¥å—åˆ°çš„ç‚¹äº‘çš„å¤§å°åœ¨å˜åŒ–ï¼Œå› æ­¤åœ¨æ•°æ®åˆ°è¾¾éœ€è¦ä¸€äº›è¿ç®—æ¥åˆ¤æ–­ç‚¹çš„ä¸€äº›ç‰¹æ€§ã€‚ä¾‹å¦‚ä¸‹é¢è¿™æ®µé€šè¿‡è®¡ç®— pitch è§’åº¦åˆ¤æ–­è¯¥ç‚¹å±äºå“ªä¸ª<code>Scan</code>ã€‚</p>
<p>(å…·ä½“æŸ¥çœ‹ï¼š<a href="https://lukeyalvin.top/2022/04/11/loam%E8%AE%BA%E6%96%87%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/#A-%E7%BA%BF%E6%9D%9F%E6%A8%A1%E5%9E%8B">loamè®ºæ–‡æ·±åº¦è§£æ-â…¢.ç‰¹å¾æå–ï¼ˆç‚¹äº‘æ³¨å†Œï¼‰A.çº¿æŸæ¨¡å‹</a>)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// lidaræ‰«æçº¿æ˜¯å¦æ—‹è½¬è¿‡åŠ</span></span><br><span class="line"><span class="keyword">bool</span> halfPassed = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">int</span> count = cloudSize;</span><br><span class="line">PointType point;</span><br><span class="line">std::vector&lt;pcl::PointCloud&lt;PointType&gt;&gt; <span class="built_in">laserCloudScans</span>(N_SCANS);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cloudSize; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åæ ‡è½´äº¤æ¢ï¼Œvelodyne lidarçš„åæ ‡ç³»ä¹Ÿè½¬æ¢åˆ°zè½´å‘å‰ï¼Œxè½´å‘å·¦çš„å³æ‰‹åæ ‡ç³»</span></span><br><span class="line">    point.x = laserCloudIn.points[i].y;</span><br><span class="line">    point.y = laserCloudIn.points[i].z;</span><br><span class="line">    point.z = laserCloudIn.points[i].x;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—ç‚¹çš„ä»°è§’(æ ¹æ®lidaræ–‡æ¡£å‚ç›´è§’è®¡ç®—å…¬å¼),æ ¹æ®ä»°è§’æ’åˆ—æ¿€å…‰çº¿å·ï¼Œvelodyneæ¯ä¸¤ä¸ªscanä¹‹é—´é—´éš”2åº¦</span></span><br><span class="line">    <span class="keyword">float</span> angle = <span class="built_in">atan</span>(point.y / <span class="built_in">sqrt</span>(point.x * point.x + point.z * point.z)) * <span class="number">180</span> / M_PI;</span><br><span class="line">    <span class="keyword">int</span> scanID;</span><br><span class="line">    <span class="comment">//ä»°è§’å››èˆäº”å…¥(åŠ å‡0.5æˆªæ–­æ•ˆæœç­‰äºå››èˆäº”å…¥)</span></span><br><span class="line">    <span class="keyword">int</span> roundedAngle = <span class="built_in"><span class="keyword">int</span></span>(angle + (angle &lt; <span class="number">0.0</span> ? <span class="number">-0.5</span> : +<span class="number">0.5</span>));</span><br><span class="line">    <span class="keyword">if</span> (roundedAngle &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    	scanID = roundedAngle;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">    	scanID = roundedAngle + (N_SCANS - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿‡æ»¤ç‚¹ï¼ŒåªæŒ‘é€‰[-15åº¦ï¼Œ+15åº¦]èŒƒå›´å†…çš„ç‚¹,scanIDå±äº[0,15]</span></span><br><span class="line">    <span class="keyword">if</span> (scanID &gt; (N_SCANS - <span class="number">1</span>) || scanID &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘è¿™é‡Œ8-11è¡Œçš„åæ ‡è½´å˜æ¢ï¼Œæœ‰ç‚¹ç»•ï¼Œä½œè€…çš„æ„æ€å°±æ˜¯æŠŠvelodyne lidarçš„åæ ‡ç³»ä¹Ÿè½¬æ¢åˆ°zè½´å‘å‰ï¼Œxè½´å‘å·¦çš„å³æ‰‹åæ ‡ç³»ï¼š</p>
<p><img src="/images/LOAMæºä»£ç è§£æ/image-20220414153416294.png" alt="image-20220414153416294" style="zoom:50%;" /></p>
<p>ç„¶åå°±æ˜¯åˆ©ç”¨å‹¾è‚¡å®šç†ä¸ä¸‰è§’å‡½æ•°ç›¸å…³çš„çŸ¥è¯†æ±‚å‡ºä»°è§’$Pitch=atan(z/\sqrt{x^2+y^2})$ï¼Œå³å¯æ ¹æ®è¯¥è§’åº¦åˆ¤æ–­ç‚¹äº‘å±äºå“ªæ¡<code>Scan</code>ï¼Œè¿™æ ·å°±å¯ä»¥è®¡ç®—å‡ºæ¯ä¸ªç‚¹çš„<code>scanID</code>ã€‚</p>
<hr>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ‰«æå‘¨æœŸ, velodyneé¢‘ç‡10Hzï¼Œå‘¨æœŸ0.1s</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> scanPeriod = <span class="number">0.1</span>;</span><br><span class="line"><span class="keyword">typedef</span> pcl::PointXYZI PointType;</span><br><span class="line">PointType point;</span><br><span class="line">...</span><br><span class="line"><span class="comment">//-0.5 &lt; relTime &lt; 1.5ï¼ˆç‚¹æ—‹è½¬çš„è§’åº¦ä¸æ•´ä¸ªå‘¨æœŸæ—‹è½¬è§’åº¦çš„æ¯”ç‡, å³ç‚¹äº‘ä¸­ç‚¹çš„ç›¸å¯¹æ—¶é—´ï¼‰</span></span><br><span class="line"><span class="keyword">float</span> relTime = (ori - startOri) / (endOri - startOri);</span><br><span class="line"><span class="comment">//ç‚¹å¼ºåº¦=çº¿å·+ç‚¹ç›¸å¯¹æ—¶é—´ï¼ˆå³ä¸€ä¸ªæ•´æ•°+ä¸€ä¸ªå°æ•°ï¼Œæ•´æ•°éƒ¨åˆ†æ˜¯çº¿å·ï¼Œå°æ•°éƒ¨åˆ†æ˜¯è¯¥ç‚¹çš„ç›¸å¯¹æ—¶é—´ï¼‰,åŒ€é€Ÿæ‰«æï¼šæ ¹æ®å½“å‰æ‰«æçš„è§’åº¦å’Œæ‰«æå‘¨æœŸè®¡ç®—ç›¸å¯¹æ‰«æèµ·å§‹ä½ç½®çš„æ—¶é—´</span></span><br><span class="line">point.intensity = scanID + scanPeriod * relTime;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ç‚¹äº‘ä¸­ç‚¹çš„ç›¸å¯¹æ—¶é—´æ˜¯ç”¨å½“å‰çš„ç‚¹æ—‹è½¬çš„è§’åº¦å æ•´ä¸ªå‘¨æœŸæ—‹è½¬è§’åº¦çš„æ¯”ï¼Œç„¶åä½¿ç”¨<code>PointXYZI</code>ç‚¹äº‘ç±»å‹å­˜å‚¨ç‚¹äº‘æ•°æ®ï¼Œæ•´æ•°éƒ¨åˆ†ï¼šscan IDï¼Œå°æ•°éƒ¨åˆ†ï¼šæ¯ä¸ªç‚¹æ‰«æçš„æ—¶é—´ã€‚</p>
<blockquote>
<p><code>PointXYZI</code>æ˜¯ä¸€ä¸ªç®€å•çš„<code>XYZ</code>åæ ‡åŠ <code>intensity</code>çš„<code>point</code>ç±»å‹ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™å››ä¸ªå˜é‡å°†æ–°å»ºå•ç‹¬ä¸€ä¸ªç»“æ„ä½“ï¼Œå¹¶ä¸”æ»¡è¶³å­˜å‚¨å¯¹é½ï¼Œç„¶è€Œï¼Œç”±äº<code>point</code>çš„å¤§éƒ¨åˆ†æ“ä½œä¼šæŠŠ<code>data[4]</code>å…ƒç´ è®¾ç½®æˆ$0$æˆ–$1$ï¼ˆç”¨äºå˜æ¢ï¼‰ï¼Œä¸èƒ½è®©<code>intensity</code>ä¸<code>xyz</code>åœ¨åŒä¸€ä¸ªç»“æ„ä½“ä¸­ï¼Œå¦‚æœè¿™æ ·çš„è¯å…¶å†…å®¹å°†ä¼šè¢«è¦†ç›–ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªç‚¹çš„ç‚¹ç§¯ä¼šæŠŠä»–ä»¬çš„ç¬¬å››ä¸ªå…ƒç´ è®¾ç½®æˆ0ï¼Œå¦åˆ™è¯¥ç‚¹ç§¯æ²¡æœ‰æ„ä¹‰ï¼Œç­‰ç­‰ã€‚å› æ­¤ï¼Œå¯¹äºå…¼å®¹å­˜å‚¨å¯¹é½ï¼Œç”¨ä¸‰ä¸ªé¢å¤–çš„æµ®ç‚¹æ•°æ¥å¡«è¡¥intensityï¼Œè¿™æ ·åœ¨å­˜å‚¨æ–¹é¢æ•ˆç‡è¾ƒä½ï¼Œä½†æ˜¯ç¬¦åˆå­˜å‚¨å¯¹é½è¦æ±‚ï¼Œè¿è¡Œæ•ˆç‡è¾ƒé«˜ã€‚</p>
</blockquote>
<hr>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">    <span class="comment">//IMUéƒ¨åˆ†ä»£ç .......</span></span><br><span class="line">    laserCloudScans[scanID].<span class="built_in">push_back</span>(point);<span class="comment">//å°†æ¯ä¸ªè¡¥å¿çŸ«æ­£ï¼ˆIMUéƒ¨åˆ†ä»£ç ï¼‰çš„ç‚¹æ”¾å…¥å¯¹åº”çº¿å·çš„å®¹å™¨</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è·å¾—æœ‰æ•ˆèŒƒå›´å†…çš„ç‚¹çš„æ•°é‡</span></span><br><span class="line">cloudSize = count;</span><br><span class="line"></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">laserCloud</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N_SCANS; i++)</span><br><span class="line">&#123; 	<span class="comment">//å°†æ‰€æœ‰çš„ç‚¹æŒ‰ç…§çº¿å·ä»å°åˆ°å¤§æ”¾å…¥ä¸€ä¸ªå®¹å™¨</span></span><br><span class="line">    *laserCloud += laserCloudScans[i];<span class="comment">// æ›´æ–°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘å°†ç‚¹å‹å…¥åˆ°æ¯ä¸ªçº¿ä¸­ï¼Œç„¶åå¾ªç¯è¿­ä»£æ¯ä¸€æ¡<code>Scan</code>,æ›´æ–°åˆ°æ€»çš„ç‚¹äº‘<code>laserCloud</code>ã€‚</p>
<hr>
<h3 id="2-æ’å…¥IMUæ•°æ®"><a href="#2-æ’å…¥IMUæ•°æ®" class="headerlink" title="2.æ’å…¥IMUæ•°æ®"></a>2.æ’å…¥IMUæ•°æ®</h3><p>æ’å…¥<code>IMU</code>æ•°æ®çš„ç›®çš„å°±æ˜¯æ ¡æ­£ç‚¹äº‘ç•¸å˜ï¼Œè®ºæ–‡ä¸­æåˆ°è“è‰²çº¿æ®µè¡¨ç¤ºæ‰«æ$k$æ—¶æ„ŸçŸ¥åˆ°çš„ç‚¹äº‘ $P_k$ï¼Œåœ¨$k$æ¬¡æ‰«æç»“æŸæ—¶ï¼Œç»è¿‡<strong>ç•¸å˜æ ¡æ­£</strong>ä¹‹åå°†$P_k$é‡æ–°æŠ•å½±åˆ°æ—¶é—´æˆ³$t_{k+1}$ï¼Œå¾—åˆ°ç»¿è‰²çº¿æ®µ$\overline{P}_k$ï¼Œè¿™é‡Œçš„ç•¸å˜æ ¡æ­£ä½¿ç”¨çš„å°±æ˜¯æ’å…¥<code>IMU</code>æ•°æ®è¿›è¡Œè¡¥å¿æ¥è¿›è¡Œæ ¡æ­£çš„ã€‚é€šè¿‡ä»£ç çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨<code>IMU</code>è¿›è¡Œæ ¡æ­£çš„ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// lidaræ‰«æçº¿æ˜¯å¦æ—‹è½¬è¿‡åŠ</span></span><br><span class="line"><span class="keyword">bool</span> halfPassed = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">int</span> count = cloudSize;</span><br><span class="line">PointType point;</span><br><span class="line">std::vector&lt;pcl::PointCloud&lt;PointType&gt;&gt; <span class="built_in">laserCloudScans</span>(N_SCANS);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cloudSize; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// çº¿æŸæ¨¡å‹éƒ¨åˆ†çš„ä»£ç ....</span></span><br><span class="line">  <span class="keyword">float</span> relTime = (ori - startOri) / (endOri - startOri);</span><br><span class="line">  <span class="comment">//ç‚¹å¼ºåº¦=çº¿å·+ç‚¹ç›¸å¯¹æ—¶é—´ï¼ˆå³ä¸€ä¸ªæ•´æ•°+ä¸€ä¸ªå°æ•°ï¼Œæ•´æ•°éƒ¨åˆ†æ˜¯çº¿å·ï¼Œå°æ•°éƒ¨åˆ†æ˜¯è¯¥ç‚¹çš„ç›¸å¯¹æ—¶é—´ï¼‰,åŒ€é€Ÿæ‰«æï¼šæ ¹æ®å½“å‰æ‰«æçš„è§’åº¦å’Œæ‰«æå‘¨æœŸè®¡ç®—ç›¸å¯¹æ‰«æèµ·å§‹ä½ç½®çš„æ—¶é—´</span></span><br><span class="line">  point.intensity = scanID + scanPeriod * relTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç‚¹æ—¶é—´=ç‚¹äº‘æ—¶é—´+å‘¨æœŸæ—¶é—´</span></span><br><span class="line">  <span class="keyword">if</span> (imuPointerLast &gt;= <span class="number">0</span>)</span><br><span class="line">  &#123;                                         <span class="comment">//å¦‚æœæ”¶åˆ°IMUæ•°æ®,ä½¿ç”¨IMUçŸ«æ­£ç‚¹äº‘ç•¸å˜</span></span><br><span class="line">    <span class="keyword">float</span> pointTime = relTime * scanPeriod; <span class="comment">//è®¡ç®—ç‚¹çš„å‘¨æœŸæ—¶é—´</span></span><br><span class="line">    <span class="comment">//å¯»æ‰¾æ˜¯å¦æœ‰ç‚¹äº‘çš„æ—¶é—´æˆ³å°äºIMUçš„æ—¶é—´æˆ³çš„IMUä½ç½®:imuPointerFront</span></span><br><span class="line">    <span class="keyword">while</span> (imuPointerFront != imuPointerLast)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> (timeScanCur + pointTime &lt; imuTime[imuPointerFront])</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      imuPointerFront = (imuPointerFront + <span class="number">1</span>) % imuQueLength;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (timeScanCur + pointTime &gt; imuTime[imuPointerFront])</span><br><span class="line">    &#123; <span class="comment">//æ²¡æ‰¾åˆ°,æ­¤æ—¶imuPointerFront==imtPointerLast,åªèƒ½ä»¥å½“å‰æ”¶åˆ°çš„æœ€æ–°çš„IMUçš„é€Ÿåº¦ï¼Œä½ç§»ï¼Œæ¬§æ‹‰è§’ä½œä¸ºå½“å‰ç‚¹çš„é€Ÿåº¦ï¼Œä½ç§»ï¼Œæ¬§æ‹‰è§’ä½¿ç”¨</span></span><br><span class="line">      imuRollCur = imuRoll[imuPointerFront];</span><br><span class="line">      imuPitchCur = imuPitch[imuPointerFront];</span><br><span class="line">      imuYawCur = imuYaw[imuPointerFront];</span><br><span class="line"></span><br><span class="line">      imuVeloXCur = imuVeloX[imuPointerFront];</span><br><span class="line">      imuVeloYCur = imuVeloY[imuPointerFront];</span><br><span class="line">      imuVeloZCur = imuVeloZ[imuPointerFront];</span><br><span class="line"></span><br><span class="line">      imuShiftXCur = imuShiftX[imuPointerFront];</span><br><span class="line">      imuShiftYCur = imuShiftY[imuPointerFront];</span><br><span class="line">      imuShiftZCur = imuShiftZ[imuPointerFront];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123; <span class="comment">//æ‰¾åˆ°äº†ç‚¹äº‘æ—¶é—´æˆ³å°äºIMUæ—¶é—´æˆ³çš„IMUä½ç½®,åˆ™è¯¥ç‚¹å¿…å¤„äºimuPointerBackå’ŒimuPointerFrontä¹‹é—´ï¼Œæ®æ­¤çº¿æ€§æ’å€¼ï¼Œè®¡ç®—ç‚¹äº‘ç‚¹çš„é€Ÿåº¦ï¼Œä½ç§»å’Œæ¬§æ‹‰è§’</span></span><br><span class="line">      <span class="keyword">int</span> imuPointerBack = (imuPointerFront + imuQueLength - <span class="number">1</span>) % imuQueLength;</span><br><span class="line">      <span class="comment">//æŒ‰æ—¶é—´è·ç¦»è®¡ç®—æƒé‡åˆ†é…æ¯”ç‡,ä¹Ÿå³çº¿æ€§æ’å€¼</span></span><br><span class="line">      <span class="keyword">float</span> ratioFront = (timeScanCur + pointTime - imuTime[imuPointerBack]) / (imuTime[imuPointerFront] - imuTime[imuPointerBack]);</span><br><span class="line">      <span class="keyword">float</span> ratioBack = (imuTime[imuPointerFront] - timeScanCur - pointTime) / (imuTime[imuPointerFront] - imuTime[imuPointerBack]);</span><br><span class="line"></span><br><span class="line">      imuRollCur = imuRoll[imuPointerFront] * ratioFront + imuRoll[imuPointerBack] * ratioBack;</span><br><span class="line">      imuPitchCur = imuPitch[imuPointerFront] * ratioFront + imuPitch[imuPointerBack] * ratioBack;</span><br><span class="line">      <span class="keyword">if</span> (imuYaw[imuPointerFront] - imuYaw[imuPointerBack] &gt; M_PI)</span><br><span class="line">      &#123;</span><br><span class="line">        imuYawCur = imuYaw[imuPointerFront] * ratioFront + (imuYaw[imuPointerBack] + <span class="number">2</span> * M_PI) * ratioBack;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (imuYaw[imuPointerFront] - imuYaw[imuPointerBack] &lt; -M_PI)</span><br><span class="line">      &#123;</span><br><span class="line">        imuYawCur = imuYaw[imuPointerFront] * ratioFront + (imuYaw[imuPointerBack] - <span class="number">2</span> * M_PI) * ratioBack;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        imuYawCur = imuYaw[imuPointerFront] * ratioFront + imuYaw[imuPointerBack] * ratioBack;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æœ¬è´¨:imuVeloXCur = imuVeloX[imuPointerback] + (imuVelX[imuPointerFront]-imuVelX[imuPoniterBack])*ratioFront</span></span><br><span class="line">      imuVeloXCur = imuVeloX[imuPointerFront] * ratioFront + imuVeloX[imuPointerBack] * ratioBack;</span><br><span class="line">      imuVeloYCur = imuVeloY[imuPointerFront] * ratioFront + imuVeloY[imuPointerBack] * ratioBack;</span><br><span class="line">      imuVeloZCur = imuVeloZ[imuPointerFront] * ratioFront + imuVeloZ[imuPointerBack] * ratioBack;</span><br><span class="line"></span><br><span class="line">      imuShiftXCur = imuShiftX[imuPointerFront] * ratioFront + imuShiftX[imuPointerBack] * ratioBack;</span><br><span class="line">      imuShiftYCur = imuShiftY[imuPointerFront] * ratioFront + imuShiftY[imuPointerBack] * ratioBack;</span><br><span class="line">      imuShiftZCur = imuShiftZ[imuPointerFront] * ratioFront + imuShiftZ[imuPointerBack] * ratioBack;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">    &#123; <span class="comment">//å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªç‚¹,è®°ä½ç‚¹äº‘èµ·å§‹ä½ç½®çš„é€Ÿåº¦ï¼Œä½ç§»ï¼Œæ¬§æ‹‰è§’</span></span><br><span class="line">      imuRollStart = imuRollCur;</span><br><span class="line">      imuPitchStart = imuPitchCur;</span><br><span class="line">      imuYawStart = imuYawCur;</span><br><span class="line"></span><br><span class="line">      imuVeloXStart = imuVeloXCur;</span><br><span class="line">      imuVeloYStart = imuVeloYCur;</span><br><span class="line">      imuVeloZStart = imuVeloZCur;</span><br><span class="line"></span><br><span class="line">      imuShiftXStart = imuShiftXCur;</span><br><span class="line">      imuShiftYStart = imuShiftYCur;</span><br><span class="line">      imuShiftZStart = imuShiftZCur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123; <span class="comment">//è®¡ç®—ä¹‹åæ¯ä¸ªç‚¹ç›¸å¯¹äºç¬¬ä¸€ä¸ªç‚¹çš„ç”±äºåŠ å‡é€ŸéåŒ€é€Ÿè¿åŠ¨äº§ç”Ÿçš„ä½ç§»é€Ÿåº¦ç•¸å˜ï¼Œå¹¶å¯¹ç‚¹äº‘ä¸­çš„æ¯ä¸ªç‚¹ä½ç½®ä¿¡æ¯é‡æ–°è¡¥å¿çŸ«æ­£</span></span><br><span class="line">      <span class="built_in">ShiftToStartIMU</span>(pointTime);</span><br><span class="line">      <span class="built_in">VeloToStartIMU</span>();</span><br><span class="line">      <span class="built_in">TransformToStartIMU</span>(&amp;point);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  laserCloudScans[scanID].<span class="built_in">push_back</span>(point); <span class="comment">//å°†æ¯ä¸ªè¡¥å¿çŸ«æ­£çš„ç‚¹æ”¾å…¥å¯¹åº”çº¿å·çš„å®¹å™¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆªæ­¢åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æŠŠä¸€å¸§æ‚ä¹±çš„ç‚¹äº‘æ•°æ®æœ‰æ¡ç†çš„æ”¾åœ¨äº†å®¹å™¨é‡Œ</p>
<h3 id="3-æ›²ç‡è®¡ç®—"><a href="#3-æ›²ç‡è®¡ç®—" class="headerlink" title="3.æ›²ç‡è®¡ç®—"></a>3.æ›²ç‡è®¡ç®—</h3><p>åœ¨å‰é¢çš„è®ºæ–‡æ·±åº¦å‰–æä¸­ï¼Œæˆ‘ä»¬æåˆ°ç‚¹äº‘çš„æ³¨å†Œå°±æ˜¯è¿›è¡Œç‰¹å¾æå–ï¼Œè€ŒLOAMè¿›è¡Œç‰¹å¾æå–é‡‡ç”¨çš„æ˜¯æ›²ç‡$c$è¿›è¡Œåˆ¤æ–­çš„ï¼Œæå–çš„ç‰¹å¾ä¸»è¦ä¸ºè¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹ä¸¤ç§ç‰¹å¾ã€‚</p>
<p><strong>å¹³é¢å…‰æ»‘åº¦</strong>$c$ï¼š</p>
<script type="math/tex; mode=display">
c=\frac{1}{|S|Â·\parallel X^L_{(k,i)}\parallel} \sum_{j\in S,j\ne i} \parallel (X^L_{(k,i)}-X^L_{(k,j)}) \parallel \tag{1}</script><p><strong>ä»£ç éƒ¨åˆ†ï¼š</strong></p>
<p>è¿™é‡Œè®¡ç®—æ›²ç‡çš„æ–¹å¼å’Œè®ºæ–‡ä¸­æœ‰ç‚¹ä¸åŒï¼Œè®¡ç®—ä»¥æŸç‚¹ä¸å…¶ç›¸é‚»çš„$10$ä¸ªç‚¹æ‰€æ„æˆçš„å¹³é¢åœ¨è¯¥ç‚¹å‡ºçš„æ›²ç‡ï¼š</p>
<p>ç”±æ›²ç‡å…¬å¼çŸ¥ï¼š$K=1/R$ï¼Œå› æ­¤ä¸ºç®€åŒ–è®¡ç®—å¯é€šè¿‡$10$ä¸ªå‘é‡çš„å’Œå‘é‡çš„æ¨¡é•¿è¡¨ç¤ºå…¶åœ¨è¯¥ç‚¹å¤„æ›²ç‡åŠå¾„çš„é•¿ï¼Œå› æ­¤$RÃ—R$å¯ç”¨æ¥è¡¨ç¤ºæ›²ç‡çš„å¤§å° $RÃ—R$è¶Šå¤§ï¼Œè¯¥ç‚¹å¤„è¶Šä¸å¹³å¦ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> scanCount = <span class="number">-1</span>;</span><br><span class="line"><span class="comment">// é€‰å–è¯¥ç‚¹å‘¨å›´åä¸ªç‚¹ï¼ˆå‘å‰æ‰¾äº”ä¸ªï¼Œå‘åæ‰¾äº”ä¸ªï¼‰ï¼Œå°†è¿™åä¸ªç‚¹çš„åæ ‡åˆ†åˆ«å’Œè¯¥ç‚¹ä½œå·®ï¼Œå¾—åˆ°æ¯ä¸€ç»´åæ ‡çš„å·®å€¼</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">5</span>; i &lt; cloudSize - <span class="number">5</span>; i++) </span><br><span class="line">&#123;<span class="comment">//ä½¿ç”¨æ¯ä¸ªç‚¹çš„å‰åäº”ä¸ªç‚¹è®¡ç®—æ›²ç‡ï¼Œå› æ­¤å‰äº”ä¸ªä¸æœ€åäº”ä¸ªç‚¹è·³è¿‡</span></span><br><span class="line">    <span class="keyword">float</span> diffX = laserCloud-&gt;points[i - <span class="number">5</span>].x + laserCloud-&gt;points[i - <span class="number">4</span>].x </span><br><span class="line">                + laserCloud-&gt;points[i - <span class="number">3</span>].x + laserCloud-&gt;points[i - <span class="number">2</span>].x </span><br><span class="line">                + laserCloud-&gt;points[i - <span class="number">1</span>].x - <span class="number">10</span> * laserCloud-&gt;points[i].x </span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">1</span>].x + laserCloud-&gt;points[i + <span class="number">2</span>].x</span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">3</span>].x + laserCloud-&gt;points[i + <span class="number">4</span>].x</span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">5</span>].x;</span><br><span class="line">    <span class="keyword">float</span> diffY = laserCloud-&gt;points[i - <span class="number">5</span>].y + laserCloud-&gt;points[i - <span class="number">4</span>].y </span><br><span class="line">                + laserCloud-&gt;points[i - <span class="number">3</span>].y + laserCloud-&gt;points[i - <span class="number">2</span>].y </span><br><span class="line">                + laserCloud-&gt;points[i - <span class="number">1</span>].y - <span class="number">10</span> * laserCloud-&gt;points[i].y </span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">1</span>].y + laserCloud-&gt;points[i + <span class="number">2</span>].y</span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">3</span>].y + laserCloud-&gt;points[i + <span class="number">4</span>].y</span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">5</span>].y;</span><br><span class="line">    <span class="keyword">float</span> diffZ = laserCloud-&gt;points[i - <span class="number">5</span>].z + laserCloud-&gt;points[i - <span class="number">4</span>].z </span><br><span class="line">                + laserCloud-&gt;points[i - <span class="number">3</span>].z + laserCloud-&gt;points[i - <span class="number">2</span>].z </span><br><span class="line">                + laserCloud-&gt;points[i - <span class="number">1</span>].z - <span class="number">10</span> * laserCloud-&gt;points[i].z </span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">1</span>].z + laserCloud-&gt;points[i + <span class="number">2</span>].z</span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">3</span>].z + laserCloud-&gt;points[i + <span class="number">4</span>].z</span><br><span class="line">                + laserCloud-&gt;points[i + <span class="number">5</span>].z;</span><br><span class="line">    <span class="comment">//æ›²ç‡è®¡ç®—ï¼ˆå°†ä¸‰ä¸ªç»´åº¦çš„å·®å€¼æ±‚å¹³æ–¹å’Œå¾—åˆ°RÃ—Rï¼‰</span></span><br><span class="line">    cloudCurvature[i] = diffX * diffX + diffY * diffY + diffZ * diffZ;</span><br><span class="line">    <span class="comment">//è®°å½•æ›²ç‡ç‚¹çš„ç´¢å¼•</span></span><br><span class="line">    cloudSortInd[i] = i;</span><br><span class="line">    <span class="comment">//åˆå§‹æ—¶ï¼Œç‚¹å…¨æœªç­›é€‰è¿‡</span></span><br><span class="line">    cloudNeighborPicked[i] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–ä¸ºless flatç‚¹</span></span><br><span class="line">    cloudLabel[i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¯ä¸ªscanï¼Œåªæœ‰ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç‚¹ä¼šè¿›æ¥ï¼Œå› ä¸ºæ¯ä¸ªscançš„ç‚¹éƒ½åœ¨ä¸€èµ·å­˜æ”¾</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloud-&gt;points[i].intensity) != scanCount) </span><br><span class="line">    &#123;</span><br><span class="line">      scanCount = <span class="built_in"><span class="keyword">int</span></span>(laserCloud-&gt;points[i].intensity);<span class="comment">//æ§åˆ¶æ¯ä¸ªscanåªè¿›å…¥ç¬¬ä¸€ä¸ªç‚¹</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//æ›²ç‡åªå–åŒä¸€ä¸ªscanè®¡ç®—å‡ºæ¥çš„ï¼Œè·¨scanè®¡ç®—çš„æ›²ç‡éæ³•ï¼Œæ’é™¤ï¼Œä¹Ÿå³æ’é™¤æ¯ä¸ªscançš„å‰åäº”ä¸ªç‚¹</span></span><br><span class="line">      <span class="keyword">if</span> (scanCount &gt; <span class="number">0</span> &amp;&amp; scanCount &lt; N_SCANS) </span><br><span class="line">      &#123;</span><br><span class="line">        scanStartInd[scanCount] = i + <span class="number">5</span>;	<span class="comment">// è¯¥scançš„èµ·å§‹ç‚¹ä½ç½®çš„ç´¢å¼•ï¼ˆæ»¤å‡ºå‰5ä¸ªç‚¹ï¼‰</span></span><br><span class="line">        scanEndInd[scanCount - <span class="number">1</span>] = i - <span class="number">5</span>;  <span class="comment">// è¯¥scançš„ç»ˆæ­¢ç‚¹ä½ç½®çš„ç´¢å¼•(æ»¤å‡ºå5ä¸ªç‚¹)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªscanæ›²ç‡ç‚¹æœ‰æ•ˆç‚¹åºä»ç¬¬5ä¸ªå¼€å§‹ï¼Œæœ€åä¸€ä¸ªæ¿€å…‰çº¿ç»“æŸç‚¹åºsize-5</span></span><br><span class="line">scanStartInd[<span class="number">0</span>] = <span class="number">5</span>;				<span class="comment">// ç¬¬ä¸€æ¡çº¿çš„èµ·å§‹ä½ç½®</span></span><br><span class="line">scanEndInd.<span class="built_in">back</span>() = cloudSize - <span class="number">5</span>;  <span class="comment">// æœ€åä¸€æ¡çº¿çš„ç»ˆæ­¢ä½ç½®</span></span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼šè¿™é‡Œå¯¹æ‰€æœ‰çš„ç‚¹äº‘çš„æ›²ç‡è¿›è¡Œäº†è®¡ç®—ï¼Œç”±äºè¿™é‡Œä½¿ç”¨çš„æ–¹æ³•æ˜¯æŸä¸ªç‚¹äº‘çš„å‰åå„äº”ç‚¹ä¸è¯¥ç‚¹è¿›è¡Œä½œå·®å¤„ç†ï¼Œæ‰€ä»¥å¾ªç¯çš„å¼€å§‹å°±è·³è¿‡äº†å‰åå„5ä¸ªç‚¹äº‘çš„è®¡ç®—ã€‚å› ä¸ºæ˜¯æŒ‰ç…§çº¿çš„åºåˆ—å­˜å‚¨ï¼Œå› æ­¤æ¥ä¸‹æ¥èƒ½å¤Ÿå¾—åˆ°èµ·å§‹å’Œç»ˆæ­¢çš„ indexã€‚</p>
<h3 id="4-æ’é™¤ä¸å¯è€ƒç‚¹"><a href="#4-æ’é™¤ä¸å¯è€ƒç‚¹" class="headerlink" title="4.æ’é™¤ä¸å¯è€ƒç‚¹"></a>4.æ’é™¤ä¸å¯è€ƒç‚¹</h3><p>å‚ç…§è®ºæ–‡å¯¹ä¸ç‚¹ä½ç­›é€‰çš„æ¡ä»¶ï¼š1. å¹³é¢/ç›´çº¿ä¸æ¿€å…‰è¿‘ä¼¼å¹³è¡Œçš„ç‚¹ä¸èƒ½è¦ï¼› 2. è¢«é®æŒ¡çš„è¾¹ç¼˜ç‚¹ä¸èƒ½è¦</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŒ‘é€‰ç‚¹ï¼Œæ’é™¤å®¹æ˜“è¢«æ–œé¢æŒ¡ä½çš„ç‚¹ä»¥åŠç¦»ç¾¤ç‚¹ï¼Œæœ‰äº›ç‚¹å®¹æ˜“è¢«æ–œé¢æŒ¡ä½ï¼Œè€Œç¦»ç¾¤ç‚¹å¯èƒ½å‡ºç°å¸¦æœ‰å¶ç„¶æ€§ï¼Œè¿™äº›æƒ…å†µéƒ½å¯èƒ½å¯¼è‡´å‰åä¸¤æ¬¡æ‰«æä¸èƒ½è¢«åŒæ—¶çœ‹åˆ°</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">5</span>; i &lt; cloudSize - <span class="number">6</span>; i++)</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="comment">/*2. è¢«é®æŒ¡çš„è¾¹ç¼˜ç‚¹ä¸èƒ½è¦*/</span></span><br><span class="line">    <span class="comment">//ä¸åä¸€ä¸ªç‚¹å·®å€¼ï¼Œæ‰€ä»¥å‡6</span></span><br><span class="line">    <span class="keyword">float</span> diffX = laserCloud-&gt;points[i + <span class="number">1</span>].x - laserCloud-&gt;points[i].x;</span><br><span class="line">    <span class="keyword">float</span> diffY = laserCloud-&gt;points[i + <span class="number">1</span>].y - laserCloud-&gt;points[i].y;</span><br><span class="line">    <span class="keyword">float</span> diffZ = laserCloud-&gt;points[i + <span class="number">1</span>].z - laserCloud-&gt;points[i].z;</span><br><span class="line">    <span class="comment">//è®¡ç®—æœ‰æ•ˆæ›²ç‡ç‚¹ä¸åä¸€ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»å¹³æ–¹å’Œ</span></span><br><span class="line">    <span class="keyword">float</span> diff = diffX * diffX + diffY * diffY + diffZ * diffZ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (diff &gt; <span class="number">0.1</span>)</span><br><span class="line">    &#123; <span class="comment">//å‰æ:ä¸¤ä¸ªç‚¹ä¹‹é—´è·ç¦»è¦å¤§äº0.1</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//ç‚¹çš„æ·±åº¦</span></span><br><span class="line">      <span class="keyword">float</span> depth1 = <span class="built_in">sqrt</span>(laserCloud-&gt;points[i].x * laserCloud-&gt;points[i].x +</span><br><span class="line">                          laserCloud-&gt;points[i].y * laserCloud-&gt;points[i].y +</span><br><span class="line">                          laserCloud-&gt;points[i].z * laserCloud-&gt;points[i].z);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//åä¸€ä¸ªç‚¹çš„æ·±åº¦</span></span><br><span class="line">      <span class="keyword">float</span> depth2 = <span class="built_in">sqrt</span>(laserCloud-&gt;points[i + <span class="number">1</span>].x * laserCloud-&gt;points[i + <span class="number">1</span>].x +</span><br><span class="line">                          laserCloud-&gt;points[i + <span class="number">1</span>].y * laserCloud-&gt;points[i + <span class="number">1</span>].y +</span><br><span class="line">                          laserCloud-&gt;points[i + <span class="number">1</span>].z * laserCloud-&gt;points[i + <span class="number">1</span>].z);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æŒ‰ç…§ä¸¤ç‚¹çš„æ·±åº¦çš„æ¯”ä¾‹ï¼Œå°†æ·±åº¦è¾ƒå¤§çš„ç‚¹æ‹‰å›åè®¡ç®—è·ç¦»</span></span><br><span class="line">      <span class="keyword">if</span> (depth1 &gt; depth2)</span><br><span class="line">      &#123;</span><br><span class="line">        diffX = laserCloud-&gt;points[i + <span class="number">1</span>].x - laserCloud-&gt;points[i].x * depth2 / depth1;</span><br><span class="line">        diffY = laserCloud-&gt;points[i + <span class="number">1</span>].y - laserCloud-&gt;points[i].y * depth2 / depth1;</span><br><span class="line">        diffZ = laserCloud-&gt;points[i + <span class="number">1</span>].z - laserCloud-&gt;points[i].z * depth2 / depth1;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¾¹é•¿æ¯”ä¹Ÿå³æ˜¯å¼§åº¦å€¼ï¼Œè‹¥å°äº0.1ï¼Œè¯´æ˜å¤¹è§’æ¯”è¾ƒå°ï¼Œæ–œé¢æ¯”è¾ƒé™¡å³­,ç‚¹æ·±åº¦å˜åŒ–æ¯”è¾ƒå‰§çƒˆ,ç‚¹å¤„åœ¨è¿‘ä¼¼ä¸æ¿€å…‰æŸå¹³è¡Œçš„æ–œé¢ä¸Š</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">sqrt</span>(diffX * diffX + diffY * diffY + diffZ * diffZ) / depth2 &lt; <span class="number">0.1</span>)</span><br><span class="line">        &#123; <span class="comment">//æ’é™¤å®¹æ˜“è¢«æ–œé¢æŒ¡ä½çš„ç‚¹</span></span><br><span class="line">          <span class="comment">//è¯¥ç‚¹åŠå‰é¢äº”ä¸ªç‚¹ï¼ˆå¤§è‡´éƒ½åœ¨æ–œé¢ä¸Šï¼‰å…¨éƒ¨ç½®ä¸ºç­›é€‰è¿‡</span></span><br><span class="line">          cloudNeighborPicked[i - <span class="number">5</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i - <span class="number">4</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i - <span class="number">3</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i - <span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        diffX = laserCloud-&gt;points[i + <span class="number">1</span>].x * depth1 / depth2 - laserCloud-&gt;points[i].x;</span><br><span class="line">        diffY = laserCloud-&gt;points[i + <span class="number">1</span>].y * depth1 / depth2 - laserCloud-&gt;points[i].y;</span><br><span class="line">        diffZ = laserCloud-&gt;points[i + <span class="number">1</span>].z * depth1 / depth2 - laserCloud-&gt;points[i].z;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">sqrt</span>(diffX * diffX + diffY * diffY + diffZ * diffZ) / depth1 &lt; <span class="number">0.1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">          cloudNeighborPicked[i + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i + <span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i + <span class="number">3</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i + <span class="number">4</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i + <span class="number">5</span>] = <span class="number">1</span>;</span><br><span class="line">          cloudNeighborPicked[i + <span class="number">6</span>] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">/*1. å¹³é¢/ç›´çº¿ä¸æ¿€å…‰è¿‘ä¼¼å¹³è¡Œçš„ç‚¹ä¸èƒ½è¦ï¼›*/</span></span><br><span class="line">    <span class="keyword">float</span> diffX2 = laserCloud-&gt;points[i].x - laserCloud-&gt;points[i - <span class="number">1</span>].x;</span><br><span class="line">    <span class="keyword">float</span> diffY2 = laserCloud-&gt;points[i].y - laserCloud-&gt;points[i - <span class="number">1</span>].y;</span><br><span class="line">    <span class="keyword">float</span> diffZ2 = laserCloud-&gt;points[i].z - laserCloud-&gt;points[i - <span class="number">1</span>].z;</span><br><span class="line">    <span class="comment">//ä¸å‰ä¸€ä¸ªç‚¹çš„è·ç¦»å¹³æ–¹å’Œ</span></span><br><span class="line">    <span class="keyword">float</span> diff2 = diffX2 * diffX2 + diffY2 * diffY2 + diffZ2 * diffZ2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç‚¹æ·±åº¦çš„å¹³æ–¹å’Œ</span></span><br><span class="line">    <span class="keyword">float</span> dis = laserCloud-&gt;points[i].x * laserCloud-&gt;points[i].x + laserCloud-&gt;points[i].y * laserCloud-&gt;points[i].y + laserCloud-&gt;points[i].z * laserCloud-&gt;points[i].z;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸å‰åç‚¹çš„å¹³æ–¹å’Œéƒ½å¤§äºæ·±åº¦å¹³æ–¹å’Œçš„ä¸‡åˆ†ä¹‹äºŒï¼Œè¿™äº›ç‚¹è§†ä¸ºç¦»ç¾¤ç‚¹ï¼ŒåŒ…æ‹¬é™¡æ–œé¢ä¸Šçš„ç‚¹ï¼Œå¼ºçƒˆå‡¸å‡¹ç‚¹å’Œç©ºæ—·åŒºåŸŸä¸­çš„æŸäº›ç‚¹ï¼Œç½®ä¸ºç­›é€‰è¿‡ï¼Œå¼ƒç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (diff &gt; <span class="number">0.0002</span> * dis &amp;&amp; diff2 &gt; <span class="number">0.0002</span> * dis)</span><br><span class="line">    &#123;</span><br><span class="line">      cloudNeighborPicked[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼šéå†æ‰€æœ‰ç‚¹ï¼ˆé™¤å»å‰äº”ä¸ªå’Œåå…­ä¸ªï¼‰ï¼Œåˆ¤æ–­è¯¥ç‚¹åŠå…¶å‘¨è¾¹ç‚¹æ˜¯å¦å¯ä»¥ä½œä¸ºä¸ºç‰¹å¾ç‚¹ä½ï¼šå½“æŸç‚¹åŠå…¶åç‚¹é—´çš„è·ç¦»å¹³æ–¹å¤§äºæŸé˜ˆå€¼$a$ï¼ˆè¯´æ˜è¿™ä¸¤ç‚¹æœ‰ä¸€å®šè·ç¦»ï¼‰ï¼Œä¸”ä¸¤å‘é‡å¤¹è§’å°äºæŸé˜ˆå€¼$b$æ—¶ï¼ˆå¤¹è§’å°å°±å¯èƒ½å­˜åœ¨é®æŒ¡ï¼‰ï¼Œå°†å…¶ä¸€ä¾§çš„ä¸´è¿‘$6$ä¸ªç‚¹è®¾ä¸ºä¸å¯æ ‡è®°ä¸ºç‰¹å¾ç‚¹çš„ç‚¹ï¼›è‹¥æŸç‚¹åˆ°å…¶å‰åä¸¤ç‚¹çš„è·ç¦»å‡å¤§äº$c$å€çš„è¯¥ç‚¹æ·±åº¦ï¼Œåˆ™è¯¥ç‚¹åˆ¤å®šä¸ºä¸å¯æ ‡è®°ç‰¹å¾ç‚¹çš„ç‚¹ï¼ˆå…¥å°„è§’è¶Šå°ï¼Œç‚¹é—´è·è¶Šå¤§ï¼Œå³æ¿€å…‰å‘å°„æ–¹å‘ä¸æŠ•å°„åˆ°çš„å¹³é¢è¶Šè¿‘ä¼¼æ°´å¹³ï¼‰ã€‚</p>
<h3 id="5-è¾¹ç¼˜ç‚¹-å¹³é¢ç‚¹åˆ¤æ–­ä¸å­˜å‚¨"><a href="#5-è¾¹ç¼˜ç‚¹-å¹³é¢ç‚¹åˆ¤æ–­ä¸å­˜å‚¨" class="headerlink" title="5.è¾¹ç¼˜ç‚¹/å¹³é¢ç‚¹åˆ¤æ–­ä¸å­˜å‚¨"></a>5.è¾¹ç¼˜ç‚¹/å¹³é¢ç‚¹åˆ¤æ–­ä¸å­˜å‚¨</h3><p>è¿™éƒ¨åˆ†ä»£ç æ¯”è¾ƒé•¿ï¼Œç°æŠŠæ•´ä¸ªä»£ç ç»“æ„æ¦‚è§ˆä¸€ä¸‹ï¼š</p>
<ul>
<li>é¦–å…ˆæ˜¯ç›¸å…³çš„å˜é‡å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªscanæ›²ç‡ç‚¹æœ‰æ•ˆç‚¹åºä»ç¬¬5ä¸ªå¼€å§‹ï¼Œæœ€åä¸€ä¸ªæ¿€å…‰çº¿ç»“æŸç‚¹åºsize-5</span></span><br><span class="line">scanStartInd[<span class="number">0</span>] = <span class="number">5</span>;				<span class="comment">// ç¬¬ä¸€æ¡çº¿çš„èµ·å§‹ä½ç½®</span></span><br><span class="line">scanEndInd.<span class="built_in">back</span>() = cloudSize - <span class="number">5</span>;  <span class="comment">// æœ€åä¸€æ¡çº¿çš„ç»ˆæ­¢ä½ç½®</span></span><br><span class="line"><span class="comment">// ç”¨äºæå–è¾¹ç¼˜ç‚¹</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt; cornerPointsSharp;     <span class="comment">//æ›²ç‡ç‰¹åˆ«å¤§çš„è¾¹ç¼˜ç‚¹ï¼ˆsharpï¼‰</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt; cornerPointsLessSharp; <span class="comment">//æ›²ç‡å¤§çš„è¾¹ç¼˜ç‚¹ï¼ˆless_sharpï¼‰</span></span><br><span class="line"><span class="comment">// ç”¨äºæå–å¹³é¢ç‚¹</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt; surfPointsFlat;        <span class="comment">//æ›²ç‡ç‰¹åˆ«å°çš„å¹³é¢ç‚¹ï¼ˆflatï¼‰</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt; surfPointsLessFlat;    <span class="comment">//æ›²ç‡ç‰¹å°çš„å¹³é¢ç‚¹ï¼ˆless_flatï¼‰</span></span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼šè‡³æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ç»„æœ‰æ¡ç†çš„ç‚¹äº‘ï¼Œä¸”æŠŠé‚£äº›ä¸æˆ‘ä»¬æƒ³æå–çš„ç‰¹å¾ä¸ç¬¦çš„ç‚¹æ ‡è®°äº†å‡ºæ¥ï¼Œä½†æ˜¯ä¸ºäº†ä½¿å¾—ç‰¹å¾ç‚¹å‡åŒ€åˆ†å¸ƒåœ¨ç¯å¢ƒä¸­ï¼Œå°†ä¸€æ¬¡æ‰«æåˆ’åˆ†ä¸º$4$ä¸ªç‹¬ç«‹çš„å­åŒºåŸŸï¼Œæ¯ä¸ªå­åŒºåŸŸæœ€å¤šæä¾›$2$ä¸ªè¾¹ç¼˜ç‚¹å’Œ$4$ä¸ªå¹³é¢ç‚¹ã€‚æˆ‘ä»¬åªéœ€è¦é¢„å…ˆè®¾å®šå¥½é˜ˆå€¼ï¼Œå°±å¯ä»¥è½»æ¾åŠ éšæ„çš„å°†è¿™äº›ç‚¹åˆ†ç±»äº†ã€‚</p>
<hr>
<ul>
<li>æœ€ä¸»è¦çš„éƒ¨åˆ†å°±æ˜¯ä¸‹é¢è¿™ä¸ªå¾ªç¯ï¼š</li>
</ul>
<p><img src="/images/LOAMæºä»£ç è§£æ/image-20220414184417130.png" alt="image-20220414184417130"></p>
<p>ã€è§£æã€‘ï¼šè¿™é‡Œä½œè€…å°†æ¯ä¸€çº¿åˆ’åˆ†ä¸ºç­‰é—´è·çš„ $6 $æ®µåˆ†åˆ«å¤„ç†ï¼Œæ¯ä¸€æ®µçš„ç‚¹æŒ‰ç…§æ›²ç‡å‡åºæ’åˆ—ã€‚<code>cloudSortInd</code>æ˜¯å¯¹æ›²ç‡æ’åºå¾—åˆ°çš„åºåˆ—ã€‚</p>
<blockquote>
<p>ä¸ºå•¥åˆ†æˆå…­ç­‰ä»½ï¼Ÿ</p>
<p>è¿™é‡Œä½œè€…å°†360Â°åˆ†æˆå…­ç­‰ä»½ï¼Œæ¯ä¸€ä»½å»æå–ç›¸åŒçš„ç‰¹å¾ç‚¹ã€‚è¿™æ ·åšçš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†ä½¿å¾—ç‰¹å¾ç‚¹çš„åˆ†é…æ›´åŠ å‡åŒ€ã€‚å¦‚æœä¸è¿™ä¹ˆæ“ä½œï¼Œå¾ˆå®¹æ˜“å‡ºç°æŸä¸€ä¸ªè§†è§’åŒºåŸŸå¤§æ›²ç‡çš„ç‚¹ç‰¹åˆ«å¤šï¼Œè€ŒæŸäº›è§†è§’åŒºåŸŸå´ç‰¹åˆ«å°‘ï¼Œé€ æˆç‰¹å¾ç‚¹æå–çš„ä¸å‡åŒ€ï¼Œå¤§éƒ½é›†ä¸­åœ¨æŸä¸ªç‰¹åˆ«çª„çš„è§†è§’å†…ï¼Œè¿™ä¼šä½¿å¾—åœ¨æ±‚è§£æˆ–ä¼˜åŒ–çš„æ—¶å€™é€ æˆç—…æ€ã€‚</p>
</blockquote>
<ul>
<li>æŒ‰æ›²ç‡ä»å°åˆ°å¤§å†’æ³¡æ’åº</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k = sp + <span class="number">1</span>; k &lt;= ep; k++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = k; l &gt;= sp + <span class="number">1</span>; l--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœåé¢æ›²ç‡ç‚¹å¤§äºå‰é¢ï¼Œåˆ™äº¤æ¢</span></span><br><span class="line">        <span class="keyword">if</span> (cloudCurvature[cloudSortInd[l]] &lt; cloudCurvature[cloudSortInd[l - <span class="number">1</span>]])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = cloudSortInd[l - <span class="number">1</span>];</span><br><span class="line">            cloudSortInd[l - <span class="number">1</span>] = cloudSortInd[l];</span><br><span class="line">            cloudSortInd[l] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æŒ‘é€‰è¾¹ç¼˜ç‰¹å¾ç‚¹ï¼šæ¯ä¸ªåˆ†æ®µçš„æ›²ç‡å¾ˆå¤§å’Œæ¯”è¾ƒå¤§çš„ç‚¹</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ›²ç‡ç‚¹å¯¹åº”çš„åºå·</span></span><br><span class="line"><span class="keyword">int</span> cloudSortInd[<span class="number">40000</span>];</span><br><span class="line"><span class="comment">//ç‚¹æ˜¯å¦ç­›é€‰è¿‡æ ‡å¿—ï¼š0-æœªç­›é€‰è¿‡ï¼Œ1-ç­›é€‰è¿‡</span></span><br><span class="line"><span class="keyword">int</span> cloudNeighborPicked[<span class="number">40000</span>];</span><br><span class="line"><span class="comment">//ç‚¹åˆ†ç±»æ ‡å·:2-ä»£è¡¨æ›²ç‡å¾ˆå¤§ï¼Œ1-ä»£è¡¨æ›²ç‡æ¯”è¾ƒå¤§,-1-ä»£è¡¨æ›²ç‡å¾ˆå°ï¼Œ0-æ›²ç‡æ¯”è¾ƒå°(å…¶ä¸­1åŒ…å«äº†2,0åŒ…å«äº†1,0å’Œ1æ„æˆäº†ç‚¹äº‘å…¨éƒ¨çš„ç‚¹)</span></span><br><span class="line"><span class="keyword">int</span> cloudLabel[<span class="number">40000</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‘é€‰æ¯ä¸ªåˆ†æ®µçš„æ›²ç‡å¾ˆå¤§å’Œæ¯”è¾ƒå¤§çš„ç‚¹</span></span><br><span class="line"><span class="keyword">int</span> largestPickedNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k = ep; k &gt;= sp; k--)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> ind = cloudSortInd[k]; <span class="comment">//æ›²ç‡æœ€å¤§ç‚¹çš„ç‚¹åº</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¦‚æœæ›²ç‡å¤§çš„ç‚¹ï¼Œæ›²ç‡çš„ç¡®æ¯”è¾ƒå¤§ï¼ˆé˜ˆå€¼å¤§äº0.1ï¼‰ï¼Œå¹¶ä¸”æœªè¢«ç­›é€‰è¿‡æ»¤æ‰ï¼ˆcloudNeighborPicked=0ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (cloudNeighborPicked[ind] == <span class="number">0</span> &amp;&amp; cloudCurvature[ind] &gt; <span class="number">0.1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        largestPickedNum++;</span><br><span class="line">        <span class="keyword">if</span> (largestPickedNum &lt;= <span class="number">2</span>)</span><br><span class="line">        &#123;                      <span class="comment">//æŒ‘é€‰æ›²ç‡æœ€å¤§çš„å‰2ä¸ªç‚¹æ”¾å…¥sharpç‚¹é›†åˆ</span></span><br><span class="line">            cloudLabel[ind] = <span class="number">2</span>; <span class="comment">// 2ä»£è¡¨ç‚¹æ›²ç‡å¾ˆå¤§</span></span><br><span class="line">            cornerPointsSharp.<span class="built_in">push_back</span>(laserCloud-&gt;points[ind]);</span><br><span class="line">            cornerPointsLessSharp.<span class="built_in">push_back</span>(laserCloud-&gt;points[ind]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (largestPickedNum &lt;= <span class="number">20</span>)</span><br><span class="line">        &#123;                      <span class="comment">//æŒ‘é€‰æ›²ç‡æœ€å¤§çš„å‰20ä¸ªç‚¹æ”¾å…¥less sharpç‚¹é›†åˆ</span></span><br><span class="line">            cloudLabel[ind] = <span class="number">1</span>; <span class="comment">// 1ä»£è¡¨ç‚¹æ›²ç‡æ¯”è¾ƒå°–é”</span></span><br><span class="line">            cornerPointsLessSharp.<span class="built_in">push_back</span>(laserCloud-&gt;points[ind]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cloudNeighborPicked[ind] = <span class="number">1</span>; <span class="comment">//ç­›é€‰æ ‡å¿—ç½®ä½</span></span><br><span class="line">        <span class="comment">//å°†æ›²ç‡æ¯”è¾ƒå¤§çš„ç‚¹çš„å‰åå„5ä¸ªè¿ç»­è·ç¦»æ¯”è¾ƒè¿‘çš„ç‚¹ç­›é€‰å‡ºå»ï¼Œé˜²æ­¢ç‰¹å¾ç‚¹èšé›†ï¼Œä½¿å¾—ç‰¹å¾ç‚¹åœ¨æ¯ä¸ªæ–¹å‘ä¸Šå°½é‡åˆ†å¸ƒå‡åŒ€</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>; l &lt;= <span class="number">5</span>; l++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">float</span> diffX = laserCloud-&gt;points[ind + l].x - laserCloud-&gt;points[ind + l - <span class="number">1</span>].x;</span><br><span class="line">            <span class="keyword">float</span> diffY = laserCloud-&gt;points[ind + l].y - laserCloud-&gt;points[ind + l - <span class="number">1</span>].y;</span><br><span class="line">            <span class="keyword">float</span> diffZ = laserCloud-&gt;points[ind + l].z - laserCloud-&gt;points[ind + l - <span class="number">1</span>].z;</span><br><span class="line">            <span class="keyword">if</span> (diffX * diffX + diffY * diffY + diffZ * diffZ &gt; <span class="number">0.05</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cloudNeighborPicked[ind + l] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">-1</span>; l &gt;= <span class="number">-5</span>; l--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">float</span> diffX = laserCloud-&gt;points[ind + l].x - laserCloud-&gt;points[ind + l + <span class="number">1</span>].x;</span><br><span class="line">            <span class="keyword">float</span> diffY = laserCloud-&gt;points[ind + l].y - laserCloud-&gt;points[ind + l + <span class="number">1</span>].y;</span><br><span class="line">            <span class="keyword">float</span> diffZ = laserCloud-&gt;points[ind + l].z - laserCloud-&gt;points[ind + l + <span class="number">1</span>].z;</span><br><span class="line">            <span class="keyword">if</span> (diffX * diffX + diffY * diffY + diffZ * diffZ &gt; <span class="number">0.05</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cloudNeighborPicked[ind + l] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼šå¯¹æ¯ä¸ªæ®µè¿›è¡Œå¾ªç¯è¿­ä»£ï¼Œå°†æ›²ç‡æ¯”è¾ƒå¤§çš„ï¼ˆä»£ç ä¸­å®šä¹‰é˜ˆå€¼ä¸º0.1ï¼‰ï¼Œè€Œä¸”è¦æ±‚è¯¥ç‚¹å¹¶ä¸”æœªè¢«ç­›é€‰è¿‡æ»¤æ‰ï¼Œç»è¿‡å†’æ³¡æ’åºåï¼Œæ‰€æœ‰çš„æ›²ç‡éƒ½å·²ç»å®Œæˆæ’åºï¼Œæˆ‘ä»¬å°†å‰2ä¸ªæ›²ç‡æœ€å¤§çš„å­˜å…¥ä¸ºâ€œsharpâ€ç‚¹é›†åˆï¼Œå°†å‰20æ›²ç‡æœ€å¤§å­˜å…¥â€œless_sharpâ€ç‚¹é›†åˆï¼›ä¸ºäº†ä½¿å¾—ç‰¹å¾ç‚¹åœ¨æ¯ä¸ªæ–¹å‘ä¸Šå°½é‡åˆ†å¸ƒå‡åŒ€ï¼Œä¸èšé›†ï¼Œå°†æ›²ç‡æ¯”è¾ƒå¤§çš„ç‚¹çš„å‰åå„5ä¸ªè¿ç»­è·ç¦»æ¯”è¾ƒè¿‘çš„ç‚¹ç­›é€‰å‡ºå»ã€‚</p>
<ul>
<li>æŒ‘é€‰å¹³é¢ç‰¹å¾ç‚¹ï¼šæ¯ä¸ªåˆ†æ®µçš„æ›²ç‡å¾ˆå°æ¯”è¾ƒå°çš„ç‚¹</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŒ‘é€‰æ¯ä¸ªåˆ†æ®µçš„æ›²ç‡å¾ˆå°æ¯”è¾ƒå°çš„ç‚¹</span></span><br><span class="line"><span class="keyword">int</span> smallestPickedNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k = sp; k &lt;= ep; k++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> ind = cloudSortInd[k];</span><br><span class="line">    <span class="comment">//å¦‚æœæ›²ç‡çš„ç¡®æ¯”è¾ƒå°ï¼Œå¹¶ä¸”æœªè¢«ç­›é€‰å‡º</span></span><br><span class="line">    <span class="keyword">if</span> (cloudNeighborPicked[ind] == <span class="number">0</span> &amp;&amp; cloudCurvature[ind] &lt; <span class="number">0.1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cloudLabel[ind] = <span class="number">-1</span>; <span class="comment">//-1ä»£è¡¨æ›²ç‡å¾ˆå°çš„ç‚¹</span></span><br><span class="line">        surfPointsFlat.<span class="built_in">push_back</span>(laserCloud-&gt;points[ind]);</span><br><span class="line"></span><br><span class="line">        smallestPickedNum++;</span><br><span class="line">        <span class="keyword">if</span> (smallestPickedNum &gt;= <span class="number">4</span>)</span><br><span class="line">        &#123; <span class="comment">//åªé€‰æœ€å°çš„å››ä¸ªï¼Œå‰©ä¸‹çš„Label==0,å°±éƒ½æ˜¯æ›²ç‡æ¯”è¾ƒå°çš„</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cloudNeighborPicked[ind] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>; l &lt;= <span class="number">5</span>; l++)</span><br><span class="line">        &#123; <span class="comment">//åŒæ ·é˜²æ­¢ç‰¹å¾ç‚¹èšé›†</span></span><br><span class="line">            <span class="keyword">float</span> diffX = laserCloud-&gt;points[ind + l].x - laserCloud-&gt;points[ind + l - <span class="number">1</span>].x;</span><br><span class="line">            <span class="keyword">float</span> diffY = laserCloud-&gt;points[ind + l].y - laserCloud-&gt;points[ind + l - <span class="number">1</span>].y;</span><br><span class="line">            <span class="keyword">float</span> diffZ = laserCloud-&gt;points[ind + l].z - laserCloud-&gt;points[ind + l - <span class="number">1</span>].z;</span><br><span class="line">            <span class="keyword">if</span> (diffX * diffX + diffY * diffY + diffZ * diffZ &gt; <span class="number">0.05</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            cloudNeighborPicked[ind + l] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">-1</span>; l &gt;= <span class="number">-5</span>; l--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">float</span> diffX = laserCloud-&gt;points[ind + l].x - laserCloud-&gt;points[ind + l + <span class="number">1</span>].x;</span><br><span class="line">            <span class="keyword">float</span> diffY = laserCloud-&gt;points[ind + l].y - laserCloud-&gt;points[ind + l + <span class="number">1</span>].y;</span><br><span class="line">            <span class="keyword">float</span> diffZ = laserCloud-&gt;points[ind + l].z - laserCloud-&gt;points[ind + l + <span class="number">1</span>].z;</span><br><span class="line">            <span class="keyword">if</span> (diffX * diffX + diffY * diffY + diffZ * diffZ &gt; <span class="number">0.05</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cloudNeighborPicked[ind + l] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼šè¿™é‡Œä¸è¾¹ç¼˜ç‰¹å¾ç‚¹çš„é€‰å–å¤§åŒå°å¼‚ï¼Œåªä¸è¿‡è¿™é‡Œé€‰æ‹©äº†å››ä¸ªå¹³é¢ç‰¹å¾ç‚¹ã€‚</p>
<ul>
<li>å°†å‰©ä½™çš„ç‚¹ï¼ˆåŒ…æ‹¬ä¹‹å‰è¢«æ’é™¤çš„ç‚¹ï¼‰å…¨éƒ¨å½’å…¥å¹³é¢ç‚¹ä¸­less flatç±»åˆ«ä¸­</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†å‰©ä½™çš„ç‚¹ï¼ˆåŒ…æ‹¬ä¹‹å‰è¢«æ’é™¤çš„ç‚¹ï¼‰å…¨éƒ¨å½’å…¥å¹³é¢ç‚¹ä¸­less flatç±»åˆ«ä¸­</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k = sp; k &lt;= ep; k++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (cloudLabel[k] &lt;= <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        surfPointsLessFlatScan-&gt;<span class="built_in">push_back</span>(laserCloud-&gt;points[k]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æœ€åå¯¹æ¯ä¸ªåˆ†æ®µless flatçš„ç‚¹è¿›è¡Œä½“ç´ æ …æ ¼æ»¤æ³¢</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç”±äºless flatç‚¹æœ€å¤šï¼Œå¯¹æ¯ä¸ªåˆ†æ®µless flatçš„ç‚¹è¿›è¡Œä½“ç´ æ …æ ¼æ»¤æ³¢</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt; surfPointsLessFlatScanDS;</span><br><span class="line">pcl::VoxelGrid&lt;PointType&gt; downSizeFilter;</span><br><span class="line">downSizeFilter.<span class="built_in">setInputCloud</span>(surfPointsLessFlatScan);</span><br><span class="line">downSizeFilter.<span class="built_in">setLeafSize</span>(<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">0.2</span>);</span><br><span class="line">downSizeFilter.<span class="built_in">filter</span>(surfPointsLessFlatScanDS);</span><br><span class="line"><span class="comment">// less flatç‚¹æ±‡æ€»</span></span><br><span class="line">surfPointsLessFlat += surfPointsLessFlatScanDS;</span><br></pre></td></tr></table></figure>
<p>æ”¶å°¾éƒ¨åˆ†ï¼šæœ€åä½œè€…ç”¨ 4 ä¸ª pcl::Point XYZ ç±»å‹çš„æ•°ç»„æ¥å­˜å‚¨ IMU çš„ä¿¡æ¯ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">laserCloudHandler</span><span class="params">(<span class="keyword">const</span> sensor_msgs::PointCloud2ConstPtr &amp;laserCloudMsg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//.....</span></span><br><span class="line">  <span class="comment">// publishæ¶ˆé™¤éåŒ€é€Ÿè¿åŠ¨ç•¸å˜åçš„æ‰€æœ‰çš„ç‚¹</span></span><br><span class="line">  sensor_msgs::PointCloud2 laserCloudOutMsg;</span><br><span class="line">  pcl::<span class="built_in">toROSMsg</span>(*laserCloud, laserCloudOutMsg);</span><br><span class="line">  laserCloudOutMsg.header.stamp = laserCloudMsg-&gt;header.stamp;</span><br><span class="line">  laserCloudOutMsg.header.frame_id = <span class="string">&quot;/camera&quot;</span>;</span><br><span class="line">  pubLaserCloud.<span class="built_in">publish</span>(laserCloudOutMsg);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// publishæ¶ˆé™¤éåŒ€é€Ÿè¿åŠ¨ç•¸å˜åçš„å¹³é¢ç‚¹å’Œè¾¹æ²¿ç‚¹</span></span><br><span class="line">  sensor_msgs::PointCloud2 cornerPointsSharpMsg;</span><br><span class="line">  pcl::<span class="built_in">toROSMsg</span>(cornerPointsSharp, cornerPointsSharpMsg);</span><br><span class="line">  cornerPointsSharpMsg.header.stamp = laserCloudMsg-&gt;header.stamp;</span><br><span class="line">  cornerPointsSharpMsg.header.frame_id = <span class="string">&quot;/camera&quot;</span>;</span><br><span class="line">  pubCornerPointsSharp.<span class="built_in">publish</span>(cornerPointsSharpMsg);</span><br><span class="line"></span><br><span class="line">  sensor_msgs::PointCloud2 cornerPointsLessSharpMsg;</span><br><span class="line">  pcl::<span class="built_in">toROSMsg</span>(cornerPointsLessSharp, cornerPointsLessSharpMsg);</span><br><span class="line">  cornerPointsLessSharpMsg.header.stamp = laserCloudMsg-&gt;header.stamp;</span><br><span class="line">  cornerPointsLessSharpMsg.header.frame_id = <span class="string">&quot;/camera&quot;</span>;</span><br><span class="line">  pubCornerPointsLessSharp.<span class="built_in">publish</span>(cornerPointsLessSharpMsg);</span><br><span class="line"></span><br><span class="line">  sensor_msgs::PointCloud2 surfPointsFlat2;</span><br><span class="line">  pcl::<span class="built_in">toROSMsg</span>(surfPointsFlat, surfPointsFlat2);</span><br><span class="line">  surfPointsFlat2.header.stamp = laserCloudMsg-&gt;header.stamp;</span><br><span class="line">  surfPointsFlat2.header.frame_id = <span class="string">&quot;/camera&quot;</span>;</span><br><span class="line">  pubSurfPointsFlat.<span class="built_in">publish</span>(surfPointsFlat2);</span><br><span class="line"></span><br><span class="line">  sensor_msgs::PointCloud2 surfPointsLessFlat2;</span><br><span class="line">  pcl::<span class="built_in">toROSMsg</span>(surfPointsLessFlat, surfPointsLessFlat2);</span><br><span class="line">  surfPointsLessFlat2.header.stamp = laserCloudMsg-&gt;header.stamp;</span><br><span class="line">  surfPointsLessFlat2.header.frame_id = <span class="string">&quot;/camera&quot;</span>;</span><br><span class="line">  pubSurfPointsLessFlat.<span class="built_in">publish</span>(surfPointsLessFlat2);</span><br><span class="line">    <span class="comment">// publich IMUæ¶ˆæ¯,ç”±äºå¾ªç¯åˆ°äº†æœ€åï¼Œå› æ­¤æ˜¯Curéƒ½æ˜¯ä»£è¡¨æœ€åä¸€ä¸ªç‚¹ï¼Œå³æœ€åä¸€ä¸ªç‚¹çš„æ¬§æ‹‰è§’ï¼Œç•¸å˜ä½ç§»åŠä¸€ä¸ªç‚¹äº‘å‘¨æœŸå¢åŠ çš„é€Ÿåº¦</span></span><br><span class="line">  <span class="function">pcl::PointCloud&lt;pcl::PointXYZ&gt; <span class="title">imuTrans</span><span class="params">(<span class="number">4</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">  <span class="comment">//èµ·å§‹ç‚¹æ¬§æ‹‰è§’</span></span><br><span class="line">  imuTrans.points[<span class="number">0</span>].x = imuPitchStart;</span><br><span class="line">  imuTrans.points[<span class="number">0</span>].y = imuYawStart;</span><br><span class="line">  imuTrans.points[<span class="number">0</span>].z = imuRollStart;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æœ€åä¸€ä¸ªç‚¹çš„æ¬§æ‹‰è§’</span></span><br><span class="line">  imuTrans.points[<span class="number">1</span>].x = imuPitchCur;</span><br><span class="line">  imuTrans.points[<span class="number">1</span>].y = imuYawCur;</span><br><span class="line">  imuTrans.points[<span class="number">1</span>].z = imuRollCur;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æœ€åä¸€ä¸ªç‚¹ç›¸å¯¹äºç¬¬ä¸€ä¸ªç‚¹çš„ç•¸å˜ä½ç§»å’Œé€Ÿåº¦</span></span><br><span class="line">  imuTrans.points[<span class="number">2</span>].x = imuShiftFromStartXCur;</span><br><span class="line">  imuTrans.points[<span class="number">2</span>].y = imuShiftFromStartYCur;</span><br><span class="line">  imuTrans.points[<span class="number">2</span>].z = imuShiftFromStartZCur;</span><br><span class="line"></span><br><span class="line">  imuTrans.points[<span class="number">3</span>].x = imuVeloFromStartXCur;</span><br><span class="line">  imuTrans.points[<span class="number">3</span>].y = imuVeloFromStartYCur;</span><br><span class="line">  imuTrans.points[<span class="number">3</span>].z = imuVeloFromStartZCur;</span><br><span class="line"></span><br><span class="line">  sensor_msgs::PointCloud2 imuTransMsg;</span><br><span class="line">  pcl::<span class="built_in">toROSMsg</span>(imuTrans, imuTransMsg);</span><br><span class="line">  imuTransMsg.header.stamp = laserCloudMsg-&gt;header.stamp;</span><br><span class="line">  imuTransMsg.header.frame_id = <span class="string">&quot;/camera&quot;</span>;</span><br><span class="line">  pubImuTrans.<span class="built_in">publish</span>(imuTransMsg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="â…¢-laserOdometry"><a href="#â…¢-laserOdometry" class="headerlink" title="â…¢.laserOdometry"></a>â…¢.laserOdometry</h1><p><img src="/images/LOAMæºä»£ç è§£æ/image-20220415103708452.png" alt="image-20220415103708452"></p>
<p>è¿™éƒ¨åˆ†æ˜¯é‡Œç¨‹è®¡éƒ¨åˆ†ï¼Œå¯¹åº”çš„æ˜¯è®ºæ–‡ä¸­çš„ç‰¹å¾åŒ¹é…é—®é¢˜ï¼Œé€šè¿‡å¯¹è®ºæ–‡çš„é˜…è¯»ï¼Œæˆ‘ä»¬çŸ¥é“ç‰¹å¾åŒ¹é…ä¸»è¦æ˜¯å°†$t$æ—¶åˆ»çš„ç‚¹äº‘å’Œ$t+1$æ—¶åˆ»çš„ç‚¹äº‘è”ç³»èµ·æ¥ï¼ˆå¦‚æœæœ‰<code>IMU</code>æˆ–è€…é‡Œç¨‹è®¡å¯ä»¥å…ˆè¿›è¡Œä¸€ä¸ªåˆæ­¥çš„å˜æ¢ï¼Œä½œä¸ºåˆå§‹ä¿¡æ¯ç”¨äºåŒ¹é…ï¼‰;</p>
<p>æˆ‘ä»¬çŸ¥é“$t$æ—¶åˆ»è®²è¿‡æ ¡æ­£çš„ç‚¹äº‘ä¸º$\overline{P}_k$ï¼Œå°†è¯¥é›†åˆä¸­çš„è¾¹ç¼˜ç‚¹ç”Ÿæˆçš„çº¿å’Œ$t+1$æ—¶åˆ»æå–çš„è¾¹ç¼˜ç‚¹å¯¹åº”èµ·æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ª$t$æ—¶åˆ»åˆ°$t+1$æ—¶åˆ»çš„æœ€ä¼˜ä½å§¿$T$ï¼Œä½¿å¾—æŸå¤±æœ€å°ï¼Œå¯¹åº”çš„å°±æ˜¯æ±‚ç‚¹åˆ°ç›´çº¿çš„æœ€çŸ­è·ç¦»ï¼Œåœ¨è®ºæ–‡ä¸­æˆ‘ä»¬å·²ç»é€šè¿‡æ±‚åå¯¼çš„æ–¹å¼æŠŠé›…å¯æ¯”çŸ©é˜µåšäº†è¯¦ç»†çš„æ¨å¯¼ï¼ŒæŠŠå®ƒåº”ç”¨åœ¨ä»£ç ä¸­å³å¯ã€‚ï¼ˆå¯¹äºå¹³é¢ç‚¹ç‰¹å¾ï¼ŒåŒæ ·çš„è€ƒè™‘ç‚¹åˆ°é¢çš„è·ç¦»ã€‚ï¼‰è¯¦ç»†æ¨å¯¼æŸ¥çœ‹ï¼š<a href="https://lukeyalvin.top/2022/04/11/loam%E8%AE%BA%E6%96%87%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/#C-%E9%9B%85%E5%8F%AF%E6%AF%94%E7%9F%A9%E9%98%B5%E6%B1%82%E8%A7%A3">LOAM-SLAMæ·±åº¦å‰–æ-â…£.ç‰¹å¾ç‚¹åŒ¹é…-C.é›…å¯æ¯”çŸ©é˜µæ±‚è§£</a></p>
<p>åœ¨çœ‹ä»£ç ä¸­çš„å‡½æ•°ä¹‹å‰ï¼Œé¦–å…ˆç†Ÿæ‚‰å®šä¹‰çš„å˜é‡ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ¥æ”¶åˆ°çš„sharpç‚¹äº‘</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">cornerPointsSharp</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"><span class="comment">//æ¥æ”¶åˆ°çš„less_sharpç‚¹äº‘</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">cornerPointsLessSharp</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"><span class="comment">//æ¥æ”¶åˆ°çš„flatç‚¹äº‘</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">surfPointsFlat</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"><span class="comment">//æ¥æ”¶åˆ°çš„less_flatç‚¹äº‘</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">surfPointsLessFlat</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸Šä¸€å¸§æ‰€æœ‰è¾¹ç¼˜ç‚¹äº‘</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">laserCloudCornerLast</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"><span class="comment">//ä¸Šä¸€å¸§æ‰€æœ‰å¹³é¢ç‚¹äº‘</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">laserCloudSurfLast</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿å­˜å‰ä¸€ä¸ªèŠ‚ç‚¹å‘è¿‡æ¥çš„æœªç»å¤„ç†è¿‡çš„ç‰¹å¾ç‚¹</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">laserCloudOri</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">coeffSel</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"><span class="comment">//æ¥æ”¶åˆ°çš„æ‰€æœ‰çš„ç‚¹äº‘æ•°æ®</span></span><br><span class="line">pcl::PointCloud&lt;PointType&gt;::<span class="function">Ptr <span class="title">laserCloudFullRes</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;PointType&gt;())</span></span>;</span><br><span class="line"><span class="comment">//æ¥æ”¶åˆ°çš„IMUä¿¡æ¯</span></span><br><span class="line">pcl::PointCloud&lt;pcl::PointXYZ&gt;::<span class="function">Ptr <span class="title">imuTrans</span><span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;pcl::PointXYZ&gt;())</span></span>;</span><br><span class="line"><span class="comment">//ä½¿ç”¨ä¸Šä¸€å¸§çš„ less_sharp ç‚¹äº‘æ„é€ kd-tree</span></span><br><span class="line">pcl::KdTreeFLANN&lt;PointType&gt;::<span class="function">Ptr <span class="title">kdtreeCornerLast</span><span class="params">(<span class="keyword">new</span> pcl::KdTreeFLANN&lt;PointType&gt;())</span></span>;</span><br><span class="line"><span class="comment">//ä½¿ç”¨ä¸Šä¸€å¸§çš„ less_flat ç‚¹äº‘æ„é€ kd-tree</span></span><br><span class="line">pcl::KdTreeFLANN&lt;PointType&gt;::<span class="function">Ptr <span class="title">kdtreeSurfLast</span><span class="params">(<span class="keyword">new</span> pcl::KdTreeFLANN&lt;PointType&gt;())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> laserCloudCornerLastNum;</span><br><span class="line"><span class="keyword">int</span> laserCloudSurfLastNum;</span><br></pre></td></tr></table></figure>
<h2 id="A-main"><a href="#A-main" class="headerlink" title="A.main"></a>A.main</h2><p><img src="/images/LOAMæºä»£ç è§£æ/image-20220416145103548.png" alt="image-20220416145103548"></p>
<p>è¿™é‡Œçš„mainå‡½æ•°è¶³è¶³600å¤šè¡Œä»£ç â€¦â€¦ï¼Œäººéƒ½å‚»äº†ï¼Œï¼Œï¼Œ</p>
<p>å¼€å§‹å®šä¹‰äº†ROSèŠ‚ç‚¹å’Œè®¢é˜…çš„æ¶ˆæ¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;laserOdometry&quot;</span>);</span><br><span class="line">  ros::NodeHandle nh;</span><br><span class="line"></span><br><span class="line">  ros::Subscriber subCornerPointsSharp = nh.subscribe&lt;sensor_msgs::PointCloud2&gt;(<span class="string">&quot;/laser_cloud_sharp&quot;</span>, <span class="number">2</span>, laserCloudSharpHandler);</span><br><span class="line">  ros::Subscriber subCornerPointsLessSharp = nh.subscribe&lt;sensor_msgs::PointCloud2&gt;(<span class="string">&quot;/laser_cloud_less_sharp&quot;</span>, <span class="number">2</span>, laserCloudLessSharpHandler);</span><br><span class="line">  ros::Subscriber subSurfPointsFlat = nh.subscribe&lt;sensor_msgs::PointCloud2&gt;(<span class="string">&quot;/laser_cloud_flat&quot;</span>, <span class="number">2</span>, laserCloudFlatHandler);</span><br><span class="line">  ros::Subscriber subSurfPointsLessFlat = nh.subscribe&lt;sensor_msgs::PointCloud2&gt;(<span class="string">&quot;/laser_cloud_less_flat&quot;</span>, <span class="number">2</span>, laserCloudLessFlatHandler);</span><br><span class="line">  ros::Subscriber subLaserCloudFullRes = nh.subscribe&lt;sensor_msgs::PointCloud2&gt; (<span class="string">&quot;/velodyne_cloud_2&quot;</span>, <span class="number">2</span>, laserCloudFullResHandler);</span><br><span class="line">  ros::Subscriber subImuTrans = nh.subscribe&lt;sensor_msgs::PointCloud2&gt; (<span class="string">&quot;/imu_trans&quot;</span>, <span class="number">5</span>, imuTransHandler);</span><br><span class="line">  ros::Publisher pubLaserCloudCornerLast = nh.advertise&lt;sensor_msgs::PointCloud2&gt; (<span class="string">&quot;/laser_cloud_corner_last&quot;</span>, <span class="number">2</span>);</span><br><span class="line">  ros::Publisher pubLaserCloudSurfLast = nh.advertise&lt;sensor_msgs::PointCloud2&gt; (<span class="string">&quot;/laser_cloud_surf_last&quot;</span>, <span class="number">2</span>);</span><br><span class="line">  ros::Publisher pubLaserCloudFullRes = nh.advertise&lt;sensor_msgs::PointCloud2&gt; (<span class="string">&quot;/velodyne_cloud_3&quot;</span>, <span class="number">2</span>);</span><br><span class="line">  ros::Publisher pubLaserOdometry = nh.advertise&lt;nav_msgs::Odometry&gt; (<span class="string">&quot;/laser_odom_to_init&quot;</span>, <span class="number">5</span>);</span><br><span class="line">  </span><br><span class="line">  nav_msgs::Odometry laserOdometry;</span><br><span class="line">  laserOdometry.header.frame_id = <span class="string">&quot;camera_init&quot;</span>;</span><br><span class="line">  laserOdometry.child_frame_id = <span class="string">&quot;/laser_odom&quot;</span>;</span><br><span class="line"></span><br><span class="line">  tf::TransformBroadcaster tfBroadcaster;</span><br><span class="line">  tf::StampedTransform laserOdometryTrans;</span><br><span class="line">  laserOdometryTrans.frame_id_ = <span class="string">&quot;camera_init&quot;</span>;</span><br><span class="line">  laserOdometryTrans.child_frame_id_ = <span class="string">&quot;/laser_odom&quot;</span>;</span><br><span class="line">    std::vector&lt;<span class="keyword">int</span>&gt; pointSearchInd;<span class="comment">//æœç´¢åˆ°çš„ç‚¹åº</span></span><br><span class="line">  std::vector&lt;<span class="keyword">float</span>&gt; pointSearchSqDis;<span class="comment">//æœç´¢åˆ°çš„ç‚¹å¹³æ–¹è·ç¦»</span></span><br><span class="line"></span><br><span class="line">  PointType pointOri, pointSel<span class="comment">/*é€‰ä¸­çš„ç‰¹å¾ç‚¹*/</span>, tripod1, tripod2, tripod3<span class="comment">/*ç‰¹å¾ç‚¹çš„å¯¹åº”ç‚¹*/</span>, pointProj<span class="comment">/*unused*/</span>, coeff;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//é€€åŒ–æ ‡å¿—</span></span><br><span class="line">  <span class="keyword">bool</span> isDegenerate = <span class="literal">false</span>;</span><br><span class="line">  <span class="comment">//PçŸ©é˜µï¼Œé¢„æµ‹çŸ©é˜µ</span></span><br><span class="line">  <span class="function">cv::Mat <span class="title">matP</span><span class="params">(<span class="number">6</span>, <span class="number">6</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> frameCount = skipFrameNum;</span><br><span class="line">  <span class="function">ros::Rate <span class="title">rate</span><span class="params">(<span class="number">100</span>)</span></span>;</span><br><span class="line">  <span class="keyword">bool</span> status = ros::<span class="built_in">ok</span>();</span><br><span class="line">  <span class="keyword">while</span> (status) &#123;</span><br><span class="line">    ros::<span class="built_in">spinOnce</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (newCornerPointsSharp &amp;&amp; newCornerPointsLessSharp &amp;&amp; newSurfPointsFlat &amp;&amp; </span><br><span class="line">        newSurfPointsLessFlat &amp;&amp; newLaserCloudFullRes &amp;&amp; newImuTrans &amp;&amp;</span><br><span class="line">        <span class="built_in">fabs</span>(timeCornerPointsSharp - timeSurfPointsLessFlat) &lt; <span class="number">0.005</span> &amp;&amp;</span><br><span class="line">        <span class="built_in">fabs</span>(timeCornerPointsLessSharp - timeSurfPointsLessFlat) &lt; <span class="number">0.005</span> &amp;&amp;</span><br><span class="line">        <span class="built_in">fabs</span>(timeSurfPointsFlat - timeSurfPointsLessFlat) &lt; <span class="number">0.005</span> &amp;&amp;</span><br><span class="line">        <span class="built_in">fabs</span>(timeLaserCloudFullRes - timeSurfPointsLessFlat) &lt; <span class="number">0.005</span> &amp;&amp;</span><br><span class="line">        <span class="built_in">fabs</span>(timeImuTrans - timeSurfPointsLessFlat) &lt; <span class="number">0.005</span>) &#123;  <span class="comment">//åŒæ­¥ä½œç”¨ï¼Œç¡®ä¿åŒæ—¶æ”¶åˆ°åŒä¸€ä¸ªç‚¹äº‘çš„ç‰¹å¾ç‚¹ä»¥åŠIMUä¿¡æ¯æ‰è¿›å…¥</span></span><br><span class="line">      newCornerPointsSharp = <span class="literal">false</span>;</span><br><span class="line">      newCornerPointsLessSharp = <span class="literal">false</span>;</span><br><span class="line">      newSurfPointsFlat = <span class="literal">false</span>;</span><br><span class="line">      newSurfPointsLessFlat = <span class="literal">false</span>;</span><br><span class="line">      newLaserCloudFullRes = <span class="literal">false</span>;</span><br><span class="line">      newImuTrans = <span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">/***** ä¸€ã€åˆå§‹åŒ– *****/</span></span><br><span class="line">      <span class="comment">/***** äºŒã€ç‚¹äº‘åŒ¹é…ä¸è¿åŠ¨ä¼°è®¡ *****/</span></span><br><span class="line">      <span class="comment">/***** ä¸‰ã€åæ ‡è½¬æ¢ *****/</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;       </span><br></pre></td></tr></table></figure>
<h3 id="1-åˆå§‹åŒ–"><a href="#1-åˆå§‹åŒ–" class="headerlink" title="1.åˆå§‹åŒ–"></a>1.åˆå§‹åŒ–</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*************</span></span><br><span class="line"><span class="comment">* 1ã€åˆå§‹åŒ–   * </span></span><br><span class="line"><span class="comment">*************/</span></span><br><span class="line"><span class="comment">//å°†ç¬¬ä¸€ä¸ªç‚¹äº‘æ•°æ®é›†å‘é€ç»™laserMapping,ä»ä¸‹ä¸€ä¸ªç‚¹äº‘æ•°æ®å¼€å§‹å¤„ç†</span></span><br><span class="line"><span class="keyword">if</span> (!systemInited) &#123;</span><br><span class="line">    <span class="comment">// å°†cornerPointsLessSharpï¼ˆæ¥æ”¶åˆ°çš„less_sharpç‚¹äº‘ï¼‰ä¸laserCloudCornerLastï¼ˆä¸Šä¸€å¸§æ‰€æœ‰è¾¹ç¼˜ç‚¹äº‘ï¼‰äº¤æ¢,</span></span><br><span class="line">    <span class="comment">// ç›®çš„ä¿å­˜cornerPointsLessSharpï¼ˆæ¥æ”¶åˆ°çš„less_sharpç‚¹äº‘ï¼‰çš„å€¼ä¸‹è½®ä½¿ç”¨</span></span><br><span class="line">    pcl::PointCloud&lt;PointType&gt;::Ptr laserCloudTemp = cornerPointsLessSharp;</span><br><span class="line">    cornerPointsLessSharp = laserCloudCornerLast;</span><br><span class="line">    laserCloudCornerLast = laserCloudTemp;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†surfPointLessFlatï¼ˆæ¥æ”¶åˆ°çš„less_flatç‚¹äº‘ï¼‰ä¸laserCloudSurfLastï¼ˆä¸Šä¸€å¸§æ‰€æœ‰å¹³é¢ç‚¹äº‘ï¼‰äº¤æ¢ï¼Œ</span></span><br><span class="line">    <span class="comment">// ç›®çš„ä¿å­˜surfPointsLessFlatï¼ˆæ¥æ”¶åˆ°çš„less_flatç‚¹äº‘ï¼‰çš„å€¼ä¸‹è½®ä½¿ç”¨</span></span><br><span class="line">    laserCloudTemp = surfPointsLessFlat;</span><br><span class="line">    surfPointsLessFlat = laserCloudSurfLast;</span><br><span class="line">    laserCloudSurfLast = laserCloudTemp;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨ä¸Šä¸€å¸§çš„ç‰¹å¾ç‚¹æ„å»ºkd-tree</span></span><br><span class="line">    kdtreeCornerLast-&gt;<span class="built_in">setInputCloud</span>(laserCloudCornerLast);<span class="comment">//æ‰€æœ‰çš„è¾¹æ²¿ç‚¹é›†åˆ</span></span><br><span class="line">    kdtreeSurfLast-&gt;<span class="built_in">setInputCloud</span>(laserCloudSurfLast);<span class="comment">//æ‰€æœ‰çš„å¹³é¢ç‚¹é›†åˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†cornerPointsLessSharpï¼ˆä¸Šä¸€å¸§æ‰€æœ‰è¾¹ç¼˜ç‚¹äº‘ï¼‰å‘é€ç»™laserMapping</span></span><br><span class="line">    sensor_msgs::PointCloud2 laserCloudCornerLast2;</span><br><span class="line">    pcl::<span class="built_in">toROSMsg</span>(*laserCloudCornerLast, laserCloudCornerLast2);</span><br><span class="line">    laserCloudCornerLast2.header.stamp = ros::<span class="built_in">Time</span>().<span class="built_in">fromSec</span>(timeSurfPointsLessFlat);</span><br><span class="line">    laserCloudCornerLast2.header.frame_id = <span class="string">&quot;/camera&quot;</span>;</span><br><span class="line">    pubLaserCloudCornerLast.<span class="built_in">publish</span>(laserCloudCornerLast2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†surfPointLessFlatï¼ˆä¸Šä¸€å¸§æ‰€æœ‰å¹³é¢ç‚¹äº‘ï¼‰å‘é€ç»™laserMapping</span></span><br><span class="line">    sensor_msgs::PointCloud2 laserCloudSurfLast2;</span><br><span class="line">    pcl::<span class="built_in">toROSMsg</span>(*laserCloudSurfLast, laserCloudSurfLast2);</span><br><span class="line">    laserCloudSurfLast2.header.stamp = ros::<span class="built_in">Time</span>().<span class="built_in">fromSec</span>(timeSurfPointsLessFlat);</span><br><span class="line">    laserCloudSurfLast2.header.frame_id = <span class="string">&quot;/camera&quot;</span>;</span><br><span class="line">    pubLaserCloudSurfLast.<span class="built_in">publish</span>(laserCloudSurfLast2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®°ä½åŸç‚¹çš„ç¿»æ»šè§’å’Œä¿¯ä»°è§’</span></span><br><span class="line">    transformSum[<span class="number">0</span>] += imuPitchStart;</span><br><span class="line">    transformSum[<span class="number">2</span>] += imuRollStart;</span><br><span class="line"></span><br><span class="line">    systemInited = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Tå¹³ç§»é‡çš„åˆå€¼èµ‹å€¼ä¸ºåŠ å‡é€Ÿçš„ä½ç§»é‡ï¼Œä¸ºå…¶æ¢¯åº¦ä¸‹é™çš„æ–¹å‘ï¼ˆæ²¿ç”¨ä¸Šæ¬¡è½¬æ¢çš„Tï¼ˆä¸€ä¸ªsweepåŒ€é€Ÿæ¨¡å‹ï¼‰ï¼ŒåŒæ—¶åœ¨å…¶åŸºç¡€ä¸Šå‡å»åŒ€é€Ÿè¿åŠ¨ä½ç§»ï¼Œå³åªè€ƒè™‘åŠ å‡é€Ÿçš„ä½ç§»é‡ï¼‰</span></span><br><span class="line">transform[<span class="number">3</span>] -= imuVeloFromStartX * scanPeriod;</span><br><span class="line">transform[<span class="number">4</span>] -= imuVeloFromStartY * scanPeriod;</span><br><span class="line">transform[<span class="number">5</span>] -= imuVeloFromStartZ * scanPeriod;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼šè¿™éƒ¨åˆ†ä¸»è¦åšäº†ä¸¤ä»¶äº‹ï¼Œâ‘ å°†è®¢é˜…çš„æ•°æ®ä¿å­˜ä¸ºä¸Šä¸€æ—¶åˆ»çš„æ•°æ®ã€‚ä½œè€…åšäº†ä¸¤æ¬¡æ•°æ®äº¤æ¢ï¼šå°†<code>cornerPointsLessSharp</code>ï¼ˆæ¥æ”¶åˆ°çš„<code>less_sharp</code>ç‚¹äº‘ï¼‰ä¸<code>laserCloudCornerLast</code>ï¼ˆä¸Šä¸€å¸§æ‰€æœ‰è¾¹ç¼˜ç‚¹äº‘ï¼‰äº¤æ¢ï¼Œå°†<code>surfPointLessFlat</code>ï¼ˆæ¥æ”¶åˆ°çš„<code>less_flat</code>ç‚¹äº‘ï¼‰ä¸<code>laserCloudSurfLast</code>ï¼ˆä¸Šä¸€å¸§æ‰€æœ‰å¹³é¢ç‚¹äº‘ï¼‰äº¤æ¢ï¼Œç›®çš„å°±æ˜¯å°†æ¥æ”¶çš„æ•°æ®ä¿å­˜ä¸ºä¸Šä¸€æ—¶åˆ»çš„æ•°æ®ï¼Œå¹¶å°†ä¸Šä¸€æ—¶åˆ»çš„æ•°æ®æ„å»º<code>kd-tree</code>ï¼Œä¾›ä¸‹è½®ä½¿ç”¨ã€‚</p>
<p>â‘¡å°†ä¸Šä¸€æ—¶åˆ»çš„æ•°æ®å‘å¸ƒå‡ºå»ã€‚å°†<code>cornerPointsLessSharp</code>ï¼ˆä¸Šä¸€å¸§æ‰€æœ‰è¾¹ç¼˜ç‚¹äº‘ï¼‰å’Œ<code>surfPointLessFlat</code>ï¼ˆä¸Šä¸€å¸§æ‰€æœ‰å¹³é¢ç‚¹äº‘ï¼‰ä¹Ÿå³è¾¹æ²¿ç‚¹å’Œå¹³é¢ç‚¹åˆ†åˆ«å‘é€ç»™<code>laserMapping</code>ã€‚</p>
<h3 id="2-å¸§é—´åŒ¹é…ä¸è¿åŠ¨ä¼°è®¡"><a href="#2-å¸§é—´åŒ¹é…ä¸è¿åŠ¨ä¼°è®¡" class="headerlink" title="2.å¸§é—´åŒ¹é…ä¸è¿åŠ¨ä¼°è®¡"></a>2.å¸§é—´åŒ¹é…ä¸è¿åŠ¨ä¼°è®¡</h3><p>è¿™éƒ¨åˆ†ä»£ç äººç»™æˆ‘çœ‹éº»äº†ï¼Œé€šè¿‡å¯¹ä»£ç çš„æŠ˜å å’Œå‰äººçš„çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°è¿™éƒ¨åˆ†ä¸»è¦å¹²äº†ä»€ä¹ˆï¼Œå…ˆçœ‹ä¸€ä¸‹æ•´ä½“çš„ç»“æ„ã€‚</p>
<p><img src="/images/LOAMæºä»£ç è§£æ/image-20220415151916947.png" alt="image-20220415151916947"></p>
<p>ã€è§£æã€‘ï¼šè¿™éƒ¨åˆ†é¦–å…ˆè¿›è¡Œäº†ä¸€ä¸ªæ€»çš„åˆ¤æ–­ï¼Œåœ¨è¿›è¡Œåˆå§‹åŒ–ä¹‹åï¼Œé¦–å…ˆè¦æ±‚ä¸Šä¸€æ—¶åˆ»çš„ç‚¹çš„ä¸ªæ•°å¿…é¡»è¾¾åˆ°è¾¹ç¼˜ç‚¹å¤§äº10ã€å¹³é¢ç‰¹å¾ç‚¹å¤§äº100çš„è¦æ±‚ï¼Œæ‰èƒ½è¿›è¡Œä¹‹åçš„ç‚¹äº‘åŒ¹é…ä»¥åŠè¿åŠ¨ä¼°è®¡ã€‚</p>
<p>ç„¶ååšäº†ä¸€æ­¥æ“ä½œ<code>removeNaNFromPointCloud</code>ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯<strong>å»é™¤æ— æ•ˆç‚¹</strong>ï¼Œå‚æ•°åˆ†åˆ«æ˜¯ï¼ˆè¾“å…¥ç‚¹äº‘ï¼Œè¾“å‡ºç‚¹äº‘ï¼Œå¯¹åº”ä¿ç•™çš„ç´¢å¼•ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œå°†å«æœ‰<code>NaN</code>çš„ï¼ˆæ— æ•ˆçš„ï¼‰è¾¹ç¼˜ç‚¹äº‘å»é™¤äº†ï¼Œå¹¶ç»Ÿè®¡äº†è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹çš„ä¸ªæ•°ã€‚</p>
<p>åšå¥½ä¸Šé¢çš„åˆå§‹å·¥ä½œä¹‹åï¼Œå°±å¼€å§‹è¿›è¡Œè¿­ä»£ä¼˜åŒ–äº†ï¼Œè¿™éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯éçº¿æ€§æœ€å°äºŒä¹˜æ³•ä¸­çš„åˆ—æ–‡ä¼¯æ ¼ï¼ˆ<code>LM</code>ï¼‰ç®—æ³•ï¼Œåšäº†25æ¬¡è¿­ä»£ã€‚å½“ç„¶ä¼˜åŒ–å¹¶ä¸æ˜¯è¿™ä¹ˆç®€å•çš„äº‹æƒ…ï¼Œæ‰€ä»¥çº¢è‰²æ¡†é‡Œçš„å†…å®¹å°±æ˜¯é‡ç‚¹äº†ï¼Œå®ƒä»¬æ˜¯ä¼˜åŒ–å¿…ä¸å¯å°‘çš„æ­¥éª¤ï¼Œä¸‹é¢ä¾æ¬¡ä»‹ç»æ¯ä¸€éƒ¨åˆ†çš„å¯¹åº”çš„è®ºæ–‡å†…å®¹ã€‚</p>
<h4 id="â‘ ç‚¹çº¿åŒ¹é…ä¸é›…å¯æ¯”æ±‚è§£"><a href="#â‘ ç‚¹çº¿åŒ¹é…ä¸é›…å¯æ¯”æ±‚è§£" class="headerlink" title="â‘ ç‚¹çº¿åŒ¹é…ä¸é›…å¯æ¯”æ±‚è§£"></a>â‘ ç‚¹çº¿åŒ¹é…ä¸é›…å¯æ¯”æ±‚è§£</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">laserCloudOri-&gt;<span class="built_in">clear</span>();</span><br><span class="line">coeffSel-&gt;<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤„ç†å½“å‰ç‚¹äº‘ä¸­çš„æ›²ç‡æœ€å¤§çš„ç‰¹å¾ç‚¹,ä»ä¸Šä¸ªç‚¹äº‘ä¸­æ›²ç‡æ¯”è¾ƒå¤§çš„ç‰¹å¾ç‚¹ä¸­æ‰¾ä¸¤ä¸ªæœ€è¿‘è·ç¦»ç‚¹ï¼Œä¸€ä¸ªç‚¹ä½¿ç”¨kd-treeæŸ¥æ‰¾ï¼Œå¦ä¸€ä¸ªæ ¹æ®æ‰¾åˆ°çš„ç‚¹åœ¨å…¶ç›¸é‚»çº¿æ‰¾å¦å¤–ä¸€ä¸ªæœ€è¿‘è·ç¦»çš„ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cornerPointsSharpNum; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">TransformToStart</span>(&amp;cornerPointsSharp-&gt;points[i], &amp;pointSel);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¯è¿­ä»£äº”æ¬¡ï¼Œé‡æ–°æŸ¥æ‰¾æœ€è¿‘ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (iterCount % <span class="number">5</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        std::vector&lt;<span class="keyword">int</span>&gt; indices;</span><br><span class="line">        pcl::<span class="built_in">removeNaNFromPointCloud</span>(*laserCloudCornerLast, *laserCloudCornerLast, indices);</span><br><span class="line">        <span class="comment">// kd-treeæŸ¥æ‰¾ä¸€ä¸ªæœ€è¿‘è·ç¦»ç‚¹ï¼Œè¾¹æ²¿ç‚¹æœªç»è¿‡ä½“ç´ æ …æ ¼æ»¤æ³¢ï¼Œä¸€èˆ¬è¾¹æ²¿ç‚¹æœ¬æ¥å°±æ¯”è¾ƒå°‘ï¼Œä¸åšæ»¤æ³¢</span></span><br><span class="line">        kdtreeCornerLast-&gt;<span class="built_in">nearestKSearch</span>(pointSel, <span class="number">1</span>, pointSearchInd, pointSearchSqDis);</span><br><span class="line">        <span class="keyword">int</span> closestPointInd = <span class="number">-1</span>, minPointInd2 = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯»æ‰¾ç›¸é‚»çº¿è·ç¦»ç›®æ ‡ç‚¹è·ç¦»æœ€å°çš„ç‚¹</span></span><br><span class="line">        <span class="comment">//å†æ¬¡æé†’ï¼švelodyneæ˜¯2åº¦ä¸€çº¿ï¼ŒscanIDç›¸é‚»å¹¶ä¸ä»£è¡¨çº¿å·ç›¸é‚»ï¼Œç›¸é‚»çº¿åº¦æ•°ç›¸å·®2åº¦ï¼Œä¹Ÿå³çº¿å·scanIDç›¸å·®2</span></span><br><span class="line">        <span class="keyword">if</span> (pointSearchSqDis[<span class="number">0</span>] &lt; <span class="number">25</span>)</span><br><span class="line">        &#123; <span class="comment">//æ‰¾åˆ°çš„æœ€è¿‘ç‚¹è·ç¦»çš„ç¡®å¾ˆè¿‘çš„è¯</span></span><br><span class="line">            closestPointInd = pointSearchInd[<span class="number">0</span>];</span><br><span class="line">            <span class="comment">//æå–æœ€è¿‘ç‚¹çº¿å·</span></span><br><span class="line">            <span class="keyword">int</span> closestPointScan = <span class="built_in"><span class="keyword">int</span></span>(laserCloudCornerLast-&gt;points[closestPointInd].intensity);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> pointSqDis, minPointSqDis2 = <span class="number">25</span>; <span class="comment">//åˆå§‹é—¨æ§›å€¼5ç±³ï¼Œå¯å¤§è‡´è¿‡æ»¤æ‰scanIDç›¸é‚»ï¼Œä½†å®é™…çº¿ä¸ç›¸é‚»çš„å€¼</span></span><br><span class="line">            <span class="comment">//å¯»æ‰¾è·ç¦»ç›®æ ‡ç‚¹æœ€è¿‘è·ç¦»çš„å¹³æ–¹å’Œæœ€å°çš„ç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = closestPointInd + <span class="number">1</span>; j &lt; cornerPointsSharpNum; j++)</span><br><span class="line">            &#123; <span class="comment">//å‘scanIDå¢å¤§çš„æ–¹å‘æŸ¥æ‰¾</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloudCornerLast-&gt;points[j].intensity) &gt; closestPointScan + <span class="number">2.5</span>)</span><br><span class="line">                &#123; <span class="comment">//éç›¸é‚»çº¿</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                pointSqDis = (laserCloudCornerLast-&gt;points[j].x - pointSel.x) *</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].x - pointSel.x) +</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].y - pointSel.y) *</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].y - pointSel.y) +</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].z - pointSel.z) *</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].z - pointSel.z);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloudCornerLast-&gt;points[j].intensity) &gt; closestPointScan)</span><br><span class="line">                &#123; <span class="comment">//ç¡®ä¿ä¸¤ä¸ªç‚¹ä¸åœ¨åŒä¸€æ¡scanä¸Šï¼ˆç›¸é‚»çº¿æŸ¥æ‰¾åº”è¯¥å¯ä»¥ç”¨scanID == closestPointScan +/- 1 æ¥åšï¼‰</span></span><br><span class="line">                    <span class="keyword">if</span> (pointSqDis &lt; minPointSqDis2)</span><br><span class="line">                    &#123; <span class="comment">//è·ç¦»æ›´è¿‘ï¼Œè¦å°äºåˆå§‹å€¼5ç±³</span></span><br><span class="line">                        <span class="comment">//æ›´æ–°æœ€å°è·ç¦»ä¸ç‚¹åº</span></span><br><span class="line">                        minPointSqDis2 = pointSqDis;</span><br><span class="line">                        minPointInd2 = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åŒç†</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = closestPointInd - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">            &#123; <span class="comment">//å‘scanIDå‡å°çš„æ–¹å‘æŸ¥æ‰¾</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloudCornerLast-&gt;points[j].intensity) &lt; closestPointScan - <span class="number">2.5</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                pointSqDis = (laserCloudCornerLast-&gt;points[j].x - pointSel.x) *</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].x - pointSel.x) +</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].y - pointSel.y) *</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].y - pointSel.y) +</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].z - pointSel.z) *</span><br><span class="line">                    (laserCloudCornerLast-&gt;points[j].z - pointSel.z);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloudCornerLast-&gt;points[j].intensity) &lt; closestPointScan)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (pointSqDis &lt; minPointSqDis2)</span><br><span class="line">                    &#123;</span><br><span class="line">                        minPointSqDis2 = pointSqDis;</span><br><span class="line">                        minPointInd2 = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è®°ä½ç»„æˆçº¿çš„ç‚¹åº</span></span><br><span class="line">        pointSearchCornerInd1[i] = closestPointInd; <span class="comment">// kd-treeæœ€è¿‘è·ç¦»ç‚¹ï¼Œ-1è¡¨ç¤ºæœªæ‰¾åˆ°æ»¡è¶³çš„ç‚¹</span></span><br><span class="line">        pointSearchCornerInd2[i] = minPointInd2;    <span class="comment">//å¦ä¸€ä¸ªæœ€è¿‘çš„ï¼Œ-1è¡¨ç¤ºæœªæ‰¾åˆ°æ»¡è¶³çš„ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pointSearchCornerInd2[i] &gt;= <span class="number">0</span>)</span><br><span class="line">    &#123; <span class="comment">//å¤§äºç­‰äº0ï¼Œä¸ç­‰äº-1ï¼Œè¯´æ˜ä¸¤ä¸ªç‚¹éƒ½æ‰¾åˆ°äº†</span></span><br><span class="line">        tripod1 = laserCloudCornerLast-&gt;points[pointSearchCornerInd1[i]];</span><br><span class="line">        tripod2 = laserCloudCornerLast-&gt;points[pointSearchCornerInd2[i]];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€‰æ‹©çš„ç‰¹å¾ç‚¹è®°ä¸ºOï¼Œkd-treeæœ€è¿‘è·ç¦»ç‚¹è®°ä¸ºAï¼Œå¦ä¸€ä¸ªæœ€è¿‘è·ç¦»ç‚¹è®°ä¸ºB</span></span><br><span class="line">        <span class="keyword">float</span> x0 = pointSel.x;</span><br><span class="line">        <span class="keyword">float</span> y0 = pointSel.y;</span><br><span class="line">        <span class="keyword">float</span> z0 = pointSel.z;</span><br><span class="line">        <span class="keyword">float</span> x1 = tripod1.x;</span><br><span class="line">        <span class="keyword">float</span> y1 = tripod1.y;</span><br><span class="line">        <span class="keyword">float</span> z1 = tripod1.z;</span><br><span class="line">        <span class="keyword">float</span> x2 = tripod2.x;</span><br><span class="line">        <span class="keyword">float</span> y2 = tripod2.y;</span><br><span class="line">        <span class="keyword">float</span> z2 = tripod2.z;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘é‡OA = (x0 - x1, y0 - y1, z0 - z1), å‘é‡OB = (x0 - x2, y0 - y2, z0 - z2)ï¼Œå‘é‡AB = ï¼ˆx1 - x2, y1 - y2, z1 - z2ï¼‰</span></span><br><span class="line">        <span class="comment">//å‘é‡OA OBçš„å‘é‡ç§¯(å³å‰ä¹˜)ä¸ºï¼š</span></span><br><span class="line">        <span class="comment">//|  i      j      k  |</span></span><br><span class="line">        <span class="comment">//|x0-x1  y0-y1  z0-z1|</span></span><br><span class="line">        <span class="comment">//|x0-x2  y0-y2  z0-z2|</span></span><br><span class="line">        <span class="comment">//æ¨¡ä¸ºï¼š</span></span><br><span class="line">        <span class="keyword">float</span> a012 = <span class="built_in">sqrt</span>(((x0 - x1) * (y0 - y2) - (x0 - x2) * (y0 - y1)) * ((x0 - x1) * (y0 - y2) - (x0 - x2) * (y0 - y1)) + ((x0 - x1) * (z0 - z2) - (x0 - x2) * (z0 - z1)) * ((x0 - x1) * (z0 - z2) - (x0 - x2) * (z0 - z1)) + ((y0 - y1) * (z0 - z2) - (y0 - y2) * (z0 - z1)) * ((y0 - y1) * (z0 - z2) - (y0 - y2) * (z0 - z1)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸¤ä¸ªæœ€è¿‘è·ç¦»ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œå³å‘é‡ABçš„æ¨¡</span></span><br><span class="line">        <span class="keyword">float</span> l12 = <span class="built_in">sqrt</span>((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2) + (z1 - z2) * (z1 - z2));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ABæ–¹å‘çš„å•ä½å‘é‡ä¸OABå¹³é¢çš„å•ä½æ³•å‘é‡çš„å‘é‡ç§¯åœ¨å„è½´ä¸Šçš„åˆ†é‡ï¼ˆdçš„æ–¹å‘ï¼‰</span></span><br><span class="line">        <span class="comment">// xè½´åˆ†é‡i</span></span><br><span class="line">        <span class="keyword">float</span> la = ((y1 - y2) * ((x0 - x1) * (y0 - y2) - (x0 - x2) * (y0 - y1)) + (z1 - z2) * ((x0 - x1) * (z0 - z2) - (x0 - x2) * (z0 - z1))) / a012 / l12;</span><br><span class="line">        <span class="comment">// yè½´åˆ†é‡j</span></span><br><span class="line">        <span class="keyword">float</span> lb = -((x1 - x2) * ((x0 - x1) * (y0 - y2) - (x0 - x2) * (y0 - y1)) - (z1 - z2) * ((y0 - y1) * (z0 - z2) - (y0 - y2) * (z0 - z1))) / a012 / l12;</span><br><span class="line">        <span class="comment">// zè½´åˆ†é‡k</span></span><br><span class="line">        <span class="keyword">float</span> lc = -((x1 - x2) * ((x0 - x1) * (z0 - z2) - (x0 - x2) * (z0 - z1)) + (y1 - y2) * ((y0 - y1) * (z0 - z2) - (y0 - y2) * (z0 - z1))) / a012 / l12;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç‚¹åˆ°çº¿çš„è·ç¦»ï¼Œd = |å‘é‡OA å‰ä¹˜ å‘é‡OB|/|AB|</span></span><br><span class="line">        <span class="keyword">float</span> ld2 = a012 / l12;</span><br><span class="line">        <span class="comment">//æƒé‡è®¡ç®—ï¼Œè·ç¦»è¶Šå¤§æƒé‡è¶Šå°ï¼Œè·ç¦»è¶Šå°æƒé‡è¶Šå¤§ï¼Œå¾—åˆ°çš„æƒé‡èŒƒå›´&lt;=1</span></span><br><span class="line">        <span class="keyword">float</span> s = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (iterCount &gt;= <span class="number">5</span>)</span><br><span class="line">        &#123; <span class="comment">// 5æ¬¡è¿­ä»£ä¹‹åå¼€å§‹å¢åŠ æƒé‡å› ç´ </span></span><br><span class="line">            s = <span class="number">1</span> - <span class="number">1.8</span> * <span class="built_in">fabs</span>(ld2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è€ƒè™‘æƒé‡</span></span><br><span class="line">        coeff.x = s * la;</span><br><span class="line">        coeff.y = s * lb;</span><br><span class="line">        coeff.z = s * lc;</span><br><span class="line">        coeff.intensity = s * ld2;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (s &gt; <span class="number">0.1</span> &amp;&amp; ld2 != <span class="number">0</span>)</span><br><span class="line">        &#123; <span class="comment">//åªä¿ç•™æƒé‡å¤§çš„ï¼Œä¹Ÿå³è·ç¦»æ¯”è¾ƒå°çš„ç‚¹ï¼ŒåŒæ—¶ä¹Ÿèˆå¼ƒè·ç¦»ä¸ºé›¶çš„</span></span><br><span class="line">            laserCloudOri-&gt;<span class="built_in">push_back</span>(cornerPointsSharp-&gt;points[i]);</span><br><span class="line">            coeffSel-&gt;<span class="built_in">push_back</span>(coeff);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€ <span style="color:red;">ç‚¹çº¿åŒ¹é…</span> è§£æã€‘ï¼šè¿™éƒ¨åˆ†ä¸»è¦ä»»åŠ¡æ˜¯è¿›è¡Œç‚¹å’Œçº¿çš„åŒ¹é…ï¼Œé€šè¿‡è®ºæ–‡çš„è§£ææˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬çš„ç‰¹å¾åŒ¹é…åšçš„å°±æ˜¯å¯¹$\overline{P}_k$ä¸­çš„çº¿ä¸$k+1$æ—¶åˆ»æŠ•å½±åˆ°$k$æ—¶åˆ»çš„ç‚¹$i,i\in\tilde\xi_{k+1}$ä¹‹é—´çš„åŒ¹é…ã€‚è¿™é‡Œå¯¹è®ºæ–‡ä¸­çš„å†…å®¹åšä¸€ä¸ªç®€å•çš„å›é¡¾ï¼š</p>
<p>è¯¦ç»†æŸ¥çœ‹ï¼š<a href="https://lukeyalvin.top/2022/04/11/loam%E8%AE%BA%E6%96%87%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/#C-%E7%82%B9%E5%92%8C%E5%AF%B9%E5%BA%94%E7%89%B9%E5%BE%81%E5%8C%BA%E5%9F%9F%E8%B7%9D%E7%A6%BB%E7%9A%84%E8%AE%A1%E7%AE%97">C.ç‚¹å’Œå¯¹åº”ç‰¹å¾åŒºåŸŸè·ç¦»çš„è®¡ç®—</a><br>è®ºæ–‡ä¸­æåˆ°ï¼Œè¾¹çº¿æ˜¯ç”±ä¸¤ä¸ªç‚¹æ„æˆçš„ï¼Œå³$j,l$ä¸”$j,l\in \overline{P}_k$ï¼Œå…¶ä¸­$j$æ˜¯$i$åœ¨$\overline{P}_k$ä¸­çš„æœ€è¿‘é‚»ï¼Œ$l$æ˜¯$i$åœ¨è¿ç»­ä¸¤æ¬¡æ‰«æ$j$æ—¶çš„æœ€è¿‘é‚»ï¼Œ$(j, l)$æ„æˆ$i$çš„å¯¹åº”å…³ç³»ã€‚æ‰€ä»¥å…³é”®å°±æ˜¯è¿™ä¸¤ä¸ªç‚¹è¦æ€ä¹ˆæ‰¾ï¼Œåªæœ‰æ‰¾åˆ°è¿™ä¸¤ä¸ªç‚¹ä¹‹åæ‰èƒ½å¾—åˆ°ä¸€æ¡çº¿ï¼Œè¿›è€Œæ‰èƒ½åšç‚¹çº¿åŒ¹é…ã€‚ç”±äºæˆ‘ä»¬çš„$j,l$æ‰€åœ¨çš„ScanIDå¯èƒ½æ¯”$i$çš„å¤§ï¼Œä¹Ÿå¯èƒ½æ¯”$i$çš„å°ï¼Œå› æ­¤ï¼Œä»£ç ä¸­æ˜¯å¾€ä¸¤å¤´æ‰¾ã€‚</p>
<p>ä»£ç ä¸­ï¼Œé€šè¿‡å¤„ç†ä¸Šä¸€å¸§ä¸­æ›²ç‡æœ€å¤§çš„ç‰¹å¾ç‚¹ï¼Œä»è¯¥ç‰¹å¾ç‚¹ä¸­æ‰¾åˆ°ä¸¤ä¸ªæœ€è¿‘è·ç¦»çš„ç‚¹$j$ï¼Œä¸€ä¸ªç‚¹ä½¿ç”¨kd-treeæŸ¥æ‰¾ï¼Œç„¶åæ ¹æ®æ‰¾åˆ°çš„ç‚¹åœ¨å…¶ç›¸é‚»çº¿æ‰¾å¦å¤–ä¸€ä¸ªæœ€è¿‘è·ç¦»çš„ç‚¹$l$ã€‚å¹¶ä¸”ç”±äºè¿­ä»£è¿‡ç¨‹ä¸­æœ€è¿‘çš„ç‚¹çš„åŒ¹é…æ˜¯éšç€ transform çš„æ›´æ–°é€æ¸å˜åŒ–çš„ï¼Œå› æ­¤ä½œè€…é‡‡ç”¨äº† 5 æ¬¡è¿­ä»£ï¼ˆè®¡ç®—é‡çš„ä¸€ç§å¹³è¡¡å§ï¼Œæ¯æ¬¡æ›´æ–° transform åéƒ½æ›´æ–°ä¸€æ¬¡æœ€è¿‘åŒ¹é…è®¡ç®—èµ„æºæ¶ˆè€—å¤§ï¼Ÿï¼‰åå†è®¡ç®—ä¸€æ¬¡å¯¹åº”çš„æœ€è¿‘ç‚¹ã€‚è¿™æ ·ä¸‹æ¬¡é€šè¿‡æ›´æ–°çš„æœ€è¿‘ç‚¹åŒ¹é…å¯¹æ¥å®Œæˆæ–°çš„è®¡ç®—ã€‚</p>
<p>æ‰¾åˆ°ä¸¤ä¸ªç‚¹ä¹‹åå®šä¹‰$i$åæ ‡$O(x_0 , y_0, z_0 )$ï¼Œ$j$çš„åæ ‡$A(x_1 , y_1, z_1 )$ï¼Œ$l$çš„åæ ‡$B(x_2 , y_2, z_2)$ï¼Œç”±è®ºæ–‡å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
d_\xi=\frac{|\overrightarrow{OA}Ã—\overrightarrow {OB}|}{|\overrightarrow{AB}|}=a012 / l12;</script><p>ã€ <span style="color:red;">é›…å¯æ¯”æ±‚è§£</span> è§£æã€‘ï¼š</p>
<p><img src="/images/LOAMæºä»£ç è§£æ/image-20220415214835849.png" alt="image-20220415214835849"></p>
<p>å¯¹åº”ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ABæ–¹å‘çš„å•ä½å‘é‡ä¸OABå¹³é¢çš„å•ä½æ³•å‘é‡çš„å‘é‡ç§¯åœ¨å„è½´ä¸Šçš„åˆ†é‡ï¼ˆdçš„æ–¹å‘ï¼‰</span></span><br><span class="line"><span class="comment">// xè½´åˆ†é‡i</span></span><br><span class="line"><span class="keyword">float</span> la = ((y1 - y2) * ((x0 - x1) * (y0 - y2) - (x0 - x2) * (y0 - y1)) + (z1 - z2) * ((x0 - x1) * (z0 - z2) - (x0 - x2) * (z0 - z1))) / a012 / l12;</span><br><span class="line"><span class="comment">// yè½´åˆ†é‡j</span></span><br><span class="line"><span class="keyword">float</span> lb = -((x1 - x2) * ((x0 - x1) * (y0 - y2) - (x0 - x2) * (y0 - y1)) - (z1 - z2) * ((y0 - y1) * (z0 - z2) - (y0 - y2) * (z0 - z1))) / a012 / l12;</span><br><span class="line"><span class="comment">// zè½´åˆ†é‡k</span></span><br><span class="line"><span class="keyword">float</span> lc = -((x1 - x2) * ((x0 - x1) * (z0 - z2) - (x0 - x2) * (z0 - z1)) + (y1 - y2) * ((y0 - y1) * (z0 - z2) - (y0 - y2) * (z0 - z1))) / a012 / l12;</span><br></pre></td></tr></table></figure>
<p>æ±‚å¾—æ¢¯åº¦æ–¹å‘å‘é‡ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial D(\tilde{X}^L_{(k+1,i)})}{\partial \tilde{X}^L_{(k+1,i)} }=[a_\mathcal{H},b_\mathcal{H},c_\mathcal{H}]^T=[la,lb,lc]^T</script><h4 id="â‘¡ç‚¹é¢åŒ¹é…ä¸é›…å¯æ¯”æ±‚è§£"><a href="#â‘¡ç‚¹é¢åŒ¹é…ä¸é›…å¯æ¯”æ±‚è§£" class="headerlink" title="â‘¡ç‚¹é¢åŒ¹é…ä¸é›…å¯æ¯”æ±‚è§£"></a>â‘¡ç‚¹é¢åŒ¹é…ä¸é›…å¯æ¯”æ±‚è§£</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹æœ¬æ¬¡æ¥æ”¶åˆ°çš„æ›²ç‡æœ€å°çš„ç‚¹,ä»ä¸Šæ¬¡æ¥æ”¶åˆ°çš„ç‚¹äº‘æ›²ç‡æ¯”è¾ƒå°çš„ç‚¹ä¸­æ‰¾ä¸‰ç‚¹ç»„æˆå¹³é¢ï¼Œä¸€ä¸ªä½¿ç”¨kd-treeæŸ¥æ‰¾ï¼Œå¦å¤–ä¸€ä¸ªåœ¨åŒä¸€çº¿ä¸ŠæŸ¥æ‰¾æ»¡è¶³è¦æ±‚çš„ï¼Œç¬¬ä¸‰ä¸ªåœ¨ä¸åŒçº¿ä¸ŠæŸ¥æ‰¾æ»¡è¶³è¦æ±‚çš„</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; surfPointsFlatNum; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">TransformToStart</span>(&amp;surfPointsFlat-&gt;points[i], &amp;pointSel);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (iterCount % <span class="number">5</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// kd-treeæœ€è¿‘ç‚¹æŸ¥æ‰¾ï¼Œåœ¨ç»è¿‡ä½“ç´ æ …æ ¼æ»¤æ³¢ä¹‹åçš„å¹³é¢ç‚¹ä¸­æŸ¥æ‰¾ï¼Œä¸€èˆ¬å¹³é¢ç‚¹å¤ªå¤šï¼Œæ»¤æ³¢åæœ€è¿‘ç‚¹æŸ¥æ‰¾æ•°æ®é‡å°</span></span><br><span class="line">        kdtreeSurfLast-&gt;<span class="built_in">nearestKSearch</span>(pointSel, <span class="number">1</span>, pointSearchInd, pointSearchSqDis);</span><br><span class="line">        <span class="keyword">int</span> closestPointInd = <span class="number">-1</span>, minPointInd2 = <span class="number">-1</span>, minPointInd3 = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span> (pointSearchSqDis[<span class="number">0</span>] &lt; <span class="number">25</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            closestPointInd = pointSearchInd[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> closestPointScan = <span class="built_in"><span class="keyword">int</span></span>(laserCloudSurfLast-&gt;points[closestPointInd].intensity);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> pointSqDis, minPointSqDis2 = <span class="number">25</span>, minPointSqDis3 = <span class="number">25</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = closestPointInd + <span class="number">1</span>; j &lt; surfPointsFlatNum; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloudSurfLast-&gt;points[j].intensity) &gt; closestPointScan + <span class="number">2.5</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                pointSqDis = (laserCloudSurfLast-&gt;points[j].x - pointSel.x) *</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].x - pointSel.x) +</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].y - pointSel.y) *</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].y - pointSel.y) +</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].z - pointSel.z) *</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].z - pointSel.z);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloudSurfLast-&gt;points[j].intensity) &lt;= closestPointScan)</span><br><span class="line">                &#123; <span class="comment">//å¦‚æœç‚¹çš„çº¿å·å°äºç­‰äºæœ€è¿‘ç‚¹çš„çº¿å·(åº”è¯¥æœ€å¤šå–ç­‰ï¼Œä¹Ÿå³åŒä¸€çº¿ä¸Šçš„ç‚¹)</span></span><br><span class="line">                    <span class="keyword">if</span> (pointSqDis &lt; minPointSqDis2)</span><br><span class="line">                    &#123;</span><br><span class="line">                        minPointSqDis2 = pointSqDis;</span><br><span class="line">                        minPointInd2 = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123; <span class="comment">//å¦‚æœç‚¹å¤„åœ¨å¤§äºè¯¥çº¿ä¸Š</span></span><br><span class="line">                    <span class="keyword">if</span> (pointSqDis &lt; minPointSqDis3)</span><br><span class="line">                    &#123;</span><br><span class="line">                        minPointSqDis3 = pointSqDis;</span><br><span class="line">                        minPointInd3 = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åŒç†</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = closestPointInd - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloudSurfLast-&gt;points[j].intensity) &lt; closestPointScan - <span class="number">2.5</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                pointSqDis = (laserCloudSurfLast-&gt;points[j].x - pointSel.x) *</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].x - pointSel.x) +</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].y - pointSel.y) *</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].y - pointSel.y) +</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].z - pointSel.z) *</span><br><span class="line">                    (laserCloudSurfLast-&gt;points[j].z - pointSel.z);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in"><span class="keyword">int</span></span>(laserCloudSurfLast-&gt;points[j].intensity) &gt;= closestPointScan)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (pointSqDis &lt; minPointSqDis2)</span><br><span class="line">                    &#123;</span><br><span class="line">                        minPointSqDis2 = pointSqDis;</span><br><span class="line">                        minPointInd2 = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (pointSqDis &lt; minPointSqDis3)</span><br><span class="line">                    &#123;</span><br><span class="line">                        minPointSqDis3 = pointSqDis;</span><br><span class="line">                        minPointInd3 = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pointSearchSurfInd1[i] = closestPointInd; <span class="comment">// kd-treeæœ€è¿‘è·ç¦»ç‚¹,-1è¡¨ç¤ºæœªæ‰¾åˆ°æ»¡è¶³è¦æ±‚çš„ç‚¹</span></span><br><span class="line">        pointSearchSurfInd2[i] = minPointInd2;    <span class="comment">//åŒä¸€çº¿å·ä¸Šçš„è·ç¦»æœ€è¿‘çš„ç‚¹ï¼Œ-1è¡¨ç¤ºæœªæ‰¾åˆ°æ»¡è¶³è¦æ±‚çš„ç‚¹</span></span><br><span class="line">        pointSearchSurfInd3[i] = minPointInd3;    <span class="comment">//ä¸åŒçº¿å·ä¸Šçš„è·ç¦»æœ€è¿‘çš„ç‚¹ï¼Œ-1è¡¨ç¤ºæœªæ‰¾åˆ°æ»¡è¶³è¦æ±‚çš„ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pointSearchSurfInd2[i] &gt;= <span class="number">0</span> &amp;&amp; pointSearchSurfInd3[i] &gt;= <span class="number">0</span>)</span><br><span class="line">    &#123;                                                               <span class="comment">//æ‰¾åˆ°äº†ä¸‰ä¸ªç‚¹</span></span><br><span class="line">        tripod1 = laserCloudSurfLast-&gt;points[pointSearchSurfInd1[i]]; <span class="comment">// Aç‚¹</span></span><br><span class="line">        tripod2 = laserCloudSurfLast-&gt;points[pointSearchSurfInd2[i]]; <span class="comment">// Bç‚¹</span></span><br><span class="line">        tripod3 = laserCloudSurfLast-&gt;points[pointSearchSurfInd3[i]]; <span class="comment">// Cç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘é‡AB = (tripod2.x - tripod1.x, tripod2.y - tripod1.y, tripod2.z - tripod1.z)</span></span><br><span class="line">        <span class="comment">//å‘é‡AC = (tripod3.x - tripod1.x, tripod3.y - tripod1.y, tripod3.z - tripod1.z)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘é‡AB ACçš„å‘é‡ç§¯ï¼ˆå³å‰ä¹˜ï¼‰ï¼Œå¾—åˆ°çš„æ˜¯æ³•å‘é‡</span></span><br><span class="line">        <span class="comment">// xè½´æ–¹å‘åˆ†å‘é‡i</span></span><br><span class="line">        <span class="keyword">float</span> pa = (tripod2.y - tripod1.y) * (tripod3.z - tripod1.z) - (tripod3.y - tripod1.y) * (tripod2.z - tripod1.z);</span><br><span class="line">        <span class="comment">// yè½´æ–¹å‘åˆ†å‘é‡j</span></span><br><span class="line">        <span class="keyword">float</span> pb = (tripod2.z - tripod1.z) * (tripod3.x - tripod1.x) - (tripod3.z - tripod1.z) * (tripod2.x - tripod1.x);</span><br><span class="line">        <span class="comment">// zè½´æ–¹å‘åˆ†å‘é‡k</span></span><br><span class="line">        <span class="keyword">float</span> pc = (tripod2.x - tripod1.x) * (tripod3.y - tripod1.y) - (tripod3.x - tripod1.x) * (tripod2.y - tripod1.y);</span><br><span class="line">        <span class="keyword">float</span> pd = -(pa * tripod1.x + pb * tripod1.y + pc * tripod1.z);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ³•å‘é‡çš„æ¨¡</span></span><br><span class="line">        <span class="keyword">float</span> ps = <span class="built_in">sqrt</span>(pa * pa + pb * pb + pc * pc);</span><br><span class="line">        <span class="comment">// pa pb pcä¸ºæ³•å‘é‡å„æ–¹å‘ä¸Šçš„å•ä½å‘é‡</span></span><br><span class="line">        pa /= ps;</span><br><span class="line">        pb /= ps;</span><br><span class="line">        pc /= ps;</span><br><span class="line">        pd /= ps;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç‚¹åˆ°é¢çš„è·ç¦»ï¼šå‘é‡OAä¸ä¸æ³•å‘é‡çš„ç‚¹ç§¯é™¤ä»¥æ³•å‘é‡çš„æ¨¡</span></span><br><span class="line">        <span class="keyword">float</span> pd2 = pa * pointSel.x + pb * pointSel.y + pc * pointSel.z + pd;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŒç†è®¡ç®—æƒé‡</span></span><br><span class="line">        <span class="keyword">float</span> s = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (iterCount &gt;= <span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s = <span class="number">1</span> - <span class="number">1.8</span> * <span class="built_in">fabs</span>(pd2) / <span class="built_in">sqrt</span>(<span class="built_in">sqrt</span>(pointSel.x * pointSel.x + pointSel.y * pointSel.y + pointSel.z * pointSel.z));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è€ƒè™‘æƒé‡</span></span><br><span class="line">        coeff.x = s * pa;</span><br><span class="line">        coeff.y = s * pb;</span><br><span class="line">        coeff.z = s * pc;</span><br><span class="line">        coeff.intensity = s * pd2;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (s &gt; <span class="number">0.1</span> &amp;&amp; pd2 != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//ä¿å­˜åŸå§‹ç‚¹ä¸ç›¸åº”çš„ç³»æ•°</span></span><br><span class="line">            laserCloudOri-&gt;<span class="built_in">push_back</span>(surfPointsFlat-&gt;points[i]);</span><br><span class="line">            coeffSel-&gt;<span class="built_in">push_back</span>(coeff);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€ <span style="color:red;">ç‚¹é¢åŒ¹é…</span> è§£æã€‘ï¼šç‚¹é¢åŒ¹é…ä¸ç‚¹çº¿åŒ¹é…å¦‚å‡ºä¸€è¾™ï¼Œé€šè¿‡è®ºæ–‡çš„è§£ææˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬çš„ç‰¹å¾åŒ¹é…åšçš„å°±æ˜¯å¯¹$\overline{\mathcal{P} }_k$ä¸­çš„é¢ä¸$k+1$æ—¶åˆ»æŠ•å½±åˆ°$k$æ—¶åˆ»çš„ç‚¹$i,i\in\tilde{\mathcal{H} }_{k+1}$ä¹‹é—´çš„åŒ¹é…ã€‚è¿™é‡Œå¯¹è®ºæ–‡ä¸­çš„å†…å®¹åšä¸€ä¸ªç®€å•çš„å›é¡¾ï¼š</p>
<p>åœ¨$\overline{\mathcal{P} }_k$ä¸­æ‰¾åˆ°$ i $çš„æœ€è¿‘é‚»ï¼Œè®°ä¸º$j$ã€‚ ç„¶åï¼Œæˆ‘ä»¬æ‰¾åˆ°å¦å¤–ä¸¤ä¸ªç‚¹ $l$ å’Œ$ m$ï¼Œä½œä¸º$ i $çš„æœ€è¿‘é‚»ï¼Œä¸€ä¸ªåœ¨$j $çš„åŒä¸€æ‰«æä¸­ï¼Œå¦ä¸€ä¸ªåœ¨ $j $çš„ä¸¤æ¬¡è¿ç»­æ‰«æä¸­ï¼Œå…¶ä¸­ $j,l,m\in \overline{\mathcal{P} }_k$ã€‚æ‰€ä»¥å…³é”®å°±æ˜¯è¿™ä¸‰ä¸ªç‚¹è¦æ€ä¹ˆæ‰¾ï¼Œåªæœ‰æ‰¾åˆ°è¿™ä¸‰ä¸ªç‚¹ä¹‹åæ‰èƒ½ç¡®å®šä¸€ä¸ªé¢ï¼Œè¿›è€Œæ‰èƒ½åšç‚¹é¢åŒ¹é…ã€‚</p>
<p>åŒæ ·å‚è€ƒç‚¹çº¿åŒ¹é…ï¼Œè¿™æ®µä»£ç ä¹Ÿæ˜¯é¦–å…ˆé€šè¿‡kd-treeæœ€è¿‘ç‚¹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç‚¹$j $ï¼Œç„¶ååœ¨é€‰æ‹©åŒä¸€çº¿å·ä¸Šçš„è·ç¦»æœ€è¿‘çš„ç‚¹$l$ ä»¥åŠä¸åŒçº¿å·ä¸Šçš„è·ç¦»æœ€è¿‘çš„ç‚¹$ m$ã€‚</p>
<p>æ‰¾åˆ°ä¸‰ä¸ªç‚¹ä¹‹åï¼Œæ±‚è§£ç‚¹åˆ°é¢çš„è·ç¦»ã€‚è¿™é‡Œçš„å…¬å¼å°±ä¸èµ˜è¿°äº†ã€‚ä¸Šå›¾ï¼š</p>
<p><img src="/images/LOAMæºä»£ç è§£æ/image-20220415200837885.png" alt="image-20220415200837885" style="zoom:50%;" /></p>
<p>æ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
d_\mathcal{H}&=\frac
{\begin{vmatrix}
(\tilde{X}^L_{(k+1,i)}-\overline{X}^L_{(k,j)})Â·((\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,l)})Ã—(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,m)}))
\end{vmatrix}
}
{\begin{vmatrix}
(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,l)})Ã—(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,m)})
\end{vmatrix} }\\
&=\frac{|\overrightarrow{OA}Â·(\overrightarrow{AB}Ã—\overrightarrow{AC})|}{|\overrightarrow{AB}Ã—\overrightarrow{AC}|}
\end{align*}</script><p>ã€ <span style="color:red;">é›…å¯æ¯”æ±‚è§£</span> è§£æã€‘ï¼š</p>
<p><img src="/images/LOAMæºä»£ç è§£æ/image-20220416090513137.png" alt="image-20220416090513137"></p>
<p>è¿™é‡Œç”±äºè·ç¦»é€šè¿‡ä½“ç§¯é™¤ä»¥é¢ç§¯è®¡ç®—ï¼Œè€Œä½“ç§¯çš„æ¢¯åº¦æ–¹å‘å°±æ˜¯åœ°é¢å¯¹åº”çš„æ³•å‘é‡ï¼Œæ‰€ä»¥é¢ç‰¹å¾çš„æ¢¯åº¦æ–¹å‘å°±æ˜¯å¹³é¢çš„æ³•å‘é‡æ–¹å‘ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‘é‡AB ACçš„å‘é‡ç§¯ï¼ˆå³å‰ä¹˜ï¼‰ï¼Œå¾—åˆ°çš„æ˜¯æ³•å‘é‡</span></span><br><span class="line"><span class="comment">// xè½´æ–¹å‘åˆ†å‘é‡i</span></span><br><span class="line"><span class="keyword">float</span> pa = (tripod2.y - tripod1.y) * (tripod3.z - tripod1.z) - (tripod3.y - tripod1.y) * (tripod2.z - tripod1.z);</span><br><span class="line"><span class="comment">// yè½´æ–¹å‘åˆ†å‘é‡j</span></span><br><span class="line"><span class="keyword">float</span> pb = (tripod2.z - tripod1.z) * (tripod3.x - tripod1.x) - (tripod3.z - tripod1.z) * (tripod2.x - tripod1.x);</span><br><span class="line"><span class="comment">// zè½´æ–¹å‘åˆ†å‘é‡k</span></span><br><span class="line"><span class="keyword">float</span> pc = (tripod2.x - tripod1.x) * (tripod3.y - tripod1.y) - (tripod3.x - tripod1.x) * (tripod2.y - tripod1.y);</span><br><span class="line"><span class="keyword">float</span> pd = -(pa * tripod1.x + pb * tripod1.y + pc * tripod1.z);</span><br></pre></td></tr></table></figure>
<h4 id="â‘¢L-Mè¿åŠ¨ä¼°è®¡æ±‚è§£"><a href="#â‘¢L-Mè¿åŠ¨ä¼°è®¡æ±‚è§£" class="headerlink" title="â‘¢L-Mè¿åŠ¨ä¼°è®¡æ±‚è§£"></a>â‘¢L-Mè¿åŠ¨ä¼°è®¡æ±‚è§£</h4><p>å‡è®¾ï¼šé›·è¾¾çš„è¿åŠ¨æ˜¯è¿ç»­çš„ã€‚å°†æ‰€æœ‰<strong>å¯¹åº”åˆ°çš„ç‚¹æ±‚åˆ°ç›´çº¿çš„è·ç¦»åˆ°é¢çš„è·ç¦»ä¹‹å’Œæœ€çŸ­ç„¶åæŒ‰ç…§ Levenberg-Marquardt ç®—æ³•è¿­ä»£è®¡ç®—</strong>ï¼Œå¾—åˆ°ä¸¤å¸§ä¹‹é—´çš„å˜æ¢$T$ï¼Œæœ€åé€šè¿‡ç´¯è®¡è®¡ç®—é‡Œç¨‹è®¡ã€‚åœ¨è¿™é‡Œï¼Œéœ€è¦å¾—åˆ°çš„æ˜¯è·ç¦»å¯¹åæ ‡å˜æ¢çš„åå¯¼æ•°ã€‚</p>
<p>å…·ä½“æŸ¥çœ‹ä¹‹å‰çš„æ–‡ç« ï¼Œå·²ç»è¯´çš„éå¸¸æ¸…æ¥šäº†ï¼š<br><a href="https://lukeyalvin.top/2022/04/11/loam%E8%AE%BA%E6%96%87%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/#B-%E8%BF%90%E5%8A%A8%E4%BC%B0%E8%AE%A1">B.è¿åŠ¨ä¼°è®¡</a></p>
<p><a href="https://lukeyalvin.top/2022/04/11/loam%E8%AE%BA%E6%96%87%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/#C-%E9%9B%85%E5%8F%AF%E6%AF%94%E7%9F%A9%E9%98%B5%E6%B1%82%E8%A7%A3">C.é›…å¯æ¯”çŸ©é˜µæ±‚è§£</a></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/***** 3. L-Mè¿åŠ¨ä¼°è®¡æ±‚è§£ *****/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> region</span></span><br><span class="line"><span class="keyword">int</span> pointSelNum = laserCloudOri-&gt;points.<span class="built_in">size</span>();</span><br><span class="line"><span class="comment">//æ»¡è¶³è¦æ±‚çš„ç‰¹å¾ç‚¹è‡³å°‘10ä¸ªï¼Œç‰¹å¾åŒ¹é…æ•°é‡å¤ªå°‘å¼ƒç”¨æ­¤å¸§æ•°æ®</span></span><br><span class="line"><span class="keyword">if</span> (pointSelNum &lt; <span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">cv::Mat <span class="title">matA</span><span class="params">(pointSelNum, <span class="number">6</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line"><span class="function">cv::Mat <span class="title">matAt</span><span class="params">(<span class="number">6</span>, pointSelNum, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line"><span class="function">cv::Mat <span class="title">matAtA</span><span class="params">(<span class="number">6</span>, <span class="number">6</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line"><span class="function">cv::Mat <span class="title">matB</span><span class="params">(pointSelNum, <span class="number">1</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line"><span class="function">cv::Mat <span class="title">matAtB</span><span class="params">(<span class="number">6</span>, <span class="number">1</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line"><span class="function">cv::Mat <span class="title">matX</span><span class="params">(<span class="number">6</span>, <span class="number">1</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¡ç®—matA,matBçŸ©é˜µ</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pointSelNum; i++)</span><br><span class="line">&#123;</span><br><span class="line">    pointOri = laserCloudOri-&gt;points[i];</span><br><span class="line">    coeff = coeffSel-&gt;points[i];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">float</span> s = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">float</span> srx = <span class="built_in">sin</span>(s * transform[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">float</span> crx = <span class="built_in">cos</span>(s * transform[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">float</span> sry = <span class="built_in">sin</span>(s * transform[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">float</span> cry = <span class="built_in">cos</span>(s * transform[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">float</span> srz = <span class="built_in">sin</span>(s * transform[<span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">float</span> crz = <span class="built_in">cos</span>(s * transform[<span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">float</span> tx = s * transform[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">float</span> ty = s * transform[<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">float</span> tz = s * transform[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">float</span> arx = (-s * crx * sry * srz * pointOri.x + s * crx * crz * sry * pointOri.y + s * srx * sry * pointOri.z + s * tx * crx * sry * srz - s * ty * crx * crz * sry - s * tz * srx * sry) * coeff.x + (s * srx * srz * pointOri.x - s * crz * srx * pointOri.y + s * crx * pointOri.z + s * ty * crz * srx - s * tz * crx - s * tx * srx * srz) * coeff.y + (s * crx * cry * srz * pointOri.x - s * crx * cry * crz * pointOri.y - s * cry * srx * pointOri.z + s * tz * cry * srx + s * ty * crx * cry * crz - s * tx * crx * cry * srz) * coeff.z;</span><br><span class="line">    <span class="keyword">float</span> ary = ((-s * crz * sry - s * cry * srx * srz) * pointOri.x + (s * cry * crz * srx - s * sry * srz) * pointOri.y - s * crx * cry * pointOri.z + tx * (s * crz * sry + s * cry * srx * srz) + ty * (s * sry * srz - s * cry * crz * srx) + s * tz * crx * cry) * coeff.x + ((s * cry * crz - s * srx * sry * srz) * pointOri.x + (s * cry * srz + s * crz * srx * sry) * pointOri.y - s * crx * sry * pointOri.z + s * tz * crx * sry - ty * (s * cry * srz + s * crz * srx * sry) - tx * (s * cry * crz - s * srx * sry * srz)) * coeff.z;</span><br><span class="line">    <span class="keyword">float</span> arz = ((-s * cry * srz - s * crz * srx * sry) * pointOri.x + (s * cry * crz - s * srx * sry * srz) * pointOri.y + tx * (s * cry * srz + s * crz * srx * sry) - ty * (s * cry * crz - s * srx * sry * srz)) * coeff.x + (-s * crx * crz * pointOri.x - s * crx * srz * pointOri.y + s * ty * crx * srz + s * tx * crx * crz) * coeff.y + ((s * cry * crz * srx - s * sry * srz) * pointOri.x + (s * crz * sry + s * cry * srx * srz) * pointOri.y + tx * (s * sry * srz - s * cry * crz * srx) - ty * (s * crz * sry + s * cry * srx * srz)) * coeff.z;</span><br><span class="line">    <span class="keyword">float</span> atx = -s * (cry * crz - srx * sry * srz) * coeff.x + s * crx * srz * coeff.y - s * (crz * sry + cry * srx * srz) * coeff.z;</span><br><span class="line">    <span class="keyword">float</span> aty = -s * (cry * srz + crz * srx * sry) * coeff.x - s * crx * crz * coeff.y - s * (sry * srz - cry * crz * srx) * coeff.z;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">float</span> atz = s * crx * sry * coeff.x - s * srx * coeff.y - s * crx * cry * coeff.z;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">float</span> d2 = coeff.intensity;</span><br><span class="line"></span><br><span class="line">    matA.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">0</span>) = arx;</span><br><span class="line">    matA.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">1</span>) = ary;</span><br><span class="line">    matA.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">2</span>) = arz;</span><br><span class="line">    matA.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">3</span>) = atx;</span><br><span class="line">    matA.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">4</span>) = aty;</span><br><span class="line">    matA.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">5</span>) = atz;</span><br><span class="line">    matB.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">0</span>) = <span class="number">-0.05</span> * d2;</span><br><span class="line">&#125;</span><br><span class="line">cv::<span class="built_in">transpose</span>(matA, matAt);</span><br><span class="line">matAtA = matAt * matA;</span><br><span class="line">matAtB = matAt * matB;</span><br><span class="line"><span class="comment">//æ±‚è§£matAtA * matX = matAtB</span></span><br><span class="line">cv::<span class="built_in">solve</span>(matAtA, matAtB, matX, cv::DECOMP_QR);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (iterCount == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ç‰¹å¾å€¼1*6çŸ©é˜µ</span></span><br><span class="line">    <span class="function">cv::Mat <span class="title">matE</span><span class="params">(<span class="number">1</span>, <span class="number">6</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line">    <span class="comment">//ç‰¹å¾å‘é‡6*6çŸ©é˜µ</span></span><br><span class="line">    <span class="function">cv::Mat <span class="title">matV</span><span class="params">(<span class="number">6</span>, <span class="number">6</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line">    <span class="function">cv::Mat <span class="title">matV2</span><span class="params">(<span class="number">6</span>, <span class="number">6</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ±‚è§£ç‰¹å¾å€¼/ç‰¹å¾å‘é‡</span></span><br><span class="line">    cv::<span class="built_in">eigen</span>(matAtA, matE, matV);</span><br><span class="line">    matV.<span class="built_in">copyTo</span>(matV2);</span><br><span class="line"></span><br><span class="line">    isDegenerate = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//ç‰¹å¾å€¼å–å€¼é—¨æ§›</span></span><br><span class="line">    <span class="keyword">float</span> eignThre[<span class="number">6</span>] = &#123;<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">5</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123; <span class="comment">//ä»å°åˆ°å¤§æŸ¥æ‰¾</span></span><br><span class="line">        <span class="keyword">if</span> (matE.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, i) &lt; eignThre[i])</span><br><span class="line">        &#123; <span class="comment">//ç‰¹å¾å€¼å¤ªå°ï¼Œåˆ™è®¤ä¸ºå¤„åœ¨å…¼å¹¶ç¯å¢ƒä¸­ï¼Œå‘ç”Ÿäº†é€€åŒ–</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">6</span>; j++)</span><br><span class="line">            &#123; <span class="comment">//å¯¹åº”çš„ç‰¹å¾å‘é‡ç½®ä¸º0</span></span><br><span class="line">                matV2.at&lt;<span class="keyword">float</span>&gt;(i, j) = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            isDegenerate = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—PçŸ©é˜µ</span></span><br><span class="line">    matP = matV.<span class="built_in">inv</span>() * matV2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isDegenerate)</span><br><span class="line">&#123; <span class="comment">//å¦‚æœå‘ç”Ÿé€€åŒ–ï¼Œåªä½¿ç”¨é¢„æµ‹çŸ©é˜µPè®¡ç®—</span></span><br><span class="line">    <span class="function">cv::Mat <span class="title">matX2</span><span class="params">(<span class="number">6</span>, <span class="number">1</span>, CV_32F, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br><span class="line">    matX.<span class="built_in">copyTo</span>(matX2);</span><br><span class="line">    matX = matP * matX2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç´¯åŠ æ¯æ¬¡è¿­ä»£çš„æ—‹è½¬å¹³ç§»é‡</span></span><br><span class="line">transform[<span class="number">0</span>] += matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">transform[<span class="number">1</span>] += matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">transform[<span class="number">2</span>] += matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">transform[<span class="number">3</span>] += matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">transform[<span class="number">4</span>] += matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">4</span>, <span class="number">0</span>);</span><br><span class="line">transform[<span class="number">5</span>] += matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isnan</span>(transform[i])) <span class="comment">//åˆ¤æ–­æ˜¯å¦éæ•°å­—</span></span><br><span class="line">        transform[i] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¡ç®—æ—‹è½¬å¹³ç§»é‡ï¼Œå¦‚æœå¾ˆå°å°±åœæ­¢è¿­ä»£</span></span><br><span class="line"><span class="keyword">float</span> deltaR = <span class="built_in">sqrt</span>(</span><br><span class="line">    <span class="built_in">pow</span>(<span class="built_in">rad2deg</span>(matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">0</span>)), <span class="number">2</span>) +</span><br><span class="line">    <span class="built_in">pow</span>(<span class="built_in">rad2deg</span>(matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">1</span>, <span class="number">0</span>)), <span class="number">2</span>) +</span><br><span class="line">    <span class="built_in">pow</span>(<span class="built_in">rad2deg</span>(matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">2</span>, <span class="number">0</span>)), <span class="number">2</span>));</span><br><span class="line"><span class="keyword">float</span> deltaT = <span class="built_in">sqrt</span>(</span><br><span class="line">    <span class="built_in">pow</span>(matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">3</span>, <span class="number">0</span>) * <span class="number">100</span>, <span class="number">2</span>) +</span><br><span class="line">    <span class="built_in">pow</span>(matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">4</span>, <span class="number">0</span>) * <span class="number">100</span>, <span class="number">2</span>) +</span><br><span class="line">    <span class="built_in">pow</span>(matX.at&lt;<span class="keyword">float</span>&gt;(<span class="number">5</span>, <span class="number">0</span>) * <span class="number">100</span>, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (deltaR &lt; <span class="number">0.1</span> &amp;&amp; deltaT &lt; <span class="number">0.1</span>)</span><br><span class="line">&#123; <span class="comment">//è¿­ä»£ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> endregion</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å¯¹åº”å…¬å¼éƒ¨åˆ†çœŸçš„çœ‹çš„ä¸€å›¢éº»â€¦â€¦.ä¸€ç‚¹ç‚¹çœ‹ï¼š</p>
<p>ã€è§£æã€‘ï¼šé¦–å…ˆä½œè€…å®šä¹‰äº†å‡ ä¸ªçŸ©é˜µï¼š$A,A^T,A^TA,B,A^TB,X$ï¼Œç„¶åå®šä¹‰ä¸€ä¸²å˜é‡ï¼Œä»£ç ä¸­çš„$T$æ˜¯å‰ä¸‰é¡¹æ˜¯æ—‹è½¬è§’ï¼Œåä¸‰é¡¹æ˜¯å¹³ç§»å‘é‡ï¼Œå³$[ Î¸_xï¼Œ Î¸_yï¼Œ Î¸_z,t_x, t_y, t_z]^T$ï¼Œæ‰€ä»¥å®šä¹‰ï¼š</p>
<script type="math/tex; mode=display">
srx=sin\theta_x=s_x\\crx=cos\theta_x=c_x\\
sry=sin\theta_y=s_y\\cry=cos\theta_y=c_y\\
srz=sin\theta_z=s_z\\crz=cos\theta_z=c_z\\</script><p>ç„¶åç»“åˆä¹‹å‰æ¨å¯¼çš„å…¬å¼ï¼Œè¯»è€…è‡ªå·±å¯¹åº”ï¼ˆè¿™æ˜¯åŸºäºæ¬§æ‹‰è§’çš„ï¼Œç°åœ¨å¹¶ä¸å¸¸ç”¨ï¼Œç°åœ¨åŸºæœ¬ä¸Šä½¿ç”¨æä»£æ•°â€¦â€¦ï¼‰</p>
<p><img src="/images/LOAMæºä»£ç è§£æ/image-20220415204826886.png" alt="image-20220415204826886"></p>
<h3 id="3-åæ ‡å˜æ¢"><a href="#3-åæ ‡å˜æ¢" class="headerlink" title="3.åæ ‡å˜æ¢"></a>3.åæ ‡å˜æ¢</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> rx, ry, rz, tx, ty, tz;</span><br><span class="line"><span class="comment">//æ±‚ç›¸å¯¹äºåŸç‚¹çš„æ—‹è½¬é‡,å‚ç›´æ–¹å‘ä¸Š1.05å€ä¿®æ­£?</span></span><br><span class="line"><span class="built_in">AccumulateRotation</span>(transformSum[<span class="number">0</span>], transformSum[<span class="number">1</span>], transformSum[<span class="number">2</span>],</span><br><span class="line">                   -transform[<span class="number">0</span>], -transform[<span class="number">1</span>] * <span class="number">1.05</span>, -transform[<span class="number">2</span>], rx, ry, rz);</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> x1 = <span class="built_in">cos</span>(rz) * (transform[<span class="number">3</span>] - imuShiftFromStartX) - <span class="built_in">sin</span>(rz) * (transform[<span class="number">4</span>] - imuShiftFromStartY);</span><br><span class="line"><span class="keyword">float</span> y1 = <span class="built_in">sin</span>(rz) * (transform[<span class="number">3</span>] - imuShiftFromStartX) + <span class="built_in">cos</span>(rz) * (transform[<span class="number">4</span>] - imuShiftFromStartY);</span><br><span class="line"><span class="keyword">float</span> z1 = transform[<span class="number">5</span>] * <span class="number">1.05</span> - imuShiftFromStartZ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> x2 = x1;</span><br><span class="line"><span class="keyword">float</span> y2 = <span class="built_in">cos</span>(rx) * y1 - <span class="built_in">sin</span>(rx) * z1;</span><br><span class="line"><span class="keyword">float</span> z2 = <span class="built_in">sin</span>(rx) * y1 + <span class="built_in">cos</span>(rx) * z1;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±‚ç›¸å¯¹äºåŸç‚¹çš„å¹³ç§»é‡</span></span><br><span class="line">tx = transformSum[<span class="number">3</span>] - (<span class="built_in">cos</span>(ry) * x2 + <span class="built_in">sin</span>(ry) * z2);</span><br><span class="line">ty = transformSum[<span class="number">4</span>] - y2;</span><br><span class="line">tz = transformSum[<span class="number">5</span>] - (-<span class="built_in">sin</span>(ry) * x2 + <span class="built_in">cos</span>(ry) * z2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®IMUä¿®æ­£æ—‹è½¬é‡</span></span><br><span class="line"><span class="built_in">PluginIMURotation</span>(rx, ry, rz, imuPitchStart, imuYawStart, imuRollStart,</span><br><span class="line">                  imuPitchLast, imuYawLast, imuRollLast, rx, ry, rz);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¾—åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹çš„è½¬ç§»çŸ©é˜µ</span></span><br><span class="line">transformSum[<span class="number">0</span>] = rx;</span><br><span class="line">transformSum[<span class="number">1</span>] = ry;</span><br><span class="line">transformSum[<span class="number">2</span>] = rz;</span><br><span class="line">transformSum[<span class="number">3</span>] = tx;</span><br><span class="line">transformSum[<span class="number">4</span>] = ty;</span><br><span class="line">transformSum[<span class="number">5</span>] = tz;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¬§æ‹‰è§’è½¬æ¢æˆå››å…ƒæ•°</span></span><br><span class="line">geometry_msgs::Quaternion geoQuat = tf::<span class="built_in">createQuaternionMsgFromRollPitchYaw</span>(rz, -rx, -ry);</span><br><span class="line"></span><br><span class="line"><span class="comment">// publishå››å…ƒæ•°å’Œå¹³ç§»é‡</span></span><br><span class="line">laserOdometry.header.stamp = ros::<span class="built_in">Time</span>().<span class="built_in">fromSec</span>(timeSurfPointsLessFlat);</span><br><span class="line">laserOdometry.pose.pose.orientation.x = -geoQuat.y;</span><br><span class="line">laserOdometry.pose.pose.orientation.y = -geoQuat.z;</span><br><span class="line">laserOdometry.pose.pose.orientation.z = geoQuat.x;</span><br><span class="line">laserOdometry.pose.pose.orientation.w = geoQuat.w;</span><br><span class="line">laserOdometry.pose.pose.position.x = tx;</span><br><span class="line">laserOdometry.pose.pose.position.y = ty;</span><br><span class="line">laserOdometry.pose.pose.position.z = tz;</span><br><span class="line">pubLaserOdometry.<span class="built_in">publish</span>(laserOdometry);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹¿æ’­æ–°çš„å¹³ç§»æ—‹è½¬ä¹‹åçš„åæ ‡ç³»(rviz)</span></span><br><span class="line">laserOdometryTrans.stamp_ = ros::<span class="built_in">Time</span>().<span class="built_in">fromSec</span>(timeSurfPointsLessFlat);</span><br><span class="line">laserOdometryTrans.<span class="built_in">setRotation</span>(tf::<span class="built_in">Quaternion</span>(-geoQuat.y, -geoQuat.z, geoQuat.x, geoQuat.w));</span><br><span class="line">laserOdometryTrans.<span class="built_in">setOrigin</span>(tf::<span class="built_in">Vector3</span>(tx, ty, tz));</span><br><span class="line">tfBroadcaster.<span class="built_in">sendTransform</span>(laserOdometryTrans);</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼šå¾—åˆ°å¸§é—´ç‚¹äº‘çš„ç›¸å¯¹è¿åŠ¨ä¹‹åï¼Œç”±äºå®ƒä»¬æ˜¯åœ¨è¿™ä¸¤å¸§ç‚¹äº‘çš„å±€éƒ¨åæ ‡ç³»ä¸‹çš„ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œè½¬æ¢ï¼ŒæŠŠå®ƒè½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹ã€‚</p>
<h1 id="â…£-laserMapping"><a href="#â…£-laserMapping" class="headerlink" title="â…£.laserMapping"></a>â…£.laserMapping</h1><p><img src="/images/LOAMæºä»£ç è§£æ/image-20220416150539893.png" alt="image-20220416150539893"></p>
<h2 id="A-mianå‡½æ•°"><a href="#A-mianå‡½æ•°" class="headerlink" title="A.mianå‡½æ•°"></a>A.mianå‡½æ•°</h2><p><img src="/images/LOAMæºä»£ç è§£æ/image-20220416145505400.png" alt="image-20220416145505400"></p>
<p>å¼€å§‹å®šä¹‰äº†ROSèŠ‚ç‚¹åŠå…¶å‘å¸ƒçš„æ¶ˆæ¯ï¼Œé€šè¿‡æ€ç»´å¯¼å›¾å¯ä»¥ä½œä¸ºè§‚å¯Ÿï¼Œä»£ç ç±»ä¼¼ç¬¬äºŒèŠ‚ã€‚ç„¶åæ¥å§ï¼Œç—›è‹¦å¹¶å¿«ä¹ç€â€¦..</p>
<h3 id="1-åæ ‡å˜æ¢"><a href="#1-åæ ‡å˜æ¢" class="headerlink" title="1.åæ ‡å˜æ¢"></a>1.åæ ‡å˜æ¢</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/***** â‘ åæ ‡è½¬æ¢ *****/</span></span><br><span class="line"><span class="keyword">if</span> (frameCount &gt;= stackFrameNum) &#123;</span><br><span class="line">    <span class="comment">//è·å–ä¸–ç•Œåæ ‡ç³»è½¬æ¢çŸ©é˜µï¼Œå°†ç›¸å…³åæ ‡è½¬ç§»åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹-&gt;å¾—åˆ°å¯ç”¨äºå»ºå›¾çš„Lidaråæ ‡</span></span><br><span class="line">    <span class="built_in">transformAssociateToMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æœ€æ–°æ¥æ”¶åˆ°çš„å¹³é¢ç‚¹å’Œè¾¹æ²¿ç‚¹è¿›è¡Œæ—‹è½¬å¹³ç§»è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹(è¿™é‡Œå’Œåé¢çš„é€†è½¬æ¢åº”æ— å¿…è¦)</span></span><br><span class="line">    <span class="comment">// å°†ä¸Šä¸€æ—¶åˆ»æ‰€æœ‰è¾¹ç‰¹å¾è½¬åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹</span></span><br><span class="line">    <span class="keyword">int</span> laserCloudCornerLastNum = laserCloudCornerLast-&gt;points.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; laserCloudCornerLastNum; i++) &#123;</span><br><span class="line">        <span class="built_in">pointAssociateToMap</span>(&amp;laserCloudCornerLast-&gt;points[i], &amp;pointSel);</span><br><span class="line">        laserCloudCornerStack2-&gt;<span class="built_in">push_back</span>(pointSel);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†ä¸Šä¸€æ—¶åˆ»æ‰€æœ‰é¢ç‰¹å¾è½¬åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹</span></span><br><span class="line">    <span class="keyword">int</span> laserCloudSurfLastNum = laserCloudSurfLast-&gt;points.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; laserCloudSurfLastNum; i++) &#123;</span><br><span class="line">        <span class="built_in">pointAssociateToMap</span>(&amp;laserCloudSurfLast-&gt;points[i], &amp;pointSel);</span><br><span class="line">        laserCloudSurfStack2-&gt;<span class="built_in">push_back</span>(pointSel);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼šè¿™éƒ¨åˆ†å°±æ˜¯åæ ‡å˜æ¢ï¼ŒæŠŠç‚¹å’Œé¢ç‰¹å¾å…¨éƒ¨éƒ½è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»$\left\{W \right\}$ä¸‹ï¼Œå…·ä½“è½¬æ¢å‡½æ•°è°ƒç”¨çš„æ˜¯<code>pointAssociateToMap</code>ï¼Œå¹¶ä¸”è½¬æ¢ç”¨çš„æ˜¯æ¬§æ‹‰è§’è¡¨ç¤ºçš„ä½å§¿ã€‚</p>
<h3 id="2-ä¼˜åŒ–å¤„ç†"><a href="#2-ä¼˜åŒ–å¤„ç†" class="headerlink" title="2.ä¼˜åŒ–å¤„ç†"></a>2.ä¼˜åŒ–å¤„ç†</h3><h4 id="â‘ å®šä¹‰Cube"><a href="#â‘ å®šä¹‰Cube" class="headerlink" title="â‘ å®šä¹‰Cube"></a>â‘ å®šä¹‰Cube</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> laserCloudCenWidth = <span class="number">10</span>;    <span class="comment">// cubeå®½åº¦, cmä¸ºå•ä½</span></span><br><span class="line"><span class="keyword">int</span> laserCloudCenHeight = <span class="number">5</span>;    <span class="comment">// cubeé«˜åº¦</span></span><br><span class="line"><span class="keyword">int</span> laserCloudCenDepth = <span class="number">10</span>;    <span class="comment">// cubeæ·±åº¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> laserCloudWidth = <span class="number">21</span>; <span class="comment">// å­cubeæ²¿å®½æ–¹å‘çš„åˆ†å‰²ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> laserCloudHeight = <span class="number">11</span>;<span class="comment">// å­cubeæ²¿é«˜æ–¹å‘ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> laserCloudDepth = <span class="number">21</span>; <span class="comment">// å­cubeæ²¿æ·±åº¦æ–¹å‘ä¸ªæ•°</span></span><br><span class="line"><span class="comment">// å­cubeæ€»æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> laserCloudNum = laserCloudWidth * laserCloudHeight * laserCloudDepth;<span class="comment">//4851</span></span><br></pre></td></tr></table></figure>
<p>cubeç›¸å…³æ“ä½œçš„ä»£ç è¿˜ä¸æ˜¯ç‰¹åˆ«æ˜ç™½â€¦â€¦</p>
<h4 id="â‘¡è¿­ä»£ä¼˜åŒ–"><a href="#â‘¡è¿­ä»£ä¼˜åŒ–" class="headerlink" title="â‘¡è¿­ä»£ä¼˜åŒ–"></a>â‘¡è¿­ä»£ä¼˜åŒ–</h4><ul>
<li>è¿­ä»£è¾¹ç¼˜ç‚¹</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿­ä»£è¾¹ç¼˜ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; laserCloudCornerStackNum; i++) &#123;</span><br><span class="line">    pointOri = laserCloudCornerStack-&gt;points[i];</span><br><span class="line">    <span class="comment">//è½¬æ¢å›ä¸–ç•Œåæ ‡ç³»</span></span><br><span class="line">    <span class="built_in">pointAssociateToMap</span>(&amp;pointOri, &amp;pointSel);</span><br><span class="line">    kdtreeCornerFromMap-&gt;<span class="built_in">nearestKSearch</span>(pointSel, <span class="number">5</span>, pointSearchInd, pointSearchSqDis);<span class="comment">//å¯»æ‰¾æœ€è¿‘è·ç¦»äº”ä¸ªç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pointSearchSqDis[<span class="number">4</span>] &lt; <span class="number">1.0</span>) &#123;<span class="comment">//5ä¸ªç‚¹ä¸­æœ€å¤§è·ç¦»ä¸è¶…è¿‡1æ‰å¤„ç†</span></span><br><span class="line">        <span class="comment">//å°†äº”ä¸ªæœ€è¿‘ç‚¹çš„åæ ‡åŠ å’Œæ±‚å¹³å‡</span></span><br><span class="line">        <span class="keyword">float</span> cx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">float</span> cy = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">float</span> cz = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line">            cx += laserCloudCornerFromMap-&gt;points[pointSearchInd[j]].x;</span><br><span class="line">            cy += laserCloudCornerFromMap-&gt;points[pointSearchInd[j]].y;</span><br><span class="line">            cz += laserCloudCornerFromMap-&gt;points[pointSearchInd[j]].z;</span><br><span class="line">        &#125;</span><br><span class="line">        cx /= <span class="number">5</span>;</span><br><span class="line">        cy /= <span class="number">5</span>; </span><br><span class="line">        cz /= <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ±‚å‡æ–¹å·®</span></span><br><span class="line">        <span class="keyword">float</span> a11 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">float</span> a12 = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">float</span> a13 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">float</span> a22 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">float</span> a23 = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">float</span> a33 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">float</span> ax = laserCloudCornerFromMap-&gt;points[pointSearchInd[j]].x - cx;</span><br><span class="line">            <span class="keyword">float</span> ay = laserCloudCornerFromMap-&gt;points[pointSearchInd[j]].y - cy;</span><br><span class="line">            <span class="keyword">float</span> az = laserCloudCornerFromMap-&gt;points[pointSearchInd[j]].z - cz;</span><br><span class="line"></span><br><span class="line">            a11 += ax * ax;</span><br><span class="line">            a12 += ax * ay;</span><br><span class="line">            a13 += ax * az;</span><br><span class="line">            a22 += ay * ay;</span><br><span class="line">            a23 += ay * az;</span><br><span class="line">            a33 += az * az;</span><br><span class="line">        &#125;</span><br><span class="line">        a11 /= <span class="number">5</span>;</span><br><span class="line">        a12 /= <span class="number">5</span>; </span><br><span class="line">        a13 /= <span class="number">5</span>;</span><br><span class="line">        a22 /= <span class="number">5</span>;</span><br><span class="line">        a23 /= <span class="number">5</span>; </span><br><span class="line">        a33 /= <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ„å»ºçŸ©é˜µ</span></span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">0</span>) = a11;</span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">1</span>) = a12;</span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">2</span>) = a13;</span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">1</span>, <span class="number">0</span>) = a12;</span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">1</span>, <span class="number">1</span>) = a22;</span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">1</span>, <span class="number">2</span>) = a23;</span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">2</span>, <span class="number">0</span>) = a13;</span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">2</span>, <span class="number">1</span>) = a23;</span><br><span class="line">        matA1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">2</span>, <span class="number">2</span>) = a33;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç‰¹å¾å€¼åˆ†è§£</span></span><br><span class="line">        cv::<span class="built_in">eigen</span>(matA1, matD1, matV1);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (matD1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">0</span>) &gt; <span class="number">3</span> * matD1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">1</span>)) &#123;<span class="comment">//å¦‚æœæœ€å¤§çš„ç‰¹å¾å€¼å¤§äºç¬¬äºŒå¤§çš„ç‰¹å¾å€¼ä¸‰å€ä»¥ä¸Š</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> x0 = pointSel.x;</span><br><span class="line">            <span class="keyword">float</span> y0 = pointSel.y;</span><br><span class="line">            <span class="keyword">float</span> z0 = pointSel.z;</span><br><span class="line">            <span class="keyword">float</span> x1 = cx + <span class="number">0.1</span> * matV1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">float</span> y1 = cy + <span class="number">0.1</span> * matV1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">float</span> z1 = cz + <span class="number">0.1</span> * matV1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">float</span> x2 = cx - <span class="number">0.1</span> * matV1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">float</span> y2 = cy - <span class="number">0.1</span> * matV1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">float</span> z2 = cz - <span class="number">0.1</span> * matV1.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> a012 = <span class="built_in">sqrt</span>(((x0 - x1)*(y0 - y2) - (x0 - x2)*(y0 - y1))</span><br><span class="line">                              * ((x0 - x1)*(y0 - y2) - (x0 - x2)*(y0 - y1)) </span><br><span class="line">                              + ((x0 - x1)*(z0 - z2) - (x0 - x2)*(z0 - z1))</span><br><span class="line">                              * ((x0 - x1)*(z0 - z2) - (x0 - x2)*(z0 - z1)) </span><br><span class="line">                              + ((y0 - y1)*(z0 - z2) - (y0 - y2)*(z0 - z1))</span><br><span class="line">                              * ((y0 - y1)*(z0 - z2) - (y0 - y2)*(z0 - z1)));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> l12 = <span class="built_in">sqrt</span>((x1 - x2)*(x1 - x2) + (y1 - y2)*(y1 - y2) + (z1 - z2)*(z1 - z2));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> la = ((y1 - y2)*((x0 - x1)*(y0 - y2) - (x0 - x2)*(y0 - y1)) </span><br><span class="line">                        + (z1 - z2)*((x0 - x1)*(z0 - z2) - (x0 - x2)*(z0 - z1))) / a012 / l12;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> lb = -((x1 - x2)*((x0 - x1)*(y0 - y2) - (x0 - x2)*(y0 - y1)) </span><br><span class="line">                         - (z1 - z2)*((y0 - y1)*(z0 - z2) - (y0 - y2)*(z0 - z1))) / a012 / l12;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> lc = -((x1 - x2)*((x0 - x1)*(z0 - z2) - (x0 - x2)*(z0 - z1)) </span><br><span class="line">                         + (y1 - y2)*((y0 - y1)*(z0 - z2) - (y0 - y2)*(z0 - z1))) / a012 / l12;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> ld2 = a012 / l12;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æƒé‡ç³»æ•°è®¡ç®—</span></span><br><span class="line">            <span class="keyword">float</span> s = <span class="number">1</span> - <span class="number">0.9</span> * <span class="built_in">fabs</span>(ld2);</span><br><span class="line"></span><br><span class="line">            coeff.x = s * la;</span><br><span class="line">            coeff.y = s * lb;</span><br><span class="line">            coeff.z = s * lc;</span><br><span class="line">            coeff.intensity = s * ld2;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (s &gt; <span class="number">0.1</span>) &#123;<span class="comment">//è·ç¦»è¶³å¤Ÿå°æ‰ä½¿ç”¨</span></span><br><span class="line">                laserCloudOri-&gt;<span class="built_in">push_back</span>(pointOri);</span><br><span class="line">                coeffSel-&gt;<span class="built_in">push_back</span>(coeff);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€è§£æã€‘ï¼š</p>
<p><strong>é¦–å…ˆè§£é‡Šä¸€ä¸‹è¿™é‡Œä½¿ç”¨æœ€è¿‘é‚»çš„æ–¹æ³•æ‰¾åˆ°äº†äº”ä¸ªç‚¹çš„åšæ³•èµ·ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></p>
<p>æˆ‘ä»¬è¿™ä¸€å¯¹åº”ä»£ç éƒ¨åˆ†åšæ¨å¯¼ï¼Œè®¾äº”ä¸ªç‚¹åˆ†åˆ«æ˜¯ï¼š$(x_1,y_1,z_1),(x_2,y_2,z_2),(x_3,y_3,z_3),(x_4,y_4,z_4),(x_5,y_5,z_5),$</p>
<p>æ±‚å¹³å‡å€¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\overline{x}&=\frac{x_1+x_2+x_3+x_4+x_5}{5}\\
\overline{y}&=\frac{y_1+y_2+y_3+y_4+y_5}{5}\\
\overline{z}&=\frac{z_1+z_2+z_3+z_4+z_5}{5}\\
\end{align*}</script><p>æ±‚åæ–¹å·®ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
Cov(x,x)&=\sigma_{x}^2=E[(x-\overline{x})]^2\\
Cov(y,y)&=\sigma_{y}^2=E[(y-\overline{y})]^2\\
Cov(z,z)&=\sigma_{z}^2=E[(z-\overline{z})]^2\\
Cov(x,y)&=\sigma_{x}\sigma_{y}=E[(x-\overline{x})(y-\overline{y})]\\
Cov(x,z)&=\sigma_{x}\sigma_{z}=E[(x-\overline{x})(z-\overline{z})]\\
Cov(y,z)&=\sigma_{y}\sigma_{z}=E[(y-\overline{y})(z-\overline{z})]
\end{align*}</script><p>å¾—åˆ°åæ–¹å·®çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
A=\begin{bmatrix}
\sigma_{x}^2&\sigma_{x}\sigma_{y}&\sigma_{x}\sigma_{z}\\
\sigma_{y}\sigma_{x}&\sigma_{y}^2&\sigma_{y}\sigma_{z}\\
\sigma_{z}\sigma_{x}&\sigma_{z}\sigma_{y}&\sigma_{z}^2
\end{bmatrix}</script><p>å¯¹$A$çŸ©é˜µè¿›è¡Œç‰¹å¾å€¼åˆ†è§£ï¼š</p>
<p>å¦‚æœè¿™äº”ä¸ªç‚¹<strong>å…±çº¿</strong>çš„è¯ï¼Œåˆ™åˆ†è§£å‡ºæ¥çš„æœ€å¤§çš„ç‰¹å¾å€¼æ˜¯å¦å¤–ä¸¤ä¸ªçš„ä¸‰å€ä»¥ä¸Šï¼›</p>
<p>å¦‚æœè¿™äº”ä¸ªç‚¹<strong>å…±é¢</strong>çš„è¯ï¼Œåˆ™åˆ†è§£å‡ºæ¥çš„ä¸¤ä¸ªæ¯”è¾ƒå¤§çš„ç‰¹å¾å€¼æ˜¯ç¬¬ä¸‰å¤§çš„ä¸‰å€ä»¥ä¸Šï¼›</p>
<p>æ€»ç»“ä¸ºä¸€å¥è¯å°±æ˜¯ï¼š<span style="color:red;"><strong>çº¿ç‰¹å¾çš„ç‰¹å¾å€¼æ˜¯ä¸€å¤§ä¸¤å°ï¼Œé¢ç‰¹å¾çš„ç‰¹å¾å€¼æ˜¯ä¸¤å¤§ä¸€å°</strong></span></p>
<p>å¯¹äºè¾¹ç¼˜ç‚¹æ¥è¯´ï¼Œå½“æˆ‘ä»¬ç¡®å®šè¿™äº”ä¸ªç‚¹æ˜¯å…±çº¿çš„ï¼Œåˆ™è¿›è¡Œ<code>if (matD1.at&lt;float&gt;(0, 0) &gt; 3 * matD1.at&lt;float&gt;(0, 1))&#123;....&#125;</code>å†…å®¹ä¸‹çš„æ“ä½œï¼›</p>
<p>ä¸ä¹‹å‰çš„ç‚¹çº¿åŒ¹é…ç±»ä¼¼ï¼Œè¿™é‡Œç”¨ç‚¹$(x_0,y_0,z_0)$ä»¥åŠä½¿ç”¨æœ€å¤§çš„ç‰¹å¾å€¼ç”Ÿæˆçš„ä¸¤ä¸ªè™šæ‹Ÿç‚¹ï¼Œåˆ©ç”¨è¿™ä¸‰ä¸ªç‚¹ï¼Œæ±‚å¾—æ¢¯åº¦æ–¹å‘å‘é‡ï¼š</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://lukeyalvin.top/2022/04/11/loam%E8%AE%BA%E6%96%87%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/#C-%E9%9B%85%E5%8F%AF%E6%AF%94%E7%9F%A9%E9%98%B5%E6%B1%82%E8%A7%A3">LOAM-SLAMæ·±åº¦å‰–æ-C.é›…å¯æ¯”çŸ©é˜µæ±‚è§£</a></p>
<script type="math/tex; mode=display">
\frac{\partial D(\tilde{X}^L_{(k+1,i)})}{\partial \tilde{X}^L_{(k+1,i)} }=[a_\mathcal{H},b_\mathcal{H},c_\mathcal{H}]^T=[la,lb,lc]^T</script><p>è¿™é‡Œå’Œä¹‹å‰çš„é‡Œç¨‹è®¡ä¸€è‡´ã€‚</p>
<ul>
<li>è¿­ä»£å¹³é¢ç‚¹</li>
</ul>
<p>å¹³é¢ç‚¹çš„ä»£ç å°±ä¸è´´äº†ï¼Œä¸è¾¹ç¼˜ç‚¹å¤§åŒå°å¼‚ï¼Œä¸åŒçš„åœ°æ–¹å°±æ˜¯ç‰¹å¾å€¼çš„è¦æ±‚ä¸ä¸€æ ·ï¼Œè¿˜æœ‰å°±æ˜¯æ¢¯åº¦æ–¹å‘çš„å¯¹åº”é‡Œç¨‹è®¡ä¸­æ¢¯åº¦æ–¹å‘çš„æ±‚æ³•ã€‚</p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¾—åˆ°äº†$\frac{\partial D(\tilde{X}^L_{(k+1,i)})}{\partial \tilde{X}^L_{(k+1,i)} }$ï¼ˆæŸå¤±å‡½æ•°å¯¹ç‚¹äº‘çš„åå¯¼ï¼‰çš„æ±‚è§£ã€‚</p>
<h1 id="â…¤-å‚è€ƒæ–‡çŒ®"><a href="#â…¤-å‚è€ƒæ–‡çŒ®" class="headerlink" title="â…¤.å‚è€ƒæ–‡çŒ®"></a>â…¤.å‚è€ƒæ–‡çŒ®</h1><p><a href="https://zhuanlan.zhihu.com/p/29719106">LOAM:3Dæ¿€å…‰é‡Œç¨‹è®¡åŠç¯å¢ƒå»ºå›¾çš„æ–¹æ³•å’Œå®ç°ï¼ˆä¸€ï¼‰</a></p>
<p><a href="https://blog.csdn.net/nksjc/article/details/76401092">3D æ¿€å…‰ SLAM -&gt;loam_velodyne è®ºæ–‡ä¸ä»£ç è§£æ</a></p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
        <category>SLAMé¡¹ç›®å®è·µ</category>
      </categories>
      <tags>
        <tag>æ¿€å…‰SLAM</tag>
        <tag>LOAM</tag>
      </tags>
  </entry>
  <entry>
    <title>LOAM&amp;&amp;ALOAMæºç ç¼–è¯‘ä¸æ•°æ®é›†è¿è¡Œ</title>
    <url>/posts/15478.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬æ–‡ä¸»è¦æŠŠloam_velodyneä¸aloam_velodyneæºç è¿›è¡Œç¼–è¯‘è¿è¡Œï¼Œæ„Ÿå—ä¸€ä¸‹åœ¨æ•°æ®é›†ä¸‹ä¸¤è€…çš„è¿è¡Œæ•ˆæœã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<blockquote>
<p> åŸºæœ¬ç¯å¢ƒ:ubuntu20.04; ROS1:noetic;ä½ é¦–å…ˆå¾—ç†Ÿæ‚‰åå››è®²å§â€¦â€¦</p>
</blockquote>
<h1 id="LOAM"><a href="#LOAM" class="headerlink" title="LOAM"></a>LOAM</h1><p><img src="https://github.com/laboshinl/loam_velodyne/raw/master/capture.bmp" alt="Screenshot"></p>
<p>ç”±äºLOAMåœ¨æœºå™¨äººæ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œæ­å»ºï¼Œæ‰€ä»¥éœ€è¦æ„å»ºå·¥ä½œç©ºé—´ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå·¥ä½œç©ºé—´</span></span><br><span class="line">mkdir -p LOAM_WS/src</span><br><span class="line"><span class="built_in">cd</span> src &amp;&amp; catkin_init_workspace </span><br><span class="line">git <span class="built_in">clone</span> https://github.com/laboshinl/loam_velodyne.git</span><br><span class="line"><span class="built_in">cd</span> .. &amp;&amp; catkin_make</span><br><span class="line"><span class="comment"># ç¼–è¯‘å’Œè¿è¡Œ</span></span><br><span class="line">catkin_make -DCMAKE_BUILD_TYPE=Release </span><br><span class="line"><span class="comment"># è®¾ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">source</span> ./devel/setup.bash</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ˜¯ç”¨çš„vscodeè®°å¾—æŠŠå¼•ç”¨æ”¾å…¥<code>c_cpp_properties.json</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;includePath&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;/opt/ros/noetic/include/**&quot;</span>,</span><br><span class="line">                <span class="string">&quot;/home/alvin/workspace/slam_ws/LOAM/LOAM_WS/src/loam_velodyne/include/**&quot;</span>,</span><br><span class="line">                <span class="string">&quot;/usr/include/**&quot;</span></span><br><span class="line">                ],</span><br></pre></td></tr></table></figure>
<p>LOAM_WS/srcä¸‹è¿è¡Œ:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># çª—å£1 </span></span><br><span class="line"><span class="built_in">source</span> ./devel/setup.bash</span><br><span class="line">roslaunch loam_velodyne loam_velodyne.launch</span><br><span class="line"><span class="comment"># çª—å£2 </span></span><br><span class="line"><span class="built_in">source</span> ./devel/setup.bash</span><br><span class="line">rosbag play nsh_indoor_outdoor.bag <span class="comment"># è¿™é‡Œä¸‹è½½çš„æ•°æ®é›†æ”¾åœ¨äº†å·¥ä½œç©ºé—´ä¸‹</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/loam-velodyneæºç ç¼–è¯‘ä¸æ•°æ®é›†è¿è¡Œ/image-20220412211213586.png" alt="image-20220412211213586" style="zoom:50%;" /></p>
<p>é”™è¯¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[ERROR] [1628642694.176070835]: Error transforming odometry <span class="string">&#x27;Odometry&#x27;</span> from frame <span class="string">&#x27;/camera_init&#x27;</span> to frame <span class="string">&#x27;camera_init&#x27;</span></span><br><span class="line">[ERROR] [1628642694.509388228]: Error transforming odometry <span class="string">&#x27;Odometry&#x27;</span> from frame <span class="string">&#x27;/camera_init&#x27;</span> to frame <span class="string">&#x27;camera_init&#x27;</span></span><br></pre></td></tr></table></figure>
<p>è§£å†³åŠæ³•å‚è€ƒï¼š<a href="https://link.zhihu.com/?target=https%3A//github.com/laboshinl/loam_velodyne/issues/157">https://github.com/laboshinl/lo</a></p>
<p>ä¿®æ”¹LaserMapping.cpp, LaserOdomertyr.cpp, TransformMaintenance.cppè¿™ä¸‰ä¸ªæ–‡ä»¶ä¸­çš„â€œ/camera_intâ€ä¸ºâ€œcamera_initâ€</p>
<p><img src="/images/loam-velodyneæºç ç¼–è¯‘ä¸æ•°æ®é›†è¿è¡Œ/image-20220412212407985.png" alt="image-20220412212407985"></p>
<h1 id="ALOAM"><a href="#ALOAM" class="headerlink" title="ALOAM"></a>ALOAM</h1><p>æºä»£ç åœ°å€ï¼š<a href="https://github.com/HKUST-Aerial-Robotics/A-LOAM">https://github.com/HKUST-Aerial-Robotics/A-LOAM</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå·¥ä½œç©ºé—´</span></span><br><span class="line">mkdir -p ALOAM_WS/src</span><br><span class="line"><span class="built_in">cd</span> src &amp;&amp; catkin_init_workspace </span><br><span class="line">git <span class="built_in">clone</span> https://github.com/HKUST-Aerial-Robotics/A-LOAM</span><br><span class="line"><span class="built_in">cd</span> .. &amp;&amp; catkin_make</span><br><span class="line"><span class="comment"># ç¼–è¯‘å’Œè¿è¡Œ</span></span><br><span class="line">catkin_make -DCMAKE_BUILD_TYPE=Release </span><br><span class="line"><span class="comment"># è®¾ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">source</span> ./devel/setup.bash</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä¼šé‡åˆ°ä¸€äº›é—®é¢˜</p>
<p>â‘ æŠŠä½ çš„CMakeLists.txtæ–‡ä»¶ä¸­çš„C++11å£°æ˜æ”¹æˆC++14</p>
<p>ALOAM_WS/src/A-LOAM/CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">## set(CMAKE_CXX_FLAGS &quot;-std=c++11&quot;)</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>â‘¡åŒLOAMï¼Œç”±äºrvizç‰ˆæœ¬é—®é¢˜ï¼Œä¿®æ”¹srcä¸‹æ–‡ä»¶ä¸­çš„â€œ/camera_intâ€ä¸ºâ€œcamera_initâ€</p>
<p>â‘¢å°†<code>ALOAM_WS/src/A-LOAM/src/kittiHelper.cpp</code>ä¸‹çš„<code>CV_LOAD_IMAGE_GRAYSCALE</code>ä¿®æ”¹ä¸º<code>cv::IMREAD_GRAYSCALE</code></p>
<p>è¿™æ˜¯ç”±äºpencv2 å’Œ 3 çš„å‘½åè§„èŒƒäº§ç”Ÿäº†å‡ºå…¥ï¼Œå…·ä½“æŸ¥çœ‹ <a href="https://blog.csdn.net/qq_28660035/article/details/80772071"><strong>opencv3 ä¸ opencv2 ä»£ç åŒºåˆ«æ€»ç»“</strong></a></p>
<p>ç„¶åé‡æ–°ç¼–è¯‘è¿è¡Œå³å¯ï¼š</p>
<p><img src="/images/loam-velodyneæºç ç¼–è¯‘ä¸æ•°æ®é›†è¿è¡Œ/image-20220418094922467.png" alt="image-20220418094922467"></p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
        <category>SLAMé¡¹ç›®å®è·µ</category>
      </categories>
      <tags>
        <tag>æ¿€å…‰SLAM</tag>
        <tag>ALOAM</tag>
        <tag>LOAM</tag>
      </tags>
  </entry>
  <entry>
    <title>LOAMè®ºæ–‡æ·±åº¦å‰–æ</title>
    <url>/posts/33314.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>LOAMè¿™ç¯‡è®ºæ–‡æ˜¯å‘è¡¨äº2014å¹´RSSçš„æ–‡ç« ï¼Œå…¨ç§°ä¸ºï¼šLOAM: Lidar Odometry and Mapping in Real-time . LOAMæ˜¯åŸºäºæ¿€å…‰é›·è¾¾è€Œæ­å»ºçš„åœ¨ROSå¹³å°ä¸‹çš„SLAMç³»ç»Ÿã€‚ä¹‹åè®¸å¤šæ¿€å…‰SLAMç®—æ³•å€Ÿé‰´äº†LOAMä¸­çš„ä¸€äº›æ€æƒ³ï¼Œå¯ä»¥è¯´å­¦ä¹ LOAMå¯¹å­¦ä¹ 3Dæ¿€å…‰SLAMå¾ˆæœ‰å¸®åŠ©ã€‚æœ¬æ–‡å¯¹LOAMåŸè®ºæ–‡è¿›è¡Œäº†è§£æã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="â… -æ¦‚è¿°"><a href="#â… -æ¦‚è¿°" class="headerlink" title="â… .æ¦‚è¿°"></a>â… .æ¦‚è¿°</h1><p>å¦‚å›¾æ‰€ç¤ºï¼Œæ•´ä¸ª<code>LOAM</code>çš„æµç¨‹ä¸ºï¼š<code>Lidar</code>æ¥æ”¶æ•°æ®ï¼Œé¦–å…ˆè¿›è¡Œ<code>Point Cloud Registration</code>ï¼Œ<code>Lidar Odometry</code>ä»¥$10Hz$çš„é¢‘ç‡è¿›è¡Œè¿åŠ¨ä¼°è®¡å’Œåæ ‡è½¬æ¢ï¼Œ<code>Lidar Mapping</code>ä»¥$1Hz$çš„é¢‘ç‡æ„å»ºä¸‰ç»´åœ°å›¾ã€‚è¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†ä¿è¯ç³»ç»Ÿçš„å®æ—¶æ€§ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220410153142890.png" alt="image-20220410153142890"></p>
<p>æœ¬æ–‡çš„æ ¸å¿ƒä¸»è¦åœ¨äºä¸¤ä¸ªéƒ¨åˆ†ï¼š<strong>ç‰¹å¾æå–ï¼ˆLidar Registrationï¼‰</strong>å’Œ<strong>é‡Œç¨‹è®¡è§£ç®—ï¼ˆOdometry and Mappingï¼‰</strong>ã€‚<br>å½“æå–å‡ºç‰¹å¾åï¼Œé€šè¿‡é«˜é¢‘ç‡çš„é‡Œç¨‹è®¡ï¼ˆOdometryï¼‰å®ç°<strong>ç²—å®šä½</strong>ï¼Œå³ä¸ºé«˜é¢‘ä½ç²¾åº¦ï¼›ä½é¢‘ç‡çš„é‡Œç¨‹è®¡ï¼ˆMappingï¼‰å®ç°<strong>ç²¾å®šä½</strong>ï¼Œå³ä¸ºä½é¢‘é«˜ç²¾åº¦ã€‚ </p>
<h1 id="â…¡-ç¬¦å·çº¦å®š"><a href="#â…¡-ç¬¦å·çº¦å®š" class="headerlink" title="â…¡.ç¬¦å·çº¦å®š"></a>â…¡.ç¬¦å·çº¦å®š</h1><ul>
<li><p>ä¸€ä¸ªsweepä»£è¡¨äº†ä¸€æ¬¡æ‰«æå‘¨æœŸï¼Œ$k$è¡¨ç¤ºç¬¬$k$æ¬¡æ‰«æå‘¨æœŸï¼Œ$k\in Z^+$</p>
</li>
<li><p>ä¸€ä¸ªæ‰«æå‘¨æœŸå†…è·å–åˆ°çš„æ‰€æœ‰ç‚¹äº‘è®°ä½œ $P_k$ï¼Œ ä»£è¡¨äº†ç¬¬$k$ä¸ªæ‰«æå‘¨æœŸçš„ç‚¹äº‘</p>
</li>
<li><p>æ¿€å…‰é›·è¾¾åæ ‡ç³»$\left\{L\right\}$æ˜¯ä¸€ä¸ªä»¥æ¿€å…‰é›·è¾¾å‡ ä½•ä¸­å¿ƒä¸ºåŸç‚¹çš„ä¸‰ç»´åæ ‡ç³»ã€‚$x$è½´æ˜¯å‘å·¦çš„ï¼Œ$y$è½´æ˜¯å‘ä¸Šçš„ï¼Œ$z$è½´æ˜¯å‘å‰çš„ã€‚ç‚¹$i, i\in P_k$åœ¨$\left\{L\right\}$ä¸­çš„åæ ‡è¡¨ç¤ºä¸º$X^L_{(k,i)}$ã€‚</p>
</li>
<li><p>ä¸–ç•Œåæ ‡ç³»$\left\{W\right\}$æ˜¯åœ¨åˆå§‹ä½ç½®ä¸$\left\{L\right\}$é‡åˆçš„ä¸‰ç»´åæ ‡ç³»ã€‚ç‚¹$i, i\in P_k$åœ¨$\left\{W\right\}$ä¸­çš„åæ ‡ä¸º$X^W_{(k,i)}$ã€‚</p>
</li>
</ul>
<p><strong>å·²çŸ¥ä¸€æ®µç‚¹äº‘åºåˆ—$P_k,k\in Z^+$ ï¼Œè®¡ç®—åœ¨å‰$k$ä¸ªæ—¶æœŸå†…çš„é›·è¾¾ä½å§¿ä»¥åŠæ„å»ºå…¨å±€åœ°å›¾ã€‚</strong></p>
<h1 id="â…¢-ç‰¹å¾æå–ï¼ˆç‚¹äº‘æ³¨å†Œï¼‰"><a href="#â…¢-ç‰¹å¾æå–ï¼ˆç‚¹äº‘æ³¨å†Œï¼‰" class="headerlink" title="â…¢.ç‰¹å¾æå–ï¼ˆç‚¹äº‘æ³¨å†Œï¼‰"></a>â…¢.ç‰¹å¾æå–ï¼ˆç‚¹äº‘æ³¨å†Œï¼‰</h1><h2 id="A-çº¿æŸæ¨¡å‹"><a href="#A-çº¿æŸæ¨¡å‹" class="headerlink" title="A.çº¿æŸæ¨¡å‹"></a>A.çº¿æŸæ¨¡å‹</h2><p>è¦è¯»æ‡‚ä»£ç ä¸­ç‰¹å¾æå–ä¸­çš„ä¸€äº›å¤„ç†ï¼Œéœ€è¦å¼„æ¸…æ¥š<code>VLP16</code>æ‰«ææ—¶çš„è¿åŠ¨æ¨¡å‹,è®ºæ–‡ä¸­ç§°å•ä¸ªçº¿æŸä¸ºä¸€ä¸ª<code>Scan</code>ï¼Œå¯¹å…¨éƒ¨$16$çº¿ç»„æˆçš„ä¸€å¸§ç‚¹äº‘ç§°ä¸ºä¸€ä¸ª<code>Sweep</code>ï¼Œè™½ç„¶æ˜¯ç”¨çš„å¤šçº¿æ¿€å…‰é›·è¾¾,ä½†æ˜¯LOAMæ˜¯é’ˆå¯¹å•ä¸ª<code>Scan</code>æå–ç‰¹å¾ç‚¹çš„ï¼Œè¿™é‡Œä¸»è¦è€ƒè™‘åˆ°çº¿æŸé—´è§’åˆ†è¾¨ç‡(ç«–ç›´åˆ†è¾¨ç‡)ä¸å•ä¸ªçº¿å†…ç‚¹é—´è§’åˆ†è¾¨ç‡(æ°´å¹³åˆ†è¾¨ç‡)å­˜åœ¨çš„å·®å¼‚ã€‚ä»¥VLP$16$ä¸ºä¾‹, ç«–ç›´åˆ†è¾¨ç‡çº¦ä¸º$2^\circ$ï¼Œè€Œæ°´å¹³åˆ†è¾¨ç‡æœ€å¤§ä¸º$0.4^\circ$ã€‚</p>
<p>è§’åˆ†è¾¨ç‡è¶Šå¤§ï¼Œ ä»£è¡¨è¶Šè¿œçš„ç‰©ä½“ï¼Œåå°„çš„ä¸¤ç‚¹è·ç¦»è¶Šå¤§ï¼Œä¸­é—´ä¸¢å¤±çš„ä¿¡æ¯è¶Šå¤šã€‚å› æ­¤ï¼Œ LOAMæ²¡æœ‰é’ˆå¯¹Scanå’Œ<code>Scan</code>ä¹‹é—´çš„ç‚¹çš„å…³è”æ€§æå–å’Œæè¿°ç‰¹å¾ï¼Œ è€Œæ˜¯ç›´æ¥é’ˆå¯¹å•ä¸ª<code>Scan</code>æå–ç‰¹å¾ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220413152223146.png" alt="image-20220413152223146" style="zoom:50%;" /></p>
<p><strong>ä¸€ä¸ªSweepæ•°æ®çš„é‡‡é›†å¦‚ä½•å®Œæˆçš„ï¼Ÿ</strong></p>
<p>ä¸€å¸§å†…æ‰€æœ‰çš„ç‚¹ï¼Œ éƒ½æ˜¯æŒ‰é¡ºåºç©¿è¡Œæ‰«æçš„ï¼Œæ¯”å¦‚å¼€å§‹çš„æ—¶å€™æ°´å¹³çš„ç¬¬ä¸€ä¸ªè§’åº¦ä¸º$0^\circ$å·¦å³ï¼Œæ‰«ææ°´å¹³è§’åº¦ä¸º$0^\circ$ä¸Šçš„ç«–ç›´æ–¹å‘æ‰€æœ‰$16$ä¸ªç‚¹ï¼ˆå¯¹åº”$16$ä¸ª<code>Scan</code>ï¼‰çš„æ·±åº¦ï¼Œå¹¶ä¸”è¿™$16$ä¸ªç‚¹ä¹Ÿæ˜¯ä¸²è¡ŒæŒ‰é¡ºåºæ’åˆ—çš„ï¼Œç„¶åè½¬åˆ°ä¸‹ä¸€ä¸ªæ°´å¹³è§’åº¦ï¼›è®¾æ°´å¹³åˆ†è¾¨ç‡ä¸º$0.4^\circ$ï¼Œåˆ™ä¸‹ä¸€ä¸ªæ°´å¹³è§’åº¦ä¸º$0.4^\circ$ï¼Œå…¶æ¬¡æ°´å¹³è§’åº¦ä¸º$0.8^\circ$ï¼Œä¾æ¬¡é¡ºæ—¶é’ˆæ‰«å®Œä¸€åœˆ(è®ºæ–‡ä¸­æ˜¯$[-\pi,\pi]$)ï¼Œè¿™å°±å®Œæˆäº†ä¸€ä¸ª<code>Sweep</code>æ•°æ®çš„é‡‡é›†ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220413162337900.png" alt="image-20220413162337900" style="zoom:50%;" /></p>
<p>ç”±äºä»é©±åŠ¨å¾—åˆ°çš„ä¸€ä¸ª<code>Sweep</code>æ˜¯ä»¥ç‚¹äº‘çš„å½¢å¼è¾“å‡ºï¼ˆä¹Ÿå°±æ˜¯ä¸€å †ç‚¹ï¼Œæ¯ä¸ªç‚¹æœ‰$XYZ$çš„ä¿¡æ¯ï¼Œç‚¹å’Œç‚¹ä¹‹é—´æ— å…¶ä»–å…³ç³»ä¿¡æ¯ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¹¶ä¸çŸ¥é“æ¯ä¸ªç‚¹å±äºå“ªä¸ª<code>Scan</code>ï¼Œ å¯¹åº”å“ªä¸ªæ°´å¹³è§’åº¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸Šé¢çš„æ‰«ææ¨¡å‹å»è®¡ç®—æ¯ä¸ªç‚¹çš„ç«–ç›´è§’åº¦å’Œæ°´å¹³è§’åº¦ã€‚ç‚¹åæ ‡ä¸ç«–ç›´è§’åº¦/æ°´å¹³è§’åº¦çš„æ¢ç®—å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚[è¯¦ç»†ç¿»é˜…<a href="https://velodynelidar.com/wp-content/uploads/2019/12/63-9243-Rev-E-VLP-16-User-Manual.pdf">vlp-16 sensor coordinate systemæ–‡æ¡£</a>]</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220413151359585.png" alt="image-20220413151359585" style="zoom:50%;" /></p>
<p>é€šè¿‡è¿™ä¸ªå›¾å¾ˆå®¹æ˜“å°±èƒ½ç†è§£å¦‚ä½•ç¡®å®šæŸä¸ªç‚¹å±äºå“ªä¸ª<code>Scan</code>ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¿€å…‰ç‚¹çš„å‚ç›´è·ç¦»é™¤ä»¥å®ƒçš„æ°´å¹³è·ç¦»ï¼Œå°±å¯ä»¥å¾—åˆ°é›·è¾¾åˆ°è¯¥ç‚¹çš„å°„çº¿å’Œæ°´å¹³é¢çš„å¤¹è§’ï¼Œç”¨è¿‡è¿™ä¸ªå¤¹è§’æˆ‘ä»¬å°±å¯ä»¥å¾ˆå®¹æ˜“çš„åˆ¤æ–­è¯¥ç‚¹å±äºå“ªä¸ª<code>Scan</code>ã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œåœ¨å¤šçº¿é›·è¾¾ï¼ˆæ¯”å¦‚$32$çº¿ï¼Œ$64$çº¿ï¼‰ï¼Œç”±äºç«–ç›´æ–¹å‘çš„ç‚¹æ›´å¯†é›†ï¼Œ<code>Scan</code>ä¸<code>Scan</code>ä¹‹é—´çš„è·ç¦»å¾ˆå°ï¼Œå¾ˆå®¹æ˜“å‡ºç°æŠŠ<code>Scan10</code>åˆ†é…åˆ°<code>Scan13</code>è¿™æ ·çš„è¯¯å·®ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰æ¡ä»¶ï¼Œå¯ä»¥ä¿®æ”¹æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œå»ºè®®æŠŠæŸä¸ªç‚¹å±äºå“ªä¸ª<code>Scan</code>ç›´æ¥ä¿å­˜çš„è¯¥ç‚¹å¯¹åº”çš„æ•°æ®ä¸­å»ã€‚</p>
<p>æ‘˜å–å¯¹åº”ä»£ç ï¼ˆsrc/loam_velodyne/src/scanRegistration.cppï¼‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cloudSize; i++) &#123;</span><br><span class="line">    <span class="comment">//åæ ‡è½´äº¤æ¢ï¼Œvelodyne lidarçš„åæ ‡ç³»ä¹Ÿè½¬æ¢åˆ°zè½´å‘å‰ï¼Œxè½´å‘å·¦çš„å³æ‰‹åæ ‡ç³»</span></span><br><span class="line">    point.x = laserCloudIn.points[i].y;</span><br><span class="line">    point.y = laserCloudIn.points[i].z;</span><br><span class="line">    point.z = laserCloudIn.points[i].x;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—ç‚¹çš„ä»°è§’(æ ¹æ®lidaræ–‡æ¡£å‚ç›´è§’è®¡ç®—å…¬å¼),æ ¹æ®ä»°è§’æ’åˆ—æ¿€å…‰çº¿å·ï¼Œvelodyneæ¯ä¸¤ä¸ªscanä¹‹é—´é—´éš”2åº¦</span></span><br><span class="line">    <span class="keyword">float</span> angle = <span class="built_in">atan</span>(point.y / <span class="built_in">sqrt</span>(point.x * point.x + point.z * point.z)) * <span class="number">180</span> / M_PI;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="B-åŒºåˆ†è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹"><a href="#B-åŒºåˆ†è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹" class="headerlink" title="B.åŒºåˆ†è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹"></a>B.åŒºåˆ†è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹</h2><p>å¸¸è§çš„ç‰¹å¾ç‚¹æå–æ–¹æ³•ï¼šç‰¹å¾å‘é‡ã€ç›´æ–¹å›¾ã€æ—‹è½¬å›¾ç‰‡ç­‰ã€‚è¿™äº›æ–¹æ³•è™½ç„¶èƒ½å¾ˆç²¾å‡†çš„æ¶µç›–ä¸€å¸§æ•°æ®çš„å¤§éƒ¨åˆ†ä¿¡æ¯ï¼Œä½†æ˜¯ç”±äºè®¡ç®—é‡å¤§ï¼Œå¾ˆéš¾åœ¨æ¿€å…‰slamçš„ç›¸é‚»å¸§çš„åŒ¹é…ä¸­ä½¿ç”¨ã€‚ å› æ­¤ï¼Œéœ€è¦æƒ³ä¸€äº›æ›´å¥½çš„æ–¹æ³•ã€‚</p>
<p>LOAMçš„ç‰¹å¾æå–åŸºäºæ›²ç‡ï¼Œåªæå–ä¸¤ç§ç‰¹å¾ç‚¹ï¼šè¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹ï¼Œåˆ†åˆ«å¯¹åº”åœºæ™¯çš„å¹³é¢åŒºåŸŸå’Œæ›²æŠ˜åŒºåŸŸã€‚ä½œè€…æ ¹æ®ç‚¹çš„æ›²ç‡æ¥è®¡ç®—<strong>å¹³é¢å…‰æ»‘åº¦</strong>ä½œä¸ºæå–å½“å‰å¸§çš„ç‰¹å¾ä¿¡æ¯çš„æŒ‡æ ‡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¾¹ç¼˜ç‚¹çš„çŸ¢é‡å’Œçš„æ¨¡ä¸€èˆ¬è¾ƒå¤§ï¼ŒçŸ¢é‡<strong>å’Œä¸ä¸ºé›¶</strong>å‘é‡ï¼Œè€Œå¯¹åº”å¹³é¢ç‚¹çš„çŸ¢é‡å’Œçš„æ¨¡ä¸€èˆ¬è¾ƒå°ï¼ŒçŸ¢é‡<strong>å’Œä¸ºé›¶</strong>å‘é‡ã€‚</p>
<ul>
<li>å¹³é¢ç‚¹ï¼šåœ¨ä¸‰ç»´ç©ºé—´ä¸­å¤„äºå¹³æ»‘å¹³é¢ä¸Šçš„ç‚¹ï¼Œå…¶å’Œå‘¨å›´ç‚¹çš„å¤§å°å·®è·ä¸å¤§ï¼Œæ›²ç‡è¾ƒä½ï¼Œå¹³æ»‘åº¦è¾ƒä½ã€‚</li>
<li>è¾¹ç¼˜ç‚¹ï¼šåœ¨ä¸‰ç»´ç©ºé—´ä¸­å¤„äºå°–é”è¾¹ç¼˜ä¸Šçš„ç‚¹ï¼Œå…¶å’Œå‘¨å›´ç‚¹çš„å¤§å°å·®è·è¾ƒå¤§ï¼Œæ›²ç‡è¾ƒé«˜ï¼Œå¹³æ»‘åº¦è¾ƒé«˜ã€‚</li>
</ul>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220411152638255.png" alt="image-20220411152638255" style="zoom:33%;" /></p>
<p>å¯ä»¥å‘ç°ï¼ŒLOAMæ²¡æœ‰ä½¿ç”¨ç‰¹å¾æè¿°å­(è¿æ›²ç‡éƒ½æ²¡æœ‰å‚ä¸åç»­çš„åŒ¹é…)ã€‚ä»ä»£ç ä¸­çš„è¾¹ç¼˜ç‚¹ä¸å¹³é¢ç‚¹çš„æ›²ç‡åˆ¤æ–­é˜ˆå€¼å¯ä»¥çœ‹å‡ºï¼ŒLOAMæå–çš„è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹ç‰¹å¾ç‚¹çš„æ›²ç‡ï¼Œå¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„å·®åˆ«ï¼Œè¿™ä½¿å¾—LOAMæœ‰è¾ƒå¼ºçš„åœºæ™¯é€‚åº”æ€§ï¼Œåœ¨åœºæ™¯ä¸­æ¯”è¾ƒæ›²æŠ˜çš„åŒºåŸŸï¼Œè¾¹ç¼˜ç‚¹ç‚¹ä¼šå æ®ä¸»å¯¼,è€Œåœ¨è¾ƒä¸ºå¹³ç¼“çš„åŒºåŸŸï¼Œå¹³é¢ç‚¹ç‚¹å æ®ä¸»å¯¼ã€‚ åœ¨æ¿€å…‰æ‰«æåˆ°çš„ä¸€å—åŒºåŸŸï¼Œæ€»ä¼šæå–å‡ºå‡ ä¸ªç‰¹å¾ç‚¹ã€‚</p>
<hr>
<p>å®šä¹‰<strong>å¹³é¢å…‰æ»‘åº¦</strong>$c$ï¼š</p>
<script type="math/tex; mode=display">
c=\frac{1}{|S|Â·\parallel X^L_{(k,i)}\parallel} \sum_{j\in S,j\ne i} \parallel (X^L_{(k,i)}-X^L_{(k,j)}) \parallel \tag{1}</script><p>æ ¹æ®$c$å€¼å¯¹æ‰«æä¸­çš„ç‚¹è¿›è¡Œæ’åºï¼Œé€‰æ‹©$c$å€¼æœ€å¤§çš„ç‚¹ä¸ºè¾¹ç¼˜ç‚¹ï¼Œ$c$å€¼æœ€å°çš„ç‚¹ä¸ºå¹³é¢ç‚¹çš„ç‰¹å¾ç‚¹ã€‚è®ºæ–‡ä¸­ä¸ºäº†åœ¨ç¯å¢ƒä¸­å‡åŒ€åˆ†å¸ƒç‰¹å¾ç‚¹ï¼Œå°†æ‰«æåˆ†å‰²æˆå››ä¸ªç›¸åŒçš„å­åŒºåŸŸã€‚æ¯ä¸ªå­åŒºåŸŸæœ€å¤šå¯æä¾›$2$ä¸ªè¾¹ç¼˜ç‚¹å’Œ$4$ä¸ªå¹³é¢ç‚¹ã€‚åªæœ‰å½“ç‚¹$i$çš„$c$å€¼å¤§äºæˆ–å°äºä¸€ä¸ªé˜ˆå€¼ï¼Œä¸”æ‰€é€‰ç‚¹çš„ä¸ªæ•°ä¸è¶…è¿‡æœ€å¤§å€¼æ—¶ï¼Œæ‰èƒ½å°†ç‚¹$i$é€‰æ‹©ä¸ºè¾¹ç¼˜ç‚¹æˆ–å¹³é¢ç‚¹ã€‚</p>
<p>é€šè¿‡ä»£ç å¯ä»¥çŸ¥é“è¿™å››ä¸ªç›¸åŒçš„å­åŒºåŸŸåˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>æ›²ç‡ç‰¹åˆ«å¤§çš„ç‚¹ï¼ˆsharpï¼‰</li>
<li>æ›²ç‡å¤§çš„ç‚¹ï¼ˆless_sharpï¼‰</li>
<li>æ›²ç‡ç‰¹åˆ«å°çš„ç‚¹ï¼ˆflatï¼‰</li>
<li>æ›²ç‡å°çš„ç‚¹ï¼ˆless_flatï¼‰</li>
</ul>
<p>ä»£ç ä¸­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç‚¹åˆ†ç±»æ ‡å·:2-ä»£è¡¨æ›²ç‡å¾ˆå¤§ï¼Œ1-ä»£è¡¨æ›²ç‡æ¯”è¾ƒå¤§,-1-ä»£è¡¨æ›²ç‡å¾ˆå°ï¼Œ0-æ›²ç‡æ¯”è¾ƒå°(å…¶ä¸­1åŒ…å«äº†2,0åŒ…å«äº†1,0å’Œ1æ„æˆäº†ç‚¹äº‘å…¨éƒ¨çš„ç‚¹)</span></span><br><span class="line"><span class="keyword">int</span> cloudLabel[<span class="number">40000</span>];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™æ ·æ“ä½œçš„ä¸»è¦ä½œç”¨æ˜¯ï¼Œåœ¨è¿›è¡Œåé¢çš„ä¼˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬èƒ½æ ¹æ®è¿™æ ·çš„â€œç­‰çº§â€åˆ’åˆ†è·å¾—æ›´æ˜æ˜¾</p>
</blockquote>
<h2 id="C-ä¸å¯é ç‚¹çš„åˆ é™¤"><a href="#C-ä¸å¯é ç‚¹çš„åˆ é™¤" class="headerlink" title="C.ä¸å¯é ç‚¹çš„åˆ é™¤"></a>C.ä¸å¯é ç‚¹çš„åˆ é™¤</h2><p>å¦‚å›¾æ‰€ç¤ºï¼Œå¯¹ä½äºå¹³è¡Œäºæ¿€å…‰æŸçš„è¡¨é¢ä¸Šçš„ç‚¹ï¼Œä»¥åŠè¢«é®æŒ¡åŒºåŸŸ(è™šçº¿æ©™çº¿æ®µ)çš„è¾¹ç•Œä¸Šçš„ç‚¹ï¼Œå¯ä»¥è¢«æ£€æµ‹ä¸ºè¾¹ç¼˜ç‚¹ã€‚å®ƒä»¬éƒ½æ˜¯ä¸å¯é çš„ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220410153159251.png" alt="image-20220410153159251" style="zoom:50%;" /></p>
<p>é€‰å–ç‚¹çš„ä¸‰è¦ç´ ï¼š</p>
<ul>
<li>é€‰æ‹©çš„è¾¹ç¼˜ç‚¹æˆ–å¹³é¢ç‚¹çš„æ•°é‡ä¸èƒ½è¶…è¿‡å­åŒºåŸŸçš„æœ€å¤§å€¼</li>
<li>å®ƒå‘¨å›´çš„ç‚¹éƒ½æ²¡æœ‰è¢«é€‰ä¸­</li>
<li>å®ƒä¸èƒ½åœ¨å¤§è‡´å¹³è¡Œäºæ¿€å…‰æŸçš„è¡¨é¢ä¸Šï¼Œä¹Ÿä¸èƒ½åœ¨è¢«é®æŒ¡åŒºåŸŸçš„è¾¹ç•Œä¸Šã€‚</li>
</ul>
<p>ç»è¿‡ç‰¹å¾ç‚¹çš„æå–ï¼Œå°±å¯ä»¥å¾—åˆ°è®ºæ–‡ä¸­çš„å¸§æ•°æ®å¯¹åº”çš„ç‰¹å¾ä¿¡æ¯ï¼ˆè¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹åˆ†åˆ«ç”¨é»„è‰²å’Œçº¢è‰²æ ‡è®°ã€‚ï¼‰ï¼š</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220410153221345.png" alt="image-20220410153221345" style="zoom:50%;" /></p>
<h1 id="â…£-ç‰¹å¾ç‚¹åŒ¹é…"><a href="#â…£-ç‰¹å¾ç‚¹åŒ¹é…" class="headerlink" title="â…£.ç‰¹å¾ç‚¹åŒ¹é…"></a>â…£.ç‰¹å¾ç‚¹åŒ¹é…</h1><p>å°†ç‚¹äº‘é‡æ–°æŠ•å½±åˆ°æ‰«æçš„æœ«ç«¯ã€‚è“è‰²çº¿æ®µè¡¨ç¤ºæ‰«æ$k$æ—¶æ„ŸçŸ¥åˆ°çš„ç‚¹äº‘ $P_k$ï¼Œåœ¨$k$æ¬¡æ‰«æç»“æŸæ—¶ï¼Œç»è¿‡<strong>ç•¸å˜æ ¡æ­£</strong>ä¹‹åå°†$P_k$é‡æ–°æŠ•å½±åˆ°æ—¶é—´æˆ³$t_{k+1}$ï¼Œå¾—åˆ°ç»¿è‰²çº¿æ®µ$\overline{P}_k$ã€‚ç„¶åï¼Œåœ¨$k+1$æ¬¡æ‰«ææ—¶ï¼Œé‡æŠ•å½±ç‚¹äº‘æ•°æ®(ç»è¿‡ç•¸å˜æ ¡æ­£)$\overline{P}_k$å’Œæ–°æ„ŸçŸ¥çš„ç‚¹äº‘$P_{k+1}$(æ©™è‰²çº¿æ®µ)ä¸€èµ·ä¼°è®¡æ¿€å…‰é›·è¾¾è¿åŠ¨ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220410153230555.png" alt="image-20220410153230555" style="zoom:50%;" /></p>
<p>æˆ‘ä»¬æ ¹æ®è®ºæ–‡ä¸­çš„æè¿°ï¼š</p>
<ul>
<li><p>$P_k$æ˜¯$k$æ—¶åˆ»æ¿€å…‰é›·è¾¾æ„ŸçŸ¥çš„ç‚¹äº‘é›†åˆï¼Œ æ ¹æ®ä¸Šæ–‡çš„ç‰¹å¾æå–è§„åˆ™ï¼Œå¾—åˆ°è¾¹ç¼˜ç‚¹çš„é›†åˆ$\xi_{k}$å’Œå¹³é¢ç‚¹çš„é›†åˆ$H_{k}$ï¼›</p>
</li>
<li><p>$\overline{P}_k$æ˜¯å°†$k$æ—¶åˆ»æ¿€å…‰é›·è¾¾æ„ŸçŸ¥çš„ç‚¹äº‘é›†åˆ$P_k$ï¼Œç»è¿‡ç•¸å˜æ ¡æ­£å¾—åˆ°çš„ç‚¹äº‘é›†åˆï¼›</p>
</li>
<li>$P_{k+1}$æ˜¯$k+1$æ—¶åˆ»æ¿€å…‰é›·è¾¾æ„ŸçŸ¥çš„ç‚¹äº‘é›†åˆï¼Œ ç±»ä¼¼$P_k$ï¼Œè¾¹ç¼˜ç‚¹çš„é›†åˆ$\xi_{k+1}$ä»¥åŠå¹³é¢ç‚¹çš„é›†åˆ$H_{k+1}$ï¼›</li>
<li>åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œä½¿ç”¨å½“å‰ä¼°è®¡çš„å˜æ¢å°†$\xi_{k+1}$å’Œ$H_{k+1}$é‡æ–°æŠ•å½±åˆ°æ‰«æçš„å¼€å§‹ï¼Œè®°$\tilde{\xi}_{k+1}$å’Œ$\tilde{H}_{k+1}$ä¸ºé‡æŠ•å½±çš„ç‚¹é›†ã€‚</li>
</ul>
<blockquote>
<p>è¿™é‡Œæˆ‘ä»¬å°†$k$æ—¶åˆ»çš„æ‰«æç‚¹äº‘$P_k$ç»è¿‡ç•¸å˜æ ¡æ­£ï¼Œå¾—åˆ°äº†$\overline{P}_k$ï¼Œç„¶å$k+1$æ—¶åˆ»çš„æ‰«æç‚¹äº‘$P_{k+1}$çš„$\xi_{k+1}$å’Œ$H_{k+1}$é‡æŠ•å½±åˆ°äº†æ‰«æçš„å¼€å§‹ï¼Œå¾—åˆ°$\tilde{\xi}_{k+1}$å’Œ$\tilde{H}_{k+1}$ï¼Œè¿™æ ·å°±ä½¿å¾—$\overline{P}_k$ä¸$\tilde{\xi}_{k+1}$å’Œ$\tilde{H}_{k+1}$ç»Ÿä¸€åœ¨åŒä¸€åæ ‡ç³»ä¸‹ï¼Œè¿›è€Œæˆ‘ä»¬æ‰å¯ä»¥è®¡ç®—ä¸‹é¢çš„è·ç¦»ã€‚</p>
</blockquote>
<hr>
<h2 id="A-æ¿€å…‰é›·è¾¾æ•°æ®çš„ç•¸å˜"><a href="#A-æ¿€å…‰é›·è¾¾æ•°æ®çš„ç•¸å˜" class="headerlink" title="A.æ¿€å…‰é›·è¾¾æ•°æ®çš„ç•¸å˜"></a>A.æ¿€å…‰é›·è¾¾æ•°æ®çš„ç•¸å˜</h2><p>æ¿€å…‰é›·è¾¾æ•°æ®äº§ç”Ÿçš„ç•¸å˜åˆå«<strong>æ¿€å…‰é›·è¾¾è‡ªè¿åŠ¨ç•¸å˜</strong>ï¼Œå¯¹äºå¤šæ•°æ¿€å…‰é›·è¾¾è€Œè¨€ï¼Œå°½ç®¡æ¿€å…‰çš„å‘å°„ä¸æ¥æ”¶å¾ˆå¿«ï¼Œä½†æ„æˆç‚¹äº‘çš„æ¯ä¸€ä¸ªç‚¹ä»éåŒä¸€æ—¶åˆ»ç”Ÿæˆçš„ã€‚ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†$100ms $(å¯¹åº”å…¸å‹å€¼$10Hz$) å†…ç´¯ç§¯çš„æ•°æ®ä½œä¸ºä¸€å¸§ç‚¹äº‘è¾“å‡ºã€‚è‹¥åœ¨è¿™$100ms$å†…ï¼Œæ¿€å…‰é›·è¾¾æœ¬ä½“æˆ–å®‰è£…æ‰€åœ¨çš„æœºä½“å‘ç”Ÿç»å¯¹ä½ç½®çš„å˜åŒ–ï¼Œé‚£ä¹ˆ<strong>æ­¤å¸§ç‚¹äº‘ä¸­æ¯ä¸€ä¸ªç‚¹çš„åæ ‡ç³»å°±æ˜¯ä¸åŒçš„ã€‚</strong>ç›´è§‚ä¸Šçœ‹ï¼Œè¿™ä¸€å¸§ç‚¹äº‘æ•°æ®å°±ä¼šå‘ç”Ÿä¸€å®šçš„â€œå˜å½¢â€ï¼Œä¸èƒ½çœŸå®å¯¹åº”æ‰€æ¢æµ‹åˆ°çš„ç¯å¢ƒä¿¡æ¯ï¼Œç±»ä¼¼äºæ‹ç…§æ—¶æ‰‹æŠ–äº†ï¼Œæ‹å‡ºæ¥çš„ç…§ç‰‡å°±ä¼šç³Šã€‚è¿™ä¾¿æ˜¯æ¿€å…‰é›·è¾¾çš„è‡ªè¿åŠ¨ç•¸å˜ã€‚</p>
<p>ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ¿€å…‰é›·è¾¾å¯¹é¢æœ‰ä¸€é¢å¹³è¡Œçš„å¢™é¢ï¼Œç†æƒ³çŠ¶å†µä¸‹æ¿€å…‰å¤„äºä½ç½®Aæˆ–è€…ä½ç½®Bä½ç½®å¢™é¢çš„ç‚¹äº‘åº”è¯¥ä¸€æ ·ï¼Œä½†å®é™…ä¸Šï¼Œç”±äºåœ¨è¿™$100ms$å†…ï¼Œæ¿€å…‰é›·è¾¾æœ¬èº«åœ¨è¿åŠ¨ï¼Œæ‰€ä»¥è¿™ä¸€å¸§çš„å¢™é¢çš„ç‚¹äº‘ä¸­ï¼ŒæŸäº›ç‚¹çš„åæ ‡ç³»å°±å˜å¾—ä¸åŒäº†ï¼Œè¿›è€Œå¤±å»äº†åŸå§‹å¹³è¡Œå¢™é¢çš„ç‰¹å¾ï¼Œæ‰€ä»¥è¯´ï¼ŒABä½ç½®çš„å·®è·å¿…é¡»è¦è€ƒè™‘ï¼Œæˆ–è€…è¯´æ¿€å…‰åœ¨è¿™æœŸé—´çš„è¿åŠ¨å¿…é¡»è¦è€ƒè™‘ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220411193701848.png" alt="image-20220411193701848" style="zoom:33%;" /></p>
<h2 id="B-å°†ç‚¹ä¸çº¿å’Œé¢åŒ¹é…çš„åŸå› "><a href="#B-å°†ç‚¹ä¸çº¿å’Œé¢åŒ¹é…çš„åŸå› " class="headerlink" title="B.å°†ç‚¹ä¸çº¿å’Œé¢åŒ¹é…çš„åŸå› "></a>B.å°†ç‚¹ä¸çº¿å’Œé¢åŒ¹é…çš„åŸå› </h2><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ç•¸å˜ï¼Œæ¿€å…‰é›·è¾¾åœ¨çŸ­æ—¶é—´é‡Œè·å–çš„ç›¸é‚»å¸§æ•°æ®æ˜¯<strong>å«æœ‰å¤§é‡åŒä¸€ç‰¹å¾ç‚¹</strong>çš„ï¼Œä¹Ÿå°±æ˜¯$P_k$å’Œ$P_{k+1}$ä¸­å¾ˆå¤šç‰¹å¾ç‚¹åªæ˜¯é›·è¾¾åœ¨ä¸åŒä½ç½®ä¸‹è§‚å¯Ÿçš„åŒä¸€ä¸ªç‚¹ã€‚æ‰€ä»¥åªè¦æ‰¾åˆ°ä¸€ä¸ªå˜åŒ–å…³ç³»$T$ä½¿å¾—$P_k$å’Œ$P_{k+1}$å¯¹åº”çš„ç‚¹çš„åŒ¹é…ï¼Œè¿™ä¸ª$T$å°±æ˜¯è¡¨ç¤ºæ¿€å…‰é›·è¾¾çš„å¸§é—´è¿åŠ¨ã€‚ä¸ºäº†å‡å°‘è®¡ç®—é‡ï¼Œå¢åŠ é²æ£’æ€§ï¼Œä¸ç›´æ¥ä½¿ç”¨ç‚¹ä¸ç‚¹çš„åŒ¹é…ï¼Œè€Œæ˜¯ä½¿ç”¨è¾¹ç¼˜ç‚¹å’Œå¯¹åº”çš„çº¿ç‰¹å¾ï¼Œå¹³é¢ç‚¹å’Œå¯¹åº”çš„é¢ç‰¹å¾ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å¾—åˆ°å˜æ¢å…³ç³» $T$ã€‚</p>
<p>ä½†æ˜¯å®é™…æƒ…å†µä¸‹ï¼Œæ¿€å…‰é›·è¾¾çš„ç‚¹äº‘æ•°æ®æ˜¯å«æœ‰ç•¸å˜çš„ï¼Œæ‰€ä»¥ä½œè€…å°†çŸ«æ­£çš„$P_k$é‡æ–°æŠ•å½±åˆ°æ—¶é—´æˆ³$t_{k+1}$ï¼Œå¾—åˆ°$\overline{P}_k$ã€‚æˆ‘ä»¬çš„ç›®çš„å°±æ˜¯ï¼šä»$\overline{P}_k$ä¸­æ‰¾åˆ°ä¸$\xi_{k+1}$ä¸­çš„ç‚¹å¯¹åº”çš„è¾¹çº¿ï¼Œä»å¹³é¢å›¾ä¸­æ‰¾åˆ°ä¸$H_{k+1}$ä¸­çš„ç‚¹å¯¹åº”çš„å¹³é¢è´´ç‰‡(patch)ã€‚é‚£ä¹ˆç°åœ¨å°±æ˜¯ä¸€è¾¹è¿›è¡ŒçŸ«æ­£ï¼Œä¸€è¾¹è¿›è¡ŒåŒ¹é…ï¼Œç„¶åè¿›è¡Œè¿­ä»£ã€‚è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œ$T$çš„å€¼ä¸æ–­å˜åŒ–ï¼Œç›´åˆ°å¯»æ‰¾åˆ°ä¸€ä¸ª$T$ä½¿å¾—<strong>æ‰€æœ‰ç‚¹å’Œå¯¹åº”ç‰¹å¾åŒºåŸŸè·ç¦»å’Œæœ€å°</strong>ã€‚</p>
<h2 id="C-ç‚¹å’Œå¯¹åº”ç‰¹å¾åŒºåŸŸè·ç¦»çš„è®¡ç®—"><a href="#C-ç‚¹å’Œå¯¹åº”ç‰¹å¾åŒºåŸŸè·ç¦»çš„è®¡ç®—" class="headerlink" title="C.ç‚¹å’Œå¯¹åº”ç‰¹å¾åŒºåŸŸè·ç¦»çš„è®¡ç®—"></a>C.ç‚¹å’Œå¯¹åº”ç‰¹å¾åŒºåŸŸè·ç¦»çš„è®¡ç®—</h2><p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220411202023128.png" alt="image-20220411202023128" style="zoom:50%;" /></p>
<p>å…¶ä¸­ï¼š$i\in \tilde{\xi}_{k+1}$ï¼Œ$j,l,m\in \overline{P}_k$</p>
<p>å›¾$7(a)$ç»™å‡ºäº†å¯»æ‰¾è¾¹ç¼˜ç‚¹å¯¹åº”çš„è¾¹çº¿çš„è¿‡ç¨‹ã€‚è®¾$i$æ˜¯å±äº$\tilde{\xi}_{k+1}$çš„ç‚¹ï¼Œå³$ i \in \tilde{\xi}_{k+1}$ã€‚è¾¹çº¿ç”±ä¸¤ä¸ªç‚¹è¡¨ç¤ºã€‚è®¾$j$æ˜¯$i$åœ¨$\overline{P}_k$ä¸­çš„æœ€è¿‘é‚»ï¼Œ$j\in \overline{P}_k$ï¼Œè®¾$l$æ˜¯$i$åœ¨è¿ç»­ä¸¤æ¬¡æ‰«æ$j$æ—¶çš„æœ€è¿‘é‚»ï¼Œ$(j, l)$æ„æˆ$i$çš„å¯¹åº”å…³ç³»ã€‚ç„¶åï¼Œä¸ºäº†éªŒè¯$j$å’Œ$l$éƒ½æ˜¯è¾¹ç¼˜ç‚¹ï¼Œæˆ‘ä»¬æ ¹æ®å…¬å¼$(1)$æ¥æ£€æŸ¥å±€éƒ¨è¡¨é¢çš„å¹³æ»‘åº¦ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ç‰¹åˆ«è¦æ±‚$j$å’Œ$l$æ¥è‡ªä¸åŒçš„æ‰«æï¼Œè€ƒè™‘åˆ°ä¸€æ¬¡æ‰«æä¸èƒ½åŒ…å«æ¥è‡ªåŒä¸€è¾¹çº¿çš„å¤šä¸ªç‚¹ã€‚</p>
<p>å›¾$7(b)$æ˜¾ç¤ºäº†å¯»æ‰¾å¹³é¢è´´ç‰‡(patch)ä½œä¸ºå¹³é¢ç‚¹å¯¹åº”çš„è¿‡ç¨‹ã€‚è®¾$ i$ ä¸º$\tilde{H}_{k+1}$ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œå³$i \in  \tilde{H}_{k+1}$ã€‚å¹³é¢è´´ç‰‡(patch)ç”±ä¸‰ä¸ªç‚¹è¡¨ç¤ºã€‚ä¸ä¸Šä¸€æ®µç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨$\overline{P}_k$ä¸­æ‰¾åˆ°$ i $çš„æœ€è¿‘é‚»ï¼Œè®°ä¸º$j$ã€‚ ç„¶åï¼Œæˆ‘ä»¬æ‰¾åˆ°å¦å¤–ä¸¤ä¸ªç‚¹ $l$ å’Œ$ m$ï¼Œä½œä¸º$ i $çš„æœ€è¿‘é‚»ï¼Œä¸€ä¸ªåœ¨$j $çš„åŒä¸€æ‰«æä¸­ï¼Œå¦ä¸€ä¸ªåœ¨ $j $çš„ä¸¤æ¬¡è¿ç»­æ‰«æä¸­ã€‚ è¿™ä¿è¯äº†ä¸‰ä¸ªç‚¹æ˜¯éå…±çº¿çš„ã€‚ ä¸ºäº†éªŒè¯ $j$ã€$l$å’Œ $m$ éƒ½æ˜¯å¹³é¢ç‚¹ï¼Œæˆ‘ä»¬æ ¹æ®$ (1) $å†æ¬¡æ£€æŸ¥å±€éƒ¨è¡¨é¢çš„å¹³æ»‘åº¦ã€‚</p>
<p>æ ¹æ®åŒ¹é…çš„åŸç†ï¼Œå¯ä»¥æ„é€ ä¼˜åŒ–é—®é¢˜ï¼šæ±‚è§£å˜æ¢å…³ç³»$T$ï¼Œä½¿è¾¹ç¼˜ç‚¹å’Œè¾¹ç¼˜çº¿è·ç¦»æœ€çŸ­ï¼Œå¹³é¢ç‚¹å’Œå¹³é¢è·ç¦»æœ€çŸ­</p>
<ul>
<li><p>$\tilde{X}^L_{(k+1,i)}$    ï¼šè¡¨ç¤º$iï¼Œ i \in \tilde{\xi}_{k+1}$åœ¨$\left\{L\right\}$ä¸­çš„åæ ‡;</p>
</li>
<li><p>$\overline{X}^L_{(k,j)}$ï¼šè¡¨ç¤º$jï¼Œ j \in \overline{P}_k$åœ¨$\left\{L\right\}$ä¸­çš„åæ ‡;</p>
</li>
<li><p>$\overline{X}^L_{(k,l)}$ï¼šè¡¨ç¤º$lï¼Œ l\in \overline{P}_k$åœ¨$\left\{L\right\}$ä¸­çš„åæ ‡;</p>
</li>
<li><p>$\overline{X}^L_{(k,m)}$ï¼šè¡¨ç¤º$mï¼Œ m\in \overline{P}_k$åœ¨$\left\{L\right\}$ä¸­çš„åæ ‡;</p>
</li>
</ul>
<h3 id="a-ç‚¹åˆ°çº¿çš„è·ç¦»"><a href="#a-ç‚¹åˆ°çº¿çš„è·ç¦»" class="headerlink" title="a.ç‚¹åˆ°çº¿çš„è·ç¦»"></a>a.ç‚¹åˆ°çº¿çš„è·ç¦»</h3><p>ä¸»è¦åŸç†æ˜¯åˆ©ç”¨â€œ<strong>ä¸¤å‘é‡å‰ç§¯çš„æ¨¡ç­‰äºä»¥è¿™ä¸¤ä¸ªå‘é‡ä¸ºè¾¹å½¢æˆçš„å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯</strong>â€è¿™æ¡å®šç†ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<script type="math/tex; mode=display">
S=ODÂ·AB=|\overrightarrow{OA}Ã—\overrightarrow {OB}|=|\overrightarrow{OA}|Â·|\overrightarrow{OB}|Â·sin\theta</script><p>å¦‚æœæˆ‘ä»¬éœ€è¦æ±‚é«˜ï¼š</p>
<script type="math/tex; mode=display">
OD = \frac{S}{|\overrightarrow{AB}|}=\frac{|\overrightarrow{OA}Ã—\overrightarrow {OB}|}{|\overrightarrow{AB}|}</script><p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220411204216656.png" alt="image-20220411204216656" style="zoom: 25%;" /></p>
<p>æ‰€ä»¥å¯¹äºï¼š</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220411204829280.png" alt="image-20220411204829280" style="zoom: 50%;" /></p>
<p>å¾—åˆ°ç‚¹åˆ°çº¿çš„è·ç¦»$d_\xi$ä¸ºï¼š</p>
<script type="math/tex; mode=display">
d_{\xi}=\frac{|(\tilde{X}^L_{(k+1,i)}-\overline{X}^L_{(k,j)})Ã—(\tilde{X}^L_{(k+1,i)}-\overline{X}^L_{(k,l)})|}
{|\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,l)}|}. \tag{2}</script><h3 id="b-ç‚¹åˆ°é¢çš„è·ç¦»"><a href="#b-ç‚¹åˆ°é¢çš„è·ç¦»" class="headerlink" title="b.ç‚¹åˆ°é¢çš„è·ç¦»"></a>b.ç‚¹åˆ°é¢çš„è·ç¦»</h3><p> ä¸»è¦åŸç†æ˜¯<strong>ç‚¹ä¸å¹³é¢å†…ä¸€ç‚¹å½¢æˆçš„å‘é‡ä¸è¯¥å¹³é¢çš„å•ä½æ³•å‘é‡çš„ç‚¹ç§¯çš„æ¨¡å³ä¸ºè¯¥ç‚¹åˆ°å¹³é¢çš„è·ç¦»</strong>ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220411210656962.png" alt="image-20220411210656962" style="zoom:50%;" /></p>
<script type="math/tex; mode=display">
d_\mathcal{H}=\frac
{\begin{vmatrix}
(\tilde{X}^L_{(k+1,i)}-\overline{X}^L_{(k,j)})Â·((\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,l)})Ã—(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,m)}))
\end{vmatrix}
}
{\begin{vmatrix}
(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,l)})Ã—(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,m)})
\end{vmatrix} }. \tag{3}</script><h1 id="â…¤-è¿åŠ¨ä¼°è®¡"><a href="#â…¤-è¿åŠ¨ä¼°è®¡" class="headerlink" title="â…¤.è¿åŠ¨ä¼°è®¡"></a>â…¤.è¿åŠ¨ä¼°è®¡</h1><h2 id="A-çº¿æ€§æ’å€¼"><a href="#A-çº¿æ€§æ’å€¼" class="headerlink" title="A.çº¿æ€§æ’å€¼"></a>A.çº¿æ€§æ’å€¼</h2><p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/Linear_interpolation.png" alt="Linear interpolation.png"></p>
<p>å‡è®¾æˆ‘ä»¬å·²çŸ¥åæ ‡ $(x_0,y_0)$ ä¸$(x_1,y_1)$ï¼Œè¦å¾—åˆ°$[x_0.x_1]$åŒºé—´å†…æŸä¸€ä½ç½® $x$ åœ¨ç›´çº¿ä¸Šçš„å€¼ã€‚æ ¹æ®å›¾ä¸­æ‰€ç¤ºï¼Œæˆ‘ä»¬å¾—åˆ°:</p>
<script type="math/tex; mode=display">
\frac{y-y_0}{x-x_0}=\frac{y_1-y_0}{x_1-x_0}</script><p>ç”±äº $x$å€¼å·²çŸ¥ï¼Œæ‰€ä»¥å¯ä»¥ä»å…¬å¼å¾—åˆ° $y $çš„å€¼:</p>
<script type="math/tex; mode=display">
y=y_0+\frac{y_1-y_0}{x_1-x_0}(x-x_0)</script><p>çº¿æ€§æ’å€¼ç»å¸¸ç”¨äºå·²çŸ¥å‡½æ•°$ f $åœ¨ä¸¤ç‚¹çš„å€¼è¦è¿‘ä¼¼è·å¾—å…¶å®ƒç‚¹æ•°å€¼çš„æ–¹æ³•ï¼Œè¿™ç§è¿‘ä¼¼æ–¹æ³•çš„è¯¯å·®å®šä¹‰ä¸º:</p>
<script type="math/tex; mode=display">
R_T=f(x)-p(x)</script><p>å…¶ä¸­ $p$ è¡¨ç¤ºä¸Šé¢å®šä¹‰çš„çº¿æ€§æ’å€¼å¤šé¡¹å¼</p>
<script type="math/tex; mode=display">
p(x)=f(x_0)+\frac{f(x_1)-f(x_0)}{x_1-x_0}(x-x_0). \tag{4}</script><p>æ ¹æ®ç½—å°”å®šç†ï¼Œæˆ‘ä»¬å¯ä»¥è¯æ˜ï¼šå¦‚æœ f æœ‰äºŒé˜¶è¿ç»­å¯¼æ•°ï¼Œé‚£ä¹ˆè¯¯å·®èŒƒå›´æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
|R_T|\leq \frac{(x_1-x_0)^2}{8}\underset{x_0\leq x\leq x_1}{max}|f^{\prime\prime}(x)|</script><h2 id="B-è¿åŠ¨ä¼°è®¡"><a href="#B-è¿åŠ¨ä¼°è®¡" class="headerlink" title="B.è¿åŠ¨ä¼°è®¡"></a>B.è¿åŠ¨ä¼°è®¡</h2><p>æ¿€å…‰é›·è¾¾è¿åŠ¨åœ¨æ‰«ææœŸé—´ä»¥<strong>æ’å®šçš„è§’é€Ÿåº¦å’Œçº¿é€Ÿåº¦å»ºæ¨¡</strong>ã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªæ‰«æä¸­å¯¹åœ¨ä¸åŒæ—¶é—´æ¥æ”¶åˆ°çš„ç‚¹è¿›è¡Œçº¿æ€§æ’å€¼ã€‚</p>
<p>å‡è®¾$t$æ˜¯å½“å‰çš„æ—¶é—´æˆ³ï¼Œ$t_{k+1}$æ˜¯æ‰«æ$k+1$çš„å¼€å§‹æ—¶é—´ã€‚</p>
<p>è®¾$T^L_{k+1}$ä¸º$[t_{k+1}, t]$ä¹‹é—´çš„æ¿€å…‰é›·è¾¾ä½å§¿å˜æ¢ã€‚$T^L_{k+1}$åŒ…å«$6$è‡ªç”±åº¦æ¿€å…‰é›·è¾¾çš„åˆšæ€§è¿åŠ¨ï¼Œ$T^L_{k+1} = [t_x, t_y, t_zï¼Œ Î¸_xï¼Œ Î¸_yï¼Œ Î¸_z]^T$ï¼Œå…¶ä¸­æˆ‘ä»¬ç”¨$T^L_{k+1}(1:3)$è¡¨ç¤º $t_x$ã€$t_y$å’Œ$t_z$ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯$\left\{L\right\}$æ²¿$x-$ã€$y-$å’Œ$z-$è½´çš„å¹³ç§»ï¼Œæˆ‘ä»¬ç”¨$T^L_{k+1}(4:6)$è¡¨ç¤º$Î¸_x$ã€$Î¸_y$å’Œ$Î¸_z$ï¼Œå®ƒä»¬æ˜¯æ—‹è½¬è§’åº¦ï¼Œéµå¾ªå³æ‰‹è§„åˆ™ã€‚</p>
<p>ç»™å®šç‚¹$iï¼Œi \in P_k$ï¼Œè®¾$t_i$ä¸ºå…¶æ—¶é—´æˆ³ï¼Œè®¾ä¸º$[t_{k+1}, t_i]$ä¹‹é—´çš„$T^L_{(k+1,i)}$ä½å§¿å˜æ¢ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220429100816545.png" alt="image-20220429100816545" style="zoom:67%;" /></p>
<p>$T^L_{(k+1,i)}$å¯ä»¥é€šè¿‡$T^L_{k+1}$çš„çº¿æ€§æ’å€¼å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align}
\frac{T^L_{(k+1,i)} }{t_i-t_{k+1} }&=\frac{ T^L_{k+1}}{t-t_{k+1} }.
\end{align}</script><p>æ•´ç†ä¸€ä¸‹å³ä¸ºè®ºæ–‡ä¸­çš„å…¬å¼:</p>
<script type="math/tex; mode=display">
T^L_{(k+1,i)}=\frac{t_i-t_{k+1} }{t-t_{k+1} }T^L_{k+1}. \tag{5}</script><p>ç”±å‰æ–‡ï¼šåœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œä½¿ç”¨å½“å‰ä¼°è®¡çš„å˜æ¢å°†$\xi_{k+1}$å’Œ$H_{k+1}$é‡æ–°æŠ•å½±åˆ°æ‰«æçš„å¼€å§‹ï¼Œè®°$\tilde{\xi}_{k+1}$å’Œ$\tilde{H}_{k+1}$ä¸ºé‡æŠ•å½±çš„ç‚¹é›†ã€‚ç”±äºæ¿€å…‰é›·è¾¾ä½å§¿çš„å˜åŒ–ï¼Œè®¾æ—‹è½¬çŸ©é˜µä¸º$R$ï¼Œå¹³ç§»å‘é‡$t=T^L_{(k+1,i)}(1:3)$æˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
X^L_{(k+1,i)}=R\tilde X^L_{(k+1,i)}+T^L_{(k+1,i)}(1:3). \tag{6}</script><p>ç”±ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼ï¼š</p>
<script type="math/tex; mode=display">
R=e^{\hat{w} \theta}=I + \hat{w}sin\theta+\hat{w}^2(1-cos\theta).\tag{7}</script><p>åœ¨ä¸Šå¼ä¸­ï¼Œ$Î¸$ä¸ºæ—‹è½¬çš„å¤§å°ï¼Œ</p>
<script type="math/tex; mode=display">
\theta = \parallel T^L_{(k+1,i)}(4:6) \parallel. \tag{8}</script><p>$w$æ˜¯è¡¨ç¤ºæ—‹è½¬æ–¹å‘çš„å•ä½å‘é‡ï¼Œ</p>
<script type="math/tex; mode=display">
w=\frac{T^L_{(k+1,i)}(4:6)}{\parallel T^L_{(k+1,i)}(4:6) \parallel}. \tag{9}</script><p>$\hat{w}$ä¸º$w$çš„æ–œå¯¹ç§°çŸ©é˜µ[25]ã€‚</p>
<p>å¿†$(2)$å’Œ$(3)$è®¡ç®—å±äº$\tilde \xi_{k+1} $ å’Œ$\tilde H_{k+1}$ çš„ç‚¹ä¹‹é—´çš„è·ç¦»åŠå…¶å¯¹åº”å…³ç³»ã€‚ç»“åˆ$(2)$å’Œ$(5)-(8)$ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡º$\xi_{k+1}$ä¸­çš„ä¸€ä¸ªè¾¹ç‚¹ä¸ç›¸åº”çš„è¾¹çº¿ä¹‹é—´çš„å‡ ä½•å…³ç³»ï¼Œ</p>
<script type="math/tex; mode=display">
f_{\xi}(X^L_{(k+1,i)},T^L_{k+1})=d_\xi,i\in \xi_{k+1}.\tag{10}</script><p>åˆ$(3)(5)-(8)$ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨$H_{k+1}$ä¸­çš„ä¸€ä¸ªå¹³é¢ç‚¹ä¸å¯¹åº”çš„å¹³é¢è´´ç‰‡(patch)å»ºç«‹å¦ä¸€ä¸ªå‡ ä½•å…³ç³»ï¼Œ</p>
<script type="math/tex; mode=display">
f_H(X^L_{(k+1,i)},T^L_{k+1})=d_H,i\in H_{k+1}.\tag{11}</script><p>æœ€åï¼Œæˆ‘ä»¬ç”¨<code>Levenberg-Marquardt</code>æ–¹æ³•[26]æ±‚è§£æ¿€å…‰é›·è¾¾è¿åŠ¨ã€‚å°†$\xi_{k+1}$å’Œ$H_{k+1}$ä¸­æ¯ä¸ªç‰¹å¾ç‚¹$(10)$å’Œ$(11)$å åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªéçº¿æ€§å‡½æ•°:</p>
<script type="math/tex; mode=display">
f(T^L_{k+1})=d,\tag{12}</script><p>å…¶ä¸­æ¯ä¸€è¡Œ$f$å¯¹åº”ä¸€ä¸ªç‰¹å¾ç‚¹ï¼Œ$d$åŒ…å«ç›¸åº”çš„è·ç¦»ã€‚æˆ‘ä»¬è®¡ç®—$f$å…³äº$T^L_{k+1}$çš„é›…å¯æ¯”çŸ©é˜µï¼Œè®°ä½œ$J$ï¼Œå…¶ä¸­$J =\partial f /\partial T^L_{k+1}$ã€‚ç„¶åï¼Œ$(12)$é€šè¿‡éçº¿æ€§è¿­ä»£ï¼Œä½¿$d$è¶‹è¿‘äº$0$ï¼Œ</p>
<script type="math/tex; mode=display">
T^L_{k+1}\gets T^L_{k+1}-(J^TJ+\lambda diag(J^TJ))^{-1}J^Td.\tag{13}</script><p>$\lambda$æ˜¯ç”±<code>Levenberg-Marquardt</code>æ–¹æ³•ç¡®å®šçš„å› å­</p>
<h2 id="C-é›…å¯æ¯”çŸ©é˜µæ±‚è§£"><a href="#C-é›…å¯æ¯”çŸ©é˜µæ±‚è§£" class="headerlink" title="C.é›…å¯æ¯”çŸ©é˜µæ±‚è§£"></a>C.é›…å¯æ¯”çŸ©é˜µæ±‚è§£</h2><p>LOAMä¸­ä»£ä»·å‡½æ•°ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå³ç‚¹åˆ°é¢çš„è·ç¦»ä¸ç‚¹åˆ°çº¿çš„è·ç¦»ï¼Œå› æ­¤LOAMçš„ä»£ä»·å‡½æ•°ä¸éš¾å†™å‡ºï¼š</p>
<script type="math/tex; mode=display">
loss= \sum^{N_{\xi} }_{i=1}d_{\xi_i}+\sum^{N_{H} }_{i=1}d_{H_i}=D(\tilde{X}^L_{(k+1,i)}).\tag{14}</script><blockquote>
<p>æˆ‘ä»¬çš„ç›®çš„å°±æ˜¯æ®‹å·®å¯¹ä½å§¿æ±‚åå¯¼ï¼Œè¿›è€Œæ±‚å¾—ä¸€ä¸ªä½¿å¾—æ®‹å·®æœ€å°çš„æœ€ä¼˜ä½å§¿ã€‚</p>
</blockquote>
<p>å®šä¹‰$t+1$æ—¶åˆ»çš„ä½å§¿ï¼š$T^L_{k+1} = [t_x, t_y, t_zï¼Œ Î¸_xï¼Œ Î¸_yï¼Œ Î¸_z]^T$ï¼Œå…¶ä¸­æˆ‘ä»¬ç”¨$t=T^L_{k+1}(1:3)=[t_x, t_y, t_z]^T$è¡¨ç¤ºä½ç§» $t_x$ã€$t_y$å’Œ$t_z$ï¼ŒåŒæ—¶$R$ä¹Ÿå¯ä»¥é€šè¿‡$T^L_{k+1}$ç»ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼æ±‚è§£ã€‚</p>
<p>ç‰¹å¾ç‚¹ä»å½“å‰é›·è¾¾åæ ‡ç³»æŠ•å½±åˆ°ç›®æ ‡åæ ‡ç³»ï¼š</p>
<script type="math/tex; mode=display">
\tilde X^L_{(k+1,i)}=R X^L_{(k+1,i)}+t=G(X^L_{(k+1,i)},T^L_{k+1})</script><blockquote>
<p>è¿™é‡Œä¸è®ºæ–‡ç•¥æœ‰ä¸åŒï¼Œè¿™é‡Œ$t_{k+1}$æ—¶åˆ»çš„ç‚¹ç»è¿‡ä½å§¿å˜åŒ–æŠ•å½±åˆ°$t_{k}$æ—¶åˆ»ï¼Œè¿›è€Œå°†ä¸¤å¸§çš„ç‚¹äº‘ç»Ÿä¸€åœ¨ä¸€ä¸ªåæ ‡ç³»ä¸‹ï¼Œè®ºæ–‡ä¸­æ˜¯ç›¸åçš„ï¼ˆå…¬å¼6ï¼‰ï¼Œä½†æ˜¯å«ä¹‰æ˜¯ä¸€æ ·çš„ã€‚</p>
</blockquote>
<p>å°†æ—‹çŸ©é˜µè½¬æ¢æˆæ¬§æ‹‰è§’ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
R &= R_yR_xR_z\\
&=
\begin{bmatrix}
c_yc_z+s_ys_xs_z &c_zs_ys_x-c_ys_z &c_xs_y\\
c_xs_z&c_xc_z&-s_x\\
c_ys_xs_z-c_zs_y&c_yc_zs_x+s_ys_z&c_yc_x
\end{bmatrix}
\end{align*}.\tag{15}</script><p>å…¶ä¸­$c_x=cos(\theta_x),c_y=cos(\theta_y),c_z=cos(\theta_z),s_x=sin(\theta_x),s_y=sin(\theta_y),s_z=sin(\theta_z)$</p>
<p>å°†$(14)(15)$åˆå¹¶ï¼š</p>
<script type="math/tex; mode=display">
loss=F(X^L_{(k+1,i)},T^L_{k+1})=D(G(X^L_{(k+1,i)},T^L_{k+1})).\tag{16}</script><p>æŸå¤±å‡½æ•°å»ºç«‹ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¼˜åŒ–ä½å§¿ï¼Œæ±‚æŸå¤±å¯¹äºä½å§¿çš„åå¯¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
J&=\frac{\partial F(X^L_{(k+1,i)},T^L_{k+1}) }{\partial T^L_{k+1} }\\
&=\frac{\partial D(G(X^L_{(k+1,i)},T^L_{k+1})) }{\partial T^L_{k+1} }\\
&=\frac{\partial D(\tilde{X}^L_{(k+1,i)})}{\partial \tilde{X}^L_{(k+1,i)} }Â·
\frac{\partial G(X^L_{(k+1,i)},T^L_{k+1})}{\partial T^L_{k+1} }
\end{align*}.
\tag{17}</script><p>æˆ‘ä»¬åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œæ¨å¯¼ï¼š</p>
<ul>
<li>$\frac{\partial D(\tilde{X}^L_{(k+1,i)})}{\partial \tilde{X}^L_{(k+1,i)} }$çš„æ±‚è§£</li>
</ul>
<p>è¿™éƒ¨åˆ†è¡¨ç¤ºçš„æ˜¯æŸå¤±å‡½æ•°å¯¹ç‚¹äº‘çš„åå¯¼ï¼Œè¿™éƒ¨åˆ†æ²¡æœ‰å¿…è¦é€šè¿‡å˜é‡æ±‚å¯¼çš„æ–¹å¼å»æ¨å¯¼ï¼Œæˆ‘ä»¬çŸ¥é“æ±‚åå¯¼å°±æ˜¯æ±‚æ¢¯åº¦æ–¹å‘ï¼Œæ¢¯åº¦æ–¹å‘å°±æ˜¯ä½¿å¾—æ®‹å·®å‡å°çš„æœ€å¿«çš„æ–¹å‘ï¼›å¯¹äºç‚¹äº‘æ¥è¯´ï¼Œæ®‹å·®å‡å°æœ€å¿«çš„æ–¹å‘å°±æ˜¯å‚ç›´äºç‰¹å¾åŒºåŸŸçš„æ–¹å‘ï¼š</p>
<p>â€‹    â‘ å¯¹äºçº¿ç‰¹å¾ï¼Œæ¢¯åº¦æ–¹å‘ä¸ºé€šè¿‡ç‰¹å¾ç‚¹çš„å‚ç›´äºç›´çº¿çš„æ–¹å‘ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial D(\tilde{X}^L_{(k+1,i)})}{\partial \tilde{X}^L_{(k+1,i)} }=[a_\xi,b_\xi,c_\xi]^T</script><p>â€‹    â‘¡å¯¹äºé¢ç‰¹å¾ï¼Œæ¢¯åº¦æ–¹å‘ä¸ºé€šè¿‡ç‰¹å¾ç‚¹çš„å‚ç›´äºå¹³é¢çš„æ–¹å‘ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial D(\tilde{X}^L_{(k+1,i)})}{\partial \tilde{X}^L_{(k+1,i)} }=[a_\mathcal{H},b_\mathcal{H},c_\mathcal{H}]^T</script><ul>
<li>$\frac{\partial G(X^L_{(k+1,i)},T^L_{k+1})}{\partial T^L_{k+1} }$çš„æ±‚è§£</li>
</ul>
<p>è¿™éƒ¨åˆ†è¡¨ç¤ºçš„æ˜¯ç‚¹äº‘å¯¹ä½å§¿çš„åå¯¼ï¼Œä¸»è¦æ˜¯å¯¹å¹³ç§»å’Œæ—‹è½¬çš„æ±‚å¯¼ï¼š</p>
<p>â€‹    â‘ å¯¹å¹³ç§»æ±‚å¯¼</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial G(X^L_{(k+1,i)},T^L_{k+1})}{\partial t_x}
=\frac{\partial G(R X^L_{(k+1,i)}+t)}{\partial t_x}
=\begin{bmatrix} 1\\0\\0 \end{bmatrix}
\end{align*}</script><script type="math/tex; mode=display">
\begin{align*}
\frac{\partial G(X^L_{(k+1,i)},T^L_{k+1})}{\partial t_y}
=\frac{\partial G(R X^L_{(k+1,i)}+t)}{\partial t_y}
=\begin{bmatrix} 0\\1\\0 \end{bmatrix}
\end{align*}</script><script type="math/tex; mode=display">
\begin{align*}
\frac{\partial G(X^L_{(k+1,i)},T^L_{k+1})}{\partial t_z}
=\frac{\partial G(R X^L_{(k+1,i)}+t)}{\partial t_z}
=\begin{bmatrix} 0\\0\\1 \end{bmatrix}
\end{align*}</script><p>â€‹    â‘¡å¯¹è§’åº¦æ±‚å¯¼</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial G(X^L_{(k+1,i)},T^L_{k+1})}{\partial \theta_x }
&=\frac{\partial G(R X^L_{(k+1,i)}+t)}{\partial \theta_x }
=\frac{\partial G(R X^L_{(k+1,i)})}{\partial \theta_x }\\
&=\begin{bmatrix}
s_yc_xs_z&c_zs_yc_x &-s_xs_y\\
-s_xs_z &-s_xc_z&-c_x\\
c_yc_xs_z&c_yc_zc_x&-c_ys_x
\end{bmatrix}
\begin{bmatrix}x_{(k+1,i)}\\y_{(k+1,i)}\\z_{(k+1,i)}\end{bmatrix}
\end{align*}</script><script type="math/tex; mode=display">
\begin{align*}
\frac{\partial G(X^L_{(k+1,i)},T^L_{k+1})}{\partial \theta_y }
&=\frac{\partial G(R X^L_{(k+1,i)}+t)}{\partial \theta_y }
=\frac{\partial G(R X^L_{(k+1,i)})}{\partial \theta_y }\\
&=\begin{bmatrix}
-s_yc_z+c_ys_xs_z&c_zc_ys_x+s_ys_z &c_xc_y\\0&0&0\\
-s_ys_xs_z-c_zc_y&-s_yc_zs_x+c_ys_z&-s_yc_x
\end{bmatrix}
\begin{bmatrix}x_{(k+1,i)}\\y_{(k+1,i)}\\z_{(k+1,i)}\end{bmatrix}
\end{align*}</script><script type="math/tex; mode=display">
\begin{align*}
\frac{\partial G(X^L_{(k+1,i)},T^L_{k+1})}{\partial \theta_z }
&=\frac{\partial G(R X^L_{(k+1,i)}+t)}{\partial \theta_z}
=\frac{\partial G(R X^L_{(k+1,i)})}{\partial \theta_z }\\
&=\begin{bmatrix}
-c_ys_z+s_ys_xc_z&-s_zs_ys_x &0\\
c_xc_z &-c_xs_z&0\\
c_ys_xc_z+s_zs_y&-c_ys_zs+s_yc_z&0
\end{bmatrix}
\begin{bmatrix}x_{(k+1,i)}\\y_{(k+1,i)}\\z_{(k+1,i)}\end{bmatrix}
\end{align*}</script><h1 id="â…¥-æ„å»ºåœ°å›¾"><a href="#â…¥-æ„å»ºåœ°å›¾" class="headerlink" title="â…¥.æ„å»ºåœ°å›¾"></a>â…¥.æ„å»ºåœ°å›¾</h1><h2 id="A-æ¦‚è§ˆ"><a href="#A-æ¦‚è§ˆ" class="headerlink" title="A.æ¦‚è§ˆ"></a>A.æ¦‚è§ˆ</h2><p><strong>â‘ ä¸ºä»€ä¹ˆä½¿ç”¨å»ºå›¾èŠ‚ç‚¹ï¼Ÿ</strong></p>
<p>é€šè¿‡å‰é¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬è®¡ç®—å‡ºäº†å¸§é—´çš„é‡Œç¨‹è®¡ï¼Œå¯ä»¥å¯¹æ¿€å…‰é›·è¾¾çš„è¿åŠ¨åšç²—ç•¥çš„ä¼°è®¡ï¼Œä½†æ˜¯ç”±äºæ”¶åˆ°å™ªå£°çš„å½±å“ï¼Œä½å§¿ä¼°è®¡å¹¶ä¸æ˜¯å‡†ç¡®ï¼Œç»è¿‡é•¿æ—¶é—´çš„ç´¯ç§¯æ¼‚ç§»ä¼šç›´æ¥å¯¼è‡´æœ€ç»ˆæ‹¼æ¥çš„åœ°å›¾ä¸æˆæ ·å­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¾é å…¶ä»–çš„æ–¹å¼å¯¹ä½å§¿è¿›è¡Œä¼°è®¡è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p>
<p>åœ¨SLAMé¢†åŸŸï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨ä¸åœ°å›¾åŒ¹é…çš„æ–¹å¼æ¥ä¼˜åŒ–è¿™ä¸€ç»“æœã€‚å…¶å®é“ç†ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å§‹ç»ˆè®¤ä¸ºåä¸€æ—¶åˆ»çš„è§‚æµ‹è¾ƒå‰ä¸€æ—¶åˆ»å¸¦æœ‰æ›´å¤šçš„è¯¯å·®ï¼Œæ¢è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬æ›´åŠ ä¿¡ä»»å‰ä¸€æ—¶åˆ»ç»“æœã€‚å› æ­¤æˆ‘ä»¬å¯¹å·²ç»æ„å»ºåœ°å›¾çš„ä¿¡ä»»ç¨‹åº¦è¿œé«˜äºä¸´å¸§ç‚¹äº‘é…å‡†åçš„Lidarè¿åŠ¨ä¼°è®¡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å·²æ„å»ºåœ°å›¾å¯¹ä½å§¿ä¼°è®¡ç»“æœè¿›è¡Œä¿®æ­£ã€‚</p>
<p>å› æ­¤å»ºå›¾çš„ä½œç”¨å°±æ˜¯ <span style="color:red;">ä¼˜åŒ–Lidaré‡Œç¨‹è®¡çš„ä½å§¿ä¼°è®¡ç»“æœ</span></p>
<p><strong>â‘¡å»ºå›¾èŠ‚ç‚¹å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</strong></p>
<p>å¦‚ä½•åˆ©ç”¨åœ°å›¾è¿›è¡Œä¼˜åŒ–å‘¢ï¼Ÿåœ¨æ–‡ç« çš„å¼€å§‹ï¼Œæˆ‘ä»¬å°±è¯´é‡Œç¨‹è®¡éƒ¨åˆ†æ˜¯é«˜é¢‘ç‡ä½ç²¾åº¦ï¼Œè€Œåœ°å›¾éƒ¨åˆ†æ˜¯ä½é¢‘ç‡é«˜ç²¾åº¦ï¼Œæ‰€ä»¥æ‰è¯´é‡Œç¨‹è®¡ä¼°è®¡çš„ä½å§¿ä»…ä»…æ˜¯ç²—ç•¥çš„ä¼°è®¡ï¼Œè€Œåˆ©ç”¨åœ°å›¾çš„ä¼˜åŒ–åˆ™æ˜¯é«˜ç²¾åº¦çš„ï¼Œä½†è€ƒè™‘èµ„æºæ¶ˆè€—ï¼Œæ‰€ä»¥è°ƒç”¨é¢‘ç‡ç›¸å¯¹äºé‡Œç¨‹è®¡çš„ååˆ†ä¹‹ä¸€ã€‚</p>
<ul>
<li><p>é¦–å…ˆï¼Œå‡è®¾æ¿€å…‰é›·è¾¾åœ¨ç¬¬ä¸€å¸§çš„æ—¶å€™å¾—åˆ°æ•°ä¸‡ä¸ªç‚¹äº‘ï¼Œæ­¤æ—¶Lidarçš„ä½ç½®æˆ‘ä»¬æŠŠå®ƒä½œä¸º$(0,0,0)$ï¼Œï¼ˆæ­¤æ—¶è®°é›·è¾¾ä½å§¿ä¸º$T^W_k$ï¼Œåœ°å›¾ $ Q_k$ï¼‰ï¼Œæ­¤æ—¶å¦‚æœä¸è€ƒè™‘æµ‹é‡è¯¯å·®ï¼Œåˆ™è¿™æ•°ä¸‡ä¸ªç‚¹éƒ½æ˜¯ç²¾ç¡®çš„ï¼Œæˆ‘ä»¬æŠŠè¿™æ•°ä¸‡ä¸ªç‚¹æ‰€æ„æˆçš„ç¯å¢ƒä½œä¸ºæ­¤æ—¶çš„åœ°å›¾ã€‚</p>
</li>
<li><p>ç„¶åï¼Œå‡å¦‚æ¿€å…‰é›·è¾¾è¿åŠ¨äº†ä¸€å°æ®µï¼Œå¾—åˆ°äº†ç¬¬äºŒå¸§çš„ç‚¹äº‘ï¼Œæˆ‘ä»¬é€šè¿‡æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡çš„æ–¹æ³•ä¼°è®¡äº†å¸§é—´çš„ç›¸å¯¹è¿åŠ¨ï¼ˆå°±æ˜¯$T^L_{k+1}$ï¼‰ï¼Œä½†æˆ‘ä»¬è¯´äº†é‡Œç¨‹è®¡çš„ä½å§¿ä¼°è®¡æ˜¯ä¸€ä¸ªç²—ç•¥çš„ã€ä½ç²¾åº¦çš„ã€é«˜é¢‘ç‡çš„ï¼Œå› æ­¤æˆ‘ä»¬åšä¸‹ä¸€æ­¥æ“ä½œã€‚</p>
</li>
<li>æœ€åï¼Œæˆ‘ä»¬åˆ©ç”¨é‡Œç¨‹è®¡å¾—åˆ°çš„ç²—ç•¥çš„ä½å§¿ä¼°è®¡ï¼ŒæŠŠç¬¬äºŒå¸§çš„ç‚¹äº‘è½¬æ¢åˆ°ç¬¬ä¸€å¸§ï¼ˆå»ºç«‹åœ°å›¾æ—¶çš„åæ ‡ç³»ï¼‰çš„åæ ‡ç³»ä¸‹ï¼Œå¾ˆæ˜¾ç„¶ï¼Œç”±äºé‡Œç¨‹è®¡ä¸å‡†ç¡®ï¼Œå°±ä¼šå¯¼è‡´åœ°å›¾æ‹¼æ­ªäº†ï¼ˆå°±æ˜¯è®ºæ–‡ä¸­çš„$ \overline{Q}_{k+1}$ï¼‰ï¼Œè€Œå»ºå›¾èŠ‚ç‚¹çš„ä½œç”¨å°±æ˜¯æŠŠæ­ªçš„åœ°å›¾æ‰¶æ­£åå®Œæ•´çš„æ‹¼ä¸Šå»ï¼Œè¿™å°±ä»å¦ä¸€ä¸ªè§’åº¦ä¼˜åŒ–çš„é›·è¾¾çš„ä½å§¿ã€‚</li>
</ul>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬è¦æ¸…æ¥šï¼Œæ‹¿å½“å‰çš„ç‚¹äº‘å’Œåœ°å›¾ä¸­æ‰€æœ‰çš„ç‚¹äº‘å»é…å‡†ï¼Œè¿™ä¸ªè®¡ç®—é‡ååˆ†å·¨å¤§ï¼Œæ¶ˆè€—ä¹Ÿéå¸¸å¤§ï¼Œä½†æ˜¯åˆè¦ä¿è¯ç®—æ³•çš„å®æ—¶æ€§ï¼Œæ‰€ä»¥è°ƒç”¨å»ºå›¾èŠ‚ç‚¹çš„é¢‘ç‡ä»…ä¸ºè°ƒç”¨é‡Œç¨‹è®¡èŠ‚ç‚¹é¢‘ç‡çš„ååˆ†ä¹‹ä¸€ã€‚</p>
<p><img src="/images/loamè®ºæ–‡æ·±åº¦è§£æ/image-20220416101236496.png" alt="image-20220416101236496"></p>
<p>å»ºå›¾è¿‡ç¨‹å¦‚å³å›¾ç¤ºæ„ã€‚ è“è‰²æ›²çº¿è¡¨ç¤ºåœ°å›¾ä¸Šçš„æ¿€å…‰é›·è¾¾ä½å§¿$T^W_k$ ï¼Œç”±å»ºå›¾ç®—æ³•åœ¨æ‰«æ $k $å¤„ç”Ÿæˆã€‚ æ©™è‰²æ›²çº¿è¡¨ç¤ºæ‰«æ $k + 1$æœŸé—´çš„æ¿€å…‰é›·è¾¾è¿åŠ¨$T^L_{k+1}$ï¼Œç”±é‡Œç¨‹è®¡ç®—æ³•è®¡ç®—å¾—å‡ºã€‚ ä½¿ç”¨$ T^W_k$å’Œ$T^L_{k+1}$ï¼Œå°†é‡Œç¨‹è®¡ç®—æ³•å‘å¸ƒçš„æœªå¤±çœŸç‚¹äº‘æŠ•å½±åˆ°åœ°å›¾ä¸Šï¼Œè¡¨ç¤ºä¸ºï¼ˆç»¿è‰²çº¿æ®µï¼‰$\overline{Q}_{k+1}$ï¼Œå¹¶ä¸åœ°å›¾ä¸Šç°æœ‰çš„äº‘$ Q_k$ï¼ˆé»‘è‰²çº¿æ®µï¼‰è¿›è¡ŒåŒ¹é…ã€‚</p>
<h2 id="B-åˆå¹¶åœ°å›¾ç‚¹"><a href="#B-åˆå¹¶åœ°å›¾ç‚¹" class="headerlink" title="B.åˆå¹¶åœ°å›¾ç‚¹"></a>B.åˆå¹¶åœ°å›¾ç‚¹</h2><p>åˆå¹¶åœ°å›¾ç‚¹å¹¶æ²¡æœ‰åœ¨è®ºæ–‡ä¸­æåŠï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­ä½“ç°å‡ºæ¥äº†ï¼Œå®ƒæ›´å¤šçš„æ˜¯ä¸€ç§å·¥ç¨‹å®éªŒçš„æ‰‹æ®µã€‚åœ¨ä¸Šæ–‡ï¼Œæˆ‘ä»¬çŸ¥é“ç¬¬äºŒå¸§çš„åœ°å›¾ç‚¹åœ¨å¾€ç¬¬ä¸€å¸§åšåŒ¹é…ç„¶åå»åˆå¹¶åˆ°ç¬¬ä¸€å¸§ï¼Œè¿™æ ·å°±èƒ½å¤Ÿå½¢æˆä¸€ä¸ªåœ°å›¾ï¼Œä½†æ˜¯åº”è¯¥å¦‚ä½•åˆå¹¶è¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>åˆå¹¶çš„è§„åˆ™ï¼šå°±æ˜¯æŠŠåœºæ™¯çœ‹æˆä¸€ä¸ªç«‹æ–¹ä½“ï¼Œç„¶ååˆ’åˆ†æˆä¸€å®šçš„å°ç½‘æ ¼ï¼Œå°†è½å…¥å°ç½‘æ ¼çš„ç‰¹å¾ç‚¹è¿›è¡Œåˆå¹¶ï¼Œç­‰ä¸‹ä¸€å¸§çš„ç‚¹äº‘è¿›æ¥çš„æ—¶å€™ï¼Œæ‰¾å¯¹åº”çš„æ …æ ¼å³å¯ã€‚</p>
<ul>
<li>æŠŠå…³é”®å¸§çš„ç‰¹å¾ç‚¹æŒ‰ç…§ä½å§¿è½¬åˆ°åœ°å›¾åæ ‡ç³»ä¸­</li>
<li>æŒ‰ç…§ä½ç½®å’Œ<code>cube</code>å°ºå¯¸åˆ’åˆ†åˆ°å¯¹åº”çš„<code>cube</code>ä¸­</li>
</ul>
<h2 id="C-ä¼˜åŒ–ä½å§¿"><a href="#C-ä¼˜åŒ–ä½å§¿" class="headerlink" title="C.ä¼˜åŒ–ä½å§¿"></a>C.ä¼˜åŒ–ä½å§¿</h2><p>ä¼˜åŒ–ä½å§¿ä¸é‡Œç¨‹è®¡ç›¸åŒã€‚</p>
<h1 id="â…¦-å‚è€ƒé“¾æ¥"><a href="#â…¦-å‚è€ƒé“¾æ¥" class="headerlink" title="â…¦.å‚è€ƒé“¾æ¥"></a>â…¦.å‚è€ƒé“¾æ¥</h1><p><a href="https://zhuanlan.zhihu.com/p/111388877/">LOAM-SLAMåŸç†æ·±åº¦è§£æ</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/260012025/">LOAM SLAMåŸç†ä¹‹è®ºæ–‡åŸç†è§£è¯»</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI5MTM1MTQwMw==&amp;mid=2247530490&amp;idx=1&amp;sn=7d1c84b1a4b338887d9c9061da1bd0e3&amp;chksm=ec13c9fedb6440e87aeec427609c2c8592590353565c307e6bd046b1f168af75918871b457b4&amp;scene=132#wechat_redirect">ã€æ³¡æ³¡ç‚¹äº‘æ—¶ç©ºLOAMä¸“é¢˜-3ã€‘LOAM ä»£ä»·å‡½æ•°è®¾è®¡ä¸é›…å¯æ¯”æ±‚è§£è¯¦ç»†æ¨å¯¼ï¼ˆä¸Šï¼‰</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/57351961">LOAMç»†èŠ‚åˆ†æ</a></p>
<p><a href="https://www.bilibili.com/video/BV1744y1J7ov/?spm_id_from=333.788.recommend_more_video.1">ä»»åŠ¡4 å‰ç«¯é‡Œç¨‹è®¡LOAMç³»åˆ—</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/29939195">LOAM:3Dæ¿€å…‰é‡Œç¨‹è®¡åŠç¯å¢ƒå»ºå›¾çš„æ–¹æ³•å’Œå®ç°ï¼ˆä¸‰ï¼‰</a></p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>æ¿€å…‰SLAM</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
        <tag>LOAM</tag>
      </tags>
  </entry>
  <entry>
    <title>LOAMè®ºæ–‡ç¿»è¯‘</title>
    <url>/posts/36439.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>LOAMæ˜¯Ji Zhangäº2014å¹´æå‡ºçš„ä½¿ç”¨æ¿€å…‰é›·è¾¾å®Œæˆå®šä½ä¸ä¸‰ç»´å»ºå›¾çš„ç®—æ³•ï¼Œå³Lidar Odometry and Mappingã€‚ä¹‹åè®¸å¤šæ¿€å…‰SLAMç®—æ³•å€Ÿé‰´äº†LOAMä¸­çš„ä¸€äº›æ€æƒ³ï¼Œå¯ä»¥è¯´å­¦ä¹ LOAMå¯¹å­¦ä¹ 3Dæ¿€å…‰SLAMå¾ˆæœ‰å¸®åŠ©ã€‚æœ¬æ–‡å¯¹LOAMåŸè®ºæ–‡è¿›è¡Œäº†ç¿»è¯‘ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§å®æ—¶é‡Œç¨‹æµ‹é‡å’Œåœ°å›¾ç»˜åˆ¶æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨$ 6$ è‡ªç”±åº¦ç§»åŠ¨çš„$ 2$ è½´æ¿€å…‰é›·è¾¾çš„è·ç¦»æµ‹é‡ã€‚è¿™ä¸ªé—®é¢˜å¾ˆéš¾è§£å†³ï¼Œå› ä¸ºè·ç¦»æµ‹é‡æ˜¯åœ¨ä¸åŒçš„æ—¶é—´æ¥æ”¶çš„ï¼Œè¿åŠ¨ä¼°è®¡ä¸­çš„é”™è¯¯å¯èƒ½ä¼šå¯¼è‡´ç»“æœç‚¹äº‘çš„é”™è¯¯é…å‡†ã€‚è¿„ä»Šä¸ºæ­¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¦»çº¿æ‰¹å¤„ç†æ–¹æ³•æ„å»ºè¿è´¯çš„ $3D$ åœ°å›¾ï¼Œé€šå¸¸ä½¿ç”¨å¾ªç¯é—­åˆæ¥æ ¡æ­£éšæ—¶é—´çš„æ¼‚ç§»ã€‚æˆ‘ä»¬çš„æ–¹æ³•å®ç°äº†ä½æ¼‚ç§»å’Œä½è®¡ç®—å¤æ‚åº¦ï¼Œæ— éœ€é«˜ç²¾åº¦æµ‹è·æˆ–æƒ¯æ€§æµ‹é‡ã€‚è·å¾—è¿™ä¸€æ€§èƒ½æ°´å¹³çš„å…³é”®æ€æƒ³æ˜¯é€šè¿‡ä¸¤ç§ç®—æ³•æ¥åˆ’åˆ†åŒæ—¶å®šä½å’Œå»ºå›¾çš„å¤æ‚é—®é¢˜ï¼Œè¯¥é—®é¢˜å¯»æ±‚åŒæ—¶ä¼˜åŒ–å¤§é‡å˜é‡ã€‚ä¸€ç§ç®—æ³•ä»¥é«˜é¢‘ä½†ä½ä¿çœŸåº¦è¿›è¡Œé‡Œç¨‹æµ‹é‡ï¼Œä»¥ä¼°è®¡æ¿€å…‰é›·è¾¾çš„é€Ÿåº¦ã€‚å¦ä¸€ç§ç®—æ³•ä»¥è¾ƒä½æ•°é‡çº§çš„é¢‘ç‡è¿è¡Œï¼Œç”¨äºç‚¹äº‘çš„ç²¾ç»†åŒ¹é…å’Œé…å‡†ã€‚è¿™ä¸¤ç§ç®—æ³•çš„ç»“åˆå…è®¸è¯¥æ–¹æ³•å®æ—¶å»ºå›¾ã€‚è¯¥æ–¹æ³•å·²é€šè¿‡å¤§é‡å®éªŒä»¥åŠ KITTI é‡Œç¨‹è®¡åŸºå‡†è¿›è¡Œäº†è¯„ä¼°ã€‚ç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•å¯ä»¥è¾¾åˆ°ç¦»çº¿æ‰¹å¤„ç†æ–¹æ³•çš„ç²¾åº¦æ°´å¹³ã€‚</p>
<h1 id="I-ä»‹ç»"><a href="#I-ä»‹ç»" class="headerlink" title="I. ä»‹ç»"></a>I. ä»‹ç»</h1><p>$3D$ å»ºå›¾ä»ç„¶æ˜¯ä¸€ç§æµè¡Œçš„æŠ€æœ¯ [1]â€“[3]ã€‚ä½¿ç”¨æ¿€å…‰é›·è¾¾è¿›è¡Œå»ºå›¾æ˜¯å¸¸è§çš„ï¼Œå› ä¸ºæ¿€å…‰é›·è¾¾å¯ä»¥æä¾›é«˜é¢‘èŒƒå›´æµ‹é‡ï¼Œæ— è®ºæµ‹é‡çš„è·ç¦»å¦‚ä½•ï¼Œè¯¯å·®éƒ½ç›¸å¯¹æ’å®šã€‚åœ¨æ¿€å…‰é›·è¾¾çš„å”¯ä¸€è¿åŠ¨æ˜¯æ—‹è½¬æ¿€å…‰æŸçš„æƒ…å†µä¸‹ï¼Œç‚¹äº‘çš„é…å‡†å¾ˆç®€å•ã€‚ç„¶è€Œï¼Œå¦‚æœæ¿€å…‰é›·è¾¾æœ¬èº«åœ¨è®¸å¤šç¯å¢ƒçš„åº”ç”¨ä¸­éƒ½åœ¨ç§»åŠ¨ï¼Œåˆ™ç²¾ç¡®å»ºå›¾éœ€è¦åœ¨è¿ç»­æ¿€å…‰æµ‹è·æœŸé—´äº†è§£æ¿€å…‰é›·è¾¾çš„ä½å§¿ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§å¸¸è§æ–¹æ³•æ˜¯ä½¿ç”¨ç‹¬ç«‹çš„ä½ç½®ä¼°è®¡(ä¾‹å¦‚é€šè¿‡GPS/INS)å°†æ¿€å…‰ç‚¹æ³¨å†Œåˆ°ä¸€ä¸ªå›ºå®šçš„åæ ‡ç³»ä¸­ã€‚å¦ä¸€ç»„æ–¹æ³•ä½¿ç”¨é‡Œç¨‹è®¡æµ‹é‡ï¼Œå¦‚ä»è½®ç¼–ç å™¨æˆ–è§†è§‰é‡Œç¨‹è®¡ç³»ç»Ÿ[4]ï¼Œ[5]è®°å½•æ¿€å…‰ç‚¹ã€‚ç”±äºé‡Œç¨‹è®¡é›†æˆäº†éšæ—¶é—´æ¨ç§»çš„å¾®å°å¢é‡è¿åŠ¨ï¼Œå®ƒå¿…ç„¶ä¼šå‘ç”Ÿæ¼‚ç§»ï¼Œå› æ­¤äººä»¬éå¸¸å…³æ³¨å¦‚ä½•å‡å°‘æ¼‚ç§»(ä¾‹å¦‚ä½¿ç”¨ç¯è·¯é—­åˆ)ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨$6$è‡ªç”±åº¦ç§»åŠ¨çš„$2$è½´æ¿€å…‰é›·è¾¾åˆ›å»ºä½æ¼‚ç§»é‡Œç¨‹è®¡åœ°å›¾çš„æƒ…å†µã€‚ä½¿ç”¨æ¿€å…‰é›·è¾¾çš„ä¸€ä¸ªå…³é”®ä¼˜åŠ¿æ˜¯å®ƒå¯¹åœºæ™¯ä¸­çš„ç¯å¢ƒå…‰çº¿å’Œå…‰å­¦çº¹ç†ä¸æ•æ„Ÿã€‚éšç€æ¿€å…‰é›·è¾¾çš„å‘å±•ï¼Œå®ƒä»¬çš„å°ºå¯¸å’Œé‡é‡ç¼©å°äº†å¾ˆå¤šã€‚æ¿€å…‰é›·è¾¾åœ¨äººæ‰‹æŒçš„æƒ…å†µä¸‹ç©¿è¶Šç¯å¢ƒ [6]ï¼Œä¹Ÿå¯ä»¥è¿æ¥åˆ°å¾®å‹é£è¡Œå™¨ [7]ã€‚ç”±äºæˆ‘ä»¬çš„æ–¹æ³•æ—¨åœ¨æ¨åŠ¨é‡Œç¨‹è®¡ä¼°è®¡ä¸­çš„æœ€å°åŒ–æ¼‚ç§»ç›¸å…³çš„é—®é¢˜ï¼Œå› æ­¤ç›®å‰ä¸æ¶‰åŠå›ç¯é—®é¢˜ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153023132.png" alt="image-20220410153023132"></p>
<blockquote>
<p>å›¾1æ‰€ç¤ºã€‚è¯¥æ–¹æ³•çš„ç›®æ ‡æ˜¯åˆ©ç”¨ç§»åŠ¨ä¸¤è½´æ¿€å…‰é›·è¾¾è¿›è¡Œè¿åŠ¨ä¼°è®¡å’Œå»ºå›¾ã€‚ç”±äºæ¥æ”¶æ¿€å…‰ç‚¹çš„æ—¶é—´ä¸åŒï¼Œæ¿€å…‰é›·è¾¾çš„è¿åŠ¨å¯¼è‡´ç‚¹äº‘å‡ºç°å¤±çœŸ(å¦‚å›¾å·¦ä¾§çš„æ¿€å…‰é›·è¾¾äº‘æ‰€ç¤º)ã€‚æˆ‘ä»¬æå‡ºçš„æ–¹æ³•æ˜¯å°†é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªå¹¶è¡Œè¿è¡Œçš„ç®—æ³•ã€‚é‡Œç¨‹è®¡ç®—æ³•ä¼°è®¡æ¿€å…‰é›·è¾¾çš„é€Ÿåº¦å’Œæ ¡æ­£ç‚¹äº‘ä¸­çš„å¤±çœŸï¼Œç„¶åå»ºå›¾ç®—æ³•åŒ¹é…å¹¶æ³¨å†Œç‚¹äº‘ä»¥åˆ›å»ºåœ°å›¾ã€‚ä¸¤ç§ç®—æ³•çš„ç»“åˆä¿è¯äº†é—®é¢˜çš„å®æ—¶å¯è¡Œæ€§ã€‚</p>
</blockquote>
<p>è¯¥æ–¹æ³•å®ç°äº†ä½æ¼‚ç§»å’Œä½è®¡ç®—å¤æ‚åº¦ï¼Œæ— éœ€é«˜ç²¾åº¦æµ‹è·æƒ¯æ€§æµ‹é‡ã€‚è·å¾—è¿™ä¸€æ€§èƒ½æ°´å¹³çš„å…³é”®æ€æƒ³æ˜¯ç”¨ä¸¤ç§ç®—æ³•å°†é€šå¸¸å¤æ‚çš„åŒæ—¶å®šä½ä¸å»ºå›¾(SLAM)[8]é—®é¢˜åˆ†å‰²å¼€æ¥ï¼Œè¯¥é—®é¢˜æ—¨åœ¨åŒæ—¶ä¼˜åŒ–å¤§é‡å˜é‡ã€‚å…¶ä¸­ä¸€ç§ç®—æ³•é‡‡ç”¨é«˜é¢‘ä½†ä¿çœŸåº¦è¾ƒä½çš„é‡Œç¨‹è®¡æ¥ä¼°è®¡æ¿€å…‰é›·è¾¾çš„é€Ÿåº¦ã€‚å¦ä¸€ç§ç®—æ³•ä»¥è¾ƒä½æ•°é‡çº§çš„é¢‘ç‡è¿è¡Œï¼Œç”¨äºç‚¹äº‘çš„ç²¾ç»†åŒ¹é…å’Œé…å‡†ã€‚è™½ç„¶æ²¡æœ‰å¿…è¦ï¼Œä½†å¦‚æœIMUå¯ç”¨ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªè¿åŠ¨å…ˆéªŒæ¥å¸®åŠ©æè¿°é«˜é¢‘è¿åŠ¨ã€‚ä¸¤ç§ç®—æ³•åˆ†åˆ«æå–å°–é”è¾¹ç¼˜å’Œå¹³é¢è¡¨é¢ä¸Šçš„ç‰¹å¾ç‚¹ï¼Œå¹¶å°†å…¶åˆ†åˆ«ä¸è¾¹ç¼˜çº¿æ®µå’Œå¹³é¢è¡¨é¢æ–‘å—è¿›è¡ŒåŒ¹é…ã€‚é‡Œç¨‹è®¡ç®—æ³•åœ¨ä¿è¯å¿«é€Ÿè®¡ç®—çš„å‰æä¸‹ï¼Œæ‰¾åˆ°ç‰¹å¾ç‚¹çš„å¯¹åº”å…³ç³»ã€‚åœ¨å»ºå›¾ç®—æ³•ä¸­ï¼Œé€šè¿‡ç›¸å…³ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡æ£€æŸ¥å±€éƒ¨ç‚¹ç°‡çš„å‡ ä½•åˆ†å¸ƒæ¥ç¡®å®šå¯¹åº”å…³ç³»ã€‚</p>
<p>é€šè¿‡å¯¹åŸé—®é¢˜çš„åˆ†è§£ï¼Œé¦–å…ˆè§£å†³äº†ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œå³åœ¨çº¿è¿åŠ¨ä¼°è®¡ã€‚ä¹‹åï¼Œå»ºå›¾ä½œä¸ºæ‰¹é‡ä¼˜åŒ–ï¼ˆç±»ä¼¼äºè¿­ä»£æœ€è¿‘ç‚¹ï¼ˆICPï¼‰æ–¹æ³• [9]ï¼‰è¿›è¡Œï¼Œä»¥ç”Ÿæˆé«˜ç²¾åº¦è¿åŠ¨ä¼°è®¡å’Œåœ°å›¾ã€‚å¹¶è¡Œç®—æ³•ç»“æ„ä¿è¯äº†é—®é¢˜å®æ—¶æ±‚è§£çš„å¯è¡Œæ€§ã€‚æ­¤å¤–ï¼Œç”±äºè¿åŠ¨ä¼°è®¡æ˜¯åœ¨æ›´é«˜çš„é¢‘ç‡ä¸‹è¿›è¡Œçš„ï¼Œå› æ­¤ç»™å»ºå›¾è¶³å¤Ÿçš„æ—¶é—´æ¥æé«˜ç²¾åº¦ã€‚å½“ä»¥è¾ƒä½çš„é¢‘ç‡è¿è¡Œæ—¶ï¼Œå»ºå›¾ç®—æ³•èƒ½å¤ŸåŒ…å«å¤§é‡çš„ç‰¹å¾ç‚¹ï¼Œå¹¶ä½¿ç”¨è¶³å¤Ÿå¤šçš„è¿­ä»£è¿›è¡Œæ”¶æ•›ã€‚</p>
<h1 id="II-ç›¸å…³å·¥ä½œ"><a href="#II-ç›¸å…³å·¥ä½œ" class="headerlink" title="II.ç›¸å…³å·¥ä½œ"></a>II.ç›¸å…³å·¥ä½œ</h1><p>æ¿€å…‰é›·è¾¾å·²ç»æˆä¸ºæœºå™¨äººå¯¼èˆªä¸­åº”ç”¨å¹¿æ³›çš„ä¼ æ„Ÿå™¨ [10]ã€‚å¯¹äºå®šä½å’Œå»ºå›¾ï¼Œå¤§å¤šæ•°éƒ½ä½¿ç”¨ $2D $æ¿€å…‰é›·è¾¾[11]ã€‚å½“æ¿€å…‰é›·è¾¾æ‰«æé€Ÿç‡è¿œé«˜äºå…¶å¤–éƒ¨è¿åŠ¨æ—¶ï¼Œæ‰«æä¸­çš„è¿åŠ¨å¤±çœŸé€šå¸¸å¯ä»¥å¿½ç•¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ ‡å‡†$ICP $æ–¹æ³•[12] å¯ç”¨äºåŒ¹é…ä¸åŒæ‰«æä¹‹é—´çš„æ¿€å…‰æ•°æ®ã€‚æ­¤å¤–ï¼Œæå‡ºäº†ä¸€ç§ä¸¤æ­¥æ³•æ¥æ¶ˆé™¤å¤±çœŸ[13]:åŸºäº$ICP$çš„é€Ÿåº¦ä¼°è®¡æ­¥éª¤ï¼Œç„¶åä½¿ç”¨è®¡ç®—çš„é€Ÿåº¦è¿›è¡Œå¤±çœŸè¡¥å¿æ­¥éª¤ã€‚ç±»ä¼¼çš„æŠ€æœ¯ä¹Ÿç”¨äºè¡¥å¿å•è½´ $3D$æ¿€å…‰é›·è¾¾å¼•å…¥çš„å¤±çœŸ[14]ã€‚ç„¶è€Œï¼Œå¦‚æœæ‰«æè¿åŠ¨ç›¸å¯¹ç¼“æ…¢ï¼Œåˆ™è¿åŠ¨å¤±çœŸå¯èƒ½ä¸¥é‡ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨ä¸¤è½´æ¿€å…‰é›·è¾¾ï¼Œå› ä¸ºä¸€ä¸ªè½´é€šå¸¸æ¯”å¦ä¸€ä¸ªè½´æ…¢å¾—å¤šã€‚é€šå¸¸ï¼Œå…¶ä»–ä¼ æ„Ÿå™¨ç”¨äºæä¾›é€Ÿåº¦æµ‹é‡ï¼Œé€šè¿‡è¿™äº›æµ‹é‡ï¼Œå¯ä»¥æ¶ˆé™¤è¿åŠ¨å¤±çœŸã€‚ä¾‹å¦‚ï¼Œæ¿€å…‰é›·è¾¾ç‚¹äº‘å¯ä»¥é€šè¿‡ä¸ IMU[15] é›†æˆçš„è§†è§‰é‡Œç¨‹è®¡çš„çŠ¶æ€ä¼°è®¡æ¥æ³¨å†Œã€‚å½“å¤šä¸ªä¼ æ„Ÿå™¨ï¼ˆå¦‚ GPS/INS å’Œè½¦è½®ç¼–ç å™¨ï¼‰åŒæ—¶å¯ç”¨æ—¶ï¼Œé—®é¢˜é€šå¸¸é€šè¿‡æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨[16] æˆ–ç²’å­æ»¤æ³¢å™¨ [1] è§£å†³ã€‚è¿™äº›æ–¹æ³•å¯ä»¥å®ç°å®æ—¶å»ºå›¾ï¼Œä»¥è¾…åŠ©æœºå™¨äººå¯¼èˆªä¸­çš„è·¯å¾„è§„åˆ’å’Œé¿éšœã€‚</p>
<p>å¦‚æœåœ¨ä¸å€ŸåŠ©å…¶ä»–ä¼ æ„Ÿå™¨çš„æƒ…å†µä¸‹ä½¿ç”¨åŒè½´æ¿€å…‰é›·è¾¾ï¼Œè¿åŠ¨ä¼°è®¡å’Œå¤±çœŸæ ¡æ­£å°†æˆä¸ºä¸€ä¸ªé—®é¢˜ã€‚Barfoot ç­‰äººä½¿ç”¨çš„ä¸€ç§æ–¹æ³•æ˜¯ä»è¿”å›æ¿€å…‰å¼ºåº¦åˆ›å»ºè§†è§‰å›¾åƒï¼Œå¹¶åœ¨å›¾åƒä¹‹é—´åŒ¹é…è§†è§‰ä¸Šä¸åŒçš„ç‰¹å¾ [17]ï¼Œä»¥æ¢å¤åœ°é¢è½¦è¾†çš„è¿åŠ¨[18]â€“[21]ã€‚åœ¨[18]ã€[19] ä¸­ï¼Œè½¦è¾†è¿åŠ¨è¢«å»ºæ¨¡ä¸ºæ’å®šé€Ÿåº¦ï¼Œåœ¨ [20]ã€[21] ä¸­ï¼Œè½¦è¾†è¿åŠ¨è¢«å»ºæ¨¡ä¸ºé«˜æ–¯è¿‡ç¨‹ã€‚æˆ‘ä»¬çš„æ–¹æ³•ä½¿ç”¨äº†ä¸ [18]ã€[19] ä¸­ç±»ä¼¼çš„é‡Œç¨‹è®¡ç®—æ³•çº¿æ€§è¿åŠ¨æ¨¡å‹ï¼Œä½†å…·æœ‰ä¸åŒç±»å‹çš„ç‰¹å¾ã€‚æ–¹æ³• [18]â€“[21] æ¶‰åŠå¼ºåº¦å›¾åƒçš„è§†è§‰ç‰¹å¾ï¼Œéœ€è¦ç¨ å¯†ç‚¹äº‘ã€‚è¯¥æ–¹æ³•åœ¨ç¬›å¡å°”ç©ºé—´ä¸­æå–å’ŒåŒ¹é…å‡ ä½•ç‰¹å¾ï¼Œå¯¹ç‚¹äº‘å¯†åº¦è¦æ±‚è¾ƒä½ã€‚æœ€æ¥è¿‘æˆ‘ä»¬çš„æ–¹æ³•æ˜¯Bosseå’ŒZlotçš„[3]ã€[6]ã€[22]ã€‚åˆ©ç”¨ä¸¤è½´æ¿€å…‰é›·è¾¾è·å–ç‚¹äº‘ï¼Œé€šè¿‡åŒ¹é…å±€éƒ¨ç‚¹ç°‡[22]çš„å‡ ä½•ç»“æ„è¿›è¡Œé…å‡†ã€‚æ­¤å¤–ï¼Œä»–ä»¬ä½¿ç”¨å¤šä¸ª 2 è½´æ¿€å…‰é›·è¾¾ç»˜åˆ¶åœ°ä¸‹çŸ¿äº•åœ°å›¾ [3]ã€‚æ­¤æ–¹æ³•èåˆäº† IMUï¼Œå¹¶ä½¿ç”¨å›ç¯æ£€æµ‹æ„å»ºå¤§å‹åœ°å›¾ã€‚ç”±åŒä¸€ä½œè€…æå‡ºçš„Zebedeeæ˜¯ä¸€ä¸ªç”±2Dæ¿€å…‰é›·è¾¾å’ŒIMUç»„æˆçš„å»ºå›¾è®¾å¤‡ï¼ŒIMUé€šè¿‡å¼¹ç°§[6]è¿æ¥åˆ°æ‰‹æ†ä¸Šã€‚é€šè¿‡æ‰‹åŠ¨æ“ä½œè£…ç½®è¿›è¡Œå»ºå›¾ã€‚é‡‡ç”¨æ‰¹é‡ä¼˜åŒ–æ–¹æ³•å¯¹åˆ†æ®µæ•°æ®é›†è¿›è¡Œå¤„ç†ï¼Œå¹¶åœ¨åˆ†æ®µæ•°æ®é›†ä¹‹é—´æ·»åŠ è¾¹ç•Œçº¦æŸã€‚è¯¥æ–¹æ³•åˆ©ç”¨IMUçš„æµ‹é‡å€¼å¯¹æ¿€å…‰ç‚¹è¿›è¡Œé…å‡†ï¼Œå¹¶é€šè¿‡ä¼˜åŒ–æ¥æ ¡æ­£IMUçš„åå·®ã€‚ä»æœ¬è´¨ä¸Šè¯´ï¼ŒBosseå’ŒZlotçš„æ–¹æ³•éœ€è¦æ‰¹å¤„ç†æ¥å¼€å‘ç²¾ç¡®çš„åœ°å›¾ï¼Œå› æ­¤ä¸é€‚ç”¨äºéœ€è¦å®æ—¶åœ°å›¾çš„åº”ç”¨ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¯¥æ–¹æ³•åœ¨å®æ—¶ç”Ÿæˆçš„åœ°å›¾åœ¨å®šæ€§ä¸Šä¸Bosseå’ŒZlotçš„æ–¹æ³•ç›¸ä¼¼ã€‚åŒºåˆ«åœ¨äºï¼Œæˆ‘ä»¬çš„æ–¹æ³•å¯ä»¥ä¸ºè‡ªåŠ¨é©¾é©¶æ±½è½¦çš„å¼•å¯¼æä¾›è¿åŠ¨ä¼°è®¡ã€‚æ­¤å¤–ï¼Œè¯¥æ–¹æ³•åˆ©ç”¨äº†æ¿€å…‰é›·è¾¾æ‰«ææ¨¡å¼å’Œç‚¹äº‘åˆ†å¸ƒã€‚åœ¨é‡Œç¨‹è®¡å’Œå»ºå›¾ç®—æ³•ä¸­ï¼Œåˆ†åˆ«å®ç°äº†ä¿è¯è®¡ç®—é€Ÿåº¦å’Œç²¾åº¦çš„ç‰¹å¾åŒ¹é…ã€‚</p>
<h1 id="III-ç¬¦å·å’Œä»»åŠ¡æè¿°"><a href="#III-ç¬¦å·å’Œä»»åŠ¡æè¿°" class="headerlink" title="III.ç¬¦å·å’Œä»»åŠ¡æè¿°"></a>III.ç¬¦å·å’Œä»»åŠ¡æè¿°</h1><p>æœ¬æ–‡æ‰€è¦è§£å†³çš„é—®é¢˜æ˜¯åˆ©ç”¨ä¸‰ç»´æ¿€å…‰é›·è¾¾æ„ŸçŸ¥çš„ç‚¹äº‘è¿›è¡Œè‡ªåŠ¨ä¼°è®¡ï¼Œå¹¶å»ºç«‹æ‰€ç»è¿‡ç¯å¢ƒçš„åœ°å›¾ã€‚æˆ‘ä»¬å‡è®¾æ¿€å…‰é›·è¾¾æ˜¯é¢„å…ˆæ ¡å‡†çš„ã€‚æˆ‘ä»¬è¿˜å‡è®¾æ¿€å…‰é›·è¾¾çš„è§’é€Ÿåº¦å’Œçº¿é€Ÿåº¦éšæ—¶é—´çš„å˜åŒ–æ˜¯å¹³æ»‘å’Œè¿ç»­çš„ï¼Œæ²¡æœ‰çªå˜ã€‚ç¬¬äºŒä¸ªå‡è®¾å°†åœ¨ç¬¬VII-BèŠ‚ä¸­é€šè¿‡ä½¿ç”¨IMUæ¥é‡Šæ”¾ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯ç”¨å¤§å†™å³æ ‡æ¥è¡¨ç¤ºåæ ‡ç³»ã€‚æˆ‘ä»¬å®šä¹‰æ‰«æ(a sweep)ä¸ºæ¿€å…‰é›·è¾¾å®Œæˆä¸€æ¬¡æ‰«æè¦†ç›–ï¼Œæˆ‘ä»¬ä½¿ç”¨æ­£ç¡®çš„è®¢é˜…$k,k\in Z^+$è¡¨ç¤ºæ‰«æï¼Œ$P_k$è¡¨ç¤ºæ‰«æä¸º$k$æ—¶æ„ŸçŸ¥çš„ç‚¹äº‘ã€‚è®©æˆ‘ä»¬å¦‚ä¸‹å®šä¹‰ä¸¤ä¸ªåæ ‡ç³»ã€‚</p>
<ul>
<li><p>æ¿€å…‰é›·è¾¾åæ ‡ç³»$\left\{L\right\}$æ˜¯ä¸€ä¸ªä»¥æ¿€å…‰é›·è¾¾å‡ ä½•ä¸­å¿ƒä¸ºåŸç‚¹çš„ä¸‰ç»´åæ ‡ç³»ã€‚$x$è½´æ˜¯å‘å·¦çš„ï¼Œ$y$è½´æ˜¯å‘ä¸Šçš„ï¼Œ$z$è½´æ˜¯å‘å‰çš„ã€‚ç‚¹$i, i\in P_k$åœ¨$\left\{L\right\}$ä¸­çš„åæ ‡è¡¨ç¤ºä¸º$X^L_{(k,i)}$ã€‚</p>
</li>
<li><p>ä¸–ç•Œåæ ‡ç³»$\left\{W\right\}$æ˜¯åœ¨åˆå§‹ä½ç½®ä¸$\left\{L\right\}$é‡åˆçš„ä¸‰ç»´åæ ‡ç³»ã€‚ç‚¹$i, i\in P_k$åœ¨$\left\{W\right\}$ä¸­çš„åæ ‡ä¸º$X^W_{(k,i)}$ã€‚</p>
</li>
</ul>
<p>æœ‰äº†å‡è®¾å’Œç¬¦å·ï¼Œæˆ‘ä»¬çš„æ¿€å…‰é›·è¾¾é‡Œç¨‹æµ‹é‡å’Œå»ºå›¾é—®é¢˜å¯ä»¥å®šä¹‰ä¸º:</p>
<p>â€‹    <strong>é—®é¢˜:</strong>ç»™å®šä¸€ä¸ªæ¿€å…‰é›·è¾¾äº‘åºåˆ—$i, i\in P_k$ï¼Œè®¡ç®—æ¯æ¬¡æ‰«æ$k$æ—¶æ¿€å…‰é›·è¾¾çš„å¸§é—´è¿åŠ¨(ego-motion)ï¼Œç”¨$P_k$æ„å»ºéå†ç¯å¢ƒçš„åœ°å›¾ã€‚</p>
<h1 id="IV-ç³»ç»Ÿæ€»è§ˆ"><a href="#IV-ç³»ç»Ÿæ€»è§ˆ" class="headerlink" title="IV.ç³»ç»Ÿæ€»è§ˆ"></a>IV.ç³»ç»Ÿæ€»è§ˆ</h1><h2 id="A-æ¿€å…‰é›·è¾¾ç¡¬ä»¶"><a href="#A-æ¿€å…‰é›·è¾¾ç¡¬ä»¶" class="headerlink" title="A.æ¿€å…‰é›·è¾¾ç¡¬ä»¶"></a>A.æ¿€å…‰é›·è¾¾ç¡¬ä»¶</h2><p>æœ¬æ–‡çš„ç ”ç©¶æ˜¯åœ¨åŸºäºHokuyo UTM-30LXæ¿€å…‰æ‰«æä»ªçš„å®šåˆ¶3Dæ¿€å…‰é›·è¾¾ä¸Šè¿›è¡ŒéªŒè¯çš„ï¼Œä½†å¹¶ä¸é™äºæ­¤ã€‚é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»æ¿€å…‰é›·è¾¾æ”¶é›†çš„æ•°æ®æ¥è¯´æ˜è¯¥æ–¹æ³•ã€‚è¯¥æ¿€å…‰æ‰«æä»ªçš„è§†åœºä¸º$180^â—¦$ï¼Œåˆ†è¾¨ç‡ä¸º$0.25^â—¦$ä»¥åŠ$40$è¡Œ/ç§’æ‰«æé€Ÿç‡ã€‚æ‰€è¿°æ¿€å…‰æ‰«æä»ªä¸ç”µæœºç›¸è¿ï¼Œç”µæœºè¢«æ§åˆ¶ä»¥$180^â—¦/s$çš„è§’é€Ÿåº¦æ—‹è½¬ï¼Œåœ¨$âˆ’90^â—¦$å’Œ$90^â—¦$ä¹‹é—´ï¼Œæ¿€å…‰æ‰«æä»ªçš„æ°´å¹³æ–¹å‘ä¸ºé›¶ã€‚å¯¹äºè¿™ä¸ªç‰¹å®šçš„å•ä½ï¼Œæ‰«ææ˜¯ä»$âˆ’90^â—¦$æ—‹è½¬åˆ°$90^â—¦$æˆ–åœ¨ç›¸åçš„æ–¹å‘(æŒç»­1ç§’)ã€‚è¿™é‡Œï¼Œè¯·æ³¨æ„ï¼Œå¯¹äºä¸€ä¸ªè¿ç»­æ—‹è½¬çš„æ¿€å…‰é›·è¾¾ï¼Œæ‰«æåªæ˜¯ä¸€ä¸ªç®€å•çš„åŠçƒé¢æ—‹è½¬ã€‚æ¿è½½ç¼–ç å™¨ä»¥$0.25^â—¦$çš„åˆ†è¾¨ç‡æµ‹é‡ç”µæœºæ—‹è½¬è§’åº¦ï¼Œåˆ©ç”¨è¯¥åˆ†è¾¨ç‡å°†æ¿€å…‰ç‚¹æŠ•å½±åˆ°æ¿€å…‰é›·è¾¾åæ ‡$\left\{L\right\}$ä¸­ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153045839.png" alt="image-20220410153045839" style="zoom:33%;" /></p>
<blockquote>
<p> å›¾$2$æ‰€ç¤ºã€‚ä¸‰ç»´æ¿€å…‰é›·è¾¾åœ¨æœ¬ç ”ç©¶ä¸­ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªç”±é©¬è¾¾é©±åŠ¨æ—‹è½¬è¿åŠ¨çš„Hokuyoæ¿€å…‰æ‰«æä»ªï¼Œä»¥åŠä¸€ä¸ªæµ‹é‡æ—‹è½¬è§’åº¦çš„ç¼–ç å™¨ã€‚è¯¥æ¿€å…‰æ‰«æä»ªçš„è§†åœºä¸º$180^â—¦$çš„åˆ†è¾¨ç‡ä¸º$0.25^â—¦$ã€‚æ‰«æé€Ÿåº¦ä¸º$40$è¡Œ/ç§’ã€‚ç”µæœºè¢«æ§åˆ¶ä»$âˆ’90^â—¦$æ—‹è½¬åˆ°$90^â—¦$ä¸æ¿€å…‰æ‰«æä»ªçš„æ°´å¹³æ–¹å‘ä¸ºé›¶ã€‚</p>
</blockquote>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153142890.png" alt="image-20220410153142890"></p>
<blockquote>
<p>å›¾$3$æ‰€ç¤ºã€‚æ¿€å…‰é›·è¾¾æµ‹ç¨‹ä¸å»ºå›¾è½¯ä»¶ç³»ç»Ÿæ¡†å›¾ã€‚</p>
</blockquote>
<h2 id="B-è½¯ä»¶ç³»ç»Ÿæ¦‚è¿°"><a href="#B-è½¯ä»¶ç³»ç»Ÿæ¦‚è¿°" class="headerlink" title="B.è½¯ä»¶ç³»ç»Ÿæ¦‚è¿°"></a>B.è½¯ä»¶ç³»ç»Ÿæ¦‚è¿°</h2><p>å›¾$3$æ˜¾ç¤ºäº†è½¯ä»¶ç³»ç»Ÿçš„ç¤ºæ„å›¾ã€‚è®¾$\hat{P}$ä¸ºæ¿€å…‰æ‰«ææ¥æ”¶åˆ°çš„ç‚¹ã€‚åœ¨æ¯æ¬¡æ‰«ææœŸé—´ï¼Œ$\hat{P}$åœ¨$\left\{L\right\}$ä¸­æ³¨å†Œã€‚æ‰«æ$k$æ—¶åˆå¹¶çš„ç‚¹äº‘å½¢æˆ$P_k$ï¼Œç„¶åç”¨ä¸¤ç§ç®—æ³•å¤„ç†$P_k$ã€‚æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡å–ç‚¹äº‘å¹¶è®¡ç®—æ¿€å…‰é›·è¾¾åœ¨ä¸¤æ¬¡è¿ç»­æ‰«æä¹‹é—´çš„è¿åŠ¨ã€‚åœ¨$P_k$ä¸­ä½¿ç”¨ä¼°è®¡çš„è¿åŠ¨æ¥æ ¡æ­£å¤±çœŸï¼Œç®—æ³•è¿è¡Œåœ¨$10Hz$å·¦å³çš„é¢‘ç‡ã€‚æ¿€å…‰é›·è¾¾å»ºå›¾è¿›ä¸€æ­¥å¤„ç†è¾“å‡ºï¼Œä»¥$1Hz$çš„é¢‘ç‡åŒ¹é…å¹¶å°†æœªå¤±çœŸçš„äº‘æ³¨å†Œåˆ°åœ°å›¾ä¸Šã€‚æœ€åï¼Œå°†ä¸¤ç§ç®—æ³•å‘å¸ƒçš„ä½å§¿å˜æ¢é›†æˆåœ¨ä¸€èµ·ï¼Œç”Ÿæˆä¸€ä¸ªå…³äºæ¿€å…‰é›·è¾¾ç›¸å¯¹äºåœ°å›¾çš„ä½å§¿çš„çº¦$10Hz$çš„å˜æ¢è¾“å‡ºã€‚ç¬¬Vã€VIèŠ‚è¯¦ç»†ä»‹ç»äº†è½¯ä»¶æ¡†å›¾ä¸­çš„æ¨¡å—</p>
<h1 id="V-æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡"><a href="#V-æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡" class="headerlink" title="V.æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡"></a>V.æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡</h1><h2 id="A-ç‰¹å¾ç‚¹æå–"><a href="#A-ç‰¹å¾ç‚¹æå–" class="headerlink" title="A.ç‰¹å¾ç‚¹æå–"></a>A.ç‰¹å¾ç‚¹æå–</h2><p>æˆ‘ä»¬é¦–å…ˆä»æ¿€å…‰é›·è¾¾äº‘$P_k$ä¸­æå–ç‰¹å¾ç‚¹ï¼Œå¦‚å›¾$3$æ‰€ç¤ºçš„æ¿€å…‰é›·è¾¾åœ¨$P_k$ä¸­è‡ªç„¶åœ°äº§ç”Ÿäº†åˆ†å¸ƒä¸å‡åŒ€çš„ç‚¹ã€‚åœ¨ä¸€ä¸ªæ‰«æä¸­ï¼Œä»æ¿€å…‰æ‰«æä»ªè¿”å›çš„åˆ†è¾¨ç‡ä¸º$0.25^â—¦$ï¼Œè¿™äº›ç‚¹ä½äºæ‰«æå¹³é¢ä¸Šã€‚ç„¶è€Œï¼Œå½“æ¿€å…‰æ‰«æä»ªä»¥$180^â—¦/s$çš„è§’é€Ÿåº¦æ—‹è½¬ï¼Œå¹¶äº§ç”Ÿ40Hzçš„æ‰«æï¼Œåœ¨å‚ç›´æ–¹å‘çš„æ‰«æå¹³é¢çš„åˆ†è¾¨ç‡æ˜¯$180^â—¦/40 = 4.5^â—¦$ã€‚è€ƒè™‘åˆ°è¿™ä¸€äº‹å®ï¼Œåœ¨$P_k$ä¸­æå–ç‰¹å¾ç‚¹æ—¶ï¼Œä»…ä½¿ç”¨å•ä¸ªæ‰«æçš„ä¿¡æ¯ï¼Œä¸”å…·æœ‰å…±é¢å‡ ä½•å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬é€‰æ‹©å°–é”è¾¹ç¼˜ä¸Šçš„ç‰¹å¾ç‚¹å’Œå¹³é¢è¡¨é¢çš„ç‰¹å¾ç‚¹ã€‚è®¾$i$æ˜¯$P_k$ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œ$i\in P_k$ï¼Œè®¾$S$æ˜¯æ¿€å…‰æ‰«æä»ªåœ¨åŒä¸€æ¬¡æ‰«æä¸­è¿”å›çš„$i$çš„è¿ç»­ç‚¹çš„é›†åˆã€‚ç”±äºæ¿€å…‰æ‰«æå™¨ä»¥$CW$æˆ–$CCW$é¡ºåºç”Ÿæˆç‚¹è¿”å›ï¼Œ$S$åŒ…å«ä¸€åŠä½äº$i$å’Œä¸¤ç‚¹ä¹‹é—´$0.25^â—¦$é—´éš”çš„æ¯ä¸€è¾¹ä¸Šçš„ç‚¹ã€‚å®šä¹‰ä¸€ä¸ªæœ¯è¯­æ¥è¯„ä¼°å±€éƒ¨è¡¨é¢çš„å¹³æ»‘åº¦ï¼Œ</p>
<script type="math/tex; mode=display">
c=\frac{1}{|S|Â·\parallel X^L_{(k,i)}\parallel} \sum_{j\in S,j\ne i} \parallel (X^L_{(k,i)}-X^L_{(k,j)}) \parallel \tag{1}</script><p>æ ¹æ®$c$å€¼å¯¹æ‰«æä¸­çš„ç‚¹è¿›è¡Œæ’åºï¼Œé€‰æ‹©$c$å€¼æœ€å¤§çš„ç‚¹ä¸ºè¾¹ç¼˜ç‚¹ï¼Œ$c$å€¼æœ€å°çš„ç‚¹ä¸ºå¹³é¢ç‚¹çš„ç‰¹å¾ç‚¹ã€‚ä¸ºäº†åœ¨ç¯å¢ƒä¸­å‡åŒ€åˆ†å¸ƒç‰¹å¾ç‚¹ï¼Œæˆ‘ä»¬å°†æ‰«æåˆ†å‰²æˆå››ä¸ªç›¸åŒçš„å­åŒºåŸŸã€‚æ¯ä¸ªå­åŒºåŸŸæœ€å¤šå¯æä¾›$2$ä¸ªè¾¹ç¼˜ç‚¹å’Œ$4$ä¸ªå¹³é¢ç‚¹ã€‚åªæœ‰å½“ç‚¹$i$çš„$c$å€¼å¤§äºæˆ–å°äºä¸€ä¸ªé˜ˆå€¼ï¼Œä¸”æ‰€é€‰ç‚¹çš„ä¸ªæ•°ä¸è¶…è¿‡æœ€å¤§å€¼æ—¶ï¼Œæ‰èƒ½å°†ç‚¹$i$é€‰æ‹©ä¸ºè¾¹æˆ–å¹³é¢ç‚¹ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153159251.png" alt="image-20220410153159251" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾4æ‰€ç¤ºã€‚$(a)$å®çº¿æ®µè¡¨ç¤ºå±€éƒ¨è¡¨é¢è´´ç‰‡ã€‚ç‚¹$A$ä½äºä¸æ¿€å…‰æŸæœ‰ä¸€å®šè§’åº¦çš„è¡¨é¢ä¸Š(è™šçº¿æ©™è‰²çº¿æ®µ)ã€‚ç‚¹$B$åœ¨ä¸€ä¸ªå¤§è‡´å¹³è¡Œäºæ¿€å…‰æŸçš„è¡¨é¢ä¸Šã€‚æˆ‘ä»¬å°†$B$ä½œä¸ºä¸€ä¸ªä¸å¯é çš„æ¿€å…‰è¿”å›ç‚¹ï¼Œä¸é€‰æ‹©å®ƒä½œä¸ºç‰¹å¾ç‚¹ã€‚$(b)$å®çº¿æ®µæ˜¯æ¿€å…‰çš„å¯è§‚æµ‹å¯¹è±¡ã€‚ç‚¹$A$ä½äºè¢«é®æŒ¡åŒºåŸŸ(è™šçº¿æ©™çº¿æ®µ)çš„è¾¹ç•Œä¸Šï¼Œå¯ä»¥è¢«æ£€æµ‹ä¸ºè¾¹ç¼˜ç‚¹ã€‚ç„¶è€Œï¼Œå¦‚æœä»ä¸åŒçš„è§’åº¦çœ‹ï¼Œè¢«é®æŒ¡çš„åŒºåŸŸä¼šå‘ç”Ÿå˜åŒ–ï¼Œå˜å¾—å¯ä»¥è§‚å¯Ÿåˆ°ã€‚æˆ‘ä»¬ä¸æŠŠ$A$ä½œä¸ºæ˜¾è‘—è¾¹ç¼˜ç‚¹ï¼Œä¹Ÿä¸é€‰æ‹©å®ƒä½œä¸ºç‰¹å¾ç‚¹ã€‚</p>
</blockquote>
<p>åœ¨é€‰æ‹©ç‰¹å¾ç‚¹æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é¿å…é€‰æ‹©å‘¨å›´ç‚¹è¢«é€‰æ‹©çš„ç‚¹ï¼Œæˆ–è€…å¤§è‡´å¹³è¡Œäºæ¿€å…‰æŸçš„å±€éƒ¨å¹³é¢ä¸Šçš„ç‚¹(å›¾$4(a)$ä¸­çš„ç‚¹$B$)ã€‚è¿™äº›è§‚ç‚¹é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸å¯é çš„ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¸Œæœ›é¿å…åœ¨è¢«é®æŒ¡åŒºåŸŸè¾¹ç•Œä¸Šçš„ç‚¹[23]ã€‚å¦‚å›¾$4(b)$æ‰€ç¤ºä¸ºä¸€ä¸ªä¾‹å­ã€‚ç‚¹$A$æ˜¯æ¿€å…‰é›·è¾¾äº‘ä¸­çš„è¾¹ç¼˜ç‚¹ï¼Œå› ä¸ºå®ƒçš„è¿æ¥é¢(è™šçº¿æ®µ)è¢«å¦ä¸€ä¸ªç‰©ä½“é®æŒ¡ã€‚ç„¶è€Œï¼Œå¦‚æœæ¿€å…‰é›·è¾¾ç§»åŠ¨åˆ°å¦ä¸€ä¸ªè§†ç‚¹ï¼Œè¢«é®æŒ¡åŒºåŸŸå°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæˆä¸ºå¯è§‚æµ‹çš„ã€‚ä¸ºäº†é¿å…å‰é¢æåˆ°çš„å¾…é€‰ç‚¹ï¼Œæˆ‘ä»¬å†æ¬¡æ‰¾åˆ°ç‚¹$S$çš„é›†åˆã€‚åªæœ‰å½“$S$å®ƒä¸èƒ½åœ¨å¤§è‡´å¹³è¡Œäºæ¿€å…‰æŸçš„è¡¨é¢ä¸Šï¼Œä¹Ÿä¸èƒ½åœ¨è¢«é®æŒ¡åŒºåŸŸçš„è¾¹ç•Œä¸Šã€‚ä¸å½¢æˆä¸€ä¸ªå¤§è‡´å¹³è¡Œäºæ¿€å…‰æŸçš„è¡¨é¢è´´ç‰‡æ—¶ï¼Œç‚¹$i$æ‰èƒ½è¢«é€‰æ‹©ã€‚åœ¨$S$ä¸­ï¼Œæ²¡æœ‰ä¸€ä¸ªç‚¹åœ¨æ¿€å…‰æŸæ–¹å‘ä¸Šé€šè¿‡é—´éš™ä¸$i$æ–­å¼€ï¼ŒåŒæ—¶æ¯”$i$æ›´é è¿‘æ¿€å…‰é›·è¾¾(å¦‚å›¾$4(b)$ä¸­çš„Bç‚¹)ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œä»$c$å€¼çš„æœ€å¤§å€¼å¼€å§‹é€‰å–ç‰¹å¾ç‚¹ä½œä¸ºè¾¹ç¼˜ç‚¹ï¼Œä»$c$å€¼çš„æœ€å°å€¼å¼€å§‹é€‰å–ç‰¹å¾ç‚¹ä½œä¸ºå¹³é¢ç‚¹ï¼Œå¦‚æœé€‰å–ä¸€ä¸ªç‚¹ï¼Œ</p>
<ul>
<li>é€‰æ‹©çš„è¾¹ç¼˜ç‚¹æˆ–å¹³é¢ç‚¹çš„æ•°é‡ä¸èƒ½è¶…è¿‡å­åŒºåŸŸçš„æœ€å¤§å€¼</li>
<li>å®ƒå‘¨å›´çš„ç‚¹éƒ½æ²¡æœ‰è¢«é€‰ä¸­</li>
<li>å®ƒä¸èƒ½åœ¨å¤§è‡´å¹³è¡Œäºæ¿€å…‰æŸçš„è¡¨é¢ä¸Šï¼Œä¹Ÿä¸èƒ½åœ¨è¢«é®æŒ¡åŒºåŸŸçš„è¾¹ç•Œä¸Šã€‚</li>
</ul>
<p>ä»èµ°å»Šåœºæ™¯ä¸­æå–ç‰¹å¾ç‚¹çš„ç¤ºä¾‹å¦‚å›¾$5$æ‰€ç¤ºã€‚è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹åˆ†åˆ«ç”¨é»„è‰²å’Œçº¢è‰²æ ‡è®°ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153221345.png" alt="image-20220410153221345" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾$5$æ‰€ç¤ºã€‚ä»èµ°å»Šçš„æ¿€å…‰é›·è¾¾äº‘ä¸­æå–è¾¹ç¼˜ç‚¹(é»„è‰²)å’Œå¹³é¢ç‚¹(çº¢è‰²)çš„ä¾‹å­ã€‚åŒæ—¶ï¼Œæ¿€å…‰é›·è¾¾ä»¥$0.5m/s$çš„é€Ÿåº¦å‘å›¾å·¦ä¾§çš„å£é¢ç§»åŠ¨ï¼Œå¯¼è‡´å£é¢è¿åŠ¨å¤±çœŸã€‚</p>
</blockquote>
<h2 id="B-å¯»æ‰¾ç‰¹å¾ç‚¹å¯¹åº”"><a href="#B-å¯»æ‰¾ç‰¹å¾ç‚¹å¯¹åº”" class="headerlink" title="B.å¯»æ‰¾ç‰¹å¾ç‚¹å¯¹åº”"></a>B.å¯»æ‰¾ç‰¹å¾ç‚¹å¯¹åº”</h2><p>é‡Œç¨‹è®¡ç®—æ³•ä¼°è®¡æ¿€å…‰é›·è¾¾åœ¨æ‰«æèŒƒå›´å†…çš„è¿åŠ¨ã€‚è®¾$t_k$ä¸ºæ‰«æ$k$çš„èµ·å§‹æ—¶é—´ã€‚åœ¨æ¯æ¬¡æ‰«æç»“æŸæ—¶ï¼Œå°†æ‰«æè¿‡ç¨‹ä¸­æ„ŸçŸ¥åˆ°çš„ç‚¹äº‘$P_k$é‡æ–°æŠ•å½±åˆ°æ—¶é—´æˆ³$t_{k+1}$ï¼Œå¦‚å›¾$6$æ‰€ç¤ºã€‚æˆ‘ä»¬å°†é‡æ–°æŠ•å½±çš„ç‚¹äº‘è¡¨ç¤ºä¸º$\overline{P}_k$ã€‚åœ¨ä¸‹ä¸€æ¬¡æ‰«æ$k+1$æ—¶ï¼Œ$\overline{P}_k$å’Œæ–°æ¥æ”¶åˆ°çš„ç‚¹äº‘$P_{k+1}$ä¸€èµ·ä½¿ç”¨ï¼Œæ¥ä¼°è®¡æ¿€å…‰é›·è¾¾çš„è¿åŠ¨ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153230555.png" alt="image-20220410153230555" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾$6$æ‰€ç¤ºã€‚å°†ç‚¹äº‘é‡æ–°æŠ•å½±åˆ°æ‰«æçš„æœ«ç«¯ã€‚è“è‰²çº¿æ®µè¡¨ç¤ºæ‰«æ$k$æ—¶æ„ŸçŸ¥åˆ°çš„ç‚¹äº‘ $P_k$ï¼Œåœ¨æ‰«æ$k$ç»“æŸæ—¶ï¼Œå°†$P_k$é‡æ–°æŠ•å½±åˆ°æ—¶é—´æˆ³$t_{k+1}$ï¼Œå¾—åˆ°ç»¿è‰²çº¿æ®µ$\overline{P}_k$ã€‚ç„¶åï¼Œåœ¨æ‰«æ$k+1$æ—¶ï¼Œ$\overline{P}_k$å’Œæ–°æ„ŸçŸ¥çš„ç‚¹äº‘$P_{k+1}$(æ©™è‰²çº¿æ®µ)ä¸€èµ·ä¼°è®¡æ¿€å…‰é›·è¾¾è¿åŠ¨ã€‚</p>
</blockquote>
<p>è®©æˆ‘ä»¬å‡è®¾$\overline{P}_k$å’Œ$P_{k+1}$ç°åœ¨éƒ½æ˜¯å¯ç”¨çš„ï¼Œç„¶åä»æ‰¾åˆ°ä¸¤ä¸ªæ¿€å…‰é›·è¾¾äº‘ä¹‹é—´çš„å¯¹åº”å…³ç³»å¼€å§‹ã€‚å¯¹äº$P_{k+1}$ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Šä¸€èŠ‚è®¨è®ºçš„æ–¹æ³•ä»æ¿€å…‰é›·è¾¾äº‘ä¸­æ‰¾åˆ°è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹ã€‚è®¾$\xi_{k+1}$å’Œ$H_{k+1}$åˆ†åˆ«ä¸ºè¾¹ç‚¹å’Œå¹³é¢ç‚¹çš„é›†åˆã€‚æˆ‘ä»¬å°†ä»$\overline{P}_k$ä¸­æ‰¾åˆ°ä¸$\xi_{k+1}$ä¸­çš„ç‚¹å¯¹åº”çš„è¾¹çº¿ï¼Œä»å¹³é¢å›¾ä¸­æ‰¾åˆ°ä¸$H_{k+1}$ä¸­çš„ç‚¹å¯¹åº”çš„å¹³é¢è´´ç‰‡(patch)ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œåœ¨æ‰«æ$k+1$å¼€å§‹æ—¶ï¼Œ$P_{k+1}$æ˜¯ä¸€ä¸ªç©ºé›†ï¼Œå®ƒåœ¨æ‰«æè¿‡ç¨‹ä¸­éšç€æ¥æ”¶åˆ°æ›´å¤šç‚¹æ•°è€Œå¢é•¿ã€‚æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡é€’å½’åœ°ä¼°è®¡äº†æ‰«ææœŸé—´çš„$6-DOF$è¿åŠ¨ï¼Œå¹¶éšç€$P_{k+1}$çš„å¢åŠ é€æ¸åŒ…å«æ›´å¤šçš„ç‚¹ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œä½¿ç”¨å½“å‰ä¼°è®¡çš„å˜æ¢å°†$\xi_{k+1}$å’Œ$H_{k+1}$é‡æ–°æŠ•å½±åˆ°æ‰«æçš„å¼€å§‹ï¼Œè®°$\tilde{\xi}_{k+1}$å’Œ$\tilde{H}_{k+1}$ä¸ºé‡æŠ•å½±çš„ç‚¹é›†ã€‚å¯¹äºæ¯ä¸ªç‚¹åœ¨$\xi_{k+1}$å’Œ$H_{k+1}$ï¼Œæˆ‘ä»¬å°†åœ¨$\overline{P}_k$ä¸­æ‰¾åˆ°æœ€è¿‘çš„é‚»å±…ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œ$\overline{P}_k$è¢«å­˜å‚¨åœ¨$3D$  $ KD-tree$[24]ä¸­ï¼Œç”¨äºå¿«é€Ÿç´¢å¼•ã€‚</p>
<p>å›¾$7(a)$ç»™å‡ºäº†å¯»æ‰¾è¾¹ç¼˜ç‚¹å¯¹åº”çš„è¾¹çº¿çš„è¿‡ç¨‹ã€‚è®¾$i$æ˜¯å±äº$\tilde{\xi}_{k+1}$çš„ç‚¹ï¼Œå³$ i \in \tilde{\xi}_{k+1}$ã€‚è¾¹çº¿ç”±ä¸¤ä¸ªç‚¹è¡¨ç¤ºã€‚è®¾$j$æ˜¯$i$åœ¨$\overline{P}_k$ä¸­çš„æœ€è¿‘é‚»ï¼Œ$j\in \overline{P}_k$ï¼Œè®¾$l$æ˜¯$i$åœ¨è¿ç»­ä¸¤æ¬¡æ‰«æ$j$æ—¶çš„æœ€è¿‘é‚»ï¼Œ$(j, l)$æ„æˆ$i$çš„å¯¹åº”å…³ç³»ã€‚ç„¶åï¼Œä¸ºäº†éªŒè¯$j$å’Œ$l$éƒ½æ˜¯è¾¹ç¼˜ç‚¹ï¼Œæˆ‘ä»¬æ ¹æ®å…¬å¼$(1)$æ¥æ£€æŸ¥å±€éƒ¨è¡¨é¢çš„å¹³æ»‘åº¦ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ç‰¹åˆ«è¦æ±‚$j$å’Œ$l$æ¥è‡ªä¸åŒçš„æ‰«æï¼Œè€ƒè™‘åˆ°ä¸€æ¬¡æ‰«æä¸èƒ½åŒ…å«æ¥è‡ªåŒä¸€è¾¹çº¿çš„å¤šä¸ªç‚¹ã€‚åªæœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå³è¾¹ç¼˜çº¿åœ¨æ‰«æå¹³é¢ä¸Šã€‚ç„¶è€Œï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œè¾¹ç¼˜çº¿å°±ä¼šé€€åŒ–ä¸”<br>åœ¨æ‰«æå¹³é¢ä¸Šæ˜¾ç¤ºä¸ºä¸€æ¡ç›´çº¿ï¼Œå¹¶ä¸”ç‰¹å¾ç‚¹åœ¨è¾¹ç¼˜çº¿ä¸Šä¸åº”è¯¥é¦–å…ˆè¢«æå–ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153242817.png" alt="image-20220410153242817" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾7æ‰€ç¤ºã€‚åœ¨$\tilde{\xi}_{k+1}$ä¸­æ‰¾åˆ°ä¸€æ¡è¾¹ç¼˜çº¿ä½œä¸ºè¾¹ç¼˜ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œå¦‚å›¾$(a)$ï¼Œä»¥åŠä½œä¸º$\tilde{H}_{k+1}$ä¸­å¹³é¢ç‚¹çš„å¯¹åº”å…³ç³»çš„å¹³é¢è´´ç‰‡(patch)ï¼Œå¦‚å›¾$(b)$ã€‚åœ¨$(a)$å’Œ$(b)$ä¸­ï¼Œ$j $æ˜¯è·ç¦»ç‰¹å¾ç‚¹æœ€è¿‘çš„ç‚¹ï¼Œåœ¨$\overline{P}_k$ä¸­æ‰¾åˆ°ã€‚æ©™è‰²çš„çº¿è¡¨ç¤ºå¯¹jçš„ç›¸åŒæ‰«æï¼Œè“è‰²çš„çº¿è¡¨ç¤ºè¿ç»­çš„ä¸¤æ¬¡æ‰«æã€‚ä¸ºäº†æ‰¾å‡º$(a)$ä¸­çš„è¾¹çº¿å¯¹åº”å…³ç³»ï¼Œæˆ‘ä»¬åœ¨è“è‰²çš„ç›´çº¿ä¸Šæ‰¾åˆ°å¦ä¸€ä¸ªç‚¹$l$ï¼Œå¯¹åº”å…³ç³»ç”¨$(j, l)$è¡¨ç¤ºã€‚ä¸ºäº†æ‰¾åˆ°$(b)$ä¸­çš„å¹³é¢è´´ç‰‡(patch)å¯¹åº”å…³ç³»ï¼Œæˆ‘ä»¬å‘ç°å¦å¤–ä¸¤ä¸ªç‚¹ï¼Œ$l $å’Œ $m$ï¼Œåˆ†åˆ«ä½äºæ©™è‰²å’Œè“è‰²çº¿ä¸Šã€‚å¯¹åº”å…³ç³»ä¸º$(j, l, m)$ã€‚</p>
</blockquote>
<p>å›¾$7(b)$æ˜¾ç¤ºäº†å¯»æ‰¾å¹³é¢è´´ç‰‡(patch)ä½œä¸ºå¹³é¢ç‚¹å¯¹åº”çš„è¿‡ç¨‹ã€‚è®¾$ i$ ä¸º$\tilde{H}_{k+1}$ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œå³$i \in  \tilde{H}_{k+1}$ã€‚å¹³é¢è´´ç‰‡(patch)ç”±ä¸‰ä¸ªç‚¹è¡¨ç¤ºã€‚ä¸ä¸Šä¸€æ®µç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨$\overline{P}_k$ä¸­æ‰¾åˆ°$ i $çš„æœ€è¿‘é‚»ï¼Œè®°ä¸º$j$ã€‚ ç„¶åï¼Œæˆ‘ä»¬æ‰¾åˆ°å¦å¤–ä¸¤ä¸ªç‚¹ $l$ å’Œ$ m$ï¼Œä½œä¸º$ i $çš„æœ€è¿‘é‚»ï¼Œä¸€ä¸ªåœ¨$j $çš„åŒä¸€æ‰«æä¸­ï¼Œå¦ä¸€ä¸ªåœ¨ $j $çš„ä¸¤æ¬¡è¿ç»­æ‰«æä¸­ã€‚ è¿™ä¿è¯äº†ä¸‰ä¸ªç‚¹æ˜¯éå…±çº¿çš„ã€‚ ä¸ºäº†éªŒè¯ $j$ã€$l$å’Œ $m$ éƒ½æ˜¯å¹³é¢ç‚¹ï¼Œæˆ‘ä»¬æ ¹æ®$ (1) $å†æ¬¡æ£€æŸ¥å±€éƒ¨è¡¨é¢çš„å¹³æ»‘åº¦ã€‚</p>
<p>æ ¹æ®ç‰¹å¾ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œæ¨å¯¼å‡ºç‰¹å¾ç‚¹åˆ°å¯¹åº”å…³ç³»çš„è·ç¦»è¡¨è¾¾å¼ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡æœ€å°åŒ–ç‰¹å¾ç‚¹çš„æ•´ä½“è·ç¦»æ¥æ¢å¤æ¿€å…‰é›·è¾¾è¿åŠ¨ã€‚æˆ‘ä»¬ä»è¾¹ç‚¹å¼€å§‹ã€‚å¯¹äºç‚¹$ i \in \tilde{\xi}_{k+1}$ï¼Œå¦‚æœ$(j, l)$æ˜¯å¯¹åº”çš„è¾¹çº¿ï¼Œ$j,l \in \overline{P}_k$ï¼Œåˆ™ç‚¹åˆ°çº¿çš„è·ç¦»å¯ä»¥è®¡ç®—ä¸º</p>
<script type="math/tex; mode=display">
d_{\xi}=\frac{|(\tilde{X}^L_{(k+1,i)}-\overline{X}^L_{(k,j)})Ã—(\tilde{X}^L_{(k+1,i)}-\overline{X}^L_{(k,l)})|}
{|\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,l)}|},\tag{2}</script><p>å…¶ä¸­$\tilde{X}^L_{(k+1,i)},\overline{X}^L_{(k,j)}$ï¼Œ å’Œ$\overline{X}^L_{(k,l)}$åˆ†åˆ«æ˜¯ç‚¹$i, j, l$åœ¨$\left\{L\right\}$ä¸­çš„åæ ‡ã€‚é‚£ä¹ˆï¼Œå¯¹äºç‚¹$i \in  \tilde{H}_{k+1}$ï¼Œå¦‚æœ$(j, l, m)$æ˜¯å¯¹åº”çš„å¹³é¢è´´ç‰‡(patch),$j,l,m \in \overline{P}_k$ï¼Œåˆ™ç‚¹åˆ°å¹³é¢çš„è·ç¦»ä¸º</p>
<script type="math/tex; mode=display">
d_H=\frac
{\begin{vmatrix}
(\tilde{X}^L_{(k+1,i)}-\overline{X}^L_{(k,j)})\\
((\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,l)})Ã—(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,m)}))
\end{vmatrix}
}
{\begin{vmatrix}
(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,l)})Ã—(\overline{X}^L_{(k,j)}-\overline{X}^L_{(k,m)})
\end{vmatrix} },\tag{3}</script><p>å…¶ä¸­$\overline{X}^L_{(k,m)}$æ˜¯ç‚¹$m$åœ¨$\left\{L\right\}$ä¸­çš„åæ ‡ã€‚</p>
<h2 id="C-è¿åŠ¨ä¼°è®¡"><a href="#C-è¿åŠ¨ä¼°è®¡" class="headerlink" title="C.è¿åŠ¨ä¼°è®¡"></a>C.è¿åŠ¨ä¼°è®¡</h2><p>æ¿€å…‰é›·è¾¾è¿åŠ¨åœ¨æ‰«ææœŸé—´ä»¥æ’å®šçš„è§’é€Ÿåº¦å’Œçº¿é€Ÿåº¦å»ºæ¨¡ã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªæ‰«æä¸­å¯¹åœ¨ä¸åŒæ—¶é—´æ¥æ”¶åˆ°çš„ç‚¹è¿›è¡Œçº¿æ€§æ’å€¼ã€‚å‡è®¾$t$æ˜¯å½“å‰çš„æ—¶é—´æˆ³ï¼Œ$t_{k+1}$æ˜¯æ‰«æ$k+1$çš„å¼€å§‹æ—¶é—´ã€‚è®¾$T^L_{k+1}$ä¸º$[t_{k+1}, t]$ä¹‹é—´çš„æ¿€å…‰é›·è¾¾ä½å§¿å˜æ¢ã€‚$T^L_{k+1}$åŒ…å«$6$è‡ªç”±åº¦æ¿€å…‰é›·è¾¾çš„åˆšæ€§è¿åŠ¨ï¼Œ$T^L_{k+1} = [t_x, t_y, t_zï¼Œ Î¸_xï¼Œ Î¸_yï¼Œ Î¸_z]^T$ï¼Œå…¶ä¸­$t_x$ã€$t_y$å’Œ$t_z$åˆ†åˆ«æ˜¯$\left\{L\right\}$æ²¿$x-$ã€$y-$å’Œ$z-$è½´çš„å¹³ç§»ï¼Œ$Î¸_x$ã€$Î¸_y$å’Œ$Î¸_z$æ˜¯æ—‹è½¬è§’åº¦ï¼Œéµå¾ªå³æ‰‹è§„åˆ™ã€‚ç»™å®šç‚¹$iï¼Œi \in P_k$ï¼Œè®¾$t_i$ä¸ºå…¶æ—¶é—´æˆ³ï¼Œè®¾ä¸º$[t_{k+1}, t_i]$ä¹‹é—´çš„$T^L_{(k+1,i)}$ä½å§¿å˜æ¢ã€‚$T^L_{(k+1,i)}$å¯ä»¥é€šè¿‡$T^L_{k+1}$çš„çº¿æ€§æ’å€¼å¾—åˆ°ï¼Œ</p>
<script type="math/tex; mode=display">
T^L_{(k+1,i)}=\frac{t_i-t_{k+1} }{t-t_{k+1} }T^L_{k+1}.\tag{4}</script><p>å›æƒ³ä¸€ä¸‹ï¼Œ$\xi_{k+1} $å’Œ $H_{k+1}$ æ˜¯ä» $P_{k+1}$ ä¸­æå–çš„è¾¹ç¼˜ç‚¹å’Œå¹³é¢ç‚¹çš„é›†åˆï¼Œ$\tilde \xi_{k+1} $ å’Œ$\tilde H_{k+1}$ æ˜¯é‡æ–°æŠ•å½±åˆ°æ‰«æå¼€å§‹$ t_{k+1}$çš„ç‚¹é›†åˆ ã€‚ä¸ºäº†è§£å†³æ¿€å…‰é›·è¾¾è¿åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹$\xi_{k+1} $å’Œ$\tilde \xi_{k+1} $æˆ–$H_{k+1}$ å’Œ$\tilde H_{k+1}$ ä¹‹é—´çš„å‡ ä½•å…³ç³»ã€‚åˆ©ç”¨$(4)$ä¸­çš„å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å¯¼ï¼Œ</p>
<script type="math/tex; mode=display">
X^L_{(k+1,i)}=R\tilde X^L_{(k+1,i)}+T^L_{(k+1,i)}(1:3),\tag{5}</script><p>å…¶ä¸­$X^L_{(k+1,i)}$æ˜¯$\xi_{k+1} $æˆ–$H_{k+1}$ä¸­çš„ç‚¹$i$çš„åæ ‡ï¼Œ$\tilde X^L_{(k+1,i)}$æ˜¯$\tilde \xi_{k+1} $æˆ–$\tilde H_{k+1}$ä¸­çš„ç‚¹$i$çš„åæ ‡ï¼Œ$(a:b)$æ˜¯$T^L_{(k+1,i)}$çš„ç¬¬$a$åˆ°$b$ä¸ªé¡¹ï¼Œ$R$æ˜¯ç”±$Rodrigues$å…¬å¼[25]å®šä¹‰çš„æ—‹è½¬çŸ©é˜µã€‚</p>
<script type="math/tex; mode=display">
R=e^{\hat{w} \theta}=I + \hat{w}sin\theta+\hat{w}^2(1-cos\theta).\tag{6}</script><p>åœ¨ä¸Šå¼ä¸­ï¼Œ$Î¸$ä¸ºæ—‹è½¬çš„å¤§å°ï¼Œ</p>
<script type="math/tex; mode=display">
\theta = \parallel T^L_{(k+1,i)}(4:6) \parallel,\tag{7}</script><p>$w$æ˜¯è¡¨ç¤ºæ—‹è½¬æ–¹å‘çš„å•ä½å‘é‡ï¼Œ</p>
<script type="math/tex; mode=display">
w=\frac{T^L_{(k+1,i)}(4:6)}{\parallel T^L_{(k+1,i)}(4:6) \parallel},\tag{8}</script><p>$\hat{w}$ä¸º$w$çš„æ–œå¯¹ç§°çŸ©é˜µ[25]ã€‚</p>
<p>å›å¿†$(2)$å’Œ$(3)$è®¡ç®—å±äº$\tilde \xi_{k+1} $ å’Œ$\tilde H_{k+1}$ çš„ç‚¹ä¹‹é—´çš„è·ç¦»åŠå…¶å¯¹åº”å…³ç³»ã€‚ç»“åˆ$(2)$å’Œ$(4)-(8)$ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡º$\xi_{k+1}$ä¸­çš„ä¸€ä¸ªè¾¹ç‚¹ä¸ç›¸åº”çš„è¾¹çº¿ä¹‹é—´çš„å‡ ä½•å…³ç³»ï¼Œ</p>
<script type="math/tex; mode=display">
f_{\xi}(X^L_{(k+1,i)},T^L_{k+1})=d_\xi,i\in \xi_{k+1}.\tag{9}</script><p>åŒæ ·ï¼Œç»“åˆ$(3)(4)-(8)$ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨$H_{k+1}$ä¸­çš„ä¸€ä¸ªå¹³é¢ç‚¹ä¸å¯¹åº”çš„å¹³é¢è´´ç‰‡(patch)å»ºç«‹å¦ä¸€ä¸ªå‡ ä½•å…³ç³»ï¼Œ</p>
<script type="math/tex; mode=display">
f_H(X^L_{(k+1,i)},T^L_{k+1})=d_H,i\in H_{k+1}.\tag{10}</script><p>æœ€åï¼Œæˆ‘ä»¬ç”¨<code>Levenberg-Marquardt</code>æ–¹æ³•[26]æ±‚è§£æ¿€å…‰é›·è¾¾è¿åŠ¨ã€‚å°†$\xi_{k+1}$å’Œ$H_{k+1}$ä¸­æ¯ä¸ªç‰¹å¾ç‚¹$(9)$å’Œ$(10)$å åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªéçº¿æ€§å‡½æ•°:</p>
<script type="math/tex; mode=display">
f(T^L_{k+1})=d,\tag{11}</script><p>å…¶ä¸­æ¯ä¸€è¡Œ$f$å¯¹åº”ä¸€ä¸ªç‰¹å¾ç‚¹ï¼Œ$d$åŒ…å«ç›¸åº”çš„è·ç¦»ã€‚æˆ‘ä»¬è®¡ç®—$f$å…³äº$T^L_{k+1}$çš„é›…å¯æ¯”çŸ©é˜µï¼Œè®°ä½œ$J$ï¼Œå…¶ä¸­$J =\partial f /\partial T^L_{k+1}$ã€‚ç„¶åï¼Œ$(11)$é€šè¿‡éçº¿æ€§è¿­ä»£ï¼Œä½¿$d$è¶‹è¿‘äº$0$ï¼Œ</p>
<script type="math/tex; mode=display">
T^L_{k+1}\gets T^L_{k+1}-(J^TJ+\lambda diag(J^TJ))^{-1}J^Td.\tag{12}</script><p>$\lambda$æ˜¯ç”±<code>Levenberg-Marquardt</code>æ–¹æ³•ç¡®å®šçš„å› å­ã€‚</p>
<h2 id="D-æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡ç®—æ³•"><a href="#D-æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡ç®—æ³•" class="headerlink" title="D.æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡ç®—æ³•"></a>D.æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡ç®—æ³•</h2><p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/%E5%9B%BE%E7%89%871.png" alt="å›¾ç‰‡1"></p>
<p>æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡ç®—æ³•å¦‚ç®—æ³•1æ‰€ç¤ºã€‚è¯¥ç®—æ³•ä»¥ä¸Šæ¬¡æ‰«æçš„ç‚¹äº‘$\overline{P}_k$ã€å½“å‰æ‰«æçš„å¢é•¿ç‚¹äº‘$P_{k+1}$å’Œä¸Šæ¬¡é€’å½’çš„ä½å§¿å˜æ¢$T^L_{k+1}$ä½œä¸ºè¾“å…¥ã€‚å¦‚æœå¯åŠ¨äº†æ–°çš„æ‰«æï¼Œ$T^L_{k+1}$å°†è¢«è®¾ç½®ä¸ºé›¶(ç¬¬$4-6$è¡Œ)ã€‚ç„¶åï¼Œç®—æ³•ä»$P_{k+1}$ä¸­æå–ç‰¹å¾ç‚¹æ„é€ ç¬¬$7$è¡Œ$\xi_{k+1}$å’Œ$H_{k+1}$ã€‚å¯¹äºæ¯ä¸ªç‰¹å¾ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨$\overline{P}_k$(ç¬¬$9-19$è¡Œ)ä¸­æ‰¾åˆ°å¯¹åº”ã€‚è¿åŠ¨ä¼°è®¡é€‚åº”äºé²æ£’æ‹Ÿåˆ[27]ã€‚åœ¨ç¬¬$ 15 $è¡Œï¼Œè¯¥ç®—æ³•ä¸ºæ¯ä¸ªç‰¹å¾ç‚¹åˆ†é…ä¸€ä¸ªå¹³æ–¹æƒå€¼ã€‚ ä¸å…¶å¯¹åº”çš„è·ç¦»è¾ƒå¤§çš„ç‰¹å¾ç‚¹è¢«åˆ†é…è¾ƒå°çš„æƒé‡ï¼Œè·ç¦»å¤§äºé˜ˆå€¼çš„ç‰¹å¾ç‚¹è¢«è§†ä¸ºå¼‚å¸¸å€¼å¹¶åˆ†é…é›¶æƒé‡ã€‚ç„¶åï¼Œåœ¨ç¬¬$ 16 $è¡Œï¼Œä¸ºä¸€æ¬¡è¿­ä»£æ›´æ–°ä½å§¿å˜æ¢ã€‚ å½“å‘ç°æ”¶æ•›æˆ–æ»¡è¶³æœ€å¤§è¿­ä»£æ¬¡æ•°æ—¶ï¼Œéçº¿æ€§ä¼˜åŒ–ç»ˆæ­¢ã€‚ å¦‚æœç®—æ³•åˆ°è¾¾æ‰«æç»“æŸï¼Œåˆ™ä½¿ç”¨æ‰«ææœŸé—´ä¼°è®¡çš„è¿åŠ¨å°†$P_{k+1}$é‡æ–°æŠ•å½±åˆ°æ—¶é—´æˆ³ $t_{k+2}$ã€‚ å¦åˆ™ï¼Œä»…è¿”å›å˜æ¢$T^L_{k+1}$ ç”¨äºä¸‹ä¸€è½®é€’å½’ã€‚</p>
<h1 id="VI-æ¿€å…‰é›·è¾¾å»ºå›¾"><a href="#VI-æ¿€å…‰é›·è¾¾å»ºå›¾" class="headerlink" title="VI.æ¿€å…‰é›·è¾¾å»ºå›¾"></a>VI.æ¿€å…‰é›·è¾¾å»ºå›¾</h1><p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153350151.png" alt="image-20220410153350151" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ 8. å»ºå›¾è¿‡ç¨‹ç¤ºæ„å›¾ã€‚ è“è‰²æ›²çº¿è¡¨ç¤ºåœ°å›¾ä¸Šçš„æ¿€å…‰é›·è¾¾ä½å§¿$T^W_k$ ï¼Œç”±å»ºå›¾ç®—æ³•åœ¨æ‰«æ $k $å¤„ç”Ÿæˆã€‚ æ©™è‰²æ›²çº¿è¡¨ç¤ºæ‰«æ $k + 1$ æœŸé—´çš„æ¿€å…‰é›·è¾¾è¿åŠ¨$T^L_{k+1}$ï¼Œç”±é‡Œç¨‹è®¡ç®—æ³•è®¡ç®—å¾—å‡ºã€‚ ä½¿ç”¨$ T^W_k$å’Œ$T^L_{k+1}$ï¼Œå°†é‡Œç¨‹è®¡ç®—æ³•å‘å¸ƒçš„æœªå¤±çœŸç‚¹äº‘æŠ•å½±åˆ°åœ°å›¾ä¸Šï¼Œè¡¨ç¤ºä¸ºï¼ˆç»¿è‰²çº¿æ®µï¼‰$\overline{Q}_{k+1}$ï¼Œå¹¶ä¸åœ°å›¾ä¸Šç°æœ‰çš„äº‘$ Q_k$ï¼ˆé»‘è‰²çº¿æ®µï¼‰è¿›è¡ŒåŒ¹é…ã€‚</p>
</blockquote>
<p>å»ºå›¾ç®—æ³•è¿è¡Œçš„é¢‘ç‡æ¯”é‡Œç¨‹è®¡ç®—æ³•ä½ï¼Œå¹¶ä¸”æ¯æ¬¡æ‰«æåªè°ƒç”¨ä¸€æ¬¡ã€‚åœ¨æ‰«æ $k + 1$ç»“æŸæ—¶ï¼Œå³ä»‹äº$ [t_{k+1}, t_{k+2 }]$ï¼Œæ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡ç”Ÿæˆä¸€ä¸ªæœªå¤±çœŸçš„ç‚¹äº‘$\overline{P}_{k+1}$ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªæ¿€å…‰é›·è¾¾çš„ä½å§¿å˜æ¢$T^L_{k+1}$ã€‚å»ºå›¾ç®—æ³•åœ¨ä¸–ç•Œåæ ‡$\left\{W\right\}$ä¸­åŒ¹é…å¹¶æ³¨å†Œ$\overline{P}_{k+1}$ï¼Œå¦‚å›¾$8$æ‰€ç¤ºã€‚ä¸ºäº†è§£é‡Šè¿™ä¸ªè¿‡ç¨‹ï¼Œè®©æˆ‘ä»¬å°†$ Q_k$ å®šä¹‰ä¸ºç´¯ç§¯åˆ°æ‰«æ $k$çš„åœ°å›¾ä¸Šçš„ç‚¹äº‘ï¼Œè®¾ $T^W_k$æ˜¯æ‰«æ $k $åœ¨$t_{k+1}$ç»“æŸæ—¶ï¼Œæ¿€å…‰é›·è¾¾åœ¨åœ°å›¾ä¸Šçš„ä½å§¿ã€‚åˆ©ç”¨æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡çš„è¾“å‡ºï¼Œå»ºå›¾ç®—æ³•å°† $T^W_k$æ‰©å±•åˆ°ä»$t_{k+1}$åˆ° $t_{k+2}$çš„ä¸€æ¬¡æ‰«æï¼Œä»¥è·å¾—$T^W_{k+1}$ï¼Œå¹¶å°† $\overline{P}_{k+1}$æŠ•å½±åˆ°ä¸–ç•Œåæ ‡$\left\{W\right\}$ä¸­ï¼Œè¡¨ç¤ºä¸º$\overline{Q}_{k+1}$ã€‚ æ¥ä¸‹æ¥ï¼Œè¯¥ç®—æ³•é€šè¿‡ä¼˜åŒ–æ¿€å…‰é›·è¾¾ä½å§¿$T^W_{k+1}$ï¼Œå°†$\overline{Q}_{k+1}$ ä¸$ Q_k$ åŒ¹é…ã€‚</p>
<p>ç‰¹å¾ç‚¹çš„æå–æ–¹æ³•ä¸ç¬¬$V-A$èŠ‚ç›¸åŒï¼Œä½†ä½¿ç”¨äº†$ 10 $å€çš„ç‰¹å¾ç‚¹ã€‚ ä¸ºäº†æ‰¾åˆ°ç‰¹å¾ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œæˆ‘ä»¬å°†ç‚¹äº‘å­˜å‚¨åœ¨åœ°å›¾ä¸Š$ Q_k$ï¼Œåœ¨ $10$ ç«‹æ–¹ç±³åŒºåŸŸä¸­ã€‚ç«‹æ–¹ä½“ä¸­ä¸$\overline{Q}_{k+1}$ç›¸äº¤çš„ç‚¹è¢«æå–å¹¶å­˜å‚¨åœ¨ $3D$  $KD-tree$ [24] ä¸­ã€‚ æˆ‘ä»¬å‘ç°$ Q_k$ä¸­çš„ç‚¹åœ¨ç‰¹å¾ç‚¹å‘¨å›´çš„æŸä¸€åŒºåŸŸå†…ã€‚ä»¤$ S^\prime $ä¸ºä¸€ç»„å‘¨å›´ç‚¹ã€‚ å¯¹äºè¾¹ç¼˜ç‚¹ï¼Œæˆ‘ä»¬åªåœ¨ $ S^\prime $ä¸­ä¿ç•™è¾¹ç¼˜çº¿ä¸Šçš„ç‚¹ï¼Œå¯¹äºå¹³é¢ç‚¹ï¼Œæˆ‘ä»¬åªä¿ç•™å¹³é¢ä¸Šçš„ç‚¹ã€‚ç„¶åï¼Œè®¡ç®— $ S^\prime $çš„åæ–¹å·®çŸ©é˜µï¼Œè®°ä¸º$M$, $M$çš„ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡ï¼Œåˆ†åˆ«è®°ä¸º$V$å’Œ$E$ã€‚å¦‚æœ$ S^\prime $åˆ†å¸ƒåœ¨ä¸€æ¡è¾¹çº¿ä¸Šï¼Œ$V$åŒ…å«çš„ä¸€ä¸ªç‰¹å¾å€¼æ˜æ˜¾å¤§äºå…¶ä»–ä¸¤ä¸ªç‰¹å¾å€¼ï¼Œ$E$ä¸­ä¸æœ€å¤§ç‰¹å¾å€¼ç›¸å…³è”çš„ç‰¹å¾å‘é‡è¡¨ç¤ºè¾¹ç¼˜çº¿çš„æ–¹å‘ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœ$ S^\prime $åˆ†å¸ƒåœ¨ä¸€ä¸ªå¹³é¢è´´ç‰‡(patch)ä¸Šï¼Œ$V$åŒ…å«ä¸¤ä¸ªè¾ƒå¤§çš„ç‰¹å¾å€¼ï¼Œç¬¬ä¸‰ä¸ªç‰¹å¾å€¼æ˜æ˜¾è¾ƒå°ï¼Œ$E$ä¸­æœ€å°çš„ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡è¡¨ç¤ºè¯¥å¹³é¢è´´ç‰‡(patch)çš„æ–¹ä½ã€‚é€šè¿‡$ S^\prime $çš„å‡ ä½•ä¸­å¿ƒç¡®å®šè¾¹ç¼˜çº¿æˆ–å¹³é¢è´´ç‰‡(patch)çš„ä½ç½®ã€‚</p>
<p>ä¸ºäº†è®¡ç®—ç‰¹å¾ç‚¹ä¸å…¶å¯¹åº”ç‚¹çš„è·ç¦»ï¼Œæˆ‘ä»¬åœ¨è¾¹ç¼˜çº¿ä¸Šé€‰æ‹©ä¸¤ä¸ªç‚¹ï¼Œåœ¨å¹³é¢è´´ç‰‡(patch)ä¸Šé€‰æ‹©ä¸‰ä¸ªç‚¹ã€‚è¿™å…è®¸ä½¿ç”¨$(2)$å’Œ$(3)$ç›¸åŒçš„å…¬å¼æ¥è®¡ç®—è·ç¦»ã€‚ç„¶åï¼Œä¸ºæ¯ä¸ªç‰¹å¾ç‚¹æ¨å¯¼å‡ºä¸€ä¸ªæ–¹ç¨‹ä¸º$(9)$ æˆ– $(10)$ï¼Œä½†ä¸åŒä¹‹å¤„åœ¨äº$\overline{Q}_{k+1}$ ä¸­çš„æ‰€æœ‰ç‚¹å…±äº«ç›¸åŒçš„æ—¶é—´æˆ³$t_{k+2}$ã€‚ éçº¿æ€§ä¼˜åŒ–é€šè¿‡ <code>Levenberg-Marquardt</code>æ–¹æ³• [26] é€šè¿‡é²æ£’æ‹Ÿåˆ [27] å†æ¬¡æ±‚è§£ï¼Œå¹¶åœ¨$\overline{Q}_{k+1}$è¢«æ³¨å†Œåœ¨åœ°å›¾ä¸Šã€‚ä¸ºäº†å‡åŒ€åˆ†å¸ƒè¿™äº›ç‚¹ï¼Œåœ°å›¾äº‘é€šè¿‡ä½“ç´ ç½‘æ ¼è¿‡æ»¤å™¨ [28] ç¼©å°å°ºå¯¸ï¼Œä½“ç´ å¤§å°ä¸º 5 å˜ç±³ç«‹æ–¹ä½“ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153401364.png" alt="image-20220410153401364" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ 9. ä½å§¿å˜æ¢çš„é›†æˆã€‚ è“è‰²åŒºåŸŸè¯´æ˜äº†å»ºå›¾ç®—æ³• $T^W_k$ çš„æ¿€å…‰é›·è¾¾ä½å§¿ï¼Œæ¯æ¬¡æ‰«æç”Ÿæˆä¸€æ¬¡ã€‚ æ©™è‰²åŒºåŸŸæ˜¯å½“å‰æ‰«æ $T^L_{k+1} $å†…çš„æ¿€å…‰é›·è¾¾è¿åŠ¨ï¼Œç”±é‡Œç¨‹è®¡ç®—æ³•è®¡ç®—å¾—å‡ºã€‚ æ¿€å…‰é›·è¾¾çš„è¿åŠ¨ä¼°è®¡æ˜¯ä¸¤ç§å˜æ¢çš„ç»„åˆï¼Œé¢‘ç‡ä¸ $T^L_{k+1} $ç›¸åŒã€‚</p>
</blockquote>
<p>ä½å§¿å˜æ¢çš„é›†æˆå¦‚å›¾ $9 $æ‰€ç¤ºã€‚è“è‰²åŒºåŸŸä»£è¡¨æ¿€å…‰é›·è¾¾æ˜ å°„ $T^W_k$ çš„ä½å§¿è¾“å‡ºï¼Œæ¯æ¬¡æ‰«æç”Ÿæˆä¸€æ¬¡ã€‚ æ©™è‰²åŒºåŸŸè¡¨ç¤ºæ¥è‡ªæ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡çš„å˜æ¢è¾“å‡º$T^L_{k+1} $ï¼Œé¢‘ç‡çº¦ä¸º$ 10Hz$ã€‚ ç›¸å¯¹äºåœ°å›¾çš„æ¿€å…‰é›·è¾¾å§¿æ€æ˜¯ä¸¤ç§å˜æ¢çš„ç»„åˆï¼Œé¢‘ç‡ä¸æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡ç›¸åŒã€‚</p>
<h1 id="VII-å®éªŒ"><a href="#VII-å®éªŒ" class="headerlink" title="VII.å®éªŒ"></a>VII.å®éªŒ</h1><p>åœ¨å®éªŒæœŸé—´ï¼Œåœ¨$2.5GHz$å››æ ¸$6Gib$å†…å­˜çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šï¼Œåœ¨Linuxä¸‹çš„æœºå™¨äººæ“ä½œç³»ç»Ÿ$(ROS)$[29]ä¸Šå¯¹æ¿€å…‰é›·è¾¾æ•°æ®è¿›è¡Œäº†å¤„ç†ã€‚ è¯¥æ–¹æ³•æ€»å…±æ¶ˆè€—ä¸¤ä¸ªæ ¸å¿ƒï¼Œé‡Œç¨‹è®¡å’Œå»ºå›¾ç¨‹åºåœ¨ä¸¤ä¸ªç‹¬ç«‹çš„æ ¸å¿ƒä¸Šè¿è¡Œã€‚ æˆ‘ä»¬çš„è½¯ä»¶ä»£ç å’Œæ•°æ®é›†æ˜¯å…¬å¼€çš„$^{1,2}$ã€‚</p>
<blockquote>
<p>1wiki.ros.org/loam_back_and_forth<br>2wiki.ros.org/loam_continuous</p>
</blockquote>
<h2 id="A-å®¤å†…å’Œå®¤å¤–æµ‹è¯•"><a href="#A-å®¤å†…å’Œå®¤å¤–æµ‹è¯•" class="headerlink" title="A.å®¤å†…å’Œå®¤å¤–æµ‹è¯•"></a>A.å®¤å†…å’Œå®¤å¤–æµ‹è¯•</h2><p>è¯¥æ–¹æ³•å·²åœ¨å®¤å†…å’Œå®¤å¤–ç¯å¢ƒä¸­è¿›è¡Œäº†æµ‹è¯•ã€‚åœ¨å®¤å†…æµ‹è¯•ä¸­ï¼Œæ¿€å…‰é›·è¾¾ä¸ç”µæ± å’Œç¬”è®°æœ¬ç”µè„‘ä¸€èµ·æ”¾ç½®åœ¨ä¸€ä¸ªæ¨è½¦ä¸Šã€‚ä¸€ä¸ªäººæ¨ç€æ‰‹æ¨è½¦èµ°ã€‚å›¾$10(a)$å’Œå›¾$10(c)$å±•ç¤ºäº†ä¸¤ç§å…¸å‹çš„å®¤å†…ç¯å¢ƒï¼Œä¸€ä¸ªç‹­é•¿èµ°å»Šå’Œä¸€ä¸ªå¤§å…çš„åœ°å›¾ã€‚å›¾$10(b)$å’Œå›¾$10(d)$ä¸ºåŒä¸€åœºæ™¯æ‹æ‘„çš„ä¸¤å¼ ç…§ç‰‡ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153413911.png" alt="image-20220410153413911"></p>
<blockquote>
<p>å›¾10æ‰€ç¤ºã€‚$(a)-(b)$ç‹­é•¿çš„èµ°å»Šï¼Œ$(c)-(d)$å¤§å…ï¼Œ$(e)-(f)$æ¤è¢«è¦†ç›–çš„é“è·¯å’Œ$(g)-(h)$ä¸¤è¡Œæ ‘æœ¨ä¹‹é—´çš„æœå›­ç”Ÿæˆçš„åœ°å›¾ã€‚æ¿€å…‰é›·è¾¾åœ¨å®¤å†…æµ‹è¯•ä¸­æ”¾ç½®åœ¨æ‰‹æ¨è½¦ä¸Šï¼Œåœ¨å®¤å¤–æµ‹è¯•ä¸­å®‰è£…åœ¨åœ°é¢è½¦è¾†ä¸Šã€‚æ‰€æœ‰æµ‹è¯•ä½¿ç”¨$0.5m/s$çš„é€Ÿåº¦ã€‚</p>
</blockquote>
<p>ä¸ºäº†è¯„ä¼°åœ°å›¾çš„å±€éƒ¨å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬ä»ç›¸åŒçš„ç¯å¢ƒä¸­æ”¶é›†äº†ç¬¬äºŒç»„æ¿€å…‰é›·è¾¾äº‘ã€‚åœ¨æ•°æ®é€‰æ‹©è¿‡ç¨‹ä¸­ï¼Œæ¿€å…‰é›·è¾¾ä¿æŒé™æ­¢ï¼Œå¹¶æ”¾ç½®åœ¨æ¯ä¸ªç¯å¢ƒä¸­çš„å‡ ä¸ªä¸åŒçš„ä½ç½®ã€‚ä½¿ç”¨ç‚¹å¯¹é¢$ICP$æ–¹æ³•[9]å¯¹ä¸¤ä¸ªç‚¹äº‘è¿›è¡ŒåŒ¹é…å’Œæ¯”è¾ƒã€‚ åŒ¹é…å®Œæˆåï¼Œå°†ä¸€ä¸ªç‚¹äº‘ä¸ç¬¬äºŒä¸ªç‚¹äº‘ä¸­å¯¹åº”çš„å¹³é¢å—ä¹‹é—´çš„è·ç¦»è§†ä¸ºåŒ¹é…è¯¯å·®ã€‚ å›¾ $11 $æ˜¾ç¤ºäº†è¯¯å·®åˆ†å¸ƒçš„å¯†åº¦ã€‚å®¤å†…åŒ¹é…è¯¯å·®å°äºå®¤å¤–åŒ¹é…è¯¯å·®ã€‚ç»“æœæ˜¯åˆç†çš„ï¼Œå› ä¸ºåœ¨è‡ªç„¶ç¯å¢ƒä¸­ç‰¹å¾åŒ¹é…ä¸å¦‚åœ¨äººé€ ç¯å¢ƒä¸­ç²¾ç¡®ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153427498.png" alt="image-20220410153427498" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾11æ‰€ç¤ºã€‚å»Šé“(çº¢è‰²)ã€å¤§å ‚(ç»¿è‰²)ã€ç»¿åŒ–è·¯(è“è‰²)ã€æœå›­(é»‘è‰²)çš„åŒ¹é…è¯¯å·®ï¼Œå¯¹åº”å›¾$10$ä¸­çš„å››ä¸ªåœºæ™¯ã€‚</p>
</blockquote>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153545569.png" alt="image-20220410153545569" style="zoom: 33%;" /></p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯¹è¿åŠ¨ä¼°è®¡çš„ç´¯ç§¯æ¼‚ç§»è¿›è¡Œäº†æµ‹è¯•ã€‚æˆ‘ä»¬é€‰æ‹©åŒ…å«é—­ç¯çš„èµ°å»Šè¿›è¡Œå®¤å†…å®éªŒã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€ä¸ªåœ°æ–¹å¼€å§‹å’Œç»“æŸã€‚è¿åŠ¨ä¼°è®¡åœ¨èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ä¹‹é—´äº§ç”Ÿä¸€ä¸ªé—´éš™ï¼Œè¯¥é—´éš™è¡¨æ˜äº†æ¼‚ç§»é‡ã€‚å¯¹äºæˆ·å¤–å®éªŒï¼Œæˆ‘ä»¬é€‰æ‹©æœå›­ç¯å¢ƒã€‚ æºå¸¦æ¿€å…‰é›·è¾¾çš„åœ°é¢è½¦è¾†é…å¤‡äº†é«˜ç²¾åº¦ $GPS/INS$ï¼Œç”¨äºè·å–åœ°é¢å®å†µã€‚ å°†æµ‹å¾—çš„æ¼‚ç§»ä¸è¡Œè¿›è·ç¦»ä½œä¸ºç›¸å¯¹ç²¾åº¦è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åˆ—äºè¡¨$ I$ã€‚å…·ä½“æ¥è¯´ï¼Œæµ‹è¯•$ 1 $ä½¿ç”¨ä¸å›¾ $10(a)$ å’Œå›¾ $10(g) $ç›¸åŒçš„æ•°æ®é›†ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå®¤å†…æµ‹è¯•çš„ç›¸å¯¹å‡†ç¡®åº¦åœ¨$ 1\% $å·¦å³ï¼Œå®¤å¤–æµ‹è¯•çš„ç›¸å¯¹å‡†ç¡®åº¦åœ¨ $2.5\% $å·¦å³ã€‚</p>
<h2 id="B-èåˆIMU"><a href="#B-èåˆIMU" class="headerlink" title="B.èåˆIMU"></a>B.èåˆIMU</h2><p>æˆ‘ä»¬å°†<code>Xsens MTi-10 IMU</code> è¿æ¥åˆ°æ¿€å…‰é›·è¾¾ä»¥åº”å¯¹å¿«é€Ÿçš„é€Ÿåº¦å˜åŒ–ã€‚ ç‚¹äº‘åœ¨å‘é€åˆ°æ‰€æå‡ºçš„æ–¹æ³•ä¹‹å‰ä»¥ä¸¤ç§æ–¹å¼è¿›è¡Œé¢„å¤„ç†ï¼Œ$1)$ ä½¿ç”¨æ¥è‡ª $IMU$ çš„æ–¹å‘ï¼Œåœ¨ä¸€æ¬¡æ‰«æä¸­æ¥æ”¶åˆ°çš„ç‚¹äº‘è¢«æ—‹è½¬ï¼Œä½¿å¾—ä¸è¯¥æ‰«æä¸­æ¿€å…‰é›·è¾¾çš„åˆå§‹æ–¹å‘å¯¹é½ï¼Œ$2)$ ä½¿ç”¨åŠ é€Ÿåº¦æµ‹é‡ ï¼Œè¿åŠ¨å¤±çœŸè¢«éƒ¨åˆ†æ¶ˆé™¤ï¼Œå°±å¥½åƒæ¿€å…‰é›·è¾¾åœ¨æ‰«æè¿‡ç¨‹ä¸­ä»¥æ’å®šé€Ÿåº¦ç§»åŠ¨ä¸€æ ·ã€‚ ç„¶åç”±æ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡å’Œå»ºå›¾ç¨‹åºå¤„ç†ç‚¹äº‘ã€‚</p>
<p>$IMU $å®šä½æ˜¯é€šè¿‡åœ¨å¡å°”æ›¼æ»¤æ³¢å™¨ [1] ä¸­é›†æˆæ¥è‡ªé™€èºä»ªçš„è§’é€Ÿç‡å’Œæ¥è‡ªåŠ é€Ÿåº¦è®¡çš„è¯»æ•°æ¥è·å¾—çš„ã€‚ å›¾ $12(a) $æ˜¾ç¤ºäº†ä¸€ä¸ªç¤ºä¾‹ç»“æœã€‚ ä¸€ä¸ªäººæ‹¿ç€æ¿€å…‰é›·è¾¾èµ°åœ¨æ¥¼æ¢¯ä¸Šã€‚ åœ¨è®¡ç®—çº¢è‰²æ›²çº¿æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ IMU æä¾›çš„æ–¹å‘ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åªä¼°è®¡å¹³ç§»ã€‚ åœ¨ $5 $åˆ†é’Ÿçš„æ•°æ®æ”¶é›†è¿‡ç¨‹ä¸­ï¼Œæ–¹å‘æ¼‚ç§»è¶…è¿‡ $25Â°$ã€‚ å‡è®¾æ²¡æœ‰å¯ç”¨çš„$ IMU$ï¼Œç»¿è‰²æ›²çº¿ä»…ä¾èµ–äºæˆ‘ä»¬æ–¹æ³•ä¸­çš„ä¼˜åŒ–ã€‚ è“è‰²æ›²çº¿ä½¿ç”¨$ IMU $æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œç„¶åé‡‡ç”¨æœ¬æ–‡æ–¹æ³•ã€‚ æˆ‘ä»¬è§‚å¯Ÿåˆ°ç»¿è‰²å’Œè“è‰²æ›²çº¿ä¹‹é—´çš„å¾®å°å·®å¼‚ã€‚ å›¾ $12(b) $ç»™å‡ºäº†å¯¹åº”äºè“è‰²æ›²çº¿çš„å›¾ã€‚ åœ¨å›¾$ 12(c)$ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†å›¾ $12(b)$ä¸­é»„è‰²çŸ©å½¢ä¸­åœ°å›¾çš„ä¸¤ä¸ªé—­åˆè§†å›¾ã€‚ ä¸Šå›¾å’Œä¸‹å›¾åˆ†åˆ«å¯¹åº”è“è‰²å’Œç»¿è‰²æ›²çº¿ã€‚ ä»”ç»†å¯¹æ¯”å‘ç°ï¼Œä¸Šå›¾çš„è¾¹ç¼˜æ›´åŠ æ¸…æ™°ã€‚</p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153604781.png" alt="image-20220410153604781" style="zoom:50%;" /></p>
<p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153615690.png" alt="image-20220410153615690" style="zoom:50%;" /></p>
<blockquote>
<p>å›¾ $12$æ‰€ç¤ºã€‚æœ‰/æ— $IMU$ è¾…åŠ©çš„ç»“æœæ¯”è¾ƒã€‚ ä¸€ä¸ªäººæ‹¿ç€æ¿€å…‰é›·è¾¾èµ°åœ¨æ¥¼æ¢¯ä¸Šã€‚ é»‘ç‚¹æ˜¯èµ·ç‚¹ã€‚ åœ¨$(a)$ä¸­ï¼Œçº¢è‰²æ›²çº¿ä½¿ç”¨æ¥è‡ª$ IMU $çš„æ–¹å‘å’Œæˆ‘ä»¬çš„æ–¹æ³•ä¼°è®¡çš„å¹³ç§»æ¥è®¡ç®—ï¼Œç»¿è‰²æ›²çº¿ä»…ä¾èµ–äºæˆ‘ä»¬æ–¹æ³•ä¸­çš„ä¼˜åŒ–ï¼Œè“è‰²æ›²çº¿ä½¿ç”¨$ IMU$æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œç„¶åå†è¿›è¡Œè¯¥æ–¹æ³•ã€‚ $(b)$æ˜¯å¯¹åº”äºè“è‰²æ›²çº¿çš„åœ°å›¾ã€‚ åœ¨$(c)$ä¸­ï¼Œä¸Šå›¾å’Œä¸‹å›¾åˆ†åˆ«å¯¹åº”äºè“è‰²å’Œç»¿è‰²æ›²çº¿ï¼Œä½¿ç”¨$(b)$ä¸­é»„è‰²çŸ©å½¢æ ‡è®°çš„åŒºåŸŸã€‚ ä¸Šå›¾ä¸­çš„è¾¹ç¼˜æ›´æ¸…æ™°ï¼Œè¡¨æ˜åœ°å›¾ä¸Šçš„å‡†ç¡®æ€§æ›´é«˜ã€‚</p>
</blockquote>
<p>è¡¨ $II$ æ¯”è¾ƒäº†ä½¿ç”¨å’Œä¸ä½¿ç”¨$ IMU $çš„è¿åŠ¨ä¼°è®¡çš„ç›¸å¯¹è¯¯å·®ã€‚ æ¿€å…‰é›·è¾¾ç”±ä¸€ä¸ªäººä»¥$0.5m/s $çš„é€Ÿåº¦è¡Œèµ°å¹¶ä»¥$ 0.5m $å·¦å³çš„å¹…åº¦ä¸Šä¸‹ç§»åŠ¨æ¿€å…‰é›·è¾¾ã€‚ åœ°é¢å®å†µ(ground truth)æ˜¯ç”±å·å°ºæ‰‹åŠ¨æµ‹é‡çš„ã€‚ åœ¨æ‰€æœ‰å››ä¸ªæµ‹è¯•ä¸­ï¼Œåœ¨$ IMU $çš„å¸®åŠ©ä¸‹ä½¿ç”¨æ‰€æå‡ºçš„æ–¹æ³•å¯ä»¥è·å¾—æœ€é«˜çš„å‡†ç¡®åº¦ï¼Œè€Œä½¿ç”¨ $IMU$ å®šä½åªä¼šå¯¼è‡´æœ€ä½çš„å‡†ç¡®åº¦ã€‚ ç»“æœè¡¨æ˜ï¼Œ$IMU$æœ‰æ•ˆåœ°æ¶ˆé™¤äº†éçº¿æ€§è¿åŠ¨ï¼Œæ‰€æå‡ºçš„æ–¹æ³•åˆ©ç”¨å®ƒæ¥å¤„ç†çº¿æ€§è¿åŠ¨ã€‚</p>
<h2 id="C-ä½¿ç”¨-KITTI-æ•°æ®é›†è¿›è¡Œæµ‹è¯•"><a href="#C-ä½¿ç”¨-KITTI-æ•°æ®é›†è¿›è¡Œæµ‹è¯•" class="headerlink" title="C.ä½¿ç”¨ KITTI æ•°æ®é›†è¿›è¡Œæµ‹è¯•"></a>C.ä½¿ç”¨ KITTI æ•°æ®é›†è¿›è¡Œæµ‹è¯•</h2><p><img src="/images/loamè®ºæ–‡ç¿»è¯‘/image-20220410153653541.png" alt="image-20220410153653541"></p>
<blockquote>
<p>å›¾ 13. $(a) $KITTI åŸºå‡†æµ‹è¯•ä½¿ç”¨çš„ä¼ æ„Ÿå™¨é…ç½®å’Œè½¦è¾†ã€‚è¯¥è½¦è¾†å®‰è£…æœ‰ Velodyne æ¿€å…‰é›·è¾¾ã€ç«‹ä½“æ‘„åƒå¤´å’Œç”¨äºè·å–åœ°é¢å®å†µçš„é«˜ç²¾åº¦ GPS/INSã€‚æˆ‘ä»¬çš„æ–¹æ³•ä»…ä½¿ç”¨æ¥è‡ª Velodyne æ¿€å…‰é›·è¾¾çš„æ•°æ®ã€‚$(b)$ æ¥è‡ªåŸå¸‚åœºæ™¯çš„ç¤ºä¾‹æ¿€å…‰é›·è¾¾äº‘ï¼ˆä¸Šå›¾ï¼‰å’Œç›¸åº”çš„è§†è§‰å›¾åƒï¼ˆä¸‹å›¾ï¼‰ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬è¿˜ä½¿ç”¨æ¥è‡ª KITTI é‡Œç¨‹è®¡åŸºå‡† [30]ã€[31] çš„æ•°æ®é›†è¯„ä¼°äº†æˆ‘ä»¬çš„æ–¹æ³•ã€‚æ•°æ®é›†ä»”ç»†åœ°ä¸å®‰è£…åœ¨ç»“æ„åŒ–é“è·¯ä¸Šè¡Œé©¶çš„ä¹˜ç”¨è½¦é¡¶éƒ¨çš„ä¼ æ„Ÿå™¨ç›¸æ³¨å†Œï¼ˆå›¾ $13(a)$ï¼‰ã€‚è½¦è¾†é…å¤‡$ 360Â° $Velodyne æ¿€å…‰é›·è¾¾ã€å½©è‰²/å•è‰²ç«‹ä½“æ‘„åƒå¤´ã€ä»¥åŠç”¨äºåœ°é¢å®å†µ(ground truth)çš„é«˜ç²¾åº¦ GPS/INSï¼Œæ¿€å…‰é›·è¾¾æ•°æ®ä»¥ $10Hz $è®°å½•ï¼Œå¹¶ç”±æˆ‘ä»¬çš„æ–¹æ³•ç”¨äºé‡Œç¨‹è®¡ä¼°è®¡ã€‚ç”±äºç¯‡å¹…é—®é¢˜ï¼Œæˆ‘ä»¬æ— æ³•å°†ç»“æœåŒ…æ‹¬åœ¨å†…ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬é¼“åŠ±è¯»è€…åœ¨è¯„ä¼°(benchmark)ç½‘ç«™ä¸ŠæŸ¥çœ‹æˆ‘ä»¬çš„ç»“æœ$^3$ã€‚</p>
<blockquote>
<p>3www.cvlibs.net/datasets/kitti/eval_odometry.php</p>
</blockquote>
<p>æ•°æ®é›†ä¸»è¦æ¶µç›–ä¸‰ç±»ç¯å¢ƒï¼šå‘¨å›´æœ‰å»ºç­‘ç‰©çš„â€œåŸå¸‚â€ã€åœºæ™¯ä¸­æœ‰æ¤è¢«çš„å°è·¯ä¸Šçš„â€œä¹¡æ‘â€ä»¥åŠé“è·¯è¾ƒå®½ä¸”å‘¨å›´ç¯å¢ƒç›¸å¯¹å¹²å‡€çš„â€œé«˜é€Ÿå…¬è·¯â€ã€‚å›¾ 13$(b)$ æ˜¾ç¤ºäº†ä¸€ä¸ªç¤ºä¾‹æ¿€å…‰é›·è¾¾äº‘å’Œæ¥è‡ªåŸå¸‚ç¯å¢ƒçš„ç›¸åº”è§†è§‰å›¾åƒã€‚æ•°æ®é›†ä¸­åŒ…å«çš„æ€»è¡Œé©¶è·ç¦»ä¸º$ 39.2 $å…¬é‡Œã€‚ä¸Šä¼ è½¦è¾†è½¨è¿¹åï¼Œè¯„ä¼°(benchmark)æœåŠ¡å™¨ä¼šè‡ªåŠ¨è®¡ç®—å‡†ç¡®æ€§å’Œæ’åã€‚æˆ‘ä»¬çš„æ–¹æ³•åœ¨è¯„ä¼°(benchmark)çš„æ‰€æœ‰æ–¹æ³•ä¸­æ’åç¬¬ä¸€ï¼Œæ— è®ºä¼ æ„Ÿæ–¹å¼å¦‚ä½•ï¼ŒåŒ…æ‹¬æœ€å…ˆè¿›çš„ç«‹ä½“è§†è§‰é‡Œç¨‹è®¡ [32]ã€[33]ã€‚å¹³å‡ä½ç½®è¯¯å·®æ˜¯è¡Œè¿›è·ç¦»çš„ $0.88\%$ï¼Œä½¿ç”¨ $3D $åæ ‡ä¸­ $100mã€200mã€â€¦ã€800m $é•¿åº¦çš„è½¨è¿¹æ®µç”Ÿæˆã€‚</p>
<h1 id="VIII-ç»“è®ºå’Œæœªæ¥çš„å·¥ä½œ"><a href="#VIII-ç»“è®ºå’Œæœªæ¥çš„å·¥ä½œ" class="headerlink" title="VIII. ç»“è®ºå’Œæœªæ¥çš„å·¥ä½œ"></a>VIII. ç»“è®ºå’Œæœªæ¥çš„å·¥ä½œ</h1><p>ä½¿ç”¨æ¥è‡ªæ—‹è½¬æ¿€å…‰æ‰«æä»ªçš„ç‚¹äº‘è¿›è¡Œè¿åŠ¨ä¼°è®¡å’Œå»ºå›¾å¯èƒ½å¾ˆå›°éš¾ï¼Œå› ä¸ºè¯¥é—®é¢˜æ¶‰åŠæ¿€å…‰é›·è¾¾äº‘ä¸­è¿åŠ¨çš„æ¢å¤å’Œè¿åŠ¨å¤±çœŸçš„æ ¡æ­£ã€‚æ‰€æå‡ºçš„æ–¹æ³•é€šè¿‡å¹¶è¡Œè¿è¡Œçš„ä¸¤ç§ç®—æ³•æ¥åˆ’åˆ†å’Œè§£å†³é—®é¢˜ï¼šæ¿€å…‰é›·è¾¾é‡Œç¨‹è®¡è¿›è¡Œç²—ç•¥å¤„ç†ä»¥ä¼°è®¡è¾ƒé«˜é¢‘ç‡çš„é€Ÿåº¦ï¼Œè€Œæ¿€å…‰é›·è¾¾å»ºå›¾æ‰§è¡Œç²¾ç»†å¤„ç†ä»¥åœ¨è¾ƒä½é¢‘ç‡åˆ›å»ºåœ°å›¾ã€‚ä¸¤ç§ç®—æ³•çš„åˆä½œå…è®¸å®æ—¶å‡†ç¡®çš„è¿åŠ¨ä¼°è®¡å’Œå»ºå›¾ã€‚æ­¤å¤–ï¼Œè¯¥æ–¹æ³•å¯ä»¥åˆ©ç”¨æ¿€å…‰é›·è¾¾æ‰«ææ¨¡å¼å’Œç‚¹äº‘åˆ†å¸ƒã€‚è¿›è¡Œç‰¹å¾åŒ¹é…ä»¥ç¡®ä¿é‡Œç¨‹è®¡ç®—æ³•ä¸­çš„å¿«é€Ÿè®¡ç®—ï¼Œå¹¶å¢å»ºå›¾ç®—æ³•çš„å‡†ç¡®æ€§ã€‚è¯¥æ–¹æ³•å·²åœ¨å®¤å†…å’Œå®¤å¤–ä»¥åŠ KITTI é‡Œç¨‹è®¡è¯„ä¼°(benchmark)ä¸Šè¿›è¡Œäº†æµ‹è¯•ã€‚</p>
<p>ç”±äºå½“å‰çš„æ–¹æ³•ä¸èƒ½è¯†åˆ«é—­ç¯ï¼Œæˆ‘ä»¬æœªæ¥çš„å·¥ä½œåŒ…æ‹¬å¼€å‘ä¸€ç§é€šè¿‡é—­ç¯æ¥ä¿®å¤è¿åŠ¨ä¼°è®¡æ¼‚ç§»çš„æ–¹æ³•ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬æ–¹æ³•çš„è¾“å‡ºä¸å¡å°”æ›¼æ»¤æ³¢å™¨ä¸­çš„ IMU é›†æˆï¼Œä»¥è¿›ä¸€æ­¥å‡å°‘è¿åŠ¨ä¼°è®¡æ¼‚ç§»ã€‚</p>
]]></content>
      <categories>
        <category>æ¿€å…‰SLAM</category>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>æ¿€å…‰SLAM</tag>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
        <tag>LOAM</tag>
      </tags>
  </entry>
  <entry>
    <title>ch11_å®è·µä½å§¿å›¾ä¼˜åŒ–</title>
    <url>/posts/40808.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªåªæœ‰è½¨è¿¹çš„å›¾ä¼˜åŒ–ï¼Œè€Œä½å§¿èŠ‚ç‚¹ä¹‹é—´çš„è¾¹ï¼Œå¯ä»¥ç”±ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´é€šè¿‡ç‰¹å¾åŒ¹é…ä¹‹åå¾—åˆ°çš„è¿åŠ¨ä¼°è®¡æ¥ç»™å®šåˆå§‹å€¼ã€‚ä¸åŒçš„æ˜¯ï¼Œä¸€æ—¦åˆå§‹ä¼°è®¡å®Œæˆï¼Œæˆ‘ä»¬å°±ä¸å†ä¼˜åŒ–é‚£äº›è·¯æ ‡ç‚¹çš„ä½ç½®ï¼Œè€Œåªå…³å¿ƒæ‰€æœ‰çš„ç›¸æœºä½å§¿ä¹‹é—´çš„è”ç³»äº†ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬çœå»äº†å¤§é‡çš„ç‰¹å¾ç‚¹ä¼˜åŒ–çš„è®¡ç®—ï¼Œåªä¿ç•™äº†å…³é”®å¸§çš„è½¨è¿¹ï¼Œä»è€Œæ„å»ºäº†æ‰€è°“çš„ä½å§¿å›¾ï¼ˆPose Graphï¼‰ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>æˆ‘ä»¬å°†å¸¦æœ‰ç›¸æœºä½å§¿å’Œç©ºé—´ç‚¹çš„å›¾ä¼˜åŒ–ç§°ä¸º BAï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°æ±‚è§£å¤§è§„æ¨¡çš„å®šä½ä¸å»ºå›¾é—®é¢˜ã€‚ä½†æ˜¯è€ƒè™‘å¤§åœºæ™¯ä»¥åŠå®æ—¶æ€§çš„è¦æ±‚ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æƒ³åŠæ³•ç¼©å‡è®¡ç®—é‡ï¼Œè¿™å°±æ˜¯å¼•å…¥ä½å§¿å›¾çš„æ„ä¹‰ã€‚</p>
<p><img src="/images/å®è·µä½å§¿å›¾ä¼˜åŒ–/image-20220407170107621.png" alt="image-20220407170107621"></p>
<h1 id="g2o-åŸç”Ÿä½å§¿å›¾"><a href="#g2o-åŸç”Ÿä½å§¿å›¾" class="headerlink" title="g2o åŸç”Ÿä½å§¿å›¾"></a>g2o åŸç”Ÿä½å§¿å›¾</h1><p>Pose Graph å›¾ä¼˜åŒ–çš„<strong>èŠ‚ç‚¹</strong>è¡¨ç¤ºç›¸æœºä½å§¿ï¼Œä»¥ $\xi_1,\xi_2,â€¦,\xi_n$æ¥è¡¨è¾¾ã€‚è€Œ<strong>è¾¹</strong>ï¼Œåˆ™æ˜¯ä¸¤ä¸ªä½å§¿èŠ‚ç‚¹ä¹‹é—´ç›¸å¯¹è¿åŠ¨çš„ä¼°è®¡ï¼Œè¯¥ä¼°è®¡å¯èƒ½æ¥è‡ªäºç‰¹å¾ç‚¹æ³•æˆ–ç›´æ¥æ³•ã€‚</p>
<p><img src="/images/å®è·µä½å§¿å›¾ä¼˜åŒ–/image-20220408092815957.png" alt="image-20220408092815957" style="zoom:50%;" /></p>
<p><code>g2o</code>ä»¿çœŸäº§ç”Ÿçš„ä½å§¿å›¾ï¼Œç”± <code>g2o</code>è‡ªå¸¦çš„ create sphere ç¨‹åºä»¿çœŸç”Ÿæˆçš„ã€‚å®ƒçš„çœŸå®è½¨è¿¹ä¸ºä¸€ä¸ªçƒï¼Œç”±ä»ä¸‹å¾€ä¸Šçš„å¤šä¸ªå±‚ç»„æˆã€‚æ¯å±‚ä¸ºä¸€ä¸ªæ­£åœ†å½¢ï¼Œå¾ˆå¤šä¸ªå¤§å°ä¸ä¸€çš„åœ†å½¢å±‚ç»„æˆäº†ä¸€ä¸ªå®Œæ•´çš„çƒä½“ï¼Œå…±åŒ…å« 2500 ä¸ªä½å§¿èŠ‚ç‚¹ï¼Œå¯ä»¥çœ‹æˆä¸€ä¸ªè½¬åœˆä¸Šå‡çš„è¿‡ç¨‹ã€‚ç„¶åï¼Œä»¿çœŸç¨‹åºç”Ÿæˆäº†$ t âˆ’ 1 $åˆ° $t$ æ—¶åˆ»çš„è¾¹ï¼Œç§°ä¸º<code>odometry</code><strong>è¾¹ï¼ˆé‡Œç¨‹è®¡ï¼‰</strong>ã€‚æ­¤å¤–ï¼Œåˆç”Ÿæˆå±‚ä¸å±‚ä¹‹é—´çš„è¾¹ï¼Œç§°ä¸º <strong>loop closureï¼ˆå›ç¯ï¼‰</strong>ã€‚</p>
<p>sphere.g2o ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼ŒæŸ¥çœ‹å®ƒé‡Œé¢çš„å†…å®¹ã€‚æ–‡ä»¶å‰åŠéƒ¨åˆ†ç”±èŠ‚ç‚¹ç»„æˆï¼ŒååŠéƒ¨åˆ†åˆ™æ˜¯è¾¹ï¼š</p>
<p><img src="/images/å®è·µä½å§¿å›¾ä¼˜åŒ–/image-20220408093444275.png" alt="image-20220408093444275"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒèŠ‚ç‚¹ç±»å‹æ˜¯ VERTEX_SE3ï¼Œè¡¨è¾¾ä¸€ä¸ªç›¸æœºä½å§¿ã€‚ g2o é»˜è®¤ä½¿ç”¨å››å…ƒæ•°å’Œå¹³ç§»å‘é‡è¡¨è¾¾ä½å§¿ï¼Œæ‰€ä»¥åé¢çš„å­—æ®µæ„ä¹‰ä¸ºï¼š$ IDï¼Œ t_x , t_y , t_z , q_x , q_y , q_z , q_w $ã€‚å‰ä¸‰ä¸ªä¸ºå¹³ç§»å‘é‡å…ƒç´ ï¼Œåå››ä¸ªä¸ºè¡¨ç¤ºæ—‹è½¬çš„å•ä½å››å…ƒæ•°ã€‚åŒæ ·ï¼Œè¾¹çš„ä¿¡æ¯ä¸ºï¼šä¸¤ä¸ªèŠ‚ç‚¹çš„ $IDï¼Œ t _x , t _y , t _z , q _x , q _y , q _z , q _w$ ï¼Œä¿¡æ¯çŸ©é˜µçš„å³ä¸Šè§’ï¼ˆç”±äºä¿¡æ¯çŸ©é˜µä¸ºå¯¹ç§°é˜µï¼Œåªéœ€ä¿å­˜ä¸€åŠå³å¯ï¼‰ã€‚å¯ä»¥çœ‹åˆ°è¿™é‡ŒæŠŠä¿¡æ¯çŸ©é˜µè®¾æˆäº†å¯¹è§’é˜µã€‚</p>
<p>ä¸ºäº†ä¼˜åŒ–è¯¥ä½å§¿å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ g2o é»˜è®¤çš„é¡¶ç‚¹å’Œè¾¹ï¼Œå®ƒä»¬æ˜¯ç”±å››å…ƒæ•°è¡¨ç¤ºçš„ã€‚ç”±äºä»¿çœŸæ•°æ®ä¹Ÿæ˜¯ g2o ç”Ÿæˆçš„ï¼Œæ‰€ä»¥ç”¨ g2o æœ¬èº«ä¼˜åŒ–å°±æ— éœ€æˆ‘ä»¬å¤šåšä»€ä¹ˆå·¥ä½œäº†ï¼Œåªéœ€é…ç½®ä¸€ä¸‹ä¼˜åŒ–å‚æ•°å³å¯ã€‚</p>
<p><code>pose_graph_g2o_SE3.cpp</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/types/slam3d/types_slam3d.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/block_solver.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/optimization_algorithm_levenberg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/optimization_algorithm_gauss_newton.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/solvers/dense/linear_solver_dense.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/solvers/cholmod/linear_solver_cholmod.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************</span></span><br><span class="line"><span class="comment"> * æœ¬ç¨‹åºæ¼”ç¤ºå¦‚ä½•ç”¨g2o solverè¿›è¡Œä½å§¿å›¾ä¼˜åŒ–</span></span><br><span class="line"><span class="comment"> * sphere.g2oæ˜¯äººå·¥ç”Ÿæˆçš„ä¸€ä¸ªPose graphï¼Œæˆ‘ä»¬æ¥ä¼˜åŒ–å®ƒã€‚</span></span><br><span class="line"><span class="comment"> * å°½ç®¡å¯ä»¥ç›´æ¥é€šè¿‡loadå‡½æ•°è¯»å–æ•´ä¸ªå›¾ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯è‡ªå·±æ¥å®ç°è¯»å–ä»£ç ï¼Œä»¥æœŸè·å¾—æ›´æ·±åˆ»çš„ç†è§£</span></span><br><span class="line"><span class="comment"> * è¿™é‡Œä½¿ç”¨g2o/types/slam3d/ä¸­çš„SE3è¡¨ç¤ºä½å§¿ï¼Œå®ƒå®è´¨ä¸Šæ˜¯å››å…ƒæ•°è€Œéæä»£æ•°.</span></span><br><span class="line"><span class="comment"> * **********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ä¼ å…¥å¾…ä¼˜åŒ–çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥æ–‡ä»¶ sphere.g2o&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(argv[<span class="number">1</span>])</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!fin)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ–‡ä»¶&quot;</span> &lt;&lt; argv[<span class="number">1</span>] &lt;&lt; <span class="string">&quot;ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€‰æ‹©äº† 6Ã—6 çš„å—æ±‚è§£å™¨</span></span><br><span class="line">    <span class="keyword">typedef</span> g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;<span class="number">6</span>, <span class="number">6</span>&gt;&gt; Block;</span><br><span class="line">    <span class="comment">// 1.çº¿æ€§æ–¹ç¨‹æ±‚è§£å™¨ï¼ˆLinearSolverCholmodä½¿ç”¨sparse choleskyåˆ†è§£æ³•ã€‚ç»§æ‰¿è‡ªLinearSolverCCSï¼‰</span></span><br><span class="line">    Block::LinearSolverType *linearSolver = <span class="keyword">new</span> g2o::LinearSolverCholmod&lt;Block::PoseMatrixType&gt;();</span><br><span class="line">    <span class="comment">// 2.çŸ©é˜µå—æ±‚è§£å™¨</span></span><br><span class="line">    Block *solver_ptr = <span class="keyword">new</span> <span class="built_in">Block</span>(unique_ptr&lt;Block::LinearSolverType&gt;(linearSolver));</span><br><span class="line">    <span class="comment">// 3.åˆ›å»ºæ€»æ±‚è§£å™¨solverã€‚ï¼ˆæ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œä»GN, LM, DogLeg ä¸­é€‰ï¼‰</span></span><br><span class="line">    g2o::OptimizationAlgorithmLevenberg *solver = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmLevenberg</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line">    <span class="comment">// 4ã€åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</span></span><br><span class="line">    g2o::SparseOptimizer optimizer; <span class="comment">// åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</span></span><br><span class="line">    optimizer.<span class="built_in">setAlgorithm</span>(solver); <span class="comment">// ç”¨å‰é¢å®šä¹‰å¥½çš„æ±‚è§£å™¨ä½œä¸ºæ±‚è§£æ–¹æ³•ï¼šï¼ˆä½¿ç”¨LMæ–¹æ³•ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> vertexCnt = <span class="number">0</span>, edgeCnt = <span class="number">0</span>; <span class="comment">// é¡¶ç‚¹å’Œè¾¹çš„æ•°é‡</span></span><br><span class="line">    <span class="keyword">while</span> (!fin.<span class="built_in">eof</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è¯»æ–‡ä»¶ sphere.g2o</span></span><br><span class="line">        string name;</span><br><span class="line">        fin &gt;&gt; name;</span><br><span class="line">        <span class="keyword">if</span> (name == <span class="string">&quot;VERTEX_SE3:QUAT&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// SE3 é¡¶ç‚¹</span></span><br><span class="line">            g2o::VertexSE3 *v = <span class="keyword">new</span> g2o::<span class="built_in">VertexSE3</span>();</span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">            fin &gt;&gt; index;</span><br><span class="line">            v-&gt;<span class="built_in">setId</span>(index);</span><br><span class="line">            v-&gt;<span class="built_in">read</span>(fin);</span><br><span class="line">            optimizer.<span class="built_in">addVertex</span>(v);</span><br><span class="line">            vertexCnt++;</span><br><span class="line">            <span class="keyword">if</span> (index == <span class="number">0</span>)</span><br><span class="line">                v-&gt;<span class="built_in">setFixed</span>(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (name == <span class="string">&quot;EDGE_SE3:QUAT&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// SE3-SE3 è¾¹</span></span><br><span class="line">            g2o::EdgeSE3 *e = <span class="keyword">new</span> g2o::<span class="built_in">EdgeSE3</span>();</span><br><span class="line">            <span class="keyword">int</span> idx1, idx2;</span><br><span class="line">            fin &gt;&gt; idx1 &gt;&gt; idx2;</span><br><span class="line">            e-&gt;<span class="built_in">setId</span>(edgeCnt++);</span><br><span class="line">            e-&gt;<span class="built_in">setVertex</span>(<span class="number">0</span>, optimizer.<span class="built_in">vertices</span>()[idx1]);</span><br><span class="line">            e-&gt;<span class="built_in">setVertex</span>(<span class="number">1</span>, optimizer.<span class="built_in">vertices</span>()[idx2]);</span><br><span class="line">            e-&gt;<span class="built_in">read</span>(fin);</span><br><span class="line">            optimizer.<span class="built_in">addEdge</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!fin.<span class="built_in">good</span>())</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯»åˆ°&quot;</span> &lt;&lt; vertexCnt &lt;&lt; <span class="string">&quot;ä¸ªç‚¹ï¼Œ&quot;</span> &lt;&lt; edgeCnt &lt;&lt; <span class="string">&quot;ä¸ªè¾¹&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å‡†å¤‡ä¼˜åŒ–......&quot;</span> &lt;&lt; endl;</span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);</span><br><span class="line">    optimizer.<span class="built_in">initializeOptimization</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ‰§è¡Œä¼˜åŒ–......&quot;</span> &lt;&lt; endl;</span><br><span class="line">    optimizer.<span class="built_in">optimize</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¿å­˜ä¼˜åŒ–ç»“æœ......&quot;</span> &lt;&lt; endl;</span><br><span class="line">    optimizer.<span class="built_in">save</span>(<span class="string">&quot;result.g2o&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>CMakeLists.txt</code></p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( pose_graph )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14 -O3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">list</span>( APPEND CMAKE_MODULE_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/cmake_modules )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Eigen</span></span><br><span class="line"><span class="keyword">include_directories</span>( <span class="string">&quot;/usr/include/eigen3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># sophus </span></span><br><span class="line"><span class="keyword">find_package</span>( Sophus REQUIRED )</span><br><span class="line"><span class="comment"># Sophusé“¾æ¥é”™è¯¯</span></span><br><span class="line"><span class="keyword">set</span>(Sophus_LIBRARIES libSophus.so)</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;Sophus_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># g2o </span></span><br><span class="line"><span class="keyword">find_package</span>( G2O REQUIRED )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;G2O_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>( Cholmod REQUIRED )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;CHOLMOD_INCLUDE_DIR&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( pose_graph_g2o_SE3 pose_graph_g2o_SE3.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( pose_graph_g2o_SE3</span><br><span class="line">    g2o_core g2o_stuff g2o_types_slam3d <span class="variable">$&#123;CHOLMOD_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ä¼˜åŒ–ç»“æŸæ‰§è¡Œæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰§è¡Œæ–‡ä»¶</span></span><br><span class="line">./build/pose_graph_g2o_SE3 ../sphere.g2o  </span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¼˜åŒ–å¤Ÿçš„ä½å§¿å›¾</span></span><br><span class="line">g2o_viewer result.g2o </span><br></pre></td></tr></table></figure>
<p><img src="/images/å®è·µä½å§¿å›¾ä¼˜åŒ–/image-20220408142818313.png" alt="image-20220408142818313" style="zoom:50%;" /></p>
<h1 id="æä»£æ•°ä¸Šçš„ä½å§¿å›¾ä¼˜åŒ–"><a href="#æä»£æ•°ä¸Šçš„ä½å§¿å›¾ä¼˜åŒ–" class="headerlink" title="æä»£æ•°ä¸Šçš„ä½å§¿å›¾ä¼˜åŒ–"></a>æä»£æ•°ä¸Šçš„ä½å§¿å›¾ä¼˜åŒ–</h1><p>æŠŠ Sophus ç”¨åˆ° g2o ä¸­ï¼Œå®šä¹‰è‡ªå·±çš„é¡¶ç‚¹å’Œè¾¹å§ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç»™å®šè¯¯å·®æ±‚J_R^&#123;-1&#125;çš„è¿‘ä¼¼</span></span><br><span class="line"><span class="keyword">typedef</span> Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">6</span>, <span class="number">6</span>&gt; Matrix6d;</span><br><span class="line"><span class="function">Matrix6d <span class="title">JRInv</span><span class="params">(SE3 e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Matrix6d J;</span><br><span class="line">    J.<span class="built_in">block</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>) = SO3::<span class="built_in">hat</span>(e.<span class="built_in">so3</span>().<span class="built_in">log</span>());</span><br><span class="line">    J.<span class="built_in">block</span>(<span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>) = SO3::<span class="built_in">hat</span>(e.<span class="built_in">translation</span>());</span><br><span class="line">    J.<span class="built_in">block</span>(<span class="number">3</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>) = Eigen::Matrix3d::<span class="built_in">Zero</span>(<span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">    J.<span class="built_in">block</span>(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>) = SO3::<span class="built_in">hat</span>(e.<span class="built_in">so3</span>().<span class="built_in">log</span>());</span><br><span class="line">    J = J * <span class="number">0.5</span> + Matrix6d::<span class="built_in">Identity</span>();</span><br><span class="line">    <span class="keyword">return</span> J;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®šä¹‰æä»£æ•°é¡¶ç‚¹"><a href="#å®šä¹‰æä»£æ•°é¡¶ç‚¹" class="headerlink" title="å®šä¹‰æä»£æ•°é¡¶ç‚¹"></a>å®šä¹‰æä»£æ•°é¡¶ç‚¹</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æä»£æ•°é¡¶ç‚¹</span></span><br><span class="line"><span class="keyword">typedef</span> Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">6</span>, <span class="number">1</span>&gt; Vector6d;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VertexSE3LieAlgebra</span> :</span> <span class="keyword">public</span> g2o::BaseVertex&lt;<span class="number">6</span>, SE3&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span></span><br><span class="line"><span class="function">    <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;is)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> data[<span class="number">7</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++)</span><br><span class="line">            is &gt;&gt; data[i];</span><br><span class="line">        <span class="built_in">setEstimate</span>(<span class="built_in">SE3</span>(Eigen::<span class="built_in">Quaterniond</span>(data[<span class="number">6</span>], data[<span class="number">3</span>], data[<span class="number">4</span>], data[<span class="number">5</span>]),</span><br><span class="line">                        Eigen::<span class="built_in">Vector3d</span>(data[<span class="number">0</span>], data[<span class="number">1</span>], data[<span class="number">2</span>])));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;os)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        os &lt;&lt; <span class="built_in">id</span>() &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        Eigen::Quaterniond q = _estimate.<span class="built_in">unit_quaternion</span>();</span><br><span class="line">        os &lt;&lt; _estimate.<span class="built_in">translation</span>().<span class="built_in">transpose</span>() &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        os &lt;&lt; q.<span class="built_in">coeffs</span>()[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; q.<span class="built_in">coeffs</span>()[<span class="number">1</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; q.<span class="built_in">coeffs</span>()[<span class="number">2</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; q.<span class="built_in">coeffs</span>()[<span class="number">3</span>] &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setToOriginImpl</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _estimate = Sophus::<span class="built_in">SE3</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å·¦ä¹˜æ›´æ–°</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">oplusImpl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">double</span> *update)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="function">Sophus::SE3 <span class="title">up</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            Sophus::SO3(update[<span class="number">3</span>], update[<span class="number">4</span>], update[<span class="number">5</span>]),</span></span></span><br><span class="line"><span class="params"><span class="function">            Eigen::Vector3d(update[<span class="number">0</span>], update[<span class="number">1</span>], update[<span class="number">2</span>]))</span></span>;</span><br><span class="line">        _estimate = up * _estimate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="å®šä¹‰æä»£æ•°èŠ‚ç‚¹ä¹‹è¾¹"><a href="#å®šä¹‰æä»£æ•°èŠ‚ç‚¹ä¹‹è¾¹" class="headerlink" title="å®šä¹‰æä»£æ•°èŠ‚ç‚¹ä¹‹è¾¹"></a>å®šä¹‰æä»£æ•°èŠ‚ç‚¹ä¹‹è¾¹</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸¤ä¸ªæä»£æ•°èŠ‚ç‚¹ä¹‹è¾¹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EdgeSE3LieAlgebra</span> :</span> <span class="keyword">public</span> g2o::BaseBinaryEdge&lt;<span class="number">6</span>, SE3, VertexSE3LieAlgebra, VertexSE3LieAlgebra&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span></span><br><span class="line"><span class="function">    <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;is)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> data[<span class="number">7</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++)</span><br><span class="line">            is &gt;&gt; data[i];</span><br><span class="line">        <span class="function">Eigen::Quaterniond <span class="title">q</span><span class="params">(data[<span class="number">6</span>], data[<span class="number">3</span>], data[<span class="number">4</span>], data[<span class="number">5</span>])</span></span>;</span><br><span class="line">        q.<span class="built_in">normalize</span>();</span><br><span class="line">        <span class="built_in">setMeasurement</span>(Sophus::<span class="built_in">SE3</span>(q, Eigen::<span class="built_in">Vector3d</span>(data[<span class="number">0</span>], data[<span class="number">1</span>], data[<span class="number">2</span>])));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">information</span>().<span class="built_in">rows</span>() &amp;&amp; is.<span class="built_in">good</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; <span class="built_in">information</span>().<span class="built_in">cols</span>() &amp;&amp; is.<span class="built_in">good</span>(); j++)</span><br><span class="line">            &#123;</span><br><span class="line">                is &gt;&gt; <span class="built_in">information</span>()(i, j);</span><br><span class="line">                <span class="keyword">if</span> (i != j)</span><br><span class="line">                    <span class="built_in">information</span>()(j, i) = <span class="built_in">information</span>()(i, j);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;os)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        VertexSE3LieAlgebra *v1 = <span class="keyword">static_cast</span>&lt;VertexSE3LieAlgebra *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">        VertexSE3LieAlgebra *v2 = <span class="keyword">static_cast</span>&lt;VertexSE3LieAlgebra *&gt;(_vertices[<span class="number">1</span>]);</span><br><span class="line">        os &lt;&lt; v1-&gt;<span class="built_in">id</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; v2-&gt;<span class="built_in">id</span>() &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        SE3 m = _measurement;</span><br><span class="line">        Eigen::Quaterniond q = m.<span class="built_in">unit_quaternion</span>();</span><br><span class="line">        os &lt;&lt; m.<span class="built_in">translation</span>().<span class="built_in">transpose</span>() &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        os &lt;&lt; q.<span class="built_in">coeffs</span>()[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; q.<span class="built_in">coeffs</span>()[<span class="number">1</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; q.<span class="built_in">coeffs</span>()[<span class="number">2</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; q.<span class="built_in">coeffs</span>()[<span class="number">3</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="comment">// information matrix</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">information</span>().<span class="built_in">rows</span>(); i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; <span class="built_in">information</span>().<span class="built_in">cols</span>(); j++)</span><br><span class="line">            &#123;</span><br><span class="line">                os &lt;&lt; <span class="built_in">information</span>()(i, j) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        os &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯¯å·®è®¡ç®—ä¸ä¹¦ä¸­æ¨å¯¼ä¸€è‡´</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Sophus::SE3 v1 = (<span class="keyword">static_cast</span>&lt;VertexSE3LieAlgebra *&gt;(_vertices[<span class="number">0</span>]))-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">        Sophus::SE3 v2 = (<span class="keyword">static_cast</span>&lt;VertexSE3LieAlgebra *&gt;(_vertices[<span class="number">1</span>]))-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">        _error = (_measurement.<span class="built_in">inverse</span>() * v1.<span class="built_in">inverse</span>() * v2).<span class="built_in">log</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é›…å¯æ¯”è®¡ç®—</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">linearizeOplus</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Sophus::SE3 v1 = (<span class="keyword">static_cast</span>&lt;VertexSE3LieAlgebra *&gt;(_vertices[<span class="number">0</span>]))-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">        Sophus::SE3 v2 = (<span class="keyword">static_cast</span>&lt;VertexSE3LieAlgebra *&gt;(_vertices[<span class="number">1</span>]))-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">        Matrix6d J = <span class="built_in">JRInv</span>(SE3::<span class="built_in">exp</span>(_error));</span><br><span class="line">        <span class="comment">// å°è¯•æŠŠJè¿‘ä¼¼ä¸ºIï¼Ÿ</span></span><br><span class="line">        _jacobianOplusXi = -J * v2.<span class="built_in">inverse</span>().<span class="built_in">Adj</span>();</span><br><span class="line">        _jacobianOplusXj = J * v2.<span class="built_in">inverse</span>().<span class="built_in">Adj</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰æ–‡ä»¶ä¼ å…¥</span></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·ä¼ å…¥æ–‡ä»¶sphere.g2o&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ifstream fin;</span><br><span class="line">    <span class="keyword">if</span> (!fin)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ–‡ä»¶&quot;</span> &lt;&lt; argv[<span class="number">1</span>] &lt;&lt; <span class="string">&quot;ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€‰æ‹©äº† 6Ã—6 çš„å—æ±‚è§£å™¨</span></span><br><span class="line">    <span class="keyword">typedef</span> g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;<span class="number">6</span>, <span class="number">6</span>&gt;&gt; Block;</span><br><span class="line">    <span class="comment">// 1.çº¿æ€§æ–¹ç¨‹æ±‚è§£å™¨ï¼ˆLinearSolverCholmodä½¿ç”¨sparse choleskyåˆ†è§£æ³•ã€‚ç»§æ‰¿è‡ªLinearSolverCCSï¼‰</span></span><br><span class="line">    Block::LinearSolverType *linearSolver = <span class="keyword">new</span> g2o::LinearSolverCholmod&lt;Block::PoseMatrixType&gt;();</span><br><span class="line">    <span class="comment">// 2.çŸ©é˜µå—æ±‚è§£å™¨</span></span><br><span class="line">    Block *solver_ptr = <span class="keyword">new</span> <span class="built_in">Block</span>(unique_ptr&lt;Block::LinearSolverType&gt;(linearSolver));</span><br><span class="line">    <span class="comment">// 3.åˆ›å»ºæ€»æ±‚è§£å™¨solverã€‚ï¼ˆæ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œä»GN, LM, DogLeg ä¸­é€‰ï¼‰</span></span><br><span class="line">    g2o::OptimizationAlgorithmLevenberg *solver = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmLevenberg</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line">    <span class="comment">// 4ã€åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</span></span><br><span class="line">    g2o::SparseOptimizer optimizer; <span class="comment">// åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</span></span><br><span class="line">    optimizer.<span class="built_in">setAlgorithm</span>(solver); <span class="comment">// ç”¨å‰é¢å®šä¹‰å¥½çš„æ±‚è§£å™¨ä½œä¸ºæ±‚è§£æ–¹æ³•ï¼šï¼ˆä½¿ç”¨LMæ–¹æ³•ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> vertexCnt = <span class="number">0</span>, edgeCnt = <span class="number">0</span>; <span class="comment">// é¡¶ç‚¹å’Œè¾¹çš„æ•°é‡</span></span><br><span class="line">    vector&lt;VertexSE3LieAlgebra *&gt; vectices;</span><br><span class="line">    vector&lt;EdgeSE3LieAlgebra *&gt; edges;</span><br><span class="line">    <span class="keyword">while</span> (!fin.<span class="built_in">eof</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è¯»æ–‡ä»¶ sphere.g2o</span></span><br><span class="line">        string name;</span><br><span class="line">        fin &gt;&gt; name;</span><br><span class="line">        <span class="keyword">if</span> (name == <span class="string">&quot;VERTEX_SE3:QUAT&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// SE3 é¡¶ç‚¹</span></span><br><span class="line">            VertexSE3LieAlgebra *v = <span class="keyword">new</span> <span class="built_in">VertexSE3LieAlgebra</span>(); <span class="comment">// ä½¿ç”¨è‡ªå®šä¹‰çš„é¡¶ç‚¹</span></span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">            fin &gt;&gt; index;</span><br><span class="line">            v-&gt;<span class="built_in">setId</span>(index);</span><br><span class="line">            v-&gt;<span class="built_in">read</span>(fin);</span><br><span class="line">            optimizer.<span class="built_in">addVertex</span>(v);</span><br><span class="line">            vertexCnt++;</span><br><span class="line">            <span class="keyword">if</span> (index == <span class="number">0</span>)</span><br><span class="line">                v-&gt;<span class="built_in">setFixed</span>(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (name == <span class="string">&quot;EDGE_SE3:QUAT&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// SE3-SE3 è¾¹</span></span><br><span class="line">            EdgeSE3LieAlgebra *e = <span class="keyword">new</span> <span class="built_in">EdgeSE3LieAlgebra</span>(); <span class="comment">// ä½¿ç”¨è‡ªå®šä¹‰çš„è¾¹</span></span><br><span class="line">            <span class="keyword">int</span> idx1, idx2;</span><br><span class="line">            fin &gt;&gt; idx1 &gt;&gt; idx2;</span><br><span class="line">            e-&gt;<span class="built_in">setId</span>(edgeCnt++);</span><br><span class="line">            e-&gt;<span class="built_in">setVertex</span>(<span class="number">0</span>, optimizer.<span class="built_in">vertices</span>()[idx1]);</span><br><span class="line">            e-&gt;<span class="built_in">setVertex</span>(<span class="number">1</span>, optimizer.<span class="built_in">vertices</span>()[idx2]);</span><br><span class="line">            e-&gt;<span class="built_in">read</span>(fin);</span><br><span class="line">            optimizer.<span class="built_in">addEdge</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!fin.<span class="built_in">good</span>())</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯»åˆ°&quot;</span> &lt;&lt; vertexCnt &lt;&lt; <span class="string">&quot;ä¸ªç‚¹ï¼Œ&quot;</span> &lt;&lt; edgeCnt &lt;&lt; <span class="string">&quot;ä¸ªè¾¹&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å‡†å¤‡ä¼˜åŒ–......&quot;</span> &lt;&lt; endl;</span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);</span><br><span class="line">    optimizer.<span class="built_in">initializeOptimization</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ‰§è¡Œä¼˜åŒ–......&quot;</span> &lt;&lt; endl;</span><br><span class="line">    optimizer.<span class="built_in">optimize</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¿å­˜ä¼˜åŒ–ç»“æœ......&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// å› ä¸ºç”¨äº†è‡ªå®šä¹‰é¡¶ç‚¹ä¸”æ²¡æœ‰å‘g2oæ³¨å†Œï¼Œè¿™é‡Œä¿å­˜è‡ªå·±æ¥å®ç°</span></span><br><span class="line">    <span class="comment">// ä¼ªè£…æˆ SE3 é¡¶ç‚¹å’Œè¾¹ï¼Œè®© g2o_viewer å¯ä»¥è®¤å‡º</span></span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">&quot;result_lie.g2o&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (VertexSE3LieAlgebra *v : vectices)</span><br><span class="line">    &#123;</span><br><span class="line">        fout &lt;&lt; <span class="string">&quot;VERTEX_SE3:QUAT &quot;</span>;</span><br><span class="line">        v-&gt;<span class="built_in">write</span>(fout);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (EdgeSE3LieAlgebra *e : edges)</span><br><span class="line">    &#123;</span><br><span class="line">        fout &lt;&lt; <span class="string">&quot;EDGE_SE3:QUAT &quot;</span>;</span><br><span class="line">        e-&gt;<span class="built_in">write</span>(fout);</span><br><span class="line">    &#125;</span><br><span class="line">    fout.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>åç«¯ä¼˜åŒ–</tag>
        <tag>ä½å§¿å›¾ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>g2o-viewerå®‰è£…</title>
    <url>/posts/15722.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>g2o_vieweræ˜¯g2oæä¾›çš„ä½å§¿å›¾ä¼˜åŒ–çš„ä»¿çœŸç¨‹åºï¼Œè¯¥ä½å§¿å›¾æ˜¯ç”± g2o è‡ªå¸¦çš„ create sphere ç¨‹åºä»¿çœŸç”Ÿæˆçš„ã€‚å®ƒçš„çœŸå®è½¨è¿¹ä¸ºä¸€ä¸ªçƒï¼Œç”±ä»ä¸‹å¾€ä¸Šçš„å¤šä¸ªå±‚ç»„æˆã€‚æ¯å±‚ä¸ºä¸€ä¸ªæ­£åœ†å½¢ï¼Œå¾ˆå¤šä¸ªå¤§å°ä¸ä¸€çš„åœ†å½¢å±‚ç»„æˆäº†ä¸€ä¸ªå®Œæ•´çš„<br>çƒä½“ï¼Œå…±åŒ…å« 2500 ä¸ªä½å§¿èŠ‚ç‚¹ï¼Œå¯ä»¥çœ‹æˆä¸€ä¸ªè½¬åœˆä¸Šå‡çš„è¿‡ç¨‹ã€‚ç„¶åï¼Œä»¿çœŸç¨‹åºç”Ÿæˆäº† t âˆ’ 1 åˆ° t æ—¶åˆ»çš„è¾¹ï¼Œç§°ä¸º odometry è¾¹ï¼ˆé‡Œç¨‹è®¡ï¼‰ã€‚æ­¤å¤–ï¼Œåˆç”Ÿæˆå±‚ä¸å±‚ä¹‹é—´çš„è¾¹ï¼Œç§°ä¸º loop closureã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>é¦–å…ˆï¼Œä½ è¦ä¸‹è½½$g2o$:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…‹éš†é¡¹ç›®</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/RainerKuemmerle/g2o</span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">sudo apt-get install libqt4-dev qt4-qmake libqglviewer-dev libsuitesparse-dev libcxsparse3.1.2 libcholmod-dev</span><br><span class="line"><span class="comment"># g2o_viewerä¾èµ–</span></span><br><span class="line">sudo apt-get install libsuitesparse-dev qtdeclarative5-dev qt5-qmake libqglviewer-dev-qt5</span><br><span class="line"><span class="comment"># ç¼–è¯‘å®‰è£…</span></span><br><span class="line"><span class="built_in">cd</span> g2o</span><br><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build </span><br><span class="line">cmake ..</span><br><span class="line">make -j4</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<p>æ–‡ä»¶ç»“æ„å·²ç»æè¿‡äº†</p>
<p><img src="/images/g2o-viewerå®‰è£…/image-20220405210455088.png" alt="image-20220405210455088"></p>
<p>æˆ‘ä»¬çš„g2o_vieweræºæ–‡ä»¶å°±åœ¨appé‡Œé¢ï¼š</p>
<p><img src="/images/g2o-viewerå®‰è£…/image-20220405210828391.png" alt="image-20220405210828391" style="zoom:50%;" /></p>
<p>æˆ‘ä»¬ç¼–è¯‘ä¹‹åæ£€æŸ¥ä¸€ä¸‹g2oæºä»£ç ç›®å½•ä¸‹<code>g2o\bin</code>ä¸‹æœ‰æ²¡æœ‰ç”Ÿæˆg2o_viewerçš„å¯æ‰§è¡Œæ–‡ä»¶</p>
<p><img src="/images/g2o-viewerå®‰è£…/image-20220405211004286.png" alt="image-20220405211004286" style="zoom:50%;" /></p>
<p>å› ä¸ºæˆ‘ä»¬ç¼–è¯‘äº†ï¼Œæ‰€ä»¥æ£€æŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰åœ¨æœ¬åœ°</p>
<p><img src="/images/g2o-viewerå®‰è£…/image-20220405211129848.png" alt="image-20220405211129848" style="zoom:50%;" /></p>
<p>å¦‚æœæ²¡æœ‰è¯´æ˜ä½ æ²¡æœ‰<code>sudo make install</code>æˆåŠŸã€‚</p>
<p>å¦‚æœæ­¤æ—¶è¿˜ä¸å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯æ‰“å¼€g2o:</p>
<p><img src="/images/g2o-viewerå®‰è£…/image-20220405211231692.png" alt="image-20220405211231692"></p>
<p>è¿™å°±æ˜¯æ²¡æœ‰é“¾æ¥æˆåŠŸäº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gedit /etc/ld.so.conf</span><br></pre></td></tr></table></figure>
<p>ç„¶ååŠ å…¥ï¼š<code>include /usr/local/lib</code>,å½“ç„¶å¦‚æœä½ æœ‰å°±ä¸åŠ å’¯</p>
<p>ç„¶åæ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ï¼</p>
<p><img src="/images/g2o-viewerå®‰è£…/image-20220405211615903.png" alt="image-20220405211615903" style="zoom:50%;" /></p>
<p>å¦‚æœè¿˜ä¸å¯ä»¥ï¼Œé‚£ä½ æŒ‡å®šå“ªä¸€æ­¥ä¸å¯¹åŠ²ï¼</p>
]]></content>
      <categories>
        <category>å®‰è£…</category>
      </categories>
      <tags>
        <tag>å®‰è£…</tag>
        <tag>SLAMå®è·µ</tag>
        <tag>g2o</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¿æ€§æœ€å°äºŒä¹˜</title>
    <url>/posts/44179.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æŒ‰åå·®å¹³æ–¹å’Œæœ€å°çš„åŸåˆ™é€‰å–æ‹Ÿåˆæ›²çº¿ï¼Œå¹¶ä¸”é‡‡å–äºŒé¡¹å¼æ–¹ç¨‹ä¸ºæ‹Ÿåˆæ›²çº¿çš„æ–¹æ³•, ç§°ä¸ºæœ€å°äºŒä¹˜æ³•ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>å¸¸è§çš„å‡ ç§æ›²çº¿æ‹Ÿåˆæ–¹å¼ï¼š</p>
<ul>
<li>ä½¿åå·®ç»å¯¹å€¼ä¹‹å’Œæœ€å°</li>
</ul>
<script type="math/tex; mode=display">
\underset{Ï†}{min} \sum^m_{1=1}|e_i|= \sum^m_{1=1}|Ï†(x_i)-y_i|</script><ul>
<li>ä½¿åå·®å¹³æ–¹å’Œæœ€å°</li>
</ul>
<script type="math/tex; mode=display">
\underset{Ï†}{min} \sum^m_{1=1}e_i^2= \sum^m_{1=1}(Ï†(x_i)-y_i)^2</script><ul>
<li>ä½¿åå·®ç»å¯¹å€¼æœ€å¤§çš„æœ€å°</li>
</ul>
<script type="math/tex; mode=display">
\underset{Ï†}{min} \underset{i}{max} \sum^m_{1=1}|e_i|= \sum^m_{1=1}|Ï†(x_i)-y_i|</script><p>æŒ‰åå·®å¹³æ–¹å’Œæœ€å°çš„åŸåˆ™é€‰å–æ‹Ÿåˆæ›²çº¿ï¼Œå¹¶ä¸”é‡‡å–äºŒé¡¹å¼æ–¹ç¨‹ä¸ºæ‹Ÿåˆæ›²çº¿çš„æ–¹æ³•, ç§°ä¸ºæœ€å°äºŒä¹˜æ³•ã€‚</p>
<h1 id="çº¿æ€§æœ€å°äºŒä¹˜"><a href="#çº¿æ€§æœ€å°äºŒä¹˜" class="headerlink" title="çº¿æ€§æœ€å°äºŒä¹˜"></a>çº¿æ€§æœ€å°äºŒä¹˜</h1><h2 id="ä¸€å…ƒçº¿æ€§å›å½’æ±‚è§£è¿‡ç¨‹"><a href="#ä¸€å…ƒçº¿æ€§å›å½’æ±‚è§£è¿‡ç¨‹" class="headerlink" title="ä¸€å…ƒçº¿æ€§å›å½’æ±‚è§£è¿‡ç¨‹"></a>ä¸€å…ƒçº¿æ€§å›å½’æ±‚è§£è¿‡ç¨‹</h2><h3 id="æ¡ˆä¾‹åˆ†æ"><a href="#æ¡ˆä¾‹åˆ†æ" class="headerlink" title="æ¡ˆä¾‹åˆ†æ"></a>æ¡ˆä¾‹åˆ†æ</h3><p>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼ŒæŸæ¬¡å®éªŒå¾—åˆ°äº†å››ä¸ªæ•°æ®ç‚¹$(x,y):(1,6),(2,5),(3,7),(4,10)$ï¼Œå¦‚å›¾æ‰€ç¤º</p>
<p><img src="/images/ä»€ä¹ˆæ˜¯æœ€å°äºŒä¹˜æ³•/image-20220404164725825.png" alt="image-20220404164725825" style="zoom:50%;" /></p>
<p>æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€æ¡ç›´çº¿ä¸è¿™å››ä¸ªç‚¹çš„æœ€ä½³åŒ¹é…ï¼Œè®¾è¿™æ¡ç›´çº¿ä¸º$y=ax+b$ï¼Œå³æ‰¾å‡ºåœ¨æŸç§â€œæœ€ä½³æƒ…å†µâ€ä¸‹èƒ½å¤Ÿå¤§è‡´ç¬¦åˆå¦‚ä¸‹è¶…å®šçº¿æ€§æ–¹ç¨‹ç»„çš„ $a,b$:</p>
<script type="math/tex; mode=display">
1a+b=6\\
2a+b=5\\
3a+b=7\\
4a+b=10\\</script><p>æœ€å°äºŒä¹˜æ³•é‡‡ç”¨çš„æ–¹æ³•æ˜¯å°½é‡ä½¿å¾—ç­‰å·ä¸¤è¾¹çš„å¹³æ–¹å·®æœ€å°ï¼Œä¹Ÿå°±æ˜¯æ‰¾å‡ºè¿™ä¸ªå‡½æ•°çš„æœ€å°å€¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
S(a,b)&=[6-(1a+b)]^2+[5-(2a+b)]^2+[7-(3a+b)]^2+[10-(4a+b)]^2\\
\end{align*}</script><p>æœ€å°å€¼å¯ä»¥é€šè¿‡å¯¹$S(a,b)$åˆ†åˆ«æ±‚$a$å’Œ$b$çš„åå¯¼æ•°ï¼Œç„¶åä½¿ä»–ä»¬ç­‰äºé›¶å¾—åˆ°ã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial S}{\partial a}&=8a+20b-56=0\\
\frac{\partial S}{\partial a}&=20a+60b-154=0
\end{align*}</script><p>å¦‚æ­¤å°±å¾—åˆ°äº†ä¸€ä¸ªåªæœ‰ä¸¤ä¸ªæœªçŸ¥æ•°çš„æ–¹ç¨‹ç»„ï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥è§£å‡ºï¼š</p>
<script type="math/tex; mode=display">
a=3.5\\
b=1.4</script><p>ä¹Ÿå°±æ˜¯è¯´ç›´çº¿$y=3.5x+1.4$æ˜¯æœ€ä½³çš„ï¼</p>
<p>æ‰€ä»¥æœ€å°äºŒä¹˜æ³•å°±æ˜¯ï¼šå¯»æ‰¾ä¸€ä¸ªæœ€èƒ½ä»£è¡¨æ‹Ÿåˆæ•°æ®çš„æ›²çº¿ï¼Œä½¿å¾—æ¯ä¸ªç‚¹åˆ°è¾¾è¿™æ¡æ›²çº¿çš„è·ç¦»æœ€å°ã€‚</p>
<h3 id="ä¸€èˆ¬å¼æ¨å¯¼"><a href="#ä¸€èˆ¬å¼æ¨å¯¼" class="headerlink" title="ä¸€èˆ¬å¼æ¨å¯¼"></a>ä¸€èˆ¬å¼æ¨å¯¼</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç§°$y=\theta_0+\theta_1x$ä¸ºæ‹Ÿåˆå‡½æ•°ï¼Œç§°$J(\theta_0,\theta_1)$ä¸ºæŸå¤±å‡½æ•°ï¼›</p>
<script type="math/tex; mode=display">
J(\theta_0,\theta_1)=\sum^m_{i=0}(y_i-(\theta_0+\theta_1x))^2</script><p>æŸå¤±å‡½æ•°$J(\theta_0,\theta_1)$åˆ†åˆ«å¯¹$\theta_0,\theta_1$æ±‚åå¯¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial J(\theta_0,\theta_1)}{\theta_0}&=-2\sum^m_{i=0}(y_i-(\theta_0+\theta_1x_i))=0\\
\frac{\partial J(\theta_0,\theta_1)}{\theta_1}&=-2\sum^m_{i=0}(y_i-(\theta_0+\theta_1x_i))x_i=0\\\
\end{align*}</script><p>è”ç«‹ä¸¤å¼ï¼Œæ±‚è§£å¯å¾—ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\theta_1&=\frac{\sum \limits ^m_{i=1}(x_i-\overline{x})(y_i-\overline{y}) }
{\sum \limits ^m_{i=1}(x_i-x)^2} \\
\theta_0&=\overline{y}-\theta_1\overline{x}
\end{align*}</script><h3 id="ä½¿ç”¨çŸ©é˜µæ±‚è§£"><a href="#ä½¿ç”¨çŸ©é˜µæ±‚è§£" class="headerlink" title="ä½¿ç”¨çŸ©é˜µæ±‚è§£"></a>ä½¿ç”¨çŸ©é˜µæ±‚è§£</h3><p>å½“$f(x)$å–çº¿æ€§å‡½æ•°çš„å½¢å¼:</p>
<script type="math/tex; mode=display">
f(x)=Ax-b</script><p>å…¶ä¸­Aæ˜¯m*nçš„çŸ©é˜µï¼Œbæ˜¯mç»´å‘é‡ï¼ŒæŸå¤±å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<script type="math/tex; mode=display">
min\parallel Ax-b\parallel^2</script><p>å®šç†ï¼š$x^<em>$æ˜¯æå°ç‚¹çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ï¼Œ$x^</em>$æ˜¯æ–¹ç¨‹ç»„</p>
<script type="math/tex; mode=display">
A^TAx=A^Tb</script><p>çš„è§£ã€‚</p>
<blockquote>
<p>è¿™ä¸ªå®šç†çš„è¯æ˜è¿‡ç¨‹å°±æ˜¯åˆ©ç”¨ä¸Šæ–‡çš„æ±‚å¯¼æ–¹å¼è¿›è¡Œçš„ï¼Œè¯¦ç»†æŸ¥è¯¢ç›¸å…³èµ„æ–™ã€‚</p>
</blockquote>
<p>æ‰€ä»¥å¯¹äºä¸Šé¢çš„æ¡ˆä¾‹ï¼š</p>
<script type="math/tex; mode=display">
A=\begin{bmatrix}
1&1\\2&1\\3&1\\4&1\\
\end{bmatrix},
b=\begin{bmatrix}
6\\5\\7\\10\\
\end{bmatrix}</script><p>æ±‚è§£ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
1&2 &3&4\\1&1 &1&1\\
\end{bmatrix}
\begin{bmatrix}
1&1\\2&1\\3&1\\4&1\\
\end{bmatrix}
\begin{bmatrix}
\theta_0\\\theta_1\\
\end{bmatrix}=
\begin{bmatrix}
1&2 &3&4\\1&1 &1&1\\
\end{bmatrix}
\begin{bmatrix}
6\\5\\7\\10\\
\end{bmatrix}</script><p>æ˜“å¾—ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
\theta_0\\ \theta_1\\
\end{bmatrix}=
\begin{bmatrix}
1.4\\3.5\\
\end{bmatrix}</script><h2 id="å¤šå…ƒçº¿æ€§å›å½’æ±‚è§£è¿‡ç¨‹"><a href="#å¤šå…ƒçº¿æ€§å›å½’æ±‚è§£è¿‡ç¨‹" class="headerlink" title="å¤šå…ƒçº¿æ€§å›å½’æ±‚è§£è¿‡ç¨‹"></a>å¤šå…ƒçº¿æ€§å›å½’æ±‚è§£è¿‡ç¨‹</h2><p>ã€èƒŒæ™¯ã€‘ç»™å®š$m$ç»„ç‚¹$(x_{11},â€¦,x_{1n},y_1),(x_{21},â€¦,x_{2n},y_2),â€¦,(x_{m1},â€¦,x_{mn},y_m)$ï¼Œæ±‚å®ƒçš„æ‹Ÿåˆæ›²çº¿ï¼Ÿ</p>
<p>å¯¹äºå¤šå…ƒå‡½æ•°çš„æ‹Ÿåˆï¼Œå¯ä»¥è®¾æ‹Ÿåˆå‡½æ•°ä¸ºï¼š$ h_Î¸(x_1,x_2,â€¦x_n)=Î¸_1+Î¸_2x_{j1}+â€¦+Î¸_nx_{jn}$</p>
<p>ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªç‰¹å¾å€¼$x_0=1$ä½¿å¾—$ h_Î¸(x_0,x_1,x_2,â€¦x_n)=Î¸_1+Î¸_2x_{j1}+â€¦+Î¸_nx_{jn}$</p>
<p>åˆ™æ¯ä¸€ç»„æ•°ä¸º$(1,x_1,x_2,â€¦,x_n,yj),j=1,2,â€¦,m$ï¼Œä¹Ÿå°±æ˜¯æ±‚å–æœ€åˆé€‚çš„ç³»æ•°$\theta_0,\theta_1,â€¦\theta_n$,ä½¿å¾—å¤šå…ƒå‡½æ•°å¯¹æ‰€æœ‰ç‚¹çš„æ‹Ÿåˆè¾¾åˆ°æœ€ä½³ï¼</p>
<p>æŸå¤±å‡½æ•°ï¼š</p>
<script type="math/tex; mode=display">
J(\theta)=\sum^m_{j=0}(y_j-(Î¸_1+Î¸_2x_{j1}+...+Î¸_nx_{jn})^2</script><p>åˆ†åˆ«å¯¹$\theta_1,\theta_2,â€¦,\theta_n$ï¼Œæ±‚åå¯¼ï¼š</p>
<p>ç”±äºä¸€å…±æœ‰$m$ç»„æ•°æ®ï¼Œæ‰€ä»¥ä½¿ç”¨æ¯ä¸€ç»„æ•°æ®å¯¹$\theta_1,\theta_2,â€¦,\theta_n$åˆ†åˆ«æ±‚åå¯¼ï¼Œæ¯”å¦‚å¯¹$\theta_1$æ±‚åå¯¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial J_1(\theta)}{\partial \theta_1}&= \frac{\partial[ y_1-(Î¸_0+Î¸_1x_{11} +...+Î¸_nx_{1n})]^2}{\partial \theta_1}\\
\frac{\partial J_2(\theta)}{\partial \theta_1}&= \frac{\partial[ y_2-(Î¸_0+Î¸_1x_{21} +...+Î¸_nx_{2n})]^2}{\partial \theta_1}\\
&......\\
\frac{\partial J_m(\theta)}{\partial \theta_1}&= \frac{\partial[ y_m-(Î¸_0+Î¸_1x_{m1} +...+Î¸_nx_{mn})]^2}{\partial \theta_1}

\end{align*}</script><p>æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªé›…å¯æ¯”çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
J(\theta)=
\begin{bmatrix}
\frac{\partial J_1(\theta)}{\partial \theta_1}
&\frac{\partial J_2(\theta)}{\partial \theta_1}
&...
&\frac{\partial J_m(\theta)}{\partial \theta_1}\\
\frac{\partial J_1(\theta)}{\partial \theta_2}
&\frac{\partial J_2(\theta)}{\partial \theta_2}
&...
&\frac{\partial J_m(\theta)}{\partial \theta_2}\\
...&...&...&...\\
\frac{\partial J_1(\theta)}{\partial \theta_n}
&\frac{\partial J_2(\theta)}{\partial \theta_n}
&...
&\frac{\partial J_m(\theta)}{\partial \theta_n}\\
\end{bmatrix}</script><p>è¿™æ ·çš„é—®é¢˜å¯ä»¥ç”¨çŸ©é˜µè¡¨ç¤ºï¼š</p>
<script type="math/tex; mode=display">
Ax=b</script><p>å…¶ä¸­$X$è¡¨ç¤º$m$ç»„ç‚¹çš„è‡ªå˜é‡çš„å€¼ï¼Œ$Y$ä»£è¡¨æ¯ä¸€ç»„è‡ªå˜é‡å¯¹åº”çš„å‡½æ•°å€¼ã€‚</p>
<script type="math/tex; mode=display">
A=\begin{bmatrix}
1&x_{12}& ...&x_{1n}\\
1&x_{22}& ...&x_{2n}\\
1&...& ...&...\\
1&x_{m2}& ...&x_{mn}\\
\end{bmatrix}ï¼Œ
x=\begin{bmatrix}
\theta_1\\\theta_2\\ ...\\\theta_n\\
\end{bmatrix},
b=\begin{bmatrix}
y_1\\y_2\\ ...\\y_m\\
\end{bmatrix}</script><p>æŸå¤±å‡½æ•°ï¼š</p>
<script type="math/tex; mode=display">
J(\theta)=\sum^{m}_{i=1}|y_i-\sum^n_{j=1}x_{ij}\theta_j|^2=\parallel  Ax-b \parallel^2</script><p>ç”±ä¸Šæ–‡çš„å®šç†ï¼š</p>
<script type="math/tex; mode=display">
A^TAx=A^Tb</script><p>æ±‚å¾—ï¼š</p>
<script type="math/tex; mode=display">
x=\begin{bmatrix}
\theta_1\\\theta_2\\ ...\\\theta_n\\
\end{bmatrix}=
(A^TA)^{-1}A^Tb</script>]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>æœ€å°äºŒä¹˜æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å¡å°”æ›¼æ»¤æ³¢çš„æ•°å­¦æ¨å¯¼</title>
    <url>/posts/60703.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>å¡å°”æ›¼æ»¤æ³¢ï¼ˆKalman filterï¼‰æ˜¯ä¸€ç§é«˜æ•ˆç‡çš„<strong>é€’å½’æ»¤æ³¢å™¨</strong>ï¼ˆè‡ªå›å½’æ»¤æ³¢å™¨ï¼‰ï¼Œå®ƒèƒ½å¤Ÿä»ä¸€ç³»åˆ—çš„ä¸å®Œå…¨åŠåŒ…å«å™ªå£°çš„æµ‹é‡ä¸­ï¼Œä¼°è®¡åŠ¨æ€ç³»ç»Ÿçš„çŠ¶æ€ã€‚å¡å°”æ›¼æ»¤æ³¢ä¼šæ ¹æ®å„æµ‹é‡é‡åœ¨ä¸åŒæ—¶é—´ä¸‹çš„å€¼ï¼Œè€ƒè™‘å„æ—¶é—´ä¸‹çš„è”åˆåˆ†å¸ƒï¼Œå†äº§ç”Ÿå¯¹æœªçŸ¥å˜æ•°çš„ä¼°è®¡ï¼Œå› æ­¤ä¼šæ¯”åªä»¥å•ä¸€æµ‹é‡é‡ä¸ºåŸºç¡€çš„ä¼°è®¡æ–¹å¼è¦å‡†ã€‚å¡å°”æ›¼æ»¤æ³¢å¾—åè‡ªä¸»è¦è´¡çŒ®è€…ä¹‹ä¸€çš„é²é“å¤«Â·å¡å°”æ›¼ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="çº¿æ€§æ»¤æ³¢"><a href="#çº¿æ€§æ»¤æ³¢" class="headerlink" title="çº¿æ€§æ»¤æ³¢"></a>çº¿æ€§æ»¤æ³¢</h1><h2 id="å…ˆéªŒä¸åéªŒä¼°è®¡"><a href="#å…ˆéªŒä¸åéªŒä¼°è®¡" class="headerlink" title="å…ˆéªŒä¸åéªŒä¼°è®¡"></a>å…ˆéªŒä¸åéªŒä¼°è®¡</h2><p>ç”±ä¹‹å‰çš„çŠ¶æ€ç©ºé—´æ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
{x_k }&=Ax_{k-1}+Bu_{k-1}+w_{k-1}\\
z_{k}&=Hx_{k}+v_k
\end{align*}</script><p>å…¶ä¸­$w_{k}$ä¸ºè¿‡ç¨‹å™ªå£°(Process Noise)ï¼Œ$v_k$ä¸ºæµ‹é‡å™ªå£°(Measurement Noise)ï¼Œæš‚ä¸”è®¤ä¸ºå®ƒä»¬ç¬¦åˆé«˜æ–¯åˆ†å¸ƒï¼Œå³$p_{(w)}\sim N(0,Q)ï¼Œp_{(v)}\sim N(0,R)$ï¼Œå…¶ä¸­$0$è¡¨ç¤ºæœŸæœ›ï¼Œ$Q,R$ä»£è¡¨åæ–¹å·®çŸ©é˜µï¼Œä¸”$Q=E[ww^T],R=[vv^T]$ï¼Œæ¨å¯¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
Q=E[ww^T]&=E
\begin{bmatrix}
\begin{bmatrix}w_1\\w_2\\.\\.\\w_k \end{bmatrix}
\begin{bmatrix}w_1&w_2&...&w_k \end{bmatrix}
\end{bmatrix}
=E
\begin{bmatrix}w_1^2&w_1w_2&...&w_1w_k\\
w_2w_1&w_2^2&...&w_2w_k\\
...&...&...&...\\
w_kw_1&w_kw_1&...&w_k^2
\end{bmatrix}\\
&=\begin{bmatrix}Ew_1^2&Ew_1w_2&...&Ew_1w_k\\
Ew_2w_1&Ew_2^2&...&Ew_2w_k\\
...&...&...&...\\
Ew_kw_1&Ew_kw_1&...&Ew_k^2
\end{bmatrix}
\end{align*}</script><p>ç”±äº$w$çš„æœŸæœ›ä¸º$0$ï¼Œç”±æ–¹å·®ç­‰äºå¹³æ–¹çš„æœŸæœ›å‡å»æœŸæœ›çš„å¹³æ–¹ä»¥åŠåæ–¹å·®å…¬å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
Var(X)&=E(X^2)-E^2(X)\\
Cov(X,Y)&=E((X-\mu)(Y-v))
\end{align*}</script><p>æ‰€ä»¥æ­¤å¤„å¹³æ–¹çš„æœŸæœ›å°±ç­‰äºæ–¹å·®ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
Var(X)&=E(X^2)\\
Cov(X,Y)&=E(XÂ·Y)
\end{align*}</script><p>å³ä¸ºï¼š</p>
<script type="math/tex; mode=display">
Ew_k^2=\sigma_{w_1}^2,Ew_iw_j=\sigma_i\sigma_j</script><p>æ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
Q=\begin{bmatrix}Ew_1^2&Ew_1w_2&...&Ew_1w_k\\
Ew_2w_1&Ew_2^2&...&Ew_2w_k\\
...&...&...&...\\
Ew_kw_1&Ew_kw_1&...&Ew_k^2
\end{bmatrix}=
\begin{bmatrix}
\sigma_{w_{1} }^2&\sigma_{w_1}\sigma_{w_2}&...&\sigma_{w_1}\sigma_{w_k}\\
\sigma_{w_2}\sigma_{w_1}&\sigma_{w_{2} }^2&...&\sigma_{w_2}\sigma_{w_k}\\
...&...&...&...\\
\sigma_{w_k}\sigma_{w_1}&\sigma_{w_k}\sigma_{w_1}&...&\sigma_{w_{k} }^2
\end{bmatrix}</script><p>å› æ­¤$Q$å°±æ˜¯ä¹‹å‰æ‰€æåˆ°çš„åæ–¹å·®çŸ©é˜µï¼ŒåŒæ ·çš„ï¼Œæµ‹é‡å™ªå£°ä¹Ÿæœ‰åæ–¹å·®çŸ©é˜µ$R$ï¼Œæ»¡è¶³ç±»ä¼¼çš„æ¡ä»¶ã€‚</p>
<hr>
<p>ç”±äºå­˜åœ¨å™ªå£°çš„å½±å“ï¼Œæ‰€å¾—åˆ°çš„$x_k$å¹¶ä¸ç²¾ç¡®ï¼Œæˆ‘ä»¬æš‚ä¸”è®¾å®ƒä¸º$\hat{x}_k$ï¼Œè¡¨ç¤ºè¿™æ˜¯$x_k$çš„ä¼°è®¡å€¼ï¼›åŒæ ·çš„$x_{k-1}$ä¹Ÿæ˜¯ä¸å‡†ç¡®çš„ï¼Œè®¾ä¸º$\hat{x}_{k-1}$ï¼Œå¹¶ä¸”æˆ‘ä»¬è®¾é€šè¿‡ä¸‹è¯•å¾—åˆ°çš„$x_k$æˆä¸ºå…ˆéªŒä¼°è®¡ï¼Œå®šä¹‰ä¸º$\hat{x}^-_k$ï¼›</p>
<p><b><span style="color:rgb(255, 0, 255);">å…ˆéªŒä¼°è®¡ï¼ˆå…¬å¼1ï¼‰ï¼š</span></b></p>
<script type="math/tex; mode=display">
\hat{x}^-_k=A\hat{x}_{k-1}+Bu_{k-1}</script><p>ç”±äº$z_k$æ˜¯æµ‹å‡ºçš„ç»“æœï¼Œæ˜¯å·²çŸ¥çš„ï¼Œç”±$z_k=Hx_k$å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
\hat{x}_{kmea}=H^-z_k</script><p>å¯¹äºä¸Šé¢çš„ä¸¤ä¸ªå¼å­ï¼Œ$\hat{x}^-_k$æ˜¯ç®—å‡ºæ¥çš„ï¼Œ$\hat{x}_{kmea}$æ˜¯æµ‹å‡ºæ¥çš„ï¼Œå› ä¸ºæ”¶åˆ°å™ªå£°çš„å½±å“ï¼Œå®ƒä»¬ä¸¤ä¸ªéƒ½æ˜¯ä¸å‡†ç¡®çš„ï¼Œå› æ­¤è¿™æ—¶å€™å¡å°”æ›¼æ»¤æ³¢çš„ä½œç”¨å°±æ˜¾ç°å‡ºæ¥äº†ï¼Œå¦‚ä½•åˆ©ç”¨ä¸¤ä¸ªä¸å‡†ç¡®çš„å€¼å»å¾—å‡ºä¸€ä¸ªç›¸å¯¹å‡†ç¡®çš„ç»“æœï¼Ÿè¿™é‡Œå°±å¾ˆå®¹æ˜“æƒ³åˆ°ä¹‹å‰æåˆ°çš„æ•°æ®èåˆçš„æ€æƒ³ã€‚</p>
<script type="math/tex; mode=display">
\hat{x}_k=\hat{x}^-_k+G(H^-z_k-\hat{x}^-_k)ï¼ŒG\in[0,1]</script><p>åˆ†æå¼å­å¾ˆå®¹æ˜“ç†è§£ï¼Œå½“æˆ‘ä»¬çš„æµ‹é‡æ•°æ®å¾ˆå°‘æ—¶ï¼Œ$G\approx0$ï¼Œåˆ™$\hat{x}_k=\hat{x}^-_k$ï¼Œæˆ‘ä»¬é€‰æ‹©ç›¸ä¿¡è®¡ç®—å€¼ï¼›å½“æˆ‘ä»¬çš„æµ‹é‡æ•°æ®å¾ˆå¤šæ—¶ï¼Œ$G\approx1$ï¼Œåˆ™$\hat{x}_k=H^-z_k$ï¼Œæˆ‘ä»¬é€‰æ‹©ç›¸ä¿¡æµ‹é‡å€¼ï¼›</p>
<p>ä¸€èˆ¬æ•™ç§‘ä¹¦ä¸Šè®¾$G=K_kH$ï¼›</p>
<p><b><span style="color:rgb(255, 0, 255);">åéªŒä¼°è®¡ï¼ˆå…¬å¼2ï¼‰ï¼š</span></b></p>
<script type="math/tex; mode=display">
\hat{x}_k=\hat{x}^-_k+K_k(z_k-H\hat{x}^-_k),K_k\in[0,H^-]</script><p>åŒæ ·çš„ï¼Œå½“æˆ‘ä»¬çš„æµ‹é‡æ•°æ®å¾ˆå°‘ï¼ˆä¸å‡†ç¡®ï¼‰æ—¶ï¼Œ$K_k\approx0$ï¼Œåˆ™$\hat{x}_k=\hat{x}^-_k$ï¼Œæˆ‘ä»¬é€‰æ‹©ç›¸ä¿¡è®¡ç®—å€¼ï¼›å½“æˆ‘ä»¬çš„æµ‹é‡æ•°æ®å¾ˆå¤šï¼ˆç›¸å¯¹å‡†ç¡®ï¼‰æ—¶ï¼Œ$K_k\approx H^-$ï¼Œåˆ™$\hat{x}_k=H^-z_k$ï¼Œæˆ‘ä»¬é€‰æ‹©ç›¸ä¿¡æµ‹é‡å€¼ï¼›</p>
<h2 id="å¡å°”æ›¼å¢ç›Š"><a href="#å¡å°”æ›¼å¢ç›Š" class="headerlink" title="å¡å°”æ›¼å¢ç›Š"></a>å¡å°”æ›¼å¢ç›Š</h2><p>å› æ­¤ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å˜å¾—ååˆ†æ˜ç¡®äº†ï¼Œå¦‚ä½•é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„$K_k$å€¼ï¼Œä½¿å¾—$\hat{x}_k\rightarrow x_k$ï¼Œå…¶ä¸­$x_k$è¡¨ç¤ºçœŸå®å€¼ã€‚</p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè¯¯å·®å€¼$e_k$ï¼Œä»¥åŠä¸€ä¸ªå…ˆéªŒè¯¯å·®å€¼$e_k^-$ï¼š</p>
<script type="math/tex; mode=display">
e_k=x_k-\hat{x}_k\\
e_k^-=x_k-\hat{x}^-_k</script><p>è¯¯å·®ä¹Ÿæ˜¯ç¬¦åˆé«˜æ–¯åˆ†å¸ƒï¼Œ$p(e_k)\sim(0,P)$ï¼Œå…¶ä¸­åæ–¹å·®çŸ©é˜µ$P=E[ee^T]$ï¼Œä¸ä¹‹å‰æ¨å¯¼çš„$Q$æ˜¯ç±»ä¼¼çš„ã€‚</p>
<p>å› æ­¤ï¼Œæœ€ç»ˆçš„ç›®çš„å°±æ˜¯é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„$K_k$å€¼ï¼Œä½¿å¾—$e_k$æœ€å°ï¼Œä¹Ÿå°±æ˜¯ä½¿å¾—å®ƒçš„æ–¹å·®æœ€å°ï¼Œå› ä¸ºæ–¹å·®è¶Šå°ï¼Œè¯´æ˜è¶Šæ¥è¿‘æœŸæœ›å€¼$0$ï¼Œå³$e_k\approx0$ã€‚è€Œæ–¹å·®æœ€å°å°±æ˜¯ä½¿å¾—å®ƒçš„åæ–¹å·®çŸ©é˜µçš„è¿¹$tr(P)=\sigma^2_{e_{1} }+\sigma^2_{e_{2} }+â€¦+\sigma^2_{e_{k} }$æœ€å°ã€‚</p>
<font color="#dd0000">æ‰€ä»¥ï¼Œæœ€ç»ˆçš„ç›®çš„ä¸ºï¼šå¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„$K_k$ä½¿å¾—$tr(P)$æœ€å°ï¼</font>

<hr>
<script type="math/tex; mode=display">
\begin{align*}
tr(P)&=E[ee^T]\\
&=E[(x_k-\hat{x}_k)(x_k-\hat{x}_k)^T]
\end{align*}</script><p>å·²çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
\hat{x}_k=\hat{x}^-_k+K_k(z_k-H\hat{x}^-_k)\\
z_k=Hx_k+v_k</script><p>å¸¦å…¥ä¸Šå¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
x_k-\hat{x}_k&=x_k-(\hat{x}^-_k+K_k(z_k-H\hat{x}^-_k))\\
&=x_k-\hat{x}^-_k-K_kz_k+K_kH\hat{x}^-_k\\
&=x_k-\hat{x}^-_k-K_k(Hx_k+v_k)+K_kH\hat{x}^-_k\\
&=x_k-\hat{x}^-_k-K_kHx_k-K_kv_k+K_kH\hat{x}^-_k\\
&=(x_k-\hat{x}^-_k)-K_kH(x_k-\hat{x}^-_k)-K_kv_k\\
&=(I-K_kH)(x_k-\hat{x}^-_k)-K_kv_k\\
&=(I-K_kH)e_k^--K_kv_k
\end{align*}</script><p>æ‰€ä»¥ï¼š</p>
<blockquote>
<p>å¯èƒ½ä¼šç”¨åˆ°çš„å…¬å¼ï¼š</p>
<p>$(AB)^T=B^TA^T$ï¼Œ$(A+B)^T=A^T+B^T$</p>
</blockquote>
<script type="math/tex; mode=display">
\begin{align*}
tr(P)&=E[ee^T]\\
&=E[(x_k-\hat{x}_k)(x_k-\hat{x}_k)^T]\\
&=E[[(I-K_kH)e_k^--K_kv_k][(I-K_kH)e_k^--K_kv_k]^T]\\
&=E[[(I-K_kH)e_k^--K_kv_k][e_k^{-T}(I-K_kH)^T-v_k^TK_k^T]]\\
&=E[(I-K_kH)e_k^-e_k^{-T}(I-K_kH)^T-(I-K_kH)e_k^-v_k^TK_k^T\\
&-K_kv_ke_k^{-T}(I-K_kH)^T+K_kv_kv_k^TK_k^T]\\

\end{align*}</script><p>åˆ†åˆ«æ±‚æ¯ä¸€é¡¹çš„æœŸæœ›ï¼š</p>
<blockquote>
<p>å¯èƒ½ä¼šç”¨åˆ°çš„å·²çŸ¥æ¡ä»¶ï¼š</p>
<p>$E[e_k^-]=0,E[e_k^{-T}]=0,E[v_k^T]=0,E[v_k]=0$</p>
</blockquote>
<script type="math/tex; mode=display">
\begin{align*}
&E[-(I-K_kH)e_k^-v_k^TK_k^T]\\
&=-(I-K_kH)E[e_k^-v_k^T]K_k^T\\
&=-(I-K_kH)E[e_k^-]E[v_k^T]K_k^T\\
&=0
\end{align*}</script><p>åŒç†å¯å¾—ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&E[-K_kv_ke_k^{-T}(I-K_kH)^T]\\
&=-K_kE[v_k]E[e_k^{-T}](I-K_kH)^T\\
&=0
\end{align*}</script><p>æ‰€ä»¥æœ€ç»ˆï¼š</p>
<blockquote>
<p>å¯èƒ½ä¼šç”¨åˆ°çš„å®šä¹‰ï¼š</p>
<p>å·²çŸ¥åæ–¹å·®çŸ©é˜µ$P=E[ee^T]$ï¼Œåˆ™å®šä¹‰$P_k^-=E[e_k^-e_k^{-T}]$</p>
<p>$p_{(v)}\sim(0,R)$ï¼Œæ‰€ä»¥$R_k=E[v_kv^T_k]$</p>
</blockquote>
<script type="math/tex; mode=display">
\begin{align*}
tr(P)&=E[ee^T]\\
&=E[(I-K_kH)e_k^-e_k^{-T}(I-K_kH)^T]+E[K_kv_kv_k^TK_k^T]\\
&=(I-K_kH)E[e_k^-e_k^{-T}](I-K_kH)^T+K_kE[v_kv_k^T]K_k^T\\
&=(P_k^--K_kHP_k^-)(I^T-H^TK_k^T)+K_kR_kK_k^T\\
&=P_k^--K_kHP_k^--P_k^-H^TK_k^T+K_kHP_k^-H^TK_k^T+K_kR_kK_k^T\\
\end{align*}</script><blockquote>
<p>ç”±äºï¼Œåæ–¹å·®çŸ©é˜µçš„è½¬ç½®å°±æ˜¯å®ƒæœ¬èº«ï¼Œæ‰€ä»¥$P_k^{-T}=P_k^-$</p>
<p>$(P_k^-H^TK_k^T)^T=K_kHP_k^{-T}=K_kHP_k^-$ï¼Œæ‰€ä»¥$tr(K_kHP_k^-)=tr(P_k^-H^TK_k^T)$</p>
</blockquote>
<p>å› æ­¤ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
tr(P)&=tr(P_k^-)-tr(K_kHP_k^-)-tr(P_k^-H^TK_k^T)+tr(K_kHP_k^-H^TK_k^T)+tr(K_kR_kK_k^T)\\
&=tr(P_k^-)-2tr(K_kHP_k^-)+tr(K_kHP_k^-H^TK_k^T)+tr(K_kR_kK_k^T)
\end{align*}</script><p>$tr(P)$å¯¹$K_k$æ±‚å¯¼ï¼Œä½¿å¾—$\frac{dtr(P_k)}{dK_k}=0$ï¼š</p>
<blockquote>
<p>å¯èƒ½ä¼šç”¨åˆ°çš„å…¬å¼ï¼š</p>
<p>$\frac{dtr(AB)}{dA}=B^T$ï¼Œ$\frac{dtr(ABA^T)}{dA}=2AB$</p>
</blockquote>
<script type="math/tex; mode=display">
\begin{align*}
\frac{dtr(P_k)}{dK_k}&=\frac{tr(P_k^-)}{dK_k}
-\frac{2tr(K_kHP_k^-)}{dK_k}
+\frac{tr(K_kHP_k^-H^TK_k^T))}{dK_k}
+\frac{tr(K_kR_kK_k^T))}{dK_k}\\
&=0-2(HP_k^-)^T+2K_kHP_k^-H^T+2K_kR_k\\
&=0
\end{align*}</script><p>æ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
(HP_k^-)^T&=K_k(HP_k^-H^T+R_k)
\end{align*}</script><p><b><span style="color:rgb(255, 0, 255);">å¡å°”æ›¼å¢ç›Šï¼ˆå…¬å¼3ï¼‰ï¼š</span></b></p>
<script type="math/tex; mode=display">
\begin{align*}
K_k&=\frac{P_k^-H^T}{HP_k^-H^T+R_k}
\end{align*}</script><p>å› æ­¤ï¼Œç»“åˆæˆ‘ä»¬ä¹‹å‰çš„ç»“è®ºï¼š</p>
<blockquote>
<p>å½“æˆ‘ä»¬çš„æµ‹é‡æ•°æ®å¾ˆå°‘ï¼ˆä¸å‡†ç¡®ï¼‰æ—¶ï¼Œ$K_k\approx0$ï¼Œåˆ™$\hat{x}_k=\hat{x}^-_k$ï¼Œæˆ‘ä»¬é€‰æ‹©ç›¸ä¿¡è®¡ç®—å€¼ï¼›å½“æˆ‘ä»¬çš„æµ‹é‡æ•°æ®å¾ˆå¤šï¼ˆç›¸å¯¹å‡†ç¡®ï¼‰æ—¶ï¼Œ$K_k\approx H^-$ï¼Œåˆ™$\hat{x}_k=H^-z_k$ï¼Œæˆ‘ä»¬é€‰æ‹©ç›¸ä¿¡æµ‹é‡å€¼ï¼›</p>
</blockquote>
<p>æ­¤å¤„ä¹Ÿæ˜¯ç›¸åŒçš„ï¼š</p>
<p>$R_k$è¡¨ç¤ºæµ‹é‡å™ªå£°ï¼Œå½“æµ‹é‡å™ªå£°å¾ˆå¤§æ—¶ï¼Œ$K_k\approx0$ï¼Œåˆ™$\hat{x}_k=\hat{x}^-_k$ï¼Œæˆ‘ä»¬é€‰æ‹©ç›¸ä¿¡è®¡ç®—å€¼ï¼›</p>
<p>å½“æµ‹é‡å™ªå£°å¾ˆå°æ—¶ï¼Œ$K_k\approx H^-$ï¼Œåˆ™$\hat{x}_k=H^-z_k$ï¼Œæˆ‘ä»¬é€‰æ‹©ç›¸ä¿¡æµ‹é‡å€¼ï¼›</p>
<hr>
<h2 id="è¯¯å·®åæ–¹å·®çŸ©é˜µ"><a href="#è¯¯å·®åæ–¹å·®çŸ©é˜µ" class="headerlink" title="è¯¯å·®åæ–¹å·®çŸ©é˜µ"></a>è¯¯å·®åæ–¹å·®çŸ©é˜µ</h2><p>æ€»ç»“å‰é¢æ¨å¯¼çš„ä¸‰ä¸ªå…¬å¼ï¼š</p>
<p><font color="#dd0000"><strong>å…ˆéªŒä¼°è®¡ï¼ˆå…¬å¼1ï¼‰ï¼š</strong></font></p>
<script type="math/tex; mode=display">
\hat{x}^-_k=A\hat{x}_{k-1}+Bu_{k-1}</script><p><font color="#dd0000"><strong>åéªŒä¼°è®¡ï¼ˆå…¬å¼2ï¼‰ï¼š</strong></font></p>
<script type="math/tex; mode=display">
\hat{x}_k=\hat{x}^-_k+K_k(z_k-H\hat{x}^-_k),K_k\in[0,H^-]</script><p><font color="#dd0000"><strong>å¡å°”æ›¼å¢ç›Šï¼ˆå…¬å¼3ï¼‰ï¼š</strong></font></p>
<script type="math/tex; mode=display">
\begin{align*}
K_k&=\frac{P_k^-H^T}{HP_k^-H^T+R_k}
\end{align*}</script><p>ä¸Šé¢çš„å…¬å¼é‡Œåªæœ‰$P_k^-$æ˜¯æœªçŸ¥çš„ï¼Œéœ€è¦æ¨å¯¼ã€‚ç”±äºå·²çŸ¥åæ–¹å·®çŸ©é˜µ$P=E[ee^T]$ï¼Œæ‰€ä»¥å®šä¹‰$P_k^-=E[e_k^-e_k^{-T}]$ï¼Œå¦‚ä½•æ±‚è¿™ä¸ªè¯¯å·®åæ–¹å·®çŸ©é˜µæ˜¯ä»¥ä¸‹ç¯‡å¹…è®¨è®ºçš„é‡ç‚¹ã€‚</p>
<blockquote>
<p>å¯èƒ½ä¼šç”¨åˆ°çš„å®šä¹‰ä¸å…¬å¼ï¼š</p>
<p>$e_k=x_k-\hat{x}_k$ï¼Œ$P_k=E[ee^T]$</p>
<p>$e_k^-=x_k-\hat{x}^-_k$ ï¼Œ$P_k^-=E[e_k^-e_k^{-T}]$</p>
<p>$\hat{x}^-_k=A\hat{x}_{k-1}+Bu_{k-1}$</p>
<p>$x_k =Ax_{k-1}+Bu_{k-1}+w_{k-1}$</p>
</blockquote>
<p>é¦–å…ˆæ¨å¯¼$e_k^-=x_k-\hat{x}^-_k$:</p>
<script type="math/tex; mode=display">
\begin{align*}
e_k^-&=x_k-\hat{x}^-_k\\
&=Ax_{k-1}+Bu_{k}+w_{k-1}-A\hat{x}_{k-1}-Bu_{k}\\
&=A(x_{k-1}-\hat{x}_{k-1})+w_{k-1}\\
&=Ae_{k-1}+w_{k-1}
\end{align*}</script><p>æ‰€ä»¥ï¼š</p>
<blockquote>
<p>ç”±äº$e_{k-1}=x_{k-1}-\hat{x}_{k-1}$ï¼Œæ‰€ä»¥$e_{k-1}$ä½œç”¨çš„æ˜¯ä¸Šä¸€æ—¶åˆ»ï¼Œè€Œ$w_k$æ˜¯ä½œç”¨äºå½“å‰æ—¶åˆ»çš„ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚$E[e_{k-1}w_{k}^T]=E[e_{k-1}]E[w_{k}^T]$ï¼Œä¸”$E[e_{k-1}]=E[w_{k}^T]=0$</p>
</blockquote>
<script type="math/tex; mode=display">
\begin{align*}
P_k^-&=E[e_k^-e_k^{-T}]\\
&=E[(Ae_{k-1}+w_{k-1})(Ae_{k-1}+w_{k-1})^T]\\
&=E[(Ae_{k-1}+w_{k-1})(e_{k-1}^TA^T+w_{k-1}^T)]\\
&=E[Ae_{k-1}e_{k-1}^TA^T+Ae_{k-1}w_{k-1}^T+w_{k-1}e_{k-1}^TA^T+w_{k-1}w_{k-1}^T]\\
&=E[Ae_{k-1}e_{k-1}^TA^T]+E[Ae_{k-1}w_{k-1}^T]+E[w_{k-1}e_{k-1}^TA^T]+E[w_{k-1}w_{k-1}^T]\\
&=AE[e_{k-1}e_{k-1}^T]A^T+E[w_{k-1}w_{k-1}^T]\\
&=AP_{k-1}A^T+Q
\end{align*}</script><p><font color="#dd0000"><strong>è¯¯å·®åæ–¹å·®çŸ©é˜µï¼ˆå…¬å¼4ï¼‰ï¼š</strong></font></p>
<script type="math/tex; mode=display">
\begin{align*}
P_k^-=AP_{k-1}A^T+Q
\end{align*}</script><p>ç”±äºæ¯ä¸€æ¬¡çš„è¯¯å·®åæ–¹å·®çŸ©é˜µ$P_k^-$ï¼Œéƒ½éœ€è¦ä¸Šä¸€æ¬¡çš„$P_{k-1}$ï¼Œæ‰€ä»¥æ¯ä¸€æ—¶åˆ»æˆ‘ä»¬éƒ½éœ€è¦æ›´æ–°ä¸€ä¸‹$P_k$çš„å€¼ï¼Œä¸ºä¸‹ä¸€æ—¶åˆ»ä½¿ç”¨åšå‡†å¤‡ã€‚</p>
<p><font color="#dd0000"><strong>æ›´æ–°è¯¯å·®åæ–¹å·®ï¼šï¼ˆå…¬å¼5ï¼‰ï¼š</strong></font></p>
<script type="math/tex; mode=display">
\begin{align*}
P_k&=P_k^--K_kHP_k^--P_k^-H^TK_k^T+K_kHP_k^-H^TK_k^T+K_kR_kK_k^T\\
&=P_k^--K_kHP_k^--P_k^-H^TK_k^T+K_k(HP_k^-H^T+R_k)K_k^T\\
&=P_k^--K_kHP_k^--P_k^-H^TK_k^T+\frac{P_k^-H^T}{HP_k^-H^T+R_k}(HP_k^-H^T+R_k)K_k^T\\
&=P_k^--K_kHP_k^-\\
&=(I-K_kH)P_k^-
\end{align*}</script><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹æ•´ä¸ªå¡å°”æ›¼æ»¤æ³¢çš„è¿‡ç¨‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">é¢„æµ‹</th>
<th>æ ¡æ­£</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å…ˆéªŒï¼š$\hat{x}^-_k=A\hat{x}_{k-1}+Bu_{k-1}$</td>
<td>å¡å°”æ›¼å¢ç›Šï¼š$K_k=\frac{P_k^-H^T}{HP_k^-H^T+R_k}$</td>
</tr>
<tr>
<td style="text-align:left">å…ˆéªŒè¯¯å·®åæ–¹å·®ï¼š$P_k^-=AP_{k-1}A^T+Q$</td>
<td>åéªŒä¼°è®¡ï¼š$\hat{x}_k=\hat{x}^-_k+K_k(z_k-H\hat{x}^-_k),K_k\in[0,H^-]$</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td>æ›´æ–°è¯¯å·®åæ–¹å·®ï¼š$P_k=(I-K_kH)P_k^-$</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p><strong>ä»‹ç»å¡å°”æ›¼æ»¤æ³¢è®ºæ–‡ï¼š</strong><a href="http://www.cs.unc.edu/~welch/media/pdf/kalman_intro.pdf">http://www.cs.unc.edu/~welch/media/pdf/kalman_intro.pdf</a></p>
</blockquote>
<h1 id="éçº¿æ€§æ»¤æ³¢å™¨"><a href="#éçº¿æ€§æ»¤æ³¢å™¨" class="headerlink" title="éçº¿æ€§æ»¤æ³¢å™¨"></a>éçº¿æ€§æ»¤æ³¢å™¨</h1><p>å‰é¢çš„å¡å°”æ›¼æ»¤æ³¢æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªçº¿æ€§ç³»ç»Ÿå¾—åˆ°ä¸€ä¸ªæœ€ä¼˜çš„ä¼°è®¡å€¼ï¼Œé‚£ä¹ˆå¡å°”æ›¼æ»¤æ³¢å™¨åœ¨éçº¿æ€§ç³»ç»Ÿä¸­çš„åº”ç”¨å¦‚ä½•å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´æœ‰è®¸å¤šæ–¹æ³•ï¼Œä½†æ˜¯æœ€åŸºæœ¬çš„æ–¹æ³•å°±æ˜¯å°†éçº¿æ€§ç³»ç»Ÿè¿›è¡Œçº¿æ€§åŒ–ï¼Œè¿™ç§æ»¤æ³¢å™¨æˆ‘ä»¬ç§°ä¸ºæ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆExtended Kalman Filterï¼Œç®€ç§°EKFï¼‰ã€‚</p>
<hr>
<p>å¯¹äºçº¿æ€§ç³»ç»Ÿçš„çŠ¶æ€ç©ºé—´è¡¨è¾¾å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
{x_k }&=Ax_{k-1}+Bu_{k-1}+w_{k-1}\\
z_{k}&=Hx_{k}+v_k
\end{align*}</script><p>å…¶ä¸­$p_{(w)}\sim N(0,Q)ï¼Œp_{(v)}\sim N(0,R)$ï¼Œå…¶ä¸­$0$è¡¨ç¤ºæœŸæœ›ï¼Œ$Q,R$ä»£è¡¨åæ–¹å·®çŸ©é˜µ</p>
<hr>
<p>å¯¹äºéçº¿æ€§ç³»ç»Ÿçš„çŠ¶æ€ç©ºé—´è¡¨è¾¾å¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
x_k&=f(x_{k-1},u_{k-1},w_{k-1})\\
z_k&=h(x_k,v_k)
\end{align*}</script><p>å…¶ä¸­$p_{(w)}\sim N(0,Q)ï¼Œp_{(v)}\sim N(0,R)$ï¼Œå…¶ä¸­$0$è¡¨ç¤ºæœŸæœ›ï¼Œ$Q,R$ä»£è¡¨åæ–¹å·®çŸ©é˜µ</p>
<p>è™½ç„¶å™ªå£°ä»ç„¶æ»¡è¶³æ­£æ€åˆ†å¸ƒï¼Œä½†æ˜¯<span style="color:red;">æ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡é€šè¿‡éçº¿æ€§ç³»ç»Ÿåå°±ä¸å†æ˜¯æ­£æ€çš„äº†ã€‚</span></p>
<p><img src="/images/å¡å°”æ›¼æ»¤æ³¢å™¨çš„æ•°å­¦æ¨å¯¼/image-20220402154736261.png" alt="image-20220402154736261"></p>
<p>æ‰€ä»¥éœ€è¦å¯¹éçº¿æ€§ç³»ç»Ÿè¿›è¡Œçº¿æ€§åŒ–å¤„ç†ï¼Œè¿™é‡Œä¼šç”¨åˆ°æ³°å‹’å±•å¼€ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬å¯¹$f(x)$åœ¨$x_0$å¤„è¿›è¡Œæ³°å‹’å±•å¼€ï¼š</p>
<script type="math/tex; mode=display">
f(x)=f(x_0)+\frac{\partial f}{\partial x}(x-x_0)</script><p>å¯¹äºä¸€ä¸ªéçº¿æ€§ç³»ç»Ÿæ¥è¯´ï¼Œæœ€å¥½çš„ä¸€ä¸ªçº¿æ€§åŒ–çš„ç‚¹å°±æ˜¯å®ƒçš„çœŸå®ç‚¹ï¼Œä½†æ˜¯ç”±äºç³»ç»Ÿå­˜åœ¨è¯¯å·®ï¼Œæ‰€ä»¥æˆ‘ä»¬æ°¸è¿œæ— æ³•çŸ¥é“ç³»ç»Ÿçš„çœŸå®ç‚¹æ˜¯å¤šå°‘ï¼Œæ‰€ä»¥ä¸€èˆ¬$f(x)$åœ¨$\hat{x}_{k-1}$(å³ä¸Šä¸€æ—¶åˆ»çš„åéªŒä¼°è®¡)å¤„è¿›è¡Œçº¿æ€§åŒ–ã€‚</p>
<ul>
<li>è¿‡ç¨‹æ–¹ç¨‹çº¿æ€§åŒ–</li>
</ul>
<blockquote>
<p>å‡è®¾è¯¯å·®$w_{k-1}=0$</p>
</blockquote>
<script type="math/tex; mode=display">
\begin{align*}
x_k&=f(\hat{x}_{k-1},u_{k-1},w_{k-1})+A(x_k-\hat{x}_{k-1})+Ww_{k-1}\\
&=f(\hat{x}_{k-1},u_{k-1},0)+A(x_k-\hat{x}_{k-1})+Ww_{k-1}
\end{align*}</script><blockquote>
<p>è®°ï¼š$f(\hat{x}_{k-1},u_{k-1},0)=\widetilde{x}$ï¼Œè€Œ$Aï¼ŒW$æ˜¯é›…å¯æ¯”çŸ©é˜µï¼Œä¸”$A=\frac{\partial f}{\partial x}|\hat{x}_{k-1},u_{k-1}$ï¼Œ$W=\frac{\partial f}{\partial w}|\hat{x}_{k-1},u_{k-1}$</p>
</blockquote>
<ul>
<li>æµ‹é‡æ–¹ç¨‹çº¿æ€§åŒ–</li>
</ul>
<p>å°†$z_k$åœ¨$\widetilde{x}$å¤„çº¿æ€§åŒ–ï¼š</p>
<blockquote>
<p>å‡è®¾è¯¯å·® $v_{k}=0$</p>
</blockquote>
<script type="math/tex; mode=display">
z_{k}=h(\widetilde{x}_{k},v_k)+H(x_k-\widetilde{x}_{k})+Vv_k</script><blockquote>
<p>è€Œ$Hï¼ŒV$æ˜¯é›…å¯æ¯”çŸ©é˜µï¼Œä¸”$H=\frac{\partial f}{\partial x}|\widetilde{x}_{k}$ï¼Œ$V=\frac{\partial f}{\partial v}|\widetilde{x}_{k}$</p>
</blockquote>
<p>æ‰€ä»¥éçº¿æ€§ç³»ç»Ÿçº¿æ€§åŒ–åï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
x_k&=f(\hat{x}_{k-1},u_{k-1},0)+A(x_k-\hat{x}_{k-1})+Ww_{k-1}\\
z_{k}&=h(\widetilde{x}_{k},v_k)+H(x_k-\widetilde{x}_{k})+Vv_k
\end{align*}</script><p>ç”±äº$p_{(w)}\sim N(0,Q)ï¼Œp_{(v)}\sim N(0,R)$ï¼Œå…¶ä¸­$0$è¡¨ç¤ºæœŸæœ›ï¼Œ$Q,R$ä»£è¡¨åæ–¹å·®çŸ©é˜µï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“å¾—åˆ°$p_{(Ww)}\sim N(0,wQw^T)ï¼Œp_{(Vv)}\sim N(0,vRv^T)$</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹æ•´ä¸ªå¡å°”æ›¼æ»¤æ³¢çš„è¿‡ç¨‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">é¢„æµ‹</th>
<th>æ ¡æ­£</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å…ˆéªŒï¼š$\hat{x}^-_k=Af(\hat{x}_{k-1},u_{k-1},0)+Bu_{k-1}$</td>
<td>å¡å°”æ›¼å¢ç›Šï¼š$K_k=\frac{P_k^-H^T}{HP_k^-H^T+vRv^T}$</td>
</tr>
<tr>
<td style="text-align:left">å…ˆéªŒè¯¯å·®åæ–¹å·®ï¼š$P_k^-=AP_{k-1}A^T+wQw^T$</td>
<td>åéªŒä¼°è®¡ï¼š$\hat{x}_k=\hat{x}^-_k+K_k(z_k-h(\hat{x}^-_k,0)),K_k\in[0,H^-]$</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td>æ›´æ–°è¯¯å·®åæ–¹å·®ï¼š$P_k=(I-K_kH)P_k^-$</td>
</tr>
</tbody>
</table>
</div>
<h2 id="EKFåœ¨SLAMä¸­çš„å±€é™æ€§"><a href="#EKFåœ¨SLAMä¸­çš„å±€é™æ€§" class="headerlink" title="EKFåœ¨SLAMä¸­çš„å±€é™æ€§"></a>EKFåœ¨SLAMä¸­çš„å±€é™æ€§</h2><p>å‡è®¾äº†é©¬å°”å¯å¤«æ€§ï¼Œä¹Ÿå°±æ˜¯$ k$ æ—¶åˆ»çš„çŠ¶æ€åªä¸$ k âˆ’ 1$æ—¶åˆ»ç›¸å…³ï¼Œè€Œä¸$ k âˆ’ 1 $ä¹‹å‰çš„çŠ¶æ€å’Œè§‚æµ‹éƒ½æ— å…³ï¼ˆæˆ–è€…å’Œå‰å‡ ä¸ªæœ‰é™æ—¶é—´çš„çŠ¶æ€ç›¸å…³ï¼‰ã€‚è¿™æœ‰ç‚¹åƒæ˜¯åœ¨è§†è§‰é‡Œç¨‹è®¡ä¸­ï¼Œåªè€ƒè™‘ç›¸é‚»ä¸¤å¸§å…³ç³»ä¸€æ ·ã€‚å¦‚æœå½“å‰å¸§ç¡®å®ä¸å¾ˆä¹…ä¹‹å‰çš„æ•°æ®æœ‰å…³ï¼ˆä¾‹å¦‚å›ç¯ï¼‰ï¼Œé‚£ä¹ˆæ»¤æ³¢å™¨å°±ä¼šéš¾ä»¥å¤„ç†è¿™ç§æƒ…å†µã€‚</p>
<p>$EKF$ æ»¤æ³¢å™¨ä»…åœ¨ $\hat{x}_{kâˆ’1}$ å¤„åšäº†ä¸€æ¬¡çº¿æ€§åŒ–ï¼Œç„¶åå°±ç›´æ¥æ ¹æ®è¿™æ¬¡çº¿æ€§åŒ–ç»“æœï¼ŒæŠŠåéªŒæ¦‚ç‡ç»™ç®—äº†å‡ºæ¥ã€‚è¿™ç›¸å½“äºåœ¨è¯´ï¼Œæˆ‘ä»¬è®¤ä¸ºè¯¥ç‚¹å¤„çº¿æ€§åŒ–è¿‘ä¼¼ï¼Œåœ¨åéªŒæ¦‚ç‡å¤„ä»ç„¶æ˜¯æœ‰æ•ˆçš„ã€‚è€Œå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬ç¦»å¼€å·¥ä½œç‚¹è¾ƒè¿œçš„æ—¶å€™ï¼Œä¸€é˜¶æ³°å‹’å±•å¼€å¹¶ä¸ä¸€å®šèƒ½å¤Ÿè¿‘ä¼¼æ•´ä¸ªå‡½æ•°ï¼Œè¿™å–å†³äºè¿åŠ¨æ¨¡å‹å’Œè§‚æµ‹æ¨¡å‹çš„éçº¿æ€§æƒ…å†µã€‚</p>
<p>ä»ç¨‹åºå®ç°ä¸Šæ¥è¯´ï¼ŒEKF éœ€è¦å­˜å‚¨çŠ¶æ€é‡çš„å‡å€¼å’Œæ–¹å·®ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œç»´æŠ¤å’Œæ›´æ–°ã€‚å¦‚æœæŠŠè·¯æ ‡ä¹Ÿæ”¾è¿›çŠ¶æ€çš„è¯ï¼Œç”±äºè§†è§‰ SLAM ä¸­è·¯æ ‡æ•°é‡å¾ˆå¤§ï¼Œè¿™ä¸ªå­˜å‚¨é‡æ˜¯ç›¸å½“å¯è§‚çš„ï¼Œä¸”ä¸çŠ¶æ€é‡å‘ˆå¹³æ–¹å¢é•¿ï¼ˆå› ä¸ºè¦å­˜å‚¨åæ–¹å·®çŸ©é˜µï¼‰ã€‚å› æ­¤ï¼ŒEKF SLAM æ™®éè¢«è®¤ä¸ºä¸å¯é€‚ç”¨äºå¤§å‹åœºæ™¯ã€‚</p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>å¡å°”æ›¼æ»¤æ³¢å™¨</tag>
        <tag>åç«¯ä¼˜åŒ–</tag>
        <tag>æ‰©å±•å¡å°”æ›¼æ»¤æ³¢</tag>
      </tags>
  </entry>
  <entry>
    <title>å¡å°”æ›¼æ»¤æ³¢å™¨çš„æ•°å­¦åŸºç¡€</title>
    <url>/posts/8369.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>å¡å°”æ›¼æ»¤æ³¢ï¼ˆKalman filterï¼‰æ˜¯ä¸€ç§é«˜æ•ˆç‡çš„<strong>é€’å½’æ»¤æ³¢å™¨</strong>ï¼ˆè‡ªå›å½’æ»¤æ³¢å™¨ï¼‰ï¼Œå®ƒèƒ½å¤Ÿä»ä¸€ç³»åˆ—çš„ä¸å®Œå…¨åŠåŒ…å«å™ªå£°çš„æµ‹é‡ä¸­ï¼Œä¼°è®¡åŠ¨æ€ç³»ç»Ÿçš„çŠ¶æ€ã€‚å¡å°”æ›¼æ»¤æ³¢ä¼šæ ¹æ®å„æµ‹é‡é‡åœ¨ä¸åŒæ—¶é—´ä¸‹çš„å€¼ï¼Œè€ƒè™‘å„æ—¶é—´ä¸‹çš„è”åˆåˆ†å¸ƒï¼Œå†äº§ç”Ÿå¯¹æœªçŸ¥å˜æ•°çš„ä¼°è®¡ï¼Œå› æ­¤ä¼šæ¯”åªä»¥å•ä¸€æµ‹é‡é‡ä¸ºåŸºç¡€çš„ä¼°è®¡æ–¹å¼è¦å‡†ã€‚å¡å°”æ›¼æ»¤æ³¢å¾—åè‡ªä¸»è¦è´¡çŒ®è€…ä¹‹ä¸€çš„é²é“å¤«Â·å¡å°”æ›¼ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="å¡å°”æ›¼æ»¤æ³¢å™¨çš„æ•°å­¦åŸºç¡€"><a href="#å¡å°”æ›¼æ»¤æ³¢å™¨çš„æ•°å­¦åŸºç¡€" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢å™¨çš„æ•°å­¦åŸºç¡€"></a>å¡å°”æ›¼æ»¤æ³¢å™¨çš„æ•°å­¦åŸºç¡€</h1><h2 id="é€’å½’ç®—æ³•"><a href="#é€’å½’ç®—æ³•" class="headerlink" title="é€’å½’ç®—æ³•"></a>é€’å½’ç®—æ³•</h2><p>å¡å°”æ›¼æ»¤æ³¢å™¨(Kalman Filter)ï¼Œå®ƒæ˜¯ä¸€ç§æœ€ä¼˜åŒ–çš„é€’å½’çš„æ•°å­—å¤„ç†ç®—æ³•(Optimal Recursive Data Processing Algorithm)ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨å¡å°”æ›¼æ»¤æ³¢ï¼Ÿ</strong></p>
<p>å› ä¸ºæ˜¾ç¤ºç”Ÿæ´»ä¸­å……æ»¡äº†ä¸ç¡®å®šæ€§ï¼Œè€Œè¿™äº›ä¸ç¡®å®šæ€§ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>ä¸å­˜åœ¨å®Œç¾çš„æ•°å­¦æ¨¡å‹</li>
<li>ç³»ç»Ÿçš„æ‰°åŠ¨ä¸å¯æ§ï¼Œä¹Ÿå¾ˆéš¾å»ºæ¨¡</li>
<li>æµ‹é‡ä¼ æ„Ÿå™¨å­˜åœ¨è¯¯å·®</li>
</ul>
<hr>
<p>ã€ä¾‹ã€‘æµ‹é‡ç¡¬å¸çš„ä¾‹å­</p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œä¸åŒçš„äººå»æµ‹é‡ä¸€ä¸ªç¡¬å¸çš„ç›´å¾„ï¼Œä¸€å…±æµ‹é‡$k$æ¬¡ï¼Œå¾—åˆ°çš„æµ‹é‡å€¼ä¸º$z_1,â€¦â€¦z_k$ï¼Œä¼°è®¡ç¡¬å¸çš„çœŸå®ç›´å¾„æ˜¯å¤šå°‘ï¼Ÿ</p>
<p><img src="/images/å¡å°”æ›¼æ»¤æ³¢å™¨/image-20220401093317316.png" alt="image-20220401093317316"></p>
<p><strong>å–å¹³å‡å€¼</strong></p>
<p>è®¾æˆ‘ä»¬çš„å¹³å‡å€¼å³å¯¹çœŸå®å€¼çš„ä¼°è®¡å€¼(Estimate)ä¸º$\hat{x}$</p>
<script type="math/tex; mode=display">
\begin{align*}
\hat{x}_k&=\frac{1}{k}(z_1+z_2+...+z_k)\\
&=\frac{1}{k}(z_1+z_2+...+z_{k-1})+\frac{1}{k}z_k\\
&=\frac{1}{k} \frac{k-1}{k-1}(z_1+z_2+...+z_{k-1})+\frac{1}{k}z_k\\
&=\frac{k-1}{k}  \hat{x}_{k-1}+\frac{1}{k}z_k\\
&=\hat{x}_{k-1}-\frac{1}{k}\hat{x}_{k-1}  +\frac{1}{k}z_k
\end{align*}</script><p>æ•´ç†å¾—ï¼š</p>
<script type="math/tex; mode=display">
\hat{x}_k=\hat{x}_{k-1} +\frac{1}{k}(z_k-\hat{x}_{k-1} )</script><p>ä»¤$K_k=1/k$</p>
<script type="math/tex; mode=display">
\hat{x}_k=\hat{x}_{k-1} +K_k(z_k-\hat{x}_{k-1} )</script><p>å³ä¸ºï¼šå½“å‰çš„ä¼°è®¡å€¼=ä¸Šä¸€æ—¶åˆ»çš„ä¼°è®¡å€¼+$K_k$(å½“å‰æµ‹é‡å€¼-ä¸Šä¸€æ—¶åˆ»çš„ä¼°è®¡å€¼)</p>
<p><strong>åˆ†æï¼š</strong></p>
<ul>
<li>éšç€$k$çš„å¢åŠ ï¼Œ$K_k$è¶‹è¿‘äº0ï¼Œå¯ä»¥å¾—åˆ°$\hat{x}_k=\hat{x}_{k-1}$ï¼Œæµ‹é‡çš„ç»“æœ$z_k$ä¸å†é‡è¦</li>
<li>å½“$k$æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œ$K_k$å¾ˆå¤§ï¼Œåˆ™è¯´æ˜æµ‹é‡ç»“æœæ˜¯éå¸¸é‡è¦çš„</li>
<li>$K_k$å°±æ˜¯<strong>å¡å°”æ›¼å¢ç›Š</strong>ï¼Œæˆ–å«åšå¡å°”æ›¼å› æ•°ã€‚</li>
</ul>
<p><strong>æ±‚è§£å¡å°”æ›¼å¢ç›Š$K_k$:</strong></p>
<p>è®¾ä¼°è®¡è¯¯å·®ï¼š$e_{EST}$ï¼Œæµ‹é‡è¯¯å·®ï¼š$e_{MEA}$</p>
<script type="math/tex; mode=display">
K_k=\frac{ {e_{EST} }_{k-1} }{ {e_{EST} }_{k-1}+{e_{MEA} }_{k} }</script><p><strong>åˆ†æï¼š</strong></p>
<ul>
<li>$e_{EST}&gt;&gt;e_{MEA}ï¼š$$K_k$è¶‹è¿‘äº1ï¼Œåˆ™$\hat{x}_k=\hat{x}_{k-1} +z_k-\hat{x}_{k-1} =z_k$ï¼Œå³ä¼°è®¡è¯¯å·®å¤§ç›¸ä¿¡æµ‹é‡å€¼</li>
<li>$e_{EST}&lt;&lt;e_{MEA}ï¼š$$K_k$è¶‹è¿‘äº0ï¼Œåˆ™$\hat{x}_k=\hat{x}_{k-1} $ï¼Œæµ‹é‡è¯¯å·®å¤§ç›¸ä¿¡ä¼°è®¡å€¼</li>
</ul>
<hr>
<p>ã€ä¾‹ã€‘å¡å°”æ›¼æ»¤æ³¢çš„åº”ç”¨ä¸¾ä¾‹ï¼š</p>
<ul>
<li><strong>ä¸€èˆ¬è®¡ç®—å¡å°”æ›¼æ»¤æ³¢åˆ†ä¸ºä¸‰æ­¥ï¼š</strong><ul>
<li>è®¡ç®—å¡å°”æ›¼å¢ç›Šï¼š$K_k=\frac{ {e_{EST} }_{k-1} }{ {e_{EST} }_{k-1}+{e_{MEA} }_{k} }$</li>
<li>è®¡ç®—$\hat{x}_k=\hat{x}_{k-1} +K_k(z_k-\hat{x}_{k-1} )$</li>
<li>æ›´æ–°${ e_{EST} }_{k}=(1-K_k){e_{EST} }_{k-1}$</li>
</ul>
</li>
</ul>
<p>å·²çŸ¥ç‰©ä½“çš„å®é™…é•¿åº¦ä¸º$50mm$ï¼Œæµ‹é‡è¯¯å·®$e_{MEA}=3mm$ï¼Œä¼°è®¡è¯¯å·®$e_{MEA}=5mm$ï¼Œ$\hat{x}_0=40mm$ï¼Œä¸€å…±æµ‹é‡äº†13æ¬¡ï¼Œæ ¹æ®ä¸Šé¢çš„ä¸‰ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å¹¶ç”»å‡ºæŠ˜çº¿å›¾ã€‚</p>
<p><img src="/images/å¡å°”æ›¼æ»¤æ³¢å™¨/image-20220401102705574.png" alt="image-20220401102705574" style="zoom:50%;" /></p>
<p><img src="/images/å¡å°”æ›¼æ»¤æ³¢å™¨/image-20220401102555645.png" alt="image-20220401102555645" style="zoom:50%;" /></p>
<p>å¾ˆæ˜æ˜¾ï¼Œç»è¿‡æµ‹é‡æ¬¡æ•°çš„å¢åŠ ï¼Œæœ€ç»ˆçš„ä¼°è®¡å€¼æ˜¯æ¥è¿‘çœŸå®å€¼çš„ï¼Œè¿™å°±æ˜¯å¡å°”æ›¼æ»¤æ³¢é€’å½’çš„ä½œç”¨ã€‚</p>
<h2 id="æ•°æ®èåˆ"><a href="#æ•°æ®èåˆ" class="headerlink" title="æ•°æ®èåˆ"></a>æ•°æ®èåˆ</h2><p>æ•°æ®èåˆ(Data Fusion)</p>
<p>ã€ä¾‹ã€‘ç°æœ‰ä¸¤ä¸ªç§°ï¼Œå·²çŸ¥å®ƒä»¬ç§°çš„ç»“æœéƒ½ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼Œç°å»ç§°åŒä¸€ä¸ªç‰©ä½“ï¼Œå·²çŸ¥ç§°$A$ç§°å¾—ç‰©ä½“é‡é‡ä¸º$z_1=30g$ï¼Œå¹¶ä¸”å·²çŸ¥å®ƒçš„æ ‡å‡†å·®ä¸º$\sigma_1=2g$ï¼›ç§°$B$ç§°å¾—ç‰©ä½“é‡é‡ä¸º$z_2=32g$ï¼Œå¹¶ä¸”å·²çŸ¥å®ƒçš„æ ‡å‡†å·®ä¸º$\sigma_2=4g$ï¼›ä¼°è®¡è¯¥ç‰©ä½“çš„çœŸå®é‡é‡$\hat{z}_k=?$ã€‚</p>
<p>æ ¹æ®é€’å½’çš„æ€æƒ³ï¼š</p>
<script type="math/tex; mode=display">
\hat{z}_k=z_1+K_k(z_2-z_1)ï¼ŒK_k\in[0,1]</script><p>ä¸ºäº†æ±‚è§£æœ€æ¥è¿‘çœŸå®å€¼çš„$\hat{z}_k$ï¼Œå³æ±‚è§£æœ€ä¼˜çš„$K_k$å€¼ï¼Œä½¿å¾—æ–¹å·®$Var(\hat{z}_k)$æœ€å°ã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
\sigma^2_{\hat{z}_k }&=Var(z_1+K_k(z_2-z_1))\\
&=Var(z_1+K_kz_2-K_kz_1)\\
&=Var((1-K_k)z_1+K_kz_2)\\
&=Var((1-K_k)z_1)+Var(K_kz_2)\\
&=(1-K_k)^2Var(z_1)+K_k^2Var(z_2)\\
&=(1-K_k)^2\sigma_1^2+K_k^2\sigma_2^2\\
\end{align*}</script><p>å¯¹$K_k$æ±‚å¯¼ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&\frac{d\sigma^2_{\hat{z}_k } }{dK_k}=0\\
-2(1-K_k)&\sigma_1^2+2K_k\sigma_2^2=0\\
&K_k=\frac{\sigma_1^2}{\sigma_1^2+\sigma_2^2}
\end{align*}</script><p>å·²çŸ¥$\sigma_1=2,\sigma_2=4$:</p>
<script type="math/tex; mode=display">
K_k=\frac{\sigma_1^2}{\sigma_1^2+\sigma_2^2}=\frac{4}{4+16}=0.2</script><p>å¸¦å…¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\hat{z}_k&=z_1+K_k(z_2-z_1)\\
&=30+0.2(32-20)\\
&=30.4g
\end{align*}</script><p>å¯¹åº”æ–¹å·®ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\sigma^2_{\hat{z}_k }
&=(1-K_k)^2\sigma_1^2+K_k^2\sigma_2^2\\
&=(1-0.2)^2*4+0.2^2*16\\
&=3.2\\
\sigma_{\hat{z}_k }&=\sqrt{3.2} \\
&= 1.79
\end{align*}</script><p>å› æ­¤ï¼Œæˆ‘ä»¬æ ¹æ®ä¸¤ä¸ªç§°çš„ç‰¹æ€§ï¼Œæ ¹æ®æµ‹é‡å€¼å¯¹ç‰©ä½“çš„çœŸå®é‡é‡è¿›è¡Œäº†é¢„æµ‹ï¼Œé¢„æµ‹å€¼ä¸º$30.4g$ï¼Œè€Œä¸”å®ƒæ˜¯æœ€ä¼˜è§£ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯æ•°æ®èåˆã€‚</p>
<p><strong>å…¬å¼ï¼š</strong></p>
<p>å¯¹äºä¸¤ä¸ªé«˜æ–¯åˆ†å¸ƒçš„èåˆï¼Œå¦‚$p(A)\sim N(\mu_a,\sigma^2_a)$ï¼Œ$p(B)\sim N(\mu_b,\sigma^2_b)$</p>
<p>èåˆä¹‹åçš„é«˜æ–¯åˆ†å¸ƒ$p(C)\sim N(\mu_c,\sigma^2_c)$ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\mu_c&=\frac{\sigma^2_b\mu_a+\sigma^2_a\mu_b}{\sigma^2_a+\sigma^2_b}\\
\sigma_c&=\frac{\sigma^2_a\sigma^2_b}{\sigma^2_b+\sigma^2_b}
\end{align*}</script><p><img src="/images/å¡å°”æ›¼æ»¤æ³¢å™¨/WeChat%20Image_20220401141112.jpg" alt="WeChat Image_20220401141112" style="zoom: 15%;" /></p>
<hr>
<h2 id="åæ–¹å·®çŸ©é˜µ"><a href="#åæ–¹å·®çŸ©é˜µ" class="headerlink" title="åæ–¹å·®çŸ©é˜µ"></a>åæ–¹å·®çŸ©é˜µ</h2><p>åæ–¹å·®çŸ©é˜µ(Covariance Matrix)ï¼Œå®ƒå¯ä»¥æŠŠæ–¹å·®å’Œåæ–¹å·®åœ¨ä¸€ä¸ªçŸ©é˜µä¸­è¡¨ç°å‡ºæ¥ï¼Œä½“ç°äº†å˜é‡ä¹‹é—´çš„ï¼›è”åŠ¨å…³ç³»ã€‚</p>
<p>ã€ä¾‹ã€‘</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">çƒå‘˜</th>
<th style="text-align:center">èº«é«˜x</th>
<th style="text-align:center">ä½“é‡y</th>
<th style="text-align:center">å¹´é¾„z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ç“¦å°”è¿ª</td>
<td style="text-align:center">179</td>
<td style="text-align:center">74</td>
<td style="text-align:center">33</td>
</tr>
<tr>
<td style="text-align:center">å¥¥å·´æ¢…æ¨</td>
<td style="text-align:center">187</td>
<td style="text-align:center">80</td>
<td style="text-align:center">31</td>
</tr>
<tr>
<td style="text-align:center">è¨æ‹‰èµ«</td>
<td style="text-align:center">175</td>
<td style="text-align:center">71</td>
<td style="text-align:center">28</td>
</tr>
<tr>
<td style="text-align:center"><strong>å¹³å‡å€¼</strong></td>
<td style="text-align:center"><strong>180.3</strong></td>
<td style="text-align:center"><strong>75</strong></td>
<td style="text-align:center"><strong>30.7</strong></td>
</tr>
</tbody>
</table>
</div>
<p>åˆ†åˆ«æ±‚ä¸‰è€…çš„æ–¹å·®ä»¥åŠç›¸äº’ä¹‹é—´çš„åæ–¹å·®ï¼Œ</p>
<script type="math/tex; mode=display">
Var(x)=\sigma_x^2=\frac{1}{n}\sum^n_{i=1}(x_i-\mu)^2=\frac{1}{n}(\sum^n_{i=1}x_i^2-n\mu^2)</script><p>æ–¹å·®ï¼š$\sigma_x^2=24.89, \sigma_y^2=14,\sigma_z^2=4.22$ï¼Œ</p>
<script type="math/tex; mode=display">
Cov(X,Y)=E((X-\mu)(Y-v))=E(XÂ·Y)-\mu v</script><p>åæ–¹å·®ï¼š$\sigma_x\sigma_y=\sigma_y\sigma_x=18.7,\sigma_x\sigma_z=\sigma_z\sigma_x=4.4,\sigma_y\sigma_z=\sigma_z\sigma_y=3.3$ã€‚æ‰€ä»¥åæ–¹å·®çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
P=\begin{bmatrix}
\sigma_x^2&\sigma_x\sigma_y&\sigma_x\sigma_z\\
\sigma_y\sigma_x&\sigma_y^2&\sigma_y\sigma_z\\
\sigma_z\sigma_x&\sigma_z\sigma_y&\sigma_z^2
\end{bmatrix}=
\begin{bmatrix}
24.89&18.7&4.4\\
18.7&14&3.3\\
4.4&3.3&4.22
\end{bmatrix}</script><p>å¯ä»¥çœ‹å‡ºè¿åŠ¨å‘˜çš„èº«é«˜ä¸ä½“é‡ç›¸å…³æ€§æ¯”è¾ƒå¤§ï¼Œè€Œèº«é«˜ä½“é‡å’Œå¹´é¾„çš„ç›¸å…³æ€§æ˜¯æ¯”è¾ƒå°çš„ï¼Œè¿™ç§è§„å¾‹ï¼Œæ•°æ®è¶Šå¤šè¶Šæ˜æ˜¾ã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨çŸ©é˜µæ‰¹é‡è®¡ç®—åæ–¹å·®çŸ©é˜µï¼Ÿ</strong></p>
<p>ä¸€èˆ¬éœ€è¦è®¾ç½®ä¸€ä¸ªè¿‡æ¸¡çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
a=\begin{bmatrix}
x_1&y_1&z_1\\
x_2&y_2&z_2\\
x_3&y_3&z_3
\end{bmatrix}-
\frac{1}{3}
\begin{bmatrix}
1&1&1\\\
1&1&1\\
1&1&1
\end{bmatrix}
\begin{bmatrix}
x_1&y_1&z_1\\
x_2&y_2&z_2\\
x_3&y_3&z_3
\end{bmatrix}</script><p>åæ–¹å·®ï¼š</p>
<script type="math/tex; mode=display">
P=\frac{1}{3}a^Ta</script><h2 id="çŠ¶æ€ç©ºé—´è¡¨è¾¾å¼"><a href="#çŠ¶æ€ç©ºé—´è¡¨è¾¾å¼" class="headerlink" title="çŠ¶æ€ç©ºé—´è¡¨è¾¾å¼"></a>çŠ¶æ€ç©ºé—´è¡¨è¾¾å¼</h2><p>ã€ä¾‹ã€‘ï¼šæœ‰ä¸€ä¸ªå¼¹ç°§é˜»å°¼ç³»ç»Ÿï¼Œå¯¹è´¨é‡ä¸º$m$çš„ç‰©å—æ–½åŠ ä¸€ä¸ªåŠ›$F$ï¼Œå¼¹ç°§å‘å³çš„ä½ç§»é‡ä¸º$x$ï¼Œå·²çŸ¥å¼¹ç°§çš„èƒ¡å…‹ç³»æ•°ä¸º$k$ï¼Œé˜»å°¼ç³»æ•°ä¸º$B$</p>
<p><img src="/images/å¡å°”æ›¼æ»¤æ³¢å™¨/image-20220401152419675.png?40" alt="image-20220401152419675" style="zoom: 25%;" /></p>
<p>å®šä¹‰è¾“å…¥ä¸º$u_{(t)}=F_{(t)}$ï¼Œè¾“å‡ºä¸º$x$</p>
<p>ç”±èƒ¡å…‹å®šå¾‹å¯çŸ¥ï¼Œå¼¹ç°§æ‹‰åŠ›$f_k$ä»¥åŠé˜»åŠ›$f_B$ï¼š</p>
<script type="math/tex; mode=display">
f_k=kx\\
f_B=B\dot{x}</script><p>æ ¹æ®ç‰›é¡¿ç¬¬äºŒå®šå¾‹$F=ma$ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&m\ddot{x}=F-f_k-f_B\\
&m\ddot{x}+f_B+f_k=F\\
&m\ddot{x}+B\dot{x}+kx=F
\end{align*}</script><p>æ‰€ä»¥ç³»ç»Ÿçš„åŠ¨æ€æ–¹ç¨‹è¡¨è¾¾å¼ï¼š</p>
<script type="math/tex; mode=display">
m\ddot{x}+B\dot{x}+kx=F</script><p>ä½¿ç”¨ç»å…¸æ§åˆ¶ç†è®ºå¯ä»¥å¯¹ä¸Šå¼è¿›è¡Œæ‹‰æ™®æ‹‰æ–¯å˜æ¢ï¼Œè¿›è€Œæ±‚å¾—ç³»ç»Ÿçš„ä¼ é€’å‡½æ•°ï¼š</p>
<script type="math/tex; mode=display">
ms^2X_{(s)}+BsX_{(s)}+kX_{(s)}=F_{(s)}\\
G_{(s)}=\frac{X_{(s)} }{F_{(s)} }=\frac{1}{ms^2+Bs+K}</script><p>ä½†åœ¨ç°ä»£æ§åˆ¶ç†è®ºä¸­åˆ™æ›´å¤šçš„ä½¿ç”¨çŠ¶æ€ç©ºé—´æ–¹ç¨‹ï¼ŒçŠ¶æ€ç©ºé—´æ–¹ç¨‹å¯ä»¥çœ‹æˆä¸€ä¸ªé›†åˆï¼Œå®ƒåŒ…å«ç³»ç»Ÿçš„è¾“å…¥ã€ç³»ç»Ÿçš„è¾“å‡ºä»¥åŠçŠ¶æ€å˜é‡ï¼Œæœ€ç»ˆä½¿ç”¨ä¸€ä¸ªä¸€é˜¶å¾®åˆ†æ–¹ç¨‹çš„å½¢å¼è¡¨è¾¾å‡ºæ¥ã€‚</p>
<p>å³ï¼š</p>
<script type="math/tex; mode=display">
m\ddot{x}+B\dot{x}+kx=u</script><p>ç¡®å®šä¸¤ä¸ªåˆé€‚çš„çŠ¶æ€å˜é‡ï¼ŒæŠŠäºŒé˜¶é¡¹æ¶ˆé™¤ï¼š</p>
<ul>
<li>ä½ç½®ï¼š$z_1=x=x_1$</li>
<li>é€Ÿåº¦ï¼š$z_2=\dot{x}=x_2$</li>
</ul>
<p>ç”±äº$x_1=xï¼Œx_2=\dot{x}$ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°ï¼š$\dot{x_1}=x_2ï¼Œ\dot{x_2}=\ddot{x}$ï¼Œåˆ©ç”¨ä¸Šè¿°æ–¹ç¨‹åŒ–ç®€ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\dot{x_1}=x_2\\
\dot{x_2}=\ddot{x}&=\frac{1}{m}\mu-\frac{B}{m}\dot{x}-\frac{k}{m}x\\
&=\frac{1}{m}\mu-\frac{B}{m}x_2-\frac{k}{m}x_1
\end{align*}</script><p>ç»¼åˆä¸Šé¢çš„å››ä¸ªæ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
\dot{x_1}\\
\dot{x_2}
\end{bmatrix}
=\begin{bmatrix}
0&1\\
-\frac{K}{m}&-\frac{B}{m}
\end{bmatrix}
\begin{bmatrix}
x_1\\x_2
\end{bmatrix}
+\begin{bmatrix}
0\\ \frac{1}{m}
\end{bmatrix}u</script><script type="math/tex; mode=display">
\begin{bmatrix}
z_1\\z_2
\end{bmatrix}=
\begin{bmatrix}
1&0\\0&1
\end{bmatrix}
\begin{bmatrix}
x_1\\x_2
\end{bmatrix}</script><p>è¿›ä¸€æ­¥å½’çº³ï¼š</p>
<p>è¿ç»­å‹ï¼š</p>
<script type="math/tex; mode=display">
\dot{X}_{(t)}=AX_{(t)}+Bu_{(t)}\\
Z_{(t)}=HX_{(t)}</script><p>ç¦»æ•£å‹ï¼š</p>
<script type="math/tex; mode=display">
{X_k }=AX_{k-1}+Bu_{k}\\
Z_{k}=HX_{k}</script><p>å…¶ä¸­$k$è¡¨ç¤ºé‡‡æ ·æ—¶é—´å•ä½ã€‚</p>
<p>ç”±äºç°å®ä¸­å­˜åœ¨ç€ä¸ç¡®å®šæ€§ï¼Œæ¯”å¦‚å­˜åœ¨è¿‡ç¨‹å™ªå£°(Process Noise)ï¼š$w_{k}$ï¼Œæµ‹é‡å™ªå£°(Measurement Noise)ï¼š$v_k$</p>
<script type="math/tex; mode=display">
\begin{align*}
{X_k }&=AX_{k-1}+Bu_{k}+w_{k}\\
Z_{k}&=HX_{k}+v_k
\end{align*}</script><p>å› æ­¤ï¼Œæˆ‘ä»¬çš„æ¨¡å‹å’Œæµ‹é‡éƒ½å­˜åœ¨è¯¯å·®ï¼Œå¯¼è‡´è®¡ç®—å€¼ä»¥åŠæµ‹é‡å€¼éƒ½æ˜¯ä¸å‡†ç¡®çš„ï¼Œå¦‚ä½•é€šè¿‡ä¸¤ä¸ªä¸ç¡®å®šçš„å€¼å»ä¼°è®¡ä¸€ä¸ªå‡†ç¡®çš„å€¼$\hat{x}_k=?$ï¼Œæ ¹æ®æ•°æ®èåˆçš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸¤ä¸ªä¸å‡†ç¡®çš„ç»“æœè¿›è¡Œæ•°æ®èåˆï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ¯”è¾ƒå‡†ç¡®çš„ä¼°è®¡å€¼ã€‚</p>
<h2 id="çº¿æ€§åŒ–"><a href="#çº¿æ€§åŒ–" class="headerlink" title="çº¿æ€§åŒ–"></a>çº¿æ€§åŒ–</h2><p>æ³°å‹’çº§æ•°å±•å¼€å¼ï¼šå¯¹äºå‡½æ•°$f(x)$åœ¨ä»»æ„ä¸€ç‚¹$x_0$å¤„å±•å¼€</p>
<script type="math/tex; mode=display">
f(x)=f(x_0)+\frac{f^\prime(x_0)}{1!}(x-x_0)+\frac{f^{\prime \prime}(x_0)}{2!}(x-x_0)^2+...+\frac{f^{(n)}(x_0)}{1!}(x-x_0)^{n}</script><p>ä¸€èˆ¬å½“$x-x_0\rightarrow0$æ—¶ï¼Œåˆ™$(x-x_0)^{n}\rightarrow0,n\geq 2$ï¼Œåªå–ä¸€é˜¶æ³°å‹’ï¼š</p>
<script type="math/tex; mode=display">
f(x)=f(x_0)+f^\prime(x_0)(x-x_0)</script><p>è®¾$f(x_0)=k_1,f^\prime(x_0)=k_2$:</p>
<script type="math/tex; mode=display">
\begin{align*}
f(x)&=k_1+k_2(x-x_0)\\
&=k_2x+(k_1-k_2x_0)\\
&=k_2x+b
\end{align*}</script><p>å› æ­¤è¿™æ ·çš„ä¸€ä¸ªéçº¿æ€§çš„å‡½æ•°$f(x)$åœ¨ç‚¹$x_0$é™„è¿‘å°±è¢«çº¿æ€§åŒ–ä¸ºä¸€ä¸ªçº¿æ€§çš„å‡½æ•°ã€‚</p>
<ul>
<li><p><span style="color:red;">çº¿æ€§åŒ–æ˜¯å¯¹æŸä¸ªç‚¹é™„è¿‘è¿›è¡Œçº¿æ€§åŒ–ï¼Œè€Œä¸æ˜¯å…¨å±€è¿›è¡Œçº¿æ€§åŒ–</span></p>
</li>
<li><p><span style="color:red;">çº¿æ€§åŒ–çš„å‰ææ¡ä»¶ï¼Œä¸€å®šæ˜¯$(x-x_0)\rightarrow0$ </span></p>
</li>
</ul>
<p>å¦‚æœå¯¹äºäºŒç»´ä»¥ä¸Šçš„ï¼Œæˆ‘ä»¬çš„ä¸€é˜¶æ³°å‹’å±•å¼€å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
f(x)=f(x_0)+\frac{\partial f}{\partial x_0}(x-x_0)</script>]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
        <category>æ•°å­¦åŸºç¡€</category>
      </categories>
      <tags>
        <tag>å¡å°”æ›¼æ»¤æ³¢å™¨</tag>
        <tag>åç«¯ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>ch9_è®¾è®¡å‰ç«¯</title>
    <url>/posts/32548.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬æ¬¡å®è·µå°†å‰å‡ ç« å†…å®¹ç»“åˆè¿›æ¥ï¼Œå®é™…ä¹¦å†™ä¸€ä¸ªè§†è§‰é‡Œç¨‹è®¡ç¨‹åºï¼Œç”±äºå•ç›®ç›¸æœºå­˜åœ¨åˆå§‹åŒ–é—®é¢˜ä»¥åŠå°ºåº¦é—®é¢˜ï¼Œå› æ­¤æœ¬å®è·µé‡‡ç”¨çš„æ˜¯æœ€ç®€å•çš„RGB-Dç›¸æœºï¼Œä½†æ˜¯ä½¿ç”¨çš„ä¹Ÿåªæ˜¯RGB-Dæ•°æ®é›†ï¼Œè€ŒéçœŸæ­£çš„RGB-Dç›¸æœºã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="ä¸€ã€æ­å»ºVOæ¡†æ¶"><a href="#ä¸€ã€æ­å»ºVOæ¡†æ¶" class="headerlink" title="ä¸€ã€æ­å»ºVOæ¡†æ¶"></a>ä¸€ã€æ­å»ºVOæ¡†æ¶</h1><h2 id="1-1-ç¡®å®šç¨‹åºåŸºæœ¬æ¡†æ¶"><a href="#1-1-ç¡®å®šç¨‹åºåŸºæœ¬æ¡†æ¶" class="headerlink" title="1.1 ç¡®å®šç¨‹åºåŸºæœ¬æ¡†æ¶"></a>1.1 ç¡®å®šç¨‹åºåŸºæœ¬æ¡†æ¶</h2><h3 id="é¡¹ç›®ç›®å½•æ¡†æ¶"><a href="#é¡¹ç›®ç›®å½•æ¡†æ¶" class="headerlink" title="é¡¹ç›®ç›®å½•æ¡†æ¶"></a>é¡¹ç›®ç›®å½•æ¡†æ¶</h3><p>åœ¨ç¼–å†™ä¸€ä¸ªå°è§„æ¨¡çš„åº“æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå»ºç«‹ä¸€äº›æ–‡ä»¶å¤¹ï¼ŒæŠŠæºä»£ç ã€å¤´æ–‡ä»¶ã€æ–‡æ¡£ã€æµ‹è¯•æ•°æ®ã€é…ç½®æ–‡ä»¶ã€æ—¥å¿—ç­‰ç­‰åˆ†ç±»å­˜æ”¾ï¼Œè¿™æ ·ä¼šæ˜¾å¾—å¾ˆæœ‰æ¡ç†ã€‚å¦‚æœä¸€ä¸ªåº“å†…å®¹å¾ˆå¤šï¼Œæˆ‘ä»¬è¿˜ä¼šæŠŠä»£ç åˆ†è§£å„ä¸ªç‹¬ç«‹çš„å°æ¨¡å—ï¼Œä»¥ä¾¿æµ‹è¯•ã€‚</p>
<p>æˆ‘ä»¬çš„å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š</p>
<ul>
<li><p><strong>binï¼š</strong>ç”¨æ¥å­˜æ”¾å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼›</p>
</li>
<li><p><strong>include/myslamï¼š</strong> å­˜æ”¾ slam æ¨¡å—çš„å¤´æ–‡ä»¶ï¼Œä¸»è¦æ˜¯<code>.h</code>ã€‚è¿™ç§åšæ³•çš„ç†ç”±æ˜¯ï¼Œå½“ä½ æŠŠåŒ…å«ç›®å½•è®¾åˆ° include æ—¶ï¼Œåœ¨å¼•ç”¨è‡ªå·±çš„å¤´æ–‡ä»¶æ—¶ï¼Œéœ€è¦å†™<code>include â€myslam/xxx.hâ€</code>ï¼Œè¿™æ ·ä¸å®¹æ˜“å’Œåˆ«çš„åº“æ··æ·†ã€‚</p>
</li>
<li><p><strong>srcï¼š</strong>å­˜æ”¾æºä»£ç æ–‡ä»¶ï¼Œä¸»è¦æ˜¯ cppï¼›</p>
</li>
<li><p><strong>libï¼š</strong> å­˜æ”¾ç¼–è¯‘å¥½çš„åº“æ–‡ä»¶ï¼›</p>
</li>
<li><p><strong>buildï¼š</strong>å­˜æ”¾æ‰§è¡Œç¼–è¯‘æ“ä½œç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ï¼›</p>
</li>
<li><p><strong>configï¼š</strong> å­˜æ”¾é…ç½®æ–‡ä»¶ï¼›</p>
</li>
<li><p><strong>cmake_modulesï¼š</strong> ç¬¬ä¸‰æ–¹åº“çš„ cmake æ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨ g2o ä¹‹ç±»çš„åº“ä¸­ä¼šç”¨åˆ°å®ƒ</p>
</li>
<li><p><strong>testï¼š</strong> å­˜æ”¾æµ‹è¯•ç”¨çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ cpp</p>
</li>
<li><strong>datasetï¼š</strong>å­˜æ”¾æˆ‘ä»¬ä½¿ç”¨çš„RGB-Dæ•°æ®é›†</li>
<li><strong>toolsï¼š</strong>è¿™é‡Œæ˜¯å¯¹æ•°æ®é›†æ“ä½œç”¨çš„pythonæ–‡ä»¶</li>
</ul>
<p><img src="/images/è®¾è®¡å‰ç«¯/image-20220330203310388.png" alt="image-20220330203310388"></p>
<h3 id="åŸºæœ¬æ•°æ®ç»“æ„"><a href="#åŸºæœ¬æ•°æ®ç»“æ„" class="headerlink" title="åŸºæœ¬æ•°æ®ç»“æ„"></a>åŸºæœ¬æ•°æ®ç»“æ„</h3><p><strong>å¸§ï¼š</strong>ä¸€ä¸ªå¸§æ˜¯ç›¸æœºé‡‡é›†åˆ°çš„å›¾åƒå•ä½ã€‚å®ƒä¸»è¦åŒ…å«ä¸€ä¸ªå›¾åƒï¼ˆRGB-D æƒ…å½¢ä¸‹æ˜¯ä¸€å¯¹å›¾åƒï¼‰ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ç‰¹å¾ç‚¹ã€ä½å§¿ã€å†…å‚ç­‰ä¿¡æ¯ã€‚åœ¨è§†è§‰ SLAM ä¸­æˆ‘ä»¬ä¼šè°ˆè®ºå…³é”®å¸§ï¼ˆKey-frameï¼‰ï¼Œé€šå¸¸çš„åšæ³•æ˜¯æŠŠæŸäº›æˆ‘ä»¬è®¤ä¸ºæ›´é‡è¦çš„å¸§ä¿å­˜èµ·æ¥ï¼Œå¹¶è®¤ä¸ºç›¸æœºè½¨è¿¹å°±å¯ä»¥ç”¨è¿™äº›å…³é”®å¸§æ¥æè¿°ã€‚å…³é”®å¸§å¦‚ä½•é€‰æ‹©æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œè€Œä¸”åŸºäºå·¥ç¨‹ç»éªŒï¼Œå¾ˆå°‘æœ‰ç†è®ºä¸Šçš„æŒ‡å¯¼ã€‚</p>
<p><strong>è·¯æ ‡ï¼š</strong>è·¯æ ‡ç‚¹å³å›¾åƒä¸­çš„ç‰¹å¾ç‚¹ã€‚å½“ç›¸æœºè¿åŠ¨ä¹‹åï¼Œæˆ‘ä»¬è¿˜èƒ½ä¼°è®¡å®ƒä»¬çš„ 3D ä½ç½®ã€‚é€šå¸¸ï¼Œä¼šæŠŠè·¯æ ‡ç‚¹æ”¾åœ¨ä¸€ä¸ªåœ°å›¾å½“ä¸­ï¼Œå¹¶å°†æ–°æ¥çš„å¸§ä¸åœ°å›¾ä¸­çš„è·¯æ ‡ç‚¹è¿›è¡ŒåŒ¹é…ï¼Œä¼°è®¡ç›¸æœºä½å§¿ã€‚</p>
<h2 id="1-2-åŸºæœ¬ç±»çš„å®ç°"><a href="#1-2-åŸºæœ¬ç±»çš„å®ç°" class="headerlink" title="1.2 åŸºæœ¬ç±»çš„å®ç°"></a>1.2 åŸºæœ¬ç±»çš„å®ç°</h2><p>åˆšå¼€å§‹çš„é˜¶æ®µã€‚æˆ‘ä»¬ä¸€å…±å†™äº”ä¸ªç±»ï¼šFrame ä¸ºå¸§ï¼ŒCamera ä¸ºç›¸æœºæ¨¡å‹ï¼ŒMapPoint ä¸ºç‰¹å¾ç‚¹/è·¯æ ‡ç‚¹ï¼ŒMap<br>ç®¡ç†ç‰¹å¾ç‚¹ï¼ŒConfig æä¾›é…ç½®å‚æ•°ã€‚</p>
<p><img src="/images/è®¾è®¡å‰ç«¯/image-20220330200432411.png" alt="image-20220330200432411"></p>
<p>æ¯ä¸ªç±»å¯¹åº”ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œä¸€ä¸ªæºæ–‡ä»¶ï¼Œç”±äºè®¸å¤šç±»ä¼šå¼•ç”¨å¾ˆå¤šå¤´æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨ç›´æ¥å†™ä¸€ä¸ªå¤´æ–‡ä»¶ä¸“é—¨å­˜æ”¾å¤´æ–‡ä»¶ï¼Œè®©æ‰€æœ‰çš„å¤´æ–‡ä»¶éƒ½å¼•è¿™ä¸ªå¤´æ–‡ä»¶ã€‚å½“ç„¶ï¼Œè¿™ä¸ªå¤´æ–‡ä»¶é‡Œçš„å†…å®¹æ˜¯ä¸æ–­å¡«å……çš„ï¼Œç°åœ¨å°±ä»¥ç›´æ¥ç»™å‡ºçš„å½¢å¼å‘ˆç°ã€‚</p>
<p><strong>WL_SLAM_VO/include/myslam/common_include.h</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> COMMON_INCLUDE_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> COMMON_INCLUDE_H</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for Eigen</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Geometry&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> Eigen::Vector2d;</span><br><span class="line"><span class="keyword">using</span> Eigen::Vector3d;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for Sophus</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sophus/se3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sophus/so3.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> Sophus::SE3;</span><br><span class="line"><span class="keyword">using</span> Sophus::SO3;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// for cv</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> cv::Mat;</span><br><span class="line"></span><br><span class="line"><span class="comment">// std </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std; </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<h3 id="Cameraç±»"><a href="#Cameraç±»" class="headerlink" title="Cameraç±»"></a>Cameraç±»</h3><p>Camera ç±»å­˜å‚¨ç›¸æœºçš„å†…å‚å’Œå¤–å‚ï¼Œå¹¶å®Œæˆç›¸æœºåæ ‡ç³»ã€åƒç´ åæ ‡ç³»ã€å’Œä¸–ç•Œåæ ‡ç³»ä¹‹é—´çš„åæ ‡å˜æ¢ã€‚å½“ç„¶ï¼Œåœ¨ä¸–ç•Œåæ ‡ç³»ä¸­ä½ éœ€è¦ä¸€ä¸ªç›¸æœºçš„ï¼ˆå˜åŠ¨çš„ï¼‰å¤–å‚ï¼Œæˆ‘ä»¬ä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥ã€‚</p>
<p><strong>WL_SLAM_VO/include/myslam/Camera.h</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CAMERA</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CAMERA</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;myslam/common_include.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æˆ‘ä»¬ç”¨å‘½åç©ºé—´ namespace myslam </span></span><br><span class="line"><span class="comment">å°†ç±»å®šä¹‰åŒ…è£¹èµ·æ¥å‘½åç©ºé—´å¯ä»¥é˜²æ­¢æˆ‘ä»¬ä¸å°å¿ƒå®šä¹‰å‡ºåˆ«çš„åº“é‡ŒåŒåçš„å‡½æ•°ï¼Œä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒå®‰å…¨å’Œè§„èŒƒçš„åšæ³•ã€‚*/</span> </span><br><span class="line"><span class="keyword">namespace</span> mysalm</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Camera</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æŠŠæ™ºèƒ½æŒ‡é’ˆå®šä¹‰æˆ Camera çš„æŒ‡é’ˆç±»å‹ï¼Œå› æ­¤ä»¥ååœ¨ä¼ é€’å‚æ•°æ—¶ï¼Œåªéœ€ç”¨ Camera::Ptr ç±»å‹å³å¯</span></span><br><span class="line">    <span class="keyword">typedef</span> std::shared_ptr&lt;Camera&gt; Ptr;</span><br><span class="line">    <span class="comment">// ç›¸æœºå†…å‚</span></span><br><span class="line">    <span class="keyword">float</span> fx_, fy_, cx_, cy_, depth_scale_;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Camera</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Camera</span>(<span class="keyword">float</span> fx,<span class="keyword">float</span> fy,<span class="keyword">float</span> cx,<span class="keyword">float</span> cy, <span class="keyword">float</span> depth_scale) : </span><br><span class="line">        <span class="built_in">fx_</span>(fx),<span class="built_in">fy_</span>(fy),<span class="built_in">cx_</span>(cx),<span class="built_in">cy_</span>(cy),<span class="built_in">depth_scale_</span>(depth_scale)&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åæ ‡å˜æ¢</span></span><br><span class="line">    <span class="function">Vector3d <span class="title">world2camera</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;p_w, <span class="keyword">const</span> SE3 &amp;T_c_w)</span></span>;</span><br><span class="line">    <span class="function">Vector3d <span class="title">camera2world</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;p_c, <span class="keyword">const</span> SE3 &amp;T_c_w)</span></span>;</span><br><span class="line">    <span class="function">Vector2d <span class="title">camera2pixel</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;p_c)</span></span>;</span><br><span class="line">    <span class="function">Vector2d <span class="title">pixel2camera</span><span class="params">(<span class="keyword">const</span> Vector2d &amp;p_p, <span class="keyword">double</span> depth = <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">Vector3d <span class="title">pixel2world</span><span class="params">(<span class="keyword">const</span> Vector2d &amp;p_p, <span class="keyword">const</span> SE3 &amp;T_c_w, <span class="keyword">double</span> depth = <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">Vector3d <span class="title">world2pixel</span><span class="params">(<span class="keyword">const</span> Vector2d &amp;p_w, <span class="keyword">const</span> SE3 &amp;T_c_w)</span></span>;</span><br><span class="line">&#125;;      </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ™ºèƒ½æŒ‡é’ˆï¼šstd::shared_ptr</p>
<p><code>std::shared_ptr</code> æ˜¯ä¸€ç§æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒèƒ½å¤Ÿè®°å½•å¤šå°‘ä¸ª <code>shared_ptr</code> å…±åŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œæ¶ˆé™¤æ˜¾å¼çš„è°ƒç”¨ <code>delete</code>ï¼Œå½“å¼•ç”¨è®¡æ•°å˜ä¸ºé›¶çš„æ—¶å€™å°±ä¼šå°†å¯¹è±¡è‡ªåŠ¨åˆ é™¤ã€‚</p>
<p><code>std::make_shared</code> å°±èƒ½å¤Ÿç”¨æ¥æ¶ˆé™¤æ˜¾å¼çš„ä½¿ç”¨ <code>new</code>ï¼Œæ‰€ä»¥<code>std::make_shared</code> ä¼šåˆ†é…åˆ›å»ºä¼ å…¥å‚æ•°ä¸­çš„å¯¹è±¡ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ç±»å‹çš„<code>std::shared_ptr</code>æŒ‡é’ˆã€‚</p>
</blockquote>
<p><strong>WL_SLAM_VO/src/camera.cpp</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;myslam/camera.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> myslam</span><br><span class="line">&#123;</span><br><span class="line">    Camera::<span class="built_in">Camera</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Vector3d <span class="title">Camera::world2camera</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;p_w, <span class="keyword">const</span> SE3 &amp;T_c_w)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> T_c_w * p_w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Vector3d <span class="title">Camera::camera2world</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;p_c, <span class="keyword">const</span> SE3 &amp;T_c_w)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> T_c_w.<span class="built_in">inverse</span>() * p_c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Vector2d <span class="title">Camera::camera2pixel</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;p_c)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Vector2d</span>(</span><br><span class="line">            fx_ * <span class="built_in">p_c</span>(<span class="number">0</span>, <span class="number">0</span>) / <span class="built_in">p_c</span>(<span class="number">2</span>, <span class="number">0</span>) + cx_,  <span class="comment">// u = fx*X/Z+cx</span></span><br><span class="line">            fx_ * <span class="built_in">p_c</span>(<span class="number">1</span>, <span class="number">0</span>) / <span class="built_in">p_c</span>(<span class="number">2</span>, <span class="number">0</span>) + cy_); <span class="comment">// v = fy*Y/Z+cy</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Vector3d <span class="title">Camera::pixel2camera</span><span class="params">(<span class="keyword">const</span> Vector2d &amp;p_p, <span class="keyword">double</span> depth = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Vector3d</span>(</span><br><span class="line">            (<span class="built_in">p_p</span>(<span class="number">0</span>, <span class="number">0</span>) - cx_) * depth / fx_, <span class="comment">// X = (u-cx)*Z/fx</span></span><br><span class="line">            (<span class="built_in">p_p</span>(<span class="number">1</span>, <span class="number">0</span>) - cy_) * depth / fy_, <span class="comment">// Y = (v-cy)*Z/fy</span></span><br><span class="line">            depth);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Vector3d <span class="title">Camera::pixel2world</span><span class="params">(<span class="keyword">const</span> Vector2d &amp;p_p, <span class="keyword">const</span> SE3 &amp;T_c_w, <span class="keyword">double</span> depth = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">camera2world</span>(<span class="built_in">pixel2camera</span>(p_p, depth), T_c_w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Vector2d <span class="title">Camera::world2pixel</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;p_w, <span class="keyword">const</span> SE3 &amp;T_c_w)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">camera2pixel</span>(<span class="built_in">world2camera</span>(p_w, T_c_w));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// namespace myslam</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="Frameç±»"><a href="#Frameç±»" class="headerlink" title="Frameç±»"></a>Frameç±»</h3><p>ç”±äº Frame ç±»æ˜¯åŸºæœ¬æ•°æ®å•å…ƒï¼Œåœ¨è®¸å¤šåœ°æ–¹ä¼šç”¨åˆ°å®ƒï¼Œä½†ç°åœ¨åˆæœŸè®¾è®¡é˜¶æ®µï¼Œæˆ‘ä»¬è¿˜ä¸æ¸…æ¥šä»¥åå¯èƒ½æ–°åŠ çš„å†…å®¹ã€‚æ‰€ä»¥è¿™é‡Œçš„ Frame ç±»åªæä¾›åŸºæœ¬çš„æ•°æ®å­˜å‚¨å’Œæ¥å£ã€‚å¦‚æœä¹‹åæœ‰æ–°å¢çš„å†…å®¹ï¼Œæˆ‘ä»¬å°±ç»§ç»­å¾€é‡Œæ·»åŠ ã€‚</p>
<p><strong>WL_SLAM_VO/include/myslam/frame.h</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;myslam/common_include.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;myslam/camera.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> FRAME</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FRAME</span></span><br><span class="line"><span class="keyword">namespace</span> myslam</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// æå‰å£°æ˜MapPointç±»ï¼Œéœ€è¦ç”¨åˆ°å¸§çš„å…³é”®ç‚¹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MapPoint</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Frame</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">typedef</span> std::shared_ptr&lt;Frame&gt; Ptr; <span class="comment">// å®šä¹‰Frameç±»çš„æ™ºèƒ½æŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> id_;                  <span class="comment">// å›¾åƒå¸§çš„idç¼–å·</span></span><br><span class="line">    <span class="keyword">double</span> time_stamp_;                 <span class="comment">// å›¾åƒå¸§è¢«è®°å½•çš„æ—¶é—´æˆ³</span></span><br><span class="line">    SE3 T_c_w_;                         <span class="comment">// ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»çš„å˜æ¢çŸ©é˜µ</span></span><br><span class="line">    Camera::Ptr camera_;                <span class="comment">//é’ˆå­”RGB-Dç›¸æœºæ¨¡å‹</span></span><br><span class="line">    Mat color_, depth_;                 <span class="comment">// å½©è‰²å›¾ä»¥åŠå›¾åƒæ·±åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Frame</span>();</span><br><span class="line">    <span class="built_in">Frame</span>(<span class="keyword">long</span> id, <span class="keyword">double</span> time_stamp=<span class="number">0</span>, SE3 T_c_w=<span class="built_in">SE3</span>(), Camera::Ptr=<span class="literal">nullptr</span>,</span><br><span class="line">        Mat color = <span class="built_in">Mat</span>(),Mat depth = <span class="built_in">Mat</span>() );</span><br><span class="line">    ~<span class="built_in">Frame</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºå¸§</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> Frame::Ptr <span class="title">creatFrame</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç»™å®šç‚¹å¯¹åº”çš„æ·±åº¦ </span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">findDepth</span><span class="params">(<span class="keyword">const</span> cv::KeyPoint &amp;kp)</span></span>;</span><br><span class="line">    <span class="comment">// è·å–ç›¸æœºå…‰å¿ƒ</span></span><br><span class="line">    <span class="function">Vector3d <span class="title">getCamCenter</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æŸä¸ªç‚¹æ˜¯å¦åœ¨è§†é‡å†…</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isInFrame</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;pt_world)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">&#125; <span class="comment">// namespace myslam</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p><strong>WL_SLAM_VO/src/frame.cpp</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;myslam/common_include.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;myslam/frame.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> myslam</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// æ„é€ ä¸ææ„</span></span><br><span class="line">Frame::<span class="built_in">Frame</span>() : <span class="built_in">id_</span>(<span class="number">-1</span>),<span class="built_in">time_stamp_</span>(<span class="number">-1</span>),<span class="built_in">camera_</span>(<span class="literal">nullptr</span>)&#123;&#125;</span><br><span class="line">Frame::<span class="built_in">Frame</span> ( <span class="keyword">long</span> id, <span class="keyword">double</span> time_stamp, SE3 T_c_w, Camera::Ptr camera, Mat color, Mat depth )</span><br><span class="line">: <span class="built_in">id_</span>(id), <span class="built_in">time_stamp_</span>(time_stamp), <span class="built_in">T_c_w_</span>(T_c_w), <span class="built_in">camera_</span>(camera), <span class="built_in">color_</span>(color), <span class="built_in">depth_</span>(depth)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">Frame::~<span class="built_in">Frame</span>()&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º Frame</span></span><br><span class="line"><span class="function">Frame::Ptr <span class="title">Frame::creatFrame</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">long</span> factory_id = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> Frame::<span class="built_in">Ptr</span>( <span class="keyword">new</span> <span class="built_in">Frame</span>(factory_id++) );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯»æ‰¾ç»™å®šç‚¹å¯¹åº”çš„æ·±åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Frame::findDepth</span><span class="params">(<span class="keyword">const</span> cv::KeyPoint &amp;kp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è·å¾—åƒç´ ç‚¹çš„åæ ‡</span></span><br><span class="line">    <span class="keyword">int</span> x = <span class="built_in">cvRound</span>(kp.pt.x);</span><br><span class="line">    <span class="keyword">int</span> y = <span class="built_in">cvRound</span>(kp.pt.y);</span><br><span class="line">    <span class="comment">// å¾—åˆ°åƒç´ ç‚¹çš„æ·±åº¦</span></span><br><span class="line">    ushort d = depth_.ptr&lt;ushort&gt;(y)[x];</span><br><span class="line">    <span class="keyword">if</span>(d != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in"><span class="keyword">double</span></span>(d)/camera_-&gt;depth_scale_;</span><br><span class="line">    &#125;<span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè¯¥åƒç´ æ·±åº¦ä¸º0ï¼Œåˆ™é€‰æ‹©é™„è¿‘çš„ç‚¹ä½œä¸ºå‚è€ƒ</span></span><br><span class="line">        <span class="keyword">int</span> dx[<span class="number">4</span>] = &#123;<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> dy[<span class="number">4</span>] = &#123;<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            d = depth_.ptr&lt;ushort&gt;(y+dy[i])[x+dx[i]];</span><br><span class="line">            <span class="keyword">if</span>(d != <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in"><span class="keyword">double</span></span>(d)/camera_-&gt;depth_scale_;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;      </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–ç›¸æœºå…‰å¿ƒ</span></span><br><span class="line"><span class="function">Vector3d <span class="title">Frame::getCamCenter</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//ç›¸æœºåæ ‡ç³»çš„ï¼ˆ0,0,0ï¼‰åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">return</span> T_c_w_.<span class="built_in">inverse</span>().<span class="built_in">translation</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ¤æ–­æŸä¸ªç‚¹æ˜¯å¦åœ¨è§†é‡å†…</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Frame::isInFrame</span><span class="params">(<span class="keyword">const</span> Vector3d &amp;pt_world)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å°†ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ç‚¹è½¬æ¢ä¸ºç›¸æœºåæ ‡ç³»</span></span><br><span class="line">    Vector3d p_cam = camera_-&gt;<span class="built_in">world2camera</span>(pt_world,T_c_w_);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">p_cam</span>(<span class="number">2.0</span>)&lt;<span class="number">0</span>) <span class="comment">// Zå°äº0</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    Vector2d pixel = camera_-&gt;<span class="built_in">world2pixel</span>(pt_world,T_c_w_);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">pixel</span>(<span class="number">0</span>,<span class="number">0</span>)&gt;<span class="number">0</span> </span><br><span class="line">        &amp;&amp; <span class="built_in">pixel</span>(<span class="number">1</span>,<span class="number">0</span>)&gt;<span class="number">0</span> </span><br><span class="line">        &amp;&amp; <span class="built_in">pixel</span>(<span class="number">0</span>,<span class="number">0</span>)&lt;color_.cols </span><br><span class="line">        &amp;&amp; <span class="built_in">pixel</span>(<span class="number">1</span>,<span class="number">0</span>)&lt;color_.rows;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="comment">// namespace myslam</span></span><br></pre></td></tr></table></figure>
<h3 id="MapPoint-ç±»"><a href="#MapPoint-ç±»" class="headerlink" title="MapPoint ç±»"></a>MapPoint ç±»</h3><p><strong>WL_SLAM_VO/include/myslam/mappoint.h</strong></p>
<p>MapPoint è¡¨ç¤ºè·¯æ ‡ç‚¹ã€‚æˆ‘ä»¬å°†ä¼°è®¡å®ƒçš„ä¸–ç•Œåæ ‡ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¼šæ‹¿å½“å‰å¸§æå–åˆ°çš„ç‰¹å¾ç‚¹ä¸åœ°å›¾ä¸­çš„è·¯æ ‡ç‚¹åŒ¹é…ï¼Œæ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ï¼Œå› æ­¤è¿˜éœ€è¦å­˜å‚¨å®ƒå¯¹åº”çš„æè¿°å­ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¼šè®°å½•ä¸€ä¸ªç‚¹è¢«è§‚æµ‹åˆ°çš„æ¬¡æ•°å’Œè¢«åŒ¹é…åˆ°çš„æ¬¡æ•°ï¼Œä½œä¸ºè¯„ä»·å®ƒçš„å¥½åç¨‹åº¦çš„æŒ‡æ ‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="Mapç±»"><a href="#Mapç±»" class="headerlink" title="Mapç±»"></a>Mapç±»</h3><p><strong>WL_SLAM_VO/include/myslam/map.h</strong></p>
<p>Map ç±»ç®¡ç†ç€æ‰€æœ‰çš„è·¯æ ‡ç‚¹ï¼Œå¹¶è´Ÿè´£æ·»åŠ æ–°è·¯æ ‡ã€åˆ é™¤ä¸å¥½çš„è·¯æ ‡ç­‰å·¥ä½œã€‚VO çš„åŒ¹é…è¿‡ç¨‹åªéœ€è¦å’Œ Map æ‰“äº¤é“å³å¯ã€‚å½“ç„¶ Map ä¹Ÿä¼šæœ‰å¾ˆå¤šæ“ä½œï¼Œä½†ç°é˜¶æ®µæˆ‘ä»¬åªå®šä¹‰ä¸»è¦çš„æ•°æ®ç»“æ„ã€‚</p>
<p><strong>WL_SLAM_VO/src/map.h</strong></p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>VO</tag>
      </tags>
  </entry>
  <entry>
    <title>ch8_RGB-Dç›´æ¥æ³•å®è·µ</title>
    <url>/posts/18310.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ­¤æ¬¡å®è·µä½¿ç”¨RGB-Dç›¸æœºä¸»è¦æ˜¯å› ä¸ºå®ƒçœç•¥æ‰äº†æ·±åº¦çš„æ¢å¤éƒ¨åˆ†ï¼Œå¦‚æœä½¿ç”¨å•ç›®ç›¸æœºï¼Œåˆ™éœ€è¦è¿›è¡Œæ·±åº¦çš„æ¢å¤ï¼Œåœ¨ä¹‹å‰çš„å®è·µå†…å®¹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å•ç›®ç›¸æœºä¸»è¦æ˜¯é‡‡ç”¨åŸºäºç‰¹å¾ç‚¹çš„æ·±åº¦æ¢å¤ï¼Œåé¢ä¼šä»‹ç»ç›¸åº”çš„åŸºäºå—åŒ¹é…çš„æ·±åº¦æ¢å¤ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="ä¸€ã€ç›´æ¥æ³•"><a href="#ä¸€ã€ç›´æ¥æ³•" class="headerlink" title="ä¸€ã€ç›´æ¥æ³•"></a>ä¸€ã€ç›´æ¥æ³•</h1><p>ç›´æ¥æ³•æ ¹æ®ç©ºé—´ç‚¹$P$çš„æ¥æºä¸åŒï¼Œå¯¹åº”ä¸åŒçš„ç›´æ¥æ³•ã€‚</p>
<ul>
<li>ç¨€ç–ç›´æ¥æ³•</li>
</ul>
<p>è‹¥$P$æ¥è‡ªäºç¨€ç–å…³é”®ç‚¹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç¨€ç–ç›´æ¥æ³•ã€‚é€šå¸¸æˆ‘ä»¬ä½¿ç”¨æ•°ç™¾ä¸ªè‡³ä¸Šåƒä¸ªå…³é”®ç‚¹ï¼Œå¹¶ä¸”åƒ $L-K $å…‰æµé‚£æ ·ï¼Œå‡è®¾å®ƒå‘¨å›´åƒç´ ä¹Ÿæ˜¯ä¸å˜çš„ã€‚è¿™ç§ç¨€ç–ç›´æ¥æ³•ä¸å¿…è®¡ç®—æè¿°å­ï¼Œå¹¶ä¸”åªä½¿ç”¨æ•°ç™¾ä¸ªåƒç´ ï¼Œå› æ­¤é€Ÿåº¦æœ€å¿«ï¼Œä½†åªèƒ½è®¡ç®—ç¨€ç–çš„é‡æ„ã€‚</p>
<ul>
<li>åŠç¨ å¯†ï¼ˆSemi-Denseï¼‰çš„ç›´æ¥æ³•</li>
</ul>
<p>å¦‚æœåƒç´ æ¢¯åº¦ä¸ºé›¶ï¼Œæ•´ä¸€é¡¹é›…å¯æ¯”å°±ä¸ºé›¶ï¼Œä¸ä¼šå¯¹è®¡ç®—è¿åŠ¨å¢é‡æœ‰ä»»ä½•è´¡çŒ®ã€‚å› æ­¤ï¼Œå¯ä»¥è€ƒè™‘åªä½¿ç”¨å¸¦æœ‰æ¢¯åº¦çš„åƒç´ ç‚¹ï¼Œèˆå¼ƒåƒç´ æ¢¯åº¦ä¸æ˜æ˜¾çš„åœ°æ–¹ã€‚</p>
<script type="math/tex; mode=display">
J=-\frac{\partial I_2}{\partial u}
\frac{\partial u}{\partial \delta \xi}</script><ul>
<li>ç¨ å¯†ç›´æ¥æ³•</li>
</ul>
<p>ç¨ å¯†é‡æ„éœ€è¦è®¡ç®—æ‰€æœ‰åƒç´ ï¼ˆä¸€èˆ¬å‡ åä¸‡è‡³å‡ ç™¾ä¸‡ä¸ªï¼‰ï¼Œå› æ­¤å¤šæ•°ä¸èƒ½åœ¨ç°æœ‰çš„ CPU ä¸Šå®æ—¶è®¡ç®—ï¼Œéœ€è¦ GPU çš„åŠ é€Ÿã€‚ä½†æ˜¯ï¼Œå¦‚å‰é¢æ‰€è®¨è®ºçš„ï¼Œæ¢¯åº¦ä¸æ˜æ˜¾çš„ç‚¹ï¼Œåœ¨è¿åŠ¨ä¼°è®¡ä¸­ä¸ä¼šæœ‰å¤ªå¤§è´¡çŒ®ï¼Œåœ¨é‡æ„æ—¶ä¹Ÿä¼šéš¾ä»¥ä¼°è®¡ä½ç½®ã€‚</p>
<blockquote>
<p>ç¨€ç–åˆ°ç¨ å¯†é‡æ„ï¼Œéƒ½å¯ä»¥ç”¨ç›´æ¥æ³•æ¥è®¡ç®—ã€‚å®ƒä»¬çš„è®¡ç®—é‡æ˜¯é€æ¸å¢é•¿çš„ã€‚<strong>ç¨€ç–æ–¹æ³•å¯ä»¥å¿«é€Ÿåœ°æ±‚è§£ç›¸æœºä½å§¿ï¼Œè€Œç¨ å¯†æ–¹æ³•å¯ä»¥å»ºç«‹å®Œæ•´åœ°å›¾ã€‚</strong>å…·ä½“ä½¿ç”¨å“ªç§æ–¹æ³•ï¼Œéœ€è¦è§†æœºå™¨äººçš„åº”ç”¨ç¯å¢ƒè€Œå®šã€‚ç‰¹åˆ«åœ°ï¼Œåœ¨ä½ç«¯çš„è®¡ç®—å¹³å°ä¸Šï¼Œç¨€ç–ç›´æ¥æ³•å¯ä»¥åšåˆ°éå¸¸å¿«é€Ÿçš„æ•ˆæœï¼Œé€‚ç”¨äºå®æ—¶æ€§è¾ƒé«˜ä¸”è®¡ç®—èµ„æºæœ‰é™çš„åœºåˆ</p>
</blockquote>
<h1 id="äºŒã€ç¨€ç–ç›´æ¥æ³•"><a href="#äºŒã€ç¨€ç–ç›´æ¥æ³•" class="headerlink" title="äºŒã€ç¨€ç–ç›´æ¥æ³•"></a>äºŒã€ç¨€ç–ç›´æ¥æ³•</h1><p>ç”±äºæ±‚è§£ç›´æ¥æ³•æœ€åç­‰ä»·äºæ±‚è§£ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨$ g2o$ æˆ–$ Ceres $è¿™äº›ä¼˜åŒ–åº“å¸®åŠ©æˆ‘ä»¬æ±‚è§£ã€‚æœ¬èŠ‚ä»¥ $g2o $ä¸ºä¾‹è®¾è®¡å®éªŒï¼Œåœ¨ä½¿ç”¨ $g2o$ä¹‹å‰ï¼Œéœ€è¦æŠŠç›´æ¥æ³•æŠ½è±¡æˆä¸€ä¸ªå›¾ä¼˜åŒ–é—®é¢˜ã€‚æ˜¾ç„¶ï¼Œç›´æ¥æ³•æ˜¯ç”±ä»¥ä¸‹é¡¶ç‚¹å’Œè¾¹ç»„æˆçš„ï¼š</p>
<ul>
<li>ä¼˜åŒ–å˜é‡</li>
</ul>
<p>ä¼˜åŒ–å˜é‡ä¸º<strong>ä¸€ä¸ªç›¸æœºä½å§¿</strong>ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªä½å§¿é¡¶ç‚¹ã€‚ç”±äºæˆ‘ä»¬åœ¨æ¨å¯¼ä¸­ä½¿ç”¨äº†æä»£æ•°ï¼Œæ•…ç¨‹åºä¸­ä½¿ç”¨æä»£æ•°è¡¨è¾¾çš„ $SE(3) $ä½å§¿é¡¶ç‚¹ã€‚å¯ä»¥ä½¿ç”¨â€œVer-texSE3Expmapâ€ä½œä¸ºç›¸æœºä½å§¿ã€‚</p>
<ul>
<li>è¯¯å·®é¡¹</li>
</ul>
<p>è¯¯å·®é¡¹ä¸ºå•ä¸ªåƒç´ çš„<strong>å…‰åº¦è¯¯å·®</strong>ã€‚ç”±äºæ•´ä¸ªä¼˜åŒ–è¿‡ç¨‹ä¸­ $I_1 (p_1 ) $ä¿æŒä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“æˆä¸€ä¸ªå›ºå®šçš„é¢„è®¾å€¼ï¼Œç„¶åè°ƒæ•´ç›¸æœºä½å§¿ï¼Œä½¿ $I_2 (p_2 )$ æ¥è¿‘è¿™ä¸ªå€¼ã€‚äºæ˜¯ï¼Œè¿™ç§è¾¹åªè¿æ¥ä¸€ä¸ªé¡¶ç‚¹ï¼Œä¸ºä¸€å…ƒè¾¹ã€‚ç”±äº $g2o $ä¸­æœ¬èº«æ²¡æœ‰è®¡ç®—å…‰åº¦è¯¯å·®çš„è¾¹ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å®šä¹‰ä¸€ç§æ–°çš„è¾¹ã€‚</p>
<h2 id="2-1-æ„å»ºç›´æ¥æ³•çš„è¾¹"><a href="#2-1-æ„å»ºç›´æ¥æ³•çš„è¾¹" class="headerlink" title="2.1 æ„å»ºç›´æ¥æ³•çš„è¾¹"></a>2.1 æ„å»ºç›´æ¥æ³•çš„è¾¹</h2><p>ç›´æ¥æ³•çš„è¾¹è¡¨ç¤ºçš„å…‰åº¦è¯¯å·®ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸€å…ƒè¾¹ï¼Œå®šä¹‰è¾¹çš„æ ¼å¼ä¹‹å‰å·²ç»å™è¿°ï¼Œä¸»è¦æ˜¯å¯¹<code>virtual void computeError()</code>å’Œ<code>virtual void linearizeOplus()</code>ä¸¤ä¸ªå‡½æ•°è¿›è¡Œé‡å†™ã€‚æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ã€‚</p>
<h3 id="å…‰åº¦è¯¯å·®ç±»çš„å®šä¹‰"><a href="#å…‰åº¦è¯¯å·®ç±»çš„å®šä¹‰" class="headerlink" title="å…‰åº¦è¯¯å·®ç±»çš„å®šä¹‰"></a>å…‰åº¦è¯¯å·®ç±»çš„å®šä¹‰</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ç›´æ¥æ³•çš„è¾¹(å…‰åº¦è¯¯å·®çš„è¾¹),å®ƒæ˜¯ä¸€ä¸ªä¸€å…ƒè¾¹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EdgeSE3ProjectDirect</span> :</span> <span class="keyword">public</span> BaseUnaryEdge&lt;<span class="number">1</span>, <span class="keyword">double</span>, VertexSE3Expmap&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ç»“æ„ä½“åŒ…å«eigenæˆå‘˜å¿…é¡»è¿›è¡Œå®å®šä¹‰ EIGEN_MAKE_ALIGNED_OPERATOR_NEW, ä¿è¯å†…å­˜å¯¹é½</span></span><br><span class="line">    <span class="function">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span></span><br><span class="line"><span class="function">    <span class="title">EdgeSE3ProjectDirect</span><span class="params">(Eigen::Vector3d point, <span class="keyword">float</span> fx, <span class="keyword">float</span> fy, <span class="keyword">float</span> cx, <span class="keyword">float</span> cy, cv::Mat *image)</span> : x_world_(point), fx_(fx), fy_(fy), cx_(cx), cy_(cy), image_(image)</span></span><br><span class="line"><span class="function">    &#123;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åœ¨æ·»åŠ è¾¹ä¹‹å‰éœ€è¦è®¾å®šå¥½è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹çš„ç´¢å¼•ä»¥åŠè§‚æµ‹å€¼å’Œä¿¡æ¯çŸ©é˜µï¼Œ</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªå‡½æ•°åˆ™æ˜¯ä½¿ç”¨è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹å’Œè§‚æµ‹å€¼æ¥è®¡ç®—è¯¯å·®</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¡ç®—é›…å…‹æ¯”çŸ©é˜µï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç»™å‡ºäº†åˆ™è¿›è¡Œè§£ææ±‚å¯¼ï¼Œä¸ç»™åˆ™è¿›è¡Œæ•°å€¼æ±‚å¯¼</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">linearizeOplus</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="title">boolread</span><span class="params">(istream &amp;in)</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="keyword">const</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// ä»å‚è€ƒå›¾åƒä¸­è·å–ç°åº¦å€¼ï¼ˆåŒçº¿æ€§æ’å€¼ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">float</span> <span class="title">getPixelValue</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">float</span> y)</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Eigen::Vector3d x_world_;                 <span class="comment">// ä¸–ç•Œåæ ‡ç³»ä¸­çš„3Dç‚¹</span></span><br><span class="line">    <span class="keyword">float</span> cx_ = <span class="number">0</span>, cy_ = <span class="number">0</span>, fx_ = <span class="number">0</span>, fy_ = <span class="number">0</span>; <span class="comment">// ç›¸æœºå†…å‚</span></span><br><span class="line">    cv::Mat *image_ = <span class="literal">nullptr</span>;                <span class="comment">//å‚è€ƒå›¾åƒ</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çš„è¾¹ç»§æ‰¿è‡ª <code>g2o::BaseUnaryEdge</code>ã€‚åœ¨ç»§æ‰¿æ—¶ï¼Œéœ€è¦åœ¨æ¨¡æ¿å‚æ•°é‡Œå¡«å…¥æµ‹é‡å€¼çš„ç»´åº¦ã€ç±»å‹ï¼Œä»¥åŠè¿æ¥æ­¤è¾¹çš„é¡¶ç‚¹ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬æŠŠç©ºé—´ç‚¹ P ã€ç›¸æœºå†…å‚å’Œå›¾åƒå­˜å‚¨åœ¨è¯¥è¾¹çš„æˆå‘˜å˜é‡ä¸­ã€‚ä¸ºäº†è®© g2o ä¼˜åŒ–è¯¥è¾¹å¯¹åº”çš„è¯¯å·®ï¼Œæˆ‘ä»¬éœ€è¦è¦†å†™ä¸¤ä¸ªè™šå‡½æ•°ï¼šç”¨ <code>computeError()</code>è®¡ç®—è¯¯å·®å€¼ï¼Œç”¨<code>linearizeOplus()</code>è®¡ç®—é›…å¯æ¯”ã€‚</p>
<h3 id="getPixelValue"><a href="#getPixelValue" class="headerlink" title="getPixelValue"></a>getPixelValue</h3><p>ä¸ºäº†æ›´ç²¾ç»†åœ°è®¡ç®—åƒç´ äº®åº¦ï¼Œæˆ‘ä»¬è¦å¯¹å›¾åƒè¿›è¡Œæ’å€¼ã€‚æˆ‘ä»¬è¿™é‡Œé‡‡ç”¨äº†ç®€å•çš„åŒçº¿æ€§æ’å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ›´å¤æ‚çš„æ’å€¼æ–¹å¼ï¼Œä½†è®¡ç®—ä»£ä»·å¯èƒ½ä¼šå˜é«˜ä¸€äº›ã€‚</p>
<p>æ‰€ä»¥ï¼Œç›¸æ¯”ä¹‹å‰çš„è¾¹çš„å®šä¹‰ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ªå‡½æ•°<code>inline float getPixelValue(float x, float y);</code>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»å‚è€ƒå›¾åƒä¸­è·å–ç°åº¦å€¼ï¼Œåˆ©ç”¨çš„æ˜¯OpenCVä¸­çš„åŒçº¿æ€§æ’å€¼æ³•ï¼Œæˆ‘ä»¬å…ˆä¹¦å†™å®ƒçš„ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»å‚è€ƒå›¾åƒä¸­è·å–ç°åº¦å€¼ï¼ˆåŒçº¿æ€§æ’å€¼ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">float</span> <span class="title">getPixelValue</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">float</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    uchar *data = &amp;image_-&gt;data[<span class="built_in"><span class="keyword">int</span></span>(y) * image_-&gt;step + <span class="built_in"><span class="keyword">int</span></span>(x)];</span><br><span class="line">    <span class="keyword">float</span> xx = x - <span class="built_in">floor</span>(x);</span><br><span class="line">    <span class="keyword">float</span> yy = y - <span class="built_in">floor</span>(y);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in"><span class="keyword">float</span></span>(</span><br><span class="line">    (<span class="number">1</span> - xx) * (<span class="number">1</span> - yy) * data[<span class="number">0</span>] +</span><br><span class="line">    xx * (<span class="number">1</span> - yy) * data[image_-&gt;step] +</span><br><span class="line">    (<span class="number">1</span> - xx) * yy * data[image_-&gt;step + <span class="number">1</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç è§£é‡Šå¾…ç†è§£â€¦â€¦</p>
<h3 id="computeError"><a href="#computeError" class="headerlink" title="computeError"></a>computeError</h3><p>ç”±å‰æ–‡å¯çŸ¥ï¼Œè¯¯å·®é¡¹ä¸ºå•ä¸ªåƒç´ çš„<strong>å…‰åº¦è¯¯å·®</strong>ã€‚ç”±äºæ•´ä¸ªä¼˜åŒ–è¿‡ç¨‹ä¸­ $I_1 (p_1 ) $ä¿æŒä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“æˆä¸€ä¸ªå›ºå®šçš„é¢„è®¾å€¼ï¼Œç„¶åè°ƒæ•´ç›¸æœºä½å§¿ï¼Œä½¿ $I_2 (p_2 )$ æ¥è¿‘è¿™ä¸ªå€¼ã€‚<code>virtual void computeError()</code>è¿™ä¸ªå‡½æ•°åˆ™æ˜¯ä½¿ç”¨è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹å’Œè§‚æµ‹å€¼æ¥è®¡ç®—è¯¯å·®ã€‚</p>
<p>ç¨‹åºä¸­çš„è¯¯å·®è®¡ç®—é‡Œï¼Œä½¿ç”¨äº†$ I_2 (p_2 ) âˆ’ I_1 (p_1 )$ çš„å½¢å¼ï¼Œå› æ­¤å‰é¢çš„è´Ÿå·å¯ä»¥çœå»ï¼Œåªéœ€æŠŠåƒç´ æ¢¯åº¦ä¹˜ä»¥åƒç´ åˆ°æä»£æ•°çš„æ¢¯åº¦å³å¯ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨æ·»åŠ è¾¹ä¹‹å‰éœ€è¦è®¾å®šå¥½è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹çš„ç´¢å¼•ä»¥åŠè§‚æµ‹å€¼å’Œä¿¡æ¯çŸ©é˜µï¼Œ</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªå‡½æ•°åˆ™æ˜¯ä½¿ç”¨è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹å’Œè§‚æµ‹å€¼æ¥è®¡ç®—è¯¯å·®</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> VertexSE3Expmap *v = <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> VertexSE3Expmap *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">    Eigen::Vector3d x_local = v-&gt;<span class="built_in">estimate</span>().<span class="built_in">map</span>(x_world_); <span class="comment">//.mapçš„åŠŸèƒ½æ˜¯æŠŠä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹å˜æ¢åˆ°ç›¸æœºåæ ‡ç³»</span></span><br><span class="line">    <span class="comment">// è·å¾—åƒç´ åæ ‡</span></span><br><span class="line">    <span class="keyword">float</span> x = x_local[<span class="number">0</span>] * fx_ / x_local[<span class="number">2</span>] + cx_; <span class="comment">// x(u) = (X * fx)/Z + cx</span></span><br><span class="line">    <span class="keyword">float</span> y = x_local[<span class="number">1</span>] * fy_ / x_local[<span class="number">2</span>] + cy_; <span class="comment">// y(v) = (Y * fy)/Z + cy</span></span><br><span class="line">    <span class="comment">// æ£€æŸ¥è¯¥åƒç´ ç‚¹æ˜¯å¦åœ¨å›¾åƒå†…</span></span><br><span class="line">    <span class="keyword">if</span> (x - <span class="number">4</span> &lt; <span class="number">0</span> || (x + <span class="number">4</span>) &gt; image_-&gt;cols || (y - <span class="number">4</span>) &lt; <span class="number">0</span> || (y + <span class="number">4</span>) &gt; image_-&gt;rows)</span><br><span class="line">    &#123;</span><br><span class="line">        _error(<span class="number">0</span>, <span class="number">0</span>) = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">setLevel</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        _error(<span class="number">0</span>, <span class="number">0</span>) = <span class="built_in">getPixelValue</span>(x, y) - _measurement; <span class="comment">// å…‰åº¦è¯¯å·®ï¼Œåƒç´ çš„äº®åº¦è¯¯å·®ï¼Œæˆ–è€…æ˜¯ç°åº¦å€¼è¯¯å·®</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="linearizeOplus"><a href="#linearizeOplus" class="headerlink" title="linearizeOplus"></a>linearizeOplus</h3><p>è¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯è®¡ç®—é›…å…‹æ¯”çŸ©é˜µï¼Œå®ƒæ˜¯å¯é€‰çš„ï¼Œå¦‚æœç»™å‡ºäº†åˆ™è¿›è¡Œè§£ææ±‚å¯¼ï¼Œä¸ç»™åˆ™è¿›è¡Œæ•°å€¼æ±‚å¯¼ã€‚æˆ‘ä»¬ç›´æ¥åœ¨ç›´æ¥æ³•çš„æ¨å¯¼ä¸­å·²ç»ä»‹ç»äº†è¯¥çŸ©é˜µçš„è®¡ç®—ï¼Œä¸‹é¢æ˜¯æ¨å¯¼ç»“è®ºï¼Œå› æ­¤ç›´æ¥æ ¹æ®å…¬å¼ä¹¦å†™ä»£ç å³å¯ã€‚</p>
<p>ç”±ç›´æ¥æ³•çš„æ¨å¯¼å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align}
\frac{\partial u}{\partial \delta \xi}&=
\frac{\partial u}{\partial q}
\frac{\partial q}{\partial \delta \xi}=
\begin{bmatrix}
\frac{f_x}{Z}&0&-\frac{f_xX}{Z^{2}}
&-\frac{f_xXY}{Z^{2}}&f_x+\frac{f_xX^2}{Z^{2}}&-\frac{f_xY}{Z}
\\
0&\frac{f_y}{Z}&-\frac{f_yY}{Z^{2}}
&-f_y-\frac{f_yY^{2}}{Z^{2}}&\frac{f_yXY}{Z}&\frac{f_yX}{Z}
\end{bmatrix}
\end{align}</script><p>æœ€ç»ˆçš„çº¦æ—¦çŸ©é˜µä¸ºï¼š</p>
<script type="math/tex; mode=display">
J=-\frac{\partial I_2}{\partial u}
\frac{\partial u}{\partial \delta \xi}</script><p>ç”±äºä¸Šé¢çš„è¯¯å·®ä½¿ç”¨çš„æ˜¯$ I_2 (p_2 ) âˆ’ I_1 (p_1 )$ çš„å½¢å¼ï¼Œæ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
J=\frac{\partial I_2}{\partial u}
\frac{\partial u}{\partial \delta \xi}</script><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">linearizeOplus</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">level</span>() == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        _jacobianOplusXi = Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">1</span>, <span class="number">6</span>&gt;::<span class="built_in">Zero</span>();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// VertexSE3Expmapï¼Œè¿™ä¸ªè¡¨ç¤ºæä»£æ•°çš„ä½å§¿ï¼›</span></span><br><span class="line">    VertexSE3Expmap *vtx = <span class="keyword">static_cast</span>&lt;VertexSE3Expmap *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">    <span class="comment">// å°†ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä¸‰ç»´ç‚¹çš„ä¼°è®¡è½¬æ¢æˆç›¸æœºåæ ‡ç³»ä¸‹</span></span><br><span class="line">    Eigen::Vector3d xyz_trans = vtx-&gt;<span class="built_in">estimate</span>().<span class="built_in">map</span>(x_world_);</span><br><span class="line">    <span class="keyword">double</span> x = xyz_trans[<span class="number">0</span>];          <span class="comment">// X</span></span><br><span class="line">    <span class="keyword">double</span> y = xyz_trans[<span class="number">1</span>];          <span class="comment">// Y</span></span><br><span class="line">    <span class="keyword">double</span> invz = <span class="number">1.0</span> / xyz_trans[<span class="number">2</span>]; <span class="comment">// 1/Z</span></span><br><span class="line">    <span class="keyword">double</span> invz_2 = invz * invz;      <span class="comment">// 1/Z^2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">float</span> u = x * fx_ * invz + cx_; <span class="comment">// u = (X*fx)/Z+cx</span></span><br><span class="line">    <span class="keyword">float</span> v = v * fy_ * invz + cy_; <span class="comment">// v = (Y*fy)/Z+cy</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…ˆæ±‚æŠ•å½±æ–¹ç¨‹å…³äºå˜æ¢çš„å¯¼æ•° âˆ‚u/âˆ‚Î´Î¾</span></span><br><span class="line">    Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">2</span>, <span class="number">6</span>&gt; jacobian_uv_ksai;</span><br><span class="line">    <span class="comment">// g2o æ˜¯æ—‹è½¬åœ¨å‰ï¼Œå¹³ç§»åœ¨åï¼›</span></span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">0</span>, <span class="number">0</span>) = -x * y * fx_ * invz_2;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">0</span>, <span class="number">1</span>) = (<span class="number">1</span> + x * x * invz_2) * fx_;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">0</span>, <span class="number">2</span>) = -fx_ * y * invz;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">0</span>, <span class="number">3</span>) = fx_ * invz;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">0</span>, <span class="number">4</span>) = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">0</span>, <span class="number">6</span>) = -fx_ * x * invz_2;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">1</span>, <span class="number">0</span>) = -(<span class="number">1</span> + y * y * invz_2) * fy_;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">1</span>, <span class="number">1</span>) = fy_ * x * y * invz_2;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">1</span>, <span class="number">2</span>) = fy_ * x * invz;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">1</span>, <span class="number">3</span>) = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">1</span>, <span class="number">4</span>) = fy_ * invz;</span><br><span class="line">    <span class="built_in">jacobian_uv_ksai</span>(<span class="number">1</span>, <span class="number">5</span>) = -y * invz_2 * fy_;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åƒç´ çš„æ¢¯åº¦ âˆ‚I2/âˆ‚u</span></span><br><span class="line">    Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">1</span>, <span class="number">2</span>&gt; jacobian_pixel_uv;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">jacobian_pixel_uv</span>(<span class="number">0</span>, <span class="number">0</span>) = (<span class="built_in">getPixelValue</span>(u + <span class="number">1</span>, v) - <span class="built_in">getPixelValue</span>(u - <span class="number">1</span>, v)) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">jacobian_pixel_uv</span>(<span class="number">0</span>, <span class="number">1</span>) = (<span class="built_in">getPixelValue</span>(u, v + <span class="number">1</span>) - <span class="built_in">getPixelValue</span>(u, v - <span class="number">1</span>)) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// JçŸ©é˜µ = âˆ‚I2/âˆ‚u * âˆ‚u/âˆ‚Î´Î¾</span></span><br><span class="line">    _jacobianOplusXi = jacobian_pixel_uv*jacobian_uv_ksai;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2-ç›´æ¥æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨"><a href="#2-2-ç›´æ¥æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨" class="headerlink" title="2.2 ç›´æ¥æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨"></a>2.2 ç›´æ¥æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨</h2><p>åœ¨ä½¿ç”¨ç›´æ¥æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨æ—¶ï¼Œæˆ‘ä»¬ç”¨è¿‡g2oå¯¹ç›¸æœºçš„ä½å§¿è¿›è¡Œä¼˜åŒ–ï¼Œå…¶ä¸­çš„è§‚æµ‹å€¼ä¸ºä¸–ç•Œåæ ‡ç³»ä¸‹çš„3Dç‚¹åæ ‡ä»¥åŠå¯¹åº”çš„ç°åº¦å€¼ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç»“æ„ä½“<code>Measurement</code>ç”¨æ¥å­˜å‚¨è§‚æµ‹å€¼ï¼Œç”±äºéœ€è¦ç”¨åˆ°ç›¸æœºåæ ‡ç³»ä¹‹é—´çš„å˜æ¢ï¼Œæ‰€ä»¥è¿˜éœ€è¦å†™åæ ‡å˜æ¢ç›¸å…³çš„å‡½æ•°ã€‚</p>
<h3 id="Measurementç»“æ„ä½“"><a href="#Measurementç»“æ„ä½“" class="headerlink" title="Measurementç»“æ„ä½“"></a>Measurementç»“æ„ä½“</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸€æ¬¡æµ‹é‡çš„å€¼ï¼ŒåŒ…æ‹¬ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹ä¸ä¸€ä¸ªç°åº¦å€¼</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Measurement</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="built_in">Measurement</span>(Eigen::Vector3d p, <span class="keyword">float</span> g) : <span class="built_in">pos_world</span>(p), <span class="built_in">grayscale</span>(g) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    Eigen::Vector3d pos_world;</span><br><span class="line">    <span class="keyword">float</span> grayscale;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="project2Dto3D"><a href="#project2Dto3D" class="headerlink" title="project2Dto3D"></a>project2Dto3D</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å°†åƒç´ åæ ‡ç³»è½¬æ¢ä¸ºä¸–ç•Œåæ ‡ç³»</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> Eigen::Vector3d <span class="title">project2Dto3D</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> d, <span class="keyword">float</span> fx, <span class="keyword">float</span> fy, <span class="keyword">float</span> cx, <span class="keyword">float</span> cy, <span class="keyword">float</span> scale)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> zz = <span class="built_in"><span class="keyword">float</span></span>(d) / scale;</span><br><span class="line">    <span class="keyword">float</span> xx = zz * (x - cx) / fx; <span class="comment">// X = Z*(u-cx)/fx</span></span><br><span class="line">    <span class="keyword">float</span> yy = zz * (y - cy) / fy; <span class="comment">// Y = Z*(u-cy)/fy</span></span><br><span class="line">    <span class="keyword">return</span> Eigen::<span class="built_in">Vector3d</span>(xx, yy, zz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="project3Dto2D"><a href="#project3Dto2D" class="headerlink" title="project3Dto2D"></a>project3Dto2D</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å°†ä¸–ç•Œåæ ‡ç³»è½¬æ¢ä¸ºåƒç´ åæ ‡ç³»</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> Eigen::Vector2d <span class="title">project3Dto2D</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">float</span> z, <span class="keyword">float</span> fx, <span class="keyword">float</span> fy, <span class="keyword">float</span> cx, <span class="keyword">float</span> cy)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> u = fx * x / z + cx; <span class="comment">// u = fx*X/Z + cx</span></span><br><span class="line">    <span class="keyword">float</span> v = fy * y / z + cy; <span class="comment">// v = fy*Y/Z + cy</span></span><br><span class="line">    <span class="keyword">return</span> Eigen::<span class="built_in">Vector2d</span>(u, v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="poseEstimationDirect"><a href="#poseEstimationDirect" class="headerlink" title="poseEstimationDirect"></a>poseEstimationDirect</h3><p>è¿™æ˜¯æœ€ä¸»è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨ç›´æ¥æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨ï¼Œå¹¶ä½¿ç”¨äº†g2oå¯¹ä½å§¿è¿›è¡Œä¼˜åŒ–ã€‚<strong>ç›¸æ¯”äºç‰¹å¾ç‚¹æ³•ï¼Œç›´æ¥æ³•å®Œå…¨ä¾é ä¼˜åŒ–æ¥æ±‚è§£ç›¸æœºä½å§¿ã€‚</strong></p>
<p>åŸç†å°±æ˜¯ä»¥ç¬¬ä¸€ä¸ªå›¾åƒä¸ºå‚è€ƒå¸§ï¼Œç„¶åç”¨ç›´æ¥æ³•æ±‚è§£åç»­å›¾åƒçš„ä½å§¿ã€‚åœ¨å‚è€ƒå¸§ä¸­ï¼Œå¯¹ç¬¬ä¸€å¼ å›¾åƒæå– FAST å…³é”®ç‚¹ï¼ˆä¸éœ€è¦æè¿°å­ï¼‰ï¼Œå¹¶ä½¿ç”¨ç›´æ¥æ³•ä¼°è®¡è¿™äº›å…³é”®ç‚¹åœ¨ç¬¬äºŒä¸ªå›¾åƒä¸­çš„ä½ç½®ï¼Œä»¥åŠç¬¬äºŒä¸ªå›¾åƒçš„ç›¸æœºä½å§¿ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ç›´æ¥æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨(ä½¿ç”¨éçº¿æ€§BAä¼˜åŒ–)</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">poseEstimationDirect</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;Measurement&gt; &amp;measurements, <span class="comment">// æµ‹é‡å€¼ï¼šä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹ä¸ä¸€ä¸ªç°åº¦å€¼</span></span></span></span><br><span class="line"><span class="params"><span class="function">    cv::Mat *gray,                          <span class="comment">// ç°åº¦å›¾</span></span></span></span><br><span class="line"><span class="params"><span class="function">    Eigen::Matrix3f &amp;K,                     <span class="comment">// ç›¸æœºå‚æ•°</span></span></span></span><br><span class="line"><span class="params"><span class="function">    Eigen::Isometry3d &amp;Tcw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–g2o</span></span><br><span class="line">    <span class="keyword">typedef</span> g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;<span class="number">6</span>, <span class="number">1</span>&gt;&gt; DirectBlock;</span><br><span class="line">    <span class="comment">// 1.åˆ›å»ºçº¿æ€§æ±‚è§£å™¨ LinearSolverDenseä½¿ç”¨dense choleskyåˆ†è§£æ³•</span></span><br><span class="line">    DirectBlock::LinearSolverType *linearSolver = <span class="keyword">new</span> g2o::LinearSolverDense&lt;DirectBlock::PoseMatrixType&gt;();</span><br><span class="line">    <span class="comment">// 2.åˆ›å»ºçŸ©é˜µå—æ±‚è§£å™¨ï¼Œç”¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰çš„çº¿æ€§æ±‚è§£å™¨LinearSolveræ¥åˆå§‹åŒ–ã€‚</span></span><br><span class="line">    DirectBlock *solver_ptr = <span class="keyword">new</span> <span class="built_in">DirectBlock</span>(std::unique_ptr&lt;DirectBlock::LinearSolverType&gt;(linearSolver));</span><br><span class="line">    <span class="comment">// 3.åˆ›å»ºæ€»æ±‚è§£å™¨solver</span></span><br><span class="line">    g2o::OptimizationAlgorithmLevenberg *solver = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmLevenberg</span>(unique_ptr&lt;DirectBlock&gt;(solver_ptr));</span><br><span class="line">    <span class="comment">// 4.åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</span></span><br><span class="line">    g2o::SparseOptimizer optimizer; <span class="comment">// åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</span></span><br><span class="line">    optimizer.<span class="built_in">setAlgorithm</span>(solver); <span class="comment">// ç”¨å‰é¢å®šä¹‰å¥½çš„æ±‚è§£å™¨ä½œä¸ºæ±‚è§£æ–¹æ³•ï¼šï¼ˆä½¿ç”¨LMæ–¹æ³•ï¼‰</span></span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);     <span class="comment">// setVerboseæ˜¯è®¾ç½®ä¼˜åŒ–è¿‡ç¨‹è¾“å‡ºä¿¡æ¯ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.å®šä¹‰å›¾çš„é¡¶ç‚¹å’Œè¾¹</span></span><br><span class="line">    <span class="comment">// é¡¶ç‚¹(å¾…ä¼˜åŒ–å˜é‡ï¼Œè¿™é‡Œæ˜¯ç›¸æœºä½å§¿)</span></span><br><span class="line">    g2o::VertexSE3Expmap *pose = <span class="keyword">new</span> g2o::<span class="built_in">VertexSE3Expmap</span>();</span><br><span class="line">    <span class="comment">// è®¾ç½®å¾…ä¼˜åŒ–ä½å§¿æ—‹è½¬(Rotation)(è§’è½´æˆ–å››å…ƒç´ è¡¨ç¤º)ã€å¹³ç§»(Translation)</span></span><br><span class="line">    pose-&gt;<span class="built_in">setEstimate</span>(g2o::<span class="built_in">SE3Quat</span>(Tcw.<span class="built_in">rotation</span>(), Tcw.<span class="built_in">translation</span>()));</span><br><span class="line">    pose-&gt;<span class="built_in">setId</span>(<span class="number">0</span>);</span><br><span class="line">    optimizer.<span class="built_in">addVertex</span>(pose);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾¹(è¯¯å·®ï¼Œè¿™é‡Œæ˜¯å…‰å½±è¯¯å·®)</span></span><br><span class="line">    <span class="keyword">int</span> id = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (Measurement m : measurements)</span><br><span class="line">    &#123;</span><br><span class="line">        EdgeSE3ProjectDirect *edge = <span class="keyword">new</span> <span class="built_in">EdgeSE3ProjectDirect</span>(</span><br><span class="line">            m.pos_world,</span><br><span class="line">            <span class="built_in">K</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">K</span>(<span class="number">1</span>, <span class="number">1</span>), <span class="built_in">K</span>(<span class="number">0</span>, <span class="number">2</span>), <span class="built_in">K</span>(<span class="number">1</span>, <span class="number">2</span>), gray);</span><br><span class="line">        edge-&gt;<span class="built_in">setVertex</span>(<span class="number">0</span>, pose);                                      <span class="comment">// å®šä¹‰é¡¶ç‚¹</span></span><br><span class="line">        edge-&gt;<span class="built_in">setMeasurement</span>(m.grayscale);                             <span class="comment">// å®šä¹‰è§‚æµ‹å€¼</span></span><br><span class="line">        edge-&gt;<span class="built_in">setInformation</span>(Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">1</span>, <span class="number">1</span>&gt;::<span class="built_in">Identity</span>()); <span class="comment">// å®šä¹‰åæ–¹å·®çŸ©é˜µçš„é€†</span></span><br><span class="line">        edge-&gt;<span class="built_in">setId</span>(id++);</span><br><span class="line">        optimizer.<span class="built_in">addEdge</span>(edge);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š&quot;</span> &lt;&lt; optimizer.<span class="built_in">edges</span>().<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// 6.å¼€å§‹ä¼˜åŒ–</span></span><br><span class="line">    optimizer.<span class="built_in">initializeOptimization</span>();</span><br><span class="line">    optimizer.<span class="built_in">optimize</span>(<span class="number">30</span>); <span class="comment">// è¿­ä»£æ¬¡æ•°</span></span><br><span class="line">    <span class="comment">// ä¼˜åŒ–åçš„ç›¸æœºä½å§¿</span></span><br><span class="line">    Tcw = pose-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-3-ä¸»å‡½æ•°"><a href="#2-3-ä¸»å‡½æ•°" class="headerlink" title="2.3 ä¸»å‡½æ•°"></a>2.3 ä¸»å‡½æ•°</h2><p>æ•´ä¸ªä¸»å‡½æ•°çš„é¡ºåºéœ€è¦äº†è§£</p>
<ul>
<li>é¦–å…ˆæ˜¯ä¸€äº›åˆ¤æ–­æˆ–è€…ä¸€äº›åˆå§‹åŒ–</li>
<li>ç„¶åæˆ‘ä»¬å¯¹æ•°æ®é›†å¾ªç¯æ“ä½œæ¯ä¸€å¼ å›¾ç‰‡ï¼Œä½†æ˜¯ç¬¬ä¸€å¼ å›¾åƒä¸ºå‚è€ƒï¼Œå¯¹åç»­å›¾åƒå’Œå‚è€ƒå›¾åƒåšç›´æ¥æ³•</li>
<li>å¯¹ç¬¬ä¸€å¼ å›¾æå–Fastå…³é”®ç‚¹ï¼ˆä¸éœ€è¦æè¿°å­ï¼‰</li>
<li>ä½¿ç”¨ç›´æ¥æ³•ä¼°è®¡è¿™äº›å…³é”®ç‚¹åœ¨ç¬¬äºŒä¸ªå›¾åƒä¸­çš„ä½ç½®ï¼Œä»¥åŠç¬¬äºŒä¸ªå›¾åƒçš„ç›¸æœºä½å§¿</li>
<li>æœ€åå°±æ˜¯ç»˜åˆ¶è¿™äº›ç‰¹å¾ç‚¹</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;usage: useLK path_to_dataset&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">srand</span>((<span class="keyword">unsigned</span> <span class="keyword">int</span>)<span class="built_in">time</span>(<span class="number">0</span>));</span><br><span class="line">    string path_to_dataset = argv[<span class="number">1</span>];</span><br><span class="line">    string assciate_file = path_to_dataset + <span class="string">&quot;/assciate.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(assciate_file)</span></span>;</span><br><span class="line">    string rgb_file, depth_file, time_rgb, time_depth;</span><br><span class="line">    cv::Mat color, depth, gray;</span><br><span class="line">    vector&lt;Measurement&gt; measurements;</span><br><span class="line">    <span class="comment">// ç›¸æœºå†…å‚</span></span><br><span class="line">    <span class="keyword">float</span> cx = <span class="number">325.5</span>;</span><br><span class="line">    <span class="keyword">float</span> cy = <span class="number">253.5</span>;</span><br><span class="line">    <span class="keyword">float</span> fx = <span class="number">518.0</span>;</span><br><span class="line">    <span class="keyword">float</span> fy = <span class="number">519.0</span>;</span><br><span class="line">    <span class="keyword">float</span> depth_scale = <span class="number">1000.0</span>;</span><br><span class="line">    Eigen::Matrix3f K;</span><br><span class="line">    K &lt;&lt; fx, <span class="number">0.f</span>, cx, <span class="number">0.f</span>, fy, cy, <span class="number">0.f</span>, <span class="number">0.f</span>, <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line">    Eigen::Isometry3d Tcw = Eigen::Isometry3d::<span class="built_in">Identity</span>();</span><br><span class="line">    cv::Mat prev_color;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬ä»¥ç¬¬ä¸€ä¸ªå›¾åƒä¸ºå‚è€ƒï¼Œå¯¹åç»­å›¾åƒå’Œå‚è€ƒå›¾åƒåšç›´æ¥æ³•</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; <span class="number">10</span>; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;*********** loop &quot;</span> &lt;&lt; index &lt;&lt; <span class="string">&quot; ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">        fin &gt;&gt; time_rgb &gt;&gt; rgb_file &gt;&gt; time_depth &gt;&gt; depth_file;</span><br><span class="line">        color = cv::<span class="built_in">imread</span>(path_to_dataset + <span class="string">&quot;/&quot;</span> + rgb_file);</span><br><span class="line">        depth = cv::<span class="built_in">imread</span>(path_to_dataset + <span class="string">&quot;/&quot;</span> + depth_file, <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (color.data == <span class="literal">nullptr</span> || depth.data == <span class="literal">nullptr</span>)</span><br><span class="line">            <span class="keyword">continue</span>; <span class="comment">// continue è¯­å¥çš„ä½œç”¨æ˜¯è·³è¿‡å¾ªç¯ä½“ä¸­å‰©ä½™çš„è¯­å¥è€Œå¼ºåˆ¶è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯</span></span><br><span class="line">        <span class="comment">// å°†BGRæ ¼å¼(color)è½¬æ¢æˆç°åº¦å›¾ç‰‡(gray)</span></span><br><span class="line">        cv::<span class="built_in">cvtColor</span>(color, gray, cv::COLOR_BGR2GRAY);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.å¯¹ç¬¬ä¸€å¸§æå–FASTç‰¹å¾ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            vector&lt;cv::KeyPoint&gt; keypoints;</span><br><span class="line">            cv::Ptr&lt;cv::FastFeatureDetector&gt; detector = cv::FastFeatureDetector::<span class="built_in">create</span>();</span><br><span class="line">            <span class="comment">// ä½¿ç”¨Fastç‰¹å¾ç‚¹æ£€æµ‹ï¼Œè®²æ£€æµ‹åçš„ç‰¹å¾ç‚¹å­˜å…¥å®¹å™¨keypointsä¸­</span></span><br><span class="line">            detector-&gt;<span class="built_in">detect</span>(color, keypoints);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å»æ‰é‚»è¿‘è¾¹ç¼˜å¤„çš„ç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> kp : keypoints)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (kp.pt.x &lt; <span class="number">20</span> || kp.pt.y &lt; <span class="number">20</span> || (kp.pt.x + <span class="number">20</span>) &gt; color.cols || (kp.pt.y + <span class="number">20</span>) &gt; color.rows)</span><br><span class="line">                    <span class="keyword">continue</span>; <span class="comment">// continue è¯­å¥çš„ä½œç”¨æ˜¯è·³è¿‡å¾ªç¯ä½“ä¸­å‰©ä½™çš„è¯­å¥è€Œå¼ºåˆ¶è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯</span></span><br><span class="line">                <span class="comment">// dæŒ‡å®šåˆ°depthçŸ©é˜µçš„yè¡Œç¬¬xåˆ—ä¸ªåƒç´ </span></span><br><span class="line">                ushort d = depth.ptr&lt;ushort&gt;(<span class="built_in">cvRound</span>(kp.pt.y))[<span class="built_in">cvRound</span>(kp.pt.x)];</span><br><span class="line">                <span class="keyword">if</span> (d == <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                <span class="comment">// å°†åƒç´ åæ ‡ç³»è½¬æ¢ä¸ºä¸–ç•Œåæ ‡ç³»</span></span><br><span class="line">                Eigen::Vector3d p3p = <span class="built_in">project2Dto3D</span>(kp.pt.x, kp.pt.y, d, fx, fy, cx, cy, depth_scale);</span><br><span class="line">                <span class="comment">// grayscaleæŒ‡å®šåˆ°grayçŸ©é˜µçš„yè¡Œç¬¬xåˆ—ä¸ªåƒç´ </span></span><br><span class="line">                <span class="keyword">float</span> grayscale = <span class="built_in"><span class="keyword">float</span></span>(gray.<span class="built_in">ptr</span>(<span class="built_in">cvRound</span>(kp.pt.y))[<span class="built_in">cvRound</span>(kp.pt.x)]);</span><br><span class="line">                <span class="comment">// ä¸€æ¬¡æµ‹é‡çš„å€¼ï¼ŒåŒ…æ‹¬ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹ä¸ä¸€ä¸ªç°åº¦å€¼</span></span><br><span class="line">                measurements.<span class="built_in">push_back</span>(<span class="built_in">Measurement</span>(p3p, grayscale));</span><br><span class="line">            &#125;</span><br><span class="line">            prev_color = color.<span class="built_in">clone</span>();</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;add total &quot;</span>&lt;&lt;measurements.<span class="built_in">size</span>()&lt;&lt;<span class="string">&quot; measurements.&quot;</span>&lt;&lt;endl;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.å¯¹åç»­å›¾åƒä½¿ç”¨ç›´æ¥æ³•è®¡ç®—ç›¸æœºè¿åŠ¨</span></span><br><span class="line">        <span class="built_in">poseEstimationDirect</span>(measurements, &amp;gray, K, Tcw);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Tcw=&quot;</span> &lt;&lt; Tcw.<span class="built_in">matrix</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.ç»˜åˆ¶ç‰¹å¾ç‚¹</span></span><br><span class="line">        <span class="function">cv::Mat <span class="title">img_show</span><span class="params">(color.rows * <span class="number">2</span>, color.cols, CV_8UC3)</span></span>;</span><br><span class="line">        prev_color.<span class="built_in">copyTo</span>(<span class="built_in">img_show</span>(cv::<span class="built_in">Rect</span>(<span class="number">0</span>, <span class="number">0</span>, color.cols, color.rows)));</span><br><span class="line">        color.<span class="built_in">copyTo</span>(<span class="built_in">img_show</span>(cv::<span class="built_in">Rect</span>(<span class="number">0</span>, color.rows, color.cols, color.rows)));</span><br><span class="line">        <span class="keyword">for</span> (Measurement m : measurements)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">rand</span>() &gt; RAND_MAX / <span class="number">5</span>)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            Eigen::Vector3d p = m.pos_world;</span><br><span class="line">            Eigen::Vector2d pixel_prev = <span class="built_in">project3Dto2D</span>(<span class="built_in">p</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">p</span>(<span class="number">1</span>, <span class="number">0</span>), <span class="built_in">p</span>(<span class="number">2</span>, <span class="number">0</span>), fx, fy, cx, cy);</span><br><span class="line">            Eigen::Vector3d p2 = Tcw * m.pos_world;</span><br><span class="line">            Eigen::Vector2d pixel_now = <span class="built_in">project3Dto2D</span>(<span class="built_in">p2</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">p2</span>(<span class="number">1</span>, <span class="number">0</span>), <span class="built_in">p2</span>(<span class="number">2</span>, <span class="number">0</span>), fx, fy, cx, cy);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">pixel_now</span>(<span class="number">0</span>, <span class="number">0</span>) &lt; <span class="number">0</span> || <span class="built_in">pixel_now</span>(<span class="number">0</span>, <span class="number">0</span>) &gt;= color.cols || <span class="built_in">pixel_now</span>(<span class="number">1</span>, <span class="number">0</span>) &lt; <span class="number">0</span> || <span class="built_in">pixel_now</span>(<span class="number">1</span>, <span class="number">0</span>) &gt;= color.rows)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> b = <span class="number">255</span> * <span class="built_in"><span class="keyword">float</span></span>(<span class="built_in">rand</span>()) / RAND_MAX;</span><br><span class="line">            <span class="keyword">float</span> g = <span class="number">255</span> * <span class="built_in"><span class="keyword">float</span></span>(<span class="built_in">rand</span>()) / RAND_MAX;</span><br><span class="line">            <span class="keyword">float</span> r = <span class="number">255</span> * <span class="built_in"><span class="keyword">float</span></span>(<span class="built_in">rand</span>()) / RAND_MAX;</span><br><span class="line">            cv::<span class="built_in">circle</span>(img_show, cv::<span class="built_in">Point2d</span>(<span class="built_in">pixel_prev</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">pixel_prev</span>(<span class="number">1</span>, <span class="number">0</span>)), <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(b, g, r), <span class="number">2</span>);</span><br><span class="line">            cv::<span class="built_in">circle</span>(img_show, cv::<span class="built_in">Point2d</span>(<span class="built_in">pixel_now</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">pixel_now</span>(<span class="number">1</span>, <span class="number">0</span>) + color.rows), <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(b, g, r), <span class="number">2</span>);</span><br><span class="line">            cv::<span class="built_in">line</span>(img_show, cv::<span class="built_in">Point2d</span>(<span class="built_in">pixel_prev</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">pixel_prev</span>(<span class="number">1</span>, <span class="number">0</span>)), cv::<span class="built_in">Point2d</span>(<span class="built_in">pixel_now</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">pixel_now</span>(<span class="number">1</span>, <span class="number">0</span>) + color.rows), cv::<span class="built_in">Scalar</span>(b, g, r), <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        cv::<span class="built_in">imshow</span>(<span class="string">&quot;result&quot;</span>, img_show);</span><br><span class="line">        cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( directMethod )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE Release )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14 -O3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ cmakeæ¨¡å—è·¯å¾„</span></span><br><span class="line"><span class="keyword">list</span>( APPEND CMAKE_MODULE_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/cmake_modules )</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>( G2O )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;G2O_INCLUDE_DIRS&#125;</span> ) </span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>( <span class="string">&quot;/usr/include/eigen3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( G2O_LIBS </span><br><span class="line">    g2o_core g2o_types_sba g2o_solver_csparse g2o_stuff g2o_csparse_extension </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( direct_sparse direct_sparse.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( direct_sparse <span class="variable">$&#123;OpenCV_LIBS&#125;</span> <span class="variable">$&#123;G2O_LIBS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( direct_semidense direct_semidense.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( direct_semidense <span class="variable">$&#123;OpenCV_LIBS&#125;</span> <span class="variable">$&#123;G2O_LIBS&#125;</span> )</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">*********** loop <span class="number">0</span> ************</span><br><span class="line">add total <span class="number">1402</span> measurements.</span><br><span class="line">*********** loop <span class="number">1</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">1402</span></span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">7403254.830490</span>    <span class="selector-tag">time</span>= <span class="number">0.00082488</span>        cumTime= <span class="number">0.00082488</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">60236876.490033</span>        levenbergIter= <span class="number">5</span></span><br><span class="line">iteration= <span class="number">1</span>     chi2= <span class="number">7403254.830490</span>    <span class="selector-tag">time</span>= <span class="number">0.00102553</span>        cumTime= <span class="number">0.00185041</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">2119396675894340747264.000000</span>  levenbergIter= <span class="number">9</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999996</span>   <span class="number">0.00288273</span>  <span class="number">2.64449</span>e-<span class="number">05</span> -<span class="number">0.000928174</span></span><br><span class="line"> -<span class="number">0.00288272</span>     <span class="number">0.999996</span> -<span class="number">0.000436968</span> -<span class="number">3.76331</span>e-<span class="number">05</span></span><br><span class="line">-<span class="number">2.77045</span>e-<span class="number">05</span>   <span class="number">0.00043689</span>            <span class="number">1</span>   <span class="number">0.00103318</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">*********** loop <span class="number">2</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">1402</span></span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">7759380.788781</span>    <span class="selector-tag">time</span>= <span class="number">0.00174707</span>        cumTime= <span class="number">0.00174707</span>     </span><br><span class="line">......</span><br><span class="line">iteration= <span class="number">9</span>     chi2= <span class="number">7758019.671470</span>    <span class="selector-tag">time</span>= <span class="number">0.000755714</span>       cumTime= <span class="number">0.00772499</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">3783063956763384479744.000000</span>  levenbergIter= <span class="number">5</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999996</span>   <span class="number">0.00288243</span>  <span class="number">2.77591</span>e-<span class="number">05</span> -<span class="number">0.000928009</span></span><br><span class="line"> -<span class="number">0.00288242</span>     <span class="number">0.999996</span> -<span class="number">0.000441154</span> -<span class="number">3.82145</span>e-<span class="number">05</span></span><br><span class="line">-<span class="number">2.90306</span>e-<span class="number">05</span>  <span class="number">0.000441072</span>            <span class="number">1</span>   <span class="number">0.00103304</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">*********** loop <span class="number">3</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">1402</span></span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">7824244.109174</span>    <span class="selector-tag">time</span>= <span class="number">0.00174816</span>        cumTime= <span class="number">0.00174816</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">6220200914927.365234</span>   levenbergIter= <span class="number">8</span></span><br><span class="line">......</span><br><span class="line">iteration= <span class="number">8</span>     chi2= <span class="number">7819308.542160</span>    <span class="selector-tag">time</span>= <span class="number">0.0010889</span>         cumTime= <span class="number">0.00689116</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">3127198551927549329408.000000</span>  levenbergIter= <span class="number">7</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999996</span>   <span class="number">0.00289109</span>  <span class="number">2.80266</span>e-<span class="number">05</span> -<span class="number">0.000927608</span></span><br><span class="line"> -<span class="number">0.00289108</span>     <span class="number">0.999996</span> -<span class="number">0.000451442</span> -<span class="number">3.83751</span>e-<span class="number">05</span></span><br><span class="line">-<span class="number">2.93317</span>e-<span class="number">05</span>  <span class="number">0.000451359</span>            <span class="number">1</span>   <span class="number">0.00103126</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">*********** loop <span class="number">4</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">1402</span></span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">8430224.068489</span>    <span class="selector-tag">time</span>= <span class="number">0.0017704</span>         cumTime= <span class="number">0.0017704</span>      edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">14477120284239.218750</span>  levenbergIter= <span class="number">8</span></span><br><span class="line">......</span><br><span class="line">iteration= <span class="number">10</span>    chi2= <span class="number">8429345.097617</span>    <span class="selector-tag">time</span>= <span class="number">0.000582781</span>       cumTime= <span class="number">0.00791508</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">25272065502643142656.000000</span>    levenbergIter= <span class="number">4</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999996</span>    <span class="number">0.0028903</span>  <span class="number">2.74361</span>e-<span class="number">05</span> -<span class="number">0.000927784</span></span><br><span class="line"> -<span class="number">0.00289029</span>     <span class="number">0.999996</span>  -<span class="number">0.00044829</span> -<span class="number">3.78331</span>e-<span class="number">05</span></span><br><span class="line">-<span class="number">2.87317</span>e-<span class="number">05</span>  <span class="number">0.000448209</span>            <span class="number">1</span>   <span class="number">0.00103136</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">*********** loop <span class="number">5</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">1402</span></span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">8454586.253220</span>    <span class="selector-tag">time</span>= <span class="number">0.00216226</span>        cumTime= <span class="number">0.00216226</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">11915390830915310583808.000000</span>         levenbergIter= <span class="number">10</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999996</span>    <span class="number">0.0028903</span>  <span class="number">2.74361</span>e-<span class="number">05</span> -<span class="number">0.000927784</span></span><br><span class="line"> -<span class="number">0.00289029</span>     <span class="number">0.999996</span>  -<span class="number">0.00044829</span> -<span class="number">3.78331</span>e-<span class="number">05</span></span><br><span class="line">-<span class="number">2.87317</span>e-<span class="number">05</span>  <span class="number">0.000448209</span>            <span class="number">1</span>   <span class="number">0.00103136</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">*********** loop <span class="number">6</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">1402</span></span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">8159516.143149</span>    <span class="selector-tag">time</span>= <span class="number">0.00214553</span>        cumTime= <span class="number">0.00214553</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">7207697814143619825664.000000</span>  levenbergIter= <span class="number">10</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999996</span>    <span class="number">0.0028903</span>  <span class="number">2.74361</span>e-<span class="number">05</span> -<span class="number">0.000927784</span></span><br><span class="line"> -<span class="number">0.00289029</span>     <span class="number">0.999996</span>  -<span class="number">0.00044829</span> -<span class="number">3.78331</span>e-<span class="number">05</span></span><br><span class="line">-<span class="number">2.87317</span>e-<span class="number">05</span>  <span class="number">0.000448209</span>            <span class="number">1</span>   <span class="number">0.00103136</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">*********** loop <span class="number">7</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">1402</span></span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">8203720.110076</span>    <span class="selector-tag">time</span>= <span class="number">0.0021112</span>         cumTime= <span class="number">0.0021112</span>      edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">21225209233812976828416.000000</span>         levenbergIter= <span class="number">10</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999996</span>    <span class="number">0.0028903</span>  <span class="number">2.74361</span>e-<span class="number">05</span> -<span class="number">0.000927784</span></span><br><span class="line"> -<span class="number">0.00289029</span>     <span class="number">0.999996</span>  -<span class="number">0.00044829</span> -<span class="number">3.78331</span>e-<span class="number">05</span></span><br><span class="line">-<span class="number">2.87317</span>e-<span class="number">05</span>  <span class="number">0.000448209</span>            <span class="number">1</span>   <span class="number">0.00103136</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">*********** loop <span class="number">8</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">1402</span></span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">8054487.520687</span>    <span class="selector-tag">time</span>= <span class="number">0.00161749</span>        cumTime= <span class="number">0.00161749</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">306330210612.899292</span>    levenbergIter= <span class="number">7</span></span><br><span class="line">......</span><br><span class="line">iteration= <span class="number">5</span>     chi2= <span class="number">8047353.368341</span>    <span class="selector-tag">time</span>= <span class="number">0.00105102</span>        cumTime= <span class="number">0.00563404</span>     edges= <span class="number">1402</span>     schur= <span class="number">0</span>        lambda= <span class="number">4158192944542638931968.000000</span>  levenbergIter= <span class="number">6</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999996</span>   <span class="number">0.00290379</span>  <span class="number">2.91578</span>e-<span class="number">05</span> -<span class="number">0.000927602</span></span><br><span class="line"> -<span class="number">0.00290378</span>     <span class="number">0.999996</span> -<span class="number">0.000470562</span> -<span class="number">4.13493</span>e-<span class="number">05</span></span><br><span class="line">-<span class="number">3.05241</span>e-<span class="number">05</span>  <span class="number">0.000470476</span>            <span class="number">1</span>   <span class="number">0.00103238</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">*********** loop <span class="number">9</span> ************</span><br></pre></td></tr></table></figure>
<p><img src="/images/RGB-Dç›´æ¥æ³•å®è·µ/image-20220329164608300.png" alt="image-20220329164608300"></p>
<h1 id="ä¸‰ã€åŠç¨ å¯†ç›´æ¥æ³•"><a href="#ä¸‰ã€åŠç¨ å¯†ç›´æ¥æ³•" class="headerlink" title="ä¸‰ã€åŠç¨ å¯†ç›´æ¥æ³•"></a>ä¸‰ã€åŠç¨ å¯†ç›´æ¥æ³•</h1><p>æˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½æŠŠç¨‹åºæ‹“å±•æˆåŠç¨ å¯†çš„ç›´æ¥æ³•å½¢å¼ã€‚å¯¹å‚è€ƒå¸§ä¸­ï¼Œå…ˆæå–æ¢¯åº¦è¾ƒæ˜æ˜¾çš„åƒç´ ï¼Œç„¶åç”¨ç›´æ¥æ³•ï¼Œä»¥è¿™äº›åƒç´ ä¸ºå›¾ä¼˜åŒ–è¾¹ï¼Œæ¥ä¼°è®¡ç›¸æœºè¿åŠ¨ã€‚å¯¹å…ˆå‰çš„ç¨‹åºåšå¦‚ä¸‹çš„ä¿®æ”¹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.å¯¹ç¬¬ä¸€å¸§æå–FASTç‰¹å¾ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (index == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// select the pixels with high gradiants </span></span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> x=<span class="number">10</span>; x&lt;gray.cols<span class="number">-10</span>; x++ )</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> y=<span class="number">10</span>; y&lt;gray.rows<span class="number">-10</span>; y++ )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="function">Eigen::Vector2d <span class="title">delta</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            gray.ptr&lt;uchar&gt;(y)[x+<span class="number">1</span>] - gray.ptr&lt;uchar&gt;(y)[x<span class="number">-1</span>], </span></span></span><br><span class="line"><span class="params"><span class="function">            gray.ptr&lt;uchar&gt;(y+<span class="number">1</span>)[x] - gray.ptr&lt;uchar&gt;(y<span class="number">-1</span>)[x]</span></span></span><br><span class="line"><span class="params"><span class="function">            )</span></span>;</span><br><span class="line">            <span class="keyword">if</span> ( delta.<span class="built_in">norm</span>() &lt; <span class="number">50</span> )</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            ushort d = depth.ptr&lt;ushort&gt; (y)[x];</span><br><span class="line">            <span class="keyword">if</span> ( d==<span class="number">0</span> )</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            Eigen::Vector3d p3d = <span class="built_in">project2Dto3D</span> ( x, y, d, fx, fy, cx, cy, depth_scale );</span><br><span class="line">            <span class="keyword">float</span> grayscale = <span class="built_in"><span class="keyword">float</span></span> ( gray.ptr&lt;uchar&gt; (y) [x] );</span><br><span class="line">            measurements.<span class="built_in">push_back</span> ( <span class="built_in">Measurement</span> ( p3d, grayscale ) );</span><br><span class="line">        &#125;</span><br><span class="line">        prev_color = color.<span class="built_in">clone</span>();</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;add total &quot;</span>&lt;&lt;measurements.<span class="built_in">size</span>()&lt;&lt;<span class="string">&quot; measurements.&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">*********** loop <span class="number">0</span> ************</span><br><span class="line">add total <span class="number">12556</span> measurements.</span><br><span class="line">*********** loop <span class="number">1</span> ************</span><br><span class="line">å›¾ä¸­çš„è¾¹çš„ä¸ªæ•°ï¼š<span class="number">12556</span></span><br><span class="line">.....</span><br><span class="line">iteration= <span class="number">19</span>    chi2= <span class="number">71515789.320224</span>   <span class="selector-tag">time</span>= <span class="number">0.00527771</span>        cumTime= <span class="number">0.0867877</span>      edges= <span class="number">12556</span>    schur= <span class="number">0</span>        lambda= <span class="number">4022565853557871345664.000000</span>  levenbergIter= <span class="number">4</span></span><br><span class="line">Tcw= </span><br><span class="line">    <span class="number">0.999999</span> -<span class="number">1.99501</span>e-<span class="number">06</span>  -<span class="number">0.00124229</span>    <span class="number">0.0166827</span></span><br><span class="line"> <span class="number">3.02563</span>e-<span class="number">06</span>            <span class="number">1</span>  <span class="number">0.000829608</span>   -<span class="number">0.0119843</span></span><br><span class="line">  <span class="number">0.00124229</span> -<span class="number">0.000829611</span>     <span class="number">0.999999</span>   -<span class="number">0.0118238</span></span><br><span class="line">           <span class="number">0</span>            <span class="number">0</span>            <span class="number">0</span>            <span class="number">1</span></span><br><span class="line">....</span><br><span class="line">*********** loop <span class="number">9</span> ************</span><br></pre></td></tr></table></figure>
<p><img src="/images/RGB-Dç›´æ¥æ³•å®è·µ/image-20220330165208010.png" alt="image-20220330165208010"></p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
      </tags>
  </entry>
  <entry>
    <title>ch8_ç›´æ¥æ³•çš„æ¨å¯¼</title>
    <url>/posts/50957.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>ä¹‹å‰ä¼°è®¡ç›¸æœºè¿åŠ¨æ—¶ä½¿ç”¨å¯¹æå‡ ä½•ã€PnP æˆ– ICP ç®—æ³•ï¼Œè€Œæ ¹æ®å›¾åƒçš„åƒç´ ç°åº¦ä¿¡æ¯ä¹Ÿå¯ä»¥è®¡ç®—ç›¸æœºè¿åŠ¨ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºç›´æ¥æ³•ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>è€ƒè™‘æŸä¸ªç©ºé—´ç‚¹ $P$ å’Œä¸¤ä¸ªæ—¶åˆ»çš„ç›¸æœºã€‚$P $çš„ä¸–ç•Œåæ ‡ä¸º$ [X, Y, Z]$ï¼Œå®ƒåœ¨ä¸¤ä¸ªç›¸æœºä¸Šæˆåƒï¼Œè®°éé½æ¬¡åƒç´ åæ ‡ä¸º $p_1 , p_2$ ã€‚</p>
<p><img src="/images/ç›´æ¥æ³•çš„æ¨å¯¼/image-20220329150722092.png" alt="image-20220329150722092" style="zoom: 33%;" /></p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ±‚ç¬¬ä¸€ä¸ªç›¸æœºåˆ°ç¬¬äºŒä¸ªç›¸æœºçš„ç›¸å¯¹ä½å§¿å˜æ¢ã€‚æˆ‘ä»¬ä»¥ç¬¬ä¸€ä¸ªç›¸æœºä¸ºå‚ç…§ç³»ï¼Œè®¾ç¬¬äºŒä¸ªç›¸æœºæ—‹è½¬å’Œå¹³ç§»ä¸º$ R, t$ï¼ˆå¯¹åº”æä»£æ•°ä¸º $\xi$ï¼‰ã€‚åŒæ—¶ï¼Œä¸¤ç›¸æœºçš„å†…å‚ç›¸åŒï¼Œè®°ä¸º $K$ã€‚ä¸ºæ¸…æ¥šèµ·è§ï¼Œæˆ‘ä»¬åˆ—å†™å®Œæ•´çš„æŠ•å½±æ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p_1 &= 
\begin{bmatrix}
u\\v\\1
\end{bmatrix}_1=\frac{1}{Z_1}KP\\
p_2&=\begin{bmatrix}
u\\v\\1
\end{bmatrix}_2=\frac{1}{Z_2}K(RP+t)=\frac{1}{Z_2}K(exp(\xi^{\land})P)_{1:3}
\end{align*}</script><p>ç‰¹å¾ç‚¹æ³•ä¸­ï¼Œç”±äºæˆ‘ä»¬é€šè¿‡åŒ¹é…æè¿°å­ï¼ŒçŸ¥é“äº† $p_1 , p_2$ çš„åƒç´ ä½ç½®ï¼Œæ‰€ä»¥å¯ä»¥è®¡ç®—é‡æŠ•å½±çš„ä½ç½®ã€‚ä½†åœ¨ç›´æ¥æ³•ä¸­ï¼Œç”±äºæ²¡æœ‰ç‰¹å¾åŒ¹é…ï¼Œæˆ‘ä»¬æ— ä»çŸ¥é“å“ªä¸€ä¸ª $p_1 , p_2$  å¯¹åº”ç€åŒä¸€ä¸ªç‚¹ã€‚</p>
<p>ç›´æ¥æ³•çš„æ€è·¯æ˜¯æ ¹æ®å½“å‰ç›¸æœºçš„ä½å§¿ä¼°è®¡å€¼ï¼Œæ¥å¯»æ‰¾ $p_2$ çš„ä½ç½®ã€‚ä½†è‹¥ç›¸æœºä½å§¿ä¸å¤Ÿå¥½ï¼Œ $p_2$ çš„å¤–è§‚å’Œ  $p_1$ ä¼šæœ‰æ˜æ˜¾å·®åˆ«ã€‚äºæ˜¯ï¼Œä¸ºäº†å‡å°è¿™ä¸ªå·®åˆ«ï¼Œæˆ‘ä»¬ä¼˜åŒ–ç›¸æœºçš„ä½å§¿ï¼Œæ¥å¯»æ‰¾ä¸  $p_1$æ›´ç›¸ä¼¼çš„ $p_2$ã€‚</p>
<p>è¿™åŒæ ·å¯ä»¥é€šè¿‡è§£ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œä½†æ­¤æ—¶<strong>æœ€å°åŒ–çš„ä¸æ˜¯é‡æŠ•å½±è¯¯å·®</strong>ï¼Œè€Œæ˜¯<strong>å…‰åº¦è¯¯å·®ï¼ˆPhotometric Errorï¼‰</strong>ï¼Œä¹Ÿå°±æ˜¯ $P $çš„ä¸¤ä¸ªåƒçš„äº®åº¦è¯¯å·®ï¼š</p>
<script type="math/tex; mode=display">
e = I_1 (p_1 ) âˆ’ I_2 (p_2 )</script><p>è¿™é‡Œ e æ˜¯ä¸€ä¸ªæ ‡é‡ï¼ŒåŒæ ·çš„ï¼Œä¼˜åŒ–ç›®æ ‡ä¸ºè¯¥è¯¯å·®çš„äºŒèŒƒæ•°ï¼Œæš‚æ—¶å–ä¸åŠ æƒçš„å½¢å¼ï¼Œä¸ºï¼š</p>
<script type="math/tex; mode=display">
\underset{\xi}{min}J(\xi)=\parallel e\parallel^2</script><p>ç”±ç°åº¦ä¸å˜å‡è®¾ï¼Œå¯¹äº$N$ä¸ªç©ºé—´ç‚¹$P_i$ï¼Œæ•´ä¸ªç›¸æœºçš„ä½å§¿ä¼°è®¡é—®é¢˜å˜ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\underset{\xi}{min}J(\xi)=\sum^N_{i=1}e_i^Te_i\\
e_i=I_1(p_1,i)-I_2(p_2,i)</script><p>è¿™é‡Œçš„ä¼˜åŒ–å˜é‡æ˜¯ç›¸æœºä½å§¿ $\xi$ï¼Œä¸ºäº†æ±‚è§£è¿™ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å…³å¿ƒè¯¯å·® $e$ æ˜¯å¦‚ä½•éšç€ç›¸æœºä½å§¿ $\xi$ å˜åŒ–çš„ï¼Œéœ€è¦åˆ†æå®ƒä»¬çš„å¯¼æ•°å…³ç³»ã€‚å› æ­¤ï¼Œä½¿ç”¨æä»£æ•°ä¸Šçš„æ‰°åŠ¨æ¨¡å‹ã€‚æˆ‘ä»¬ç»™ $exp(\xi) $å·¦ä¹˜ä¸€ä¸ªå°æ‰°åŠ¨$ exp(\delta \xi)$:</p>
<script type="math/tex; mode=display">
\begin{align*}
e(\xiâŠ•\delta \xi)&=I_1(\frac{1}{Z_1}KP)-I_2(\frac{1}{Z_2}K exp(\delta \xi^{\land})exp(\xi^{\land})P)\\
&\approx I_1(\frac{1}{Z_1}KP)-I_2(\frac{1}{Z_2}K (1+\delta \xi^{\land})exp(\xi^{\land})P)\\
&=I_1(\frac{1}{Z_1}KP)-I_2(\frac{1}{Z_2}Kexp(\xi^{\land})P+\frac{1}{Z_2}K \delta \xi^{\land}exp(\xi^{\land})P)\\
\end{align*}</script><p>è®°ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
q&=\delta \xi^{\land}exp(\xi^{\land})P\\
u&=\frac{1}{Z_2}Kq
\end{align*}</script><p>$q $ä¸º$ P $åœ¨æ‰°åŠ¨ä¹‹åï¼Œä½äºç¬¬äºŒä¸ªç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ï¼Œè€Œ $u $ä¸ºå®ƒçš„åƒç´ åæ ‡</p>
<p>ç”±ä¸€é˜¶æ³°å‹’å±•å¼€å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
I(x+dx)\approx \frac{\partial I}{\partial x}dx\\
I(x+\delta \xi)\approx \frac{\partial I}{\partial \delta \xi}{\delta \xi}</script><p>æ‰€ä»¥ï¼ŒåŒæ ·çš„è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
e(\xiâŠ•\delta \xi)&=I_1(\frac{1}{Z_1}KP)-I_2(\frac{1}{Z_2}Kexp(\xi^{\land})P+\frac{1}{Z_2}K \delta \xi^{\land}exp(\xi^{\land})P)\\
&=I_1(\frac{1}{Z_1}KP)-I_2(\frac{1}{Z_2}Kexp(\xi^{\land})P+u)\\
&\approx I_1(\frac{1}{Z_1}KP)-I_2(\frac{1}{Z_2}Kexp(\xi^{\land})P)-\frac{\partial I_2}{\partial u}\frac{\partial u}{\partial q}\frac{\partial q}{\partial \delta \xi}\delta \xi\\
&=e(\xi)-\frac{\partial I_2}{\partial u}\frac{\partial u}{\partial q}\frac{\partial q}{\partial \delta \xi}\delta \xi
\end{align*}</script><p>ä¸€é˜¶å¯¼æ•°ç”±äºé“¾å¼æ³•åˆ™åˆ†æˆäº†ä¸‰é¡¹ï¼Œåˆ†åˆ«è®¡ç®—è¿™ä¸‰éƒ¨åˆ†ï¼š</p>
<p>$\partial I_2 / \partial u$ä¸º$ u $å¤„çš„åƒç´ æ¢¯åº¦ï¼›</p>
<p>$âˆ‚u/âˆ‚q $ä¸ºæŠ•å½±æ–¹ç¨‹å…³äºç›¸æœºåæ ‡ç³»ä¸‹çš„ä¸‰ç»´ç‚¹çš„å¯¼æ•°ï¼Œ$q $ä¸º$ P $åœ¨æ‰°åŠ¨ä¹‹åï¼Œä½äºç¬¬äºŒä¸ªç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ï¼Œ$u $ä¸ºå®ƒçš„åƒç´ åæ ‡ï¼Œè®°ä¸º$q = [X, Y, Z]^T$</p>
<script type="math/tex; mode=display">
\frac{\partial u}{\partial q}=-
\begin{bmatrix}
\frac{\partial u}{\partial X}&
\frac{\partial u}{\partial Y}&
\frac{\partial u}{\partial Z}            \\ 
\frac{\partial v}{\partial X}&
\frac{\partial v}{\partial Y}&
\frac{\partial v}{\partial Z}
\end{bmatrix}=-
\begin{bmatrix}
\frac{f_x}{Z}&0&-\frac{f_xX}{Z^{2}}\\
0&\frac{f_y}{Z}&-\frac{f_yY}{Z^{2}}
\end{bmatrix}</script><p>$âˆ‚q/âˆ‚Î´Î¾ $ä¸ºå˜æ¢åçš„ä¸‰ç»´ç‚¹å¯¹å˜æ¢çš„å¯¼æ•°ï¼Œç”±äº$q$ä¸ºå˜æ¢åçš„ä¸‰ç»´ç‚¹ï¼Œè®¾å˜æ¢å‰çš„ä¸‰ç»´ç‚¹ä¸º$q_0$</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial q}{\partial \delta \xi}&=
\frac{\partial(Tq_0)}{\partial \delta \xi} \\ &=
\underset{\delta \xi \rightarrow0}{lim}
\frac{exp(\delta \xi ^{\land})exp(\xi ^{\land})q_0-exp(\xi ^{\land})q_0}{\delta \xi}\\&\approx
\underset{\delta \xi \rightarrow0}{lim}
\frac{(I+\delta \xi ^{\land})exp(\xi ^{\land})q_0-exp(\xi ^{\land})q_0}{\delta \xi}\\&=
\underset{\delta \xi \rightarrow0}{lim}
\frac{\delta \xi ^{\land}exp(\xi ^{\land})q_0}{\delta \xi}\\&=
\underset{\delta \xi \rightarrow0}{lim}
\frac{\begin{bmatrix}
\delta \phi^{\land}&\delta \rho \\
0^T&0
\end{bmatrix}
\begin{bmatrix}
Rq_0+t \\
1
\end{bmatrix}
}{\delta \xi}\\&=
\underset{\delta \xi \rightarrow0}{lim}
\frac{\begin{bmatrix}
\delta \phi^{\land}(Rq_0+t)+\delta \rho  \\
0
\end{bmatrix}
}
{\delta \xi}\\&=
\begin{bmatrix}
I &-(Rq_0+t)^{\land}\\
0^{T}&0^{T}
\end{bmatrix}\\&=
\begin{bmatrix}
I &-q^{\land}\\
0^{T}&0^{T}
\end{bmatrix}\\&=
(Tq)^âŠ™
\end{align*}</script><p>åä¸¤é¡¹åªä¸ä¸‰ç»´ç‚¹ q æœ‰å…³ï¼Œè€Œä¸å›¾åƒæ— å…³ï¼Œæˆ‘ä»¬ç»å¸¸æŠŠå®ƒåˆå¹¶åœ¨ä¸€èµ·ï¼š</p>
<script type="math/tex; mode=display">
\begin{align}
\frac{\partial u}{\partial \delta \xi}&=
\frac{\partial u}{\partial q}
\frac{\partial q}{\partial \delta \xi}=-
\begin{bmatrix}
\frac{f_x}{Z}&0&-\frac{f_xX}{Z^{2}}
&-\frac{f_xXY}{Z^{2}}&f_x+\frac{f_xX^2}{Z^{2}}&-\frac{f_xY}{Z}
\\
0&\frac{f_y}{Z}&-\frac{f_yY}{Z^{2}}
&-f_y-\frac{f_yY^{2}}{Z^{2}}&\frac{f_yXY}{Z}&\frac{f_yX}{Z}
\end{bmatrix}
\end{align}</script><p>æ¨å¯¼äº†è¯¯å·®ç›¸å¯¹äºæä»£æ•°çš„é›…å¯æ¯”çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
J=-\frac{\partial I_2}{\partial u}
\frac{\partial u}{\partial \delta \xi}</script><p>å¯¹äº $N $ä¸ªç‚¹çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ç§æ–¹æ³•è®¡ç®—ä¼˜åŒ–é—®é¢˜çš„é›…å¯æ¯”ï¼Œç„¶åä½¿ç”¨$ G-N$æˆ–$L-M$ è®¡ç®—å¢é‡ï¼Œè¿­ä»£æ±‚è§£ã€‚</p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>ç›´æ¥æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ch8_ä½¿ç”¨LKå…‰æµæ³•</title>
    <url>/posts/46698.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>å…‰æµæ˜¯ä¸€ç§æè¿°åƒç´ éšç€æ—¶é—´ï¼Œåœ¨å›¾åƒä¹‹é—´è¿åŠ¨çš„æ–¹æ³•ã€‚éšç€æ—¶é—´çš„ç»è¿‡ï¼ŒåŒä¸€ä¸ªåƒç´ ä¼šåœ¨å›¾åƒä¸­è¿åŠ¨ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›è¿½è¸ªå®ƒçš„è¿åŠ¨è¿‡ç¨‹ã€‚è®¡ç®—éƒ¨åˆ†åƒç´ è¿åŠ¨çš„ç§°ä¸ºç¨€ç–å…‰æµï¼Œè®¡ç®—æ‰€æœ‰åƒç´ çš„ç§°ä¸ºç¨ å¯†å…‰æµã€‚ç¨€ç–å…‰æµä»¥$ Lucas-Kanade$ å…‰æµä¸ºä»£è¡¨ï¼Œå¹¶å¯ä»¥åœ¨ SLAM ä¸­ç”¨äºè·Ÿè¸ªç‰¹å¾ç‚¹ä½ç½®ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><img src="/images/ä½¿ç”¨LKå…‰æµæ³•/image-20220329104428515.png" alt="image-20220329104428515"></p>
<h1 id="LKå…‰æµæ³•åŸç†"><a href="#LKå…‰æµæ³•åŸç†" class="headerlink" title="LKå…‰æµæ³•åŸç†"></a>LKå…‰æµæ³•åŸç†</h1><p>åœ¨$ LK $å…‰æµä¸­ï¼Œæˆ‘ä»¬è®¤ä¸ºæ¥è‡ªç›¸æœºçš„å›¾åƒæ˜¯éšæ—¶é—´å˜åŒ–çš„ã€‚å›¾åƒå¯ä»¥çœ‹ä½œæ—¶é—´çš„å‡½æ•°ï¼š$I(t)$ã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªåœ¨$ t $æ—¶åˆ»ï¼Œä½äº$ (x, y)$ å¤„çš„åƒç´ ï¼Œå®ƒçš„ç°åº¦å¯ä»¥å†™æˆ</p>
<script type="math/tex; mode=display">
I(x, y, t).</script><p>ç°åº¦ä¸å˜å‡è®¾ï¼š</p>
<script type="math/tex; mode=display">
I(x+d_x,y+d_y,t+d_t)=I(x, y, t)</script><p>å¯¹å·¦è¾¹è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œä¿ç•™ä¸€é˜¶é¡¹ï¼Œå¾—ï¼š</p>
<script type="math/tex; mode=display">
I (x + dx, y + dy, t + dt) \approx I (x, y, t)
+\frac{\partial I}{\partial x}d_x
+\frac{\partial I}{\partial y}d_y
+\frac{\partial I}{\partial t}d_t</script><p>å‡è®¾äº†ç°åº¦ä¸å˜:</p>
<script type="math/tex; mode=display">
\frac{\partial I}{\partial x}d_x
+\frac{\partial I}{\partial y}d_y
+\frac{\partial I}{\partial t}d_t=0</script><p>ä¸¤è¾¹é™¤ä»¥ $dt$:</p>
<script type="math/tex; mode=display">
\frac{\partial I}{\partial x}\frac{d_x}{d_t}
+\frac{\partial I}{\partial y}\frac{d_y}{d_t}
=-\frac{\partial I}{\partial t}</script><p>å…¶ä¸­: $dx/dt $ä¸ºåƒç´ åœ¨ $x $è½´ä¸Šè¿åŠ¨é€Ÿåº¦ï¼Œè®°ä¸º$u$ï¼Œ $dy/dt $ä¸ºåƒç´ åœ¨ $y$è½´ä¸Šè¿åŠ¨é€Ÿåº¦ï¼Œè®°ä¸º$v$</p>
<p>$\partial I/\partial x$ä¸ºå›¾åƒåœ¨è¯¥ç‚¹å¤„ $x$ æ–¹å‘çš„æ¢¯åº¦ï¼Œè®°ä¸º$I_x$ï¼Œ$\partial I/\partial y$ä¸ºå›¾åƒåœ¨è¯¥ç‚¹å¤„ $y$ æ–¹å‘çš„æ¢¯åº¦ï¼Œè®°ä¸º$I_y$</p>
<p>å›¾åƒç°åº¦å¯¹æ—¶é—´çš„å˜åŒ–é‡è®°ä¸º $I_t$</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
I_x & I_y
\end{bmatrix}
\begin{bmatrix}
u \\ v
\end{bmatrix}
= - I_t</script><p>æˆ‘ä»¬æƒ³è®¡ç®—çš„æ˜¯åƒç´ çš„è¿åŠ¨$ u, v$ï¼Œä½†æ˜¯è¯¥å¼æ˜¯å¸¦æœ‰ä¸¤ä¸ªå˜é‡çš„ä¸€æ¬¡æ–¹ç¨‹ï¼Œä»…å‡­å®ƒæ— æ³•è®¡ç®—å‡º$ u, v$ã€‚å› æ­¤ï¼Œå¿…é¡»å¼•å…¥é¢å¤–çš„çº¦æŸæ¥è®¡ç®—$ u, v$ã€‚åœ¨$ LK $å…‰æµä¸­ï¼Œæˆ‘ä»¬å‡è®¾æŸä¸€ä¸ªçª—å£å†…çš„åƒç´ å…·æœ‰ç›¸åŒçš„è¿åŠ¨ã€‚</p>
<p>è€ƒè™‘ä¸€ä¸ªå¤§å°ä¸º $w Ã— w$ å¤§å°çš„çª—å£ï¼Œå®ƒå«æœ‰ $w^2 $æ•°é‡çš„åƒç´ ã€‚ç”±äºè¯¥çª—å£å†…åƒç´ å…·æœ‰åŒæ ·çš„è¿åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬å…±æœ‰ $w^2 $ä¸ªæ–¹ç¨‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
I_x & I_y
\end{bmatrix}_k
\begin{bmatrix}
u \\ v
\end{bmatrix}
= - I_{tk},k=1,....,w^2</script><p>å³ä¸ºï¼š</p>
<script type="math/tex; mode=display">
A = 
\begin{bmatrix}
\begin{bmatrix}
I_x & I_y
\end{bmatrix}_1\\.\\.\\
\begin{bmatrix}
I_x & I_y
\end{bmatrix}_k
\end{bmatrix},
b=\begin{bmatrix}
I_{t1} \\.\\.\\I_{tk} 
\end{bmatrix}</script><p>äºæ˜¯æ•´ä¸ªæ–¹ç¨‹ä¸ºï¼š</p>
<script type="math/tex; mode=display">
A\begin{bmatrix}
u\\u
\end{bmatrix}=-b</script><p>è¿™æ˜¯ä¸€ä¸ªå…³äº u, v çš„è¶…å®šçº¿æ€§æ–¹ç¨‹ï¼Œä¼ ç»Ÿè§£æ³•æ˜¯æ±‚æœ€å°äºŒä¹˜è§£ã€‚æœ€å°äºŒä¹˜åœ¨å¾ˆå¤šæ—¶å€™éƒ½ç”¨åˆ°è¿‡ï¼š</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
u\\u
\end{bmatrix}^*
=-(A^TA)^{-1}A^Tb</script><p>è¿™æ ·å°±å¾—åˆ°äº†åƒç´ åœ¨å›¾åƒé—´çš„è¿åŠ¨é€Ÿåº¦ $u, v$</p>
<h1 id="ä½¿ç”¨LKå…‰æµæ³•"><a href="#ä½¿ç”¨LKå…‰æµæ³•" class="headerlink" title="ä½¿ç”¨LKå…‰æµæ³•"></a>ä½¿ç”¨LKå…‰æµæ³•</h1><h2 id="å…‰æµè¿½è¸ªçš„åŸç†"><a href="#å…‰æµè¿½è¸ªçš„åŸç†" class="headerlink" title="å…‰æµè¿½è¸ªçš„åŸç†"></a>å…‰æµè¿½è¸ªçš„åŸç†</h2><ul>
<li><p>cv2.FastFeatureDetector()ï¼šFastè§’ç‚¹æ£€æµ‹å™¨ç¡®å®šè¦è¿½è¸ªçš„ç‰¹å¾ç‚¹</p>
</li>
<li><p>cv2.calcOpticalFlowPyrLK()ï¼š è¿½è¸ªè§†é¢‘ä¸­çš„ç¨€ç–ç‰¹å¾ç‚¹</p>
</li>
<li><p>cv2.calcOpticalFlowFarneback()ï¼š è¿½è¸ªè§†é¢‘ä¸­çš„å¯†é›†ç‰¹å¾ç‚¹</p>
</li>
</ul>
<p>å–ç¬¬ä¸€å¸§ï¼Œæ£€æµ‹å…¶ä¸­çš„ä¸€äº› Fastè§’ç‚¹ï¼Œä½¿ç”¨ Lucas-Kanade å…‰æµè¿­ä»£è·Ÿè¸ªè¿™äº›ç‚¹ã€‚å¯¹äºå‡½æ•° cv2.calcOpticalFlowPyrLK() ä¼ é€’å‰ä¸€å¸§ã€å‰ä¸€ä¸ªç‚¹å’Œä¸‹ä¸€å¸§ã€‚å®ƒè¿”å›ä¸‹ä¸€ä¸ªç‚¹ä»¥åŠä¸€äº›çŠ¶æ€ç¼–å·ï¼Œå¦‚æœæ‰¾åˆ°ä¸‹ä¸€ä¸ªç‚¹ï¼Œåˆ™å€¼ä¸º 1ï¼Œå¦åˆ™ä¸ºé›¶ã€‚ç„¶ååœ¨ä¸‹ä¸€æ­¥ä¸­è¿­ä»£åœ°å°†è¿™äº›ä¸‹ä¸€ä¸ªç‚¹ä½œä¸ºå‰ä¸€ä¸ªç‚¹ä¼ é€’ã€‚</p>
<h2 id="å…‰æµçš„ä¸¤ç§æ–¹æ³•"><a href="#å…‰æµçš„ä¸¤ç§æ–¹æ³•" class="headerlink" title="å…‰æµçš„ä¸¤ç§æ–¹æ³•"></a>å…‰æµçš„ä¸¤ç§æ–¹æ³•</h2><p>OpenCVæä¾›äº†ä¿©ç§ç®—æ³•è®¡ç®—å…‰æµï¼Œåˆ†åˆ«é€šè¿‡ï¼šcv2.calcOpticalFlowPyrLK()ã€cv2.calcOpticalFlowFarnebackå®ç°ï¼›</p>
<ul>
<li>ç¨€ç–å…‰æµï¼š é€šè¿‡ Lucas-Kanade æ–¹æ³•è®¡ç®—ç¨€ç–ç‰¹å¾é›†çš„å…‰æµï¼ˆä½¿ç”¨ è§’ç‚¹æ£€æµ‹ç®—æ³•æ£€æµ‹åˆ°çš„è§’ç‚¹ï¼‰ã€‚</li>
</ul>
<p>å‚æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cv::calcOpticalFlowPyrLK</span>	<span class="params">(	</span></span></span><br><span class="line"><span class="params"><span class="function">        InputArray 	prevImg, <span class="comment">//ä¸Šä¸€å¸§å•é€šé“ç°åº¦å›¾</span></span></span></span><br><span class="line"><span class="params"><span class="function">        InputArray 	nextImg, <span class="comment">//ä¸‹ä¸€å¸§å•é€šé“ç°åº¦å›¾</span></span></span></span><br><span class="line"><span class="params"><span class="function">        InputArray 	prevPts, <span class="comment">//åƒç´ ç‚¹ä¸Šä¸€å¸§äºŒç»´åæ ‡pts</span></span></span></span><br><span class="line"><span class="params"><span class="function">        InputOutputArray 	nextPts,<span class="comment">//åƒç´ ç‚¹ä¸‹ä¸€å¸§äºŒç»´åæ ‡pts</span></span></span></span><br><span class="line"><span class="params"><span class="function">        OutputArray 	status,<span class="comment">// è¾“å‡ºçŠ¶æ€å‘é‡,ï¼ˆæ— ç¬¦å·å­—ç¬¦ï¼‰;å¦‚æœæ‰¾åˆ°ç›¸åº”ç‰¹å¾çš„æµï¼Œåˆ™å‘é‡çš„æ¯ä¸ªå…ƒç´ è®¾ç½®ä¸º1ï¼Œå¦åˆ™è®¾ç½®ä¸º0ã€‚</span></span></span></span><br><span class="line"><span class="params"><span class="function">        OutputArray 	err, <span class="comment">//è¾“å‡ºé”™è¯¯çš„çŸ¢é‡;å¦‚æœæœªæ‰¾åˆ°æµï¼Œåˆ™æœªå®šä¹‰é”™è¯¯ï¼ˆä½¿ç”¨statuså‚æ•°æŸ¥æ‰¾æ­¤ç±»æƒ…å†µï¼‰ã€‚</span></span></span></span><br><span class="line"><span class="params"><span class="function">        Size 	winSize = Size(<span class="number">21</span>, <span class="number">21</span>),<span class="comment">//æ¯ä¸ªé‡‘å­—å¡”ç­‰çº§çš„æœç´¢çª—å£çš„winSizeå¤§å°ã€‚</span></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">int</span> 	maxLevel = <span class="number">3</span>,<span class="comment">// åŸºäº0çš„æœ€å¤§é‡‘å­—å¡”ç­‰çº§æ•°;å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä¸ä½¿ç”¨é‡‘å­—å¡”ï¼ˆå•çº§ï¼‰ï¼Œå¦‚æœè®¾ç½®ä¸º1ï¼Œåˆ™ä½¿ç”¨ä¸¤ä¸ªçº§åˆ«ï¼Œä¾æ­¤ç±»æ¨;</span></span></span></span><br><span class="line"><span class="params"><span class="function">        TermCriteria 	criteria = TermCriteria(TermCriteria::COUNT+TermCriteria::EPS, <span class="number">30</span>, <span class="number">0.01</span>),<span class="comment">//å‚æ•°ï¼ŒæŒ‡å®šè¿­ä»£æœç´¢ç®—æ³•çš„ç»ˆæ­¢æ¡ä»¶</span></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">int</span> 	flags = <span class="number">0</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">double</span> 	minEigThreshold = <span class="number">1e-4</span> <span class="comment">//ç®—æ³•è®¡ç®—å…‰æµæ–¹ç¨‹çš„2x2æ­£å¸¸çŸ©é˜µçš„æœ€å°ç‰¹å¾å€¼ï¼Œé™¤ä»¥çª—å£ä¸­çš„åƒç´ æ•°;</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span>	</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¯†é›†å…‰æµï¼š é€šè¿‡ Gunner Farneback æ¥å¯»æ‰¾å¯†é›†å…‰æµã€‚å®ƒè®¡ç®—å¸§ä¸­æ‰€æœ‰ç‚¹çš„å…‰æµã€‚</li>
</ul>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>åœ¨ä½¿ç”¨æ•°æ®ä¹‹å‰ï¼Œéœ€è¦æ ¹æ®é‡‡é›†æ—¶é—´ï¼Œå¯¹æ•°æ®è¿›è¡Œä¸€æ¬¡æ—¶é—´ä¸Šçš„å¯¹é½ï¼Œä»¥ä¾¿å¯¹å½©è‰²å›¾å’Œæ·±åº¦å›¾è¿›è¡Œé…å¯¹ã€‚TUM æä¾›äº†ä¸€ä¸ª python è„šæœ¬â€œasso-ciate.pyâ€å¸®æˆ‘ä»¬å®Œæˆè¿™ä»¶äº‹ã€‚è¯·æŠŠæ­¤æ–‡ä»¶æ”¾åˆ°æ•°æ®é›†ç›®å½•ä¸‹ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python associate.py rgb.txt depth.txt &gt; associate.txt</span><br></pre></td></tr></table></figure>
<p>ä¸»å‡½æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¾“å…¥æ•°æ®é›†æ‰€åœ¨çš„è·¯å¾„ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    string path_to_dataset = argv[<span class="number">1</span>];</span><br><span class="line">    string associate_file = path_to_dataset + <span class="string">&quot;/associate.txt&quot;</span>;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(associate_file)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!fin)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;associate.txtæ–‡ä»¶ä¸å­˜åœ¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    string rgb_file, depth_file, time_rgb, time_depth;</span><br><span class="line">    list&lt;cv::Point2f&gt; keypoints; <span class="comment">// å› ä¸ºè¦åˆ é™¤è·Ÿè¸ªå¤±è´¥çš„ç‚¹ï¼Œä½¿ç”¨list</span></span><br><span class="line">    cv::Mat color, depth, last_color;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; <span class="number">100</span>; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        fin &gt;&gt; time_rgb &gt;&gt; rgb_file &gt;&gt; time_depth &gt;&gt; depth_file;</span><br><span class="line">        color = cv::<span class="built_in">imread</span>(path_to_dataset + <span class="string">&quot;/&quot;</span> + rgb_file);       <span class="comment">// è¯»å…¥å½©è‰²å›¾</span></span><br><span class="line">        depth = cv::<span class="built_in">imread</span>(path_to_dataset + <span class="string">&quot;/&quot;</span> + depth_file, <span class="number">-1</span>); <span class="comment">// è¯»å…¥æ·±åº¦å›¾</span></span><br><span class="line">        <span class="comment">// 1.å¯¹ç¬¬ä¸€å¸§æå–FASTç‰¹å¾ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            vector&lt;cv::KeyPoint&gt; kps;</span><br><span class="line">            cv::Ptr&lt;cv::FastFeatureDetector&gt; detector = cv::FastFeatureDetector::<span class="built_in">create</span>();</span><br><span class="line">            detector-&gt;<span class="built_in">detect</span>(color, kps); <span class="comment">// æå–FASTç‰¹å¾ç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> kp : kps)           <span class="comment">// æŠŠæå–çš„ç‰¹å¾ç‚¹å­˜å…¥list</span></span><br><span class="line">                keypoints.<span class="built_in">push_back</span>(kp.pt);</span><br><span class="line">            last_color = color;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.å¯¹å…¶ä»–å¸§ä½¿ç”¨LKè·Ÿè¸ªç‰¹å¾ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (color.data == <span class="literal">nullptr</span> &amp;&amp; depth.data == <span class="literal">nullptr</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        vector&lt;cv::Point2f&gt; next_keypoints;</span><br><span class="line">        vector&lt;cv::Point2f&gt; prev_keypoints;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> kp : keypoints)</span><br><span class="line">            prev_keypoints.<span class="built_in">push_back</span>(kp); <span class="comment">// è®²listä¸­çš„æ•°æ®èµ‹ç»™prev_keypoints</span></span><br><span class="line">        vector&lt;<span class="keyword">unsigned</span> <span class="keyword">char</span>&gt; status;</span><br><span class="line">        vector&lt;<span class="keyword">float</span>&gt; error;</span><br><span class="line"></span><br><span class="line">        chrono::steady_clock::time_point t1 = chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line"></span><br><span class="line">        cv::<span class="built_in">calcOpticalFlowPyrLK</span>(last_color, color, prev_keypoints, next_keypoints, status, error);</span><br><span class="line"></span><br><span class="line">        chrono::steady_clock::time_point t2 = chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line">        chrono::duration&lt;<span class="keyword">double</span>&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(t2 - t1);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;LK Flow use timeï¼š&quot;</span> &lt;&lt; time_used.<span class="built_in">count</span>() &lt;&lt; <span class="string">&quot; seconds.&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠŠè·Ÿä¸¢çš„ç‚¹åˆ æ‰</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> iter = keypoints.<span class="built_in">begin</span>(); iter != keypoints.<span class="built_in">end</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (status[i] == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                iter = keypoints.<span class="built_in">erase</span>(iter);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            *iter = next_keypoints[i];</span><br><span class="line">            iter++;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; keypoints.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span> (keypoints.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;all keypoints are lost.&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”»å‡º keypoints</span></span><br><span class="line">        cv::Mat img_show = color.<span class="built_in">clone</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> kp : keypoints)</span><br><span class="line">        &#123;</span><br><span class="line">            cv::<span class="built_in">circle</span>(img_show, kp, <span class="number">10</span>, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">240</span>, <span class="number">0</span>), <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        cv::<span class="built_in">imshow</span>(<span class="string">&quot;corners&quot;</span>, img_show);</span><br><span class="line">        cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">        last_color = color;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å› ä¸ºè¦åˆ é™¤è·Ÿè¸ªå¤±è´¥çš„ç‚¹ï¼Œä½¿ç”¨list,åŸå› å¦‚ä¸‹ï¼š</p>
<p>ç”±äºé“¾è¡¨çš„å­˜å‚¨æ–¹å¼å¹¶ä¸æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤é“¾è¡¨listä¸­çš„è¿­ä»£å™¨åªæ”¯æŒå‰ç§»å’Œåç§»ï¼Œå±äºåŒå‘è¿­ä»£å™¨</p>
<p>listçš„ä¼˜ç‚¹ï¼š</p>
<blockquote>
<p>é‡‡ç”¨åŠ¨æ€å­˜å‚¨åˆ†é…ï¼Œä¸ä¼šé€ æˆå†…å­˜æµªè´¹å’Œæº¢å‡º<br>é“¾è¡¨æ‰§è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œååˆ†æ–¹ä¾¿ï¼Œä¿®æ”¹æŒ‡é’ˆå³å¯ï¼Œä¸éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ </p>
</blockquote>
</blockquote>
<p>æ‰“å°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">LK Flow use timeï¼š0.0157339 seconds.</span><br><span class="line">è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š 1749</span><br><span class="line">LK Flow use timeï¼š0.0144717 seconds.</span><br><span class="line">è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š 1742</span><br><span class="line">LK Flow use timeï¼š0.0186928 seconds.</span><br><span class="line">è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š 1703</span><br><span class="line">LK Flow use timeï¼š0.0153624 seconds.</span><br><span class="line">è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š 1676</span><br><span class="line">LK Flow use timeï¼š0.019426 seconds.</span><br><span class="line">è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š 1664</span><br><span class="line">LK Flow use timeï¼š0.0140176 seconds.</span><br><span class="line">è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š 1656</span><br><span class="line">LK Flow use timeï¼š0.0187153 seconds.</span><br><span class="line">è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š 1641</span><br><span class="line">LK Flow use timeï¼š0.0187284 seconds.</span><br><span class="line">è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ªæ•°ä¸ºï¼š 1634</span><br></pre></td></tr></table></figure>
<p>CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( useLK )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE Release )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++11 -O3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( useLK useLK.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( useLK <span class="variable">$&#123;OpenCV_LIBS&#125;</span> )</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/images/ä½¿ç”¨LKå…‰æµæ³•/image-20220329144916230.png" alt="image-20220329144916230"></p>
<p>LK å…‰æµè·Ÿè¸ªèƒ½å¤Ÿç›´æ¥å¾—åˆ°ç‰¹å¾ç‚¹çš„å¯¹åº”å…³ç³»ã€‚è¿™ä¸ªå¯¹åº”å…³ç³»å°±åƒæ˜¯æè¿°å­çš„åŒ¹é…ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬å¤§å¤šæ•°æ—¶å€™åªä¼šç¢°åˆ°ç‰¹å¾ç‚¹è·Ÿä¸¢çš„æƒ…å†µï¼Œè€Œä¸å¤ªä¼šé‡åˆ°è¯¯åŒ¹é…ï¼Œè¿™åº”è¯¥æ˜¯å…‰æµç›¸å¯¹äºæè¿°å­çš„ä¸€ç‚¹ä¼˜åŠ¿ã€‚ä½†æ˜¯ï¼ŒåŒ¹é…æè¿°å­çš„æ–¹æ³•åœ¨ç›¸æœºè¿åŠ¨è¾ƒå¤§æ—¶ä»èƒ½æˆåŠŸï¼Œè€Œå…‰æµå¿…é¡»è¦æ±‚ç›¸æœºè¿åŠ¨æ˜¯å¾®å°çš„ã€‚ä»è¿™æ–¹é¢æ¥è¯´ï¼Œå…‰æµçš„é²æ£’æ€§æ¯”æè¿°å­å·®ä¸€äº›ã€‚</p>
<p>å…‰æµæ³•å‚è€ƒï¼š</p>
<ul>
<li><a href="https://www.shouxicto.com/article/1871.html">OpenCVä¸­çš„å…‰æµåŠè§†é¢‘ç‰¹å¾ç‚¹è¿½è¸ª</a></li>
<li><a href="https://docs.opencv.org/3.4.6/dc/d6b/group__video__track.html#ga473e4b886d0bcc6b65831eb88ed93323"> calcOpticalFlowPyrLK()</a></li>
<li><a href="https://docs.opencv.org/3.4.6/dc/d6b/group__video__track.html#ga5d10ebbd59fe09c5f650289ec0ece5af">calcOpticalFlowFarneback()</a></li>
</ul>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>LKå…‰æµæ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>g2oçš„ç»“æ„ä»¥åŠBAèŠ‚ç‚¹ä¸è¾¹çš„å®šä¹‰</title>
    <url>/posts/5123.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>$g2o $æä¾›äº†è®¸å¤šå…³äº$BA $çš„èŠ‚ç‚¹å’Œè¾¹ï¼Œæˆ‘ä»¬ä¸å¿…è‡ªå·±ä»å¤´å®ç°æ‰€æœ‰çš„è®¡ç®—ã€‚åœ¨<code>g2o/types/sba/types_six_dof_expmap.h</code>ä¸­åˆ™æä¾›äº†æä»£æ•°è¡¨è¾¾çš„èŠ‚ç‚¹å’Œè¾¹ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="g2oçš„ç»“æ„"><a href="#g2oçš„ç»“æ„" class="headerlink" title="g2oçš„ç»“æ„"></a>g2oçš„ç»“æ„</h1><blockquote>
<p>å‚è€ƒåšå®¢ï¼š<a href="https://www.cnblogs.com/gaoxiang12/p/5304272.html">æ·±å…¥ç†è§£å›¾ä¼˜åŒ–ä¸g2oï¼šg2oç¯‡</a></p>
</blockquote>
<p>æºç ï¼š<a href="https://github.com/RainerKuemmerle/g2o">https://github.com/RainerKuemmerle/g2o</a></p>
<p><img src="/images/g2oä¸­å…³äºBAçš„èŠ‚ç‚¹ä¸è¾¹/image-20220328125016497.png" alt="image-20220328125016497"></p>
<ul>
<li><strong>cmake_modulesï¼š</strong>ç»™cmakeç”¨æ¥å¯»æ‰¾åº“çš„æ–‡ä»¶ã€‚æˆ‘ä»¬ç”¨g2oæ—¶ä¹Ÿä¼šç”¨å®ƒé‡Œå¤´çš„ä¸œè¥¿ï¼Œä¾‹å¦‚FindG2O.cmake</li>
<li><strong>docï¼š</strong>æ–‡æ¡£ã€‚åŒ…æ‹¬g2oè‡ªå¸¦çš„è¯´æ˜ä¹¦ï¼ˆéš¾åº¦æŒºå¤§çš„ä¸€ä¸ªè¯´æ˜æ–‡æ¡£ï¼‰ã€‚</li>
<li><strong>g2oï¼š</strong>æœ€é‡è¦çš„æºä»£ç éƒ½åœ¨è¿™é‡Œï¼</li>
<li><strong>scriptï¼š</strong>åœ¨androidç­‰å…¶ä»–ç³»ç»Ÿç¼–è¯‘ç”¨çš„è„šæœ¬</li>
</ul>
<p><a href="https://github.com/RainerKuemmerle/g2o/tree/master/g2o">https://github.com/RainerKuemmerle/g2o/tree/master/g2o</a></p>
<p><img src="/images/g2oä¸­å…³äºBAçš„èŠ‚ç‚¹ä¸è¾¹/image-20220328125308391.png" alt="image-20220328125308391"></p>
<ul>
<li><strong>appsï¼š</strong>ä¸€äº›åº”ç”¨ç¨‹åºã€‚å¥½ç”¨çš„g2o_viewerå°±åœ¨è¿™é‡Œã€‚å…¶ä»–è¿˜æœ‰ä¸€äº›ä¸å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ç­‰ã€‚</li>
<li><strong>coreï¼š</strong>æ ¸å¿ƒç»„ä»¶ï¼Œå¾ˆé‡è¦ï¼åŸºæœ¬çš„é¡¶ç‚¹ã€è¾¹ã€å›¾ç»“æ„çš„å®šä¹‰ï¼Œç®—æ³•çš„å®šä¹‰ï¼Œæ±‚è§£å™¨æ¥å£çš„å®šä¹‰åœ¨è¿™é‡Œã€‚</li>
<li><strong>examplesï¼š</strong>ä¸€äº›ä¾‹ç¨‹ï¼Œå¯ä»¥å‚ç…§ç€è¿™é‡Œçš„ä¸œè¥¿æ¥å†™ã€‚ä¸è¿‡æ³¨é‡Šä¸å¤ªå¤šã€‚</li>
<li><strong>solversï¼š</strong>æ±‚è§£å™¨çš„å®ç°ã€‚ä¸»è¦æ¥è‡ªcholdmod, csparseã€‚åœ¨ä½¿ç”¨g2oæ—¶è¦å…ˆé€‰æ‹©å…¶ä¸­ä¸€ç§ã€‚</li>
<li><strong>stuffï¼š</strong>å¯¹ç”¨æˆ·æ¥è®²å¯æœ‰å¯æ— çš„ä¸€äº›å·¥å…·å‡½æ•°ã€‚</li>
<li><strong>typesï¼š</strong>å„ç§é¡¶ç‚¹å’Œè¾¹ï¼Œå¾ˆé‡è¦ï¼æˆ‘ä»¬ç”¨æˆ·åœ¨æ„å»ºå›¾ä¼˜åŒ–é—®é¢˜æ—¶ï¼Œå…ˆè¦æƒ³å¥½è‡ªå·±çš„é¡¶ç‚¹å’Œè¾¹æ˜¯å¦å·²ç»æä¾›äº†å®šä¹‰ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¦è‡ªå·±å®ç°ã€‚å¦‚æœæœ‰ï¼Œå°±ç”¨g2oæä¾›çš„å³å¯ã€‚</li>
</ul>
<p><strong>å°±ç»éªŒè€Œè¨€ï¼Œsolversç»™äººçš„æ„Ÿè§‰æ˜¯å¤§åŒå°å¼‚ï¼Œè€Œ types çš„é€‰å–ï¼Œåˆ™æ˜¯ g2o ç”¨æˆ·ä¸»è¦å…³å¿ƒçš„å†…å®¹ã€‚ç„¶å core ä¸‹é¢çš„å†…å®¹ï¼Œæˆ‘ä»¬è¦äº‰å–å¼„çš„æ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ‰èƒ½ç¡®ä¿ä½¿ç”¨ä¸­å‡ºç°é”™è¯¯å¯ä»¥æ­£ç¡®åœ°åº”å¯¹ã€‚</strong></p>
<p>g2oæœ€åŸºæœ¬çš„ç±»ç»“æ„ï¼š</p>
<p><img src="/images/g2oä¸­å…³äºBAçš„èŠ‚ç‚¹ä¸è¾¹/606958-20160321233900042-681579456.png" alt="img"></p>
<p>ã€€å…ˆçœ‹ä¸ŠåŠéƒ¨åˆ†ã€‚SparseOptimizer æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦ç»´æŠ¤çš„ä¸œä¸œã€‚å®ƒæ˜¯ä¸€ä¸ªOptimizable Graphï¼Œä»è€Œä¹Ÿæ˜¯ä¸€ä¸ªHyper Graphã€‚ä¸€ä¸ª SparseOptimizer å«æœ‰å¾ˆå¤šä¸ªé¡¶ç‚¹ ï¼ˆéƒ½ç»§æ‰¿è‡ª Base Vertexï¼‰å’Œå¾ˆå¤šä¸ªè¾¹ï¼ˆç»§æ‰¿è‡ª BaseUnaryEdge, BaseBinaryEdgeæˆ–BaseMultiEdgeï¼‰ã€‚è¿™äº› Base Vertex å’Œ Base Edge éƒ½æ˜¯æŠ½è±¡çš„åŸºç±»ï¼Œè€Œå®é™…ç”¨çš„é¡¶ç‚¹å’Œè¾¹ï¼Œéƒ½æ˜¯å®ƒä»¬çš„æ´¾ç”Ÿç±»ã€‚æˆ‘ä»¬ç”¨ SparseOptimizer.addVertex å’Œ SparseOptimizer.addEdge å‘ä¸€ä¸ªå›¾ä¸­æ·»åŠ é¡¶ç‚¹å’Œè¾¹ï¼Œæœ€åè°ƒç”¨ SparseOptimizer.optimize å®Œæˆä¼˜åŒ–ã€‚</p>
<p>ã€€ã€€åœ¨ä¼˜åŒ–ä¹‹å‰ï¼Œéœ€è¦æŒ‡å®šæˆ‘ä»¬ç”¨çš„æ±‚è§£å™¨å’Œè¿­ä»£ç®—æ³•ã€‚ä»å›¾ä¸­ä¸‹åŠéƒ¨åˆ†å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ª SparseOptimizer æ‹¥æœ‰ä¸€ä¸ª Optimization Algorithmï¼Œç»§æ‰¿è‡ªGauss-Newton, Levernberg-Marquardt, Powellâ€™s dogleg ä¸‰è€…ä¹‹ä¸€ï¼ˆæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯GNæˆ–LMï¼‰ã€‚åŒæ—¶ï¼Œè¿™ä¸ª Optimization Algorithm æ‹¥æœ‰ä¸€ä¸ªSolverï¼Œå®ƒå«æœ‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚ä¸€ä¸ªæ˜¯ SparseBlockMatrix ï¼Œç”¨äºè®¡ç®—ç¨€ç–çš„é›…å¯æ¯”å’Œæµ·å¡ï¼› ä¸€ä¸ªæ˜¯ç”¨äºè®¡ç®—è¿­ä»£è¿‡ç¨‹ä¸­æœ€å…³é”®çš„ä¸€æ­¥</p>
<script type="math/tex; mode=display">
HÎ”x=âˆ’b</script><p>è¿™å°±éœ€è¦ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹çš„æ±‚è§£å™¨ã€‚è€Œè¿™ä¸ªæ±‚è§£å™¨ï¼Œå¯ä»¥ä» PCG, CSparse, Choldmod ä¸‰è€…é€‰ä¸€ã€‚</p>
<p><strong>ç»¼ä¸Šæ‰€è¿°ï¼Œåœ¨g2oä¸­é€‰æ‹©ä¼˜åŒ–æ–¹æ³•ä¸€å…±éœ€è¦ä¸‰ä¸ªæ­¥éª¤ï¼š</strong></p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªçº¿æ€§æ±‚è§£å™¨LinearSolverã€‚ä» PCG, CSparse, Choldmodä¸­é€‰ï¼Œå®é™…åˆ™æ¥è‡ª g2o/solvers æ–‡ä»¶å¤¹ä¸­å®šä¹‰çš„å†…å®¹ã€‚</li>
<li>åˆ›å»ºBlockSolverï¼Œå¹¶ç”¨ä¸Šé¢å®šä¹‰çš„çº¿æ€§æ±‚è§£å™¨åˆå§‹åŒ–ã€‚</li>
<li>åˆ›å»ºæ€»æ±‚è§£å™¨solverï¼Œå¹¶ä»GN/LM/DogLeg ä¸­é€‰ä¸€ä¸ªä½œä¸ºè¿­ä»£ç­–ç•¥ï¼Œå†ç”¨ä¸Šè¿°å—æ±‚è§£å™¨BlockSolveråˆå§‹åŒ–ã€‚</li>
<li>åˆ›å»ºå›¾ä¼˜åŒ–çš„æ ¸å¿ƒï¼šç¨€ç–ä¼˜åŒ–å™¨ï¼ˆSparseOptimizerï¼‰ã€‚</li>
<li>å®šä¹‰å›¾çš„é¡¶ç‚¹å’Œè¾¹ï¼Œå¹¶æ·»åŠ åˆ°SparseOptimizerä¸­ã€‚</li>
<li>è®¾ç½®ä¼˜åŒ–å‚æ•°ï¼Œå¼€å§‹æ‰§è¡Œä¼˜åŒ–ã€‚</li>
</ol>
<h1 id="g2oä¸­å®šä¹‰çš„é¡¶ç‚¹å’Œè¾¹"><a href="#g2oä¸­å®šä¹‰çš„é¡¶ç‚¹å’Œè¾¹" class="headerlink" title="g2oä¸­å®šä¹‰çš„é¡¶ç‚¹å’Œè¾¹"></a>g2oä¸­å®šä¹‰çš„é¡¶ç‚¹å’Œè¾¹</h1><p>$g2o $æä¾›äº†è®¸å¤šå…³äº$BA $çš„èŠ‚ç‚¹å’Œè¾¹ï¼Œæˆ‘ä»¬ä¸å¿…è‡ªå·±ä»å¤´å®ç°æ‰€æœ‰çš„è®¡ç®—ã€‚<code>g2o/types/sba/types_six_dof_expmap.h</code>ä¸­åˆ™æä¾›äº†æä»£æ•°è¡¨è¾¾çš„èŠ‚ç‚¹å’Œè¾¹ã€‚</p>
<p>å› ä¸ºåœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼ˆäºŒç»´ç©ºé—´ï¼Œä¸‰ç»´ç©ºé—´ï¼‰ï¼Œæœ‰ä¸åŒçš„å¾…ä¼˜åŒ–å˜é‡ï¼ˆä½å§¿ï¼Œç©ºé—´ç‚¹ï¼‰ï¼Œè¿˜æ¶‰åŠä¸åŒçš„ä¼˜åŒ–ç±»å‹ï¼ˆæä»£æ•°ä½å§¿ã€æç¾¤ä½å§¿ï¼‰ï¼Œg2oæœ¬èº«å†…éƒ¨å®šä¹‰äº†ä¸€äº›å¸¸ç”¨çš„é¡¶ç‚¹ç±»å‹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">VertexSE2 : <span class="keyword">public</span> BaseVertex&lt;<span class="number">3</span>, SE2&gt;  <span class="comment">//2Dä½å§¿é¡¶ç‚¹, (x,y,theta)</span></span><br><span class="line">VertexSE3 : <span class="keyword">public</span> BaseVertex&lt;<span class="number">6</span>, Isometry3&gt;  <span class="comment">//6d vector (x,y,z,qx,qy,qz) è¯·æ³¨æ„ï¼Œæˆ‘ä»¬çœç•¥äº†å››å…ƒæ•°çš„ w éƒ¨åˆ†</span></span><br><span class="line">VertexPointXY : <span class="keyword">public</span> BaseVertex&lt;<span class="number">2</span>, Vector2&gt;</span><br><span class="line">VertexPointXYZ : <span class="keyword">public</span> BaseVertex&lt;<span class="number">3</span>, Vector3&gt;</span><br><span class="line">VertexSBAPointXYZ : <span class="keyword">public</span> BaseVertex&lt;<span class="number">3</span>, Vector3&gt;</span><br><span class="line"></span><br><span class="line">VertexSE3Expmap : <span class="keyword">public</span> BaseVertex&lt;<span class="number">6</span>, SE3Quat&gt;</span><br><span class="line">VertexCam : <span class="keyword">public</span> BaseVertex&lt;<span class="number">6</span>, SBACam&gt;</span><br><span class="line">VertexSim3Expmap : <span class="keyword">public</span> BaseVertex&lt;<span class="number">7</span>, Sim3&gt;</span><br></pre></td></tr></table></figure>
<h2 id="é¡¶ç‚¹Vertex"><a href="#é¡¶ç‚¹Vertex" class="headerlink" title="é¡¶ç‚¹Vertex"></a>é¡¶ç‚¹Vertex</h2><p>g2oä¸­é¡¶ç‚¹ä¸º<strong>å¾…ä¼˜åŒ–å˜é‡</strong>ï¼Œè¾¹ä¸º<strong>è¯¯å·®é¡¹</strong>ï¼Œç»¼åˆä¹‹å‰æ‰€æåˆ°çš„éçº¿æ€§ä¼˜åŒ–çš„åº”ç”¨ï¼š</p>
<ul>
<li><p>æ±‚è§£$PnP$</p>
<ul>
<li>å¾…ä¼˜åŒ–çš„å˜é‡æ˜¯ï¼šç›¸æœºçš„ä½å§¿ä»¥åŠæ‰€æœ‰çš„ç‰¹å¾ç‚¹çš„ç©ºé—´ä½ç½®$P$</li>
<li>è¯¯å·®é¡¹ï¼šé‡æŠ•å½±è¯¯å·® $Î¾^{*}=arg \underset{Î¾}{min}\frac{1}{2}\sum^n_{i=1}\parallel u_i-\frac{1} {s_i}Kexp(Î¾^{\land})P_i\parallel^2_2$</li>
</ul>
</li>
<li><p>æ±‚è§£$ICP$</p>
<ul>
<li>å¾…ä¼˜åŒ–çš„å˜é‡æ˜¯ï¼šç›¸æœºçš„ä½å§¿ä»¥åŠæ‰€æœ‰çš„ç‰¹å¾ç‚¹çš„ç©ºé—´ä½ç½®$P$</li>
<li>è¯¯å·®é¡¹ï¼šé‡æŠ•å½±è¯¯å·®$\underset{\xi}{min}=\frac{1}{2}\sum^n_{i=1}\parallel (p_i - exp(\xi^{\land})p^{\prime}_i) \parallel^2_2$</li>
</ul>
</li>
</ul>
<h3 id="VertexSE3Expmap"><a href="#VertexSE3Expmap" class="headerlink" title="VertexSE3Expmap"></a><code>VertexSE3Expmap</code></h3><p>VertexSE3Expmap(æä»£æ•°ä½å§¿)</p>
<p>ç»§æ‰¿äº<code>BaseVertex</code>è¿™ä¸ªæ¨¡æ¿ç±»<br>éœ€è¦è®¾ç½®çš„æ¨¡æ¿å‚æ•°ï¼š</p>
<ul>
<li>å‚æ•°<code>6</code> ï¼šè¡¨ç¤ºå®ƒå†…éƒ¨å­˜å‚¨çš„ä¼˜åŒ–å˜é‡ç»´åº¦ã€‚å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ª 6 ç»´çš„æä»£æ•°ã€‚ï¼Œå‰ä¸‰ç»´è¡¨ç¤ºæ—‹è½¬ï¼Œåä¸‰ç»´è¡¨ç¤ºå¹³ç§»</li>
<li>å‚æ•°<code>SE3Quat</code> ï¼šè¡¨ç¤ºä¼˜åŒ–å˜é‡çš„ç±»å‹ã€‚è¿™é‡Œä½¿ç”¨äº† g2o å®šä¹‰çš„ç›¸æœºä½å§¿ï¼š SE3Quatã€‚è¿™ä¸ªç±»å†…éƒ¨ä½¿ç”¨äº†å››å…ƒæ•°åŠ ä½ç§»å‘é‡æ¥å­˜å‚¨ä½å§¿ï¼Œä½†åŒæ—¶ä¹Ÿæ”¯æŒæä»£æ•°ä¸Šçš„è¿ç®—ï¼Œä¾‹å¦‚å¯¹æ•°æ˜ å°„ï¼ˆlog å‡½æ•°ï¼‰å’Œæä»£æ•°ä¸Šå¢é‡ï¼ˆupdate å‡½æ•°ï¼‰ç­‰æ“ä½œã€‚</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G2O_TYPES_SBA_API</span> <span class="title">VertexSE3Expmap</span> :</span> <span class="keyword">public</span> BaseVertex&lt;<span class="number">6</span>, SE3Quat&gt; </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span></span><br><span class="line"><span class="function">        <span class="title">VertexSE3Expmap</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">read</span><span class="params">(std::istream&amp; is)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">write</span><span class="params">(std::ostream&amp; os)</span> <span class="keyword">const</span></span>;</span><br><span class="line">    <span class="comment">// é¡¶ç‚¹é‡ç½®å‡½æ•°ï¼Œè®¾å®šè¢«ä¼˜åŒ–å˜é‡çš„åŸå§‹å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setToOriginImpl</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _estimate = <span class="built_in">SE3Quat</span>(); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é¡¶ç‚¹æ›´æ–°å‡½æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–è¿‡ç¨‹ä¸­å¢é‡â–³xçš„è®¡ç®—</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">oplusImpl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">number_t</span>* update_)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">          <span class="function">Eigen::Map&lt;<span class="keyword">const</span> Vector6&gt; <span class="title">update</span><span class="params">(update_)</span></span>;</span><br><span class="line">          <span class="built_in">setEstimate</span>(SE3Quat::<span class="built_in">exp</span>(update) * <span class="built_in">estimate</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    .....</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‚æ•°è®¾ç½®"><a href="#å‚æ•°è®¾ç½®" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h4><p>ä½¿ç”¨æ—¶éœ€è¦è®¾ç½®çš„å‚æ•°ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰ä½¿ç”¨$PnP$ä¼˜åŒ–ç¬¬äºŒä¸ªç›¸æœºçš„ä½å§¿çš„æ—¶è®¾ç½®çš„å‚æ•°å†…å®¹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">g2o::VertexSE3Expmap *pose = <span class="keyword">new</span> g2o::<span class="built_in">VertexSE3Expmap</span>();</span><br><span class="line">Eigen::Matrix3d R_mat;</span><br><span class="line">R_mat &lt;&lt; </span><br><span class="line">    R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">2</span>),</span><br><span class="line">    R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">    R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">pose-&gt;<span class="built_in">setId</span>(<span class="number">0</span>); <span class="comment">// è®¾ç½®Idå·</span></span><br><span class="line">pose-&gt;<span class="built_in">setEstimate</span>(g2o::<span class="built_in">SE3Quat</span>( <span class="comment">// è®¾ç½®å¾…ä¼˜åŒ–ä½å§¿R,t</span></span><br><span class="line">    R_mat,</span><br><span class="line">    Eigen::<span class="built_in">Vector3d</span>(t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">0</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">0</span>))ã€</span><br><span class="line">));</span><br><span class="line">optimizer.<span class="built_in">addVertex</span>(pose); <span class="comment">// å‘ä¸€ä¸ªå›¾ä¸­æ·»åŠ é¡¶ç‚¹</span></span><br></pre></td></tr></table></figure>
<h3 id="VertexPointXYZ"><a href="#VertexPointXYZ" class="headerlink" title="VertexPointXYZ"></a><code>VertexPointXYZ</code></h3><p>VertexPointXYZ(ç©ºé—´ç‚¹ä½ç½®)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G2O_TYPES_SLAM3D_API</span> <span class="title">VertexPointXYZ</span> :</span> <span class="keyword">public</span> BaseVertex&lt;<span class="number">3</span>, Vector3&gt; </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW;</span><br><span class="line">    <span class="built_in">VertexPointXYZ</span>() &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(std::istream&amp; is)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(std::ostream&amp; os)</span> <span class="keyword">const</span></span>;</span><br><span class="line">	<span class="comment">// é¡¶ç‚¹é‡ç½®å‡½æ•°ï¼Œè®¾å®šè¢«ä¼˜åŒ–å˜é‡çš„åŸå§‹å€¼ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setToOriginImpl</span><span class="params">()</span> </span>&#123; _estimate.<span class="built_in">fill</span>(<span class="number">0.</span>); &#125;</span><br><span class="line">	<span class="comment">// é¡¶ç‚¹æ›´æ–°å‡½æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–è¿‡ç¨‹ä¸­å¢é‡â–³xçš„è®¡ç®—</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">oplusImpl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">number_t</span>* update_)</span> </span>&#123;</span><br><span class="line">        <span class="function">Eigen::Map&lt;<span class="keyword">const</span> Vector3&gt; <span class="title">update</span><span class="params">(update_)</span></span>;</span><br><span class="line">        _estimate += update;</span><br><span class="line">    &#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‚æ•°è®¾ç½®-1"><a href="#å‚æ•°è®¾ç½®-1" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h4><p>ä½¿ç”¨æ—¶éœ€è¦è®¾ç½®çš„å‚æ•°ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰ä½¿ç”¨$PnP$ä¼˜åŒ–æ‰€æœ‰ç‰¹å¾ç‚¹çš„ç©ºé—´ä½ç½®Pæ—¶ï¼Œè®¾ç½®çš„å‚æ•°å†…å®¹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¼˜åŒ–æ‰€æœ‰ç‰¹å¾ç‚¹çš„ç©ºé—´ä½ç½® P</span></span><br><span class="line"><span class="keyword">int</span> index = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> Point3f p : points_3d)</span><br><span class="line">&#123;</span><br><span class="line">    g2o::VertexPointXYZ *point = <span class="keyword">new</span> g2o::<span class="built_in">VertexPointXYZ</span>();</span><br><span class="line">    point-&gt;<span class="built_in">setId</span>(index++); <span class="comment">// è®¾ç½®Idå·</span></span><br><span class="line">    point-&gt;<span class="built_in">setEstimate</span>(Eigen::<span class="built_in">Vector3d</span>(p.x, p.y, p.z));<span class="comment">// è®¾ç½®å¾…ä¼˜åŒ–ç©ºé—´ç‚¹3Dä½ç½®XYZ</span></span><br><span class="line">    point-&gt;<span class="built_in">setMarginalized</span>(<span class="literal">true</span>); <span class="comment">// æ˜¯å¦è¾¹ç¼˜åŒ–ï¼ˆä»¥ä¾¿ç¨€ç–åŒ–æ±‚è§£ï¼‰g2oä¸­å¿…é¡»è®¾ç½® marg å‚è§ç¬¬åè®²å†…å®¹</span></span><br><span class="line">    optimizer.<span class="built_in">addVertex</span>(point); <span class="comment">// å‘ä¸€ä¸ªå›¾ä¸­æ·»åŠ é¡¶ç‚¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¾¹Edge"><a href="#è¾¹Edge" class="headerlink" title="è¾¹Edge"></a>è¾¹Edge</h2><p>BaseUnaryEdgeï¼ŒBaseBinaryEdgeï¼ŒBaseMultiEdge åˆ†åˆ«è¡¨ç¤ºä¸€å…ƒè¾¹ï¼Œä¸¤å…ƒè¾¹ï¼Œå¤šå…ƒè¾¹ã€‚ä¸€å…ƒè¾¹å¯ä»¥ç†è§£ä¸ºä¸€æ¡è¾¹åªè¿æ¥ä¸€ä¸ªé¡¶ç‚¹ï¼Œä¸¤å…ƒè¾¹ç†è§£ä¸ºä¸€æ¡è¾¹è¿æ¥ä¸¤ä¸ªé¡¶ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„è¾¹å•¦ï¼Œå¤šå…ƒè¾¹ç†è§£ä¸ºä¸€æ¡è¾¹å¯ä»¥è¿æ¥å¤šä¸ªï¼ˆ3ä¸ªä»¥ä¸Šï¼‰é¡¶ç‚¹</p>
<p><img src="/images/g2oä¸­å…³äºBAçš„èŠ‚ç‚¹ä¸è¾¹/5c7df32d30e9d.png" alt=""></p>
<h3 id="EdgeProjectXYZ2UV"><a href="#EdgeProjectXYZ2UV" class="headerlink" title="EdgeProjectXYZ2UV"></a>EdgeProjectXYZ2UV</h3><p>EdgeProjectXYZ2UV(é‡æŠ•å½±è¯¯å·®)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G2O_TYPES_SBA_API</span> <span class="title">EdgeProjectXYZ2UV</span> :</span> <span class="keyword">public</span> BaseBinaryEdge&lt;<span class="number">2</span>, Vector2, VertexPointXYZ, VertexSE3Expmap&gt; </span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW;</span><br><span class="line">    <span class="comment">//1. é»˜è®¤åˆå§‹åŒ–</span></span><br><span class="line">    <span class="built_in">EdgeProjectXYZ2UV</span>();</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">read</span><span class="params">(std::istream&amp; is)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">write</span><span class="params">(std::ostream&amp; os)</span> <span class="keyword">const</span></span>;</span><br><span class="line">    <span class="comment">//2. è®¡ç®—è¯¯å·®</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span>; <span class="comment">// ä½¿ç”¨å½“å‰é¡¶ç‚¹çš„å€¼è®¡ç®—çš„æµ‹é‡å€¼ä¸çœŸå®çš„æµ‹é‡å€¼ä¹‹é—´çš„è¯¯å·®</span></span><br><span class="line">    <span class="comment">//3. çº¿æ€§å¢é‡å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯é›…å…‹æ¯”çŸ©é˜µJçš„è®¡ç®—æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">linearizeOplus</span><span class="params">()</span></span>; <span class="comment">// åœ¨å½“å‰é¡¶ç‚¹çš„å€¼ä¸‹ï¼Œè¯¥è¯¯å·®å¯¹ä¼˜åŒ–å˜é‡çš„åå¯¼æ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„Jacobian</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">//ç›¸æœºå‚æ•°</span></span><br><span class="line">  CameraParameters* _cam;  <span class="comment">// TODO make protected member?</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸ªäºŒå…ƒè¾¹ã€‚ç¬¬1ä¸ªå‚æ•°2æ˜¯è¯´è§‚æµ‹å€¼æ˜¯2ç»´çš„ï¼Œä¹Ÿå°±æ˜¯å›¾åƒåƒç´ åæ ‡x,yçš„å·®å€¼ï¼Œå³$ z âˆ’ h(Î¾, P )$ï¼Œå¯¹åº”è§‚æµ‹å€¼çš„ç±»å‹æ˜¯Vector2Dï¼Œä¸¤ä¸ªé¡¶ç‚¹ä¹Ÿå°±æ˜¯ä¼˜åŒ–å˜é‡åˆ†åˆ«æ˜¯ä¸‰ç»´ç‚¹ VertexPointXYZï¼Œå’Œæç¾¤ä½å§¿VertexSE3Expmap</p>
<h4 id="computeError"><a href="#computeError" class="headerlink" title="computeError()"></a>computeError()</h4><p>å¯¹åº”çš„<code>computeError()</code>çš„å®ç°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">EdgeProjectXYZ2UV::computeError</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> VertexSE3Expmap* v1 = <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> VertexSE3Expmap*&gt;(_vertices[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">const</span> VertexPointXYZ* v2 = <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> VertexPointXYZ*&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">const</span> CameraParameters* cam =</span><br><span class="line">      <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> CameraParameters*&gt;(<span class="built_in">parameter</span>(<span class="number">0</span>));</span><br><span class="line">  <span class="comment">// è¯¯å·® = è§‚æµ‹ - æŠ•å½±</span></span><br><span class="line">  _error = <span class="built_in">measurement</span>() - cam-&gt;<span class="built_in">cam_map</span>(v1-&gt;<span class="built_in">estimate</span>().<span class="built_in">map</span>(v2-&gt;<span class="built_in">estimate</span>()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <code>_vertices[0]</code>å¯¹åº”çš„æ˜¯ VertexPointXYZ ç±»å‹çš„é¡¶ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸‰ç»´ç‚¹ï¼Œ<code>_vertices[1]</code>å¯¹åº”çš„æ˜¯VertexSE3Expmap ç±»å‹çš„é¡¶ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä½å§¿poseã€‚å› æ­¤å‰é¢ 1 å¯¹åº”çš„å°±åº”è¯¥æ˜¯ poseï¼Œ0å¯¹åº”çš„åº”è¯¥å°±æ˜¯ä¸‰ç»´ç‚¹ã€‚</p>
<p>cam_map å‡½æ•°åŠŸèƒ½æ˜¯æŠŠç›¸æœºåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹ï¼ˆè¾“å…¥ï¼‰ç”¨å†…å‚è½¬æ¢ä¸ºå›¾åƒåæ ‡ï¼ˆè¾“å‡ºï¼‰ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Vector2 <span class="title">CameraParameters::cam_map</span><span class="params">(<span class="keyword">const</span> Vector3 &amp;trans_xyz)</span> <span class="keyword">const</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Vector2 proj = <span class="built_in">project</span>(trans_xyz);</span><br><span class="line">    Vector2 res;</span><br><span class="line">    res[<span class="number">0</span>] = proj[<span class="number">0</span>] * focal_length + principle_point[<span class="number">0</span>];</span><br><span class="line">    res[<span class="number">1</span>] = proj[<span class="number">1</span>] * focal_length + principle_point[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>.mapçš„åŠŸèƒ½æ˜¯æŠŠä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹å˜æ¢åˆ°ç›¸æœºåæ ‡ç³»</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Vector3 <span class="title">map</span><span class="params">(<span class="keyword">const</span> Vector3&amp; xyz)</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> _r * xyz + <span class="keyword">_t</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ä¸‹é¢è¿™ä¸ªä»£ç </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">v1-&gt;<span class="built_in">estimate</span>().<span class="built_in">map</span>(v2-&gt;<span class="built_in">estimate</span>())</span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯ç”¨V1ä¼°è®¡çš„poseæŠŠV2ä»£è¡¨çš„ä¸‰ç»´ç‚¹ï¼Œå˜æ¢åˆ°ç›¸æœºåæ ‡ç³»ä¸‹ã€‚</p>
<h4 id="linearizeOplus"><a href="#linearizeOplus" class="headerlink" title="linearizeOplus()"></a>linearizeOplus()</h4><p>å¯¹åº”çš„<code>linearizeOplus()</code>çš„å®ç°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">EdgeProjectXYZ2UV::linearizeOplus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  VertexSE3Expmap* vj = <span class="keyword">static_cast</span>&lt;VertexSE3Expmap*&gt;(_vertices[<span class="number">1</span>]);</span><br><span class="line">  <span class="function">SE3Quat <span class="title">T</span><span class="params">(vj-&gt;estimate())</span></span>;</span><br><span class="line">  VertexPointXYZ* vi = <span class="keyword">static_cast</span>&lt;VertexPointXYZ*&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">  Vector3 xyz = vi-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">  Vector3 xyz_trans = T.<span class="built_in">map</span>(xyz);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">number_t</span> x = xyz_trans[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">number_t</span> y = xyz_trans[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">number_t</span> z = xyz_trans[<span class="number">2</span>];</span><br><span class="line">  <span class="keyword">number_t</span> z_2 = z * z;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> CameraParameters* cam =</span><br><span class="line">      <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> CameraParameters*&gt;(<span class="built_in">parameter</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">  Eigen::Matrix&lt;<span class="keyword">number_t</span>, <span class="number">2</span>, <span class="number">3</span>, Eigen::ColMajor&gt; tmp;</span><br><span class="line">  <span class="built_in">tmp</span>(<span class="number">0</span>, <span class="number">0</span>) = cam-&gt;focal_length;</span><br><span class="line">  <span class="built_in">tmp</span>(<span class="number">0</span>, <span class="number">1</span>) = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">tmp</span>(<span class="number">0</span>, <span class="number">2</span>) = -x / z * cam-&gt;focal_length;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">tmp</span>(<span class="number">1</span>, <span class="number">0</span>) = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">tmp</span>(<span class="number">1</span>, <span class="number">1</span>) = cam-&gt;focal_length;</span><br><span class="line">  <span class="built_in">tmp</span>(<span class="number">1</span>, <span class="number">2</span>) = -y / z * cam-&gt;focal_length;</span><br><span class="line"></span><br><span class="line">  _jacobianOplusXi = <span class="number">-1.</span> / z * tmp * T.<span class="built_in">rotation</span>().<span class="built_in">toRotationMatrix</span>();</span><br><span class="line"></span><br><span class="line">  _jacobianOplusXj(<span class="number">0</span>, <span class="number">0</span>) = x * y / z_2 * cam-&gt;focal_length;</span><br><span class="line">  _jacobianOplusXj(<span class="number">0</span>, <span class="number">1</span>) = -(<span class="number">1</span> + (x * x / z_2)) * cam-&gt;focal_length;</span><br><span class="line">  _jacobianOplusXj(<span class="number">0</span>, <span class="number">2</span>) = y / z * cam-&gt;focal_length;</span><br><span class="line">  _jacobianOplusXj(<span class="number">0</span>, <span class="number">3</span>) = <span class="number">-1.</span> / z * cam-&gt;focal_length;</span><br><span class="line">  _jacobianOplusXj(<span class="number">0</span>, <span class="number">4</span>) = <span class="number">0</span>;</span><br><span class="line">  _jacobianOplusXj(<span class="number">0</span>, <span class="number">5</span>) = x / z_2 * cam-&gt;focal_length;</span><br><span class="line"></span><br><span class="line">  _jacobianOplusXj(<span class="number">1</span>, <span class="number">0</span>) = (<span class="number">1</span> + y * y / z_2) * cam-&gt;focal_length;</span><br><span class="line">  _jacobianOplusXj(<span class="number">1</span>, <span class="number">1</span>) = -x * y / z_2 * cam-&gt;focal_length;</span><br><span class="line">  _jacobianOplusXj(<span class="number">1</span>, <span class="number">2</span>) = -x / z * cam-&gt;focal_length;</span><br><span class="line">  _jacobianOplusXj(<span class="number">1</span>, <span class="number">3</span>) = <span class="number">0</span>;</span><br><span class="line">  _jacobianOplusXj(<span class="number">1</span>, <span class="number">4</span>) = <span class="number">-1.</span> / z * cam-&gt;focal_length;</span><br><span class="line">  _jacobianOplusXj(<span class="number">1</span>, <span class="number">5</span>) = y / z_2 * cam-&gt;focal_length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆå‘˜å˜é‡<code>_jacobianOplusXi</code>æ˜¯<strong>è¯¯å·®åˆ°ç©ºé—´ç‚¹çš„å¯¼æ•°</strong>ï¼Œ<code>_jacobianOplusXj</code>æ˜¯è¯¯<strong>å·®åˆ°ç›¸æœºä½å§¿çš„å¯¼æ•°</strong>ï¼Œä»¥æä»£æ•°çš„å·¦ä¹˜æ‰°åŠ¨è¡¨è¾¾ã€‚ç¨æœ‰å·®åˆ«çš„æ˜¯ï¼Œg2o çš„ç›¸æœºé‡Œç”¨ $f$ ç»Ÿä¸€æè¿° $f_x , f_y$ ï¼Œå¹¶ä¸”æä»£æ•°å®šä¹‰é¡ºåºä¸åŒï¼ˆg2o æ˜¯æ—‹è½¬åœ¨å‰ï¼Œå¹³ç§»åœ¨åï¼›æˆ‘ä»¬æ˜¯å¹³ç§»åœ¨å‰ï¼Œæ—‹è½¬åœ¨åï¼‰ï¼Œæ‰€ä»¥çŸ©é˜µå‰ä¸‰åˆ—å’Œåä¸‰åˆ—ä¸æˆ‘ä»¬çš„å®šä¹‰æ˜¯é¢ å€’çš„ã€‚æ­¤å¤–éƒ½æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>æä»£æ•°å®šä¹‰çš„$J$ï¼šï¼ˆï¼‰</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial e}{\partial \delta \xi}&=
\frac{\partial e}{\partial P^â€²}
\frac{\partial P^â€²}{\partial \delta \xi}\\&=-
\begin{bmatrix}
\frac{f_x}{Z^â€²}&0&-\frac{f_xX^â€²}{Z^{â€²2}}
&-\frac{f_xX^â€²Y^â€²}{Z^{â€²2}}&f_x+\frac{f_xX^2}{Z^{â€²2}}&-\frac{f_xY^â€²}{Z^{â€²}}
\\
0&\frac{f_y}{Z^â€²}&-\frac{f_yY^â€²}{Z^{â€²2}}
&-f_y-\frac{f_yY^{â€²2}}{Z^{â€²2}}&\frac{f_yX^â€²Y^â€²}{Z^{â€²}}&-\frac{f_yX^â€²}{Z^{â€²}}
\end{bmatrix}\\&=
J
\end{align*}</script><p>è€Œg2oä¸­çš„$J$å®šä¹‰çš„æ–¹å¼å¦‚ä¸‹ï¼šï¼ˆæ—‹è½¬åœ¨å‰ï¼Œå¹³ç§»åœ¨åï¼‰</p>
<script type="math/tex; mode=display">
-
\begin{bmatrix}
-\frac{f_xX^â€²Y^â€²}{Z^{â€²2}}&f_x+\frac{f_xX^2}{Z^{â€²2}}&-\frac{f_xY^â€²}{Z^{â€²}}
&\frac{f_x}{Z^â€²}&0&-\frac{f_xX^â€²}{Z^{â€²2}}
\\
-f_y-\frac{f_yY^{â€²2}}{Z^{â€²2}}&\frac{f_yX^â€²Y^â€²}{Z^{â€²}}&-\frac{f_yX^â€²}{Z^{â€²}}
&0&\frac{f_y}{Z^â€²}&-\frac{f_yY^â€²}{Z^{â€²2}}
\end{bmatrix}</script><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬äº¦å¯è‡ªå·±å®ç°ç›¸æœºä½å§¿èŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨<code>Sophus::SE3</code>æ¥è¡¨è¾¾ä½å§¿ï¼Œæä¾›ç±»ä¼¼çš„æ±‚å¯¼è¿‡ç¨‹ã€‚ç„¶è€Œï¼Œæ—¢ç„¶ g2o å·²ç»æä¾›äº†è¿™æ ·çš„ç±»ï¼Œåœ¨æ²¡æœ‰é¢å¤–è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œè‡ªå·±é‡æ–°å®ç°å°±æ²¡æœ‰å¿…è¦äº†ã€‚</p>
<p>ä½¿ç”¨æ—¶éœ€è¦è®¾ç½®çš„å‚æ•°ï¼Œä»¥$PnP$ä¸­é‡æŠ•å½±è¯¯å·®ä¸ºä¾‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2.è®¾ç½®è¾¹(æ¯ä¸ª 3D ç‚¹åœ¨ç¬¬äºŒä¸ªç›¸æœºä¸­çš„æŠ•å½±)</span></span><br><span class="line">index = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> Point2f p : points_2d)</span><br><span class="line">&#123;</span><br><span class="line">    g2o::EdgeProjectXYZ2UV *edge = <span class="keyword">new</span> g2o::<span class="built_in">EdgeProjectXYZ2UV</span>();</span><br><span class="line">    edge-&gt;<span class="built_in">setId</span>(index); <span class="comment">//å®šä¹‰è¾¹çš„ç¼–å·ï¼ˆå†³å®šäº†åœ¨HçŸ©é˜µä¸­çš„ä½ç½®ï¼‰</span></span><br><span class="line">    edge-&gt;<span class="built_in">setVertex</span>(<span class="number">0</span>, <span class="keyword">dynamic_cast</span>&lt;g2o::VertexPointXYZ *&gt;(optimizer.<span class="built_in">vertex</span>(index)));</span><br><span class="line">    edge-&gt;<span class="built_in">setVertex</span>(<span class="number">1</span>, pose); <span class="comment">// å®šä¹‰é¡¶ç‚¹</span></span><br><span class="line">    edge-&gt;<span class="built_in">setMeasurement</span>(Eigen::<span class="built_in">Vector2d</span>(p.x, p.y)); <span class="comment">// å®šä¹‰è§‚æµ‹å€¼</span></span><br><span class="line">    edge-&gt;<span class="built_in">setParameterId</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    edge-&gt;<span class="built_in">setInformation</span>(Eigen::Matrix2d::<span class="built_in">Identity</span>()) ; <span class="comment">// å®šä¹‰åæ–¹å·®çŸ©é˜µçš„é€†</span></span><br><span class="line">    optimizer.<span class="built_in">addEdge</span>(edge);</span><br><span class="line">    index++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è‡ªå®šä¹‰é¡¶ç‚¹ç±»å‹"><a href="#è‡ªå®šä¹‰é¡¶ç‚¹ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰é¡¶ç‚¹ç±»å‹"></a>è‡ªå®šä¹‰é¡¶ç‚¹ç±»å‹</h1><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç”¨çš„é¡¶ç‚¹å·²ç»æä¾›ï¼Œåˆ™ç›´æ¥ä½¿ç”¨å³å¯ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çš„é¡¶ç‚¹ç±»å‹è¿™é‡Œé¢æ²¡æœ‰ï¼Œå°±å¾—è‡ªå·±å®šä¹‰äº†ã€‚é‡æ–°å®šä¹‰é¡¶ç‚¹ä¸€èˆ¬éœ€è¦è€ƒè™‘é‡å†™å¦‚ä¸‹å‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é¡¶ç‚¹é‡ç½®å‡½æ•°ï¼Œè®¾å®šè¢«ä¼˜åŒ–å˜é‡çš„åŸå§‹å€¼ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setToOriginImpl</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// é¡¶ç‚¹æ›´æ–°å‡½æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–è¿‡ç¨‹ä¸­å¢é‡â–³xçš„è®¡ç®—</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">oplusImpl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">number_t</span>* update)</span></span>;</span><br><span class="line"><span class="comment">// è¯»ç›˜ã€å­˜ç›˜å‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦è¿›è¡Œè¯»/å†™æ“ä½œçš„è¯ï¼Œä»…ä»…å£°æ˜ä¸€ä¸‹å°±å¯ä»¥</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(std::istream&amp; is)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(std::ostream&amp; os)</span> <span class="keyword">const</span></span>;</span><br></pre></td></tr></table></figure>
<p><code>virtual void setToOriginImpl();</code>é¡¶ç‚¹é‡ç½®å‡½æ•°ï¼Œè®¾å®šè¢«ä¼˜åŒ–å˜é‡çš„åŸå§‹å€¼ã€‚</p>
<p><code>virtual void oplusImpl(const number_t* update);</code>é¡¶ç‚¹æ›´æ–°å‡½æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–è¿‡ç¨‹ä¸­å¢é‡â–³xçš„è®¡ç®—ã€‚æˆ‘ä»¬æ ¹æ®å¢é‡æ–¹ç¨‹è®¡ç®—å‡ºå¢é‡ä¹‹åï¼Œå°±æ˜¯é€šè¿‡è¿™ä¸ªå‡½æ•°å¯¹ä¼°è®¡å€¼è¿›è¡Œè°ƒæ•´çš„ã€‚</p>
<p>è‡ªå®šä¹‰é¡¶ç‚¹çš„æ ¼å¼ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myVertex</span>:</span> <span class="keyword">public</span> g2::BaseVertex&lt;Dim, Type&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">myVertex</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(std::istream&amp; is)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(std::ostream&amp; os)</span> <span class="keyword">const</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setOriginImpl</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    _estimate = <span class="built_in">Type</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">oplusImpl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">double</span>* update)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    _estimate += <span class="comment">/*update*/</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è‡ªå®šä¹‰è¾¹çš„ç±»å‹"><a href="#è‡ªå®šä¹‰è¾¹çš„ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰è¾¹çš„ç±»å‹"></a>è‡ªå®šä¹‰è¾¹çš„ç±»å‹</h1><p>åœ¨ä½¿ç”¨BAæ±‚è§£ICPçš„å®è·µä¸­,ä½¿ç”¨çš„æ˜¯3D-3Dçš„è¾¹,ç”±äºg2oæœ¬èº«æ²¡æœ‰æä¾›3D-3Dçš„è¾¹,å› æ­¤éœ€è‡ªå®šä¹‰ä¸€ä¸ª3D-3Dçš„è¾¹:</p>
<p>è‡ªå®šä¹‰è¾¹æ ¼å¼</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myEdge</span> :</span> <span class="keyword">public</span> g2o::BaseUnaryEdge&lt;n,Dim, Type&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ç»“æ„ä½“åŒ…å«eigenæˆå‘˜å¿…é¡»è¿›è¡Œå®å®šä¹‰ EIGEN_MAKE_ALIGNED_OPERATOR_NEW, ä¿è¯å†…å­˜å¯¹é½</span></span><br><span class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW;</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">myEdge</span>()&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†æ·»åŠ è¾¹ä¹‹å‰éœ€è¦è®¾å®šå¥½è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹çš„ç´¢å¼•ä»¥åŠè§‚æµ‹å€¼å’Œä¿¡æ¯çŸ©é˜µï¼Œ</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªå‡½æ•°åˆ™æ˜¯ä½¿ç”¨è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹å’Œè§‚æµ‹å€¼æ¥è®¡ç®—è¯¯å·®</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—é›…å…‹æ¯”çŸ©é˜µï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç»™å‡ºäº†åˆ™è¿›è¡Œè§£ææ±‚å¯¼ï¼Œä¸ç»™åˆ™è¿›è¡Œæ•°å€¼æ±‚å¯¼</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">linearizeOplus</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="comment">// å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="keyword">const</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// å±æ€§</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥æ„å»º3D-3Dçš„è¾¹ä¸ºä¾‹:</p>
<p>ä¸»è¦è€ƒè™‘ä¸¤ä¸ªå‡½æ•°çš„å®ç°</p>
<ul>
<li><p><code>virtual void computeError()</code></p>
<p> åœ¨æ·»åŠ è¾¹ä¹‹å‰éœ€è¦è®¾å®šå¥½è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹çš„ç´¢å¼•ä»¥åŠè§‚æµ‹å€¼å’Œä¿¡æ¯çŸ©é˜µï¼Œè¿™ä¸ªå‡½æ•°åˆ™æ˜¯ä½¿ç”¨è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹å’Œè§‚æµ‹å€¼æ¥è®¡ç®—è¯¯å·®</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> g2o::VertexSE3Expmap *pose = <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> g2o::VertexSE3Expmap *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">    <span class="comment">// measurement is p, point is p&#x27;</span></span><br><span class="line">    _error = _measurement - pose-&gt;<span class="built_in">estimate</span>().<span class="built_in">map</span>(_point); <span class="comment">//.mapçš„åŠŸèƒ½æ˜¯æŠŠä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹å˜æ¢åˆ°ç›¸æœºåæ ‡ç³»</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè¯¯å·®çš„å®šä¹‰æ–¹å¼,æ˜¯è€ƒè™‘ç›¸é‚»ä¸¤å¸§å›¾åƒä¹‹é—´çš„é‡æŠ•å½±è¯¯å·®,æ¯”å¦‚æˆ‘ä»¬é€šè¿‡ç‰¹å¾ç‚¹åŒ¹é…,ç¡®å®šäº†ä¸¤ä¸ªåŒ¹é…å¥½çš„ç‰¹å¾ç‚¹,$p_i$å’Œ$p_i^{\prime}$ä»–ä»¬çš„å…³ç³»ä¸º:</p>
<script type="math/tex; mode=display">
p_i = Rp_i^{\prime}+t</script><p>ç”±äºä¸€äº›å™ªå£°,æˆ‘ä»¬å‘ç°ä¾æ®æ‰€æ±‚å¾—çš„ç›¸æœºä½å§¿$R,t$å¹¶æ²¡æœ‰è¾¾åˆ°ç†æƒ³çš„å‡†ç¡®åº¦,å³$Rp_i^{\prime}+t \neq p_i$,ä»–ä»¬çš„å·®å€¼æˆ‘ä»¬å°±å®šä¹‰ä¸ºè¯¯å·®é¡¹:</p>
<script type="math/tex; mode=display">
e_i = p_i - (Rp_i^{\prime}+t)</script><p>å› æ­¤,æˆ‘ä»¬æŠŠä¼°è®¡çš„$p_i^{\prime}$çš„ä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹è½¬æ¢æˆç›¸æœºåæ ‡ç³»,å¹¶ä¸$p_i$åšå·®</p>
<ul>
<li><code>virtual void linearizeOplus()</code></li>
</ul>
<p>è®¡ç®—é›…å…‹æ¯”çŸ©é˜µï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç»™å‡ºäº†åˆ™è¿›è¡Œè§£ææ±‚å¯¼ï¼Œä¸ç»™åˆ™è¿›è¡Œæ•°å€¼æ±‚å¯¼,ä½†æ˜¯å°±ä¼˜åŒ–æ•ˆç‡è€Œè¨€,å‰è€…è®¡ç®—é€Ÿåº¦æ˜¯æ›´å¿«çš„</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¡ç®—é›…å…‹æ¯”çŸ©é˜µï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç»™å‡ºäº†åˆ™è¿›è¡Œè§£ææ±‚å¯¼ï¼Œä¸ç»™åˆ™è¿›è¡Œæ•°å€¼æ±‚å¯¼</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">linearizeOplus</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// VertexSE3Expmapï¼Œè¿™ä¸ªè¡¨ç¤ºæä»£æ•°çš„ä½å§¿ï¼›</span></span><br><span class="line">        g2o::VertexSE3Expmap *pose = <span class="keyword">static_cast</span>&lt;g2o::VertexSE3Expmap *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">        <span class="function">g2o::SE3Quat <span class="title">T</span><span class="params">(pose-&gt;estimate())</span></span>;          <span class="comment">// é¡¶ç‚¹çš„å½“å‰ä¼°è®¡</span></span><br><span class="line">        Eigen::Vector3d xyz_trans = T.<span class="built_in">map</span>(_point); <span class="comment">// .mapçš„åŠŸèƒ½æ˜¯æŠŠä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹å˜æ¢åˆ°ç›¸æœºåæ ‡ç³»</span></span><br><span class="line">        <span class="keyword">double</span> x = xyz_trans[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">double</span> y = xyz_trans[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">double</span> z = xyz_trans[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//_jacobianOplusXiæ˜¯è¯¯å·®å…³äºä¸–ç•Œåæ ‡ç³»ä¸‹åæ ‡ç‚¹çš„åå¯¼</span></span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>, <span class="number">0</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>, <span class="number">1</span>) = -z;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>, <span class="number">2</span>) = y;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>, <span class="number">3</span>) = <span class="number">-1</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>, <span class="number">4</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>, <span class="number">5</span>) = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>, <span class="number">0</span>) = z;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>, <span class="number">1</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>, <span class="number">2</span>) = -x;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>, <span class="number">3</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>, <span class="number">4</span>) = <span class="number">-1</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>, <span class="number">5</span>) = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>, <span class="number">0</span>) = -y;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>, <span class="number">1</span>) = x;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>, <span class="number">2</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>, <span class="number">3</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>, <span class="number">4</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>, <span class="number">5</span>) = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="keyword">const</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Eigen::Vector3d _point;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç›®å‰ä»£ç å¾…ç†è§£â€¦â€¦</p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>g2o</tag>
      </tags>
  </entry>
  <entry>
    <title>ch7_æ±‚è§£ICPå¹¶ä½¿ç”¨BAä¼˜åŒ–</title>
    <url>/posts/12311.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>$ICP:$è¿­ä»£æœ€è¿‘ç‚¹$ï¼ˆIterative Closest Pointï¼‰$æ±‚è§£ã€‚è¯»è€…åº”è¯¥æ³¨æ„åˆ°ï¼Œ$3D-3D $ä½å§¿ä¼°è®¡é—®é¢˜ä¸­ï¼Œå¹¶æ²¡æœ‰å‡ºç°ç›¸æœºæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»…è€ƒè™‘ä¸¤ç»„ $3D $ç‚¹ä¹‹é—´çš„å˜æ¢æ—¶ï¼Œå’Œç›¸æœºå¹¶æ²¡æœ‰å…³ç³»ã€‚å› æ­¤ï¼Œåœ¨æ¿€å…‰ $SLAM $ä¸­ä¹Ÿä¼šç¢°åˆ° $ICP$ï¼Œä¸è¿‡ç”±äºæ¿€å…‰æ•°æ®ç‰¹å¾ä¸å¤Ÿä¸°å¯Œï¼Œæˆ‘ä»¬æ— ä»çŸ¥é“ä¸¤ä¸ªç‚¹é›†ä¹‹é—´çš„åŒ¹é…å…³ç³»ï¼Œåªèƒ½è®¤ä¸ºè·ç¦»æœ€è¿‘çš„ä¸¤ä¸ªç‚¹ä¸ºåŒä¸€ä¸ªï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•ç§°ä¸ºè¿­ä»£æœ€è¿‘ç‚¹ã€‚è€Œåœ¨è§†è§‰ä¸­ï¼Œç‰¹å¾ç‚¹ä¸ºæˆ‘ä»¬æä¾›äº†è¾ƒå¥½çš„åŒ¹é…å…³ç³»ï¼Œæ‰€ä»¥æ•´ä¸ªé—®é¢˜å°±å˜å¾—æ›´ç®€å•äº†ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>å’Œ $PnP$ ç±»ä¼¼ï¼Œ$ICP $çš„æ±‚è§£ä¹Ÿåˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼šåˆ©ç”¨çº¿æ€§ä»£æ•°çš„æ±‚è§£ï¼ˆä¸»è¦æ˜¯$ SVD$ï¼‰ï¼Œä»¥åŠåˆ©ç”¨éçº¿æ€§ä¼˜åŒ–æ–¹å¼çš„æ±‚è§£ï¼ˆç±»ä¼¼äº $Bundle Adjustment$ï¼‰ã€‚</p>
<h1 id="æ±‚è§£ICP"><a href="#æ±‚è§£ICP" class="headerlink" title="æ±‚è§£ICP"></a>æ±‚è§£ICP</h1><p>ICPçš„åŸç†ä¸»è¦æ˜¯é€šè¿‡ä¸¤ç»„åŒ¹é…å¥½çš„ç‚¹äº‘ï¼Œè¿›è¡Œè¿åŠ¨ä¼°è®¡ï¼Œæ±‚å¾—$R,t$çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬çŸ¥é“å¯¹äºä¸¤ç»„åŒ¹é…å¥½çš„ç‚¹äº‘ç†æƒ³æƒ…å†µä¸‹åº”è¯¥å¯ä»¥è¾¾åˆ°å®Œå…¨é‡åˆï¼Œä½†æ˜¯å®é™…ä¸Šåˆ™ä¼šæœ‰åå·®ï¼Œè€Œé‡åˆçš„ç¨‹åº¦å°±æ˜¯ä¸€ä¸ªè¯„ä»·æ ‡æ¤ï¼Œæˆ‘ä»¬é€šè¿‡æ±‚è§£ICPï¼Œå¯ä»¥å¾—åˆ°ç›¸å¯¹ä¼˜çš„$R,t$ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œæœ€ä¼˜çš„è¿åŠ¨ä¼°è®¡ï¼Œè¿™å°±æ˜¯ICPçš„åŸç†ä»¥åŠä½œç”¨ã€‚</p>
<p><img src="/images/æ±‚è§£ICPå¹¶ä½¿ç”¨BAä¼˜åŒ–/image-20220428151935615.png" alt="image-20220428151935615"></p>
<p>é‡åˆç¨‹åº¦å°±æ˜¯ä¸€ä¸ª$loss\ function$ï¼Œ</p>
<p><img src="/images/æ±‚è§£ICPå¹¶ä½¿ç”¨BAä¼˜åŒ–/image-20220428161453025.png" alt="image-20220428161453025" style="zoom:67%;" /></p>
<h2 id="SVDæ–¹æ³•"><a href="#SVDæ–¹æ³•" class="headerlink" title="SVDæ–¹æ³•"></a>SVDæ–¹æ³•</h2><h3 id="æ„å»ºæœ€å°äºŒä¹˜"><a href="#æ„å»ºæœ€å°äºŒä¹˜" class="headerlink" title="æ„å»ºæœ€å°äºŒä¹˜"></a>æ„å»ºæœ€å°äºŒä¹˜</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ç»„é…å¯¹å¥½çš„ 3D ç‚¹ï¼ˆæ¯”å¦‚æˆ‘ä»¬å¯¹ä¸¤ä¸ª RGB-D å›¾åƒè¿›è¡Œäº†åŒ¹é…ï¼‰ï¼š</p>
<script type="math/tex; mode=display">
P = \{p_1 , . . . , p_n \} \\ P^â€²= \{p^â€²_1 , . . . , p^â€²_n \}</script><p>ç°åœ¨ï¼Œæƒ³è¦æ‰¾ä¸€ä¸ªæ¬§æ°å˜æ¢ $R, tï¼Œ$ä½¿å¾—ï¼š</p>
<script type="math/tex; mode=display">
âˆ€i, p_i = Rp^â€²_i + t.</script><p>å®šä¹‰ç¬¬ $i$å¯¹ç‚¹çš„è¯¯å·®é¡¹ï¼š</p>
<script type="math/tex; mode=display">
e_i=p_i - (Rp^â€²_i + t).</script><p>æ„å»ºæœ€å°äºŒä¹˜é—®é¢˜:</p>
<script type="math/tex; mode=display">
\underset{R,t}{min}J=\frac{1}{2}\sum^n_{i=1}\parallel (p_i - (Rp^â€²_i + t)) \parallel^2_2</script><h3 id="æ±‚è§£æœ€å°äºŒä¹˜"><a href="#æ±‚è§£æœ€å°äºŒä¹˜" class="headerlink" title="æ±‚è§£æœ€å°äºŒä¹˜"></a>æ±‚è§£æœ€å°äºŒä¹˜</h3><p>é¦–å…ˆï¼Œå®šä¹‰ä¸¤ç»„ç‚¹çš„è´¨å¿ƒ(æ³¨æ„è´¨å¿ƒæ˜¯æ²¡æœ‰ä¸‹æ ‡)ï¼š</p>
<script type="math/tex; mode=display">
p=\frac{1}{n}\sum^n_{i=1}(p_i)ï¼Œp^{\prime}=\frac{1}{n}\sum^n_{i=1}(p^{\prime}_i)</script><p>åœ¨è¯¯å·®å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½œå¦‚ä¸‹çš„å¤„ç†ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{1}{2}\sum^n_{i=1}\parallel (p_i - (Rp^{\prime}_i + t)) \parallel^2
&=\frac{1}{2}\sum^n_{i=1}\parallel p_i - Rp^{\prime}_i - t-p+Rp^{\prime}+p-Rp^{\prime} \parallel^2
\\&= \frac{1}{2}\sum^n_{i=1}\parallel (p_i -p- R(p^{\prime}_i-p^{\prime}) )+(p- Rp^{\prime}+t) \parallel^2
\\&= \frac{1}{2}\sum^n_{i=1}(\parallel p_i -p- R(p^{\prime}_i-p^{\prime}) \parallel^2+
\parallel p- Rp^{\prime}+t\parallel^2
\\&+2(p_i -p-R(p^{\prime}_i-p^{\prime})^T(p-Rp^{\prime}-t))
\end{align*}</script><p>è¿™é‡Œç¬¬ä¸€æ­¥åŠ å‡è´¨å¿ƒçš„ä½œç”¨å°±æ˜¯ä¸ºäº†ç¬¬äºŒæ­¥ï¼Œç¬¬äºŒæ­¥å°†ä¸¤ç»„ç‚¹çš„æ¯ä¸€ä¸ªç‚¹äº‘åˆ†åˆ«å‡å»å„è‡ªçš„è´¨å¿ƒï¼Œä½œç”¨å°†$R,t$è§£è€¦ã€‚ä¹‹åå°±å¯ä»¥å¾—åˆ°ç¬¬ä¸‰æ­¥çš„å¼å­ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ä¸­ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
p_i-p-R(p^{\prime}_i-p^{\prime})&=(Rp^{\prime}_i+t)-(Rp^{\prime}+t)-R(p^{\prime}_i-p^{\prime})\\
&=Rp^{\prime}_i+t-Rp^{\prime}-t-Rp^{\prime}_i+Rp^{\prime}\\
&=0
\end{align*}</script><p>æ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\underset{R,t}{min}J&=\frac{1}{2}\sum^n_{i=1}\parallel (p_i - (Rp^â€²_i + t)) \parallel^2\\
&=\frac{1}{2}\sum^n_{i=1}\parallel p_i -p- R(p^{\prime}_i-p^{\prime}) \parallel^2+
\parallel p- Rp^{\prime}+t\parallel^2
\end{align*}</script><p>ä»”ç»†è§‚å¯Ÿå·¦å³ä¸¤é¡¹ï¼Œæˆ‘ä»¬å‘ç°å·¦è¾¹åªå’Œæ—‹è½¬çŸ©é˜µ R ç›¸å…³ï¼Œè€Œå³è¾¹æ—¢æœ‰ R ä¹Ÿæœ‰ tï¼Œä½†åªå’Œè´¨å¿ƒç›¸ï¼Œè¿™å°±å®Œæˆäº†è§£è€¦çš„è¿‡ç¨‹ã€‚åªè¦æˆ‘ä»¬è·å¾—äº† Rï¼Œä»¤ç¬¬äºŒé¡¹ä¸ºé›¶å°±èƒ½å¾—åˆ° tã€‚äºæ˜¯ï¼ŒICP å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤æ±‚è§£ï¼š</p>
<p>1.è®¡ç®—ä¸¤ç»„ç‚¹çš„è´¨å¿ƒä½ç½® $p$, $p^{\prime}$ï¼Œç„¶åè®¡ç®—æ¯ä¸ªç‚¹çš„å»è´¨å¿ƒåæ ‡ï¼š</p>
<script type="math/tex; mode=display">
q_i = p_i âˆ’ p,\\
q_i^{\prime} = p_i^{\prime} âˆ’ p^{\prime}  .</script><p>2.æ ¹æ®ä»¥ä¸‹ä¼˜åŒ–é—®é¢˜è®¡ç®—æ—‹è½¬çŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
R^{*}=arg\underset{R}{min}\frac{1}{2}\sum^n_{i=1}\parallel q_i - Rq_i^{\prime} \parallel^2</script><p>3.æ ¹æ®ç¬¬äºŒæ­¥çš„ $R$ï¼Œè®¡ç®— $t$ï¼š</p>
<script type="math/tex; mode=display">
t^âˆ— = p âˆ’ Rp^{\prime} .</script><p>è®¡ç®—$R$ï¼š</p>
<script type="math/tex; mode=display">
\frac{1}{2}\sum^n_{i=1}\parallel q_i - Rq_i^{\prime} \parallel^2
=\frac{1}{2}\sum^n_{i=1}q_i^{T}q_i+q_i^{\prime T}R^TRq_i^{\prime}-2q^T_iRq_i^{\prime}</script><p>ç¬¬ä¸€é¡¹å’Œ$ R$ æ— å…³ï¼Œç¬¬äºŒé¡¹ç”±äº $R^T R = I$ï¼Œäº¦ä¸ $R $æ— å…³ã€‚å› æ­¤ï¼Œå®é™…ä¸Šä¼˜åŒ–ç›®æ ‡å‡½æ•°å˜ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\sum^n_{i=1}-q_i^{T}Rq_i^{\prime}\overset{(1)}{=}
\sum^n_{i=1}-tr(q_i^{T}Rq_i^{\prime})\overset{(2)}{=}
\sum^n_{i=1}-tr(Rq_i^{\prime}q_i^{T})=
-tr(R\sum^n_{i=1}q_i^{\prime}q_i^{T})\overset{(3)}{=}-tr(RW)</script><blockquote>
<p><strong>ç­‰å¼(1)ï¼š</strong>ç”±äº${q_i^{T} }_{(1\times 3)} R_{(3\times 3)} {q_i^{\prime} }_{(3\times 1)}$æœ€ç»ˆæ±‚å¾—çš„æ˜¯ä¸€ä¸ªæ•°ï¼Œè€Œå¯¹äºä¸€ä¸ªå¸¸æ•°æ¥è¯´ï¼Œå®ƒçš„è¿¹ä»ç„¶æ˜¯å®ƒæœ¬èº«ã€‚</p>
<p><strong>ç­‰å¼(2)ï¼š</strong></p>
<script type="math/tex; mode=display">
tr(AB)=\sum^m_{i=1}\sum^n_{j=1}a_{ij}b_{ji}=\sum^m_{i=1}\sum^n_{j=1}b_{ji}a_{ij}=tr(BA)</script><p><strong>ç­‰å¼(3)ï¼š</strong></p>
<script type="math/tex; mode=display">
W=\sum^n_{i=1}q_i^{\prime}q_i^{T}</script></blockquote>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çŸ¥é“ä¼˜åŒ–å‡½æ•°å°±æ˜¯$-tr(RW)$ï¼Œ <span style="color:red;">æ‰€ä»¥è¯´æˆ‘ä»¬éœ€è¦æ±‚å¾—æœ€åˆé€‚çš„$R$ï¼Œä½¿å¾—$tr(RW)$è¾¾åˆ°æœ€å¤§å€¼ã€‚</span></p>
<p>è¿™é‡Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ª<strong>å®šç†ï¼š</strong></p>
<p><span style="color:green;">å®šç†ï¼šè‹¥æœ‰æ­£å®šçŸ©é˜µ$AA^T$ï¼Œåˆ™å¯¹äºä»»æ„æ­£äº¤çŸ©é˜µ$B$ï¼Œæœ‰$\tr(AA^T)\geq \tr(BAA^T)$</span></p>
<p>æˆ‘ä»¬å·²çŸ¥$R$æ˜¯æ­£äº¤çŸ©é˜µï¼Œ$W $æ˜¯ä¸€ä¸ª$ 3 Ã— 3 $çš„çŸ©é˜µï¼Œå¯¹$ W$ è¿›è¡Œ $SVD$ åˆ†è§£ï¼Œå¾—ï¼š</p>
<script type="math/tex; mode=display">
W = UÎ£V^T</script><p>$Î£ $ä¸ºå¥‡å¼‚å€¼ç»„æˆçš„å¯¹è§’çŸ©é˜µï¼Œå¯¹è§’çº¿å…ƒç´ ä»å¤§åˆ°å°æ’åˆ—ï¼Œè€Œ $U $å’Œ$ V$ ä¸ºæ­£äº¤çŸ©é˜µã€‚å½“ $W$ æ»¡ç§©æ—¶ï¼Œä»¤$R$ ä¸ºï¼š</p>
<script type="math/tex; mode=display">
R = VU^T</script><p>è¿™æ ·ï¼š</p>
<script type="math/tex; mode=display">
RW=VU^TUÎ£V^T=VÎ£V^T=VÎ£^{\frac{1}{2} }Î£^{\frac{1}{2} }V^T=VÎ£^{\frac{1}{2} }(VÎ£^{\frac{1}{2} })^T</script><p>æ­¤æ—¶ï¼Œæ»¡è¶³å®šç†ï¼Œä½¿å¾—$RW$è¾¾åˆ°äº†æœ€å¤§å€¼ã€‚</p>
<p>è§£å¾— $R$å,æŒ‰ç…§$t^âˆ— = p âˆ’ Rp^{\prime} .$æ±‚è§£ $t$ å³å¯ã€‚</p>
<h2 id="éçº¿æ€§ä¼˜åŒ–æ–¹æ³•"><a href="#éçº¿æ€§ä¼˜åŒ–æ–¹æ³•" class="headerlink" title="éçº¿æ€§ä¼˜åŒ–æ–¹æ³•"></a>éçº¿æ€§ä¼˜åŒ–æ–¹æ³•</h2><p>æ±‚è§£$ ICP$ çš„å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨éçº¿æ€§ä¼˜åŒ–ï¼Œä»¥è¿­ä»£çš„æ–¹å¼å»æ‰¾æœ€ä¼˜å€¼ã€‚è¯¥æ–¹æ³•å’Œæˆ‘ä»¬å‰é¢è®²è¿°çš„ $PnP $éå¸¸ç›¸ä¼¼ã€‚ä»¥æä»£æ•°è¡¨è¾¾ä½å§¿æ—¶ï¼Œç›®æ ‡å‡½æ•°å¯ä»¥å†™æˆï¼š</p>
<script type="math/tex; mode=display">
\underset{\xi}{min}=\frac{1}{2}\sum^n_{i=1}\parallel (p_i - exp(\xi^{\land})p^{\prime}_i) \parallel^2_2</script><p>å•ä¸ªè¯¯å·®é¡¹å…³äºä½å§¿å¯¼æ•°å·²ç»åœ¨å‰é¢æ¨å¯¼è¿‡äº†ï¼Œä½¿ç”¨æä»£æ•°æ‰°åŠ¨æ¨¡å‹å³å¯:</p>
<script type="math/tex; mode=display">
\frac{\partial e}{\partial \delta \xi}=-(exp(\xi^{\land}p^{\prime}_i))^{âŠ™}</script><p>ç”¨éçº¿æ€§ä¼˜åŒ–æ¥è®¡ç®—$ ICP$ä¸ä»…è€ƒè™‘ç›¸æœºçš„ä½å§¿ï¼ŒåŒæ—¶ä¼šä¼˜åŒ– $3D$ç‚¹çš„ç©ºé—´ä½ç½®ã€‚å¯¹æˆ‘ä»¬æ¥è¯´ï¼ŒRGB-D ç›¸æœºæ¯æ¬¡å¯ä»¥è§‚æµ‹åˆ°è·¯æ ‡ç‚¹çš„ä¸‰ç»´ä½ç½®ï¼Œä»è€Œäº§ç”Ÿä¸€ä¸ª$ 3D$ è§‚æµ‹æ•°æ®ã€‚ä¸è¿‡ï¼Œç”±äº$ g2o/sba$ ä¸­æ²¡æœ‰æä¾› $3D$ åˆ° $3D$ çš„è¾¹ï¼Œè€Œæˆ‘ä»¬åˆæƒ³ä½¿ç”¨$ g2o/sba $ä¸­æä»£æ•°å®ç°çš„ä½å§¿èŠ‚ç‚¹ï¼Œæ‰€ä»¥æœ€å¥½çš„æ–¹å¼æ˜¯è‡ªå®šä¹‰ä¸€ç§è¿™æ ·çš„è¾¹ï¼Œå¹¶å‘$ g2o$ æä¾›è§£ææ±‚å¯¼æ–¹å¼ã€‚</p>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="1-ç‰¹å¾ç‚¹åŒ¹é…"><a href="#1-ç‰¹å¾ç‚¹åŒ¹é…" class="headerlink" title="1. ç‰¹å¾ç‚¹åŒ¹é…"></a>1. ç‰¹å¾ç‚¹åŒ¹é…</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.ç‰¹å¾ç‚¹åŒ¹é…</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find_feature_matches</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;img_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;img_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;KeyPoint&gt; &amp;keypoints_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;KeyPoint&gt; &amp;keypoints_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;DMatch&gt; &amp;matches)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//-- åˆå§‹åŒ–</span></span><br><span class="line">    Mat descriptors_1, descriptors_2;</span><br><span class="line"></span><br><span class="line">    Ptr&lt;FeatureDetector&gt; detector = ORB::<span class="built_in">create</span>();</span><br><span class="line">    Ptr&lt;DescriptorExtractor&gt; descriptor = ORB::<span class="built_in">create</span>();</span><br><span class="line">    Ptr&lt;DescriptorMatcher&gt; matcher = DescriptorMatcher::<span class="built_in">create</span>(<span class="string">&quot;BruteForce-Hamming&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- ç¬¬ä¸€æ­¥:æ£€æµ‹ Oriented FAST è§’ç‚¹ä½ç½®</span></span><br><span class="line">    detector-&gt;<span class="built_in">detect</span>(img_1, keypoints_1);</span><br><span class="line">    detector-&gt;<span class="built_in">detect</span>(img_2, keypoints_2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- ç¬¬äºŒæ­¥:æ ¹æ®è§’ç‚¹ä½ç½®è®¡ç®— BRIEF æè¿°å­</span></span><br><span class="line">    descriptor-&gt;<span class="built_in">compute</span>(img_1, keypoints_1, descriptors_1);</span><br><span class="line">    descriptor-&gt;<span class="built_in">compute</span>(img_2, keypoints_2, descriptors_2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- ç¬¬ä¸‰æ­¥:å¯¹ä¸¤å¹…å›¾åƒä¸­çš„BRIEFæè¿°å­è¿›è¡ŒåŒ¹é…ï¼Œä½¿ç”¨ Hamming è·ç¦»</span></span><br><span class="line">    vector&lt;DMatch&gt; match;</span><br><span class="line">    matcher-&gt;<span class="built_in">match</span>(descriptors_1, descriptors_2, match);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- ç¬¬å››æ­¥:åŒ¹é…ç‚¹å¯¹ç­›é€‰</span></span><br><span class="line">    <span class="keyword">double</span> min_dist = <span class="number">10000</span>, max_dist = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//æ‰¾å‡ºæ‰€æœ‰åŒ¹é…ä¹‹é—´çš„æœ€å°è·ç¦»å’Œæœ€å¤§è·ç¦», å³æ˜¯æœ€ç›¸ä¼¼çš„å’Œæœ€ä¸ç›¸ä¼¼çš„ä¸¤ç»„ç‚¹ä¹‹é—´çš„è·ç¦»</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; descriptors_1.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> dist = match[i].distance;</span><br><span class="line">        <span class="keyword">if</span> (dist &lt; min_dist)</span><br><span class="line">            min_dist = dist;</span><br><span class="line">        <span class="keyword">if</span> (dist &gt; max_dist)</span><br><span class="line">            max_dist = dist;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;max_dist: &quot;</span> &lt;&lt; max_dist &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;min_dist: &quot;</span> &lt;&lt; min_dist &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å½“æè¿°å­ä¹‹é—´çš„è·ç¦»å¤§äºä¸¤å€çš„æœ€å°è·ç¦»æ—¶,å³è®¤ä¸ºåŒ¹é…æœ‰è¯¯.ä½†æœ‰æ—¶å€™æœ€å°è·ç¦»ä¼šéå¸¸å°,è®¾ç½®ä¸€ä¸ªç»éªŒå€¼30ä½œä¸ºä¸‹é™.</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; descriptors_1.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (match[i].distance &lt;= <span class="built_in">max</span>(<span class="number">2</span> * min_dist, <span class="number">30.0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            matches.<span class="built_in">push_back</span>(match[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-å»ºç«‹3Dç‚¹"><a href="#2-å»ºç«‹3Dç‚¹" class="headerlink" title="2.å»ºç«‹3Dç‚¹"></a>2.å»ºç«‹3Dç‚¹</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build_3d_points</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;depth_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;depth_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;K,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;KeyPoint&gt; &amp;keypoints_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;KeyPoint&gt; &amp;keypoints_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;DMatch&gt; matches,</span></span></span><br><span class="line"><span class="params"><span class="function">    vector&lt;Point3f&gt; &amp;pts1,</span></span></span><br><span class="line"><span class="params"><span class="function">    vector&lt;Point3f&gt; &amp;pts2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//æå–ç‰¹å¾ç‚¹çš„æ·±åº¦å€¼ï¼š</span></span><br><span class="line">    <span class="keyword">for</span> (DMatch m : matches)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å–å¾—åŒ¹é…ç‚¹çš„æ·±åº¦ï¼ŒqueryIdx(è¡¨ç¤ºåŒ¹é…ç‚¹çš„ç´¢å¼•)æŸ¥è¯¢æè¿°å­ç´¢å¼•ï¼Œptå…³é”®ç‚¹çš„åæ ‡ (yè¡Œåœ°å€)[xåˆ—åœ°å€]</span></span><br><span class="line">        ushort d1 = depth_1.ptr&lt;<span class="keyword">unsigned</span> <span class="keyword">short</span>&gt;(<span class="built_in"><span class="keyword">int</span></span>(keypoints_1[m.queryIdx].pt.y))[<span class="built_in"><span class="keyword">int</span></span>(keypoints_1[m.queryIdx].pt.x)];</span><br><span class="line">        ushort d2 = depth_2.ptr&lt;<span class="keyword">unsigned</span> <span class="keyword">short</span>&gt;(<span class="built_in"><span class="keyword">int</span></span>(keypoints_2[m.trainIdx].pt.y))[<span class="built_in"><span class="keyword">int</span></span>(keypoints_2[m.trainIdx].pt.x)];</span><br><span class="line">        <span class="keyword">if</span> (d1 == <span class="number">0</span> || d2 == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        Point2d p1 = <span class="built_in">pixel2cam</span>(keypoints_1[m.queryIdx].pt, K);<span class="comment">// p1:(X/Z,Y/Z,1)</span></span><br><span class="line">        Point2d p2 = <span class="built_in">pixel2cam</span>(keypoints_2[m.trainIdx].pt, K);<span class="comment">// p2:(X/Z,Y/Z,1)</span></span><br><span class="line">        <span class="keyword">float</span> dd1 = <span class="built_in"><span class="keyword">float</span></span>(d1) / <span class="number">5000.0</span>;</span><br><span class="line">        <span class="keyword">float</span> dd2 = <span class="built_in"><span class="keyword">float</span></span>(d2) / <span class="number">5000.0</span>;</span><br><span class="line">        <span class="comment">// å°†ç›¸æœºå½’ä¸€åŒ–åæ ‡è½¬æ¢ä¸ºç›¸æœºåæ ‡ç³»ä¸‹çš„3Dç»„åæ ‡</span></span><br><span class="line">        pts1.<span class="built_in">push_back</span>(<span class="built_in">Point3f</span>(p1.x * dd1, p1.y * dd1, dd1));<span class="comment">// (X,Y,Z)ç¬¬ä¸€å¸§å›¾åƒçš„3Dåæ ‡ï¼ˆç›¸æœºåæ ‡ç³»ä¸‹ï¼‰</span></span><br><span class="line">        pts2.<span class="built_in">push_back</span>(<span class="built_in">Point3f</span>(p2.x * dd2, p2.y * dd2, dd2));<span class="comment">// (X,Y,Z)ç¬¬äºŒå¸§å›¾åƒçš„3Dåæ ‡ï¼ˆç›¸æœºåæ ‡ç³»ä¸‹ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;3d-3d pairs: &quot;</span> &lt;&lt; pts1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-SVDæ±‚è§£ICP"><a href="#3-SVDæ±‚è§£ICP" class="headerlink" title="3.SVDæ±‚è§£ICP"></a>3.SVDæ±‚è§£ICP</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 3.SVDæ±‚è§£ICP</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pose_estimation_3d3d</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;Point3f&gt; &amp;pts1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;Point3f&gt; &amp;pts2,</span></span></span><br><span class="line"><span class="params"><span class="function">    Mat &amp;R, Mat &amp;t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Point3f p1, p2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> N = pts1.<span class="built_in">size</span>(); <span class="comment">// N = 72;</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        p1 += pts1[i]; <span class="comment">// p1 ä¸ºpts1åæ ‡å„ç»´ä¹‹å’Œ</span></span><br><span class="line">        p2 += pts2[i]; <span class="comment">// p2 ä¸ºpts2åæ ‡å„ç»´ä¹‹å’Œ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p1 = <span class="built_in">Point3f</span>(<span class="built_in">Vec3f</span>(p1) / N); <span class="comment">// å–å¹³å‡å¾—åˆ°è´¨å¿ƒp1</span></span><br><span class="line">    p2 = <span class="built_in">Point3f</span>(<span class="built_in">Vec3f</span>(p2) / N); <span class="comment">// å–å¹³å‡å¾—åˆ°è´¨å¿ƒp2</span></span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;Point3f&gt; <span class="title">q1</span><span class="params">(N)</span>, <span class="title">q2</span><span class="params">(N)</span></span>; <span class="comment">// remove the center</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        q1[i] = pts1[i] - p1; <span class="comment">// è®¡ç®—æ¯ä¸ªç‚¹çš„å»è´¨å¿ƒåæ ‡q1</span></span><br><span class="line">        q2[i] = pts2[i] - p2; <span class="comment">// è®¡ç®—æ¯ä¸ªç‚¹çš„å»è´¨å¿ƒåæ ‡q2</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// compute q1*q2^T</span></span><br><span class="line">    Eigen::Matrix3d W = Eigen::Matrix3d::<span class="built_in">Zero</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// w = sum(q1*q2^T)</span></span><br><span class="line">        W += Eigen::<span class="built_in">Vector3d</span>(q1[i].x, q1[i].y, q1[i].z) * Eigen::<span class="built_in">Vector3d</span>(q2[i].x, q2[i].y, q2[i].z).<span class="built_in">transpose</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;W=&quot;</span> &lt;&lt; W &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// å¯¹Wè¿›è¡ŒSVDåˆ†è§£</span></span><br><span class="line">    <span class="function">Eigen::JacobiSVD&lt;Eigen::Matrix3d&gt; <span class="title">svd</span><span class="params">(W, Eigen::ComputeFullU | Eigen::ComputeFullV)</span></span>;</span><br><span class="line">    Eigen::Matrix3d U = svd.<span class="built_in">matrixU</span>(); <span class="comment">// æ­£äº¤çŸ©é˜µU</span></span><br><span class="line">    Eigen::Matrix3d V = svd.<span class="built_in">matrixV</span>(); <span class="comment">// æ­£äº¤çŸ©é˜µV</span></span><br><span class="line">    <span class="keyword">if</span> (U.<span class="built_in">determinant</span>() * V.<span class="built_in">determinant</span>() &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">3</span>; ++x)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">U</span>(x, <span class="number">2</span>) *= <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;U=&quot;</span> &lt;&lt; U &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;V=&quot;</span> &lt;&lt; V &lt;&lt; endl;</span><br><span class="line">    Eigen::Matrix3d R_ = U * (V.<span class="built_in">transpose</span>());</span><br><span class="line">    Eigen::Vector3d t_ = Eigen::<span class="built_in">Vector3d</span>(p1.x, p1.y, p1.z) - R_ * Eigen::<span class="built_in">Vector3d</span>(p2.x, p2.y, p2.z);</span><br><span class="line"></span><br><span class="line">    R = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; </span><br><span class="line">         <span class="built_in">R_</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">R_</span>(<span class="number">0</span>, <span class="number">1</span>), <span class="built_in">R_</span>(<span class="number">0</span>, <span class="number">2</span>),</span><br><span class="line">         <span class="built_in">R_</span>(<span class="number">1</span>, <span class="number">0</span>), <span class="built_in">R_</span>(<span class="number">1</span>, <span class="number">1</span>), <span class="built_in">R_</span>(<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">         <span class="built_in">R_</span>(<span class="number">2</span>, <span class="number">0</span>), <span class="built_in">R_</span>(<span class="number">2</span>, <span class="number">1</span>), <span class="built_in">R_</span>(<span class="number">2</span>, <span class="number">2</span>));</span><br><span class="line">    t = ( Mat_&lt;<span class="keyword">double</span>&gt; ( <span class="number">3</span>,<span class="number">1</span> ) &lt;&lt; <span class="built_in">t_</span> ( <span class="number">0</span>,<span class="number">0</span> ), <span class="built_in">t_</span> ( <span class="number">1</span>,<span class="number">0</span> ), <span class="built_in">t_</span> ( <span class="number">2</span>,<span class="number">0</span> ) );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-BAä¼˜åŒ–"><a href="#4-BAä¼˜åŒ–" class="headerlink" title="4.BAä¼˜åŒ–"></a>4.BAä¼˜åŒ–</h2><h3 id="è‡ªå®šä¹‰3D-3Dçš„è¾¹"><a href="#è‡ªå®šä¹‰3D-3Dçš„è¾¹" class="headerlink" title="è‡ªå®šä¹‰3D-3Dçš„è¾¹"></a>è‡ªå®šä¹‰3D-3Dçš„è¾¹</h3><p>ç”±äº g2o/sba ä¸­æ²¡æœ‰æä¾› 3D åˆ° 3D çš„è¾¹ï¼Œè€Œæˆ‘ä»¬åˆæƒ³ä½¿ç”¨ g2o/sba ä¸­æä»£æ•°å®ç°çš„ä½å§¿èŠ‚ç‚¹ï¼Œæ‰€ä»¥æœ€å¥½çš„æ–¹å¼æ˜¯è‡ªå®šä¹‰ä¸€ç§è¿™æ ·çš„è¾¹ï¼Œå¹¶å‘ g2o æä¾›è§£ææ±‚å¯¼æ–¹å¼ã€‚</p>
<p> $J$çŸ©é˜µ:</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
0     &-z &y     &-1 &0     &0 \\
z     &0     &-x &0     &-1 &0 \\
-y     &x  &0     &0     &0     &-1
\end{bmatrix}</script><p>è‡ªå®šä¹‰ 3D åˆ° 3D çš„è¾¹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EdgeProjectXYZRGBDPoseOnly</span> :</span> <span class="keyword">public</span> g2o::BaseUnaryEdge&lt;<span class="number">3</span>, Eigen::Vector3d, g2o::VertexSE3Expmap&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ç»“æ„ä½“åŒ…å«eigenæˆå‘˜å¿…é¡»è¿›è¡Œå®å®šä¹‰ EIGEN_MAKE_ALIGNED_OPERATOR_NEW, ä¿è¯å†…å­˜å¯¹é½</span></span><br><span class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW;</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">EdgeProjectXYZRGBDPoseOnly</span>(<span class="keyword">const</span> Eigen::Vector3d &amp;point) : _point(point) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†æ·»åŠ è¾¹ä¹‹å‰éœ€è¦è®¾å®šå¥½è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹çš„ç´¢å¼•ä»¥åŠè§‚æµ‹å€¼å’Œä¿¡æ¯çŸ©é˜µï¼Œ</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªå‡½æ•°åˆ™æ˜¯ä½¿ç”¨è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹å’Œè§‚æµ‹å€¼æ¥è®¡ç®—è¯¯å·®</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> g2o::VertexSE3Expmap *pose = <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> g2o::VertexSE3Expmap *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">        <span class="comment">// measurement is p, point is p&#x27;</span></span><br><span class="line">        _error = _measurement - pose-&gt;<span class="built_in">estimate</span>().<span class="built_in">map</span>(_point); <span class="comment">// é‡æŠ•å½±è¯¯å·®</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—é›…å…‹æ¯”çŸ©é˜µï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç»™å‡ºäº†åˆ™è¿›è¡Œè§£ææ±‚å¯¼ï¼Œä¸ç»™åˆ™è¿›è¡Œæ•°å€¼æ±‚å¯¼</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">linearizeOplus</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// VertexSE3Expmapï¼Œè¿™ä¸ªè¡¨ç¤ºæä»£æ•°çš„ä½å§¿ï¼›</span></span><br><span class="line">        g2o::VertexSE3Expmap *pose = <span class="keyword">static_cast</span>&lt;g2o::VertexSE3Expmap *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">        <span class="function">g2o::SE3Quat <span class="title">T</span><span class="params">(pose-&gt;estimate())</span></span>;</span><br><span class="line">        Eigen::Vector3d xyz_trans = T.<span class="built_in">map</span>(_point); <span class="comment">// .mapçš„åŠŸèƒ½æ˜¯æŠŠä¸–ç•Œåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹å˜æ¢åˆ°ç›¸æœºåæ ‡ç³»</span></span><br><span class="line">        <span class="keyword">double</span> x = xyz_trans[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">double</span> y = xyz_trans[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">double</span> z = xyz_trans[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//_jacobianOplusXiæ˜¯è¯¯å·®å…³äºä¸–ç•Œåæ ‡ç³»ä¸‹åæ ‡ç‚¹çš„åå¯¼</span></span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>,<span class="number">0</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>,<span class="number">1</span>) = -z;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>,<span class="number">2</span>) = y;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>,<span class="number">3</span>) = <span class="number">-1</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>,<span class="number">4</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">0</span>,<span class="number">5</span>) = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>,<span class="number">0</span>) = z;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>,<span class="number">1</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>,<span class="number">2</span>) = -x;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>,<span class="number">3</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>,<span class="number">4</span>) = <span class="number">-1</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">1</span>,<span class="number">5</span>) = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>,<span class="number">0</span>) = -y;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>,<span class="number">1</span>) = x;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>,<span class="number">2</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>,<span class="number">3</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>,<span class="number">4</span>) = <span class="number">0</span>;</span><br><span class="line">        _jacobianOplusXi(<span class="number">2</span>,<span class="number">5</span>) = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="keyword">const</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Eigen::Vector3d _point;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="BAä¼˜åŒ–"><a href="#BAä¼˜åŒ–" class="headerlink" title="BAä¼˜åŒ–"></a>BAä¼˜åŒ–</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 4.BAä¼˜åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bundleAdjustment</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;Point3f&gt; &amp;pts1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;Point3f&gt; &amp;pts2,</span></span></span><br><span class="line"><span class="params"><span class="function">    Mat &amp;R, Mat &amp;t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 1.åˆå§‹åŒ–</span></span><br><span class="line">    <span class="comment">// æ¯ä¸ªè¯¯å·®é¡¹ä¼˜åŒ–å˜é‡ç»´åº¦ä¸º6(å³ä¸ºse3æä»£æ•°çš„ç»´æ•°ï¼Œå‰ä¸‰ç»´ä¸ºå¹³ç§»ï¼Œåä¸‰ç»´ä¸ºæ—‹è½¬)</span></span><br><span class="line">    <span class="comment">// è¯¯å·®å€¼ç»´åº¦ä¸º3(æ¯ä¸ª3Dç‚¹åœ¨ç¬¬äºŒä¸ªç›¸æœºä¸­çš„æŠ•å½±)</span></span><br><span class="line">    <span class="keyword">typedef</span> g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;<span class="number">6</span>, <span class="number">3</span>&gt;&gt; Block;</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–çº¿æ€§æ–¹ç¨‹æ±‚è§£å™¨:ä½¿ç”¨eigenä¸­sparse Cholesky æ±‚è§£</span></span><br><span class="line">    Block::LinearSolverType *linearSolver = <span class="keyword">new</span> g2o::LinearSolverEigen&lt;Block::PoseMatrixType&gt;();</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–çŸ©é˜µå—æ±‚è§£å™¨</span></span><br><span class="line">    Block *solver_ptr = <span class="keyword">new</span> <span class="built_in">Block</span>(unique_ptr&lt;Block::LinearSolverType&gt;(linearSolver));</span><br><span class="line">    <span class="comment">// æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼ŒGN(é«˜æ–¯ç‰›é¡¿)418133364</span></span><br><span class="line">    g2o::OptimizationAlgorithmGaussNewton *solver = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmGaussNewton</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line"></span><br><span class="line">    g2o::SparseOptimizer optimizer; <span class="comment">// åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</span></span><br><span class="line">    optimizer.<span class="built_in">setAlgorithm</span>(solver); <span class="comment">// ç”¨å‰é¢å®šä¹‰å¥½çš„æ±‚è§£å™¨ä½œä¸ºæ±‚è§£æ–¹æ³•ï¼šï¼ˆä½¿ç”¨GN(é«˜æ–¯ç‰›é¡¿)æ–¹æ³•ï¼‰</span></span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);     <span class="comment">// setVerboseæ˜¯è®¾ç½®ä¼˜åŒ–è¿‡ç¨‹è¾“å‡ºä¿¡æ¯ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.æ„å»ºé¡¶ç‚¹</span></span><br><span class="line">    g2o::VertexSE3Expmap *pose = <span class="keyword">new</span> g2o::<span class="built_in">VertexSE3Expmap</span>(); <span class="comment">// ç›¸æœºä½å§¿</span></span><br><span class="line">    pose-&gt;<span class="built_in">setId</span>(<span class="number">0</span>);</span><br><span class="line">    pose-&gt;<span class="built_in">setEstimate</span>(g2o::<span class="built_in">SE3Quat</span>(Eigen::Matrix3d::<span class="built_in">Identity</span>(), Eigen::<span class="built_in">Vector3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)));</span><br><span class="line">    optimizer.<span class="built_in">addVertex</span>(pose);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.æ„å»ºè¾¹</span></span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">1</span>;</span><br><span class="line">    vector&lt;EdgeProjectXYZRGBDPoseOnly*&gt; edges;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pts1.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        EdgeProjectXYZRGBDPoseOnly *edge = <span class="keyword">new</span> <span class="built_in">EdgeProjectXYZRGBDPoseOnly</span>(Eigen::<span class="built_in">Vector3d</span>(pts2[i].x,pts2[i].y,pts2[i].z));</span><br><span class="line">        edge-&gt;<span class="built_in">setId</span>(index);</span><br><span class="line">        edge-&gt;<span class="built_in">setVertex</span>(<span class="number">0</span>, <span class="keyword">dynamic_cast</span>&lt;g2o::VertexSE3Expmap*&gt;(pose));</span><br><span class="line">        edge-&gt;<span class="built_in">setMeasurement</span>(Eigen::<span class="built_in">Vector3d</span>(pts1[i].x,pts1[i].y,pts1[i].z));</span><br><span class="line">        edge-&gt;<span class="built_in">setInformation</span>(Eigen::Matrix3d::<span class="built_in">Identity</span>()*<span class="number">1e4</span>);</span><br><span class="line">        optimizer.<span class="built_in">addEdge</span>(edge);</span><br><span class="line">        index++;</span><br><span class="line">        edges.<span class="built_in">push_back</span>(edge);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// å¼€å§‹ä¼˜åŒ–</span></span><br><span class="line">    chrono::steady_clock::time_point t1 = chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);</span><br><span class="line">    optimizer.<span class="built_in">initializeOptimization</span>();</span><br><span class="line">    optimizer.<span class="built_in">optimize</span>(<span class="number">10</span>);</span><br><span class="line">    chrono::steady_clock::time_point t2 = chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line">    chrono::duration&lt;<span class="keyword">double</span>&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(t2-t1);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¼˜åŒ–ç”¨æ—¶: &quot;</span> &lt;&lt; time_used.<span class="built_in">count</span>() &lt;&lt; <span class="string">&quot;ms&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¼˜åŒ–åçš„T: \n: &quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; Eigen::<span class="built_in">Isometry3d</span>(pose-&gt;<span class="built_in">estimate</span>()).<span class="built_in">matrix</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<h2 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">5</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æä¾›å½©è‰²å›¾ä¸æ·±åº¦å›¾ï¼šimg1 img2 depth1 depth2 &quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 1.ç‰¹å¾ç‚¹åŒ¹é…</span></span><br><span class="line">    Mat img_1 = <span class="built_in">imread</span>(argv[<span class="number">1</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line">    Mat img_2 = <span class="built_in">imread</span>(argv[<span class="number">2</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line">    vector&lt;KeyPoint&gt; keypoints_1, keypoints_2;</span><br><span class="line">    vector&lt;DMatch&gt; matches;</span><br><span class="line">    <span class="built_in">find_feature_matches</span>(img_1, img_2, keypoints_1, keypoints_2, matches);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¸€å…±æ‰¾åˆ°&quot;</span> &lt;&lt; matches.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;ç»„ç‰¹å¾åŒ¹é…&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.å»ºç«‹3Dç‚¹</span></span><br><span class="line">    Mat depth_1 = <span class="built_in">imread</span>(argv[<span class="number">3</span>], CV_LOAD_IMAGE_UNCHANGED);</span><br><span class="line">    Mat depth_2 = <span class="built_in">imread</span>(argv[<span class="number">4</span>], CV_LOAD_IMAGE_UNCHANGED);</span><br><span class="line">    Mat K = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; <span class="number">520.9</span>, <span class="number">0</span>, <span class="number">325.1</span>, <span class="number">0</span>, <span class="number">521.0</span>, <span class="number">249.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    vector&lt;Point3f&gt; pts1, pts2;</span><br><span class="line">    <span class="built_in">build_3d_points</span>(depth_1, depth_2, K, keypoints_1, keypoints_2, matches, pts1, pts2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.SVDæ±‚è§£ICP</span></span><br><span class="line">    Mat R, t;</span><br><span class="line">    <span class="built_in">pose_estimation_3d3d</span>(pts1, pts2, R, t);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¸€å…±æœ‰&quot;</span> &lt;&lt; pts1.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;å¯¹3D-3D&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ICPåˆ†è§£ç»“æœä¸ºï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;R: \n&quot;</span></span><br><span class="line">         &lt;&lt; R &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;t: \n&quot;</span></span><br><span class="line">         &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// ç”±äºå‰é¢çš„æ¨å¯¼æ˜¯æŒ‰ç…§pi= Rpâ€²i+tè¿›è¡Œçš„ï¼Œè¿™é‡Œçš„R,t, </span></span><br><span class="line">    <span class="comment">// æ˜¯ç¬¬äºŒå¸§åˆ°ç¬¬ä¸€å¸§çš„å˜æ¢ï¼Œä¸å‰é¢PnPéƒ¨åˆ†æ˜¯ç›¸åçš„ã€‚</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥åœ¨è¾“å‡ºç»“æœä¸­ï¼Œæˆ‘ä»¬åŒæ—¶æ‰“å°äº†é€†å˜æ¢</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;R_inv: \n &quot;</span> &lt;&lt; R.<span class="built_in">t</span>() &lt;&lt; endl; <span class="comment">// æ±‚é€†</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;t_inv: \n &quot;</span> &lt;&lt; -R.<span class="built_in">t</span>() * t &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.BAä¼˜åŒ–</span></span><br><span class="line">    <span class="built_in">bundleAdjustment</span>(pts1, pts2, R, t);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CMakeLsits.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( pose_estimation_3d3d )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14 -O3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ cmakeæ¨¡å—ä»¥ä½¿ç”¨g2o</span></span><br><span class="line"><span class="keyword">list</span>( APPEND CMAKE_MODULE_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/cmake_modules )</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV <span class="number">3.1</span> REQUIRED )</span><br><span class="line"><span class="keyword">find_package</span>( G2O REQUIRED )</span><br><span class="line"><span class="keyword">find_package</span>( CSparse REQUIRED )</span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>( </span><br><span class="line">    <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> </span><br><span class="line">    <span class="variable">$&#123;G2O_INCLUDE_DIRS&#125;</span></span><br><span class="line">    <span class="variable">$&#123;CSPARSE_INCLUDE_DIR&#125;</span></span><br><span class="line">    <span class="string">&quot;/usr/include/eigen3/&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( pose_estimation_3d3d pose_estimation_3d3d.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( pose_estimation_3d3d </span><br><span class="line">   <span class="variable">$&#123;OpenCV_LIBS&#125;</span></span><br><span class="line">   g2o_core g2o_stuff g2o_types_sba g2o_csparse_extension </span><br><span class="line">   <span class="variable">$&#123;CSPARSE_LIBRARY&#125;</span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ‰“å°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">max_dist: 94</span><br><span class="line">min_dist: 4</span><br><span class="line">ä¸€å…±æ‰¾åˆ°79ç»„ç‰¹å¾åŒ¹é…</span><br><span class="line">3d-3d pairs: 72</span><br><span class="line">W=  10.871 -1.01948  2.54771</span><br><span class="line">-2.16033  3.85307 -5.77742</span><br><span class="line"> 3.94738 -5.79979  9.62203</span><br><span class="line">U=  0.558087  -0.829399 -0.0252034</span><br><span class="line"> -0.428009  -0.313755   0.847565</span><br><span class="line">  0.710878   0.462228   0.530093</span><br><span class="line">V=  0.617887  -0.784771 -0.0484806</span><br><span class="line"> -0.399894  -0.366747   0.839989</span><br><span class="line">  0.676979   0.499631   0.540434</span><br><span class="line">ä¸€å…±æœ‰72å¯¹3D-3DICPåˆ†è§£ç»“æœä¸ºï¼š</span><br><span class="line">R: </span><br><span class="line">[0.9969452349468715, 0.05983347698056557, -0.05020113095482046;</span><br><span class="line"> -0.05932607657705309, 0.9981719679735133, 0.01153858699565957;</span><br><span class="line"> 0.05079975545906246, -0.008525103184062521, 0.9986724725659557]</span><br><span class="line">t: </span><br><span class="line">[0.144159841091821;</span><br><span class="line"> -0.06667849443812729;</span><br><span class="line"> -0.03009747273569774]</span><br><span class="line">R_inv: </span><br><span class="line"> [0.9969452349468715, -0.05932607657705309, 0.05079975545906246;</span><br><span class="line"> 0.05983347698056557, 0.9981719679735133, -0.008525103184062521;</span><br><span class="line"> -0.05020113095482046, 0.01153858699565957, 0.9986724725659557]</span><br><span class="line">t_inv: </span><br><span class="line"> [-0.1461462958593589;</span><br><span class="line"> 0.05767443542067568;</span><br><span class="line"> 0.03806388018483625]</span><br><span class="line">iteration= 0     chi2= 18161.146626      time= 4.6935e-05        cumTime= 4.6935e-05     edges= 72       schur= 0</span><br><span class="line">iteration= 1     chi2= 18155.141919      time= 9.614e-06         cumTime= 5.6549e-05     edges= 72       schur= 0</span><br><span class="line">iteration= 2     chi2= 18155.140765      time= 9.938e-06         cumTime= 6.6487e-05     edges= 72       schur= 0</span><br><span class="line">iteration= 3     chi2= 18155.140764      time= 9.516e-06         cumTime= 7.6003e-05     edges= 72       schur= 0</span><br><span class="line">iteration= 4     chi2= 18155.140764      time= 8.688e-06         cumTime= 8.4691e-05     edges= 72       schur= 0</span><br><span class="line">iteration= 5     chi2= 18155.140764      time= 8.358e-06         cumTime= 9.3049e-05     edges= 72       schur= 0</span><br><span class="line">iteration= 6     chi2= 18155.140764      time= 1.0723e-05        cumTime= 0.000103772    edges= 72       schur= 0</span><br><span class="line">iteration= 7     chi2= 18155.140764      time= 1.1911e-05        cumTime= 0.000115683    edges= 72       schur= 0</span><br><span class="line">iteration= 8     chi2= 18155.140764      time= 1.3427e-05        cumTime= 0.00012911     edges= 72       schur= 0</span><br><span class="line">iteration= 9     chi2= 18155.140764      time= 1.207e-05         cumTime= 0.00014118     edges= 72       schur= 0</span><br><span class="line">ä¼˜åŒ–ç”¨æ—¶: 0.000604832ms</span><br><span class="line">ä¼˜åŒ–åçš„T: </span><br><span class="line">: </span><br><span class="line">  0.996945  0.0598335 -0.0502011    0.14416</span><br><span class="line">-0.0593261   0.998172  0.0115386 -0.0666785</span><br><span class="line"> 0.0507998 -0.0085251   0.998672 -0.0300979</span><br><span class="line">         0          0          0          1</span><br></pre></td></tr></table></figure>
<p>ä¸ä½¿ç”¨è§£ææ±‚å¯¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.......</span><br><span class="line">ä¼˜åŒ–ç”¨æ—¶: 0.00123263ms</span><br><span class="line">ä¼˜åŒ–åçš„T: </span><br><span class="line">: </span><br><span class="line">   0.996945   0.0598335  -0.0502011     0.14416</span><br><span class="line"> -0.0593261    0.998172   0.0115386  -0.0666785</span><br><span class="line">  0.0507998 -0.00852509    0.998672  -0.0300979</span><br><span class="line">          0           0           0           1</span><br></pre></td></tr></table></figure>
<p><strong>ä¸éš¾å‘ç°,ä½¿ç”¨è§£ææ±‚å¯¼(å³ç»™å‡ºå‡½æ•°<code>virtual void linearizeOplus()</code>),æ¯”ä½¿ç”¨æ•°å€¼æ±‚å¯¼(å³ä¸æä¾›è¯¥å‡½æ•°)è¦å¿«çš„å¤š.</strong></p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>ICP</tag>
        <tag>BAä¸å›¾ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>ch7_æ±‚è§£PnPå¹¶ä½¿ç”¨BAä¼˜åŒ–</title>
    <url>/posts/20908.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>$PnPï¼ˆPerspective-n-Pointï¼‰$æ˜¯æ±‚è§£ $3D $åˆ°$ 2D $ç‚¹å¯¹è¿åŠ¨çš„æ–¹æ³•ã€‚å®ƒæè¿°äº†å½“æˆ‘ä»¬çŸ¥é“$n $ä¸ª$ 3D$ ç©ºé—´ç‚¹ä»¥åŠå®ƒä»¬çš„æŠ•å½±ä½ç½®æ—¶ï¼Œå¦‚ä½•ä¼°è®¡ç›¸æœºæ‰€åœ¨çš„ä½å§¿ã€‚å¦‚æœä¸¤å¼ å›¾åƒä¸­ï¼Œå…¶ä¸­ä¸€å¼ ç‰¹å¾ç‚¹çš„ $3D$ ä½ç½®å·²çŸ¥ï¼Œé‚£ä¹ˆæœ€å°‘åªéœ€ä¸‰ä¸ªç‚¹å¯¹ï¼ˆéœ€è¦è‡³å°‘ä¸€ä¸ªé¢å¤–ç‚¹éªŒè¯ç»“æœï¼‰å°±å¯ä»¥ä¼°è®¡ç›¸æœºè¿åŠ¨ã€‚ç‰¹å¾ç‚¹çš„$ 3D $ä½ç½®å¯ä»¥ç”±ä¸‰è§’åŒ–ï¼Œæˆ–è€…ç”± $RGB-D$ ç›¸æœºçš„æ·±åº¦å›¾ç¡®å®šã€‚å› æ­¤ï¼Œåœ¨åŒç›®æˆ–$ RGB-D$ çš„è§†è§‰é‡Œç¨‹è®¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨$ PnP$ ä¼°è®¡ç›¸æœºè¿åŠ¨ã€‚è€Œåœ¨å•ç›®è§†è§‰é‡Œç¨‹è®¡ä¸­ï¼Œå¿…é¡»å…ˆè¿›è¡Œåˆå§‹åŒ–ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨ $PnP$ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="PnPä¸­çš„BAé—®é¢˜"><a href="#PnPä¸­çš„BAé—®é¢˜" class="headerlink" title="PnPä¸­çš„BAé—®é¢˜"></a>PnPä¸­çš„BAé—®é¢˜</h1><p>æˆ‘ä»¬å¯ä»¥æŠŠ $PnP $é—®é¢˜æ„å»ºæˆä¸€ä¸ªå®šä¹‰äºæä»£æ•°ä¸Šçš„éçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ã€‚å‰é¢è¯´çš„çº¿æ€§æ–¹æ³•ï¼Œå¾€å¾€æ˜¯<strong>å…ˆæ±‚ç›¸</strong><br><strong>æœºä½å§¿ï¼Œå†æ±‚ç©ºé—´ç‚¹ä½ç½®</strong>ï¼Œè€Œéçº¿æ€§ä¼˜åŒ–åˆ™æ˜¯æŠŠå®ƒä»¬éƒ½çœ‹æˆä¼˜åŒ–å˜é‡ï¼Œæ”¾åœ¨ä¸€èµ·ä¼˜åŒ–ã€‚è¿™æ˜¯ä¸€ç§éå¸¸é€šç”¨çš„æ±‚è§£æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒå¯¹$ PnP $æˆ–$ ICP $ç»™å‡ºçš„ç»“æœè¿›è¡Œä¼˜åŒ–ã€‚</p>
<h2 id="1-é‡æŠ•å½±è¯¯å·®"><a href="#1-é‡æŠ•å½±è¯¯å·®" class="headerlink" title="1.é‡æŠ•å½±è¯¯å·®"></a>1.é‡æŠ•å½±è¯¯å·®</h2><p>åœ¨ $PnP $ä¸­ï¼Œè¿™ä¸ª$ Bundle Adjustment $é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªæœ€å°åŒ–é‡æŠ•å½±è¯¯å·®ï¼ˆReprojection errorï¼‰çš„é—®é¢˜ã€‚</p>
<p><img src="/images/æ±‚è§£PnPå¹¶ä½¿ç”¨BAä¼˜åŒ–/image-20220329214556296.png" alt="image-20220329214556296" style="zoom: 33%;" /></p>
<p>è¯¥é—®é¢˜çš„è¯¯å·®é¡¹ï¼Œæ˜¯å°†åƒç´ åæ ‡ï¼ˆè§‚æµ‹åˆ°çš„æŠ•å½±ä½ç½®ï¼‰ä¸ 3D ç‚¹æŒ‰ç…§å½“å‰ä¼°è®¡çš„ä½å§¿è¿›è¡ŒæŠ•å½±å¾—åˆ°çš„ä½ç½®ç›¸æ¯”è¾ƒå¾—åˆ°çš„è¯¯å·®ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºé‡æŠ•å½±è¯¯å·®ã€‚å¦‚å›¾ï¼Œæˆ‘ä»¬é€šè¿‡ç‰¹å¾åŒ¹é…ï¼ŒçŸ¥é“äº† $p_1$å’Œ $p_2$æ˜¯åŒä¸€ä¸ªç©ºé—´ç‚¹$P$ çš„æŠ•å½±ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“ç›¸æœºçš„ä½å§¿ã€‚åœ¨åˆå§‹å€¼ä¸­ï¼Œ$P $çš„æŠ•å½±$\hat{p_2}$ä¸å®é™…çš„$ p_2$ä¹‹é—´æœ‰ä¸€å®šçš„è·ç¦»ã€‚äºæ˜¯æˆ‘ä»¬è°ƒæ•´ç›¸æœºçš„ä½å§¿ï¼Œä½¿å¾—è¿™ä¸ªè·ç¦»å˜å°ã€‚ä¸è¿‡ï¼Œç”±äºè¿™ä¸ªè°ƒæ•´éœ€è¦è€ƒè™‘å¾ˆå¤šä¸ªç‚¹ï¼Œæ‰€ä»¥æœ€åæ¯ä¸ªç‚¹çš„è¯¯å·®é€šå¸¸éƒ½ä¸ä¼šç²¾ç¡®ä¸ºé›¶ã€‚</p>
<p>è€ƒè™‘ $n$ ä¸ªä¸‰ç»´ç©ºé—´ç‚¹ $P $å’Œå®ƒä»¬çš„æŠ•å½±$ p$ï¼Œæˆ‘ä»¬å¸Œæœ›è®¡ç®—ç›¸æœºçš„ä½å§¿ $R, tï¼Œ$å®ƒçš„æä»£æ•°è¡¨ç¤ºä¸º $Î¾$ã€‚å‡è®¾æŸç©ºé—´ç‚¹åæ ‡ä¸º$ P_i = [X_i , Y_i , Z_i ]^{T} $ï¼Œå…¶æŠ•å½±çš„åƒç´ åæ ‡ä¸º $u_i = [u_i , v_i ]^{T} $ã€‚<br>åƒç´ ä½ç½®ä¸ç©ºé—´ç‚¹ä½ç½®çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
s_i
\left[
\begin{matrix}
u_i\\v_i\\1
\end{matrix}
\right]=
K\exp(Î¾^{\land})
\left[
\begin{matrix}
X_i\\Y_i\\Z_i\\1
\end{matrix}
\right]</script><p>å†™æˆçŸ©é˜µå½¢å¼ï¼š</p>
<script type="math/tex; mode=display">
s_iu_i=K\exp(Î¾^{\land})P_i</script><p>ç”±äºç›¸æœºä½å§¿æœªçŸ¥ä»¥åŠè§‚æµ‹ç‚¹çš„å™ªå£°ï¼Œè¯¥ç­‰å¼å­˜åœ¨ä¸€ä¸ªè¯¯å·®ï¼ŒæŠŠè¯¯å·®æ±‚å’Œï¼Œæ„å»ºæœ€å°äºŒä¹˜é—®é¢˜ï¼Œç„¶åå¯»æ‰¾æœ€å¥½çš„ç›¸æœºä½å§¿ï¼Œä½¿å®ƒæœ€å°åŒ–:</p>
<script type="math/tex; mode=display">
Î¾^{*}=\arg \underset{Î¾}{\min}\frac{1}{2}\sum^n_{i=1}\parallel u_i-\frac{1} {s_i}K\exp(Î¾^{\land})P_i\parallel^2_2</script><p>æ±‚æ¯ä¸ªè¯¯å·®é¡¹å…³äºä¼˜åŒ–å˜é‡çš„å¯¼æ•°ï¼Œä¹Ÿå°±æ˜¯çº¿æ€§åŒ–ï¼š</p>
<script type="math/tex; mode=display">
e(x+\Delta x)\approx e(x)+J\Delta x</script><p>$e $ä¸ºåƒç´ åæ ‡è¯¯å·®ï¼ˆ2 ç»´ï¼‰ï¼Œ$x$ ä¸ºç›¸æœºä½å§¿ï¼ˆ6 ç»´ï¼‰æ—¶ï¼Œ$J$ å°†æ˜¯ä¸€ä¸ª$ 2\times 6$ çš„çŸ©é˜µã€‚</p>
<h2 id="2-ä¼˜åŒ–ä½å§¿"><a href="#2-ä¼˜åŒ–ä½å§¿" class="headerlink" title="2.ä¼˜åŒ–ä½å§¿"></a>2.ä¼˜åŒ–ä½å§¿</h2><p>è®°å˜æ¢åˆ°ç›¸æœºåæ ‡ç³»ä¸‹çš„ç©ºé—´ç‚¹åæ ‡ä¸º $P^â€²$:</p>
<script type="math/tex; mode=display">
s
\left[
\begin{matrix}
u\\v\\1
\end{matrix}
\right]=
\left[
\begin{matrix}
f_x &0 &c_x\\0 &f_y &c_y\\0&0 &1
\end{matrix}
\right]
\left[
\begin{matrix}
X^{â€²}\\Y^{â€²}\\Z^{â€²}
\end{matrix}
\right]</script><p>åˆ©ç”¨ç¬¬ 3 è¡Œæ¶ˆå» $s$ï¼ˆå®é™…ä¸Šå°±æ˜¯$ P^{â€² }$çš„è·ç¦»ï¼‰ï¼Œå¾—ï¼š</p>
<script type="math/tex; mode=display">
u=f_x\frac{X^â€²}{Z^â€²}+c_x\\
v=f_y\frac{Y^â€²}{Z^â€²}+c_y</script><p>è¿™é‡Œä¸ä¹‹å‰æ±‚å¾—çš„ç›¸æœºæ¨¡å‹æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥æŠŠ$u,v$ä¸å®é™…çš„æµ‹é‡å€¼æ¯”è¾ƒï¼Œæ±‚å·®ã€‚</p>
<p>å¯¹ $Î¾^{\land} $å·¦ä¹˜æ‰°åŠ¨é‡$ Î´Î¾$ï¼Œç„¶åè€ƒè™‘ $e$ çš„å˜åŒ–å…³äºæ‰°åŠ¨é‡çš„å¯¼æ•°ã€‚åˆ©ç”¨é“¾å¼æ³•åˆ™:</p>
<script type="math/tex; mode=display">
\frac{\partial e}{\partial \delta \xi}=
\underset{\delta \xi \rightarrow0}{lim}
\frac{e(\delta \xiâŠ•\xi)}{\delta \xi}=
\frac{\partial e}{\partial P^â€²}
\frac{\partial P^â€²}{\partial \delta \xi}</script><p>å…¶ä¸­ï¼š$\frac{\partial e}{\partial P^â€²}$</p>
<script type="math/tex; mode=display">
\frac{\partial e}{\partial P^â€²}=-
\begin{bmatrix}
\frac{\partial u}{\partial X^â€²}&
\frac{\partial u}{\partial Y^â€²}&
\frac{\partial u}{\partial Z^â€²}            \\ 
\frac{\partial v}{\partial X^â€²}&
\frac{\partial v}{\partial Y^â€²}&
\frac{\partial v}{\partial Z^â€²}
\end{bmatrix}=-
\begin{bmatrix}
\frac{f_x}{Z^â€²}&0&-\frac{f_xX^â€²}{Z^{â€²2}}\\
0&\frac{f_y}{Z^â€²}&-\frac{f_yY^â€²}{Z^{â€²2}}
\end{bmatrix}</script><p>$\frac{\partial P^â€²}{\partial \delta \xi}$ä¸ºå˜æ¢åçš„ç‚¹å…³äºæä»£æ•°çš„å¯¼æ•°ï¼š</p>
<p>ç©ºé—´ç‚¹$P$ç»è¿‡åæ ‡å˜æ¢çš„åˆ°$P^{\prime}=TP$ï¼Œç°åœ¨æ±‚å˜æ¢åçš„ç©ºé—´ç‚¹å¯¹äºæ‰°åŠ¨$\delta\xi$çš„å¯¼æ•°ï¼Œå°±æ˜¯ç›¸å½“äºç»™$T$å·¦ä¹˜ä¸€ä¸ªæ‰°åŠ¨$\Delta T=\exp(\delta\xi)$ï¼Œè¿™é‡Œè®¾æ‰°åŠ¨é¡¹çš„æä»£æ•°ä¸º$\delta\xi=[\delta\rho,\delta\phi]^T$</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial P^â€²}{\partial \delta \xi}&=
\frac{\partial(TP)}{\partial \delta \xi} \\ &=
\underset{\delta \xi \rightarrow0}{lim}
\frac{exp(\delta \xi ^{\land})exp(\xi ^{\land})p-exp(\xi ^{\land})p}{\delta \xi}\\&\approx
\underset{\delta \xi \rightarrow0}{lim}
\frac{(I+\delta \xi ^{\land})exp(\xi ^{\land})p-exp(\xi ^{\land})p}{\delta \xi}\\&=
\underset{\delta \xi \rightarrow0}{lim}
\frac{\delta \xi ^{\land}exp(\xi ^{\land})p}{\delta \xi}\\&=
\underset{\delta \xi \rightarrow0}{lim}
\frac{\begin{bmatrix}
\delta \phi^{\land}&\delta \rho \\
0^T&0
\end{bmatrix}
\begin{bmatrix}
Rp+t \\
1
\end{bmatrix}
}{\delta \xi}\\&=
\underset{\delta \xi \rightarrow0}{lim}
\frac{\begin{bmatrix}
\delta \phi^{\land}(Rp+t)+\delta \rho  \\
0
\end{bmatrix}
}
{\delta \xi}\\&=
\begin{bmatrix}
I &-(RP+t)^{\land}\\
0^{T}&0^{T}
\end{bmatrix}\\&=
\begin{bmatrix}
I &-P^{â€²\land}\\
0^{T}&0^{T}
\end{bmatrix}\\&=
(TP)^âŠ™
\end{align*}</script><p>ä¸¤é¡¹ç›¸ä¹˜ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial e}{\partial \delta \xi}&=
\frac{\partial e}{\partial P^â€²}
\frac{\partial P^â€²}{\partial \delta \xi}\\&=-
\begin{bmatrix}
\frac{f_x}{Z^â€²}&0&-\frac{f_xX^â€²}{Z^{â€²2}}
&-\frac{f_xX^â€²Y^â€²}{Z^{â€²2}}&f_x+\frac{f_xX^2}{Z^{â€²2}}&-\frac{f_xY^â€²}{Z^{â€²}}
\\
0&\frac{f_y}{Z^â€²}&-\frac{f_yY^â€²}{Z^{â€²2}}
&-f_y-\frac{f_yY^{â€²2}}{Z^{â€²2}}&\frac{f_yX^â€²Y^â€²}{Z^{â€²}}&\frac{f_yX^â€²}{Z^{â€²}}
\end{bmatrix}\\&=
J
\end{align*}</script><p>è¿™ä¸ªé›…å¯æ¯”çŸ©é˜µæè¿°äº†é‡æŠ•å½±è¯¯å·®å…³äºç›¸æœºä½å§¿æä»£æ•°çš„ä¸€é˜¶å˜åŒ–å…³ç³»ï¼Œ</p>
<h2 id="3-ä¼˜åŒ–ç©ºé—´ç‚¹ä½ç½®"><a href="#3-ä¼˜åŒ–ç©ºé—´ç‚¹ä½ç½®" class="headerlink" title="3.ä¼˜åŒ–ç©ºé—´ç‚¹ä½ç½®"></a>3.ä¼˜åŒ–ç©ºé—´ç‚¹ä½ç½®</h2><p>è®¨è®º $e$å…³äºç©ºé—´ç‚¹ $P $çš„å¯¼æ•°</p>
<script type="math/tex; mode=display">
\frac{\partial e}{\partial P}=
\frac{\partial e}{\partial P^â€²}
\frac{\partial P^â€²}{\partial P}</script><p>ç”±äºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
P^â€²&=exp(\xi ^{\land})P=RP+t\\
\frac{\partial P^â€²}{\partial P}&=R
\end{align*}</script><p>æ‰€ä»¥ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial e}{\partial P}=-
\begin{bmatrix}
\frac{f_x}{Z^â€²}&0&-\frac{f_xX^â€²}{Z^{â€²2}}\\
0&\frac{f_y}{Z^â€²}&-\frac{f_yY^â€²}{Z^{â€²2}}
\end{bmatrix}R</script><p><strong>æˆ‘ä»¬æ¨å¯¼äº†è§‚æµ‹ç›¸æœºæ–¹ç¨‹å…³äºç›¸æœºä½å§¿ä¸ç‰¹å¾ç‚¹çš„ä¸¤ä¸ªå¯¼æ•°çŸ©é˜µã€‚å®ƒä»¬ååˆ†é‡è¦ï¼Œèƒ½å¤Ÿåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­æä¾›é‡è¦çš„æ¢¯åº¦æ–¹å‘ï¼ŒæŒ‡å¯¼ä¼˜åŒ–çš„è¿­ä»£ã€‚</strong></p>
<h1 id="æ±‚è§£PnP"><a href="#æ±‚è§£PnP" class="headerlink" title="æ±‚è§£PnP"></a>æ±‚è§£PnP</h1><p>$PnP $é—®é¢˜æœ‰å¾ˆå¤šç§æ±‚è§£æ–¹æ³•ï¼Œä¾‹å¦‚ç”¨ä¸‰å¯¹ç‚¹ä¼°è®¡ä½å§¿çš„ $P3P$ï¼Œç›´æ¥çº¿æ€§å˜æ¢$(DLT)$ï¼Œ$EPnP(Efficient PnP)$ï¼Œ$UPnP$ç­‰ç­‰ã€‚æ­¤å¤–ï¼Œè¿˜èƒ½ç”¨éçº¿æ€§ä¼˜åŒ–çš„æ–¹å¼ï¼Œæ„å»ºæœ€å°äºŒä¹˜é—®é¢˜å¹¶è¿­ä»£æ±‚è§£ï¼Œä¹Ÿå°±æ˜¯ä¸‡é‡‘æ²¹å¼çš„$ Bundle Adjustment$ã€‚</p>
<p>å…¶ä¸­$P3P$åˆ©ç”¨äº†ä¸‰è§’å½¢ç›¸ä¼¼æ€§è´¨ï¼Œæ±‚è§£æŠ•å½±ç‚¹ $a, b, c$ åœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„ 3D åæ ‡ï¼Œæœ€åæŠŠé—®é¢˜è½¬æ¢æˆä¸€ä¸ª 3D åˆ° 3D çš„ä½å§¿ä¼°è®¡é—®é¢˜($ICP$é—®é¢˜)ã€‚ä½†æ˜¯ï¼Œ$P3P$ åªåˆ©ç”¨ä¸‰ä¸ªç‚¹çš„ä¿¡æ¯ã€‚å½“ç»™å®šçš„é…å¯¹ç‚¹å¤šäº 3 ç»„æ—¶ï¼Œéš¾ä»¥åˆ©ç”¨æ›´å¤šçš„ä¿¡æ¯ï¼›è€Œä¸”ï¼Œå¦‚æœ 3D ç‚¹æˆ– 2D ç‚¹å—å™ªå£°å½±å“ï¼Œæˆ–è€…å­˜åœ¨è¯¯åŒ¹é…ï¼Œåˆ™ç®—æ³•å¤±æ•ˆã€‚</p>
<p>åœ¨ $SLAM$ å½“ä¸­ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å…ˆä½¿ç”¨ $P3P/EPnP$ ç­‰æ–¹æ³•ä¼°è®¡ç›¸æœºä½å§¿ï¼Œç„¶åæ„å»ºæœ€å°äºŒä¹˜ä¼˜åŒ–é—®é¢˜å¯¹ä¼°è®¡å€¼è¿›è¡Œè°ƒæ•´$ï¼ˆBundle Adjustmentï¼‰$ã€‚</p>
<h2 id="1-ç‰¹å¾ç‚¹åŒ¹é…"><a href="#1-ç‰¹å¾ç‚¹åŒ¹é…" class="headerlink" title="1.ç‰¹å¾ç‚¹åŒ¹é…"></a>1.ç‰¹å¾ç‚¹åŒ¹é…</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. ç‰¹å¾åŒ¹é…</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find_feature_matches</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;img_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;img_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;KeyPoint&gt; &amp;keypoints_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;KeyPoint&gt; &amp;keypoints_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;DMatch&gt; &amp;matches)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">    Mat descriptors_1, descriptors_2;</span><br><span class="line">    Ptr&lt;FeatureDetector&gt; detector = ORB::<span class="built_in">create</span>();</span><br><span class="line">    Ptr&lt;DescriptorExtractor&gt; descriptor = ORB::<span class="built_in">create</span>();</span><br><span class="line">    Ptr&lt;DescriptorMatcher&gt; matcher = DescriptorMatcher::<span class="built_in">create</span>(<span class="string">&quot;BruteForce-Hamming&quot;</span>);</span><br><span class="line">    <span class="comment">//-- ç¬¬ä¸€æ­¥:æ£€æµ‹ Oriented FAST è§’ç‚¹ä½ç½®</span></span><br><span class="line">    detector-&gt;<span class="built_in">detect</span>(img_1, keypoints_1);</span><br><span class="line">    detector-&gt;<span class="built_in">detect</span>(img_2, keypoints_2);</span><br><span class="line">    <span class="comment">//-- ç¬¬äºŒæ­¥:æ ¹æ®è§’ç‚¹ä½ç½®è®¡ç®— BRIEF æè¿°å­</span></span><br><span class="line">    descriptor-&gt;<span class="built_in">compute</span>(img_1, keypoints_1, descriptors_1);</span><br><span class="line">    descriptor-&gt;<span class="built_in">compute</span>(img_2, keypoints_2, descriptors_2);</span><br><span class="line">    <span class="comment">//-- ç¬¬ä¸‰æ­¥:å¯¹ä¸¤å¹…å›¾åƒä¸­çš„BRIEFæè¿°å­è¿›è¡ŒåŒ¹é…ï¼Œä½¿ç”¨ Hamming è·ç¦»</span></span><br><span class="line">    vector&lt;DMatch&gt; match;</span><br><span class="line">    matcher-&gt;<span class="built_in">match</span>(descriptors_1, descriptors_2, match);</span><br><span class="line">    <span class="comment">//-- ç¬¬å››æ­¥:åŒ¹é…ç‚¹å¯¹ç­›é€‰</span></span><br><span class="line">    <span class="keyword">double</span> min_dist = <span class="number">10000</span>, max_dist = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; descriptors_1.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> dist = match[i].distance;</span><br><span class="line">        <span class="keyword">if</span>(dist &lt; min_dist) min_dist = dist;</span><br><span class="line">        <span class="keyword">if</span>(dist &gt; max_dist) max_dist = dist;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;max_dist: &quot;</span> &lt;&lt; max_dist &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;min_dist: &quot;</span> &lt;&lt; min_dist &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; descriptors_1.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (match[i].distance &lt;= <span class="built_in">max</span>(<span class="number">2</span>*min_dist,<span class="number">30.0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            matches.<span class="built_in">push_back</span>(match[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-å»ºç«‹3Dç‚¹"><a href="#2-å»ºç«‹3Dç‚¹" class="headerlink" title="2.å»ºç«‹3Dç‚¹"></a>2.å»ºç«‹3Dç‚¹</h2><p><code>queryIdx</code> ä»£è¡¨çš„ç‰¹å¾ç‚¹åºåˆ—æ˜¯ <code>keypoints1</code> ä¸­çš„ï¼Œ<code>trainIdx</code>ä»£è¡¨çš„ç‰¹å¾ç‚¹åºåˆ—æ˜¯<code>keypoints2</code>ä¸­çš„ï¼Œæ­¤æ—¶è¿™ä¸¤å¼ å›¾ä¸­çš„ç‰¹å¾ç‚¹ç›¸äº’åŒ¹é…ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (DMatch m : matches)</span><br><span class="line">&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;queryIdx: &quot;</span> &lt;&lt; keypoints_1[m.queryIdx].pt &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;trainIdx: &quot;</span> &lt;&lt; keypoints_2[m.trainIdx].pt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸¤è¡Œä»£ç è¿”å›çš„ç±»å‹éƒ½æ˜¯<code>Point2d</code>ï¼Œå¯¹åŒä¸€ä¸ªåŒ¹é…ç‚¹å¯¹ï¼Œæ€»æœ‰ç¬¬ä¸€å¸§å›¾åƒçš„åƒç´ ç‚¹åæ ‡<code>keypoints_1[m.queryIdx].pt</code>ä¸ç¬¬äºŒå¸§å›¾åƒçš„åƒç´ ç‚¹åæ ‡<code>keypoints_2[m.trainIdx].pt</code>ç›¸å¯¹åº”ã€‚å› æ­¤ï¼Œå¦‚æœåŒ¹é…ç‚¹å¯¹ä¸º79,åˆ™å­˜åœ¨79å¯¹ç›¸äº’å¯¹åº”çš„<code>keypoints_1[m.queryIdx].pt</code>ä¸<code>keypoints_2[m.trainIdx].pt</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--------ç¬¬77ç»„åŒ¹é…ç‚¹----------</span><br><span class="line">queryIdx: [207.825, 286.655]</span><br><span class="line">trainIdx: [186.325, 290.238]</span><br><span class="line">--------ç¬¬78ç»„åŒ¹é…ç‚¹----------</span><br><span class="line">queryIdx: [383.4, 326.07]</span><br><span class="line">trainIdx: [347.569, 336.819]</span><br><span class="line">--------ç¬¬79ç»„åŒ¹é…ç‚¹----------</span><br><span class="line">queryIdx: [351.152, 229.324]</span><br><span class="line">trainIdx: [333.236, 240.073]</span><br></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä»¬éœ€è¦3D-2Dï¼Œå› æ­¤éœ€è¦å°†ä¸€å¯¹åŒ¹é…ç‚¹çš„å…¶ä¸­çš„ä¸€ä¸ªè½¬æ¢æˆç›¸æœºåæ ‡ç³»ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åƒç´ åæ ‡ç³»è½¬æ¢æˆç›¸æœºå½’ä¸€åŒ–å¹³é¢çš„æŠ•å½±</span></span><br><span class="line"><span class="function">Point2d <span class="title">pixel2cam</span><span class="params">(<span class="keyword">const</span> Point2d &amp;p, <span class="keyword">const</span> Mat &amp;K)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Point2d</span>(</span><br><span class="line">        (p.x - K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">2</span>)) / K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">        (p.y - K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">2</span>)) / K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (DMatch m : matches)</span><br><span class="line">&#123;</span><br><span class="line">    ushort d = d1.ptr&lt;<span class="keyword">unsigned</span> <span class="keyword">short</span>&gt;(<span class="built_in"><span class="keyword">int</span></span>(keypoints_1[m.queryIdx].pt.y))[<span class="built_in"><span class="keyword">int</span></span>(keypoints_1[m.queryIdx].pt.x)]; <span class="comment">// è·å–ç¬¬ä¸€å¸§å›¾åƒåŒ¹é…çš„æ¯ä¸ªç‰¹å¾ç‚¹çš„æ·±åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (d == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">float</span> dd = d / <span class="number">5000.0</span>;</span><br><span class="line">    Point2d p1 = <span class="built_in">pixel2cam</span>(keypoints_1[m.queryIdx].pt, K); <span class="comment">// p1:(X/Z,Y/Z,1)</span></span><br><span class="line">    <span class="comment">// å°†ç›¸æœºå½’ä¸€åŒ–åæ ‡è½¬æ¢ä¸ºç›¸æœºåæ ‡ç³»ä¸‹çš„3Dç»„åæ ‡</span></span><br><span class="line">    pts_3d.<span class="built_in">push_back</span>(<span class="built_in">Point3f</span>(p1.x * dd, p1.y * dd, dd));   <span class="comment">// (X,Y,Z)ç¬¬ä¸€å¸§å›¾åƒçš„3Dåæ ‡ï¼ˆç›¸æœºåæ ‡ç³»ä¸‹ï¼‰</span></span><br><span class="line">    pts_2d.<span class="built_in">push_back</span>(keypoints_2[m.trainIdx].pt);          <span class="comment">// ç¬¬äºŒå¸§å›¾åƒçš„åƒç´ åæ ‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºä¸€å¯¹åŒ¹é…ç‚¹ï¼Œå…¶ä¸­ä¸€ä¸ªç‚¹æ˜¯ç¬¬ä¸€å¸§å›¾åƒä¸­çš„åƒç´ ç‚¹ï¼Œæˆ‘ä»¬å°†å®ƒçš„$2D$åæ ‡<code>keypoints_1[m.queryIdx].pt</code>è½¬æ¢æˆäº†ç›¸æœºåæ ‡ç³»ä¸‹çš„$3D$ç‚¹ï¼Œå¹¶å°†è½¬æ¢åçš„$3D$åæ ‡ç³»å­˜å…¥å®¹å™¨<code>pts_3d</code>å†…ï¼›å¦ä¸€ä¸ªç‚¹æ˜¯ç¬¬äºŒå¸§å›¾åƒä¸­çš„åƒç´ ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥è·å¾—å®ƒçš„$2D$åæ ‡<code>keypoints_2[m.trainIdx].pt</code>ï¼Œå¹¶å°†å…¶å­˜å…¥å®¹å™¨<code>pts_2d</code>å†…ï¼›</p>
<h2 id="3-æ±‚è§£PnP"><a href="#3-æ±‚è§£PnP" class="headerlink" title="3.æ±‚è§£PnP"></a>3.æ±‚è§£PnP</h2><p>è¿™é‡Œä½¿ç”¨<code>EPnP</code>æ–¹æ³•æ±‚è§£<code>PnP</code>ï¼Œç›´æ¥è°ƒç”¨æ–¹æ³•å³å¯ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨EPnPæ–¹æ³•æ±‚è§£PnP</span></span><br><span class="line">Mat r, t;</span><br><span class="line"><span class="built_in">solvePnP</span>(pts_3d, pts_2d, K, <span class="built_in">Mat</span>(), r, t, <span class="literal">false</span>, cv::SOLVEPNP_EPNP);</span><br><span class="line">Mat R;</span><br><span class="line">cv::<span class="built_in">Rodrigues</span>(r, R); <span class="comment">// rä¸ºæ—‹è½¬å‘é‡å½¢å¼ï¼Œç”¨Rodrigueså…¬å¼è½¬æ¢ä¸ºçŸ©é˜µ</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;R=&quot;</span> &lt;&lt; endl</span><br><span class="line">    &lt;&lt; R &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;t=&quot;</span> &lt;&lt; endl</span><br><span class="line">    &lt;&lt; t &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<p>Parameters:</p>
<ul>
<li>objectPoints - ä¸–ç•Œåæ ‡ç³»ä¸‹çš„æ§åˆ¶ç‚¹çš„åæ ‡</li>
<li>imagePoints - åœ¨åƒç´ åæ ‡ç³»ä¸‹å¯¹åº”çš„æ§åˆ¶ç‚¹çš„åæ ‡</li>
<li>cameraMatrix - ç›¸æœºçš„å†…å‚çŸ©é˜µ</li>
<li>distCoeffs - ç›¸æœºçš„ç•¸å˜ç³»æ•°</li>
<li>rvec - è¾“å‡ºçš„æ—‹è½¬å‘é‡</li>
<li>tvec - è¾“å‡ºçš„å¹³ç§»å‘é‡</li>
<li><p>flags - é»˜è®¤ä½¿ç”¨CV_ITERATIVè¿­ä»£æ³•</p>
</li>
<li><p>SolvePnPMethod-é€‰æ‹©æ–¹æ³•</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">SolvePnPMethod</span> &#123;</span></span><br><span class="line">    SOLVEPNP_ITERATIVE   = <span class="number">0</span>,</span><br><span class="line">    SOLVEPNP_EPNP        = <span class="number">1</span>, </span><br><span class="line">    SOLVEPNP_P3P         = <span class="number">2</span>, </span><br><span class="line">    SOLVEPNP_DLS         = <span class="number">3</span>,</span><br><span class="line">    SOLVEPNP_UPNP        = <span class="number">4</span>, </span><br><span class="line">    SOLVEPNP_AP3P        = <span class="number">5</span>, </span><br><span class="line">    SOLVEPNP_IPPE        = <span class="number">6</span>, </span><br><span class="line">    SOLVEPNP_IPPE_SQUARE = <span class="number">7</span>,                           </span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CV_DOXYGEN</span></span><br><span class="line">    SOLVEPNP_MAX_COUNT </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ‰“å°è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">R=</span><br><span class="line">[0.9978745555297591, -0.05102729297915373, 0.04052883908410459;</span><br><span class="line"> 0.04983267620066928, 0.9983081506312504, 0.02995898472731967;</span><br><span class="line"> -0.04198899628432293, -0.02787564805402974, 0.9987291286613218]</span><br><span class="line">t=</span><br><span class="line">[-0.1273034869580363;</span><br><span class="line"> -0.01157187487421139;</span><br><span class="line"> 0.05667408337434332]</span><br></pre></td></tr></table></figure>
<h2 id="4-ä½¿ç”¨BAä¼˜åŒ–"><a href="#4-ä½¿ç”¨BAä¼˜åŒ–" class="headerlink" title="4.ä½¿ç”¨BAä¼˜åŒ–"></a>4.ä½¿ç”¨BAä¼˜åŒ–</h2><p>åœ¨ä½¿ç”¨ g2o ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æŠŠé—®é¢˜å»ºæ¨¡æˆä¸€ä¸ªæœ€å°äºŒä¹˜çš„å›¾ä¼˜åŒ–é—®é¢˜ï¼ŒèŠ‚ç‚¹å’Œè¾¹çš„é€‰æ‹©ï¼š</p>
<ol>
<li><p><strong>èŠ‚ç‚¹ï¼š</strong>ç¬¬äºŒä¸ªç›¸æœºçš„ä½å§¿èŠ‚ç‚¹ $Î¾ âˆˆ se(3)$ï¼Œä»¥åŠæ‰€æœ‰ç‰¹å¾ç‚¹çš„ç©ºé—´ä½ç½® $P âˆˆ \mathbb{R}^3 $ã€‚</p>
</li>
<li><p><strong>è¾¹ï¼š</strong>æ¯ä¸ª$ 3D$ ç‚¹åœ¨ç¬¬äºŒä¸ªç›¸æœºä¸­çš„æŠ•å½±ï¼Œä»¥è§‚æµ‹æ–¹ç¨‹æ¥æè¿°ï¼š</p>
<script type="math/tex; mode=display">
z_j = h(Î¾, P_j ).</script></li>
</ol>
<p>ç”±äºç¬¬ä¸€ä¸ªç›¸æœºä½å§¿å›ºå®šä¸ºé›¶ï¼Œæˆ‘ä»¬æ²¡æœ‰æŠŠå®ƒå†™åˆ°ä¼˜åŒ–å˜é‡é‡Œï¼Œä½†åœ¨ä¹ é¢˜ä¸­ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½å¤ŸæŠŠç¬¬ä¸€ä¸ªç›¸æœºçš„ä½å§¿ä¸è§‚æµ‹ä¹Ÿè€ƒè™‘è¿›æ¥ã€‚ç°åœ¨æˆ‘ä»¬æ ¹æ®ä¸€ç»„ $3D $ç‚¹å’Œç¬¬äºŒä¸ªå›¾åƒä¸­çš„ $2D $æŠ•å½±ï¼Œä¼°è®¡ç¬¬äºŒä¸ªç›¸æœºçš„ä½å§¿ã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªç›¸æœºç”»æˆè™šçº¿ï¼Œè¡¨æ˜æˆ‘ä»¬ä¸å¸Œæœ›è€ƒè™‘å®ƒã€‚</p>
<p><img src="/images/æ±‚è§£PnPå¹¶ä½¿ç”¨BAä¼˜åŒ–/image-20220326112157782.png" alt="image-20220326112157782" style="zoom:50%;" /></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨BAä¼˜åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bundleAdjustment</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;cv::Point3f&gt; &amp;points_3d,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> vector&lt;cv::Point2f&gt; &amp;points_2d,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;K,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;R,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// æ„å»ºå›¾ä¼˜åŒ–ï¼Œå…ˆè®¾å®šg2o</span></span><br><span class="line">    <span class="comment">// æ¯ä¸ªè¯¯å·®é¡¹ä¼˜åŒ–å˜é‡ç»´åº¦ä¸º6(å³ä¸ºse3æä»£æ•°çš„ç»´æ•°ï¼Œå‰ä¸‰ç»´ä¸ºå¹³ç§»ï¼Œåä¸‰ç»´ä¸ºæ—‹è½¬)</span></span><br><span class="line">    <span class="comment">// è¯¯å·®å€¼ç»´åº¦ä¸º3(æ¯ä¸ª3Dç‚¹åœ¨ç¬¬äºŒä¸ªç›¸æœºä¸­çš„æŠ•å½±)</span></span><br><span class="line">    <span class="keyword">typedef</span> g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;<span class="number">6</span>, <span class="number">3</span>&gt;&gt; Block;</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–çº¿æ€§æ–¹ç¨‹æ±‚è§£å™¨</span></span><br><span class="line">    Block::LinearSolverType *linearSolver = <span class="keyword">new</span> g2o::LinearSolverCSparse&lt;Block::PoseMatrixType&gt;();</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–çŸ©é˜µå—æ±‚è§£å™¨</span></span><br><span class="line">    Block *solver_ptr = <span class="keyword">new</span> <span class="built_in">Block</span>(unique_ptr&lt;Block::LinearSolverType&gt;(linearSolver));</span><br><span class="line">    <span class="comment">// æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œä»GN(é«˜æ–¯ç‰›é¡¿), LMï¼ˆåˆ—æ–‡ä¼¯æ ¼ï¼‰, DogLeg ä¸­é€‰</span></span><br><span class="line">    g2o::OptimizationAlgorithmLevenberg *solver = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmLevenberg</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line"></span><br><span class="line">    g2o::SparseOptimizer optimizer; <span class="comment">// å›¾æ¨¡å‹</span></span><br><span class="line">    optimizer.<span class="built_in">setAlgorithm</span>(solver); <span class="comment">//è®¾ç½®æ±‚è§£å™¨ï¼ˆä½¿ç”¨LMæ–¹æ³•ï¼‰</span></span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);     <span class="comment">// æ‰“å¼€è°ƒè¯•è¾“å‡º</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.è®¾ç½®èŠ‚ç‚¹</span></span><br><span class="line">    <span class="comment">// ä¼˜åŒ–ç¬¬äºŒä¸ªç›¸æœºçš„ä½å§¿</span></span><br><span class="line">    g2o::VertexSE3Expmap *pose = <span class="keyword">new</span> g2o::<span class="built_in">VertexSE3Expmap</span>();</span><br><span class="line">    Eigen::Matrix3d R_mat;</span><br><span class="line">    R_mat &lt;&lt; R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">2</span>),</span><br><span class="line">        R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">        R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    pose-&gt;<span class="built_in">setId</span>(<span class="number">0</span>);</span><br><span class="line">    pose-&gt;<span class="built_in">setEstimate</span>(g2o::<span class="built_in">SE3Quat</span>(</span><br><span class="line">        R_mat,</span><br><span class="line">        Eigen::<span class="built_in">Vector3d</span>(t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">0</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">0</span>))));</span><br><span class="line">    optimizer.<span class="built_in">addVertex</span>(pose);</span><br><span class="line">    <span class="comment">// ä¼˜åŒ–æ‰€æœ‰ç‰¹å¾ç‚¹çš„ç©ºé—´ä½ç½® P</span></span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> Point3f p : points_3d)</span><br><span class="line">    &#123;</span><br><span class="line">        g2o::VertexPointXYZ *point = <span class="keyword">new</span> g2o::<span class="built_in">VertexPointXYZ</span>();</span><br><span class="line">        point-&gt;<span class="built_in">setId</span>(index++);</span><br><span class="line">        point-&gt;<span class="built_in">setEstimate</span>(Eigen::<span class="built_in">Vector3d</span>(p.x, p.y, p.z));</span><br><span class="line">        point-&gt;<span class="built_in">setMarginalized</span>(<span class="literal">true</span>); <span class="comment">// g2o ä¸­å¿…é¡»è®¾ç½® marg å‚è§ç¬¬åè®²å†…å®¹</span></span><br><span class="line">        optimizer.<span class="built_in">addVertex</span>(point);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‡†å¤‡ç›¸æœºå‚æ•°</span></span><br><span class="line">    g2o::CameraParameters *camera = <span class="keyword">new</span> g2o::<span class="built_in">CameraParameters</span>(</span><br><span class="line">        K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>), Eigen::<span class="built_in">Vector2d</span>(K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">2</span>), K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">2</span>)), <span class="number">0</span>);</span><br><span class="line">    camera-&gt;<span class="built_in">setId</span>(<span class="number">0</span>);</span><br><span class="line">    optimizer.<span class="built_in">addParameter</span>(camera);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è®¾ç½®è¾¹(æ¯ä¸ª 3D ç‚¹åœ¨ç¬¬äºŒä¸ªç›¸æœºä¸­çš„æŠ•å½±)</span></span><br><span class="line">    index = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> Point2f p : points_2d)</span><br><span class="line">    &#123;</span><br><span class="line">        g2o::EdgeProjectXYZ2UV *edge = <span class="keyword">new</span> g2o::<span class="built_in">EdgeProjectXYZ2UV</span>();</span><br><span class="line">        edge-&gt;<span class="built_in">setId</span>(index);</span><br><span class="line">        edge-&gt;<span class="built_in">setVertex</span>(<span class="number">0</span>, <span class="keyword">dynamic_cast</span>&lt;g2o::VertexPointXYZ *&gt;(optimizer.<span class="built_in">vertex</span>(index)));</span><br><span class="line">        edge-&gt;<span class="built_in">setVertex</span>(<span class="number">1</span>, pose);</span><br><span class="line">        edge-&gt;<span class="built_in">setMeasurement</span>(Eigen::<span class="built_in">Vector2d</span>(p.x, p.y));</span><br><span class="line">        edge-&gt;<span class="built_in">setParameterId</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        edge-&gt;<span class="built_in">setInformation</span>(Eigen::Matrix2d::<span class="built_in">Identity</span>());</span><br><span class="line">        optimizer.<span class="built_in">addEdge</span>(edge);</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.ä¼˜åŒ–</span></span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);</span><br><span class="line">    optimizer.<span class="built_in">initializeOptimization</span>();</span><br><span class="line">    optimizer.<span class="built_in">optimize</span>(<span class="number">100</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;after optimization: \n&quot;</span></span><br><span class="line">         &lt;&lt; <span class="string">&quot;T= \n&quot;</span></span><br><span class="line">         &lt;&lt; Eigen::<span class="built_in">Isometry3d</span>(pose-&gt;<span class="built_in">estimate</span>()).<span class="built_in">matrix</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">5</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥ä¸¤å¼ å½©è‰²å›¾ä»¥åŠå¯¹åº”çš„æ·±åº¦å›¾ï¼šimg1 img2 depth1 depth2&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//-- è¯»å–å›¾åƒ</span></span><br><span class="line">    Mat img_1 = <span class="built_in">imread</span>(argv[<span class="number">1</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line">    Mat img_2 = <span class="built_in">imread</span>(argv[<span class="number">2</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line">    <span class="comment">// 1. ç‰¹å¾åŒ¹é…</span></span><br><span class="line">    vector&lt;KeyPoint&gt; keypoints_1, keypoints_2;</span><br><span class="line">    vector&lt;DMatch&gt; matches;</span><br><span class="line">    <span class="built_in">find_feature_matches</span>(img_1, img_2, keypoints_1, keypoints_2, matches);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å›¾ä¸€æ‰¾åˆ°&quot;</span> &lt;&lt; keypoints_1.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;ä¸ªå…³é”®ç‚¹&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å›¾äºŒæ‰¾åˆ°&quot;</span> &lt;&lt; keypoints_2.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;ä¸ªå…³é”®ç‚¹&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç­›é€‰åä¸€å…±&quot;</span> &lt;&lt; matches.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;ç»„åŒ¹é…ç‚¹&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºç«‹3Dç‚¹</span></span><br><span class="line">    Mat d1 = <span class="built_in">imread</span>(argv[<span class="number">3</span>], CV_LOAD_IMAGE_UNCHANGED); <span class="comment">// æ·±åº¦å›¾ä¸º16ä½æ— ç¬¦å·æ•°ï¼Œå•é€šé“å›¾åƒ</span></span><br><span class="line">    Mat K = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; <span class="number">520.9</span>, <span class="number">0</span>, <span class="number">325.1</span>, <span class="number">0</span>, <span class="number">521.0</span>, <span class="number">249.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    vector&lt;Point3f&gt; pts_3d;</span><br><span class="line">    vector&lt;Point2f&gt; pts_2d;</span><br><span class="line">    <span class="comment">//æå–ç‰¹å¾ç‚¹çš„æ·±åº¦å€¼ï¼š</span></span><br><span class="line">    <span class="keyword">for</span> (DMatch m : matches)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å–å¾—åŒ¹é…ç‚¹çš„æ·±åº¦ï¼ŒqueryIdx(è¡¨ç¤ºåŒ¹é…ç‚¹çš„ç´¢å¼•)æŸ¥è¯¢æè¿°å­ç´¢å¼•ï¼Œptå…³é”®ç‚¹çš„åæ ‡ (yè¡Œåœ°å€)[xåˆ—åœ°å€]</span></span><br><span class="line">        ushort d = d1.ptr&lt;<span class="keyword">unsigned</span> <span class="keyword">short</span>&gt;(<span class="built_in"><span class="keyword">int</span></span>(keypoints_1[m.queryIdx].pt.y))[<span class="built_in"><span class="keyword">int</span></span>(keypoints_1[m.queryIdx].pt.x)];</span><br><span class="line">        <span class="keyword">if</span> (d == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">float</span> dd = d / <span class="number">5000.0</span>;</span><br><span class="line">        Point2d p1 = <span class="built_in">pixel2cam</span>(keypoints_1[m.queryIdx].pt, K); <span class="comment">// p1:(X/Z,Y/Z,1)</span></span><br><span class="line">        <span class="comment">// å°†ç›¸æœºå½’ä¸€åŒ–åæ ‡è½¬æ¢ä¸ºç›¸æœºåæ ‡ç³»ä¸‹çš„3Dç»„åæ ‡</span></span><br><span class="line">        pts_3d.<span class="built_in">push_back</span>(<span class="built_in">Point3f</span>(p1.x * dd, p1.y * dd, dd)); <span class="comment">// (X,Y,Z)ç¬¬ä¸€å¸§å›¾åƒçš„3Dåæ ‡ï¼ˆç›¸æœºåæ ‡ç³»ä¸‹ï¼‰</span></span><br><span class="line">        pts_2d.<span class="built_in">push_back</span>(keypoints_2[m.trainIdx].pt);        <span class="comment">// ç¬¬äºŒå¸§å›¾åƒçš„åƒç´ åæ ‡</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;3d-2d pairs: &quot;</span> &lt;&lt; pts_3d.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨EPnPæ–¹æ³•æ±‚è§£PnP</span></span><br><span class="line">    Mat r, t;</span><br><span class="line">    <span class="built_in">solvePnP</span>(pts_3d, pts_2d, K, <span class="built_in">Mat</span>(), r, t, <span class="literal">false</span>, cv::SOLVEPNP_EPNP);</span><br><span class="line">    Mat R;</span><br><span class="line">    cv::<span class="built_in">Rodrigues</span>(r, R); <span class="comment">// rä¸ºæ—‹è½¬å‘é‡å½¢å¼ï¼Œç”¨Rodrigueså…¬å¼è½¬æ¢ä¸ºçŸ©é˜µ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;R=&quot;</span> &lt;&lt; endl</span><br><span class="line">         &lt;&lt; R &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;t=&quot;</span> &lt;&lt; endl</span><br><span class="line">         &lt;&lt; t &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨BAä¼˜åŒ–</span></span><br><span class="line">    <span class="built_in">bundleAdjustment</span>(pts_3d, pts_2d, K, R, t);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( pose_estimation_3d2d )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14 -O3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ cmakeæ¨¡å—ä»¥ä½¿ç”¨g2o</span></span><br><span class="line"><span class="keyword">list</span>( APPEND CMAKE_MODULE_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/cmake_modules )</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV <span class="number">3.1</span> REQUIRED )</span><br><span class="line"><span class="comment"># find_package( OpenCV REQUIRED ) # use this if in OpenCV2 </span></span><br><span class="line"><span class="keyword">find_package</span>( G2O REQUIRED )</span><br><span class="line"><span class="keyword">find_package</span>( CSparse REQUIRED )</span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>( </span><br><span class="line">    <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> </span><br><span class="line">    <span class="variable">$&#123;G2O_INCLUDE_DIRS&#125;</span></span><br><span class="line">    <span class="variable">$&#123;CSPARSE_INCLUDE_DIR&#125;</span></span><br><span class="line">    <span class="string">&quot;/usr/include/eigen3/&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( pose_estimation_3d2d pose_estimation_3d2d.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( pose_estimation_3d2d </span><br><span class="line">   <span class="variable">$&#123;OpenCV_LIBS&#125;</span></span><br><span class="line">   <span class="variable">$&#123;CSPARSE_LIBRARY&#125;</span></span><br><span class="line">   g2o_core g2o_stuff g2o_types_sba g2o_csparse_extension g2o_types_slam3d <span class="variable">$&#123;CSPARSE_LIBRARY&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æ‰“å°è¾“å‡ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">max_dist: <span class="number">94</span></span><br><span class="line">min_dist: <span class="number">4</span></span><br><span class="line">å›¾ä¸€æ‰¾åˆ°<span class="number">500</span>ä¸ªå…³é”®ç‚¹</span><br><span class="line">å›¾äºŒæ‰¾åˆ°<span class="number">500</span>ä¸ªå…³é”®ç‚¹</span><br><span class="line">ç­›é€‰åä¸€å…±<span class="number">79</span>ç»„åŒ¹é…ç‚¹</span><br><span class="line"><span class="number">3</span>d<span class="number">-2</span>d pairs: <span class="number">75</span></span><br><span class="line">R=</span><br><span class="line">[<span class="number">0.9978745555297591</span>, <span class="number">-0.05102729297915373</span>, <span class="number">0.04052883908410459</span>;</span><br><span class="line"> <span class="number">0.04983267620066928</span>, <span class="number">0.9983081506312504</span>, <span class="number">0.02995898472731967</span>;</span><br><span class="line"> <span class="number">-0.04198899628432293</span>, <span class="number">-0.02787564805402974</span>, <span class="number">0.9987291286613218</span>]</span><br><span class="line">t=</span><br><span class="line">[<span class="number">-0.1273034869580363</span>;</span><br><span class="line"> <span class="number">-0.01157187487421139</span>;</span><br><span class="line"> <span class="number">0.05667408337434332</span>]</span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">0.003377</span>  time= <span class="number">0.000995841</span>       cumTime= <span class="number">0.000995841</span>    edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">78.129155</span>         levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">1</span>     chi2= <span class="number">0.000000</span>  time= <span class="number">5.9011e-05</span>        cumTime= <span class="number">0.00105485</span>     edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">52.086103</span>         levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">2</span>     chi2= <span class="number">0.000000</span>  time= <span class="number">6.0375e-05</span>        cumTime= <span class="number">0.00111523</span>     edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">34.724069</span>         levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">3</span>     chi2= <span class="number">0.000000</span>  time= <span class="number">2.4488e-05</span>        cumTime= <span class="number">0.00113971</span>     edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">23.149379</span>         levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">4</span>     chi2= <span class="number">0.000000</span>  time= <span class="number">2.3559e-05</span>        cumTime= <span class="number">0.00116327</span>     edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">15.432920</span>         levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">5</span>     chi2= <span class="number">0.000000</span>  time= <span class="number">2.3493e-05</span>        cumTime= <span class="number">0.00118677</span>     edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">10.288613</span>         levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">6</span>     chi2= <span class="number">0.000000</span>  time= <span class="number">2.3716e-05</span>        cumTime= <span class="number">0.00121048</span>     edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">6.859075</span>  levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">7</span>     chi2= <span class="number">0.000000</span>  time= <span class="number">2.3546e-05</span>        cumTime= <span class="number">0.00123403</span>     edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">4.572717</span>  levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">8</span>     chi2= <span class="number">0.000000</span>  time= <span class="number">0.000333687</span>       cumTime= <span class="number">0.00156772</span>     edges= <span class="number">75</span>       schur= <span class="number">1</span>        lambda= <span class="number">1227479343.475617</span>    levenbergIter= <span class="number">7</span></span><br><span class="line">after optimization: </span><br><span class="line">T= </span><br><span class="line">  <span class="number">0.997852</span> <span class="number">-0.0508704</span>  <span class="number">0.0412729</span>  <span class="number">-0.128668</span></span><br><span class="line"> <span class="number">0.0496577</span>   <span class="number">0.998319</span>  <span class="number">0.0298962</span> <span class="number">-0.0113707</span></span><br><span class="line"><span class="number">-0.0427243</span> <span class="number">-0.0277825</span>   <span class="number">0.998701</span>  <span class="number">0.0581576</span></span><br><span class="line">         <span class="number">0</span>          <span class="number">0</span>          <span class="number">0</span>          <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>è¿­ä»£ 8è½®åï¼Œ$LM $å‘ç°ä¼˜åŒ–ç›®æ ‡å‡½æ•°æ¥è¿‘ä¸å˜ï¼Œäºæ˜¯åœæ­¢äº†ä¼˜åŒ–ã€‚æˆ‘ä»¬è¾“å‡ºäº†æœ€åå¾—åˆ°ä½å§¿å˜æ¢çŸ©é˜µ$ T$ ï¼Œå¯¹æ¯”ä¹‹å‰ç›´æ¥åš $PnP $çš„ç»“æœï¼Œå¤§çº¦åœ¨å°æ•°ç‚¹åç¬¬ä¸‰ä½å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚è¿™ä¸»è¦æ˜¯ç”±äºæˆ‘ä»¬åŒæ—¶ä¼˜åŒ–äº†ç‰¹å¾ç‚¹å’Œç›¸æœºä½å§¿å¯¼è‡´çš„ã€‚</p>
<p>$Bundle Adjustment $æ˜¯ä¸€ç§é€šç”¨çš„åšæ³•ã€‚å®ƒå¯ä»¥ä¸é™äºä¸¤ä¸ªå›¾åƒã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥æ”¾å…¥å¤šä¸ªå›¾åƒåŒ¹é…åˆ°çš„ä½å§¿å’Œç©ºé—´ç‚¹è¿›è¡Œè¿­ä»£ä¼˜åŒ–ï¼Œç”šè‡³å¯ä»¥æŠŠæ•´ä¸ª$ SLAM$ è¿‡ç¨‹æ”¾è¿›æ¥ã€‚é‚£ç§åšæ³•è§„æ¨¡è¾ƒå¤§ï¼Œä¸»è¦åœ¨åç«¯ä½¿ç”¨ã€‚åœ¨å‰ç«¯ï¼Œæˆ‘ä»¬é€šå¸¸è€ƒè™‘å±€éƒ¨ç›¸æœºä½å§¿å’Œç‰¹å¾ç‚¹çš„å°å‹ $Bundle Adjustment $é—®é¢˜ï¼Œå¸Œæœ›å®æ—¶å¯¹å®ƒè¿›è¡Œæ±‚è§£å’Œä¼˜åŒ–ã€‚</p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>BAä¸å›¾ä¼˜åŒ–</tag>
        <tag>PNP</tag>
      </tags>
  </entry>
  <entry>
    <title>mdå…¬å¼ç§¯ç´¯</title>
    <url>/posts/58388.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>Makedownå¸¸ç”¨ç¬¦å·ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="çŸ©é˜µï¼š"><a href="#çŸ©é˜µï¼š" class="headerlink" title="çŸ©é˜µï¼š"></a>çŸ©é˜µï¼š</h1><ul>
<li>matrix</li>
</ul>
<script type="math/tex; mode=display">
\begin{matrix}
f_x &0 &c_x\\0 &f_y &c_y\\0&0 &1
\end{matrix}</script><ul>
<li>pmatrix</li>
</ul>
<script type="math/tex; mode=display">
\begin{pmatrix}
f_x &0 &c_x\\0 &f_y &c_y\\0&0 &1
\end{pmatrix}</script><ul>
<li>bmatrix</li>
</ul>
<script type="math/tex; mode=display">
\begin{bmatrix}
f_x &0 &c_x\\0 &f_y &c_y\\0&0 &1
\end{bmatrix}</script><ul>
<li>Bmatrix</li>
</ul>
<script type="math/tex; mode=display">
\begin{Bmatrix}
f_x &0 &c_x\\0 &f_y &c_y\\0&0 &1
\end{Bmatrix}</script><ul>
<li>vmatrix</li>
</ul>
<script type="math/tex; mode=display">
\begin{vmatrix}
f_x &0 &c_x\\0 &f_y &c_y\\0&0 &1
\end{vmatrix}</script><ul>
<li>Vmatrix</li>
</ul>
<script type="math/tex; mode=display">
\begin{Vmatrix}
f_x &0 &c_x\\0 &f_y &c_y\\0&0 &1
\end{Vmatrix}</script><h1 id="çº¦ç­‰äºï¼Œä¸‰è§’å½¢"><a href="#çº¦ç­‰äºï¼Œä¸‰è§’å½¢" class="headerlink" title="çº¦ç­‰äºï¼Œä¸‰è§’å½¢"></a>çº¦ç­‰äºï¼Œä¸‰è§’å½¢</h1><script type="math/tex; mode=display">
e(x+\Delta x)\approx e(x)+J\Delta x</script><h1 id="é›†åˆç¬¦å·"><a href="#é›†åˆç¬¦å·" class="headerlink" title="é›†åˆç¬¦å·"></a>é›†åˆç¬¦å·</h1><div class="table-container">
<table>
<thead>
<tr>
<th>\in</th>
<th>âˆˆ</th>
<th>å±äº</th>
</tr>
</thead>
<tbody>
<tr>
<td>\notin</td>
<td>âˆ‰</td>
<td>ä¸å±äº</td>
</tr>
<tr>
<td>\subset</td>
<td>âŠ‚</td>
<td>çœŸå­é›†</td>
</tr>
<tr>
<td>\not \subset</td>
<td>âŠ‚Ì¸</td>
<td>éå­é›†</td>
</tr>
<tr>
<td>\subseteq</td>
<td>âŠ†</td>
<td>å­é›†</td>
</tr>
<tr>
<td>\supset</td>
<td>âŠƒ</td>
<td>è¶…é›†</td>
</tr>
<tr>
<td>\supseteq</td>
<td>âŠ‡</td>
<td>è¶…é›†</td>
</tr>
<tr>
<td>\cup</td>
<td>âˆª</td>
<td>å¹¶é›†</td>
</tr>
<tr>
<td>\cap</td>
<td>âˆ©</td>
<td>äº¤é›†</td>
</tr>
<tr>
<td>\mathbb{R}</td>
<td>R</td>
<td>å®æ•°é›†</td>
</tr>
<tr>
<td>\emptyset</td>
<td>âˆ…</td>
<td>ç©ºé›†</td>
</tr>
</tbody>
</table>
</div>
<h1 id="å¸Œè…Šç¬¦å·"><a href="#å¸Œè…Šç¬¦å·" class="headerlink" title="å¸Œè…Šç¬¦å·"></a>å¸Œè…Šç¬¦å·</h1><div class="table-container">
<table>
<thead>
<tr>
<th>\alpha</th>
<th>Î±</th>
</tr>
</thead>
<tbody>
<tr>
<td>\beta</td>
<td>Î²</td>
</tr>
<tr>
<td>\gamma</td>
<td>Î³</td>
</tr>
<tr>
<td>\Gamma</td>
<td>Î“</td>
</tr>
<tr>
<td>\theta</td>
<td>Î¸</td>
</tr>
<tr>
<td>\Theta</td>
<td>Î˜</td>
</tr>
<tr>
<td>\delta</td>
<td>Î´</td>
</tr>
<tr>
<td>\Delta</td>
<td>Î”</td>
</tr>
<tr>
<td>\triangledown</td>
<td>â–½</td>
</tr>
<tr>
<td>\epsilon</td>
<td>Ïµ</td>
</tr>
<tr>
<td>\zeta</td>
<td>Î¶</td>
</tr>
<tr>
<td>\eta</td>
<td>Î·</td>
</tr>
<tr>
<td>\kappa</td>
<td>Îº</td>
</tr>
<tr>
<td>\lambda</td>
<td>Î»</td>
</tr>
<tr>
<td>\mu</td>
<td>Î¼</td>
</tr>
<tr>
<td>\nu</td>
<td>Î½</td>
</tr>
<tr>
<td>\xi</td>
<td>Î¾</td>
</tr>
<tr>
<td>\pi</td>
<td>Ï€</td>
</tr>
<tr>
<td>\sigma</td>
<td>Ïƒ</td>
</tr>
<tr>
<td>\tau</td>
<td>Ï„</td>
</tr>
<tr>
<td>\upsilon</td>
<td>Ï…</td>
</tr>
<tr>
<td>\phi</td>
<td>Ï•</td>
</tr>
<tr>
<td>\omega</td>
<td>Ï‰</td>
</tr>
<tr>
<td>\rho</td>
<td>$\rho $</td>
</tr>
<tr>
<td>\mathbb{R}</td>
<td>$\mathbb{R}$</td>
</tr>
<tr>
<td>\parallel</td>
<td>$\parallel$</td>
</tr>
<tr>
<td>\prime</td>
<td>$\prime$</td>
</tr>
<tr>
<td>\neq</td>
<td>$ \neq$</td>
</tr>
<tr>
<td>\dot{x}</td>
<td>$\dot{x}$</td>
</tr>
<tr>
<td>\ddot{x}</td>
<td>$\ddot{x}$</td>
</tr>
<tr>
<td>\partial{x}</td>
<td>$\partial{x}$</td>
</tr>
</tbody>
</table>
</div>
<p>æé™</p>
<script type="math/tex; mode=display">
\lim\limits_{x\rightarrow\infty}\frac{1}{x} <span style="color:red;">æ–‡å­—</span></script><p><span style="color:red;">æ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡é€šè¿‡éçº¿æ€§ç³»ç»Ÿåå°±ä¸å†æ˜¯æ­£æ€çš„äº†ã€‚</span></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Ì¸=</th>
<th><script type="math/tex">\not=</script></th>
<th>ä¸ç­‰äº</th>
</tr>
</thead>
<tbody>
<tr>
<td>\not&gt;</td>
<td>$\not&gt;$</td>
<td>ä¸å¤§äº</td>
</tr>
<tr>
<td>\leq</td>
<td>$\leq$</td>
<td>å°äºç­‰äº</td>
</tr>
<tr>
<td>\geq</td>
<td>$\geq$</td>
<td>å¤§äºç­‰äº</td>
</tr>
</tbody>
</table>
</div>
<p>$\vec{a}$  å‘é‡<br>$\overline{a}$ å¹³å‡å€¼<br>$\widehat{a}$ (çº¿æ€§å›å½’ï¼Œç›´çº¿æ–¹ç¨‹) yå°–<br>$\widetilde{a}$ é¢šåŒ–ç¬¦å·  ç­‰ä»·æ— ç©·å°<br>$\dot{a}$   ä¸€é˜¶å¯¼æ•°<br>$\ddot{a}$  äºŒé˜¶å¯¼æ•°</p>
<p>â… ã€â…¡ã€â…¢ã€â…£ã€â…¤ã€â…¥ã€â…¦ã€â…§ã€â…¨ã€â…©ã€â…ª</p>
]]></content>
      <categories>
        <category>Makedown</category>
      </categories>
      <tags>
        <tag>Makedown</tag>
      </tags>
  </entry>
  <entry>
    <title>ch7_å¯¹æçº¦æŸæ±‚è§£ç›¸æœºè¿åŠ¨</title>
    <url>/posts/28122.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æˆ‘ä»¬ä»ä¸¤å¼ å›¾åƒä¸­ï¼Œå¯ä»¥å¾—åˆ°ä¸€å¯¹é…å¯¹å¥½çš„ç‰¹å¾ç‚¹ã€‚å¦‚æœæˆ‘ä»¬æœ‰è‹¥å¹²å¯¹è¿™æ ·çš„åŒ¹é…ç‚¹ï¼Œå°±å¯ä»¥é€šè¿‡è¿™äº›äºŒç»´å›¾åƒç‚¹çš„å¯¹åº”å…³ç³»ï¼Œæ¢å¤å‡ºåœ¨ä¸¤å¸§ä¹‹é—´æ‘„åƒæœºçš„è¿åŠ¨ã€‚æ•´ä¸ªæ¨å¯¼ç»“æœï¼Œä½¿ç”¨å¥½çš„åŒ¹é…ç‚¹å¾—åˆ°æœ¬è´¨çŸ©é˜µ$E$æˆ–è€…åŸºç¡€çŸ©é˜µ$F$æŠ‘æˆ–å•åº”çŸ©é˜µ$H$ï¼Œç„¶åé€šè¿‡å°†ä»–ä»¬åˆ†è§£æˆ$R,t$ï¼Œå°±å¯ä»¥æ¨ç®—ç›¸æœºçš„ä½å§¿ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><img src="/images/å¯¹æçº¦æŸæ±‚è§£ç›¸æœºè¿åŠ¨/image-20220325110120640.png" alt="image-20220325110120640" style="zoom:50%;" /></p>
<p>è®¾ $P$ çš„ç©ºé—´ä½ç½®ä¸ºï¼š</p>
<script type="math/tex; mode=display">
P=[X,Y,Z]^{T}</script><p>ç”±äºåƒç´ åæ ‡ä¸ä¸–ç•Œåæ ‡çš„å…³ç³»ä¸ºï¼š</p>
<script type="math/tex; mode=display">
Z \left(
\begin{matrix}
u\\ v\\ 1
\end{matrix}
\right)=
\left(
\begin{matrix}
f_x &0 &c_x\\
0   &f_y &c_y\\
0 &0 &1\\
\end{matrix}
\right)
\left(
\begin{matrix}
X\\ Y\\ Z
\end{matrix}
\right)=KP</script><p>ä¸¤ä¸ªåƒç´ ç‚¹ $p_1 , p_2 $çš„åƒç´ ä½ç½®ä¸º:</p>
<script type="math/tex; mode=display">
s_1p_1=KPï¼Œs_2p_2=K(RP+t)</script><p>ä½¿ç”¨é½æ¬¡åæ ‡ï¼š</p>
<script type="math/tex; mode=display">
p_1=KPï¼Œp_2=K(RP+t)</script><p>å–ï¼š$x_1=K^{-1}p_1,x_2=K^{-1}p_2$,è¿™é‡Œçš„$ x_1 , x_2 $æ˜¯ä¸¤ä¸ªåƒç´ ç‚¹çš„å½’ä¸€åŒ–å¹³é¢ä¸Šçš„åæ ‡ã€‚</p>
<p>ä»£å…¥ä¸Šå¼:</p>
<script type="math/tex; mode=display">
x_2=Rx_1+t</script><p>ä¸¤è¾¹åŒæ—¶å·¦ä¹˜$t^{\land}$:</p>
<script type="math/tex; mode=display">
t^{\land}x_2=t^{\land}Rx_1</script><p>ä¸¤ä¾§åŒæ—¶å·¦ä¹˜$x_2^{T}$ï¼Œç”±$t^{\land}x_2$è¡¨ç¤º$t$ä¸$x_2$çš„å¤–ç§¯ï¼Œå¤–ç§¯çš„å®šä¹‰è¯´æ˜$t^{\land}x_2$ä¸$t$ã€$x_2$éƒ½æ˜¯å‚ç›´çš„ï¼Œæ•…è€Œï¼š</p>
<script type="math/tex; mode=display">
x_2^{T}t^{\land}x_2=x_2^{T}t^{\land}Rx_1=0\\
x_2^{T}Ex_1=0</script><p>å¸¦å…¥$p_1,p_2$:</p>
<script type="math/tex; mode=display">
p_2^{T}K^{-T}t^{\land}RK^{-1}p_1=0\\
p_2^{T}Fp_1=0</script><p>å› æ­¤éªŒè¯å¯¹æçº¦æŸï¼š</p>
<script type="math/tex; mode=display">
x_2^{T}t^{\land}Rx_1=0</script><h1 id="å¯¹æçº¦æŸæ±‚è§£ç›¸æœºè¿åŠ¨"><a href="#å¯¹æçº¦æŸæ±‚è§£ç›¸æœºè¿åŠ¨" class="headerlink" title="å¯¹æçº¦æŸæ±‚è§£ç›¸æœºè¿åŠ¨"></a>å¯¹æçº¦æŸæ±‚è§£ç›¸æœºè¿åŠ¨</h1><h2 id="1-ç‰¹å¾åŒ¹é…"><a href="#1-ç‰¹å¾åŒ¹é…" class="headerlink" title="1.ç‰¹å¾åŒ¹é…"></a>1.ç‰¹å¾åŒ¹é…</h2><p>è¿™ä¸€éƒ¨åˆ†çš„å®è·µæ˜¯åœ¨<a href="https://lukeyalvin.top/2022/03/24/ç‰¹å¾æå–/#more">ç‰¹å¾æå–ä¸åŒ¹é…</a>çš„åŸºç¡€ä¸Šè¿›è¡Œçš„ï¼Œå’Œä¹‹å‰çš„ç‰¹å¾åŒ¹é…æ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯è¿™é‡ŒæŠŠå®ƒå°è£…æˆä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯»æ‰¾ç‰¹å¾åŒ¹é…</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find_feature_matches</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;img_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;img_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;KeyPoint&gt; &amp;keypoints_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;KeyPoint&gt; &amp;keypoints_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;DMatch&gt; &amp;good_matches)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//-- åˆå§‹åŒ–</span></span><br><span class="line">    Mat descriptors_1, descriptors_2;                    <span class="comment">// å®šä¹‰æè¿°å­</span></span><br><span class="line">    Ptr&lt;FeatureDetector&gt; detector = ORB::<span class="built_in">create</span>();       <span class="comment">//åˆ›å»ºORBç‰¹å¾æ£€æµ‹å™¨</span></span><br><span class="line">    Ptr&lt;DescriptorExtractor&gt; descriptor = ORB::<span class="built_in">create</span>(); <span class="comment">//åˆ›å»ºORBç‰¹å¾æè¿°å­æå–.</span></span><br><span class="line">    Ptr&lt;DescriptorMatcher&gt; matcher = DescriptorMatcher::<span class="built_in">create</span>(<span class="string">&quot;BruteForce-Hamming&quot;</span>);</span><br><span class="line">    <span class="comment">//-- ç¬¬ä¸€æ­¥:æ£€æµ‹ Oriented FAST è§’ç‚¹ä½ç½®</span></span><br><span class="line">    detector-&gt;<span class="built_in">detect</span>(img_1, keypoints_1);</span><br><span class="line">    detector-&gt;<span class="built_in">detect</span>(img_2, keypoints_2);</span><br><span class="line">    <span class="comment">//-- ç¬¬äºŒæ­¥:æ ¹æ®è§’ç‚¹ä½ç½®è®¡ç®— BRIEF æè¿°å­</span></span><br><span class="line">    descriptor-&gt;<span class="built_in">compute</span>(img_1, keypoints_1, descriptors_1);</span><br><span class="line">    descriptor-&gt;<span class="built_in">compute</span>(img_2, keypoints_2, descriptors_2);</span><br><span class="line">    <span class="comment">//-- ç¬¬ä¸‰æ­¥:å¯¹ä¸¤å¹…å›¾åƒä¸­çš„BRIEFæè¿°å­è¿›è¡ŒåŒ¹é…ï¼Œä½¿ç”¨ Hamming è·ç¦»</span></span><br><span class="line">    vector&lt;DMatch&gt; matches;</span><br><span class="line">    matcher-&gt;<span class="built_in">match</span>(descriptors_1, descriptors_2, matches);</span><br><span class="line">    <span class="keyword">double</span> min_dist = <span class="number">10000</span>, max_dist = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; descriptors_1.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> dist = matches[i].distance;</span><br><span class="line">        <span class="keyword">if</span> (dist &lt; min_dist)</span><br><span class="line">            min_dist = dist;</span><br><span class="line">        <span class="keyword">if</span> (dist &gt; max_dist)</span><br><span class="line">            max_dist = dist;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å½“æè¿°å­ä¹‹é—´çš„è·ç¦»å¤§äºä¸¤å€çš„æœ€å°è·ç¦»æ—¶,å³è®¤ä¸ºåŒ¹é…æœ‰è¯¯.ä½†æœ‰æ—¶å€™æœ€å°è·ç¦»ä¼šéå¸¸å°,è®¾ç½®ä¸€ä¸ªç»éªŒå€¼30ä½œä¸ºä¸‹é™.</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; descriptors_1.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (matches[i].distance &lt;= <span class="built_in">max</span>(<span class="number">2</span> * min_dist, <span class="number">30.0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            good_matches.<span class="built_in">push_back</span>(matches[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Mat img_goodmatch;</span></span><br><span class="line">    <span class="comment">// drawMatches(img_1, keypoints_1, img_2, keypoints_2, good_matches, img_goodmatch);</span></span><br><span class="line">    <span class="comment">// imshow(&quot;ä¼˜åŒ–ååŒ¹é…ç‚¹å¯¹&quot;, img_goodmatch);</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-ä¼°è®¡ä¸¤å¼ å›¾åƒé—´è¿åŠ¨"><a href="#2-ä¼°è®¡ä¸¤å¼ å›¾åƒé—´è¿åŠ¨" class="headerlink" title="2.ä¼°è®¡ä¸¤å¼ å›¾åƒé—´è¿åŠ¨"></a>2.ä¼°è®¡ä¸¤å¼ å›¾åƒé—´è¿åŠ¨</h2><p>å½“æˆ‘ä»¬ç¡®å®šä¸¤å¸§å›¾åƒä¹‹é—´çš„ç‰¹å¾ç‚¹ä»¥åŠåŒ¹é…ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è‰¯å¥½çš„åŒ¹é…ç‚¹æ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ï¼Œè¿™é‡Œä¹Ÿæ˜¯å°è£…æˆäº†ä¸€ä¸ªå‡½æ•°ã€‚å¯ä»¥ä½¿ç”¨æœ¬è´¨çŸ©é˜µã€åŸºç¡€çŸ©é˜µæŠ‘æˆ–å•åº”çŸ©é˜µï¼Œå®ƒä»¬éƒ½æ˜¯å°è£…å¥½çš„å‡½æ•°ï¼Œä¼ å‚å³å¯ï¼Œä¸éœ€è¦ä¸ªäººå†™å®ç°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç›¸æœºä½å§¿ä¼°è®¡</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pose_estimation_2d2d</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;KeyPoint&gt; &amp;keypoints_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;KeyPoint&gt; &amp;keypoints_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    std::vector&lt;DMatch&gt; &amp;good_matches,</span></span></span><br><span class="line"><span class="params"><span class="function">    Mat &amp;R, Mat &amp;t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ç›¸æœºå†…å‚,TUM Freiburg2</span></span><br><span class="line">    Mat K = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; <span class="number">520.9</span>, <span class="number">0</span>, <span class="number">325.1</span>, <span class="number">0</span>, <span class="number">521.0</span>, <span class="number">249.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- æŠŠåŒ¹é…ç‚¹è½¬æ¢ä¸ºvector&lt;Point2f&gt;çš„å½¢å¼</span></span><br><span class="line">    vector&lt;Point2f&gt; points1;</span><br><span class="line">    vector&lt;Point2f&gt; points2;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)good_matches.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//`queryIdx` ä»£è¡¨çš„ç‰¹å¾ç‚¹åºåˆ—æ˜¯ `keypoints1` ä¸­çš„ï¼Œ</span></span><br><span class="line">        <span class="comment">//`trainIdx `ä»£è¡¨çš„ç‰¹å¾ç‚¹åºåˆ—æ˜¯` keypoints2 `ä¸­çš„ï¼Œæ­¤æ—¶è¿™ä¸¤å¼ å›¾ä¸­çš„ç‰¹å¾ç‚¹ç›¸äº’åŒ¹é…ã€‚</span></span><br><span class="line">        points1.<span class="built_in">push_back</span>(keypoints_1[good_matches[i].queryIdx].pt);</span><br><span class="line">        points2.<span class="built_in">push_back</span>(keypoints_2[good_matches[i].trainIdx].pt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//-- è®¡ç®—åŸºç¡€çŸ©é˜µ</span></span><br><span class="line">    Mat fundamental_matrix;</span><br><span class="line">    fundamental_matrix = <span class="built_in">findFundamentalMat</span>(points1, points2, CV_FM_8POINT); <span class="comment">// å…«ç‚¹æ³•æ±‚åŸºç¡€çŸ©é˜µ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;åŸºç¡€çŸ©é˜µFï¼š\n&quot;</span></span><br><span class="line">         &lt;&lt; fundamental_matrix &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- è®¡ç®—æœ¬è´¨çŸ©é˜µ</span></span><br><span class="line">    <span class="function">Point2d <span class="title">principal_point</span><span class="params">(<span class="number">325.1</span>, <span class="number">249.7</span>)</span></span>; <span class="comment">//ç›¸æœºå…‰å¿ƒ(cx cy), TUM datasetæ ‡å®šå€¼</span></span><br><span class="line">    <span class="keyword">double</span> focal_length = <span class="number">521</span>;             <span class="comment">//ç›¸æœºç„¦è·(fx fy), TUM datasetæ ‡å®šå€¼</span></span><br><span class="line">    Mat essential_matrix = <span class="built_in">findEssentialMat</span>(points1, points2, focal_length, principal_point);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æœ¬è´¨çŸ©é˜µEï¼š\n&quot;</span></span><br><span class="line">         &lt;&lt; essential_matrix &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- è®¡ç®—å•åº”çŸ©é˜µ</span></span><br><span class="line">    <span class="comment">// RANSACè¡¨ç¤ºåŸºäºRANSACçš„é²æ£’ç®—æ³•</span></span><br><span class="line">    <span class="comment">// ransacReprojThresholdå°†ç‚¹å¯¹è§†ä¸ºå†…ç‚¹çš„æœ€å¤§å…è®¸é‡æŠ•å½±é”™è¯¯é˜ˆå€¼ï¼ˆä»…ç”¨äºRANSACå’ŒRHOæ–¹æ³•ï¼‰ä¸€èˆ¬1-10</span></span><br><span class="line">    Mat homography_matrix = <span class="built_in">findHomography</span>(points1, points2, RANSAC, <span class="number">3</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å•åº”çŸ©é˜µHï¼š\n&quot;</span></span><br><span class="line">         &lt;&lt; homography_matrix &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- ä»æœ¬è´¨çŸ©é˜µä¸­æ¢å¤æ—‹è½¬å’Œå¹³ç§»ä¿¡æ¯.</span></span><br><span class="line">    <span class="built_in">recoverPose</span>(essential_matrix, points1, points2, R, t, focal_length, principal_point);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;R: \n&quot;</span></span><br><span class="line">         &lt;&lt; R &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;t: \n&quot;</span></span><br><span class="line">         &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-éªŒè¯å¯¹æçº¦æŸ"><a href="#3-éªŒè¯å¯¹æçº¦æŸ" class="headerlink" title="3.éªŒè¯å¯¹æçº¦æŸ"></a>3.éªŒè¯å¯¹æçº¦æŸ</h2><p>ä¸Šé¢å¯çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
x_2^{T}t^{\land}Rx_1=0</script><p>é¦–å…ˆï¼Œè¦çŸ¥é“åƒç´ åæ ‡è½¬ç›¸æœºå½’ä¸€åŒ–åæ ‡çš„æ–¹æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Point2d <span class="title">pixel2cam</span><span class="params">(<span class="keyword">const</span> Point2d &amp;p, <span class="keyword">const</span> Mat &amp;K)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å½’ä¸€åŒ–åæ ‡Pc(X/Z,Y/Z,1)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Point2d</span>(</span><br><span class="line">        (p.x - K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">2</span>)) / K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>), <span class="comment">// (u-cx)/fx = X/Z</span></span><br><span class="line">        (p.y - K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">2</span>)) / K.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">1</span>)  <span class="comment">// (v-cy)/fy = Y/Z</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤å¯ä»¥è·å¾—ä¸¤ä¸ªåƒç´ ç‚¹çš„å½’ä¸€åŒ–åæ ‡$(\frac{X}{Z},\frac{Y}{Z},1)$</p>
<p>å®ç°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Point2d pt1 = <span class="built_in">pixel2cam</span>(keypoints_1[m.queryIdx].pt, K); <span class="comment">// keypoints_1[m.queryIdx].ptä¸ºåƒç´ åæ ‡ï¼ŒKä¸ºç›¸æœºå†…å‚çŸ©é˜µ</span></span><br><span class="line">Mat y1 = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">1</span>) &lt;&lt; pt1.x, pt1.y, <span class="number">1</span>);       <span class="comment">// y1=(X/Z, Y/Z, 1) ç›¸æœºå½’ä¸€åŒ–åæ ‡</span></span><br><span class="line">Point2d pt2 = <span class="built_in">pixel2cam</span>(keypoints_2[m.trainIdx].pt, K);</span><br><span class="line">Mat y2 = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">1</span>) &lt;&lt; pt2.x, pt2.y, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>è·å¾—ä¸¤ä¸ªåƒç´ çš„å½’ä¸€åŒ–åæ ‡ä¹‹åï¼Œä½¿ç”¨$x_2^{T}t^{\land}Rx_1=0$ï¼Œè¿›è¡ŒéªŒè¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Mat d = y2.<span class="built_in">t</span>() * t_x * R * y1; <span class="comment">//  y2.t()è¡¨ç¤ºy2çš„è½¬ç½®ï¼Œt_xè¡¨ç¤ºt^</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;epipolar constraint = &quot;</span> &lt;&lt; d &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<p>è¿™ä»…ä»…æ˜¯ä¸€å¯¹åƒç´ ç‚¹ï¼Œæœ€ç»ˆæˆ‘ä»¬ä¼šå‘ç°è‰¯å¥½çš„åŒ¹é…ç‚¹ä¸€å…±æœ‰79å¯¹ï¼Œå› æ­¤éœ€è¦å†™ä¸€ä¸ªå¾ªç¯</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**************</span></span><br><span class="line"><span class="comment">* 3.éªŒè¯å¯¹æçº¦æŸ</span></span><br><span class="line"><span class="comment">**************/</span></span><br><span class="line">Mat K = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; <span class="number">520.9</span>, <span class="number">0</span>, <span class="number">325.1</span>, <span class="number">0</span>, <span class="number">521.0</span>, <span class="number">249.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> (DMatch m : good_matches)</span><br><span class="line">&#123;</span><br><span class="line">    Point2d pt1 = <span class="built_in">pixel2cam</span>(keypoints_1[m.queryIdx].pt, K); <span class="comment">// keypoints_1[m.queryIdx].ptä¸ºåƒç´ åæ ‡ï¼ŒKä¸ºç›¸æœºå†…å‚çŸ©é˜µ</span></span><br><span class="line">    Mat y1 = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">1</span>) &lt;&lt; pt1.x, pt1.y, <span class="number">1</span>);       <span class="comment">// y1=(X/Z, Y/Z, 1) ç›¸æœºå½’ä¸€åŒ–åæ ‡</span></span><br><span class="line">    Point2d pt2 = <span class="built_in">pixel2cam</span>(keypoints_2[m.trainIdx].pt, K);</span><br><span class="line">    Mat y2 = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">1</span>) &lt;&lt; pt2.x, pt2.y, <span class="number">1</span>);</span><br><span class="line">    Mat d = y2.<span class="built_in">t</span>() * t_x * R * y1; <span class="comment">//  y2.t()è¡¨ç¤ºy2çš„è½¬ç½®ï¼Œt_xè¡¨ç¤ºt^</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;epipolar constraint = &quot;</span> &lt;&lt; d &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ•´ä½“ä»£ç "><a href="#æ•´ä½“ä»£ç " class="headerlink" title="æ•´ä½“ä»£ç "></a>æ•´ä½“ä»£ç </h2><p>ä¸»å‡½æ•°ï¼Œå…¶ä¸­è°ƒç”¨çš„æ–¹æ³•ï¼Œå‰æ–‡å·²ç»åˆ—å‡º</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/features2d/features2d.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/calib3d/calib3d.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥ç›¸é‚»ä¸¤å¸§çš„å›¾åƒ&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¯»å…¥å›¾åƒ</span></span><br><span class="line">    Mat img_1 = <span class="built_in">imread</span>(argv[<span class="number">1</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line">    Mat img_2 = <span class="built_in">imread</span>(argv[<span class="number">2</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line"></span><br><span class="line">    std::vector&lt;KeyPoint&gt; keypoints_1, keypoints_2;</span><br><span class="line">    vector&lt;DMatch&gt; good_matches;</span><br><span class="line">    <span class="comment">/**************</span></span><br><span class="line"><span class="comment">     * 1.ç‰¹å¾åŒ¹é…</span></span><br><span class="line"><span class="comment">     **************/</span></span><br><span class="line">    <span class="built_in">find_feature_matches</span>(img_1, img_2, keypoints_1, keypoints_2, good_matches);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¸€å…±æ‰¾åˆ°äº†&quot;</span> &lt;&lt; good_matches.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;å¯¹åŒ¹é…ç‚¹&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">/**************</span></span><br><span class="line"><span class="comment">     * 2.ä¼°è®¡ä¸¤å¼ å›¾åƒé—´è¿åŠ¨</span></span><br><span class="line"><span class="comment">     **************/</span></span><br><span class="line">    Mat R, t;</span><br><span class="line">    <span class="built_in">pose_estimation_2d2d</span>(keypoints_1, keypoints_2, good_matches, R, t);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯E=t^R*scale</span></span><br><span class="line">    Mat t_x = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; <span class="number">0</span>, -t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2.0</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">               t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">0</span>), <span class="number">0</span>, -t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>) - t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">0</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;t^R: \n&quot;</span></span><br><span class="line">         &lt;&lt; t_x * R &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**************</span></span><br><span class="line"><span class="comment">     * 3.éªŒè¯å¯¹æçº¦æŸ</span></span><br><span class="line"><span class="comment">     **************/</span></span><br><span class="line">    Mat K = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; <span class="number">520.9</span>, <span class="number">0</span>, <span class="number">325.1</span>, <span class="number">0</span>, <span class="number">521.0</span>, <span class="number">249.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (DMatch m : good_matches)</span><br><span class="line">    &#123;</span><br><span class="line">        Point2d pt1 = <span class="built_in">pixel2cam</span>(keypoints_1[m.queryIdx].pt, K); <span class="comment">// keypoints_1[m.queryIdx].ptä¸ºåƒç´ åæ ‡ï¼ŒKä¸ºç›¸æœºå†…å‚çŸ©é˜µ</span></span><br><span class="line">        Mat y1 = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">1</span>) &lt;&lt; pt1.x, pt1.y, <span class="number">1</span>);       <span class="comment">// y1=(X/Z, Y/Z, 1) ç›¸æœºå½’ä¸€åŒ–åæ ‡</span></span><br><span class="line">        Point2d pt2 = <span class="built_in">pixel2cam</span>(keypoints_2[m.trainIdx].pt, K);</span><br><span class="line">        Mat y2 = (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">1</span>) &lt;&lt; pt2.x, pt2.y, <span class="number">1</span>);</span><br><span class="line">        Mat d = y2.<span class="built_in">t</span>() * t_x * R * y1; <span class="comment">//  y2.t()è¡¨ç¤ºy2çš„è½¬ç½®ï¼Œt_xè¡¨ç¤ºt^</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;epipolar constraint = &quot;</span> &lt;&lt; d &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( pose_estimation_2d2d )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14 -O3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV <span class="number">3.1</span> REQUIRED )</span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>( </span><br><span class="line">    <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> </span><br><span class="line">    <span class="string">&quot;/usr/include/eigen3/&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add_executable( pose_estimation_2d2d pose_estimation_2d2d.cpp extra.cpp ) # use this if in OpenCV2 </span></span><br><span class="line"><span class="keyword">add_executable</span>( pose_estimation_2d2d pose_estimation_2d2d.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( pose_estimation_2d2d <span class="variable">$&#123;OpenCV_LIBS&#125;</span> )</span><br></pre></td></tr></table></figure>
<h3 id="æ‰“å°è¾“å‡º"><a href="#æ‰“å°è¾“å‡º" class="headerlink" title="æ‰“å°è¾“å‡º"></a>æ‰“å°è¾“å‡º</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä¸€å…±æ‰¾åˆ°äº†79å¯¹åŒ¹é…ç‚¹</span><br><span class="line">åŸºç¡€çŸ©é˜µFï¼š</span><br><span class="line">[4.544437503937326e-06, 0.0001333855576988952, -0.01798499246457619;</span><br><span class="line"> -0.0001275657012959839, 2.266794804637672e-05, -0.01416678429258694;</span><br><span class="line"> 0.01814994639952877, 0.004146055871509035, 1]</span><br><span class="line">æœ¬è´¨çŸ©é˜µEï¼š</span><br><span class="line">[0.01097677480088526, 0.2483720528258777, 0.03167429207291153;</span><br><span class="line"> -0.2088833206039177, 0.02908423961781584, -0.6744658838357441;</span><br><span class="line"> 0.008286777636447118, 0.6614041624098427, 0.01676523772725936]</span><br><span class="line">å•åº”çŸ©é˜µHï¼š</span><br><span class="line">[0.9261214281175537, -0.1445322024509824, 33.26921085699328;</span><br><span class="line"> 0.04535424464910424, 0.9386696693816731, 8.570979966717406;</span><br><span class="line"> -1.006197561051869e-05, -3.008140280167741e-05, 0.9999999999999999]</span><br><span class="line">R: </span><br><span class="line">[0.9969387384754708, -0.05155574188737422, 0.05878058527591362;</span><br><span class="line"> 0.05000441581290405, 0.998368531736214, 0.02756507279306545;</span><br><span class="line"> -0.06010582439453526, -0.02454140006844053, 0.9978902793175882]</span><br><span class="line">t: </span><br><span class="line">[-0.9350802885437915;</span><br><span class="line"> -0.03514646275858852;</span><br><span class="line"> 0.3526890700495534]</span><br><span class="line">t^R: </span><br><span class="line">[-0.01552350379276751, -0.3512511256212342, -0.04479421342842761;</span><br><span class="line"> 0.2932931178326273, -0.04199386952278789, 0.9889111138164588;</span><br><span class="line"> -0.992323587628662, 0.0236673579316946, 0.942925712677014]</span><br><span class="line">epipolar constraint = [0.6796225931993222]</span><br><span class="line">epipolar constraint = [1.041980822107436]</span><br><span class="line">........</span><br><span class="line">epipolar constraint = [1.014767775015567]</span><br><span class="line">epipolar constraint = [1.257231546320262]</span><br><span class="line">epipolar constraint = [1.000924219722595]</span><br><span class="line">epipolar constraint = [0.8732996303495971]</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨ä¸‰è§’æµ‹é‡"><a href="#ä½¿ç”¨ä¸‰è§’æµ‹é‡" class="headerlink" title="ä½¿ç”¨ä¸‰è§’æµ‹é‡"></a>ä½¿ç”¨ä¸‰è§’æµ‹é‡</h1><p>ä¸Šæ–‡çš„å¯¹æçº¦æŸæ±‚è§£ç›¸æœºè¿åŠ¨å­˜åœ¨å°ºåº¦ä¸ç¡®å®šæ€§ï¼š</p>
<blockquote>
<p>ç”±äº $E$ æœ¬èº«å…·æœ‰å°ºåº¦ç­‰ä»·æ€§ï¼Œå®ƒåˆ†è§£å¾—åˆ°çš„$ t, R $ä¹Ÿæœ‰ä¸€ä¸ªå°ºåº¦ç­‰ä»·æ€§ã€‚è€Œ$ R âˆˆ SO(3) $è‡ªèº«å…·æœ‰çº¦æŸï¼Œæ‰€ä»¥æˆ‘ä»¬è®¤ä¸º $t $å…·æœ‰ä¸€ä¸ªå°ºåº¦ã€‚æ¢è¨€ä¹‹ï¼Œåœ¨åˆ†è§£è¿‡ç¨‹ä¸­ï¼Œå¯¹$ t $ä¹˜ä»¥ä»»æ„éé›¶å¸¸æ•°ï¼Œåˆ†è§£éƒ½æ˜¯æˆç«‹çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠ $t $è¿›è¡Œå½’ä¸€åŒ–ï¼Œè®©å®ƒçš„é•¿åº¦ç­‰äº 1ã€‚</p>
</blockquote>
<p>è¿™ä¹Ÿæ˜¯ç”±äºå•ç›®ç›¸æœºæœ¬èº«çš„ç¼ºç‚¹ï¼Œåœ¨å•ç›® SLAM ä¸­ï¼Œä»…é€šè¿‡å•å¼ å›¾åƒæ— æ³•è·å¾—åƒç´ çš„æ·±åº¦ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸‰è§’æµ‹é‡ï¼ˆTriangulationï¼‰ï¼ˆæˆ–ä¸‰è§’åŒ–ï¼‰çš„æ–¹æ³•æ¥ä¼°è®¡åœ°å›¾ç‚¹çš„æ·±åº¦ã€‚</p>
<p><img src="/images/å¯¹æçº¦æŸæ±‚è§£ç›¸æœºè¿åŠ¨/image-20220325110908224.png" alt="image-20220325110908224" style="zoom:50%;" /></p>
<p>æŒ‰ç…§å¯¹æå‡ ä½•ä¸­çš„å®šä¹‰ï¼Œè®¾ $x_1 , x_2 $ä¸ºä¸¤ä¸ªç‰¹å¾ç‚¹çš„å½’ä¸€åŒ–åæ ‡ï¼Œæ»¡è¶³ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
s_1p_1&=KP,\\ s_2p_2&=K(RP+t) 
\end{align*}</script><p>å·²çŸ¥ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
x_1 = K^{-1}p_1 \\
x_2 = K^{-1}p_2
\end{align*}</script><p>å°†$p_1,p_2$æ¢æˆ$x_1,x_2$:</p>
<script type="math/tex; mode=display">
\begin{align*}
s_1Kx_1&=KP,\\ s_2Kx_2&=K(RP+t) 
\end{align*}</script><p>å› æ­¤ï¼Œ$x_1,x_2$çš„å…³ç³»æ»¡è¶³ï¼š</p>
<script type="math/tex; mode=display">
s_2x_2= s_1Rx_1+t</script><p>æˆ‘ä»¬å·²ç»çŸ¥é“äº† $R, t$ï¼Œæƒ³è¦æ±‚è§£çš„æ˜¯ä¸¤ä¸ªç‰¹å¾ç‚¹çš„æ·±åº¦ $s_1 , s_2$ ã€‚å½“ç„¶è¿™ä¸¤ä¸ªæ·±åº¦æ˜¯å¯ä»¥åˆ†å¼€æ±‚çš„ï¼Œæ¯”æ–¹è¯´å…ˆæ¥çœ‹ $s_1$ ã€‚å¦‚æœæˆ‘è¦ç®— $s_1 $ï¼Œé‚£ä¹ˆå…ˆå¯¹ä¸Šå¼ä¸¤ä¾§å·¦ä¹˜ä¸€ä¸ª $x^{\land}_2$</p>
<script type="math/tex; mode=display">
s_2x^{\land}_2x_2= s_1x^{\land}_2Rx_1+x^{\land}_2t\\
s_1x^{\land}_2Rx_1+x^{\land}_2t=0 \tag{i}</script><p>è¿™æ˜¯ä¸€ä¸ªå…³äº$s_1$çš„æ–¹ç¨‹ï¼Œå¯ä»¥æ±‚å¾—$s_1$çš„å€¼ï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸¤ä¸ªå¸§ä¸‹çš„ç‚¹çš„æ·±åº¦ï¼Œç¡®å®šäº†å®ƒä»¬çš„ç©ºé—´åæ ‡ã€‚å½“ç„¶ï¼Œç”±äºå™ªå£°çš„å­˜åœ¨ï¼Œæˆ‘ä»¬ä¼°å¾—çš„ $R, t$ï¼Œä¸ä¸€å®šç²¾ç¡®ä½¿å¼$(i)$ä¸ºé›¶ï¼Œæ‰€ä»¥æ›´å¸¸è§çš„åšæ³•æ±‚<strong>æœ€å°äºŒä¹˜è§£</strong>,è€Œä¸æ˜¯é›¶è§£ã€‚</p>
<p>åŒæ ·çš„ï¼Œä¸‰è§’æµ‹é‡æ˜¯åœ¨ç‰¹å¾åŒ¹é…ä»¥åŠä¼°è®¡ä¸¤å¼ å›¾åƒé—´çš„è¿åŠ¨çš„åŸºç¡€ä¸Šè¿›è¡Œçš„ã€‚ä¹‹å‰æˆ‘ä»¬å·²ç»è·å¾—äº†è‰¯å¥½çš„åŒ¹é…ç‚¹ï¼Œå¹¶é€šè¿‡æœ¬è´¨çŸ©é˜µæ±‚å¾—ç›¸æœºçš„ä½å§¿$R,t$ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œä¸‰è§’æµ‹é‡ã€‚</p>
<p>ä¸‰è§’æµ‹é‡çš„æ–¹æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">triangulation</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> std::vector&lt;KeyPoint&gt; &amp;keypoints_1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> std::vector&lt;KeyPoint&gt; &amp;keypoints_2,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> std::vector&lt;DMatch&gt; &amp;matches,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> Mat &amp;R, <span class="keyword">const</span> Mat &amp;t,</span></span></span><br><span class="line"><span class="params"><span class="function">    vector&lt;Point3d&gt; &amp;points)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å•ä½é˜µ(å‚è€ƒä½å§¿çŸ©é˜µ)</span></span><br><span class="line">    Mat T1 =</span><br><span class="line">        (Mat_&lt;<span class="keyword">float</span>&gt;(<span class="number">3</span>, <span class="number">4</span>) &lt;&lt; </span><br><span class="line">         <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">         <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">         <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// å¯¹æçº¦æŸæ±‚å‡ºçš„å˜æ¢çŸ©é˜µ</span></span><br><span class="line">    Mat T2 =</span><br><span class="line">        (Mat_&lt;<span class="keyword">float</span>&gt;(<span class="number">3</span>, <span class="number">4</span>) &lt;&lt; </span><br><span class="line">         R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">2</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">         R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">2</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">         R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">0</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">1</span>), R.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">2</span>), t.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="comment">// ç›¸æœºå†…å‚</span></span><br><span class="line">    Mat K =</span><br><span class="line">        (Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; </span><br><span class="line">         <span class="number">520.9</span>, <span class="number">0</span>,      <span class="number">325.1</span>,</span><br><span class="line">         <span class="number">0</span>,     <span class="number">521.0</span>,  <span class="number">249.7</span>,</span><br><span class="line">         <span class="number">0</span>,     <span class="number">0</span>,      <span class="number">1</span>);</span><br><span class="line">    vector&lt;Point2f&gt; pts_1, pts_2;</span><br><span class="line">    <span class="comment">// éå†DMatchä¸­åŒ¹é…çš„ç‰¹å¾ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (DMatch m : matches)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å°†åƒç´ åæ ‡è½¬æ¢è‡³å½’ä¸€åŒ–æˆåƒå¹³é¢</span></span><br><span class="line">        pts_1.<span class="built_in">push_back</span>( <span class="built_in">pixel2cam</span>(keypoints_1[m.queryIdx].pt,K) );</span><br><span class="line">        pts_2.<span class="built_in">push_back</span>( <span class="built_in">pixel2cam</span>(keypoints_2[m.trainIdx].pt,K) );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è°ƒç”¨ä¸‰è§’åŒ–å‡½æ•°</span></span><br><span class="line">    Mat pts_4d;</span><br><span class="line">    <span class="comment">//å‡½æ•°æ¥å—çš„å‚æ•°æ˜¯ä¸¤ä¸ªç›¸æœºä½å§¿å’Œç‰¹å¾ç‚¹åœ¨ä¸¤ä¸ªç›¸æœºåæ ‡ç³»ä¸‹çš„å½’ä¸€åŒ–åæ ‡ï¼Œè¾“å‡ºä¸‰è§’åŒ–åçš„ç‰¹å¾ç‚¹çš„3Dåæ ‡ã€‚</span></span><br><span class="line">    <span class="comment">//è¾“å‡ºçš„3Dåæ ‡æ˜¯é½æ¬¡åæ ‡ï¼Œå…±å››ä¸ªç»´åº¦ï¼ˆæ‰€ä»¥å˜é‡åä¸ºpts_4dï¼‰ï¼Œå› æ­¤éœ€è¦å°†å‰ä¸‰ä¸ªç»´åº¦é™¤ä»¥ç¬¬å››ä¸ªç»´åº¦ä»¥å¾—åˆ°éé½æ¬¡åæ ‡xyz</span></span><br><span class="line">    cv::<span class="built_in">triangulatePoints</span>(T1, T2, pts_1, pts_2, pts_4d);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è½¬æ¢æˆéé½æ¬¡åæ ‡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pts_4d.cols; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Mat x = pts_4d.<span class="built_in">col</span>(i);</span><br><span class="line">        x /= x.at&lt;<span class="keyword">float</span>&gt;(<span class="number">3</span>,<span class="number">0</span>);<span class="comment">// å½’ä¸€åŒ–</span></span><br><span class="line">        <span class="function">Point3d <span class="title">p</span><span class="params">(x.at&lt;<span class="keyword">float</span>&gt;(<span class="number">0</span>,<span class="number">0</span>), x.at&lt;<span class="keyword">float</span>&gt;(<span class="number">1</span>,<span class="number">0</span>), x.at&lt;<span class="keyword">float</span>&gt;(<span class="number">2</span>,<span class="number">0</span>))</span></span>;</span><br><span class="line">        points.<span class="built_in">push_back</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸»å‡½æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥ç›¸é‚»ä¸¤å¸§çš„å›¾ç‰‡ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¯»å…¥å›¾åƒ</span></span><br><span class="line">    Mat img_1 = <span class="built_in">imread</span>(argv[<span class="number">1</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line">    Mat img_2 = <span class="built_in">imread</span>(argv[<span class="number">2</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.ç‰¹å¾æå–ä¸åŒ¹é…</span></span><br><span class="line">    vector&lt;KeyPoint&gt; keypoints_1, keypoints_2;</span><br><span class="line">    vector&lt;DMatch&gt; matches;</span><br><span class="line">    <span class="built_in">find_feature_matches</span>(img_1, img_2, keypoints_1, keypoints_2, matches);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¸€å…±æ‰¾åˆ°äº†&quot;</span> &lt;&lt; matches.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;ä¸ªè‰¯å¥½çš„åŒ¹é…ç‚¹&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// // 2.ä¼°è®¡ä¸¤å¼ å›¾åƒé—´è¿åŠ¨</span></span><br><span class="line">    Mat R, t;</span><br><span class="line">    <span class="built_in">pose_estimation_2d2d</span>(keypoints_1, keypoints_2, matches, R, t);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.ä¸‰è§’åŒ–</span></span><br><span class="line">    vector&lt;Point3d&gt; points;</span><br><span class="line">    <span class="built_in">triangulation</span>(keypoints_1,keypoints_2,matches,R,t,points);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.éªŒè¯ä¸‰è§’åŒ–ç‚¹ä¸ç‰¹å¾ç‚¹çš„é‡æŠ•å½±å…³ç³»</span></span><br><span class="line">    Mat K = ( Mat_&lt;<span class="keyword">double</span>&gt; ( <span class="number">3</span>,<span class="number">3</span> ) &lt;&lt; <span class="number">520.9</span>, <span class="number">0</span>, <span class="number">325.1</span>, <span class="number">0</span>, <span class="number">521.0</span>, <span class="number">249.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span> );</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; matches.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;--------ç¬¬[&quot;</span>&lt;&lt; i+<span class="number">1</span> &lt;&lt;<span class="string">&quot;]ä¸ªç©ºé—´ç‚¹-----------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªå›¾</span></span><br><span class="line">        Point2d pt1_cam = <span class="built_in">pixel2cam</span>(keypoints_1[matches[i].queryIdx].pt, K);</span><br><span class="line">        <span class="function">Point2d <span class="title">pt1_cam_3d</span><span class="params">(points[i].x / points[i].z, points[i].y / points[i].z)</span></span>; <span class="comment">// å½’ä¸€åŒ–</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶çš„åƒç´ åæ ‡: &quot;</span> &lt;&lt; pt1_cam &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶3DæŠ•å½±åæ ‡ï¼š&quot;</span> &lt;&lt; pt1_cam_3d &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ·±åº¦d:&quot;</span> &lt;&lt; points[i].z &lt;&lt; endl;</span><br><span class="line">        <span class="comment">// ç¬¬äºŒä¸ªå›¾</span></span><br><span class="line">        Point2f pt2_cam = <span class="built_in">pixel2cam</span>(keypoints_2[matches[i].trainIdx].pt, K);</span><br><span class="line">        Mat pt2_trans = R*(Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>,<span class="number">1</span>) &lt;&lt; points[i].x, points[i].y, points[i].z) + t;</span><br><span class="line">        pt2_trans /= pt2_trans.at&lt;<span class="keyword">double</span>&gt;(<span class="number">2</span>,<span class="number">0</span>); <span class="comment">// å½’ä¸€åŒ–</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶çš„åƒç´ åæ ‡: &quot;</span> &lt;&lt; pt2_cam &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶3DæŠ•å½±åæ ‡ï¼š&quot;</span> &lt;&lt; pt2_trans.<span class="built_in">t</span>() &lt;&lt; endl; </span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰“å°è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- Max dist : 94.000000 </span><br><span class="line">-- Min dist : 4.000000 </span><br><span class="line">ä¸€å…±æ‰¾åˆ°äº†79ä¸ªè‰¯å¥½çš„åŒ¹é…ç‚¹</span><br><span class="line">åŸºç¡€çŸ©é˜µFï¼š</span><br><span class="line">[4.544437503937326e-06, 0.0001333855576988952, -0.01798499246457619;</span><br><span class="line"> -0.0001275657012959839, 2.266794804637672e-05, -0.01416678429258694;</span><br><span class="line"> 0.01814994639952877, 0.004146055871509035, 1]</span><br><span class="line">æœ¬è´¨çŸ©é˜µEï¼š</span><br><span class="line">[0.01097677480088526, 0.2483720528258777, 0.03167429207291153;</span><br><span class="line"> -0.2088833206039177, 0.02908423961781584, -0.6744658838357441;</span><br><span class="line"> 0.008286777636447118, 0.6614041624098427, 0.01676523772725936]</span><br><span class="line">å•åº”çŸ©é˜µHï¼š</span><br><span class="line">[0.9261214281175537, -0.1445322024509824, 33.26921085699328;</span><br><span class="line"> 0.04535424464910424, 0.9386696693816731, 8.570979966717406;</span><br><span class="line"> -1.006197561051869e-05, -3.008140280167741e-05, 0.9999999999999999]</span><br><span class="line">R: </span><br><span class="line">[0.9969387384754708, -0.05155574188737422, 0.05878058527591362;</span><br><span class="line"> 0.05000441581290405, 0.998368531736214, 0.02756507279306545;</span><br><span class="line"> -0.06010582439453526, -0.02454140006844053, 0.9978902793175882]</span><br><span class="line">t: </span><br><span class="line">[-0.9350802885437915;</span><br><span class="line"> -0.03514646275858852;</span><br><span class="line"> 0.3526890700495534]</span><br><span class="line">--------ç¬¬[1]ä¸ªç©ºé—´ç‚¹-----------</span><br><span class="line">ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶çš„åƒç´ åæ ‡: [-0.0136303, -0.302687]</span><br><span class="line">ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶3DæŠ•å½±åæ ‡ï¼š[-0.0136588, -0.302975]</span><br><span class="line">æ·±åº¦d:14.4036</span><br><span class="line">ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶çš„åƒç´ åæ ‡: [-0.00403148, -0.270058]</span><br><span class="line">ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶3DæŠ•å½±åæ ‡ï¼š[-0.004013293769641682, -0.2697748885145957, 1]</span><br><span class="line">--------ç¬¬[2]ä¸ªç©ºé—´ç‚¹-----------</span><br><span class="line">ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶çš„åƒç´ åæ ‡: [-0.153772, -0.0742802]</span><br><span class="line">ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶3DæŠ•å½±åæ ‡ï¼š[-0.153809, -0.0755175]</span><br><span class="line">æ·±åº¦d:9.63635</span><br><span class="line">ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶çš„åƒç´ åæ ‡: [-0.179497, -0.0577735]</span><br><span class="line">ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶3DæŠ•å½±åæ ‡ï¼š[-0.1795174494211173, -0.05658791842651693, 1]</span><br><span class="line">--------ç¬¬[3]ä¸ªç©ºé—´ç‚¹-----------</span><br><span class="line">ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶çš„åƒç´ åæ ‡: [-0.468612, 0.119578]</span><br><span class="line">ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶3DæŠ•å½±åæ ‡ï¼š[-0.46862, 0.119797]</span><br><span class="line">æ·±åº¦d:7.88393</span><br><span class="line">ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶çš„åƒç´ åæ ‡: [-0.499328, 0.1119]</span><br><span class="line">ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶3DæŠ•å½±åæ ‡ï¼š[-0.4993080966028579, 0.1116965292982101, 1]</span><br><span class="line">--------ç¬¬[4]ä¸ªç©ºé—´ç‚¹-----------</span><br><span class="line">ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶çš„åƒç´ åæ ‡: [-0.226723, 0.0735125]</span><br><span class="line">ç‚¹åœ¨ç¬¬ä¸€å¸§æ—¶3DæŠ•å½±åæ ‡ï¼š[-0.226723, 0.0735073]</span><br><span class="line">æ·±åº¦d:8.35771</span><br><span class="line">ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶çš„åƒç´ åæ ‡: [-0.268958, 0.08119]</span><br><span class="line">ç‚¹åœ¨ç¬¬äºŒå¸§æ—¶3DæŠ•å½±åæ ‡ï¼š[-0.2689579480646592, 0.0811949362011327, 1]</span><br><span class="line">.......................(ç•¥)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ‰“å°äº†æ¯ä¸ªç©ºé—´ç‚¹åœ¨ä¸¤ä¸ªç›¸æœºåæ ‡ç³»ä¸‹çš„æŠ•å½±åæ ‡ä¸åƒç´ åæ ‡â€”â€”ç›¸å½“äº P çš„æŠ•å½±ä½ç½®ä¸çœ‹åˆ°çš„ç‰¹å¾ç‚¹ä½ç½®ã€‚ç”±äºè¯¯å·®çš„å­˜åœ¨ï¼Œå®ƒä»¬ä¼šæœ‰ä¸€äº›å¾®å°çš„å·®å¼‚ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¯¯å·®çš„é‡çº§å¤§çº¦åœ¨å°æ•°ç‚¹åç¬¬ä¸‰ä½ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸‰è§’åŒ–ç‰¹å¾ç‚¹çš„è·ç¦»å¤§çº¦ä¸º 14ï½15ã€‚ä½†ç”±äºå°ºåº¦ä¸ç¡®å®šæ€§ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿™é‡Œçš„ 15 ç©¶ç«Ÿæ˜¯å¤šå°‘ç±³ã€‚</p>
<h1 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h1><p>åœ¨ORBSLAMä¸­è¿™ä¸‰ç§æ–¹æ³•çš„é¡ºåºï¼š</p>
<ul>
<li><p>ä½¿ç”¨<strong>ç‰¹å¾ç‚¹æ£€æµ‹å’Œç‰¹å¾åŒ¹é…</strong>ï¼Œå¯»æ‰¾æ¯”è¾ƒå¥½çš„åŒ¹é…ç‚¹ã€‚</p>
</li>
<li><p>ç”±ä¸¤å¼ å›¾åƒçš„åŒ¹é…ç‚¹ï¼Œåˆ©ç”¨<strong>å¯¹æå‡ ä½•</strong>è®¡ç®—å‡º$H$æˆ–è€…$F$çŸ©é˜µï¼Œå¹¶ä»è¿™ä¸¤ä¸ªçŸ©é˜µä¸­æ¢å¤å‡º$Rï¼Œt$</p>
</li>
<li><p>æœ‰äº†$R,t $å°±å¯ä»¥åˆ©ç”¨ç›¸æœºçš„ä½å§¿å’Œä¸¤å¸§å¯¹åº”çš„åƒç´ åæ ‡ç”¨<strong>ä¸‰è§’æµ‹é‡</strong>è®¡ç®—å‡ºå…¶å¯¹åº”çš„3Dç‚¹åæ ‡ã€‚è‡³æ­¤ï¼Œç›¸æœºçš„ä½å§¿å’Œå¯¹åº”çš„åœ°å›¾ç‚¹å°±éƒ½æœ‰äº†ï¼Œæ¥ä¸‹æ¥æ­£å¸¸è·Ÿè¸ªå³å¯ï¼›</p>
</li>
<li><p>è·Ÿè¸ªä¸¢å¤±åï¼Œå°±éœ€è¦å›åˆ°åŸæ¥æœºå™¨äººæ›¾ç»ç»è¿‡çš„ä½ç½®æ‰¾åŒ¹é…å¸§ï¼Œæ‰¾åˆ°çš„åŒ¹é…å¸§æ˜¯æœ‰å…¶3Dåœ°å›¾ç‚¹å’Œä½å§¿çš„ï¼Œç”¨è¿™äº›3Dç‚¹å’Œå½“å‰å¸§è‡ªå·±çš„åƒç´ åæ ‡ï¼Œ PnPè®¡ç®—å‡ºå½“å‰å¸§ç›¸è¾ƒäºåŒ¹é…å¸§çš„è¿åŠ¨$Rï¼Œt$</p>
<blockquote>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_25458977/article/details/113675519">https://blog.csdn.net/qq_25458977/article/details/113675519</a></p>
</blockquote>
</li>
</ul>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>å¯¹æçº¦æŸ</tag>
      </tags>
  </entry>
  <entry>
    <title>ch7_ç‰¹å¾æå–ä¸åŒ¹é…</title>
    <url>/posts/62703.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>ç›®å‰ä¸»æµçš„å‡ ç§å›¾åƒç‰¹å¾åœ¨ OpenCV å¼€æºå›¾åƒåº“ä¸­éƒ½å·²ç»é›†æˆå®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œè°ƒç”¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å®é™…ç»ƒä¹ ä¸€ä¸‹ OpenCV çš„å›¾åƒç‰¹å¾æå–ã€è®¡ç®—å’ŒåŒ¹é…çš„è¿‡ç¨‹ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>ç´ æï¼š</p>
<p><img src="/images/ç‰¹å¾æå–/FE.PNG" alt="FE" style="zoom:50%;" /></p>
<p>ç›¸å…³å‡½æ•°å‚è€ƒæ–‡æ¡£ï¼š<a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/features2d/doc/features2d.html">features2d. äºŒç»´å›¾åƒç‰¹å¾æ¡†æ¶</a></p>
<p>ç‰¹å¾åŒ¹é…çš„æ­¥éª¤ï¼š</p>
<ul>
<li>åˆå§‹åŒ–</li>
</ul>
<p>ä¸»è¦æ˜¯å®šä¹‰ç‰¹å¾ç‚¹ã€æè¿°å­ã€ç‰¹å¾æ£€æµ‹æ–¹å¼(ORBã€FASTã€SIFT)ç­‰;</p>
<ul>
<li>æå–ORBç‰¹å¾ç‚¹</li>
</ul>
<p>ä¸»è¦æ ¹æ®åˆ›å»ºçš„æ£€æµ‹å™¨æ£€æµ‹è§’ç‚¹ä½ç½®ï¼Œä»¥åŠä½¿ç”¨è§’ç‚¹æ¥è®¡ç®—æè¿°å­ã€‚</p>
<ul>
<li>åŒ¹é…ç‚¹å¯¹ç­›é€‰</li>
</ul>
<p>å¯¹ä¸¤å¹…å›¾åƒä¸­çš„BRIEFæè¿°å­è¿›è¡ŒåŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨$ Hamming$ è·ç¦»</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/features2d/features2d.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è¯»å…¥å‚æ•°ï¼ˆç›¸æœºç›¸é‚»ä¸¤å¸§çš„å›¾ç‰‡ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·æä¾›ç›¸é‚»ä¸¤å¸§çš„å›¾ç‰‡ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¯»å–å›¾åƒå¹¶ä¿å­˜ä¸ºMatæ•°æ®ç±»å‹</span></span><br><span class="line">    Mat img_1 = <span class="built_in">imread</span>(argv[<span class="number">1</span>], CV_LOAD_IMAGE_COLOR); <span class="comment">//å­˜å‚¨çš„æ˜¯ä¸‰é€šé“çš„å½©è‰²å›¾ç‰‡</span></span><br><span class="line">    Mat img_2 = <span class="built_in">imread</span>(argv[<span class="number">2</span>], CV_LOAD_IMAGE_COLOR);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    std::vector&lt;KeyPoint&gt; keypoints_1, keypoints_2; <span class="comment">// å®šä¹‰ç‰¹å¾ç‚¹</span></span><br><span class="line">    Mat descriptors_1, descriptors_2;               <span class="comment">// å®šä¹‰æè¿°å­</span></span><br><span class="line">    <span class="comment">// FeatureDetetor æ˜¯è™šç±»ï¼Œé€šè¿‡å®šä¹‰FeatureDetectorçš„å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// å¯ä»¥ä½¿ç”¨å¤šç§ç‰¹å¾æ£€æµ‹æ–¹æ³•ã€‚é€šè¿‡ create() å‡½æ•°è°ƒç”¨</span></span><br><span class="line">    Ptr&lt;FeatureDetector&gt; detector = ORB::<span class="built_in">create</span>();       <span class="comment">//åˆ›å»ºORBç‰¹å¾æ£€æµ‹å™¨</span></span><br><span class="line">    Ptr&lt;DescriptorExtractor&gt; descriptor = ORB::<span class="built_in">create</span>(); <span class="comment">//åˆ›å»ºORBç‰¹å¾æè¿°å­æå–.</span></span><br><span class="line">    <span class="comment">//å¯¹äºç»™å®šå‚æ•°ï¼Œåˆ›å»ºç‰¹å¾æè¿°å­åŒ¹é…(ä½¿ç”¨é»˜è®¤çš„æ„é€ å‡½æ•°).</span></span><br><span class="line">    Ptr&lt;DescriptorMatcher&gt; matcher = DescriptorMatcher::<span class="built_in">create</span>(<span class="string">&quot;BruteForce-Hamming&quot;</span>);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * ç¬¬äºŒæ­¥ï¼šæ£€æµ‹ Oriented FAST è§’ç‚¹ä½ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    detector-&gt;<span class="built_in">detect</span>(img_1, keypoints_1);</span><br><span class="line">    detector-&gt;<span class="built_in">detect</span>(img_2, keypoints_2);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * ç¬¬ä¸‰æ­¥ï¼šæ ¹æ®è§’ç‚¹ä½ç½®è®¡ç®— BRIEF æè¿°å­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    descriptor-&gt;<span class="built_in">compute</span>(img_1, keypoints_1, descriptors_1);</span><br><span class="line">    descriptor-&gt;<span class="built_in">compute</span>(img_2, keypoints_2, descriptors_2);</span><br><span class="line"></span><br><span class="line">    Mat outimg1;</span><br><span class="line">    <span class="built_in">drawKeypoints</span>(img_1, keypoints_1, outimg1, Scalar::<span class="built_in">all</span>(<span class="number">-1</span>), DrawMatchesFlags::DEFAULT);</span><br><span class="line">    <span class="built_in">imshow</span>(<span class="string">&quot;ORBç‰¹å¾ç‚¹&quot;</span>, outimg1); <span class="comment">// è‡³æ­¤ï¼Œå·²ç»æˆåŠŸæå–ORBç‰¹å¾ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * ç¬¬å››æ­¥:å¯¹ä¸¤å¹…å›¾åƒä¸­çš„BRIEFæè¿°å­è¿›è¡ŒåŒ¹é…ï¼Œä½¿ç”¨ Hamming è·ç¦»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// DMatchç”¨äºåŒ¹é…ç‰¹å¾å…³é”®ç‚¹çš„ç‰¹å¾æè¿°å­çš„ç±»ï¼šæŸ¥è¯¢ç‰¹å¾æè¿°å­ç´¢å¼•, ç‰¹å¾æè¿°å­ç´¢å¼•, è®­ç»ƒå›¾åƒç´¢å¼•, ä»¥åŠä¸åŒç‰¹å¾æè¿°å­ä¹‹é—´çš„è·ç¦».</span></span><br><span class="line">    vector&lt;DMatch&gt; matches;</span><br><span class="line">    matcher-&gt;<span class="built_in">match</span>(descriptors_1, descriptors_2, matches); <span class="comment">// ç»™å®šæŸ¥è¯¢é›†åˆä¸­çš„æ¯ä¸ªç‰¹å¾æè¿°å­ï¼Œå¯»æ‰¾æœ€ä½³åŒ¹é….</span></span><br><span class="line"></span><br><span class="line">    Mat img_match;</span><br><span class="line">    <span class="built_in">drawMatches</span>(img_1, keypoints_1, img_2, keypoints_2, matches, img_match);</span><br><span class="line">    <span class="built_in">imshow</span>(<span class="string">&quot;æ‰€æœ‰åŒ¹é…ç‚¹å¯¹&quot;</span>, img_match);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * ç¬¬äº”æ­¥:åŒ¹é…ç‚¹å¯¹ç­›é€‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">double</span> min_dist = <span class="number">10000</span>, max_dist = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//æ‰¾å‡ºæ‰€æœ‰åŒ¹é…ä¹‹é—´çš„æœ€å°è·ç¦»å’Œæœ€å¤§è·ç¦», å³æ˜¯æœ€ç›¸ä¼¼çš„å’Œæœ€ä¸ç›¸ä¼¼çš„ä¸¤ç»„ç‚¹ä¹‹é—´çš„è·ç¦»</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; descriptors_1.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> dist = matches[i].distance;</span><br><span class="line">        <span class="keyword">if</span> (dist &lt; min_dist)</span><br><span class="line">            min_dist = dist;</span><br><span class="line">        <span class="keyword">if</span> (dist &gt; min_dist)</span><br><span class="line">            max_dist = dist;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å½“æè¿°å­ä¹‹é—´çš„è·ç¦»å¤§äºä¸¤å€çš„æœ€å°è·ç¦»æ—¶,å³è®¤ä¸ºåŒ¹é…æœ‰è¯¯.ä½†æœ‰æ—¶å€™æœ€å°è·ç¦»ä¼šéå¸¸å°,è®¾ç½®ä¸€ä¸ªç»éªŒå€¼30ä½œä¸ºä¸‹é™.</span></span><br><span class="line">    std::vector&lt;DMatch&gt; good_matches;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; descriptors_1.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (matches[i].distance &lt;= <span class="built_in">max</span>(<span class="number">2</span> * min_dist, <span class="number">30.0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            good_matches.<span class="built_in">push_back</span>(matches[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Mat img_goodmatch;</span><br><span class="line">    <span class="built_in">drawMatches</span>(img_1, keypoints_1, img_2, keypoints_2, good_matches, img_goodmatch);</span><br><span class="line">    <span class="built_in">imshow</span>(<span class="string">&quot;ä¼˜åŒ–ååŒ¹é…ç‚¹å¯¹&quot;</span>, img_goodmatch);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( feature_extraction )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14 -O3&quot;</span> )</span><br><span class="line"><span class="keyword">find_package</span>( OpenCV <span class="number">3.1</span> REQUIRED )</span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>( </span><br><span class="line">    <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> </span><br><span class="line">    <span class="string">&quot;/usr/include/eigen3/&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">add_executable</span>( feature_extraction feature_extraction.cpp  )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( feature_extraction <span class="variable">$&#123;OpenCV_LIBS&#125;</span> )</span><br></pre></td></tr></table></figure>
<p>ç‰¹å¾ç‚¹æ£€æµ‹</p>
<p><img src="/images/ç‰¹å¾æå–/outimg1.png" alt="outimg1" style="zoom: 50%;" /></p>
<p>æ‰€æœ‰åŒ¹é…ç‚¹å¯¹</p>
<p><img src="/images/ç‰¹å¾æå–/img_match.png" alt="img_match" style="zoom: 50%;" /></p>
<p>ä¼˜åŒ–ååŒ¹é…ç‚¹å¯¹</p>
<p><img src="/images/ç‰¹å¾æå–/img_goodmatch.png" alt="img_goodmatch" style="zoom:50%;" /></p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>ç‰¹å¾æå–</tag>
      </tags>
  </entry>
  <entry>
    <title>ch6_ä½¿ç”¨g2oæ‹Ÿåˆæ›²çº¿</title>
    <url>/posts/6634.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>g2oï¼ˆGeneral Graphic Optimizationï¼ŒG2Oï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªåŸºäºå›¾ä¼˜åŒ–çš„åº“ã€‚å›¾ä¼˜åŒ–ï¼Œæ˜¯æŠŠä¼˜åŒ–é—®é¢˜è¡¨ç°æˆå›¾ï¼ˆGraphï¼‰çš„ä¸€ç§æ–¹å¼ã€‚è¿™é‡Œçš„å›¾æ˜¯å›¾è®ºæ„ä¹‰ä¸Šçš„å›¾ã€‚ä¸€ä¸ªå›¾ç”±è‹¥å¹²ä¸ª<strong>é¡¶ç‚¹ï¼ˆVertexï¼‰</strong>ï¼Œä»¥åŠè¿æ¥ç€è¿™äº›èŠ‚ç‚¹çš„<strong>è¾¹ï¼ˆEdgeï¼‰</strong>ç»„æˆã€‚è¿›è€Œï¼Œç”¨<strong>é¡¶ç‚¹è¡¨ç¤ºä¼˜åŒ–å˜é‡</strong>ï¼Œç”¨<strong>è¾¹è¡¨ç¤ºè¯¯å·®é¡¹</strong>ã€‚æœ€åŸºæœ¬çš„å›¾ä¼˜åŒ–ï¼Œæ˜¯ç”¨å›¾æ¨¡å‹æ¥è¡¨è¾¾ä¸€ä¸ªéçº¿æ€§æœ€å°äºŒä¹˜çš„ä¼˜åŒ–é—®é¢˜ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>ç¼–è¯‘ä¸å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…‹éš†é¡¹ç›®</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/RainerKuemmerle/g2o</span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">sudo apt-get install libqt4-dev qt4-qmake libqglviewer-dev libsuitesparse-dev libcxsparse3.1.2 libcholmod-dev</span><br><span class="line"><span class="comment"># ç¼–è¯‘å®‰è£…</span></span><br><span class="line"><span class="built_in">cd</span> g2o</span><br><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build </span><br><span class="line">cmake ..</span><br><span class="line">make -j4</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨G2Oçš„æ­¥éª¤ï¼š"><a href="#ä½¿ç”¨G2Oçš„æ­¥éª¤ï¼š" class="headerlink" title="ä½¿ç”¨G2Oçš„æ­¥éª¤ï¼š"></a>ä½¿ç”¨G2Oçš„æ­¥éª¤ï¼š</h2><p><img src="/images/ä½¿ç”¨g2oæ‹Ÿåˆæ›²çº¿/1855613-20200414153348238-1860777008.png" alt="img"></p>
<h3 id="1ã€åˆ›å»ºçº¿æ€§æ±‚è§£å™¨"><a href="#1ã€åˆ›å»ºçº¿æ€§æ±‚è§£å™¨" class="headerlink" title="1ã€åˆ›å»ºçº¿æ€§æ±‚è§£å™¨"></a>1ã€åˆ›å»ºçº¿æ€§æ±‚è§£å™¨</h3><p>è¿™é‡Œçš„çº¿æ€§æ±‚è§£å™¨<code>LinearSolver</code>åˆ›å»ºçš„æ˜¯<code>LinearSolverCSparse</code>ï¼š</p>
<ul>
<li><strong>LinearSolverCholmod ï¼š</strong>ä½¿ç”¨sparse choleskyåˆ†è§£æ³•ã€‚ç»§æ‰¿è‡ªLinearSolverCCS</li>
<li><strong>LinearSolverCSparseï¼š</strong>ä½¿ç”¨CSparseæ³•ã€‚ç»§æ‰¿è‡ªLinearSolverCCS</li>
<li><strong>LinearSolverDense ï¼š</strong>ä½¿ç”¨dense choleskyåˆ†è§£æ³•ã€‚ç»§æ‰¿è‡ªLinearSolver</li>
<li><strong>LinearSolverEigenï¼š</strong> ä¾èµ–é¡¹åªæœ‰eigenï¼Œä½¿ç”¨eigenä¸­sparse Cholesky æ±‚è§£ï¼Œå› æ­¤ç¼–è¯‘å¥½åå¯ä»¥æ–¹ä¾¿çš„åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼Œæ€§èƒ½å’ŒCSparseå·®ä¸å¤šã€‚ç»§æ‰¿è‡ªLinearSolver</li>
<li><strong>LinearSolverPCG ï¼š</strong>ä½¿ç”¨preconditioned conjugate gradient æ³•ï¼Œç»§æ‰¿è‡ªLinearSolver</li>
</ul>
<h3 id="2ã€çŸ©é˜µå—æ±‚è§£å™¨"><a href="#2ã€çŸ©é˜µå—æ±‚è§£å™¨" class="headerlink" title="2ã€çŸ©é˜µå—æ±‚è§£å™¨"></a>2ã€çŸ©é˜µå—æ±‚è§£å™¨</h3><p>BlockSolver å†…éƒ¨åŒ…å« LinearSolverï¼Œç”¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰çš„çº¿æ€§æ±‚è§£å™¨LinearSolveræ¥åˆå§‹åŒ–ã€‚ </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Block *solver_ptr = <span class="keyword">new</span> <span class="built_in">Block</span>(unique_ptr&lt;Block::LinearSolverType&gt;(linearSolver));</span><br></pre></td></tr></table></figure>
<h3 id="3ã€åˆ›å»ºæ€»æ±‚è§£å™¨solverã€‚"><a href="#3ã€åˆ›å»ºæ€»æ±‚è§£å™¨solverã€‚" class="headerlink" title="3ã€åˆ›å»ºæ€»æ±‚è§£å™¨solverã€‚"></a>3ã€åˆ›å»ºæ€»æ±‚è§£å™¨solverã€‚</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œä»GN(é«˜æ–¯ç‰›é¡¿), LMï¼ˆåˆ—æ–‡ä¼¯æ ¼ï¼‰, DogLeg ä¸­é€‰</span></span><br><span class="line">g2o::OptimizationAlgorithmGaussNewton *solver_gn = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmGaussNewton</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line">g2o::OptimizationAlgorithmLevenberg *solver_lm = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmLevenberg</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line">g2o::OptimizationAlgorithmDogleg *solver_dog = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmDogleg</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br></pre></td></tr></table></figure>
<h3 id="4ã€åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨"><a href="#4ã€åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨" class="headerlink" title="4ã€åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨"></a>4ã€åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">g2o::SparseOptimizer optimizer;    <span class="comment">// åˆ›å»ºç¨€ç–ä¼˜åŒ–å™¨</span></span><br><span class="line">optimizer.<span class="built_in">setAlgorithm</span>(solver_lm); <span class="comment">// ç”¨å‰é¢å®šä¹‰å¥½çš„æ±‚è§£å™¨ä½œä¸ºæ±‚è§£æ–¹æ³•ï¼šï¼ˆä½¿ç”¨LMæ–¹æ³•ï¼‰</span></span><br><span class="line">optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);        <span class="comment">// setVerboseæ˜¯è®¾ç½®ä¼˜åŒ–è¿‡ç¨‹è¾“å‡ºä¿¡æ¯ç”¨</span></span><br></pre></td></tr></table></figure>
<h3 id="5ã€å®šä¹‰å›¾çš„é¡¶ç‚¹å’Œè¾¹"><a href="#5ã€å®šä¹‰å›¾çš„é¡¶ç‚¹å’Œè¾¹" class="headerlink" title="5ã€å®šä¹‰å›¾çš„é¡¶ç‚¹å’Œè¾¹"></a>5ã€å®šä¹‰å›¾çš„é¡¶ç‚¹å’Œè¾¹</h3><p>å®šä¹‰å›¾çš„é¡¶ç‚¹å’Œè¾¹ã€‚å¹¶æ·»åŠ åˆ°SparseOptimizerä¸­ã€‚</p>
<h4 id="é¡¶ç‚¹çš„å®šä¹‰"><a href="#é¡¶ç‚¹çš„å®šä¹‰" class="headerlink" title="é¡¶ç‚¹çš„å®šä¹‰"></a>é¡¶ç‚¹çš„å®šä¹‰</h4><p>èŠ‚ç‚¹çš„å®šä¹‰æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦ç»§æ‰¿ G2O çš„åŸºç¡€èŠ‚ç‚¹ç±»å‹ï¼Œå¹¶ä¸”ç»™å‡ºå‡ ä¸ªå…³é”®è™šå‡½æ•°çš„å®ç°å³å¯ï¼š</p>
<ul>
<li><code>setToOriginImpl()</code>ï¼šé‡ç½®èŠ‚ç‚¹çš„å®ç°ï¼Œé€šå¸¸æƒ…å†µä¸‹å„ä¸ªå‚æ•°ç½® 0 å³å¯</li>
<li><code>oplusImpl()</code>ï¼šæ›´æ–°èŠ‚ç‚¹æ–¹æ³•çš„å®ç°ï¼Œè¿™é‡Œç”±äºæˆ‘ä»¬ä½¿ç”¨çš„èŠ‚ç‚¹å’Œæ›´æ–°é‡éƒ½æ˜¯ <code>Eigen::Vector3d</code>ï¼Œç›´æ¥ç›¸åŠ å³å¯</li>
<li><code>read(std::istream &amp;in); &amp; write(std::ostream &amp;out);</code>ï¼šè¯»ç›˜å’Œå†™ç›˜ï¼Œè¿˜æ²¡æœ‰æ·±å…¥äº†è§£ï¼Œä¸è¿‡å¤§éƒ¨åˆ†æ—¶é—´ä¸éœ€è¦</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CurveFittingVertex</span> :</span> <span class="keyword">public</span> g2o::BaseVertex&lt;<span class="number">3</span>, Eigen::Vector3d&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ç»“æ„ä½“åŒ…å«eigenæˆå‘˜å¿…é¡»è¿›è¡Œå®å®šä¹‰ EIGEN_MAKE_ALIGNED_OPERATOR_NEW, ä¿è¯å†…å­˜å¯¹é½</span></span><br><span class="line">    <span class="function">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span></span><br><span class="line"><span class="function">    <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setToOriginImpl</span><span class="params">()</span> <span class="comment">// é¡¶ç‚¹é‡ç½®å‡½æ•°</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _estimate &lt;&lt; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">oplusImpl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">double</span> *update)</span> <span class="comment">// é¡¶ç‚¹æ›´æ–°å‡½æ•°</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _estimate += Eigen::<span class="built_in">Vector3d</span>(update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="keyword">const</span> </span>&#123;&#125; <span class="comment">// constä¸å£°æ˜è¯¥ç±»å°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="è¾¹çš„å®šä¹‰"><a href="#è¾¹çš„å®šä¹‰" class="headerlink" title="è¾¹çš„å®šä¹‰"></a>è¾¹çš„å®šä¹‰</h4><p>è¾¹çš„å®šä¹‰éœ€è¦ç»§æ‰¿ G2O ä¸­çš„ä¸€ä¸ªåŸºç¡€è¾¹ç±»å‹ï¼Œå¹¶ç»™å‡ºå‡ ä¸ªå…³é”®å‡½æ•°çš„å®ç°ï¼š</p>
<ul>
<li><code>computeError()</code>ï¼š åœ¨æ·»åŠ è¾¹ä¹‹å‰éœ€è¦è®¾å®šå¥½è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹çš„ç´¢å¼•ä»¥åŠè§‚æµ‹å€¼å’Œä¿¡æ¯çŸ©é˜µï¼Œè¿™ä¸ªå‡½æ•°åˆ™æ˜¯ä½¿ç”¨è¯¥è¾¹è¿æ¥çš„èŠ‚ç‚¹å’Œè§‚æµ‹å€¼æ¥è®¡ç®—è¯¯å·®ã€‚æœ€åè¦æ›´æ–°å˜é‡ <code>_error</code></li>
<li><code>linearizeOplus()</code>ï¼šè®¡ç®—é›…å…‹æ¯”çŸ©é˜µï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç»™å‡ºäº†åˆ™è¿›è¡Œè§£ææ±‚å¯¼ï¼Œä¸ç»™åˆ™è¿›è¡Œæ•°å€¼æ±‚å¯¼</li>
<li><code>read(std::istream &amp;in); &amp; write(std::ostream &amp;out);</code>ï¼šè¯»ç›˜å’Œå†™ç›˜</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯¯å·®æ¨¡å‹ æ¨¡æ¿å‚æ•°ï¼šè§‚æµ‹å€¼ç»´åº¦ï¼Œç±»å‹ï¼Œè¿æ¥é¡¶ç‚¹ç±»å‹   (è¾¹ä¸ºè¯¯å·®é¡¹)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CurveFittingEdge</span> :</span> <span class="keyword">public</span> g2o::BaseUnaryEdge&lt;<span class="number">1</span>, <span class="keyword">double</span>, CurveFittingVertex&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">CurveFittingEdge</span>(<span class="keyword">double</span> x) : <span class="built_in">BaseUnaryEdge</span>(), _x(x) &#123;&#125; <span class="comment">// åˆå§‹åŒ–åˆ—è¡¨</span></span><br><span class="line">    <span class="comment">// è®¡ç®—æ›²çº¿æ¨¡å‹è¯¯å·®</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> CurveFittingVertex *v = <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> CurveFittingVertex *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">const</span> Eigen::Vector3d abc = v-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">        _error(<span class="number">0</span>, <span class="number">0</span>) = _measurement - std::<span class="built_in">exp</span>(<span class="built_in">abc</span>(<span class="number">0</span>, <span class="number">0</span>) * _x * _x + <span class="built_in">abc</span>(<span class="number">1</span>, <span class="number">0</span>) * _x + <span class="built_in">abc</span>(<span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="keyword">const</span> </span>&#123;&#125; <span class="comment">// constä¸å£°æ˜è¯¥ç±»å°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">double</span> _x; <span class="comment">// x å€¼ï¼Œ y å€¼ä¸º _measurement</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="6ã€è®¾ç½®ä¼˜åŒ–å‚æ•°ï¼Œå¼€å§‹æ‰§è¡Œä¼˜åŒ–"><a href="#6ã€è®¾ç½®ä¼˜åŒ–å‚æ•°ï¼Œå¼€å§‹æ‰§è¡Œä¼˜åŒ–" class="headerlink" title="6ã€è®¾ç½®ä¼˜åŒ–å‚æ•°ï¼Œå¼€å§‹æ‰§è¡Œä¼˜åŒ–"></a>6ã€è®¾ç½®ä¼˜åŒ–å‚æ•°ï¼Œå¼€å§‹æ‰§è¡Œä¼˜åŒ–</h3><p>è®¾ç½®SparseOptimizerçš„åˆå§‹åŒ–ã€è¿­ä»£æ¬¡æ•°ã€ä¿å­˜ç»“æœç­‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">optimizer.<span class="built_in">initializeOptimization</span>(); <span class="comment">// è®¾ç½®ä¼˜åŒ–åˆå§‹å€¼</span></span><br><span class="line">optimizer.<span class="built_in">optimize</span>(<span class="number">100</span>);            <span class="comment">// è®¾ç½®ä¼˜åŒ–æ¬¡æ•°</span></span><br></pre></td></tr></table></figure>
<h2 id="éçº¿æ€§æ‹Ÿåˆæ¡ˆä¾‹"><a href="#éçº¿æ€§æ‹Ÿåˆæ¡ˆä¾‹" class="headerlink" title="éçº¿æ€§æ‹Ÿåˆæ¡ˆä¾‹"></a>éçº¿æ€§æ‹Ÿåˆæ¡ˆä¾‹</h2><p>å‡è®¾æœ‰ä¸€æ¡æ»¡è¶³ä»¥ä¸‹æ–¹ç¨‹çš„æ›²çº¿ï¼š</p>
<script type="math/tex; mode=display">
y=exp(ax^2+bx+c)+w</script><p>å…¶ä¸­$ a, b, c $ä¸ºæ›²çº¿çš„å‚æ•°ï¼Œ$w $ä¸ºé«˜æ–¯å™ªå£°ã€‚æˆ‘ä»¬æ•…æ„é€‰æ‹©äº†è¿™æ ·ä¸€ä¸ªéçº¿æ€§æ¨¡å‹ï¼Œä»¥ä½¿é—®é¢˜ä¸è‡³äºå¤ªç®€å•ã€‚ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬æœ‰$ N $ä¸ªå…³äº$ x, y$ çš„è§‚æµ‹æ•°æ®ç‚¹ï¼Œæƒ³æ ¹æ®è¿™äº›æ•°æ®ç‚¹æ±‚å‡ºæ›²çº¿çš„å‚æ•°ã€‚é‚£ä¹ˆï¼Œå¯ä»¥æ±‚è§£ä¸‹é¢çš„æœ€å°äºŒä¹˜é—®é¢˜ä»¥ä¼°è®¡æ›²çº¿å‚æ•°ï¼š</p>
<script type="math/tex; mode=display">
\underset{a,b,c}{min}\frac{1}{2}\sum^{N}_{i=1}\parallel y_i-exp(ax^2_i+bx_i+c)\parallel^2</script><p>èŠ‚ç‚¹ä¸ºä¼˜åŒ–å˜é‡ï¼Œè¾¹ä¸ºè¯¯å·®é¡¹ï¼š</p>
<p><img src="/images/ä½¿ç”¨g2oæ‹Ÿåˆæ›²çº¿/image-20220326161220343.png" alt="image-20220326161220343" style="zoom: 50%;" /></p>
<p>åœ¨æ›²çº¿æ‹Ÿåˆé—®é¢˜ä¸­ï¼Œæ•´ä¸ªé—®é¢˜åªæœ‰ä¸€ä¸ªé¡¶ç‚¹ï¼šæ›²çº¿æ¨¡å‹çš„å‚æ•°$ a, b, c$ï¼›è€Œæ¯ä¸ªå¸¦å™ªå£°çš„æ•°æ®ç‚¹ï¼Œæ„æˆäº†ä¸€ä¸ªä¸ªè¯¯å·®é¡¹ï¼Œä¹Ÿå°±æ˜¯å›¾ä¼˜åŒ–çš„è¾¹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/base_vertex.h&gt;</span>     <span class="comment">// é¡¶ç‚¹</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/base_unary_edge.h&gt;</span> <span class="comment">// è¾¹</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/block_solver.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/solvers/dense/linear_solver_dense.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/optimization_algorithm_gauss_newton.h&gt;</span> <span class="comment">// GN</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/optimization_algorithm_levenberg.h&gt;</span>    <span class="comment">// LM</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;g2o/core/optimization_algorithm_dogleg.h&gt;</span>       <span class="comment">// DogLeg</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›²çº¿æ¨¡å‹çš„é¡¶ç‚¹ï¼Œæ¨¡æ¿å‚æ•°ï¼šä¼˜åŒ–å˜é‡ç»´åº¦å’Œæ•°æ®ç±»å‹   (èŠ‚ç‚¹ä¸ºä¼˜åŒ–å˜é‡)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CurveFittingVertex</span> :</span> <span class="keyword">public</span> g2o::BaseVertex&lt;<span class="number">3</span>, Eigen::Vector3d&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ç»“æ„ä½“åŒ…å«eigenæˆå‘˜å¿…é¡»è¿›è¡Œå®å®šä¹‰ EIGEN_MAKE_ALIGNED_OPERATOR_NEW, ä¿è¯å†…å­˜å¯¹é½</span></span><br><span class="line">    <span class="function">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span></span><br><span class="line"><span class="function">    <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setToOriginImpl</span><span class="params">()</span> <span class="comment">// é¡¶ç‚¹é‡ç½®å‡½æ•°</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _estimate &lt;&lt; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">oplusImpl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">double</span> *update)</span> <span class="comment">// é¡¶ç‚¹æ›´æ–°å‡½æ•°</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _estimate += Eigen::<span class="built_in">Vector3d</span>(update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="keyword">const</span> </span>&#123;&#125; <span class="comment">// constä¸å£°æ˜è¯¥ç±»å°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯¯å·®æ¨¡å‹ æ¨¡æ¿å‚æ•°ï¼šè§‚æµ‹å€¼ç»´åº¦ï¼Œç±»å‹ï¼Œè¿æ¥é¡¶ç‚¹ç±»å‹   (è¾¹ä¸ºè¯¯å·®é¡¹)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CurveFittingEdge</span> :</span> <span class="keyword">public</span> g2o::BaseUnaryEdge&lt;<span class="number">1</span>, <span class="keyword">double</span>, CurveFittingVertex&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">CurveFittingEdge</span>(<span class="keyword">double</span> x) : <span class="built_in">BaseUnaryEdge</span>(), _x(x) &#123;&#125; <span class="comment">// åˆå§‹åŒ–åˆ—è¡¨</span></span><br><span class="line">    <span class="comment">// è®¡ç®—æ›²çº¿æ¨¡å‹è¯¯å·®</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">computeError</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> CurveFittingVertex *v = <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> CurveFittingVertex *&gt;(_vertices[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">const</span> Eigen::Vector3d abc = v-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">        _error(<span class="number">0</span>, <span class="number">0</span>) = _measurement - std::<span class="built_in">exp</span>(<span class="built_in">abc</span>(<span class="number">0</span>, <span class="number">0</span>) * _x * _x + <span class="built_in">abc</span>(<span class="number">1</span>, <span class="number">0</span>) * _x + <span class="built_in">abc</span>(<span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="keyword">const</span> </span>&#123;&#125; <span class="comment">// constä¸å£°æ˜è¯¥ç±»å°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">double</span> _x; <span class="comment">// x å€¼ï¼Œ y å€¼ä¸º _measurement</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸»å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> a = <span class="number">1.0</span>, b = <span class="number">2.0</span>, c = <span class="number">1.0</span>; <span class="comment">// çœŸå®å‚æ•°å€¼</span></span><br><span class="line">    <span class="keyword">int</span> N = <span class="number">100</span>;                      <span class="comment">// æ•°æ®ç‚¹</span></span><br><span class="line">    <span class="keyword">double</span> w_sigma = <span class="number">1.0</span>;             <span class="comment">// å™ªå£°Sigmaå€¼</span></span><br><span class="line">    cv::RNG rng;                      <span class="comment">// OpenCVéšæœºæ•°äº§ç”Ÿå™¨</span></span><br><span class="line">    <span class="keyword">double</span> abc[<span class="number">3</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;        <span class="comment">// abcå‚æ•°çš„ä¼°è®¡å€¼</span></span><br><span class="line"></span><br><span class="line">    vector&lt;<span class="keyword">double</span>&gt; x_data, y_data;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç”Ÿæˆæ•°æ®ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> x = i / <span class="number">100.0</span>;</span><br><span class="line">        x_data.<span class="built_in">push_back</span>(x);</span><br><span class="line">        y_data.<span class="built_in">push_back</span>(<span class="built_in">exp</span>(a * x * x + b * x + c) + rng.<span class="built_in">gaussian</span>(w_sigma));</span><br><span class="line">        cout &lt;&lt; x_data[i] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; y_data[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„å»ºå›¾ä¼˜åŒ–ï¼Œå…ˆè®¾å®šg2o</span></span><br><span class="line">    <span class="comment">// æ¯ä¸ªè¯¯å·®é¡¹ä¼˜åŒ–å˜é‡ç»´åº¦ä¸º3ï¼Œè¯¯å·®å€¼ç»´åº¦ä¸º1</span></span><br><span class="line">    <span class="keyword">typedef</span> g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;<span class="number">3</span>, <span class="number">1</span>&gt;&gt; Block;</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–çº¿æ€§æ–¹ç¨‹æ±‚è§£å™¨</span></span><br><span class="line">    Block::LinearSolverType *linearSolver = <span class="keyword">new</span> g2o::LinearSolverDense&lt;Block::PoseMatrixType&gt;();</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–çŸ©é˜µå—æ±‚è§£å™¨</span></span><br><span class="line">    Block *solver_ptr = <span class="keyword">new</span> <span class="built_in">Block</span>(unique_ptr&lt;Block::LinearSolverType&gt;(linearSolver));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œä»GN(é«˜æ–¯ç‰›é¡¿), LMï¼ˆåˆ—æ–‡ä¼¯æ ¼ï¼‰, DogLeg ä¸­é€‰</span></span><br><span class="line">    g2o::OptimizationAlgorithmGaussNewton *solver_gn = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmGaussNewton</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line">    g2o::OptimizationAlgorithmLevenberg *solver_lm = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmLevenberg</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line">    g2o::OptimizationAlgorithmDogleg *solver_dog = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmDogleg</span>(unique_ptr&lt;Block&gt;(solver_ptr));</span><br><span class="line"></span><br><span class="line">    g2o::SparseOptimizer optimizer;    <span class="comment">// å›¾æ¨¡å‹</span></span><br><span class="line">    optimizer.<span class="built_in">setAlgorithm</span>(solver_lm); <span class="comment">//è®¾ç½®æ±‚è§£å™¨ï¼ˆä½¿ç”¨LMæ–¹æ³•ï¼‰</span></span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>);        <span class="comment">// æ‰“å¼€è°ƒè¯•è¾“å‡º</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾€å›¾ä¸­å¢åŠ é¡¶ç‚¹</span></span><br><span class="line">    CurveFittingVertex *v = <span class="keyword">new</span> <span class="built_in">CurveFittingVertex</span>();</span><br><span class="line">    v-&gt;<span class="built_in">setEstimate</span>(Eigen::<span class="built_in">Vector3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)); <span class="comment">// è®¾ç½®ä¼˜åŒ–åˆå§‹å€¼</span></span><br><span class="line">    v-&gt;<span class="built_in">setId</span>(<span class="number">0</span>);                              <span class="comment">// è®¾ç½®é¡¶ç‚¹ID</span></span><br><span class="line">    optimizer.<span class="built_in">addVertex</span>(v);                   <span class="comment">// å‘ç¨€ç–ä¼˜åŒ–å™¨æ·»åŠ é¡¶ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾€å›¾ä¸­å¢åŠ è¾¹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        CurveFittingEdge *edge = <span class="keyword">new</span> <span class="built_in">CurveFittingEdge</span>(x_data[i]);</span><br><span class="line">        edge-&gt;<span class="built_in">setId</span>(i);</span><br><span class="line">        edge-&gt;<span class="built_in">setVertex</span>(<span class="number">0</span>, v);           <span class="comment">// è®¾ç½®è¿æ¥çš„é¡¶ç‚¹</span></span><br><span class="line">        edge-&gt;<span class="built_in">setMeasurement</span>(y_data[i]); <span class="comment">//è§‚æµ‹æ•°å€¼</span></span><br><span class="line">        <span class="comment">// ä¿¡æ¯çŸ©é˜µï¼šåæ–¹å·®çŸ©é˜µçš„é€†</span></span><br><span class="line">        edge-&gt;<span class="built_in">setInformation</span>(Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">1</span>, <span class="number">1</span>&gt;::<span class="built_in">Identity</span>() * <span class="number">1</span> / (w_sigma * w_sigma));</span><br><span class="line">        optimizer.<span class="built_in">addEdge</span>(edge); <span class="comment">// å‘ç¨€ç–ä¼˜åŒ–å™¨æ·»åŠ è¾¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œä¼˜åŒ–</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot; å¼€å§‹ä¼˜åŒ–ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    chrono::steady_clock::time_point t1 = chrono::steady_clock::<span class="built_in">now</span>(); <span class="comment">// è®¡æ—¶å·¥å…·</span></span><br><span class="line"></span><br><span class="line">    optimizer.<span class="built_in">initializeOptimization</span>(); <span class="comment">// è®¾ç½®ä¼˜åŒ–åˆå§‹å€¼</span></span><br><span class="line">    optimizer.<span class="built_in">optimize</span>(<span class="number">100</span>);            <span class="comment">// è®¾ç½®ä¼˜åŒ–æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">    chrono::steady_clock::time_point t2 = chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line">    chrono::duration&lt;<span class="keyword">double</span>&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(t2 - t1);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ±‚è§£ä¼˜åŒ–å…±ä½¿ç”¨äº†&quot;</span> &lt;&lt; time_used.<span class="built_in">count</span>() &lt;&lt; <span class="string">&quot;ç§’&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾“å‡ºä¼˜åŒ–å€¼</span></span><br><span class="line">    Eigen::Vector3d abc_estimate = v-&gt;<span class="built_in">estimate</span>(); <span class="comment">// æ‰§è¡Œä¼˜åŒ–</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¼°è®¡æ¨¡å‹ä¸ºï¼š&quot;</span> &lt;&lt; abc_estimate.<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>CMakeList.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( g2o_curve_fitting )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ cmakeæ¨¡å—ä»¥ä½¿ç”¨ceresåº“</span></span><br><span class="line"><span class="keyword">list</span>( APPEND CMAKE_MODULE_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/cmake_modules )</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯»æ‰¾G2O</span></span><br><span class="line"><span class="keyword">find_package</span>( G2O REQUIRED )</span><br><span class="line"><span class="keyword">include_directories</span>( </span><br><span class="line">    <span class="variable">$&#123;G2O_INCLUDE_DIRS&#125;</span></span><br><span class="line">    <span class="string">&quot;/usr/include/eigen3&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># OpenCV</span></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV REQUIRED )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;OpenCV_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( curve_fitting g2o_curve_fitting.cpp )</span><br><span class="line"><span class="comment"># ä¸G2Oå’ŒOpenCVé“¾æ¥</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>( curve_fitting </span><br><span class="line">    <span class="variable">$&#123;OpenCV_LIBS&#125;</span></span><br><span class="line">    g2o_core g2o_stuff</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight basic"><table><tr><td class="code"><pre><span class="line">ç”Ÿæˆæ•°æ®ï¼š</span><br><span class="line"><span class="symbol">0 </span><span class="number">2.71828</span></span><br><span class="line"><span class="number">0.01</span> <span class="number">2.93161</span></span><br><span class="line"><span class="number">0.02</span> <span class="number">2.12942</span></span><br><span class="line">.......</span><br><span class="line"><span class="number">0.96</span> <span class="number">47.7941</span></span><br><span class="line"><span class="number">0.97</span> <span class="number">48.5931</span></span><br><span class="line"><span class="number">0.98</span> <span class="number">51.8487</span></span><br><span class="line"><span class="number">0.99</span> <span class="number">51.0258</span></span><br><span class="line"> å¼€å§‹ä¼˜åŒ–ï¼š</span><br><span class="line">iteration= <span class="number">0</span>     chi2= <span class="number">30373.727656</span>      time= <span class="number">7.3362</span>e-<span class="number">05</span>        cumTime= <span class="number">7.3362</span>e-<span class="number">05</span>     edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">699.050482</span>      levenbergIter= <span class="number">7</span></span><br><span class="line">iteration= <span class="number">1</span>     chi2= <span class="number">13336.948287</span>      time= <span class="number">4.4188</span>e-<span class="number">05</span>        cumTime= <span class="number">0.00011755</span>     edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">1864.134619</span>     levenbergIter= <span class="number">3</span></span><br><span class="line">iteration= <span class="number">2</span>     chi2= <span class="number">6946.262238</span>       time= <span class="number">3.8416</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000155966</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">1242.756412</span>     levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">3</span>     chi2= <span class="number">271.023143</span>        time= <span class="number">3.6174</span>e-<span class="number">05</span>        cumTime= <span class="number">0.00019214</span>     edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">414.252137</span>      levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">4</span>     chi2= <span class="number">118.903888</span>        time= <span class="number">3.7968</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000230108</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">138.084046</span>      levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">5</span>     chi2= <span class="number">113.568661</span>        time= <span class="number">3.7864</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000267972</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">46.028015</span>       levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">6</span>     chi2= <span class="number">107.476468</span>        time= <span class="number">3.5648</span>e-<span class="number">05</span>        cumTime= <span class="number">0.00030362</span>     edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">15.342672</span>       levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">7</span>     chi2= <span class="number">103.014521</span>        time= <span class="number">4.424</span>e-<span class="number">05</span>         cumTime= <span class="number">0.00034786</span>     edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">5.114224</span>        levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">8</span>     chi2= <span class="number">101.988349</span>        time= <span class="number">3.7035</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000384895</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">1.704741</span>        levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">9</span>     chi2= <span class="number">101.937388</span>        time= <span class="number">3.6393</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000421288</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">0.568247</span>        levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">10</span>    chi2= <span class="number">101.937021</span>        time= <span class="number">3.0743</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000452031</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">0.378831</span>        levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">11</span>    chi2= <span class="number">101.937020</span>        time= <span class="number">3.2616</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000484647</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">0.252554</span>        levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">12</span>    chi2= <span class="number">101.937020</span>        time= <span class="number">3.1629</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000516276</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">0.168370</span>        levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">13</span>    chi2= <span class="number">101.937020</span>        time= <span class="number">3.2006</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000548282</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">0.112246</span>        levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">14</span>    chi2= <span class="number">101.937020</span>        time= <span class="number">3.124</span>e-<span class="number">05</span>         cumTime= <span class="number">0.000579522</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">0.074831</span>        levenbergIter= <span class="number">1</span></span><br><span class="line">iteration= <span class="number">15</span>    chi2= <span class="number">101.937020</span>        time= <span class="number">5.3317</span>e-<span class="number">05</span>        cumTime= <span class="number">0.000632839</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">13391510.122618</span>         levenbergIter= <span class="number">8</span></span><br><span class="line">iteration= <span class="number">16</span>    chi2= <span class="number">101.937020</span>        time= <span class="number">3.736</span>e-<span class="number">05</span>         cumTime= <span class="number">0.000670199</span>    edges= <span class="number">100</span>      schur= <span class="number">0</span>        lambda= <span class="number">857056647.847525</span>        levenbergIter= <span class="number">3</span></span><br><span class="line">æ±‚è§£ä¼˜åŒ–å…±ä½¿ç”¨äº†<span class="number">0.00163436</span>ç§’</span><br><span class="line">ä¼°è®¡æ¨¡å‹ä¸ºï¼š<span class="number">0.890912</span>   <span class="number">2.1719</span> <span class="number">0.943629</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>g2o</tag>
      </tags>
  </entry>
  <entry>
    <title>ch6_ä½¿ç”¨Ceresæ‹Ÿåˆæ›²çº¿</title>
    <url>/posts/50868.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>Ceres solver æ˜¯è°·æ­Œå¼€å‘çš„ä¸€æ¬¾ç”¨äº<a href="https://so.csdn.net/so/search?q=éçº¿æ€§&amp;spm=1001.2101.3001.7020">éçº¿æ€§</a>ä¼˜åŒ–çš„åº“ï¼Œåœ¨è°·æ­Œçš„å¼€æºæ¿€å…‰é›·è¾¾ slam é¡¹ç›® cartographer ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚Ceres å®˜ç½‘ä¸Šçš„æ–‡æ¡£éå¸¸è¯¦ç»†åœ°ä»‹ç»äº†å…¶å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œç›¸æ¯”äºå¦å¤–ä¸€ä¸ªåœ¨ slam ä¸­è¢«å¹¿æ³›ä½¿ç”¨çš„å›¾ä¼˜åŒ–åº“ G2Oï¼Œceres çš„æ–‡æ¡£å¯è°“ç›¸å½“ä¸°å¯Œè¯¦ç»†ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>ä¸‹è½½ä¸ç¼–è¯‘ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…‹éš†é¡¹ç›®</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ceres-solver/ceres-solver</span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">sudo apt-get install liblapack-dev libsuitesparse-dev libcxsparse3.1.2 libgflags-dev libgoogle-glog-dev libgtest-dev</span><br><span class="line"><span class="comment"># ç¼–è¯‘å®‰è£…</span></span><br><span class="line"><span class="built_in">cd</span> ceres-solver</span><br><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build </span><br><span class="line">cmake ..</span><br><span class="line">make -j4</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<h2 id="Ceresä½¿ç”¨æ­¥éª¤ï¼š"><a href="#Ceresä½¿ç”¨æ­¥éª¤ï¼š" class="headerlink" title="Ceresä½¿ç”¨æ­¥éª¤ï¼š"></a>Ceresä½¿ç”¨æ­¥éª¤ï¼š</h2><ul>
<li>ï¼ˆ1ï¼‰å®šä¹‰$Cost Function$ æ¨¡å‹</li>
</ul>
<p>ä»£ä»·å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¯»ä¼˜çš„ç›®æ ‡å¼ã€‚è¿™ä¸ªéƒ¨åˆ†éœ€è¦ä½¿ç”¨ä»¿å‡½æ•°$ï¼ˆfunctorï¼‰$è¿™ä¸€æŠ€å·§æ¥å®ç°ï¼Œåšæ³•æ˜¯å®šä¹‰ä¸€ä¸ª$ cost function $çš„ç»“æ„ä½“ï¼Œåœ¨ç»“æ„ä½“å†…é‡è½½ï¼ˆï¼‰è¿ç®—ç¬¦ã€‚</p>
<ul>
<li><p>ï¼ˆ2ï¼‰é€šè¿‡ä»£ä»·å‡½æ•°æ„å»ºå¾…æ±‚è§£çš„ä¼˜åŒ–é—®é¢˜</p>
</li>
<li><p>ï¼ˆ3ï¼‰é…ç½®æ±‚è§£å™¨å‚æ•°å¹¶æ±‚è§£é—®é¢˜</p>
</li>
</ul>
<h2 id="HelloWorldæ¡ˆä¾‹"><a href="#HelloWorldæ¡ˆä¾‹" class="headerlink" title="HelloWorldæ¡ˆä¾‹"></a>HelloWorldæ¡ˆä¾‹</h2><h3 id="1-æ„å»ºä»£ä»·å‡½æ•°"><a href="#1-æ„å»ºä»£ä»·å‡½æ•°" class="headerlink" title="1.æ„å»ºä»£ä»·å‡½æ•°"></a>1.æ„å»ºä»£ä»·å‡½æ•°</h3><p>æœ¬æ¡ˆä¾‹ä¸­å¾…ä¼˜åŒ–çš„å‡½æ•°ä¸ºï¼š$f(x)=10-x$ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾æœ€ä¼˜çš„$x$å€¼æ˜¯çš„å‡½æ•°$f(x)$æœ€å°ï¼Œæ‰€ä»¥è¯¯å·®é¡¹ä¸º$10.0-x[0]$ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€éƒ¨åˆ†ï¼šæ„å»ºä»£ä»·å‡½æ•°</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CostFunctor</span> &#123;</span></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> T* <span class="keyword">const</span> x, T* residual)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        residual[<span class="number">0</span>] = <span class="built_in">T</span>(<span class="number">10.0</span>) - x[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="2-æ„å»ºå¯»ä¼˜é—®é¢˜"><a href="#2-æ„å»ºå¯»ä¼˜é—®é¢˜" class="headerlink" title="2.æ„å»ºå¯»ä¼˜é—®é¢˜"></a>2.æ„å»ºå¯»ä¼˜é—®é¢˜</h3><p>é¦–å…ˆï¼Œå®šä¹‰ Problem ç±»å‹çš„å˜é‡ï¼Œç„¶åå°†æ„å»ºçš„ä»£ä»·å‡½æ•°æ·»åŠ åˆ°å¯»ä¼˜é—®é¢˜ä¸­ã€‚å®ä¾‹åŒ–å¯¹è±¡<code>AutoDiffCostFunction</code>å°†åˆ›å»ºçš„ä»£ä»·å‡½æ•°ç»“æ„ä½“å®ä¾‹ä½œä¸ºè¾“å…¥ï¼Œè‡ªåŠ¨ç”Ÿæˆå…¶å¾®åˆ†å¹¶ä¸”è¿”å›ä¸€ä¸ª<code>CostFunction</code> ç±»å‹çš„æ¥å£ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç¬¬äºŒéƒ¨åˆ†ï¼šæ„å»ºå¯»ä¼˜é—®é¢˜</span></span><br><span class="line">   Problem problem;</span><br><span class="line">   CostFunction* cost_function =</span><br><span class="line">   <span class="comment">// ä½¿ç”¨è‡ªåŠ¨æ±‚å¯¼å…¥ï¼Œç¬¬ä¸€ä¸ª1æ˜¯è¾“å‡ºç»´åº¦ï¼Œå³æ®‹å·®çš„ç»´åº¦ï¼Œç¬¬äºŒä¸ª1æ˜¯è¾“å…¥ç»´åº¦ï¼Œå³å¾…å¯»ä¼˜å‚æ•°xçš„ç»´åº¦</span></span><br><span class="line">           <span class="keyword">new</span> AutoDiffCostFunction&lt;CostFunctor, <span class="number">1</span>, <span class="number">1</span>&gt;(<span class="keyword">new</span> CostFunctor);</span><br><span class="line">   problem.<span class="built_in">AddResidualBlock</span>(cost_function, <span class="literal">NULL</span>, &amp;x); <span class="comment">//å‘é—®é¢˜ä¸­æ·»åŠ è¯¯å·®é¡¹ï¼Œæœ¬é—®é¢˜æ¯”è¾ƒç®€å•ï¼Œæ·»åŠ ä¸€ä¸ªå°±è¡Œã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-é…ç½®å¹¶è¿è¡Œæ±‚è§£å™¨"><a href="#3-é…ç½®å¹¶è¿è¡Œæ±‚è§£å™¨" class="headerlink" title="3.é…ç½®å¹¶è¿è¡Œæ±‚è§£å™¨"></a>3.é…ç½®å¹¶è¿è¡Œæ±‚è§£å™¨</h3><p>ä¸ºæ±‚è§£è¿™ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›é…ç½®ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª Optionï¼Œé…ç½®ä¸€ä¸‹æ±‚è§£å™¨çš„é…ç½®ï¼Œåˆ›å»ºä¸€ä¸ª Summaryã€‚æœ€åè°ƒç”¨ Solve æ–¹æ³•ï¼Œæ±‚è§£ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸‰éƒ¨åˆ†ï¼š é…ç½®å¹¶è¿è¡Œæ±‚è§£å™¨</span></span><br><span class="line">    Solver::Options options;</span><br><span class="line">    options.linear_solver_type = ceres::DENSE_QR; <span class="comment">//é…ç½®å¢é‡æ–¹ç¨‹çš„è§£æ³•</span></span><br><span class="line">    options.minimizer_progress_to_stdout = <span class="literal">true</span>;<span class="comment">//è¾“å‡ºåˆ°cout</span></span><br><span class="line">    Solver::Summary summary;<span class="comment">//ä¼˜åŒ–ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">Solve</span>(options, &amp;problem, &amp;summary);<span class="comment">//æ±‚è§£</span></span><br></pre></td></tr></table></figure>
<h3 id="4-è¾“å‡ºç»“æœ"><a href="#4-è¾“å‡ºç»“æœ" class="headerlink" title="4.è¾“å‡ºç»“æœ"></a>4.è¾“å‡ºç»“æœ</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::cout &lt;&lt; summary.<span class="built_in">BriefReport</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;<span class="comment">//è¾“å‡ºä¼˜åŒ–çš„ç®€è¦ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">//æœ€ç»ˆç»“æœ</span></span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;x : &quot;</span> &lt;&lt; initial_x</span><br><span class="line">            &lt;&lt; <span class="string">&quot; -&gt; &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºæ—¥å¿—</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">iter      cost      cost_change  |gradient|   |step|    tr_ratio  tr_radius  ls_iter  iter_time  total_time</span><br><span class="line">   0  1.250000e+01    0.00e+00    5.00e+00   0.00e+00   0.00e+00  1.00e+04        0    1.41e-05    4.20e-05</span><br><span class="line">   1  1.249750e-07    1.25e+01    5.00e-04   5.00e+00   1.00e+00  3.00e+04        1    3.10e-05    1.18e-04</span><br><span class="line">   2  1.388518e-16    1.25e-07    1.67e-08   5.00e-04   1.00e+00  9.00e+04        1    3.81e-06    1.31e-04</span><br><span class="line">Ceres Solver Report: Iterations: 3, Initial cost: 1.250000e+01, Final cost: 1.388518e-16, Termination: CONVERGENCE</span><br><span class="line">x : 5 -&gt; 10</span><br></pre></td></tr></table></figure>
<p>æ•´ä½“ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ceres/ceres.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> ceres;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€éƒ¨åˆ†ï¼šæ„å»ºä»£ä»·å‡½æ•°</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CostFunctor</span> &#123;</span></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> T* <span class="keyword">const</span> x, T* residual)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        residual[<span class="number">0</span>] = <span class="built_in">T</span>(<span class="number">10.0</span>) - x[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸»å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span> </span>&#123;</span><br><span class="line">    google::<span class="built_in">InitGoogleLogging</span>(argv[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»ä¼˜å‚æ•°xçš„åˆå§‹å€¼ï¼Œä¸º5</span></span><br><span class="line">    <span class="keyword">double</span> initial_x = <span class="number">5.0</span>;</span><br><span class="line">    <span class="keyword">double</span> x = initial_x;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬äºŒéƒ¨åˆ†ï¼šæ„å»ºå¯»ä¼˜é—®é¢˜</span></span><br><span class="line">    Problem problem;</span><br><span class="line">    CostFunction* cost_function =</span><br><span class="line">            <span class="keyword">new</span> AutoDiffCostFunction&lt;CostFunctor, <span class="number">1</span>, <span class="number">1</span>&gt;(<span class="keyword">new</span> CostFunctor); <span class="comment">//ä½¿ç”¨è‡ªåŠ¨æ±‚å¯¼</span></span><br><span class="line">    problem.<span class="built_in">AddResidualBlock</span>(cost_function, <span class="literal">NULL</span>, &amp;x); </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç¬¬ä¸‰éƒ¨åˆ†ï¼š é…ç½®å¹¶è¿è¡Œæ±‚è§£å™¨</span></span><br><span class="line">    Solver::Options options;</span><br><span class="line">    options.linear_solver_type = ceres::DENSE_QR; <span class="comment">//é…ç½®å¢é‡æ–¹ç¨‹çš„è§£æ³•</span></span><br><span class="line">    options.minimizer_progress_to_stdout = <span class="literal">true</span>;<span class="comment">//è¾“å‡ºåˆ°cout</span></span><br><span class="line">    Solver::Summary summary;<span class="comment">//ä¼˜åŒ–ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">Solve</span>(options, &amp;problem, &amp;summary);<span class="comment">//æ±‚è§£</span></span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; summary.<span class="built_in">BriefReport</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;<span class="comment">//è¾“å‡ºä¼˜åŒ–çš„ç®€è¦ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//æœ€ç»ˆç»“æœ</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;x : &quot;</span> &lt;&lt; initial_x</span><br><span class="line">              &lt;&lt; <span class="string">&quot; -&gt; &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="éçº¿æ€§ä¼˜åŒ–æ¡ˆä¾‹"><a href="#éçº¿æ€§ä¼˜åŒ–æ¡ˆä¾‹" class="headerlink" title="éçº¿æ€§ä¼˜åŒ–æ¡ˆä¾‹"></a>éçº¿æ€§ä¼˜åŒ–æ¡ˆä¾‹</h2><p>ä½¿ç”¨$ Ceres $æ‹Ÿåˆæ›²çº¿</p>
<p>å‡è®¾æœ‰ä¸€æ¡æ»¡è¶³ä»¥ä¸‹æ–¹ç¨‹çš„æ›²çº¿ï¼š</p>
<script type="math/tex; mode=display">
y=exp(ax^2+bx+c)+w</script><p>å…¶ä¸­$ a, b, c $ä¸ºæ›²çº¿çš„å‚æ•°ï¼Œ$w $ä¸ºé«˜æ–¯å™ªå£°ã€‚æˆ‘ä»¬æ•…æ„é€‰æ‹©äº†è¿™æ ·ä¸€ä¸ªéçº¿æ€§æ¨¡å‹ï¼Œä»¥ä½¿é—®é¢˜ä¸è‡³äºå¤ªç®€å•ã€‚ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬æœ‰$ N $ä¸ªå…³äº$ x, y$ çš„è§‚æµ‹æ•°æ®ç‚¹ï¼Œæƒ³æ ¹æ®è¿™äº›æ•°æ®ç‚¹æ±‚å‡ºæ›²çº¿çš„å‚æ•°ã€‚é‚£ä¹ˆï¼Œå¯ä»¥æ±‚è§£ä¸‹é¢çš„æœ€å°äºŒä¹˜é—®é¢˜ä»¥ä¼°è®¡æ›²çº¿å‚æ•°ï¼š</p>
<script type="math/tex; mode=display">
\underset{a,b,c}{min}\frac{1}{2}\sum^{N}_{i=1}\parallel y_i-exp(ax^2_i+bx_i+c)\parallel^2</script><p>è¯·æ³¨æ„ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œå¾…ä¼°è®¡çš„å˜é‡æ˜¯ $a, b, c$ï¼Œè€Œä¸æ˜¯$ x$ã€‚æˆ‘ä»¬å†™ä¸€ä¸ªç¨‹åºï¼Œå…ˆæ ¹æ®æ¨¡å‹ç”Ÿæˆ $x, y$ çš„çœŸå€¼ï¼Œç„¶ååœ¨çœŸå€¼ä¸­æ·»åŠ é«˜æ–¯åˆ†å¸ƒçš„å™ªå£°ã€‚éšåï¼Œä½¿ç”¨ $Ceres $ä»å¸¦å™ªå£°çš„æ•°æ®ä¸­æ‹Ÿåˆå‚æ•°æ¨¡å‹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ceres/ceres.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€éƒ¨åˆ†ï¼šæ„å»ºä»£ä»·å‡½æ•°</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CURVE_FITTING_COST</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»“æ„ä½“ä¸­çš„è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼ŒåŒæ—¶åˆå§‹åŒ–xå’Œy(ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–constå€¼ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨)</span></span><br><span class="line">    <span class="built_in">CURVE_FITTING_COST</span>(<span class="keyword">double</span> x, <span class="keyword">double</span> y) : _x(x), _y(y) &#123;&#125;</span><br><span class="line">    <span class="comment">// æ®‹å·®çš„è®¡ç®—</span></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    <span class="comment">// const T* const abcæ¨¡å‹å‚æ•°ï¼Œæœ‰3ç»´</span></span><br><span class="line">    <span class="comment">// T* residual      // æ®‹å·®</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> T *<span class="keyword">const</span> abc, T *residual)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// y-exp(ax^2+bx+c)</span></span><br><span class="line">        residual[<span class="number">0</span>] = <span class="built_in">T</span>(_y) - ceres::<span class="built_in">exp</span>(abc[<span class="number">0</span>]* <span class="built_in">T</span>(_x)* <span class="built_in">T</span>(_x) + abc[<span class="number">1</span>] * <span class="built_in">T</span>(_x) + abc[<span class="number">2</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">double</span> _x, _y; <span class="comment">// x,yæ•°æ®</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> a = <span class="number">1.0</span>, b = <span class="number">2.0</span>, c = <span class="number">1.0</span>; <span class="comment">// çœŸå®å‚æ•°å€¼</span></span><br><span class="line">    <span class="keyword">int</span> N = <span class="number">100</span>;                      <span class="comment">// æ•°æ®ç‚¹</span></span><br><span class="line">    <span class="keyword">double</span> w_sigma = <span class="number">1.0</span>;             <span class="comment">// å™ªå£°Sigmaå€¼</span></span><br><span class="line">    cv::RNG rng;                      <span class="comment">// OpenCVéšæœºæ•°äº§ç”Ÿå™¨</span></span><br><span class="line">    <span class="keyword">double</span> abc[<span class="number">3</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;        <span class="comment">// abcå‚æ•°çš„ä¼°è®¡å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå­˜æ”¾xï¼Œyæ•°æ®çš„å®¹å™¨</span></span><br><span class="line">    vector&lt;<span class="keyword">double</span>&gt; x_data, y_data;</span><br><span class="line">    <span class="comment">// å°†ç”Ÿæˆ100ç»„çš„æ•°æ®ç»™å®¹å™¨</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;äº§ç”Ÿæ•°æ®ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> x = i / <span class="number">100.0</span>; <span class="comment">// xä¸º0-1ä¹‹é—´çš„100ä¸ªæ•°</span></span><br><span class="line">        x_data.<span class="built_in">push_back</span>(x);</span><br><span class="line">        y_data.<span class="built_in">push_back</span>(<span class="built_in">exp</span>(a * x * x + b * x + c) + rng.<span class="built_in">gaussian</span>(w_sigma));</span><br><span class="line">        cout &lt;&lt; x_data[i] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; y_data[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// ç¬¬äºŒéƒ¨åˆ†ï¼šæ„å»ºå¯»ä¼˜é—®é¢˜</span></span><br><span class="line">    ceres::Problem problem;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å‘é—®é¢˜ä¸­æ·»åŠ è¯¯å·®é¡¹</span></span><br><span class="line">        problem.<span class="built_in">AddResidualBlock</span>(</span><br><span class="line">            <span class="comment">// ä½¿ç”¨è‡ªåŠ¨æ±‚å¯¼ï¼Œæ¨¡æ¿å‚æ•°ï¼šè¯¯å·®ç±»å‹ï¼Œè¾“å‡ºç»´åº¦ï¼Œè¾“å…¥ç»´åº¦ï¼Œç»´æ•°è¦ä¸å‰é¢structä¸­ä¸€è‡´</span></span><br><span class="line">            <span class="comment">// ç¬¬ä¸€ä¸ª1æ˜¯è¾“å‡ºç»´åº¦ï¼Œå³æ®‹å·®çš„ç»´åº¦ï¼Œç¬¬äºŒä¸ª3æ˜¯è¾“å…¥ç»´åº¦ï¼Œå³å¾…å¯»ä¼˜å‚æ•°abcçš„ç»´åº¦</span></span><br><span class="line">            <span class="keyword">new</span> ceres::AutoDiffCostFunction&lt;CURVE_FITTING_COST, <span class="number">1</span>, <span class="number">3</span>&gt;</span><br><span class="line">                        (<span class="keyword">new</span> <span class="built_in">CURVE_FITTING_COST</span>(x_data[i], y_data[i])),</span><br><span class="line">            <span class="literal">nullptr</span>, <span class="comment">// æ ¸å‡½æ•°ï¼Œè¿™é‡Œä¸ä½¿ç”¨ï¼Œä¸ºç©º</span></span><br><span class="line">            abc);    <span class="comment">// å¾…ä¼°è®¡å‚æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰éƒ¨åˆ†ï¼š é…ç½®å¹¶è¿è¡Œæ±‚è§£å™¨</span></span><br><span class="line">    ceres::Solver::Options options;               <span class="comment">// è¿™é‡Œæœ‰å¾ˆå¤šé…ç½®é¡¹å¯ä»¥å¡«</span></span><br><span class="line">    options.linear_solver_type = ceres::DENSE_QR; <span class="comment">// å¢é‡æ–¹ç¨‹æ±‚è§£æ–¹æ³•ï¼ˆQRï¼‰</span></span><br><span class="line">    options.minimizer_progress_to_stdout = <span class="literal">true</span>;  <span class="comment">// è¾“å‡ºåˆ°cout</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¼˜åŒ–ä¿¡æ¯</span></span><br><span class="line">    ceres::Solver::Summary summary;                                                                </span><br><span class="line">    chrono::steady_clock::time_point t1 = chrono::steady_clock::<span class="built_in">now</span>();<span class="comment">// è®¡æ—¶ç‚¹t1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€å§‹ä¼˜åŒ–</span></span><br><span class="line">    ceres::<span class="built_in">Solve</span>(options,&amp;problem,&amp;summary); <span class="comment">//æ±‚è§£!!!!</span></span><br><span class="line"></span><br><span class="line">    chrono::steady_clock::time_point t2 = chrono::steady_clock::<span class="built_in">now</span>();<span class="comment">// è®¡æ—¶ç‚¹t2</span></span><br><span class="line">    chrono::duration&lt;<span class="keyword">double</span>&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(t2 - t1); <span class="comment">// ç»Ÿè®¡ç”¨æ—¶</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ€»è®¡ç”¨æ—¶ï¼š&quot;</span> &lt;&lt; time_used.<span class="built_in">count</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line">    cout &lt;&lt; summary.<span class="built_in">BriefReport</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä¼°è®¡çš„a,b,cçš„å€¼ä¸ºï¼š&quot;</span> ;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> a : abc)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span>;   </span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( ceres_curve_fitting )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ cmakeæ¨¡å—ä»¥ä½¿ç”¨ceresåº“</span></span><br><span class="line"><span class="keyword">list</span>( APPEND CMAKE_MODULE_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/cmake_modules )</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯»æ‰¾Ceresåº“å¹¶æ·»åŠ å®ƒçš„å¤´æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">find_package</span>( Ceres REQUIRED )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;CERES_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># OpenCV</span></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV REQUIRED )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;OpenCV_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( curve_fitting ceres_curve_fitting.cpp )</span><br><span class="line"><span class="comment"># ä¸Cereså’ŒOpenCVé“¾æ¥</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>( curve_fitting <span class="variable">$&#123;CERES_LIBRARIES&#125;</span> <span class="variable">$&#123;OpenCV_LIBS&#125;</span> )</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">äº§ç”Ÿæ•°æ®ï¼š</span><br><span class="line">0 2.71828</span><br><span class="line">0.01 2.93161</span><br><span class="line">0.02 2.12942</span><br><span class="line">0.03 2.46037</span><br><span class="line">0.04 4.18814</span><br><span class="line">0.05 2.73368</span><br><span class="line">0.06 2.42751</span><br><span class="line">0.07 3.44729</span><br><span class="line">0.08 3.72543</span><br><span class="line">0.09 2.1358</span><br><span class="line">.....</span><br><span class="line">0.96 47.7941</span><br><span class="line">0.97 48.5931</span><br><span class="line">0.98 51.8487</span><br><span class="line">0.99 51.0258</span><br><span class="line">iter      cost      cost_change  |gradient|   |step|    tr_ratio  tr_radius  ls_iter  iter_time  total_time</span><br><span class="line">   0  1.824887e+04    0.00e+00    1.38e+03   0.00e+00   0.00e+00  1.00e+04        0    1.02e-04    1.95e-04</span><br><span class="line">   1  2.748700e+39   -2.75e+39    1.38e+03   7.67e+01  -1.52e+35  5.00e+03        1    1.02e-04    3.83e-04</span><br><span class="line">   2  2.429783e+39   -2.43e+39    1.38e+03   7.62e+01  -1.35e+35  1.25e+03        1    3.91e-05    4.59e-04</span><br><span class="line">   3  1.213227e+39   -1.21e+39    1.38e+03   7.30e+01  -6.73e+34  1.56e+02        1    3.29e-05    5.27e-04</span><br><span class="line">   4  1.852387e+37   -1.85e+37    1.38e+03   5.56e+01  -1.03e+33  9.77e+00        1    3.22e-05    5.87e-04</span><br><span class="line">   5  6.714689e+31   -6.71e+31    1.38e+03   2.96e+01  -3.85e+27  3.05e-01        1    3.22e-05    6.44e-04</span><br><span class="line">   6  9.500531e+12   -9.50e+12    1.38e+03   9.50e+00  -8.39e+08  4.77e-03        1    3.10e-05    7.00e-04</span><br><span class="line">   7  1.776982e+04    4.79e+02    1.83e+03   2.58e-01   1.18e+00  1.43e-02        1    1.14e-04    8.37e-04</span><br><span class="line">   8  1.599969e+04    1.77e+03    3.45e+03   5.53e-01   1.46e+00  4.29e-02        1    8.11e-05    9.54e-04</span><br><span class="line">   9  1.060557e+04    5.39e+03    7.62e+03   7.33e-01   1.68e+00  1.29e-01        1    1.30e-04    1.11e-03</span><br><span class="line">  10  3.669783e+03    6.94e+03    9.60e+03   5.25e-01   1.39e+00  3.86e-01        1    9.61e-05    1.24e-03</span><br><span class="line">  11  5.397541e+02    3.13e+03    5.00e+03   2.66e-01   1.12e+00  1.16e+00        1    8.20e-05    1.36e-03</span><br><span class="line">  12  1.484444e+02    3.91e+02    1.22e+03   8.46e-02   1.02e+00  3.48e+00        1    8.20e-05    1.48e-03</span><br><span class="line">  13  1.216815e+02    2.68e+01    3.76e+02   4.17e-02   1.01e+00  1.04e+01        1    7.39e-05    1.58e-03</span><br><span class="line">  14  9.290109e+01    2.88e+01    2.42e+02   9.10e-02   1.01e+00  3.13e+01        1    1.57e-04    1.76e-03</span><br><span class="line">  15  6.674330e+01    2.62e+01    1.09e+02   1.33e-01   1.00e+00  9.39e+01        1    1.31e-04    1.93e-03</span><br><span class="line">  16  5.936574e+01    7.38e+00    2.14e+01   1.08e-01   9.94e-01  2.82e+02        1    1.39e-04    2.10e-03</span><br><span class="line">  17  5.653118e+01    2.83e+00    1.36e+01   1.57e-01   9.98e-01  8.45e+02        1    9.11e-05    2.25e-03</span><br><span class="line">  18  5.310764e+01    3.42e+00    8.50e+00   2.81e-01   9.89e-01  2.53e+03        1    7.58e-05    2.35e-03</span><br><span class="line">  19  5.125939e+01    1.85e+00    2.84e+00   2.98e-01   9.90e-01  7.60e+03        1    7.39e-05    2.45e-03</span><br><span class="line">  20  5.097693e+01    2.82e-01    4.34e-01   1.48e-01   9.95e-01  2.28e+04        1    7.41e-05    2.54e-03</span><br><span class="line">  21  5.096854e+01    8.39e-03    3.24e-02   2.87e-02   9.96e-01  6.84e+04        1    7.30e-05    2.64e-03</span><br><span class="line">æ€»è®¡ç”¨æ—¶ï¼š0.00273015</span><br><span class="line">Ceres Solver Report: Iterations: 22, Initial cost: 1.824887e+04, Final cost: 5.096854e+01, Termination: CONVERGENCE</span><br><span class="line">ä¼°è®¡çš„a,b,cçš„å€¼ä¸ºï¼š0.891943 2.17039 0.944142 </span><br></pre></td></tr></table></figure>
<p>ä» Ceres ç»™å‡ºçš„ä¼˜åŒ–è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä½“è¯¯å·®ä» 18248 å·¦å³ä¸‹é™åˆ°äº† 50.9ï¼Œå¹¶ä¸”æ¢¯åº¦ä¹Ÿæ˜¯è¶Šæ¥è¶Šå°ã€‚åœ¨è¿­ä»£ 22 æ¬¡åç®—æ³•æ”¶æ•›ï¼Œæœ€åçš„ä¼°è®¡å€¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
a=0.891943, b=2.17039, c=0.944142</script><p>ä¸çœŸå®å€¼æ¯”è¾ƒæ¥è¿‘ã€‚</p>
<p><img src="/images/ä½¿ç”¨Ceresæ‹Ÿåˆæ›²çº¿/Ceres.PNG" alt="Ceres"></p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>Ceres</tag>
      </tags>
  </entry>
  <entry>
    <title>ch5_æ‹¼æ¥ç‚¹äº‘(PCLåº“)</title>
    <url>/posts/44975.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>ç¨‹åºæä¾›äº†äº”å¼  RGB-D å›¾åƒï¼Œå¹¶ä¸”çŸ¥é“äº†æ¯ä¸ªå›¾åƒçš„å†…å‚å’Œå¤–å‚ã€‚æ ¹æ® RGB-D å›¾åƒå’Œç›¸æœºå†…å‚ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä»»ä½•ä¸€ä¸ªåƒç´ åœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„ä½ç½®ã€‚åŒæ—¶ï¼Œæ ¹æ®ç›¸æœºä½å§¿ï¼Œåˆèƒ½è®¡ç®—è¿™äº›åƒç´ åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä½ç½®ã€‚å¦‚æœæŠŠæ‰€æœ‰åƒç´ çš„ç©ºé—´åæ ‡éƒ½æ±‚å‡ºæ¥ï¼Œç›¸å½“äºæ„å»ºä¸€å¼ ç±»ä¼¼äºåœ°å›¾çš„ä¸œè¥¿ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>pose.txt æ–‡ä»¶ç»™å‡ºäº†äº”å¼ å›¾åƒçš„ç›¸æœºä½å§¿ï¼ˆä»¥ $T_{wc} $å½¢å¼ï¼‰ã€‚ä½å§¿è®°å½•çš„å½¢å¼æ˜¯å¹³ç§»å‘é‡åŠ æ—‹è½¬å››å…ƒæ•°ï¼š<br>$[x, y, z, q_x , q_y , q_z , q_w ]$,å…¶ä¸­ $q_w $æ˜¯å››å…ƒæ•°çš„å®éƒ¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-0.228993 0.00645704 0.0287837 -0.0004327 -0.113131 -0.0326832 0.993042</span><br><span class="line">-0.50237 -0.0661803 0.322012 -0.00152174 -0.32441 -0.0783827 0.942662</span><br><span class="line">-0.970912 -0.185889 0.872353 -0.00662576 -0.278681 -0.0736078 0.957536</span><br><span class="line">-1.41952 -0.279885 1.43657 -0.00926933 -0.222761 -0.0567118 0.973178</span><br><span class="line">-1.55819 -0.301094 1.6215 -0.02707 -0.250946 -0.0412848 0.966741</span><br></pre></td></tr></table></figure>
<p>æ¡ˆä¾‹ä¸»è¦å®Œæˆä¸¤ä»¶äº‹ï¼š</p>
<p>(1). æ ¹æ®å†…å‚è®¡ç®—ä¸€å¯¹ RGB-D å›¾åƒå¯¹åº”çš„ç‚¹äº‘ï¼›<br>(2). æ ¹æ®å„å¼ å›¾çš„ç›¸æœºä½å§¿ï¼ˆä¹Ÿå°±æ˜¯å¤–å‚ï¼‰ï¼ŒæŠŠç‚¹äº‘åŠ èµ·æ¥ï¼Œç»„æˆåœ°å›¾ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Geometry&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/format.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pcl/point_types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pcl/io/pcd_io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pcl/visualization/cloud_viewer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;cv::Mat&gt; colorImgs, depthImgs; <span class="comment">// å½©è‰²å›¾å’Œæ·±åº¦å›¾</span></span><br><span class="line">    <span class="comment">// å®šä¹‰ç›¸æœºä½å§¿å®¹å™¨  ç”¨æ¥å­˜å‚¨ç›¸æœºä½å§¿</span></span><br><span class="line">    vector&lt;Eigen::Isometry3d, Eigen::aligned_allocator&lt;Eigen::Isometry3d&gt;&gt; poses;</span><br><span class="line">    <span class="comment">// è¯»å…¥äº”å¼ å›¾åƒçš„ç›¸æœºä½å§¿ï¼ˆä»¥ Twc å½¢å¼ï¼‰</span></span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">&quot;./pose.txt&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!fin)</span><br><span class="line">    &#123;</span><br><span class="line">        cerr &lt;&lt; <span class="string">&quot;è¯·åœ¨æœ‰pose.txtçš„ç›®å½•ä¸‹è¿è¡Œæ­¤ç¨‹åº&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¯»å…¥äº”å¼ å›¾ç‰‡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">boost::format <span class="title">fmt</span><span class="params">(<span class="string">&quot;./%s/%d.%s&quot;</span>)</span></span>; <span class="comment">//å›¾åƒæ–‡ä»¶æ ¼å¼</span></span><br><span class="line">        <span class="comment">// è¯»å…¥å½©è‰²å›¾æ”¾è¿›å®¹å™¨ä¸­</span></span><br><span class="line">        colorImgs.<span class="built_in">push_back</span>(cv::<span class="built_in">imread</span>((fmt % <span class="string">&quot;color&quot;</span> % (i + <span class="number">1</span>) % <span class="string">&quot;png&quot;</span>).<span class="built_in">str</span>()));</span><br><span class="line">        <span class="comment">// è¯»å…¥æ·±åº¦å›¾æ”¾è¿›å®¹å™¨ä¸­</span></span><br><span class="line">        depthImgs.<span class="built_in">push_back</span>(cv::<span class="built_in">imread</span>((fmt % <span class="string">&quot;depth&quot;</span> % (i + <span class="number">1</span>) % <span class="string">&quot;pgm&quot;</span>).<span class="built_in">str</span>(), <span class="number">-1</span>)); <span class="comment">// ä½¿ç”¨-1è¯»å–åŸå§‹å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯»å…¥poseä¸­çš„ä½å§¿è®°å½•ï¼ˆä½å§¿è®°å½•çš„å½¢å¼æ˜¯å¹³ç§»å‘é‡åŠ æ—‹è½¬å››å…ƒæ•°ï¼‰</span></span><br><span class="line">        <span class="keyword">double</span> data[<span class="number">7</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;d : data)</span><br><span class="line">            fin &gt;&gt; d;</span><br><span class="line">        <span class="function">Eigen::Quaterniond <span class="title">q</span><span class="params">(data[<span class="number">6</span>], data[<span class="number">3</span>], data[<span class="number">4</span>], data[<span class="number">5</span>])</span></span>; <span class="comment">// qw qx qy qz</span></span><br><span class="line">        <span class="function">Eigen::Isometry3d <span class="title">T</span><span class="params">(q)</span></span>;                                   <span class="comment">// ç”±å››å…ƒæ•°æ„é€ å˜æ¢çŸ©é˜µT</span></span><br><span class="line">        <span class="comment">// å¹³ç§»</span></span><br><span class="line">        T.<span class="built_in">pretranslate</span>(Eigen::<span class="built_in">Vector3d</span>(data[<span class="number">0</span>], data[<span class="number">1</span>], data[<span class="number">2</span>])); <span class="comment">// x y z pretanslate ç›¸å½“äºå·¦ä¹˜</span></span><br><span class="line">        <span class="comment">// å°†ä½å§¿ä¿¡æ¯ä¼ å…¥ä½å§¿å®¹å™¨</span></span><br><span class="line">        poses.<span class="built_in">push_back</span>(T);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—ç‚¹äº‘å¹¶æ‹¼æ¥</span></span><br><span class="line">    <span class="comment">// ç›¸æœºå†…å‚</span></span><br><span class="line">    <span class="keyword">double</span> cx = <span class="number">325.5</span>;</span><br><span class="line">    <span class="keyword">double</span> cy = <span class="number">253.5</span>;</span><br><span class="line">    <span class="keyword">double</span> fx = <span class="number">518.0</span>;</span><br><span class="line">    <span class="keyword">double</span> fy = <span class="number">519.0</span>;</span><br><span class="line">    <span class="keyword">double</span> depthScale = <span class="number">1000.0</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ­£åœ¨å°†å›¾åƒè½¬æ¢ä¸ºç‚¹äº‘...&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ç‚¹äº‘ä½¿ç”¨çš„æ ¼å¼ï¼šè¿™é‡Œç”¨çš„æ˜¯XYZRGB</span></span><br><span class="line">    <span class="keyword">typedef</span> pcl::PointXYZRGB PointT;</span><br><span class="line">    <span class="keyword">typedef</span> pcl::PointCloud&lt;PointT&gt; PointCloud;</span><br><span class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªç‚¹äº‘</span></span><br><span class="line">    <span class="function">PointCloud::Ptr <span class="title">pointCloud</span><span class="params">(<span class="keyword">new</span> PointCloud)</span></span>;</span><br><span class="line">    <span class="comment">// å¾ªç¯æ¯ä¸€å¼ å›¾ç‰‡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç¬¬&quot;</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot;å¼ å›¾åƒè½¬æ¢ä¸­&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cv::Mat color = colorImgs[i]; <span class="comment">// è¯»å–å½©è‰²å›¾</span></span><br><span class="line">        cv::Mat depth = depthImgs[i]; <span class="comment">// è¯»å–å¯¹åº”çš„æ·±åº¦å›¾</span></span><br><span class="line">        Eigen::Isometry3d T = poses[i]; <span class="comment">// è¯»å…¥ç›¸æœºä½å§¿</span></span><br><span class="line">        <span class="comment">// å°†åƒç´ åæ ‡è½¬æ ¹æ®ç›¸æœºä½å§¿æ¢æˆä¸–ç•Œåæ ‡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">0</span>; v &lt; color.rows; v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">0</span>; u &lt; color.cols; u++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">unsigned</span> <span class="keyword">int</span> d = depth.ptr&lt;<span class="keyword">unsigned</span> <span class="keyword">short</span>&gt;(v)[u]; <span class="comment">// æ·±åº¦å€¼</span></span><br><span class="line">                <span class="keyword">if</span> (d == <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">continue</span>; <span class="comment">// ä¸º0è¡¨ç¤ºæ²¡æœ‰æµ‹é‡åˆ°</span></span><br><span class="line">                Eigen::Vector3d point;</span><br><span class="line">                point[<span class="number">2</span>] = <span class="built_in"><span class="keyword">double</span></span>(d) / depthScale;   <span class="comment">// Z</span></span><br><span class="line">                point[<span class="number">0</span>] = (u - cx) * point[<span class="number">2</span>] / fx; <span class="comment">// X</span></span><br><span class="line">                point[<span class="number">1</span>] = (v - cy) * point[<span class="number">2</span>] / fy; <span class="comment">// Y</span></span><br><span class="line">                Eigen::Vector3d pointWorld = T * point; <span class="comment">// å¾—åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ç‚¹äº‘</span></span><br><span class="line"></span><br><span class="line">                PointT p; <span class="comment">// XYZRGBç±»å‹çš„p</span></span><br><span class="line">                <span class="comment">// å‰ä¸‰ä½å­˜å‚¨ç‚¹äº‘çš„ä¸–ç•Œåæ ‡</span></span><br><span class="line">                p.x = pointWorld[<span class="number">0</span>];</span><br><span class="line">                p.y = pointWorld[<span class="number">1</span>];</span><br><span class="line">                p.z = pointWorld[<span class="number">2</span>]; </span><br><span class="line">                <span class="comment">// åä¸‰ä½å­˜å‚¨ç‚¹äº‘çš„bgrå€¼</span></span><br><span class="line">                p.b = color.data[v * color.step + u * color.<span class="built_in">channels</span>()];</span><br><span class="line">                p.g = color.data[v * color.step + u * color.<span class="built_in">channels</span>() + <span class="number">1</span>];</span><br><span class="line">                p.r = color.data[v * color.step + u * color.<span class="built_in">channels</span>() + <span class="number">2</span>]; </span><br><span class="line">                pointCloud-&gt;points.<span class="built_in">push_back</span>(p);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    pointCloud-&gt;is_dense = <span class="literal">false</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç‚¹äº‘ä¸€å…±æœ‰&quot;</span> &lt;&lt; pointCloud-&gt;<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;ä¸ªç‚¹ã€‚&quot;</span> &lt;&lt; endl;</span><br><span class="line">    pcl::io::<span class="built_in">savePCDFileBinary</span>(<span class="string">&quot;myPCL.pcd&quot;</span>,*pointCloud);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( joinMap )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE Release )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>(CMAKE_BUILD_TYPE Debug)</span><br><span class="line"></span><br><span class="line"><span class="comment"># opencv </span></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV REQUIRED )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># eigen </span></span><br><span class="line"><span class="keyword">include_directories</span>( <span class="string">&quot;/usr/include/eigen3/&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># pcl </span></span><br><span class="line"><span class="keyword">find_package</span>( PCL REQUIRED COMPONENT common io )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;PCL_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"><span class="keyword">add_definitions</span>( <span class="variable">$&#123;PCL_DEFINITIONS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( joinMap joinMap.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( joinMap <span class="variable">$&#123;OpenCV_LIBS&#125;</span> <span class="variable">$&#123;PCL_LIBRARIES&#125;</span> )</span><br></pre></td></tr></table></figure>
<p><img src="/images/æ‹¼æ¥ç‚¹äº‘-PCLåº“/PCL.PNG" alt="PCL"></p>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>PCL</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨OpenCVæ“ä½œå›¾åƒ</title>
    <url>/posts/53401.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>OpenCV æä¾›äº†å¤§é‡çš„å¼€æºå›¾åƒç®—æ³•ï¼Œæ˜¯è®¡ç®—æœºè§†è§‰ä¸­ä½¿ç”¨æå¹¿çš„å›¾åƒå¤„ç†ç®—æ³•åº“ã€‚åœ¨ubuntu ä¸‹ï¼Œä½ å¯ä»¥é€‰æ‹©ä»æºä»£ç å®‰è£…å’Œåªå®‰è£…åº“æ–‡ä»¶ä¸¤ç§æ–¹å¼ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>æºä»£ç å®‰è£…ï¼š</p>
<p>ä» <a href="http://opencv.org/downloads.html">http://opencv.org/downloads.html</a> ä¸­ä¸‹è½½ï¼Œé€‰æ‹© OpenCV for Linux ç‰ˆæœ¬å³å¯</p>
<p>åœ¨ç¼–è¯‘ä¹‹å‰ï¼Œå…ˆæ¥å®‰è£… OpenCV çš„ä¾èµ–é¡¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install build-essential libgtk2.0-dev libvtk5-dev libjpeg-dev libtiff4-dev libjasper-dev libopenexr-dev libtbb-dev</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build </span><br><span class="line">cnake ..</span><br><span class="line">make -j4</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è¯»å–argv[1]æŒ‡å®šçš„å›¾åƒ</span></span><br><span class="line">    cv::Mat image;</span><br><span class="line">    image = cv::<span class="built_in">imread</span>(argv[<span class="number">1</span>]); <span class="comment">// cv::imreadå‡½æ•°è¯»å–æŒ‡å®šè·¯å¾„ä¸‹çš„å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•°æ®ä¸å­˜åœ¨,å¯èƒ½æ˜¯æ–‡ä»¶ä¸å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> (image.data == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// cerrï¼šè¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯çš„ostreamå¯¹è±¡ï¼Œå¸¸ç”¨äºç¨‹åºé”™è¯¯ä¿¡æ¯ï¼›</span></span><br><span class="line">        cerr &lt;&lt; <span class="string">&quot;æ–‡ä»¶&quot;</span> &lt;&lt; argv[<span class="number">1</span>] &lt;&lt; <span class="string">&quot;ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–‡ä»¶é¡ºåˆ©è¯»å–, é¦–å…ˆè¾“å‡ºä¸€äº›åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å›¾åƒçš„å®½ä¸ºï¼š&quot;</span> &lt;&lt; image.cols</span><br><span class="line">         &lt;&lt; <span class="string">&quot;,é«˜ä¸ºï¼š&quot;</span> &lt;&lt; image.rows</span><br><span class="line">         &lt;&lt; <span class="string">&quot;é€šé“æ•°ä¸ºï¼š&quot;</span> &lt;&lt; image.<span class="built_in">channels</span>() &lt;&lt; endl;</span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;image&quot;</span>, image); <span class="comment">// ç”¨cv::imshowæ˜¾ç¤ºå›¾åƒ</span></span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);             <span class="comment">// æš‚åœç¨‹åº,ç­‰å¾…ä¸€ä¸ªæŒ‰é”®è¾“å…¥</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­imageçš„ç±»å‹</span></span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">type</span>() != CV_8UC1 &amp;&amp; image.<span class="built_in">type</span>() != CV_8UC3) <span class="comment">// å›¾åƒæ—¢ä¸æ˜¯å•é€šé“ä¹Ÿä¸æ˜¯ä¸‰é€šé“</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å›¾åƒç±»å‹ä¸ç¬¦åˆè¦æ±‚</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥ä¸€å¼ å½©è‰²å›¾æˆ–è€…ç°åº¦å›¾&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†å›¾åƒ, è¯·æ³¨æ„ä»¥ä¸‹éå†æ–¹å¼äº¦å¯ä½¿ç”¨äºéšæœºåƒç´ è®¿é—®</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ std::chrono æ¥ç»™ç®—æ³•è®¡æ—¶</span></span><br><span class="line">    chrono::steady_clock::time_point t1 = chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">size_t</span> y = <span class="number">0</span>; y &lt; image.rows; y++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨cv::Mat::ptrè·å¾—å›¾åƒçš„è¡ŒæŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> *row_ptr = image.ptr&lt;<span class="keyword">unsigned</span> <span class="keyword">char</span>&gt;(y); <span class="comment">// row_ptræ˜¯ç¬¬yè¡Œçš„å¤´æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">size_t</span> x = <span class="number">0</span>; x &lt; image.cols; x++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// è®¿é—®ä½äº x,y å¤„çš„åƒç´ </span></span><br><span class="line">            <span class="keyword">unsigned</span> <span class="keyword">char</span> *data_ptr = &amp;row_ptr[x * image.<span class="built_in">channels</span>()]; <span class="comment">// data_ptr æŒ‡å‘å¾…è®¿é—®çš„åƒç´ æ•°æ®</span></span><br><span class="line">            <span class="comment">// è¾“å‡ºè¯¥åƒç´ çš„æ¯ä¸ªé€šé“,å¦‚æœæ˜¯ç°åº¦å›¾å°±åªæœ‰ä¸€ä¸ªé€šé“</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i != image.<span class="built_in">channels</span>(); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">unsigned</span> <span class="keyword">char</span> data = data_ptr[i]; <span class="comment">// dataä¸ºI(x,y)ç¬¬cä¸ªé€šé“çš„å€¼</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    chrono::steady_clock::time_point t2 = chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line">    chrono::duration&lt;<span class="keyword">double</span>&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(t2 - t1);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;éå†å›¾åƒç”¨æ—¶ï¼š&quot;</span> &lt;&lt; time_used.<span class="built_in">count</span>() &lt;&lt; <span class="string">&quot; ç§’ã€‚&quot;</span> &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å…³äº cv::Mat çš„æ‹·è´</span></span><br><span class="line">    <span class="comment">// ç›´æ¥èµ‹å€¼å¹¶ä¸ä¼šæ‹·è´æ•°æ®,ä½¿ç”¨cloneå‡½æ•°æ¥æ‹·è´æ•°æ®</span></span><br><span class="line">    cv::Mat image_clone = image.<span class="built_in">clone</span>();</span><br><span class="line">    <span class="built_in">image_clone</span>(cv::<span class="built_in">Rect</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>,<span class="number">100</span>) ).<span class="built_in">setTo</span>(<span class="number">0</span>); <span class="comment">// å°†å·¦ä¸Šè§’100*100çš„å—ç½®é›¶</span></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;image_clone&quot;</span>,image_clone);</span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">destroyAllWindows</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>CMakeLsits.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( imageBasics )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ c++ 14æ ‡å‡†æ”¯æŒ</span></span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯»æ‰¾OpenCVåº“</span></span><br><span class="line"><span class="keyword">find_package</span>( OpenCV <span class="number">3</span> REQUIRED )</span><br><span class="line"><span class="comment"># æ·»åŠ å¤´æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( imageBasics imageBasics.cpp )</span><br><span class="line"><span class="comment"># é“¾æ¥OpenCVåº“</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>( imageBasics <span class="variable">$&#123;OpenCV_LIBS&#125;</span> )</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>OpenCV</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Sophusåº“</title>
    <url>/posts/42633.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>Sophusæ˜¯ç›´æ¥åœ¨ Eigen åŸºç¡€ä¸Šå¼€å‘çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦è¦å®‰è£…é¢å¤–çš„ä¾èµ–åº“ã€‚ç”±äºå†å²åŸå› ï¼ŒSophus æ—©æœŸç‰ˆæœ¬åªæä¾›äº†åŒç²¾åº¦çš„æç¾¤/æä»£æ•°ç±»ã€‚åç»­ç‰ˆæœ¬æ”¹å†™æˆäº†æ¨¡æ¿ç±»ã€‚æ¨¡æ¿ç±»çš„ Sophus ä¸­å¯ä»¥ä½¿ç”¨ä¸åŒç²¾åº¦çš„æç¾¤/æä»£æ•°ï¼Œä½†åŒæ—¶å¢åŠ äº†ä½¿ç”¨éš¾åº¦ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯éæ¨¡æ¿ç±»ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Geometry&gt;</span></span></span><br><span class="line"><span class="comment">// è¿™é‡Œä½¿ç”¨çš„æ˜¯ç»å¯¹è·¯å¾„ï¼Œæ‰€ä»¥åœ¨CMakeLsits.txté‡Œå¹¶æ²¡æœ‰åŒ…å«Sophusåº“</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;/home/alvin/workspace/slam_ws/slambook/3rdparty/Sophus/sophus/so3.cpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;/home/alvin/workspace/slam_ws/slambook/3rdparty/Sophus/sophus/se3.cpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// æ²¿Zè½´è½¬45såº¦çš„æ—‹è½¬çŸ©é˜µ</span></span><br><span class="line">    Eigen::Matrix3d R = Eigen::<span class="built_in">AngleAxisd</span>(M_PI / <span class="number">4</span>, Eigen::<span class="built_in">Vector3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)).<span class="built_in">matrix</span>();</span><br><span class="line">    cout.<span class="built_in">precision</span>(<span class="number">3</span>); <span class="comment">//ä¿ç•™ä¸‰ä½å°æ•°</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;R = &quot;</span> &lt;&lt; endl</span><br><span class="line">         &lt;&lt; R &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ æç¾¤</span></span><br><span class="line">    <span class="function">Sophus::SO3 <span class="title">SO3_R</span><span class="params">(R)</span></span>;              <span class="comment">// Sophus::SO(3)å¯ä»¥ç›´æ¥ä»æ—‹è½¬çŸ©é˜µæ„é€ </span></span><br><span class="line">    <span class="function">Sophus::SO3 <span class="title">SO3_v</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, M_PI / <span class="number">4</span>)</span></span>; <span class="comment">// äº¦å¯ä»æ—‹è½¬å‘é‡æ„é€ </span></span><br><span class="line">    <span class="function">Eigen::Quaterniond <span class="title">q</span><span class="params">(R)</span></span>;           <span class="comment">// æˆ–è€…å››å…ƒæ•°</span></span><br><span class="line">    <span class="function">Sophus::SO3 <span class="title">SO3_q</span><span class="params">(q)</span></span>;</span><br><span class="line">    <span class="comment">// ä¸Šè¿°è¡¨è¾¾æ–¹å¼éƒ½æ˜¯ç­‰ä»·çš„</span></span><br><span class="line">    <span class="comment">// è¾“å‡ºSO(3)æ—¶ï¼Œä»¥so(3)å½¢å¼è¾“å‡º</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä»æ—‹è½¬çŸ©é˜µæ„é€ SO(3): &quot;</span> &lt;&lt; SO3_R &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä»æ—‹è½¬å‘é‡æ„é€ SO(3): &quot;</span> &lt;&lt; SO3_v &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä»å››å…ƒæ•°æ„é€ SO(3):&quot;</span> &lt;&lt; SO3_q &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨å¯¹æ•°æ˜ å°„è·å¾—å®ƒçš„æä»£æ•°</span></span><br><span class="line">    Eigen::Vector3d so3 = SO3_R.<span class="built_in">log</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;SO3çš„æä»£æ•°so3ï¼š&quot;</span> &lt;&lt; so3.<span class="built_in">transpose</span>() &lt;&lt; endl; <span class="comment">// transposeçº¯ç²¹æ˜¯ä¸ºäº†è¾“å‡ºç¾è§‚ä¸€äº›</span></span><br><span class="line">    <span class="comment">// hat ä¸ºå‘é‡åˆ°åå¯¹ç§°çŸ©é˜µ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;so3çš„åå¯¹ç§°çŸ©é˜µï¼š\n&quot;</span></span><br><span class="line">         &lt;&lt; Sophus::SO3::<span class="built_in">hat</span>(so3) &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// ç›¸å¯¹çš„ï¼Œveeä¸ºåå¯¹ç§°åˆ°å‘é‡</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;åå¯¹ç§°çŸ©é˜µåˆ°å…¶å‘é‡ï¼š\n&quot;</span></span><br><span class="line">         &lt;&lt; Sophus::SO3::<span class="built_in">vee</span>(Sophus::SO3::<span class="built_in">hat</span>(so3)).<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line">    ; <span class="comment">// transposeçº¯ç²¹æ˜¯ä¸ºäº†è¾“å‡ºç¾è§‚ä¸€äº›</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¢é‡æ‰°åŠ¨æ¨¡å‹çš„æ›´æ–°</span></span><br><span class="line">    <span class="function">Eigen::Vector3d <span class="title">update_so3</span><span class="params">(<span class="number">1e-4</span>, <span class="number">0</span>, <span class="number">0</span>)</span></span>; <span class="comment">//å‡è®¾æ›´æ–°é‡ä¸ºè¿™ä¹ˆå¤š</span></span><br><span class="line">    Sophus::SO3 SO3_update = Sophus::SO3::<span class="built_in">exp</span>(update_so3) * SO3_R;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;SO3 updated = \n&quot;</span></span><br><span class="line">         &lt;&lt; SO3_update &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;************SE*************&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Eigen::Matrix3d R1 = Eigen::<span class="built_in">AngleAxisd</span>(M_PI / <span class="number">4</span>, Eigen::<span class="built_in">Vector3d</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)).<span class="built_in">matrix</span>();</span><br><span class="line">    <span class="function">Eigen::Vector3d <span class="title">t</span><span class="params">(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span></span>; <span class="comment">// æ²¿Xè½´å¹³ç§»1</span></span><br><span class="line">    <span class="function">Sophus::SE3 <span class="title">SE3_Rt</span><span class="params">(R1, t)</span></span>;  <span class="comment">// ä»R,tæ„é€ SE(3)</span></span><br><span class="line">    <span class="function">Sophus::SE3 <span class="title">SE3_qt</span><span class="params">(q, t)</span></span>;   <span class="comment">// ä»q,tæ„é€ SE(3)</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä»R,tæ„é€ çš„SEï¼š\n&quot;</span></span><br><span class="line">         &lt;&lt; SE3_Rt &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ä»q,tæ„é€ çš„SEï¼š\n&quot;</span></span><br><span class="line">         &lt;&lt; SE3_qt &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æä»£æ•°se(3) æ˜¯ä¸€ä¸ªå…­ç»´å‘é‡ï¼Œæ–¹ä¾¿èµ·è§å…ˆtypedefä¸€ä¸‹</span></span><br><span class="line">    <span class="keyword">typedef</span> Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">6</span>, <span class="number">1</span>&gt; Vector6d;</span><br><span class="line">    Vector6d se3 = SE3_Rt.<span class="built_in">log</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;se3:\n&quot;</span></span><br><span class="line">         &lt;&lt; se3.<span class="built_in">transpose</span>() &lt;&lt; endl; <span class="comment">// è§‚å¯Ÿè¾“å‡ºï¼Œä¼šå‘ç°åœ¨Sophusä¸­ï¼Œse(3)çš„å¹³ç§»åœ¨å‰ï¼Œæ—‹è½¬åœ¨å.</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åŒæ ·çš„ï¼Œæœ‰hatå’Œveeä¸¤ä¸ªç®—ç¬¦</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;se3çš„åå¯¹ç§°çŸ©é˜µï¼š\n&quot;</span> &lt;&lt; Sophus::SE3::<span class="built_in">hat</span>(se3) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;se3åå¯¹ç§°çŸ©é˜µåˆ°å…¶å‘é‡ï¼š\n&quot;</span> &lt;&lt; Sophus::SE3::<span class="built_in">vee</span>( Sophus::SE3::<span class="built_in">hat</span>(se3) ).<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€åï¼Œæ¼”ç¤ºä¸€ä¸‹æ›´æ–°</span></span><br><span class="line">    Vector6d update_se3;<span class="comment">//æ›´æ–°é‡</span></span><br><span class="line">    update_se3.<span class="built_in">setZero</span>();</span><br><span class="line">    <span class="built_in">update_se3</span>(<span class="number">0</span>,<span class="number">0</span>) = <span class="number">1e-4</span>d;</span><br><span class="line">    Sophus::SE3 SE3_updated = Sophus::SE3::<span class="built_in">exp</span>(update_se3)*SE3_Rt;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;SE3 updated = \n&quot;</span> &lt;&lt; SE3_updated.<span class="built_in">matrix</span>() &lt;&lt; endl; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(useSophus)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="string">&quot;/usr/include/eigen3&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(useSophus useSophus.cpp)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>Sophus</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Eigenå‡ ä½•æ¨¡å—</title>
    <url>/posts/26147.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>å¯¼å…¥Eigenå‡ ä½•æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨å››å…ƒæ•°ã€æ¬§æ‹‰è§’å’Œæ—‹è½¬çŸ©é˜µã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="comment">// Eigen å‡ ä½•æ¨¡å—</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Geometry&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/****************************</span></span><br><span class="line"><span class="comment"> * æœ¬ç¨‹åºæ¼”ç¤ºäº† Eigen å‡ ä½•æ¨¡å—çš„ä½¿ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="comment"> ****************************/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Eigen/Geometry æ¨¡å—æä¾›äº†å„ç§æ—‹è½¬å’Œå¹³ç§»çš„è¡¨ç¤º</span></span><br><span class="line">    <span class="comment">// 3D æ—‹è½¬çŸ©é˜µç›´æ¥ä½¿ç”¨ Matrix3d æˆ– Matrix3f</span></span><br><span class="line">    Eigen::Matrix3d rotation_matrix = Eigen::Matrix3d::<span class="built_in">Identity</span>(); <span class="comment">// å®šä¹‰ä¸€ä¸ªå•ä½é˜µ</span></span><br><span class="line">    <span class="comment">// æ—‹è½¬å‘é‡ä½¿ç”¨ AngleAxis, å®ƒåº•å±‚ä¸ç›´æ¥æ˜¯Matrixï¼Œä½†è¿ç®—å¯ä»¥å½“ä½œçŸ©é˜µï¼ˆå› ä¸ºé‡è½½äº†è¿ç®—ç¬¦ï¼‰</span></span><br><span class="line">    <span class="function">Eigen::AngleAxisd <span class="title">rotation_vector</span><span class="params">(M_PI / <span class="number">4</span>, Eigen::Vector3d(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>))</span></span>; <span class="comment">//æ²¿ Z è½´æ—‹è½¬ 45 åº¦</span></span><br><span class="line"></span><br><span class="line">    cout.<span class="built_in">precision</span>(<span class="number">3</span>); <span class="comment">// ä¿ç•™ä¸‰ä½å°æ•°</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;rotation matrix =\n&quot;</span></span><br><span class="line">         &lt;&lt; rotation_vector.<span class="built_in">matrix</span>() &lt;&lt; endl; <span class="comment">//ç”¨matrix()è½¬æ¢æˆçŸ©é˜µ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼</span></span><br><span class="line">    rotation_matrix = rotation_vector.<span class="built_in">toRotationMatrix</span>();</span><br><span class="line">    <span class="comment">// cout &lt;&lt; rotation_matrix &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨ AngleAxis å¯ä»¥è¿›è¡Œåæ ‡å˜æ¢</span></span><br><span class="line">    <span class="function">Eigen::Vector3d <span class="title">v</span><span class="params">(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    Eigen::Vector3d v_rotated = rotation_vector * v;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å‘é‡våœ¨å˜æ¢åçš„åæ ‡ç³»ä¸‹è¡¨ç¤ºï¼š&quot;</span> &lt;&lt; v_rotated.<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// æˆ–è€…ç”¨æ—‹è½¬çŸ©é˜µ</span></span><br><span class="line">    v_rotated = rotation_matrix * v;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å‘é‡våœ¨å˜æ¢åçš„åæ ‡ç³»ä¸‹è¡¨ç¤ºï¼š&quot;</span> &lt;&lt; v_rotated.<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¬§æ‹‰è§’: å¯ä»¥å°†æ—‹è½¬çŸ©é˜µç›´æ¥è½¬æ¢æˆæ¬§æ‹‰è§’</span></span><br><span class="line">    Eigen::Vector3d euler_angles = rotation_matrix.<span class="built_in">eulerAngles</span>(<span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>); <span class="comment">// ZYXé¡ºåºï¼Œå³roll pitch yawé¡ºåº</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ—‹è½¬çŸ©é˜µè½¬æ¢æˆæ¬§æ‹‰è§’ï¼š&quot;</span> &lt;&lt; euler_angles.<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¬§æ°å˜æ¢çŸ©é˜µä½¿ç”¨ Eigen::Isometry</span></span><br><span class="line">    Eigen::Isometry3d T = Eigen::Isometry3d::<span class="built_in">Identity</span>(); <span class="comment">// è™½ç„¶ç§°ä¸º3dï¼Œå®è´¨ä¸Šæ˜¯4ï¼Š4çš„çŸ©é˜µ(é½æ¬¡åæ ‡)</span></span><br><span class="line">    cout &lt;&lt; T.<span class="built_in">matrix</span>() &lt;&lt; endl;</span><br><span class="line">    T.<span class="built_in">rotate</span>(rotation_vector); <span class="comment">// æŒ‰ç…§rotation_vectorè¿›è¡Œæ—‹è½¬</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Tç»•rotation_vectoræ—‹è½¬åï¼š&quot;</span> &lt;&lt; endl</span><br><span class="line">         &lt;&lt; T.<span class="built_in">matrix</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    T.<span class="built_in">pretranslate</span>(Eigen::<span class="built_in">Vector3d</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>)); <span class="comment">// æŠŠå¹³ç§»å‘é‡è®¾æˆ(1,3,4)</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;TæŒ‰ç…§(1,3,4)å¹³ç§»åï¼š&quot;</span> &lt;&lt; endl</span><br><span class="line">         &lt;&lt; T.<span class="built_in">matrix</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨å˜æ¢çŸ©é˜µè¿›è¡Œåæ ‡å˜æ¢</span></span><br><span class="line">    Eigen::Vector3d v_transformed = T * v; <span class="comment">// ç›¸å½“äºR*v+t</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å‘é‡våœ¨ç»è¿‡Tå˜æ¢åçš„åæ ‡ç³»ä¸‹è¡¨ç¤ºï¼š&quot;</span> &lt;&lt; v_transformed.<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å››å…ƒæ•°</span></span><br><span class="line">    <span class="comment">// å¯ä»¥ç›´æ¥æŠŠAngleAxisèµ‹å€¼ç»™å››å…ƒæ•°ï¼Œåä¹‹äº¦ç„¶</span></span><br><span class="line">    Eigen::Quaterniond q = Eigen::<span class="built_in">Quaterniond</span>(rotation_vector);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;quaternion = \n&quot;</span></span><br><span class="line">         &lt;&lt; q.<span class="built_in">coeffs</span>() &lt;&lt; endl; <span class="comment">// è¯·æ³¨æ„coeffsçš„é¡ºåºæ˜¯(x,y,z,w),wä¸ºå®éƒ¨ï¼Œå‰ä¸‰è€…ä¸ºè™šéƒ¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¹Ÿå¯ä»¥æŠŠæ—‹è½¬çŸ©é˜µèµ‹ç»™å®ƒ</span></span><br><span class="line">    q = Eigen::<span class="built_in">Quaterniond</span>(rotation_matrix);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å››å…ƒæ•°ï¼š&quot;</span> &lt;&lt; q.<span class="built_in">coeffs</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨å››å…ƒæ•°æ—‹è½¬ä¸€ä¸ªå‘é‡ï¼Œä½¿ç”¨é‡è½½çš„ä¹˜æ³•å³å¯</span></span><br><span class="line">    v_rotated = q * v;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;å‘é‡våœ¨ç»è¿‡å››å…ƒæ•°å˜æ¢åçš„åæ ‡ç³»ä¸‹è¡¨ç¤ºï¼š&quot;</span> &lt;&lt; v_transformed.<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CMakeLsits.txt</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( geometry )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ Eigenå¤´æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">include_directories</span>( <span class="string">&quot;/usr/include/eigen3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( eigenGeometry eigenGeometry.cpp )</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>Eigen</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨EigenåŸºç¡€æ¨¡å—</title>
    <url>/posts/6957.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>Eigenæ˜¯ä¸€ä¸ª C++ å¼€æºçº¿æ€§ä»£æ•°åº“ã€‚å®ƒæä¾›äº†å¿«é€Ÿçš„æœ‰å…³çŸ©é˜µçš„çº¿æ€§ä»£æ•°è¿ç®—ï¼Œè¿˜åŒ…æ‹¬è§£æ–¹ç¨‹ç­‰åŠŸèƒ½ã€‚è®¸å¤šä¸Šå±‚çš„è½¯ä»¶åº“ä¹Ÿä½¿ç”¨ Eigen è¿›è¡ŒçŸ©é˜µè¿ç®—ï¼ŒåŒ…æ‹¬ g2oã€Sophus ç­‰ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://eigen.tuxfamily.org/dox/">https://eigen.tuxfamily.org/dox/</a></p>
<h2 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="comment">// Eigen éƒ¨åˆ†</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="comment">// ç¨ å¯†çŸ©é˜µçš„ä»£æ•°è¿ç®—ï¼ˆé€†ï¼Œç‰¹å¾å€¼ç­‰ï¼‰</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Dense&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MATRIX_SIZE 50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/****************************</span></span><br><span class="line"><span class="comment"> * æœ¬ç¨‹åºæ¼”ç¤ºäº† Eigen åŸºæœ¬ç±»å‹çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> ****************************/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Eigen ä¸­æ‰€æœ‰å‘é‡å’ŒçŸ©é˜µéƒ½æ˜¯Eigen::Matrixï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ã€‚å®ƒçš„å‰ä¸‰ä¸ªå‚æ•°ä¸ºï¼šæ•°æ®ç±»å‹ï¼Œè¡Œï¼Œåˆ—</span></span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ª2*3çš„floatçŸ©é˜µ</span></span><br><span class="line">    Eigen::Matrix&lt;<span class="keyword">float</span>, <span class="number">2</span>, <span class="number">3</span>&gt; matrix_23;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒæ—¶ï¼ŒEigen é€šè¿‡ typedef æä¾›äº†è®¸å¤šå†…ç½®ç±»å‹ï¼Œä¸è¿‡åº•å±‚ä»æ˜¯Eigen::Matrix</span></span><br><span class="line">    <span class="comment">// ä¾‹å¦‚ Vector3d å®è´¨ä¸Šæ˜¯ Eigen::Matrix&lt;double, 3, 1&gt;ï¼Œå³ä¸‰ç»´å‘é‡</span></span><br><span class="line">    Eigen::Vector3d v_3d;</span><br><span class="line">    <span class="comment">// è¿™æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">    Eigen::Matrix&lt;<span class="keyword">float</span>, <span class="number">3</span>, <span class="number">1</span>&gt; vd_3d;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Matrix3d å®è´¨ä¸Šæ˜¯ Eigen::Matrix&lt;double, 3, 3&gt;</span></span><br><span class="line">    Eigen::Matrix3d matrix_33 = Eigen::Matrix3d::<span class="built_in">Zero</span>(); <span class="comment">//åˆå§‹åŒ–ä¸ºé›¶</span></span><br><span class="line">    <span class="comment">// å¦‚æœä¸ç¡®å®šçŸ©é˜µå¤§å°ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€å¤§å°çš„çŸ©é˜µ</span></span><br><span class="line">    Eigen::Matrix&lt;<span class="keyword">double</span>, Eigen::Dynamic, Eigen::Dynamic&gt; matrix_dynamic;</span><br><span class="line">    <span class="comment">// æ›´ç®€å•çš„</span></span><br><span class="line">    Eigen::MatrixXd matrix_x;</span><br><span class="line">    <span class="comment">// è¿™ç§ç±»å‹è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸ä¸€ä¸€åˆ—ä¸¾</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢æ˜¯å¯¹Eigené˜µçš„æ“ä½œ</span></span><br><span class="line">    <span class="comment">// è¾“å…¥æ•°æ®ï¼ˆåˆå§‹åŒ–ï¼‰</span></span><br><span class="line">    matrix_23 &lt;&lt; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>;</span><br><span class="line">    <span class="comment">// è¾“å‡º</span></span><br><span class="line">    cout &lt;&lt; matrix_23 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨()è®¿é—®çŸ©é˜µä¸­çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</span><br><span class="line">            cout &lt;&lt; <span class="built_in">matrix_23</span>(i, j) &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çŸ©é˜µå’Œå‘é‡ç›¸ä¹˜ï¼ˆå®é™…ä¸Šä»æ˜¯çŸ©é˜µå’ŒçŸ©é˜µï¼‰</span></span><br><span class="line">    v_3d &lt;&lt; <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>;</span><br><span class="line">    vd_3d &lt;&lt; <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>;</span><br><span class="line">    <span class="comment">// ä½†æ˜¯åœ¨Eigené‡Œä½ ä¸èƒ½æ··åˆä¸¤ç§ä¸åŒç±»å‹çš„çŸ©é˜µï¼Œåƒè¿™æ ·æ˜¯é”™çš„</span></span><br><span class="line">    <span class="comment">// Eigen::Matrix&lt;double, 2, 1&gt; result_wrong_type = matrix_23 * v_3d;</span></span><br><span class="line">    <span class="comment">// åº”è¯¥æ˜¾å¼è½¬æ¢</span></span><br><span class="line">    Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">2</span>, <span class="number">1</span>&gt; result = matrix_23.cast&lt;<span class="keyword">double</span>&gt;() * v_3d;</span><br><span class="line">    cout &lt;&lt; result &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Eigen::Matrix&lt;<span class="keyword">float</span>, <span class="number">2</span>, <span class="number">1</span>&gt; result2 = matrix_23 * vd_3d;</span><br><span class="line">    cout &lt;&lt; result2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒæ ·ä½ ä¸èƒ½æé”™çŸ©é˜µçš„ç»´åº¦</span></span><br><span class="line">    <span class="comment">// è¯•ç€å–æ¶ˆä¸‹é¢çš„æ³¨é‡Šï¼Œçœ‹çœ‹Eigenä¼šæŠ¥ä»€ä¹ˆé”™</span></span><br><span class="line">    <span class="comment">// Eigen::Matrix&lt;double, 2, 3&gt; result_wrong_dimension = matrix_23.cast&lt;double&gt;() * v_3d;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€äº›çŸ©é˜µè¿ç®—</span></span><br><span class="line">    <span class="comment">// å››åˆ™è¿ç®—å°±ä¸æ¼”ç¤ºäº†ï¼Œç›´æ¥ç”¨+-*/å³å¯ã€‚</span></span><br><span class="line">    matrix_33 = Eigen::Matrix3d::<span class="built_in">Random</span>(); <span class="comment">// éšæœºæ•°çŸ©é˜µ</span></span><br><span class="line">    cout &lt;&lt; matrix_33 &lt;&lt; endl</span><br><span class="line">         &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; matrix_33.<span class="built_in">transpose</span>() &lt;&lt; endl;   <span class="comment">// è½¬ç½®</span></span><br><span class="line">    cout &lt;&lt; matrix_33.<span class="built_in">sum</span>() &lt;&lt; endl;         <span class="comment">// å„å…ƒç´ å’Œ</span></span><br><span class="line">    cout &lt;&lt; matrix_33.<span class="built_in">trace</span>() &lt;&lt; endl;       <span class="comment">// è¿¹</span></span><br><span class="line">    cout &lt;&lt; <span class="number">10</span> * matrix_33 &lt;&lt; endl;          <span class="comment">// æ•°ä¹˜</span></span><br><span class="line">    cout &lt;&lt; matrix_33.<span class="built_in">inverse</span>() &lt;&lt; endl;     <span class="comment">// é€†</span></span><br><span class="line">    cout &lt;&lt; matrix_33.<span class="built_in">determinant</span>() &lt;&lt; endl; <span class="comment">// è¡Œåˆ—å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( useEigen )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span> )</span><br><span class="line"><span class="keyword">set</span>( CMAKE_CXX_FLAGS <span class="string">&quot;-O3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ Eigenå¤´æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">include_directories</span>( <span class="string">&quot;/usr/include/eigen3&quot;</span> )</span><br><span class="line"><span class="comment"># æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">add_executable</span>( eigenMatrix eigenMatrix.cpp )</span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build </span><br><span class="line">cmake ..</span><br><span class="line">make -j4</span><br><span class="line">./eigenMatrix</span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br><span class="line">1       2       3</span><br><span class="line">4       5       6</span><br><span class="line">10</span><br><span class="line">28</span><br><span class="line">32</span><br><span class="line">77</span><br><span class="line"> 0.680375   0.59688 -0.329554</span><br><span class="line">-0.211234  0.823295  0.536459</span><br><span class="line"> 0.566198 -0.604897 -0.444451</span><br><span class="line"></span><br><span class="line"> 0.680375 -0.211234  0.566198</span><br><span class="line">  0.59688  0.823295 -0.604897</span><br><span class="line">-0.329554  0.536459 -0.444451</span><br><span class="line">1.61307</span><br><span class="line">1.05922</span><br><span class="line"> 6.80375   5.9688 -3.29554</span><br><span class="line">-2.11234  8.23295  5.36459</span><br><span class="line"> 5.66198 -6.04897 -4.44451</span><br><span class="line">-0.198521   2.22739    2.8357</span><br><span class="line">  1.00605 -0.555135  -1.41603</span><br><span class="line"> -1.62213   3.59308   3.28973</span><br><span class="line">0.208598</span><br><span class="line">Eigen values = </span><br><span class="line">0.0242899</span><br><span class="line"> 0.992154</span><br><span class="line">  1.80558</span><br><span class="line">Eigen vectors = </span><br><span class="line">-0.549013 -0.735943  0.396198</span><br><span class="line"> 0.253452 -0.598296 -0.760134</span><br><span class="line">-0.796459  0.316906 -0.514998</span><br><span class="line">time use <span class="keyword">in</span> normal inverse is 0.682ms</span><br><span class="line">time use <span class="keyword">in</span> Qr decomposition is 0.363ms</span><br></pre></td></tr></table></figure>
<h2 id="çŸ©é˜µåˆ†è§£"><a href="#çŸ©é˜µåˆ†è§£" class="headerlink" title="çŸ©é˜µåˆ†è§£"></a>çŸ©é˜µåˆ†è§£</h2><h5 id="1-LUä¸‰è§’åˆ†è§£"><a href="#1-LUä¸‰è§’åˆ†è§£" class="headerlink" title="(1)LUä¸‰è§’åˆ†è§£"></a>(1)LUä¸‰è§’åˆ†è§£</h5><p>ä¸‰è§’åˆ†è§£æ³•æ˜¯ä»…å¯¹æ–¹é˜µæœ‰æ•ˆï¼Œå°†åŸæ–¹é˜µåˆ†è§£æˆä¸€ä¸ªä¸Šä¸‰è§’å½¢çŸ©é˜µæˆ–æ˜¯æ’åˆ—(permuted)çš„<strong>ä¸Šä¸‰è§’å½¢çŸ©é˜µ</strong>å’Œä¸€ä¸ª<strong>ä¸‹ä¸‰è§’å½¢çŸ©é˜µ</strong>ï¼Œè¿™æ ·çš„åˆ†è§£æ³•åˆç§°ä¸ºLUåˆ†è§£æ³•ã€‚å®ƒçš„ç”¨é€”ä¸»è¦åœ¨ç®€åŒ–ä¸€ä¸ªå¤§çŸ©é˜µçš„è¡Œåˆ—å¼å€¼çš„è®¡ç®—è¿‡ç¨‹ã€æ±‚åçŸ©é˜µå’Œæ±‚è§£è”ç«‹æ–¹ç¨‹ç»„ã€‚ä¸è¿‡è¦æ³¨æ„è¿™ç§åˆ†è§£æ³•æ‰€å¾—åˆ°çš„ä¸Šä¸‹ä¸‰è§’å½¢çŸ©é˜µå¹¶éå”¯ä¸€ï¼Œè¿˜å¯æ‰¾åˆ°æ•°ä¸ªä¸åŒçš„ä¸€å¯¹ä¸Šä¸‹ä¸‰è§’å½¢çŸ©é˜µï¼Œæ­¤ä¸¤ä¸‰è§’å½¢çŸ©é˜µç›¸ä¹˜ä¹Ÿä¼šå¾—åˆ°åŸçŸ©é˜µã€‚<code>[L,U]=lu(A)</code></p>
<h5 id="2-QRåˆ†è§£"><a href="#2-QRåˆ†è§£" class="headerlink" title="(2)QRåˆ†è§£"></a>(2)QRåˆ†è§£</h5><p>QRåˆ†è§£æ³•å¯¹è±¡ä¸ä¸€å®šæ˜¯æ–¹é˜µï¼Œå…¶å°†çŸ©é˜µåˆ†è§£æˆä¸€ä¸ª<strong>æ­£è§„æ­£äº¤çŸ©</strong>é˜µä¸ä¸Š<strong>ä¸‰è§’å½¢çŸ©é˜µ</strong>,æ‰€ä»¥ç§°ä¸ºQRåˆ†è§£æ³•,ä¸æ­¤æ­£è§„æ­£äº¤çŸ©é˜µçš„é€šç”¨ç¬¦å·Qæœ‰å…³ã€‚<code>[Q,R]=qr(A)</code></p>
<h5 id="3-SVDåˆ†è§£"><a href="#3-SVDåˆ†è§£" class="headerlink" title="(3)SVDåˆ†è§£"></a>(3)SVDåˆ†è§£</h5><p>å¥‡å¼‚å€¼åˆ†è§£(singular value decomposition,SVD)æ˜¯å¦ä¸€ç§æ­£äº¤çŸ©é˜µåˆ†è§£æ³•ï¼›SVDæ˜¯æœ€å¯é çš„åˆ†è§£æ³•ï¼Œä½†æ˜¯å®ƒæ¯”QRåˆ†è§£æ³•è¦èŠ±ä¸Šè¿‘åå€çš„è®¡ç®—æ—¶é—´ã€‚<code>[U,S,V]=svd(A)</code>ï¼Œå…¶ä¸­Uå’ŒVåˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªæ­£äº¤çŸ©é˜µï¼Œè€ŒSä»£è¡¨ä¸€å¯¹è§’çŸ©é˜µã€‚å’ŒQRåˆ†è§£æ³•ç›¸åŒï¼ŒåŸçŸ©é˜µAä¸å¿…ä¸ºæ–¹é˜µã€‚ä½¿ç”¨SVDåˆ†è§£æ³•çš„ç”¨é€”æ˜¯è§£æœ€å°å¹³æ–¹è¯¯å·®æ³•å’Œæ•°æ®å‹ç¼©ã€‚</p>
<h5 id="4-LLTåˆ†è§£"><a href="#4-LLTåˆ†è§£" class="headerlink" title="(4)LLTåˆ†è§£"></a>(4)LLTåˆ†è§£</h5><p>åˆç§°Choleskyåˆ†è§£ï¼Œå…¶æŠŠä¸€ä¸ªå¯¹ç§°æ­£å®šçš„çŸ©é˜µè¡¨ç¤ºæˆä¸€ä¸ª<strong>ä¸‹ä¸‰è§’çŸ©é˜µL</strong>å’Œ<strong>å…¶è½¬ç½®</strong>çš„ä¹˜ç§¯çš„åˆ†è§£ã€‚å®ƒè¦æ±‚çŸ©é˜µä¸ºæ–¹é˜µï¼Œä¸”æ‰€æœ‰ç‰¹å¾å€¼å¿…é¡»å¤§äºé›¶ï¼Œæ•…åˆ†è§£çš„ä¸‹ä¸‰è§’çš„å¯¹è§’å…ƒä¹Ÿæ˜¯å¤§äºé›¶çš„(LUä¸‰è§’åˆ†è§£æ³•çš„å˜å½¢)ã€‚$A=LL^T$</p>
<h5 id="5-LDLTåˆ†è§£"><a href="#5-LDLTåˆ†è§£" class="headerlink" title="(5)LDLTåˆ†è§£"></a>(5)LDLTåˆ†è§£</h5><p>LDLTåˆ†è§£æ³•å®é™…ä¸Šæ˜¯Choleskyåˆ†è§£æ³•çš„æ”¹è¿›ï¼Œå› ä¸ºCholeskyåˆ†è§£æ³•è™½ç„¶ä¸éœ€è¦é€‰ä¸»å…ƒï¼Œä½†å…¶è¿ç®—è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°å¼€æ–¹é—®é¢˜ï¼Œè€ŒLDLTåˆ†è§£æ³•åˆ™é¿å…äº†è¿™ä¸€é—®é¢˜ï¼Œå¯ç”¨äºæ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„ã€‚ ä¹Ÿéœ€è¦åˆ†è§£å¯¹è±¡ä¸ºæ–¹é˜µï¼Œåˆ†è§£ç»“æœä¸º$A=LDL^T$ã€‚å…¶ä¸­Lä¸ºä¸€ä¸‹ä¸‰è§’å½¢å•ä½çŸ©é˜µ(å³ä¸»å¯¹è§’çº¿å…ƒç´ çš†ä¸º1)ï¼ŒDä¸ºä¸€å¯¹è§’çŸ©é˜µ(åªåœ¨ä¸»å¯¹è§’çº¿ä¸Šæœ‰å…ƒç´ ï¼Œå…¶ä½™çš†ä¸ºé›¶)ï¼Œ$L^T$ä¸ºLçš„è½¬ç½®çŸ©é˜µã€‚</p>
<h2 id="æ±‚è§£æ–¹ç¨‹ç»„"><a href="#æ±‚è§£æ–¹ç¨‹ç»„" class="headerlink" title="æ±‚è§£æ–¹ç¨‹ç»„"></a>æ±‚è§£æ–¹ç¨‹ç»„</h2><h3 id="æ±‚è§£ç‰¹å¾å‘é‡ä¸ç‰¹å¾å€¼"><a href="#æ±‚è§£ç‰¹å¾å‘é‡ä¸ç‰¹å¾å€¼" class="headerlink" title="æ±‚è§£ç‰¹å¾å‘é‡ä¸ç‰¹å¾å€¼"></a>æ±‚è§£ç‰¹å¾å‘é‡ä¸ç‰¹å¾å€¼</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Dense&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*******æ±‚è§£çŸ©é˜µçš„ç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼*******&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// å®å¯¹ç§°çŸ©é˜µå¯ä»¥ä¿è¯å¯¹è§’åŒ–æˆåŠŸ,ä½†æ˜¯ä¹Ÿè¦è€ƒè™‘æ— æ³•å¯¹è§’åŒ–çš„æƒ…å†µ</span></span><br><span class="line">    Eigen::Matrix2f A;</span><br><span class="line">    A &lt;&lt; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>;</span><br><span class="line">    <span class="function">Eigen::EigenSolver&lt;Eigen::Matrix2f&gt; <span class="title">eigensolver</span><span class="params">(A)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (eigensolver.<span class="built_in">info</span>() == Eigen::Success)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç‰¹å¾å€¼ï¼š&quot;</span> &lt;&lt; endl &lt;&lt; eigensolver.<span class="built_in">eigenvalues</span>() &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç‰¹å¾å‘é‡ï¼š&quot;</span> &lt;&lt; endl &lt;&lt; eigensolver.<span class="built_in">eigenvectors</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;<span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;çŸ©é˜µä¸å¯ä»¥å¯¹è§’åŒ–&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„"><a href="#æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„" class="headerlink" title="æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„"></a>æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„</h3><p>çº¿ä»£ä¸­å½¢å¦‚<code>Ax=b</code>çš„çº¿æ€§æ–¹ç¨‹ç»„æ˜¯æœ€ç®€å•çš„å…¥é—¨ç¤ºä¾‹ã€‚å¯¹äºå¸¸è§„é€‚å®šçš„çº¿æ€§æ–¹ç¨‹ç»„(æœªçŸ¥æ•°ä¸ªæ•°=æ–¹ç¨‹ä¸ªæ•°)ï¼Œå¯ä»¥é‡‡ç”¨å¸¸è§„çš„çŸ©é˜µåˆ†è§£æ³•æ±‚è§£ã€‚åœ¨Eigenä¸­æœ‰å¤šç§è§£æ³•å¯ä¾›é€‰æ‹©ï¼Œä»¥æ»¡è¶³åœ¨ç²¾åº¦ä¸æ•ˆç‡ä¸Šä¸åŒçš„éœ€æ±‚ã€‚æœ‰å¦‚ä¸‹æ–¹ç¨‹ç»„ï¼š</p>
<script type="math/tex; mode=display">
\left\{
\begin{aligned}
1x_1 + 2x_2+3x_3 & =  3 \\
4x_1 + 5x_2+6x_3 & =  3 \\
7x_1 + 8x_2+10x_3 & =  4
\end{aligned}
\right.</script><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Dense&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*******æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„*******&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Eigen::Matrix3f A1;</span><br><span class="line">    Eigen::Vector3f b;</span><br><span class="line">    A1 &lt;&lt; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">10</span>;</span><br><span class="line">    b &lt;&lt; <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">clock_t</span> time_stt = <span class="built_in">clock</span>();</span><br><span class="line">    Eigen::Vector3f x;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;QRåˆ†è§£&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; A1.<span class="built_in">colPivHouseholderQr</span>().<span class="built_in">solve</span>(b) &lt;&lt; endl; <span class="comment">// QRåˆ†è§£</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ€»è®¡ç”¨æ—¶ï¼š&quot;</span> &lt;&lt; <span class="number">1000</span> * (<span class="built_in">clock</span>() - time_stt) / (<span class="keyword">double</span>)CLOCKS_PER_SEC &lt;&lt; <span class="string">&quot;ms&quot;</span> &lt;&lt; endl; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç è°ƒç”¨äº†<code>.colPivHouseholderQr()</code>å‡½æ•°å¯¹æ–¹ç¨‹è¿›è¡Œæ±‚è§£ã€‚Eigenä¸­æ‰€æœ‰ä¸åŒæ–¹æ³•è°ƒç”¨éƒ½æœ‰å›ºå®šçš„æ ¼å¼ï¼š<code>x = A.methodName().solve(b)</code>ï¼Œå¦‚ä¸‹æ˜¯Eigenä¸­ä¸€äº›å¸¸ç”¨æ–¹æ³•çš„æ¯”è¾ƒï¼Œæ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒæ–¹æ³•ã€‚</p>
<p><img src="./img/2019-08-22-01.PNG" alt="img"></p>
<p>Eigenè¿˜å¯ä»¥è§£ä¸€äº›é•¿çš„æ¯”è¾ƒâ€œå¥‡æ€ªâ€çš„æ–¹ç¨‹ç»„(å¦‚xã€bå¹¶ä¸æ˜¯å‘é‡è€Œæ˜¯çŸ©é˜µ)ï¼Œå¦‚ä¸‹æ–¹ç¨‹ç»„ï¼š</p>
<script type="math/tex; mode=display">
\left( \begin{matrix} 
2  & -1 \\
-1 & 3
\end{matrix}\right)
\left( \begin{matrix} 
x_1 & x_2 \\
x_3 & x_4
\end{matrix}\right)
=
\left( \begin{matrix} 
1 & 2 \\
3 & 1
\end{matrix}\right)</script><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Dense&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	 Eigen::Matrix2f A0, b0;</span><br><span class="line">    A0 &lt;&lt; <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">3</span>;</span><br><span class="line">    b0 &lt;&lt; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">clock_t</span> time_stt0 = <span class="built_in">clock</span>();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;LDLTåˆ†è§£&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; A0.<span class="built_in">ldlt</span>().<span class="built_in">solve</span>(b0) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ€»è®¡ç”¨æ—¶ï¼š&quot;</span> &lt;&lt; <span class="number">1000</span> * (<span class="built_in">clock</span>() - time_stt0) / (<span class="keyword">double</span>)CLOCKS_PER_SEC &lt;&lt; <span class="string">&quot;ms&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>SLAMå®è·µ</tag>
        <tag>Eigen</tag>
      </tags>
  </entry>
  <entry>
    <title>äº†è§£cmakeç¼–è¯‘_hello world</title>
    <url>/posts/58756.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>ç†è®ºä¸Šè¯´ï¼Œä»»æ„ä¸€ä¸ª C++ ç¨‹åºéƒ½å¯ä»¥ç”¨ g++ æ¥ç¼–è¯‘ã€‚ä½†å½“ç¨‹åºè§„æ¨¡è¶Šæ¥è¶Šå¤§æ—¶ï¼Œä¸€ä¸ªå·¥ç¨‹å¯èƒ½æœ‰è®¸å¤šä¸ªæ–‡ä»¶å¤¹å’Œé‡Œè¾¹çš„æºæ–‡ä»¶ï¼Œè¿™æ—¶è¾“å…¥çš„ç¼–è¯‘å‘½ä»¤å°†è¶Šæ¥è¶Šé•¿ã€‚é€šå¸¸ä¸€ä¸ªå°å‹ c++ é¡¹ç›®å«æœ‰åå‡ ä¸ªç±»ï¼Œå„ç±»é—´è¿˜å­˜åœ¨ç€å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚å…¶ä¸­ä¸€éƒ¨åˆ†è¦ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦ä¸€éƒ¨åˆ†ç¼–è¯‘æˆåº“æ–‡ä»¶ã€‚å¦‚æœä»…é  g++ å‘½ä»¤ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥å¤§é‡çš„ç¼–è¯‘æŒ‡ä»¤ï¼Œæ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ä¼šå˜å¾—å¼‚å¸¸ç¹çã€‚å› æ­¤ï¼Œå¯¹äº C++ é¡¹ç›®ï¼Œä½¿ç”¨ä¸€äº›å·¥ç¨‹ç®¡ç†å·¥å…·ä¼šæ›´åŠ é«˜æ•ˆã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>åº“æ–‡ä»¶ï¼šç”¨æ¥å­˜æ”¾å‡½æ•°æˆ–è€…ç±»ä¸­å‡½æ•°çš„å…·ä½“å®ç°</p>
<p>åœ¨ä¸€ä¸ª C++ å·¥ç¨‹ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ä»£ç éƒ½ä¼šç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚åªæœ‰å¸¦æœ‰ main å‡½æ•°çš„æ–‡ä»¶æ‰ä¼šç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚è€Œå¦ä¸€äº›ä»£ç ï¼Œæˆ‘ä»¬åªæƒ³æŠŠå®ƒä»¬æ‰“åŒ…æˆä¸€ä¸ªä¸œè¥¿ï¼Œä¾›å…¶ä»–ç¨‹åºè°ƒç”¨ã€‚è¿™ä¸ªä¸œè¥¿å«åšåº“ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™æ˜¯ä¸€ä¸ªåº“æ–‡ä»¶</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printHello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Hello SLAM&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºåº“çš„ä½¿ç”¨è€…ï¼Œåªè¦æ‹¿åˆ°äº†å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ï¼Œå°±å¯ä»¥è°ƒç”¨è¿™ä¸ªåº“äº†ã€‚</p>
<p>å¤´æ–‡ä»¶ï¼šå­˜æ”¾æ–¹æ³•æˆ–è€…ç±»ç›¸å…³çš„å£°æ˜</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> LIBHELLOSLAM_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LIBHELLOSLAM_H_</span></span><br><span class="line"><span class="comment">// ä¸Šé¢çš„å®å®šä¹‰æ˜¯ä¸ºäº†é˜²æ­¢é‡å¤å¼•ç”¨è¿™ä¸ªå¤´æ–‡ä»¶è€Œå¼•èµ·çš„é‡å®šä¹‰é”™è¯¯</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printHello</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>ä¸»å‡½æ•°ï¼šmainå‡½æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;libHelloSLAM.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ libHelloSLAM.h ä¸­çš„ printHello() å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span>** argv )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printHello</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨CMakeLists.txtæ–‡ä»¶å¸®åŠ©æˆ‘ä»¬è¿›è¡Œç¼–è¯‘</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜è¦æ±‚çš„ cmake æœ€ä½ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ª cmake å·¥ç¨‹</span></span><br><span class="line"><span class="keyword">project</span>( HelloSLAM )</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç¼–è¯‘æ¨¡å¼</span></span><br><span class="line"><span class="keyword">set</span>( CMAKE_BUILD_TYPE <span class="string">&quot;Debug&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ä¸€ä¸ªåº“</span></span><br><span class="line"><span class="keyword">add_library</span>( hello libHelloSLAM.cpp )</span><br><span class="line"><span class="comment"># å…±äº«åº“</span></span><br><span class="line"><span class="keyword">add_library</span>( hello_shared SHARED libHelloSLAM.cpp )</span><br><span class="line"><span class="comment"># å°†åº“æ–‡ä»¶é“¾æ¥åˆ°å¯æ‰§è¡Œç¨‹åºä¸Š</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>( useHello hello_shared )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( useHello useHello.cpp )</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build </span><br><span class="line">cmake ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>SLAMåå››è®²</category>
      </categories>
      <tags>
        <tag>cmake</tag>
      </tags>
  </entry>
  <entry>
    <title>fatal  error â€˜xxxxâ€™ was not declared in this scope</title>
    <url>/posts/13732.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>è¿è¡Œslam14_ch3ä»£ç visualizeGeometryæŠ¥é”™error: â€˜xxxxâ€™ was not declared in this scope</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><img src="/images/&quot;xxx&quot;is not std/image-20220426122937681.png" alt="image-20220426122937681"></p>
<p>äº²æµ‹æ–¹æ¡ˆï¼šCMakeLists.txt æ·»åŠ  set(CMAKE_CXX_STANDARD 14)<br>æˆ–è€…ï¼šset(CMAKE_CXX_FLAGS â€œ-std=c++14 -O2 ${SSE_FLAGS} -msse4â€) </p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>( VERSION <span class="number">2.8</span> )</span><br><span class="line"><span class="keyword">project</span>( visualizeGeometry )</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ Eigenå¤´æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">include_directories</span>( <span class="string">&quot;/usr/include/eigen3&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ Pangolinä¾èµ–</span></span><br><span class="line"><span class="keyword">find_package</span>( Pangolin )</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;Pangolin_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>( visualizeGeometry visualizeGeometry.cpp )</span><br><span class="line"><span class="keyword">target_link_libraries</span>( visualizeGeometry <span class="variable">$&#123;Pangolin_LIBRARIES&#125;</span> )</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>error</category>
      </categories>
      <tags>
        <tag>BUG</tag>
        <tag>slam</tag>
      </tags>
  </entry>
  <entry>
    <title>fatal error Eigen/Core No such file or directory</title>
    <url>/posts/53697.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>å·²æ·»åŠ eigenåº“çš„è·¯å¾„åˆ°IncludePathï¼Œinclude<Eigen/Dense>ä¹Ÿæ²¡æœ‰å°ç¯æ³¡ï¼Œå¯æ˜¯ç¼–è¯‘å‡ºé”™ï¼šfatal error: Eigen/Dense: No such file or directory </p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><img src="/images/eigenæŠ¥é”™/image-20220426123112788.png" alt="image-20220426123112788"></p>
<h1 id="æ–¹æ¡ˆä¸€-ä¿®æ”¹vscodeé…ç½®æ–‡ä»¶"><a href="#æ–¹æ¡ˆä¸€-ä¿®æ”¹vscodeé…ç½®æ–‡ä»¶" class="headerlink" title="æ–¹æ¡ˆä¸€:ä¿®æ”¹vscodeé…ç½®æ–‡ä»¶"></a>æ–¹æ¡ˆä¸€:ä¿®æ”¹vscodeé…ç½®æ–‡ä»¶</h1><ol>
<li><p>æ·»åŠ eigenåº“çš„è·¯å¾„åˆ°IncludePath. ï¼ˆc_cpp_properties.jsonï¼‰</p>
<blockquote>
<p>â€œ/usr/include/eigen3/**â€,<br>â€œ/usr/include/eigen3/â€œ         </p>
</blockquote>
</li>
</ol>
<p><img src="/images/eigenæŠ¥é”™/image-20220426123147968.png" alt="image-20220426123147968" style="zoom:33%;" /></p>
<p>vscodeä¸­c_cpp_properties.jsonçš„â€includePathâ€å‘Šè¯‰vscodeæ’ä»¶åœ¨å“ªé‡Œæ‰¾åˆ°å¤´æ–‡ä»¶ï¼Œä¾¿äºè¿›è¡Œæºç æŸ¥çœ‹å’Œdebugï¼Œå¹¶æ²¡æœ‰å‘Šè¯‰gccç¼–è¯‘å™¨è¿™ä¸ªè·¯å¾„ã€‚</p>
<ol>
<li>æ·»åŠ eigenåº“çš„è·¯å¾„åˆ°ç¼–è¯‘å‚æ•°â€argsâ€.ï¼ˆtasks.jsonï¼‰</li>
</ol>
<p>åœ¨â€argsâ€é‡ŒåŠ å…¥å¦‚ä¸‹ä»£ç ,taskï¼šâ€argsâ€è´Ÿè´£gccç­‰ç¼–è¯‘å™¨çš„ç¼–è¯‘æŒ‡ä»¤ã€‚</p>
<blockquote>
<p>â€œ-Iâ€,</p>
<p>â€œ/usr/include/eigen3â€</p>
</blockquote>
<p><img src="/images/eigenæŠ¥é”™/image-20220426123215807.png" alt="image-20220426123215807" style="zoom:50%;" /></p>
<h1 id="æ–¹æ¡ˆäºŒ-ä½¿ç”¨å‘½ä»¤"><a href="#æ–¹æ¡ˆäºŒ-ä½¿ç”¨å‘½ä»¤" class="headerlink" title="æ–¹æ¡ˆäºŒ:ä½¿ç”¨å‘½ä»¤"></a>æ–¹æ¡ˆäºŒ:ä½¿ç”¨å‘½ä»¤</h1><p>å‘½ä»¤<code>g++ eigenMatrix.cpp  -I /usr/include/eigen3 -o main</code>çš„æ„æ€å°±æ˜¯ç¼–è¯‘ä»£ç ,æŒ‡å®šå¤´æ–‡ä»¶ä½ç½®,å¹¶è¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~/slam_ws/ch3/useEigen$ g++ eigenMatrix.cpp  -I /usr/include/eigen3 -o main</span><br><span class="line">alvin@ros:~/slam_ws/ch3/useEigen$ ./main </span><br><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br></pre></td></tr></table></figure>
<h1 id="æ–¹æ¡ˆä¸‰-ä½¿ç”¨CMake"><a href="#æ–¹æ¡ˆä¸‰-ä½¿ç”¨CMake" class="headerlink" title="æ–¹æ¡ˆä¸‰:ä½¿ç”¨CMake"></a>æ–¹æ¡ˆä¸‰:ä½¿ç”¨CMake</h1><p>ç”¨vscodeç¼–å†™è¿™ç±»çš„è°ƒç”¨ç¬¬ä¸‰æ–¹ï¼Œå…¶å®æœ€å¥½çš„æ–¹å¼æ˜¯ç”¨cmakeï¼Œ</p>
<p>é¦–å…ˆï¼Œé…ç½®c_cpp_properties.jsonä¸­çš„includepathï¼Œè¿™é‡Œé…ç½®çš„ç›®çš„åªæ˜¯ä¸ºäº†åœ¨vscodeé‡Œæ²¡æœ‰çº¢è‰²æ³¢æµªçº¿ï¼Œçœ‹èµ·æ¥ç¾è§‚ã€‚</p>
<p>è¿™é‡Œå’Œæ–¹æ¡ˆä¸€çš„ç¬¬ä¸€æ­¥æ˜¯ä¸€æ ·çš„!</p>
<p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="/images/eigenæŠ¥é”™/image-20220426123236573.png" alt="image-20220426123236573" style="zoom: 50%;" /></p>
<p>CMakeLists.txtå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span> (VERSION <span class="number">2.8</span>.<span class="number">11</span>)</span><br><span class="line"><span class="keyword">project</span> (demo)</span><br><span class="line"><span class="keyword">find_package</span>(Eigen3 REQUIRED)</span><br><span class="line"><span class="keyword">include_directories</span>(/usr/<span class="keyword">include</span>/eigen3)</span><br><span class="line"><span class="keyword">add_executable</span> (eigenMatrix eigenMatrix.cpp)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä»£ç :</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">./eigenMatrix</span><br></pre></td></tr></table></figure>
<p><img src="/images/eigenæŠ¥é”™/image-20220426123337819.png" alt="image-20220426123337819" style="zoom:50%;" /></p>
]]></content>
      <categories>
        <category>error</category>
      </categories>
      <tags>
        <tag>BUG</tag>
        <tag>eigen</tag>
      </tags>
  </entry>
  <entry>
    <title>gazeboåŠ è½½worldå‡ºç°é»‘å±é—®é¢˜</title>
    <url>/posts/34779.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>è¿‘æœŸå‘åœ¨gazeboåœ¨åŠ è½½ä¸€äº›worldç¯å¢ƒæ—¶,æ€»æ˜¯å‡ºç°ä¸‹é¢é»‘å±çš„æƒ…å†µ,è¿™æ˜¯å› ä¸ºmodelåº“åŠ è½½ä¸æ­£ç¡®å¯¼è‡´çš„</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><img src="/images/gazeboåŠ è½½worldå‡ºç°é»‘å±é—®é¢˜/image-20220430102858532.png" alt="image-20220430102858532"></p>
<p>è§£å†³æ–¹æ³•ï¼š é€šè¿‡ç›´æ¥ä¸‹è½½æ‰€æœ‰æ¨¡å‹åˆ°ç”¨æˆ·çš„æ ¹ç›®å½•ä¸‹çš„.gazebo/models/ä¸‹ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.gazebo/</span><br><span class="line">$ mkdir -p models</span><br><span class="line">$ <span class="built_in">cd</span> ~/.gazebo/models/</span><br><span class="line">$ wget http://file.ncnynl.com/ros/gazebo_models.txt</span><br><span class="line">$ wget -i gazebo_models.txt</span><br><span class="line">$ ls model.tar.g* | xargs -n1 tar xzvf</span><br></pre></td></tr></table></figure>
<p><img src="/images/gazeboåŠ è½½worldå‡ºç°é»‘å±é—®é¢˜/image-20220430102920945.png" alt="image-20220430102920945" style="zoom:50%;" /></p>
<p>è§£å†³</p>
<p><img src="/images/gazeboåŠ è½½worldå‡ºç°é»‘å±é—®é¢˜/image-20220430102953161.png" alt="image-20220430102953161"></p>
]]></content>
      <categories>
        <category>error</category>
      </categories>
      <tags>
        <tag>BUG</tag>
        <tag>gazebo</tag>
      </tags>
  </entry>
  <entry>
    <title>turtlebot3ä»¿çœŸå®è·µ</title>
    <url>/posts/62093.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>TurtleBot3 æ˜¯ä¸€ä¸ªå°å‹ï¼Œä½æˆæœ¬ï¼Œå®Œå…¨å¯ç¼–ç¨‹ï¼ŒåŸºäº ROS çš„ç§»åŠ¨æœºå™¨äººã€‚ å®ƒæ—¨åœ¨ç”¨äºæ•™è‚²ï¼Œç ”ç©¶ï¼Œäº§å“åŸå‹å’Œçˆ±å¥½åº”ç”¨çš„ç›®çš„ã€‚TurtleBot3 çš„ç›®æ ‡æ˜¯å¤§å¹…é™ä½å¹³å°çš„å°ºå¯¸å’Œä»·æ ¼ï¼Œè€Œä¸ä¼šç‰ºç‰²æ€§èƒ½ï¼ŒåŠŸèƒ½å’Œè´¨é‡ã€‚ç”±äºæä¾›äº†å…¶ä»–é€‰é¡¹ï¼Œå¦‚åº•ç›˜ï¼Œè®¡ç®—æœºå’Œä¼ æ„Ÿå™¨ï¼ŒTurtleBot3 å¯ä»¥é€šè¿‡å„ç§æ–¹å¼è¿›è¡Œå®šåˆ¶ã€‚TurtleBot3 æ„æ„¿é€šè¿‡åº”ç”¨ SBCï¼ˆå•æ¿è®¡ç®—æœºï¼‰ï¼Œæ·±åº¦ä¼ æ„Ÿå™¨å’Œ 3D æ‰“å°çš„æœ€æ–°æŠ€æœ¯è¿›æ­¥ï¼Œæˆä¸ºåˆ›å®¢è¿åŠ¨çš„ä¸­å¿ƒã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="ä¸‹è½½turtlebot3ä»¿çœŸåŒ…"><a href="#ä¸‹è½½turtlebot3ä»¿çœŸåŒ…" class="headerlink" title="ä¸‹è½½turtlebot3ä»¿çœŸåŒ…"></a>ä¸‹è½½turtlebot3ä»¿çœŸåŒ…</h1><ul>
<li>ç¯å¢ƒå‡†å¤‡</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get install ros-noetic-turtlebot3 ros-noetic-turtlebot3-description ros-noetic-turtlebot3-gazebo ros-noetic-turtlebot3-msgs ros-noetic-turtlebot3-slam ros-noetic-turtlebot3-teleop</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä¼šé¿å…ä¹‹åé—®é¢˜é‡Œå‡ºç°çš„æŠ¥é”™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/catkin_ws/src/</span><br><span class="line">$ git <span class="built_in">clone</span> -b noetic-devel https://github.com/ROBOTIS-GIT/turtlebot3_simulations.git</span><br><span class="line">$ <span class="built_in">cd</span> ~/catkin_ws &amp;&amp; catkin_make</span><br></pre></td></tr></table></figure>
<ul>
<li>é—®é¢˜:turtlebot3_msgsæŠ¥é”™</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/catkin_ws &amp;&amp; catkin_make</span><br><span class="line">Could not find a package configuration file provided by</span><br><span class="line"><span class="string">&quot;turtlebot3_msgs&quot;</span> with any of the following names:</span><br><span class="line"> </span><br><span class="line">turtlebot3_msgsConfig.cmake</span><br><span class="line">turtlebot3_msgs-config.cmake</span><br><span class="line"> </span><br><span class="line">Add the installation prefix of <span class="string">&quot;turtlebot3_msgs&quot;</span> to CMAKE_PREFIX_PATH or <span class="built_in">set</span> <span class="string">&quot;turtlebot3_msg_DIR&quot;</span> to a directory containing one of the above files.</span><br></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ¡ˆ:è¿™æ˜¯å› ä¸ºç¼ºå°‘ç›¸å…³çš„åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install ros-noetic-turtlebot3-msgs</span><br></pre></td></tr></table></figure>
<h2 id="Empty-World"><a href="#Empty-World" class="headerlink" title="Empty World"></a>Empty World</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TURTLEBOT3_MODEL=burger</span><br><span class="line">$ roslaunch turtlebot3_gazebo turtlebot3_empty_world.launch</span><br></pre></td></tr></table></figure>
<ul>
<li>é—®é¢˜:Resource not found: turtlebot3_description</li>
</ul>
<p><img src="/images/turtlebot3ä»¿çœŸå®è·µ/image-20220426124059347.png" alt="image-20220426124059347"></p>
<p>è§£å†³æ–¹æ¡ˆ:è¿™ç§æƒ…å†µçš„å‘ç”Ÿæ˜¯å› ä¸ºturtlebot3_gazeboåŒ…æ²¡æœ‰å¯¹<code>turtlebot3_description</code>å£°åä¾èµ–,ä½ åº”è¯¥å®‰è£…ä¸€ä¸‹è¿™ä¸ªä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ros-noetic-turtlebot3-description</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–ç‰ˆæœ¬çš„roså¯ä»¥å°è¯•æ›´æ¢<code>noetic</code>ä¸ºä½ å½“å‰çš„ç‰ˆæœ¬</p>
<p>å‚è€ƒé“¾æ¥:<a href="https://answers.ros.org/question/348299/error-in-roslaunch-turtlebot3_gazebo-turtlebot3_worldlaunch/"><strong>Error in â€œroslaunch turtlebot3_gazebo turtlebot3_world.launch â€œ</strong></a></p>
<p><img src="/images/turtlebot3ä»¿çœŸå®è·µ/image-20220426124124556.png" alt="image-20220426124124556"></p>
<h2 id="TurtleBot3-World"><a href="#TurtleBot3-World" class="headerlink" title="TurtleBot3 World"></a>TurtleBot3 World</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TURTLEBOT3_MODEL=waffle</span><br><span class="line">$ roslaunch turtlebot3_gazebo turtlebot3_world.launch</span><br></pre></td></tr></table></figure>
<p><img src="/images/turtlebot3ä»¿çœŸå®è·µ/image-20220426124142934.png" alt="image-20220426124142934"></p>
<h2 id="TurtleBot3-House"><a href="#TurtleBot3-House" class="headerlink" title="TurtleBot3 House"></a>TurtleBot3 House</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TURTLEBOT3_MODEL=waffle_pi</span><br><span class="line">$ roslaunch turtlebot3_gazebo turtlebot3_house.launch</span><br></pre></td></tr></table></figure>
<p><img src="/images/turtlebot3ä»¿çœŸå®è·µ/image-20220426124203261.png" alt="image-20220426124203261"></p>
<h1 id="SLAMä»¿çœŸ"><a href="#SLAMä»¿çœŸ" class="headerlink" title="SLAMä»¿çœŸ"></a>SLAMä»¿çœŸ</h1><p>åœ¨ Gazebo æ¨¡æ‹Ÿå™¨ä¸­è¿›è¡Œ SLAM æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨è™šæ‹Ÿä¸–ç•Œä¸­é€‰æ‹©æˆ–åˆ›å»ºå„ç§ç¯å¢ƒå’Œæœºå™¨äººæ¨¡å‹ã€‚ é™¤äº†å‡†å¤‡æ¨¡æ‹Ÿç¯å¢ƒè€Œä¸æ˜¯å¯åŠ¨æœºå™¨äººä¹‹å¤–ï¼ŒSLAM ä»¿çœŸä¸å®é™…çš„ TurtleBot3 çš„SLAMéå¸¸ç›¸ä¼¼ã€‚</p>
<h2 id="åŠ è½½ä»¿çœŸç¯å¢ƒ"><a href="#åŠ è½½ä»¿çœŸç¯å¢ƒ" class="headerlink" title="åŠ è½½ä»¿çœŸç¯å¢ƒ"></a>åŠ è½½ä»¿çœŸç¯å¢ƒ</h2><p>å‡†å¤‡äº†ä¸‰ä¸ª Gazebo ç¯å¢ƒï¼Œä½†è¦ä½¿ç”¨ SLAM åˆ›å»ºåœ°å›¾ï¼Œå»ºè®®ä½¿ç”¨ <strong>TurtleBot3 World</strong> æˆ– <strong>TurtleBot3 House</strong>ã€‚<br>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€åŠ è½½ Gazebo ç¯å¢ƒã€‚</p>
<p>åœ¨æœ¬æŒ‡ä»¤ä¸­ï¼Œå°†ä½¿ç”¨ TurtleBot3 Worldã€‚<br>è¯·åœ¨ <code>burger</code>ã€<code>waffle</code>ã€<code>waffle_pi</code> ä¸­ä¸º <code>TURTLEBOT3_MODEL</code> å‚æ•°ä½¿ç”¨æ­£ç¡®çš„å…³é”®å­—ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TURTLEBOT3_MODEL=waffle_pi</span><br><span class="line">$ roslaunch turtlebot3_gazebo turtlebot3_house.launch</span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡ŒSLAMèŠ‚ç‚¹"><a href="#è¿è¡ŒSLAMèŠ‚ç‚¹" class="headerlink" title="è¿è¡ŒSLAMèŠ‚ç‚¹"></a>è¿è¡ŒSLAMèŠ‚ç‚¹</h2><p>ä»è¿œç¨‹ PC ä½¿ç”¨ <code>Ctrl</code> + <code>Alt</code> + <code>T</code> æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯å¹¶è¿è¡Œ SLAM èŠ‚ç‚¹ã€‚ é»˜è®¤ä½¿ç”¨ Gmapping SLAM æ–¹æ³•ã€‚<br>è¯·åœ¨ <code>burger</code>ã€<code>waffle</code>ã€<code>waffle_pi</code> ä¸­ä¸º <code>TURTLEBOT3_MODEL</code> å‚æ•°ä½¿ç”¨æ­£ç¡®çš„å…³é”®å­—ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TURTLEBOT3_MODEL=burger</span><br><span class="line">$ roslaunch turtlebot3_slam turtlebot3_slam.launch slam_methods:=gmapping</span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œé”®ç›˜æ§åˆ¶èŠ‚ç‚¹"><a href="#è¿è¡Œé”®ç›˜æ§åˆ¶èŠ‚ç‚¹" class="headerlink" title="è¿è¡Œé”®ç›˜æ§åˆ¶èŠ‚ç‚¹"></a>è¿è¡Œé”®ç›˜æ§åˆ¶èŠ‚ç‚¹</h2><p>ä½¿ç”¨<code>Ctrl</code>+<code>Alt</code>+<code>T</code>ä»è¿œç¨‹ PC æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ï¼Œç„¶åä»è¿œç¨‹ PC è¿è¡Œè¿œç¨‹æ“ä½œèŠ‚ç‚¹ã€‚<br>è¯·åœ¨ <code>burger</code>ã€<code>waffle</code>ã€<code>waffle_pi</code> ä¸­ä¸º <code>TURTLEBOT3_MODEL</code> å‚æ•°ä½¿ç”¨æ­£ç¡®çš„å…³é”®å­—ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TURTLEBOT3_MODEL=burger</span><br><span class="line">$ roslaunch turtlebot3_teleop turtlebot3_teleop_key.launch</span><br><span class="line"></span><br><span class="line"> Control Your TurtleBot3!</span><br><span class="line"> ---------------------------</span><br><span class="line"> Moving around:</span><br><span class="line">        w</span><br><span class="line">   a    s    d</span><br><span class="line">        x</span><br><span class="line"></span><br><span class="line"> w/x : increase/decrease linear velocity</span><br><span class="line"> a/d : increase/decrease angular velocity</span><br><span class="line"> space key, s : force stop</span><br><span class="line"></span><br><span class="line"> CTRL-C to quit</span><br></pre></td></tr></table></figure>
<p><img src="/images/turtlebot3ä»¿çœŸå®è·µ/image-20220426124227125.png" alt="image-20220426124227125"></p>
<h1 id="å¯¼èˆªä»¿çœŸ"><a href="#å¯¼èˆªä»¿çœŸ" class="headerlink" title="å¯¼èˆªä»¿çœŸ"></a>å¯¼èˆªä»¿çœŸ</h1><p>å°±åƒ Gazebo æ¨¡æ‹Ÿå™¨ä¸­çš„ SLAM ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨è™šæ‹Ÿå¯¼èˆªä¸–ç•Œä¸­é€‰æ‹©æˆ–åˆ›å»ºå„ç§ç¯å¢ƒå’Œæœºå™¨äººæ¨¡å‹ã€‚ ä½†æ˜¯ï¼Œåœ¨è¿è¡Œå¯¼èˆªä¹‹å‰å¿…é¡»å‡†å¤‡é€‚å½“çš„åœ°å›¾ã€‚ é™¤äº†å‡†å¤‡ä»¿çœŸç¯å¢ƒè€Œä¸æ˜¯åˆ¶ä½œæœºå™¨äººä¹‹å¤–ï¼Œä»¿çœŸå¯¼èˆªä¸å®é™…çš„å¯¼èˆªéå¸¸ç›¸ä¼¼ã€‚</p>
<h2 id="åŠ è½½ä»¿çœŸç¯å¢ƒ-1"><a href="#åŠ è½½ä»¿çœŸç¯å¢ƒ-1" class="headerlink" title="åŠ è½½ä»¿çœŸç¯å¢ƒ"></a>åŠ è½½ä»¿çœŸç¯å¢ƒ</h2><p>åœ¨å‰é¢çš„ SLAM éƒ¨åˆ†ä¸­ï¼ŒTurtleBot3 World ç”¨äºåˆ›å»ºåœ°å›¾ã€‚ å¯¼èˆªå°†ä½¿ç”¨ç›¸åŒçš„ Gazebo ç¯å¢ƒã€‚è¯·åœ¨ burgerã€waffleã€waffle_pi ä¸­ä¸º TURTLEBOT3_MODEL å‚æ•°ä½¿ç”¨æ­£ç¡®çš„å…³é”®å­—ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TURTLEBOT3_MODEL=burger</span><br><span class="line">$ roslaunch turtlebot3_gazebo turtlebot3_world.launch</span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œå¯¼èˆªèŠ‚ç‚¹"><a href="#è¿è¡Œå¯¼èˆªèŠ‚ç‚¹" class="headerlink" title="è¿è¡Œå¯¼èˆªèŠ‚ç‚¹"></a>è¿è¡Œå¯¼èˆªèŠ‚ç‚¹</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TURTLEBOT3_MODEL=burger</span><br><span class="line">$ roslaunch turtlebot3_navigation turtlebot3_navigation.launch map_file:=<span class="variable">$HOME</span>/map.yaml</span><br></pre></td></tr></table></figure>
<h2 id="åˆå§‹å§¿æ€ä¼°è®¡"><a href="#åˆå§‹å§¿æ€ä¼°è®¡" class="headerlink" title="åˆå§‹å§¿æ€ä¼°è®¡"></a>åˆå§‹å§¿æ€ä¼°è®¡</h2><p>å¿…é¡»åœ¨è¿è¡Œå¯¼èˆªä¹‹å‰æ‰§è¡Œåˆå§‹å§¿æ€ä¼°è®¡ï¼Œå› ä¸ºæ­¤è¿‡ç¨‹ä¼šåˆå§‹åŒ–å¯¹å¯¼èˆªè‡³å…³é‡è¦çš„ AMCL å‚æ•°ã€‚ TurtleBot3 å¿…é¡»æ­£ç¡®å®šä½åœ¨åœ°å›¾ä¸Šï¼ŒLDS ä¼ æ„Ÿå™¨æ•°æ®ä¸æ˜¾ç¤ºçš„åœ°å›¾æ•´é½åœ°é‡å ã€‚</p>
<p>å•å‡» RViz èœå•ä¸­çš„ 2D Pose Estimate æŒ‰é’®ã€‚</p>
<p>å•å‡»å®é™…æœºå™¨äººæ‰€åœ¨çš„åœ°å›¾ï¼Œç„¶åå°†ç»¿è‰²å¤§ç®­å¤´æ‹–å‘æœºå™¨äººé¢å‘çš„æ–¹å‘ã€‚</p>
<p>é‡å¤æ­¥éª¤ 1 å’Œ 2ï¼Œç›´åˆ° LDS ä¼ æ„Ÿå™¨æ•°æ®è¦†ç›–åœ¨ä¿å­˜çš„åœ°å›¾ä¸Šã€‚</p>
<p>å¯åŠ¨é”®ç›˜é¥æ“ä½œèŠ‚ç‚¹ï¼Œåœ¨åœ°å›¾ä¸Šç²¾ç¡®å®šä½æœºå™¨äººã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ roslaunch turtlebot3_teleop turtlebot3_teleop_key.launch</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>gazebo</tag>
        <tag>ros</tag>
        <tag>æœºå™¨äººä»¿çœŸ</tag>
        <tag>turtlebot3</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨äººä»¿çœŸå®è·µ_gazebo+rvizç»¼åˆå®è·µ</title>
    <url>/posts/29275.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>URDF ç”¨äºåˆ›å»ºæœºå™¨äººæ¨¡å‹ã€Rviz å¯ä»¥æ˜¾ç¤ºæœºå™¨äººæ„ŸçŸ¥åˆ°çš„ç¯å¢ƒä¿¡æ¯ï¼ŒGazebo ç”¨äºä»¿çœŸï¼Œå¯ä»¥æ¨¡æ‹Ÿå¤–ç•Œç¯å¢ƒï¼Œä»¥åŠæœºå™¨äººçš„ä¸€äº›ä¼ æ„Ÿå™¨ï¼Œå¦‚ä½•åœ¨ Gazebo ä¸­è¿è¡Œè¿™äº›ä¼ æ„Ÿå™¨ï¼Œå¹¶æ˜¾ç¤ºè¿™äº›ä¼ æ„Ÿå™¨çš„æ•°æ®(æœºå™¨äººçš„è§†è§’)å‘¢ï¼Ÿ</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="å®è·µä¸€-æœºå™¨äººè¿åŠ¨æ§åˆ¶"><a href="#å®è·µä¸€-æœºå™¨äººè¿åŠ¨æ§åˆ¶" class="headerlink" title="å®è·µä¸€:æœºå™¨äººè¿åŠ¨æ§åˆ¶"></a>å®è·µä¸€:æœºå™¨äººè¿åŠ¨æ§åˆ¶</h1><h2 id="1-ros-control-ç®€ä»‹"><a href="#1-ros-control-ç®€ä»‹" class="headerlink" title="1.ros_control ç®€ä»‹"></a>1.ros_control ç®€ä»‹</h2><p><strong>åœºæ™¯:</strong> åŒä¸€å¥— ROS ç¨‹åºï¼Œå¦‚ä½•éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨äººç³»ç»Ÿä¸Šï¼Œæ¯”å¦‚ï¼šå¼€å‘é˜¶æ®µä¸ºäº†æé«˜æ•ˆç‡æ˜¯åœ¨ä»¿çœŸå¹³å°ä¸Šæµ‹è¯•çš„ï¼Œéƒ¨ç½²æ—¶åˆæœ‰ä¸åŒçš„å®ä½“æœºå™¨äººå¹³å°ï¼Œä¸åŒå¹³å°çš„å®ç°æ˜¯æœ‰å·®å¼‚çš„ï¼Œå¦‚ä½•ä¿è¯ ROS ç¨‹åºçš„å¯ç§»æ¤æ€§ï¼ŸROS å†…ç½®çš„è§£å†³æ–¹å¼æ˜¯ ros_controlã€‚</p>
<p><strong>ros_control:</strong> æ˜¯ä¸€ç»„è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«äº†æ§åˆ¶å™¨æ¥å£ï¼Œæ§åˆ¶å™¨ç®¡ç†å™¨ï¼Œä¼ è¾“å’Œç¡¬ä»¶æ¥å£ã€‚ros_control æ˜¯ä¸€å¥—æœºå™¨äººæ§åˆ¶çš„ä¸­é—´ä»¶ï¼Œæ˜¯ä¸€å¥—è§„èŒƒï¼Œä¸åŒçš„æœºå™¨äººå¹³å°åªè¦æŒ‰ç…§è¿™å¥—è§„èŒƒå®ç°ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯ ä¸ROS ç¨‹åºå…¼å®¹ï¼Œé€šè¿‡è¿™å¥—è§„èŒƒï¼Œå®ç°äº†ä¸€ç§å¯æ’æ‹”çš„æ¶æ„è®¾è®¡ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºè®¾è®¡çš„æ•ˆç‡ä¸çµæ´»æ€§ã€‚</p>
<p>gazebo å·²ç»å®ç°äº† ros_control çš„ç›¸å…³æ¥å£ï¼Œå¦‚æœéœ€è¦åœ¨ gazebo ä¸­æ§åˆ¶æœºå™¨äººè¿åŠ¨ï¼Œç›´æ¥è°ƒç”¨ç›¸å…³æ¥å£å³å¯</p>
<h2 id="2-è¿åŠ¨æ§åˆ¶å®ç°æµç¨‹-Gazebo"><a href="#2-è¿åŠ¨æ§åˆ¶å®ç°æµç¨‹-Gazebo" class="headerlink" title="2.è¿åŠ¨æ§åˆ¶å®ç°æµç¨‹(Gazebo)"></a>2.è¿åŠ¨æ§åˆ¶å®ç°æµç¨‹(Gazebo)</h2><p>æ‰¿ä¸Šï¼Œè¿åŠ¨æ§åˆ¶åŸºæœ¬æµç¨‹:</p>
<ol>
<li>å·²ç»åˆ›å»ºå®Œæ¯•çš„æœºå™¨äººæ¨¡å‹ï¼Œç¼–å†™ä¸€ä¸ªå•ç‹¬çš„ xacro æ–‡ä»¶ï¼Œä¸ºæœºå™¨äººæ¨¡å‹æ·»åŠ ä¼ åŠ¨è£…ç½®ä»¥åŠæ§åˆ¶å™¨</li>
<li>å°†æ­¤æ–‡ä»¶é›†æˆè¿›xacroæ–‡ä»¶</li>
<li>å¯åŠ¨ Gazebo å¹¶å‘å¸ƒ /cmd_vel æ¶ˆæ¯æ§åˆ¶æœºå™¨äººè¿åŠ¨</li>
</ol>
<p><strong>2.1 ä¸º joint æ·»åŠ ä¼ åŠ¨è£…ç½®ä»¥åŠæ§åˆ¶å™¨</strong></p>
<p>ä¸¤è½®å·®é€Ÿé…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_car_move&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¼ åŠ¨å®ç°:ç”¨äºè¿æ¥æ§åˆ¶å™¨ä¸å…³èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;joint_trans&quot;</span> <span class="attr">params</span>=<span class="string">&quot;joint_name&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Transmission is important to link the joints and the controller --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transmission</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;joint_name&#125;_trans&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>transmission_interface/SimpleTransmission<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;joint_name&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hardwareInterface</span>&gt;</span>hardware_interface/VelocityJointInterface<span class="tag">&lt;/<span class="name">hardwareInterface</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">actuator</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;joint_name&#125;_motor&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hardwareInterface</span>&gt;</span>hardware_interface/VelocityJointInterface<span class="tag">&lt;/<span class="name">hardwareInterface</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mechanicalReduction</span>&gt;</span>1<span class="tag">&lt;/<span class="name">mechanicalReduction</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">actuator</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">transmission</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¯ä¸€ä¸ªé©±åŠ¨è½®éƒ½éœ€è¦é…ç½®ä¼ åŠ¨è£…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:joint_trans</span> <span class="attr">joint_name</span>=<span class="string">&quot;left_wheel2base_link&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:joint_trans</span> <span class="attr">joint_name</span>=<span class="string">&quot;right_wheel2base_link&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">&quot;differential_drive_controller&quot;</span> <span class="attr">filename</span>=<span class="string">&quot;libgazebo_ros_diff_drive.so&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">rosDebugLevel</span>&gt;</span>Debug<span class="tag">&lt;/<span class="name">rosDebugLevel</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">publishWheelTF</span>&gt;</span>true<span class="tag">&lt;/<span class="name">publishWheelTF</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">robotNamespace</span>&gt;</span>/<span class="tag">&lt;/<span class="name">robotNamespace</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">publishTf</span>&gt;</span>1<span class="tag">&lt;/<span class="name">publishTf</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">publishWheelJointState</span>&gt;</span>true<span class="tag">&lt;/<span class="name">publishWheelJointState</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">alwaysOn</span>&gt;</span>true<span class="tag">&lt;/<span class="name">alwaysOn</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">updateRate</span>&gt;</span>100.0<span class="tag">&lt;/<span class="name">updateRate</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">legacyMode</span>&gt;</span>true<span class="tag">&lt;/<span class="name">legacyMode</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">leftJoint</span>&gt;</span>left_wheel2base_link<span class="tag">&lt;/<span class="name">leftJoint</span>&gt;</span> <span class="comment">&lt;!-- å·¦è½® --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">rightJoint</span>&gt;</span>right_wheel2base_link<span class="tag">&lt;/<span class="name">rightJoint</span>&gt;</span> <span class="comment">&lt;!-- å³è½® --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">wheelSeparation</span>&gt;</span>$&#123;base_link_radius * 2&#125;<span class="tag">&lt;/<span class="name">wheelSeparation</span>&gt;</span> <span class="comment">&lt;!-- è½¦è½®é—´è· --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">wheelDiameter</span>&gt;</span>$&#123;wheel_radius * 2&#125;<span class="tag">&lt;/<span class="name">wheelDiameter</span>&gt;</span> <span class="comment">&lt;!-- è½¦è½®ç›´å¾„ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">broadcastTF</span>&gt;</span>1<span class="tag">&lt;/<span class="name">broadcastTF</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">wheelTorque</span>&gt;</span>30<span class="tag">&lt;/<span class="name">wheelTorque</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">wheelAcceleration</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">wheelAcceleration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">commandTopic</span>&gt;</span>cmd_vel<span class="tag">&lt;/<span class="name">commandTopic</span>&gt;</span> <span class="comment">&lt;!-- è¿åŠ¨æ§åˆ¶è¯é¢˜ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">odometryFrame</span>&gt;</span>odom<span class="tag">&lt;/<span class="name">odometryFrame</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">odometryTopic</span>&gt;</span>odom<span class="tag">&lt;/<span class="name">odometryTopic</span>&gt;</span> <span class="comment">&lt;!-- é‡Œç¨‹è®¡è¯é¢˜ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">robotBaseFrame</span>&gt;</span>base_footprint<span class="tag">&lt;/<span class="name">robotBaseFrame</span>&gt;</span> <span class="comment">&lt;!-- æ ¹åæ ‡ç³» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>2.2 xacroæ–‡ä»¶é›†æˆ</strong></p>
<p>æœ€åè¿˜éœ€è¦å°†ä¸Šè¿° xacro æ–‡ä»¶é›†æˆè¿›æ€»çš„æœºå™¨äººæ¨¡å‹æ–‡ä»¶ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„åˆå°è½¦åº•ç›˜ä¸æ‘„åƒå¤´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_car_camera&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;matrix.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;base.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;camera.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;move.xacro&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>2.3 å¯åŠ¨ gazeboå¹¶æ§åˆ¶æœºå™¨äººè¿åŠ¨</strong></p>
<p>launchæ–‡ä»¶:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°† Urdf æ–‡ä»¶çš„å†…å®¹åŠ è½½åˆ°å‚æ•°æœåŠ¡å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">command</span>=<span class="string">&quot;$(find xacro)/xacro $(find robot_simlink_gazebo)/urdf/xacro/combine.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ gazebo --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨ gazebo ä¸­æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;gazebo_ros&quot;</span> <span class="attr">type</span>=<span class="string">&quot;spawn_model&quot;</span> <span class="attr">name</span>=<span class="string">&quot;model&quot;</span> <span class="attr">args</span>=<span class="string">&quot;-urdf -model mycar -param robot_description&quot;</span>  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨ launch æ–‡ä»¶ï¼Œä½¿ç”¨ topic list æŸ¥çœ‹è¯é¢˜åˆ—è¡¨ï¼Œä¼šå‘ç°å¤šäº† /cmd_vel ç„¶åå‘å¸ƒ cmd_vel æ¶ˆæ¯æ§åˆ¶å³å¯</p>
<p>ä½¿ç”¨å‘½ä»¤æ§åˆ¶(æˆ–è€…å¯ä»¥ç¼–å†™å•ç‹¬çš„èŠ‚ç‚¹æ§åˆ¶)<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~$ rosrun teleop_twist_keyboard teleop_twist_keyboard.py </span><br><span class="line">the rosdep view is empty: call <span class="string">&#x27;sudo rosdep init&#x27;</span> and <span class="string">&#x27;rosdep update&#x27;</span></span><br><span class="line"></span><br><span class="line">Reading from the keyboard  and Publishing to Twist!</span><br><span class="line">---------------------------</span><br><span class="line">Moving around:</span><br><span class="line">   u    i    o</span><br><span class="line">   j    k    l</span><br><span class="line">   m    ,    .</span><br><span class="line"></span><br><span class="line">For Holonomic mode (strafing), hold down the <span class="built_in">shift</span> key:</span><br><span class="line">---------------------------</span><br><span class="line">   U    I    O</span><br><span class="line">   J    K    L</span><br><span class="line">   M    &lt;    &gt;</span><br><span class="line"></span><br><span class="line">t : up (+z)</span><br><span class="line">b : down (-z)</span><br><span class="line"></span><br><span class="line">anything <span class="keyword">else</span> : stop</span><br><span class="line"></span><br><span class="line">q/z : increase/decrease max speeds by 10%</span><br><span class="line">w/x : increase/decrease only linear speed by 10%</span><br><span class="line">e/c : increase/decrease only angular speed by 10%</span><br><span class="line"></span><br><span class="line">CTRL-C to quit</span><br><span class="line"></span><br><span class="line">currently:	speed 0.5	turn 1.0 </span><br></pre></td></tr></table></figure>
<p>åœ¨ Gazebo çš„ä»¿çœŸç¯å¢ƒä¸­ï¼Œæœºå™¨äººçš„é‡Œç¨‹è®¡ä¿¡æ¯ä»¥åŠè¿åŠ¨æœå‘ç­‰ä¿¡æ¯æ˜¯æ— æ³•è·å–çš„ï¼Œå¯ä»¥é€šè¿‡ Rviz æ˜¾ç¤ºæœºå™¨äººçš„é‡Œç¨‹è®¡ä¿¡æ¯ä»¥åŠè¿åŠ¨æœå‘</p>
<p><strong>é‡Œç¨‹è®¡:</strong> æœºå™¨äººç›¸å¯¹å‡ºå‘ç‚¹åæ ‡ç³»çš„ä½å§¿çŠ¶æ€(X åæ ‡ Y åæ ‡ Zåæ ‡ä»¥åŠæœå‘)ã€‚</p>
<p>ä¿®æ”¹launchæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°† Urdf æ–‡ä»¶çš„å†…å®¹åŠ è½½åˆ°å‚æ•°æœåŠ¡å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">command</span>=<span class="string">&quot;$(find xacro)/xacro $(find robot_simlink_gazebo)/urdf/xacro/combine.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ gazebo --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨ gazebo ä¸­æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;gazebo_ros&quot;</span> <span class="attr">type</span>=<span class="string">&quot;spawn_model&quot;</span> <span class="attr">name</span>=<span class="string">&quot;model&quot;</span> <span class="attr">args</span>=<span class="string">&quot;-urdf -model mycar -param robot_description&quot;</span>  /&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">&lt;!-- å¯åŠ¨ rviz --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">type</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rviz&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å…³èŠ‚ä»¥åŠæœºå™¨äººçŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;joint_state_publisher&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;robot_state_publisher&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="å®è·µäºŒ-é›·è¾¾ä»¿çœŸ"><a href="#å®è·µäºŒ-é›·è¾¾ä»¿çœŸ" class="headerlink" title="å®è·µäºŒ:é›·è¾¾ä»¿çœŸ"></a>å®è·µäºŒ:é›·è¾¾ä»¿çœŸ</h1><p>é›·è¾¾ä¼ æ„Ÿå™¨æ•°æ®ä¿¡æ¯xacro</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_sensors&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- é›·è¾¾ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;laser&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sensor</span> <span class="attr">type</span>=<span class="string">&quot;ray&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rplidar&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pose</span>&gt;</span>0 0 0 0 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">visualize</span>&gt;</span>true<span class="tag">&lt;/<span class="name">visualize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">update_rate</span>&gt;</span>5.5<span class="tag">&lt;/<span class="name">update_rate</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ray</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scan</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">horizontal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">samples</span>&gt;</span>360<span class="tag">&lt;/<span class="name">samples</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resolution</span>&gt;</span>1<span class="tag">&lt;/<span class="name">resolution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">min_angle</span>&gt;</span>-3<span class="tag">&lt;/<span class="name">min_angle</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">max_angle</span>&gt;</span>3<span class="tag">&lt;/<span class="name">max_angle</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">horizontal</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">scan</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">range</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">min</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">min</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">max</span>&gt;</span>30.0<span class="tag">&lt;/<span class="name">max</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">resolution</span>&gt;</span>0.01<span class="tag">&lt;/<span class="name">resolution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">range</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">noise</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">type</span>&gt;</span>gaussian<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mean</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">mean</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">stddev</span>&gt;</span>0.01<span class="tag">&lt;/<span class="name">stddev</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">noise</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ray</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">&quot;gazebo_rplidar&quot;</span> <span class="attr">filename</span>=<span class="string">&quot;libgazebo_ros_laser.so&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">topicName</span>&gt;</span>/scan<span class="tag">&lt;/<span class="name">topicName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">frameName</span>&gt;</span>laser<span class="tag">&lt;/<span class="name">frameName</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sensor</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨åŸæ¥çš„é›†æˆçš„xacroæ·»åŠ è¯¥æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„åˆå°è½¦åº•ç›˜ä¸æ‘„åƒå¤´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_car_camera&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;matrix.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;base.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;camera.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;move.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser_senor.xacro&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨åŸæ¥çš„launchæ–‡ä»¶</p>
<h1 id="å®è·µä¸‰-æ‘„åƒå¤´ä»¿çœŸ"><a href="#å®è·µä¸‰-æ‘„åƒå¤´ä»¿çœŸ" class="headerlink" title="å®è·µä¸‰:æ‘„åƒå¤´ä»¿çœŸ"></a>å®è·µä¸‰:æ‘„åƒå¤´ä»¿çœŸ</h1><h2 id="æ™®é€šæ‘„åƒå¤´ä»¿çœŸ"><a href="#æ™®é€šæ‘„åƒå¤´ä»¿çœŸ" class="headerlink" title="æ™®é€šæ‘„åƒå¤´ä»¿çœŸ"></a>æ™®é€šæ‘„åƒå¤´ä»¿çœŸ</h2><p>é…ç½®æ‘„åƒå¤´ä¼ æ„Ÿå™¨ä¿¡æ¯xacro</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_sensors&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- è¢«å¼•ç”¨çš„link --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;camera&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç±»å‹è®¾ç½®ä¸º camara --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sensor</span> <span class="attr">type</span>=<span class="string">&quot;camera&quot;</span> <span class="attr">name</span>=<span class="string">&quot;camera_node&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">update_rate</span>&gt;</span>30.0<span class="tag">&lt;/<span class="name">update_rate</span>&gt;</span> <span class="comment">&lt;!-- æ›´æ–°é¢‘ç‡ --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æ‘„åƒå¤´åŸºæœ¬ä¿¡æ¯è®¾ç½® --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">camera</span> <span class="attr">name</span>=<span class="string">&quot;head&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">horizontal_fov</span>&gt;</span>1.3962634<span class="tag">&lt;/<span class="name">horizontal_fov</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">width</span>&gt;</span>1280<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">height</span>&gt;</span>720<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">format</span>&gt;</span>R8G8B8<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">clip</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">near</span>&gt;</span>0.02<span class="tag">&lt;/<span class="name">near</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">far</span>&gt;</span>300<span class="tag">&lt;/<span class="name">far</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">noise</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">type</span>&gt;</span>gaussian<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mean</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">mean</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">stddev</span>&gt;</span>0.007<span class="tag">&lt;/<span class="name">stddev</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">noise</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">camera</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æ ¸å¿ƒæ’ä»¶ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">&quot;gazebo_camera&quot;</span> <span class="attr">filename</span>=<span class="string">&quot;libgazebo_ros_camera.so&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">alwaysOn</span>&gt;</span>true<span class="tag">&lt;/<span class="name">alwaysOn</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">updateRate</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">updateRate</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cameraName</span>&gt;</span>/camera<span class="tag">&lt;/<span class="name">cameraName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">imageTopicName</span>&gt;</span>image_raw<span class="tag">&lt;/<span class="name">imageTopicName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cameraInfoTopicName</span>&gt;</span>camera_info<span class="tag">&lt;/<span class="name">cameraInfoTopicName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">frameName</span>&gt;</span>camera<span class="tag">&lt;/<span class="name">frameName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hackBaseline</span>&gt;</span>0.07<span class="tag">&lt;/<span class="name">hackBaseline</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionK1</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionK1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionK2</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionK2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionK3</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionK3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionT1</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionT1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionT2</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionT2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sensor</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨åŸæ¥çš„é›†æˆçš„xacroæ·»åŠ è¯¥æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„åˆå°è½¦åº•ç›˜ä¸æ‘„åƒå¤´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_car_camera&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;matrix.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;base.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;camera.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;move.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser_senor.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;camera_senor.xacro&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨åŸæ¥çš„launchæ–‡ä»¶</p>
<h2 id="kinectæ‘„åƒå¤´ä»¿çœŸ"><a href="#kinectæ‘„åƒå¤´ä»¿çœŸ" class="headerlink" title="kinectæ‘„åƒå¤´ä»¿çœŸ"></a>kinectæ‘„åƒå¤´ä»¿çœŸ</h2><p>é…ç½® kineticä¼ æ„Ÿå™¨ä¿¡æ¯xacro</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_sensors&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;support&quot;</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">sensor</span> <span class="attr">type</span>=<span class="string">&quot;depth&quot;</span> <span class="attr">name</span>=<span class="string">&quot;camera&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">always_on</span>&gt;</span>true<span class="tag">&lt;/<span class="name">always_on</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">update_rate</span>&gt;</span>20.0<span class="tag">&lt;/<span class="name">update_rate</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">camera</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">horizontal_fov</span>&gt;</span>$&#123;60.0*PI/180.0&#125;<span class="tag">&lt;/<span class="name">horizontal_fov</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">format</span>&gt;</span>R8G8B8<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">width</span>&gt;</span>640<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">height</span>&gt;</span>480<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">clip</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">near</span>&gt;</span>0.05<span class="tag">&lt;/<span class="name">near</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">far</span>&gt;</span>8.0<span class="tag">&lt;/<span class="name">far</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">camera</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">&quot;kinect_camera_controller&quot;</span> <span class="attr">filename</span>=<span class="string">&quot;libgazebo_ros_openni_kinect.so&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cameraName</span>&gt;</span>camera<span class="tag">&lt;/<span class="name">cameraName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">alwaysOn</span>&gt;</span>true<span class="tag">&lt;/<span class="name">alwaysOn</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">updateRate</span>&gt;</span>10<span class="tag">&lt;/<span class="name">updateRate</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">imageTopicName</span>&gt;</span>rgb/image_raw<span class="tag">&lt;/<span class="name">imageTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">depthImageTopicName</span>&gt;</span>depth/image_raw<span class="tag">&lt;/<span class="name">depthImageTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">pointCloudTopicName</span>&gt;</span>depth/points<span class="tag">&lt;/<span class="name">pointCloudTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cameraInfoTopicName</span>&gt;</span>rgb/camera_info<span class="tag">&lt;/<span class="name">cameraInfoTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">depthImageCameraInfoTopicName</span>&gt;</span>depth/camera_info<span class="tag">&lt;/<span class="name">depthImageCameraInfoTopicName</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- æ­¤å¤„ä¸ºäº†é˜²æ­¢ä¸cameraæ··æ·†,é‡‡ç”¨supportå½“ä½œæ·±åº¦ç›¸æœº --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">frameName</span>&gt;</span>support<span class="tag">&lt;/<span class="name">frameName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">baseline</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">baseline</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_k1</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_k1</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_k2</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_k2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_k3</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_k3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_t1</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_t1</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_t2</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_t2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">pointCloudCutoff</span>&gt;</span>0.4<span class="tag">&lt;/<span class="name">pointCloudCutoff</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">sensor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨åŸæ¥çš„é›†æˆçš„xacroæ·»åŠ è¯¥æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„åˆå°è½¦åº•ç›˜ä¸æ‘„åƒå¤´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_car_camera&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;matrix.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;base.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;camera.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;move.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser_senor.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;camera_senor.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;kinect_senor.xacro&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨åŸæ¥çš„launchæ–‡ä»¶</p>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>gazebo</tag>
        <tag>ros</tag>
        <tag>æœºå™¨äººä»¿çœŸ</tag>
        <tag>rviz</tag>
        <tag>xacro</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨äººä»¿çœŸå®è·µ_gazeboä¸­æ­å»º</title>
    <url>/posts/46778.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ¡ˆä¾‹æè¿°:URDF éœ€è¦é›†æˆè¿› Rviz æˆ– Gazebo æ‰èƒ½æ˜¾ç¤ºå¯è§†åŒ–çš„æœºå™¨äººæ¨¡å‹,å› æ­¤æˆ‘ä»¬å¯ä»¥ç»“åˆgazeboå®ç°ä¸€ä¸‹æ¡ˆä¾‹:åˆ›å»ºä¸€ä¸ªå››è½®åœ†æŸ±çŠ¶æœºå™¨äººæ¨¡å‹ï¼Œæœºå™¨äººå‚æ•°å¦‚ä¸‹,åº•ç›˜ä¸ºåœ†æŸ±çŠ¶ï¼ŒåŠå¾„ 10cmï¼Œé«˜ 8cmï¼Œå››è½®ç”±ä¸¤ä¸ªé©±åŠ¨è½®å’Œä¸¤ä¸ªä¸‡å‘æ”¯æ’‘è½®ç»„æˆï¼Œä¸¤ä¸ªé©±åŠ¨è½®åŠå¾„ä¸º 3.25cm,è½®èƒå®½åº¦1.5cmï¼Œä¸¤ä¸ªä¸‡å‘è½®ä¸ºçƒçŠ¶ï¼ŒåŠå¾„ 0.75cmï¼Œåº•ç›˜ç¦»åœ°é—´è·ä¸º 1.5cm(ä¸ä¸‡å‘è½®ç›´å¾„ä¸€è‡´)</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="URDFé›†æˆgazeboçš„æµç¨‹"><a href="#URDFé›†æˆgazeboçš„æµç¨‹" class="headerlink" title="URDFé›†æˆgazeboçš„æµç¨‹"></a>URDFé›†æˆgazeboçš„æµç¨‹</h1><p><strong>URDFä¸GazeboåŸºæœ¬é›†æˆæµç¨‹</strong></p>
<p>URDF ä¸ Gazebo é›†æˆæµç¨‹ä¸ Rviz å®ç°ç±»ä¼¼ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹:</p>
<ol>
<li>åˆ›å»ºåŠŸèƒ½åŒ…ï¼Œå¯¼å…¥ä¾èµ–é¡¹</li>
<li>ç¼–å†™ URDF æˆ– Xacro æ–‡ä»¶</li>
<li>å¯åŠ¨ Gazebo å¹¶æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹</li>
</ol>
<p><strong>æ³¨æ„ï¼Œ å½“ URDF éœ€è¦ä¸ Gazebo é›†æˆæ—¶ï¼Œå’Œ Rviz æœ‰æ˜æ˜¾åŒºåˆ«:</strong></p>
<p>1.å¿…é¡»ä½¿ç”¨ collision æ ‡ç­¾ï¼Œå› ä¸ºæ—¢ç„¶æ˜¯ä»¿çœŸç¯å¢ƒï¼Œé‚£ä¹ˆå¿…ç„¶æ¶‰åŠåˆ°ç¢°æ’æ£€æµ‹ï¼Œcollision æä¾›ç¢°æ’æ£€æµ‹çš„ä¾æ®ã€‚</p>
<p>2.å¿…é¡»ä½¿ç”¨ inertial æ ‡ç­¾ï¼Œæ­¤æ ‡ç­¾æ ‡æ³¨äº†å½“å‰æœºå™¨äººæŸä¸ªåˆšä½“éƒ¨åˆ†çš„æƒ¯æ€§çŸ©é˜µï¼Œç”¨äºä¸€äº›åŠ›å­¦ç›¸å…³çš„ä»¿çœŸè®¡ç®—ã€‚</p>
<p>3.é¢œè‰²è®¾ç½®ï¼Œä¹Ÿéœ€è¦é‡æ–°ä½¿ç”¨ gazebo æ ‡ç­¾æ ‡æ³¨ï¼Œå› ä¸ºä¹‹å‰çš„é¢œè‰²è®¾ç½®ä¸ºäº†æ–¹ä¾¿è°ƒè¯•åŒ…å«é€æ˜åº¦ï¼Œä»¿çœŸç¯å¢ƒä¸‹æ²¡æœ‰æ­¤é€‰é¡¹ã€‚</p>
<p><strong>1.collision</strong></p>
<p>å¦‚æœæœºå™¨äººlinkæ˜¯æ ‡å‡†çš„å‡ ä½•ä½“å½¢çŠ¶ï¼Œå’Œlinkçš„ visual å±æ€§è®¾ç½®ä¸€è‡´å³å¯ã€‚</p>
<p><strong>2.inertial</strong></p>
<p>æƒ¯æ€§çŸ©é˜µçš„è®¾ç½®éœ€è¦ç»“åˆlinkçš„è´¨é‡ä¸å¤–å½¢å‚æ•°åŠ¨æ€ç”Ÿæˆï¼Œæ ‡å‡†çš„çƒä½“ã€åœ†æŸ±ä¸ç«‹æ–¹ä½“çš„æƒ¯æ€§çŸ©é˜µå…¬å¼å¦‚ä¸‹(å·²ç»å°è£…ä¸º xacro å®ç°):</p>
<p>çƒä½“æƒ¯æ€§çŸ©é˜µ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Macro for inertia matrix --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;sphere_inertial_matrix&quot;</span> <span class="attr">params</span>=<span class="string">&quot;m r&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;$&#123;2*m*r*r/5&#125;&quot;</span> <span class="attr">ixy</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ixz</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">iyy</span>=<span class="string">&quot;$&#123;2*m*r*r/5&#125;&quot;</span> <span class="attr">iyz</span>=<span class="string">&quot;0&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">izz</span>=<span class="string">&quot;$&#123;2*m*r*r/5&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ†æŸ±æƒ¯æ€§çŸ©é˜µ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;cylinder_inertial_matrix&quot;</span> <span class="attr">params</span>=<span class="string">&quot;m r h&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;$&#123;m*(3*r*r+h*h)/12&#125;&quot;</span> <span class="attr">ixy</span> = <span class="string">&quot;0&quot;</span> <span class="attr">ixz</span> = <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">iyy</span>=<span class="string">&quot;$&#123;m*(3*r*r+h*h)/12&#125;&quot;</span> <span class="attr">iyz</span> = <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">izz</span>=<span class="string">&quot;$&#123;m*r*r/2&#125;&quot;</span> /&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç«‹æ–¹ä½“æƒ¯æ€§çŸ©é˜µ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;Box_inertial_matrix&quot;</span> <span class="attr">params</span>=<span class="string">&quot;m l w h&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m&#125;&quot;</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;$&#123;m*(h*h + l*l)/12&#125;&quot;</span> <span class="attr">ixy</span> = <span class="string">&quot;0&quot;</span> <span class="attr">ixz</span> = <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">iyy</span>=<span class="string">&quot;$&#123;m*(w*w + l*l)/12&#125;&quot;</span> <span class="attr">iyz</span>= <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">izz</span>=<span class="string">&quot;$&#123;m*(w*w + h*h)/12&#125;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŸåˆ™ä¸Šï¼Œé™¤äº† base_footprint å¤–ï¼Œæœºå™¨äººçš„æ¯ä¸ªåˆšä½“éƒ¨åˆ†éƒ½éœ€è¦è®¾ç½®æƒ¯æ€§çŸ©é˜µï¼Œä¸”æƒ¯æ€§çŸ©é˜µå¿…é¡»ç»è®¡ç®—å¾—å‡ºï¼Œå¦‚æœéšæ„å®šä¹‰åˆšä½“éƒ¨åˆ†çš„æƒ¯æ€§çŸ©é˜µï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´æœºå™¨äººåœ¨ Gazebo ä¸­å‡ºç°æŠ–åŠ¨ï¼Œç§»åŠ¨ç­‰ç°è±¡ã€‚</p>
<p>3.<strong>é¢œè‰²è®¾ç½®</strong></p>
<p>åœ¨ gazebo ä¸­æ˜¾ç¤º link çš„é¢œè‰²ï¼Œå¿…é¡»è¦ä½¿ç”¨æŒ‡å®šçš„æ ‡ç­¾:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;linkèŠ‚ç‚¹åç§°&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Blue<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="gazeboä»¿çœŸå®è·µ"><a href="#gazeboä»¿çœŸå®è·µ" class="headerlink" title="gazeboä»¿çœŸå®è·µ"></a>gazeboä»¿çœŸå®è·µ</h1><h2 id="æƒ¯æ€§çŸ©é˜µxacro"><a href="#æƒ¯æ€§çŸ©é˜µxacro" class="headerlink" title="æƒ¯æ€§çŸ©é˜µxacro"></a>æƒ¯æ€§çŸ©é˜µxacro</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;base&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Macro for inertia matrix --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;sphere_inertial_matrix&quot;</span> <span class="attr">params</span>=<span class="string">&quot;m r&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;$&#123;2*m*r*r/5&#125;&quot;</span> <span class="attr">ixy</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ixz</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">iyy</span>=<span class="string">&quot;$&#123;2*m*r*r/5&#125;&quot;</span> <span class="attr">iyz</span>=<span class="string">&quot;0&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">izz</span>=<span class="string">&quot;$&#123;2*m*r*r/5&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;cylinder_inertial_matrix&quot;</span> <span class="attr">params</span>=<span class="string">&quot;m r h&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;$&#123;m*(3*r*r+h*h)/12&#125;&quot;</span> <span class="attr">ixy</span> = <span class="string">&quot;0&quot;</span> <span class="attr">ixz</span> = <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">iyy</span>=<span class="string">&quot;$&#123;m*(3*r*r+h*h)/12&#125;&quot;</span> <span class="attr">iyz</span> = <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">izz</span>=<span class="string">&quot;$&#123;m*r*r/2&#125;&quot;</span> /&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;Box_inertial_matrix&quot;</span> <span class="attr">params</span>=<span class="string">&quot;m l w h&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m&#125;&quot;</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;$&#123;m*(h*h + l*l)/12&#125;&quot;</span> <span class="attr">ixy</span> = <span class="string">&quot;0&quot;</span> <span class="attr">ixz</span> = <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">iyy</span>=<span class="string">&quot;$&#123;m*(w*w + l*l)/12&#125;&quot;</span> <span class="attr">iyz</span>= <span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">izz</span>=<span class="string">&quot;$&#123;m*(w*w + h*h)/12&#125;&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å°è½¦åº•ç›˜xacro"><a href="#å°è½¦åº•ç›˜xacro" class="headerlink" title="å°è½¦åº•ç›˜xacro"></a>å°è½¦åº•ç›˜xacro</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    ä½¿ç”¨ xacro ä¼˜åŒ– URDF ç‰ˆçš„å°è½¦åº•ç›˜å®ç°ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    å®ç°æ€è·¯:</span></span><br><span class="line"><span class="comment">    1.å°†ä¸€äº›å¸¸é‡ã€å˜é‡å°è£…ä¸º xacro:property</span></span><br><span class="line"><span class="comment">      æ¯”å¦‚:PI å€¼ã€å°è½¦åº•ç›˜åŠå¾„ã€ç¦»åœ°é—´è·ã€è½¦è½®åŠå¾„ã€å®½åº¦ ....</span></span><br><span class="line"><span class="comment">    2.ä½¿ç”¨ å® å°è£…é©±åŠ¨è½®ä»¥åŠæ”¯æ’‘è½®å®ç°ï¼Œè°ƒç”¨ç›¸å…³å®ç”Ÿæˆé©±åŠ¨è½®ä¸æ”¯æ’‘è½®</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ ‡ç­¾ï¼Œå¿…é¡»å£°æ˜ xmlns:xacro --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_base&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://www.ros.org/wiki/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°è£…å˜é‡ã€å¸¸é‡ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- PI å€¼è®¾ç½®ç²¾åº¦éœ€è¦é«˜ä¸€äº›ï¼Œå¦åˆ™åç»­è½¦è½®ç¿»è½¬é‡è®¡ç®—æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°è‚‰çœ¼ä¸èƒ½å¯Ÿè§‰çš„è½¦è½®å€¾æ–œï¼Œä»è€Œå¯¼è‡´æ¨¡å‹æŠ–åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;PI&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3.1415926&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®:é»‘è‰²è®¾ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.0 0.0 0.0 1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åº•ç›˜å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_footprint_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.001&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_footprint åŠå¾„  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_link_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.1&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_link åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_link_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.08&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_link é•¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;earth_space&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.015&quot;</span> /&gt;</span> <span class="comment">&lt;!-- ç¦»åœ°é—´è· --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_link_m&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.5&quot;</span> /&gt;</span> <span class="comment">&lt;!-- è´¨é‡  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•ç›˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_footprint&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;base_footprint_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_link&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;base_link_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;base_link_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.5 0.3 0.0 0.5&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;base_link_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;base_link_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">xacro:cylinder_inertial_matrix</span> <span class="attr">m</span>=<span class="string">&quot;$&#123;base_link_m&#125;&quot;</span> <span class="attr">r</span>=<span class="string">&quot;$&#123;base_link_radius&#125;&quot;</span> <span class="attr">h</span>=<span class="string">&quot;$&#123;base_link_length&#125;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;base_link2base_footprint&quot;</span> <span class="attr">type</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_footprint&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 $&#123;earth_space + base_link_length / 2 &#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;base_link&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Yellow<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;wheel_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0325&quot;</span> /&gt;</span><span class="comment">&lt;!-- åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;wheel_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.015&quot;</span> /&gt;</span><span class="comment">&lt;!-- å®½åº¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;wheel_m&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.05&quot;</span> /&gt;</span> <span class="comment">&lt;!-- è´¨é‡  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å®å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;add_wheels&quot;</span> <span class="attr">params</span>=<span class="string">&quot;name flag&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;wheel_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;wheel_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;$&#123;PI / 2&#125; 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;wheel_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;wheel_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;$&#123;PI / 2&#125; 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xacro:cylinder_inertial_matrix</span> <span class="attr">m</span>=<span class="string">&quot;$&#123;wheel_m&#125;&quot;</span> <span class="attr">r</span>=<span class="string">&quot;$&#123;wheel_radius&#125;&quot;</span> <span class="attr">h</span>=<span class="string">&quot;$&#123;wheel_length&#125;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 $&#123;flag * base_link_radius&#125; $&#123;-(earth_space + base_link_length / 2 - wheel_radius) &#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;0 1 0&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Red<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_wheels</span> <span class="attr">name</span>=<span class="string">&quot;left&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_wheels</span> <span class="attr">name</span>=<span class="string">&quot;right&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;-1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_wheel_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0075&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ’‘è½®åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_wheel_m&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.03&quot;</span> /&gt;</span> <span class="comment">&lt;!-- è´¨é‡  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½®å® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;add_support_wheel&quot;</span> <span class="attr">params</span>=<span class="string">&quot;name flag&quot;</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;support_wheel_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;support_wheel_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xacro:sphere_inertial_matrix</span> <span class="attr">m</span>=<span class="string">&quot;$&#123;support_wheel_m&#125;&quot;</span> <span class="attr">r</span>=<span class="string">&quot;$&#123;support_wheel_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;$&#123;flag * (base_link_radius - support_wheel_radius)&#125; 0 $&#123;-(base_link_length / 2 + earth_space / 2)&#125;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;1 1 1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Red<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">name</span>=<span class="string">&quot;front&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">name</span>=<span class="string">&quot;back&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;-1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é›·è¾¾xacro</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    ä½¿ç”¨ xacro ä¼˜åŒ– URDF ç‰ˆçš„å°è½¦åº•ç›˜å®ç°ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    å®ç°æ€è·¯:</span></span><br><span class="line"><span class="comment">    1.å°†ä¸€äº›å¸¸é‡ã€å˜é‡å°è£…ä¸º xacro:property</span></span><br><span class="line"><span class="comment">      æ¯”å¦‚:PI å€¼ã€å°è½¦åº•ç›˜åŠå¾„ã€ç¦»åœ°é—´è·ã€è½¦è½®åŠå¾„ã€å®½åº¦ ....</span></span><br><span class="line"><span class="comment">    2.ä½¿ç”¨ å® å°è£…é©±åŠ¨è½®ä»¥åŠæ”¯æ’‘è½®å®ç°ï¼Œè°ƒç”¨ç›¸å…³å®ç”Ÿæˆé©±åŠ¨è½®ä¸æ”¯æ’‘è½®</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ ‡ç­¾ï¼Œå¿…é¡»å£°æ˜ xmlns:xacro --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_base&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://www.ros.org/wiki/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°è£…å˜é‡ã€å¸¸é‡ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- PI å€¼è®¾ç½®ç²¾åº¦éœ€è¦é«˜ä¸€äº›ï¼Œå¦åˆ™åç»­è½¦è½®ç¿»è½¬é‡è®¡ç®—æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°è‚‰çœ¼ä¸èƒ½å¯Ÿè§‰çš„è½¦è½®å€¾æ–œï¼Œä»è€Œå¯¼è‡´æ¨¡å‹æŠ–åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;PI&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3.1415926&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®:é»‘è‰²è®¾ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.0 0.0 0.0 1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åº•ç›˜å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_footprint_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.001&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_footprint åŠå¾„  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_link_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.1&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_link åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_link_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.08&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_link é•¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;earth_space&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.015&quot;</span> /&gt;</span> <span class="comment">&lt;!-- ç¦»åœ°é—´è· --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_link_m&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.5&quot;</span> /&gt;</span> <span class="comment">&lt;!-- è´¨é‡  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•ç›˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_footprint&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;base_footprint_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_link&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;base_link_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;base_link_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.5 0.3 0.0 0.5&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;base_link_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;base_link_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">xacro:cylinder_inertial_matrix</span> <span class="attr">m</span>=<span class="string">&quot;$&#123;base_link_m&#125;&quot;</span> <span class="attr">r</span>=<span class="string">&quot;$&#123;base_link_radius&#125;&quot;</span> <span class="attr">h</span>=<span class="string">&quot;$&#123;base_link_length&#125;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;base_link2base_footprint&quot;</span> <span class="attr">type</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_footprint&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 $&#123;earth_space + base_link_length / 2 &#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;base_link&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Yellow<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;wheel_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0325&quot;</span> /&gt;</span><span class="comment">&lt;!-- åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;wheel_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.015&quot;</span> /&gt;</span><span class="comment">&lt;!-- å®½åº¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;wheel_m&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.05&quot;</span> /&gt;</span> <span class="comment">&lt;!-- è´¨é‡  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å®å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;add_wheels&quot;</span> <span class="attr">params</span>=<span class="string">&quot;name flag&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;wheel_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;wheel_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;$&#123;PI / 2&#125; 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;wheel_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;wheel_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;$&#123;PI / 2&#125; 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xacro:cylinder_inertial_matrix</span> <span class="attr">m</span>=<span class="string">&quot;$&#123;wheel_m&#125;&quot;</span> <span class="attr">r</span>=<span class="string">&quot;$&#123;wheel_radius&#125;&quot;</span> <span class="attr">h</span>=<span class="string">&quot;$&#123;wheel_length&#125;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 $&#123;flag * base_link_radius&#125; $&#123;-(earth_space + base_link_length / 2 - wheel_radius) &#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;0 1 0&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Red<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_wheels</span> <span class="attr">name</span>=<span class="string">&quot;left&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_wheels</span> <span class="attr">name</span>=<span class="string">&quot;right&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;-1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_wheel_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0075&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ’‘è½®åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_wheel_m&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.03&quot;</span> /&gt;</span> <span class="comment">&lt;!-- è´¨é‡  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½®å® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;add_support_wheel&quot;</span> <span class="attr">params</span>=<span class="string">&quot;name flag&quot;</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;support_wheel_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;support_wheel_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xacro:sphere_inertial_matrix</span> <span class="attr">m</span>=<span class="string">&quot;$&#123;support_wheel_m&#125;&quot;</span> <span class="attr">r</span>=<span class="string">&quot;$&#123;support_wheel_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;$&#123;flag * (base_link_radius - support_wheel_radius)&#125; 0 $&#123;-(base_link_length / 2 + earth_space / 2)&#125;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;1 1 1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Red<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">name</span>=<span class="string">&quot;front&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">name</span>=<span class="string">&quot;back&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;-1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç›¸æœºxacro"><a href="#ç›¸æœºxacro" class="headerlink" title="ç›¸æœºxacro"></a>ç›¸æœºxacro</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_camera&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‘„åƒå¤´å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.01&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´é•¿åº¦(x) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_width&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.025&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®½åº¦(y) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_height&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.025&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´é«˜åº¦(z) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_x&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.08&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„xåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_y&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„yåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_z&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;base_link_length / 2 + camera_height / 2&#125;&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„zåæ ‡:åº•ç›˜é«˜åº¦ / 2 + æ‘„åƒå¤´é«˜åº¦ / 2  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_m&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.01&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´è´¨é‡ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‘„åƒå¤´å…³èŠ‚ä»¥åŠlink --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;camera&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">&quot;$&#123;camera_length&#125; $&#123;camera_width&#125; $&#123;camera_height&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">&quot;$&#123;camera_length&#125; $&#123;camera_width&#125; $&#123;camera_height&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xacro:Box_inertial_matrix</span> <span class="attr">m</span>=<span class="string">&quot;$&#123;camera_m&#125;&quot;</span> <span class="attr">l</span>=<span class="string">&quot;$&#123;camera_length&#125;&quot;</span> <span class="attr">w</span>=<span class="string">&quot;$&#123;camera_width&#125;&quot;</span> <span class="attr">h</span>=<span class="string">&quot;$&#123;camera_height&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;camera2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;camera&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;$&#123;camera_x&#125; $&#123;camera_y&#125; $&#123;camera_z&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;camera&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Blue<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç»„åˆåº•ç›˜-ç›¸æœº-é›·è¾¾xacro"><a href="#ç»„åˆåº•ç›˜-ç›¸æœº-é›·è¾¾xacro" class="headerlink" title="ç»„åˆåº•ç›˜\ç›¸æœº\é›·è¾¾xacro"></a>ç»„åˆåº•ç›˜\ç›¸æœº\é›·è¾¾xacro</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„åˆå°è½¦åº•ç›˜ä¸æ‘„åƒå¤´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_car_camera&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;matrix.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;base.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;camera.xacro&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="launchæ–‡ä»¶"><a href="#launchæ–‡ä»¶" class="headerlink" title="launchæ–‡ä»¶"></a>launchæ–‡ä»¶</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°† Urdf æ–‡ä»¶çš„å†…å®¹åŠ è½½åˆ°å‚æ•°æœåŠ¡å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">command</span>=<span class="string">&quot;$(find xacro)/xacro $(find robot_simlink_gazebo)/urdf/xacro/combine.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ gazebo --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨ gazebo ä¸­æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;gazebo_ros&quot;</span> <span class="attr">type</span>=<span class="string">&quot;spawn_model&quot;</span> <span class="attr">name</span>=<span class="string">&quot;model&quot;</span> <span class="attr">args</span>=<span class="string">&quot;-urdf -model mycar -param robot_description&quot;</span>  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>gazebo</tag>
        <tag>ros</tag>
        <tag>æœºå™¨äººä»¿çœŸ</tag>
        <tag>xacro</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨äººä»¿çœŸå®è·µ_XACROæ­å»ºæœºå™¨äºº</title>
    <url>/posts/30241.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ¡ˆä¾‹æè¿°:åˆ›å»ºä¸€ä¸ªå››è½®åœ†æŸ±çŠ¶æœºå™¨äººæ¨¡å‹ï¼Œæœºå™¨äººå‚æ•°å¦‚ä¸‹,åº•ç›˜ä¸ºåœ†æŸ±çŠ¶ï¼ŒåŠå¾„ 10cmï¼Œé«˜ 8cmï¼Œå››è½®ç”±ä¸¤ä¸ªé©±åŠ¨è½®å’Œä¸¤ä¸ªä¸‡å‘æ”¯æ’‘è½®ç»„æˆï¼Œä¸¤ä¸ªé©±åŠ¨è½®åŠå¾„ä¸º 3.25cm,è½®èƒå®½åº¦1.5cmï¼Œä¸¤ä¸ªä¸‡å‘è½®ä¸ºçƒçŠ¶ï¼ŒåŠå¾„ 0.75cmï¼Œåº•ç›˜ç¦»åœ°é—´è·ä¸º 1.5cm(ä¸ä¸‡å‘è½®ç›´å¾„ä¸€è‡´)</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>åœ¨ä¸Šè¿°æ¡ˆä¾‹ä¹‹ä¸­,ä½¿ç”¨urdfæ­å»ºæœºå™¨äººå‘ç°å¤ç”¨æ€§å·®,è€Œä¸”å‚æ•°è¢«æœ‰å¾ˆå¥½çš„åˆ†ç¦»å‡ºæ¥,å¾ˆéš¾è¿›è¡Œç®¡ç†å’Œç»´æŠ¤.å› æ­¤å¼•å…¥xacroæ–‡ä»¶,åœ¨ä½¿ç”¨xacroè¿›è¡Œä¼˜åŒ–ä¹‹åæ€è€ƒå¦‚ä½•å¼•å…¥æ‘„åƒå¤´å’Œé›·è¾¾.</p>
<h1 id="ç¼–å†™XACROæ–‡ä»¶"><a href="#ç¼–å†™XACROæ–‡ä»¶" class="headerlink" title="ç¼–å†™XACROæ–‡ä»¶"></a>ç¼–å†™XACROæ–‡ä»¶</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    ä½¿ç”¨ xacro ä¼˜åŒ– URDF ç‰ˆçš„å°è½¦åº•ç›˜å®ç°ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    å®ç°æ€è·¯:</span></span><br><span class="line"><span class="comment">    1.å°†ä¸€äº›å¸¸é‡ã€å˜é‡å°è£…ä¸º xacro:property</span></span><br><span class="line"><span class="comment">      æ¯”å¦‚:PI å€¼ã€å°è½¦åº•ç›˜åŠå¾„ã€ç¦»åœ°é—´è·ã€è½¦è½®åŠå¾„ã€å®½åº¦ ....</span></span><br><span class="line"><span class="comment">    2.ä½¿ç”¨ å® å°è£…é©±åŠ¨è½®ä»¥åŠæ”¯æ’‘è½®å®ç°ï¼Œè°ƒç”¨ç›¸å…³å®ç”Ÿæˆé©±åŠ¨è½®ä¸æ”¯æ’‘è½®</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ ‡ç­¾ï¼Œå¿…é¡»å£°æ˜ xmlns:xacro --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_base&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://www.ros.org/wiki/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°è£…å˜é‡ã€å¸¸é‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;PI&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3.141&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®:é»‘è‰²è®¾ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.0 0.0 0.0 1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åº•ç›˜å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_footprint_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.001&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_footprint åŠå¾„  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_link_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.1&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_link åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;base_link_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.08&quot;</span> /&gt;</span> <span class="comment">&lt;!-- base_link é•¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;earth_space&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.015&quot;</span> /&gt;</span> <span class="comment">&lt;!-- ç¦»åœ°é—´è· --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•ç›˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_footprint&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;base_footprint_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_link&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;base_link_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;base_link_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.5 0.3 0.0 0.5&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;base_link2base_footprint&quot;</span> <span class="attr">type</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_footprint&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 $&#123;earth_space + base_link_length / 2 &#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;wheel_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0325&quot;</span> /&gt;</span><span class="comment">&lt;!-- åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;wheel_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.015&quot;</span> /&gt;</span><span class="comment">&lt;!-- å®½åº¦ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å®å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;add_wheels&quot;</span> <span class="attr">params</span>=<span class="string">&quot;name flag&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;wheel_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;wheel_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;$&#123;PI / 2&#125; 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 $&#123;flag * base_link_radius&#125; $&#123;-(earth_space + base_link_length / 2 - wheel_radius) &#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;0 1 0&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_wheels</span> <span class="attr">name</span>=<span class="string">&quot;left&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_wheels</span> <span class="attr">name</span>=<span class="string">&quot;right&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;-1&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_wheel_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0075&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ’‘è½®åŠå¾„ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ”¯æ’‘è½®å® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">&quot;add_support_wheel&quot;</span> <span class="attr">params</span>=<span class="string">&quot;name flag&quot;</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;support_wheel_radius&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;$&#123;name&#125;_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;$&#123;name&#125;_wheel&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;$&#123;flag * (base_link_radius - support_wheel_radius)&#125; 0 $&#123;-(base_link_length / 2 + earth_space / 2)&#125;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;1 1 1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">name</span>=<span class="string">&quot;front&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">name</span>=<span class="string">&quot;back&quot;</span> <span class="attr">flag</span>=<span class="string">&quot;-1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="åœ¨-launch-ä¸­åŠ è½½-xacroæ–‡ä»¶"><a href="#åœ¨-launch-ä¸­åŠ è½½-xacroæ–‡ä»¶" class="headerlink" title="åœ¨ launch ä¸­åŠ è½½ xacroæ–‡ä»¶"></a>åœ¨ launch ä¸­åŠ è½½ xacroæ–‡ä»¶</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">command</span>=<span class="string">&quot;$(find xacro)/xacro $(find robot_simlink_rviz)/urdf/xacro/robot_xacro.xacro&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">type</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rviz&quot;</span>  /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ·»åŠ åæ ‡ç³»å’Œæœºå™¨äººæ¨¡å‹,ç„¶åå°±å¯ä»¥çœ‹åˆ°æ­å»ºçš„å°è½¦æ¨¡å‹.</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿å­˜ç”Ÿæˆçš„rvizæ–‡ä»¶,ä»¥ä¾¿äºŒæ¬¡æ‰“å¼€åå¤æ·»åŠ å‚æ•°,File/save config asâ€¦</p>
<p>ä¿®æ”¹launchæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½robot_descriptionæ—¶ä½¿ç”¨commandå±æ€§ï¼Œå±æ€§å€¼å°±æ˜¯è°ƒç”¨ xacro åŠŸèƒ½åŒ…çš„ xacro ç¨‹åºç›´æ¥è§£æ xacro æ–‡ä»¶ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">command</span>=<span class="string">&quot;$(find xacro)/xacro $(find robot_simlink_rviz)/urdf/xacro/robot_xacro.xacro&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">type</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">args</span>=<span class="string">&quot;-d $(find robot_simlink_rviz)/config/robot_xacro.rviz&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>äº‹å®ä¸Š,è¿˜å¯ä»¥é€šè¿‡å°†xacroæ–‡ä»¶è½¬æ¢æˆå¯¹åº”çš„urdfæ–‡ä»¶,ç„¶ååœ¨launchæ–‡ä»¶é‡Œæ‰§è¡Œurdfæ–‡ä»¶å³å¯</p>
<p>è½¬æ¢çš„å‘½ä»¤:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rosrun xacro xacro xxx.xacro &gt; xxx.urdf</span><br></pre></td></tr></table></figure>
<h1 id="æ·»åŠ é›·è¾¾å’Œæ‘„åƒå¤´"><a href="#æ·»åŠ é›·è¾¾å’Œæ‘„åƒå¤´" class="headerlink" title="æ·»åŠ é›·è¾¾å’Œæ‘„åƒå¤´"></a>æ·»åŠ é›·è¾¾å’Œæ‘„åƒå¤´</h1><p><strong>å®ç°æµç¨‹:</strong></p>
<ol>
<li>é¦–å…ˆç¼–å†™æ‘„åƒå¤´å’Œé›·è¾¾çš„ xacro æ–‡ä»¶</li>
<li>ç„¶åå†ç¼–å†™ä¸€ä¸ªç»„åˆæ–‡ä»¶ï¼Œç»„åˆåº•ç›˜ã€æ‘„åƒå¤´ä¸é›·è¾¾</li>
<li>æœ€åï¼Œé€šè¿‡ launch æ–‡ä»¶å¯åŠ¨ Rviz å¹¶æ˜¾ç¤ºæ¨¡å‹</li>
</ol>
<h2 id="æ‘„åƒå¤´-xacro-æ–‡ä»¶"><a href="#æ‘„åƒå¤´-xacro-æ–‡ä»¶" class="headerlink" title="æ‘„åƒå¤´ xacro æ–‡ä»¶:"></a>æ‘„åƒå¤´ xacro æ–‡ä»¶:</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ‘„åƒå¤´ç›¸å…³çš„ xacro æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_camera&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‘„åƒå¤´å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.01&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´é•¿åº¦(x) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_width&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.025&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®½åº¦(y) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_height&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.025&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´é«˜åº¦(z) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_x&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.08&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„xåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_y&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„yåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;camera_z&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;base_link_length / 2 + camera_height / 2&#125;&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„zåæ ‡:åº•ç›˜é«˜åº¦ / 2 + æ‘„åƒå¤´é«˜åº¦ / 2  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‘„åƒå¤´å…³èŠ‚ä»¥åŠlink --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;camera&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">&quot;$&#123;camera_length&#125; $&#123;camera_width&#125; $&#123;camera_height&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;camera2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;camera&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;$&#123;camera_x&#125; $&#123;camera_y&#125; $&#123;camera_z&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="é›·è¾¾-xacro-æ–‡ä»¶"><a href="#é›·è¾¾-xacro-æ–‡ä»¶" class="headerlink" title="é›·è¾¾ xacro æ–‡ä»¶:"></a>é›·è¾¾ xacro æ–‡ä»¶:</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    å°è½¦åº•ç›˜æ·»åŠ é›·è¾¾</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_laser&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é›·è¾¾æ”¯æ¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.15&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶é•¿åº¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.01&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_x&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶å®‰è£…çš„xåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_y&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶å®‰è£…çš„yåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;support_z&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;base_link_length / 2 + support_length / 2&#125;&quot;</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶å®‰è£…çš„zåæ ‡:åº•ç›˜é«˜åº¦ / 2 + æ”¯æ¶é«˜åº¦ / 2  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;support&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;support_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;support_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;red&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.8 0.2 0.0 0.8&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;support2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;support&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;$&#123;support_x&#125; $&#123;support_y&#125; $&#123;support_z&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é›·è¾¾å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;laser_length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.05&quot;</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾é•¿åº¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;laser_radius&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.03&quot;</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;laser_x&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0&quot;</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾å®‰è£…çš„xåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;laser_y&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.0&quot;</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾å®‰è£…çš„yåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">&quot;laser_z&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;support_length / 2 + laser_length / 2&#125;&quot;</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾å®‰è£…çš„zåæ ‡:æ”¯æ¶é«˜åº¦ / 2 + é›·è¾¾é«˜åº¦ / 2  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é›·è¾¾å…³èŠ‚ä»¥åŠlink --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;laser&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;$&#123;laser_radius&#125;&quot;</span> <span class="attr">length</span>=<span class="string">&quot;$&#123;laser_length&#125;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0.0 0.0 0.0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;laser2support&quot;</span> <span class="attr">type</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;support&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;laser&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;$&#123;laser_x&#125; $&#123;laser_y&#125; $&#123;laser_z&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç»„åˆåº•ç›˜æ‘„åƒå¤´ä¸é›·è¾¾çš„-xacro-æ–‡ä»¶"><a href="#ç»„åˆåº•ç›˜æ‘„åƒå¤´ä¸é›·è¾¾çš„-xacro-æ–‡ä»¶" class="headerlink" title="ç»„åˆåº•ç›˜æ‘„åƒå¤´ä¸é›·è¾¾çš„ xacro æ–‡ä»¶"></a>ç»„åˆåº•ç›˜æ‘„åƒå¤´ä¸é›·è¾¾çš„ xacro æ–‡ä»¶</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„åˆå°è½¦åº•ç›˜ä¸æ‘„åƒå¤´ä¸é›·è¾¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;my_car_camera&quot;</span> <span class="attr">xmlns:xacro</span>=<span class="string">&quot;http://wiki.ros.org/xacro&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;robot_xacro.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;laser.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">&quot;camera.xacro&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="launch-æ–‡ä»¶"><a href="#launch-æ–‡ä»¶" class="headerlink" title="launch æ–‡ä»¶"></a>launch æ–‡ä»¶</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">command</span>=<span class="string">&quot;$(find xacro)/xacro $(find robot_simlink_rviz)/urdf/xacro/combine.xacro&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">type</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rviz&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>ros</tag>
        <tag>æœºå™¨äººä»¿çœŸ</tag>
        <tag>rviz</tag>
        <tag>xacro</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨äººä»¿çœŸå®è·µ_URDFæ­å»ºæœºå™¨äºº</title>
    <url>/posts/32353.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ¡ˆä¾‹æè¿°:åˆ›å»ºä¸€ä¸ªå››è½®åœ†æŸ±çŠ¶æœºå™¨äººæ¨¡å‹ï¼Œæœºå™¨äººå‚æ•°å¦‚ä¸‹,åº•ç›˜ä¸ºåœ†æŸ±çŠ¶ï¼ŒåŠå¾„ 10cmï¼Œé«˜ 8cmï¼Œå››è½®ç”±ä¸¤ä¸ªé©±åŠ¨è½®å’Œä¸¤ä¸ªä¸‡å‘æ”¯æ’‘è½®ç»„æˆï¼Œä¸¤ä¸ªé©±åŠ¨è½®åŠå¾„ä¸º 3.25cm,è½®èƒå®½åº¦1.5cmï¼Œä¸¤ä¸ªä¸‡å‘è½®ä¸ºçƒçŠ¶ï¼ŒåŠå¾„ 0.75cmï¼Œåº•ç›˜ç¦»åœ°é—´è·ä¸º 1.5cm(ä¸ä¸‡å‘è½®ç›´å¾„ä¸€è‡´)</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><strong>å®ç°æµç¨‹:</strong></p>
<p>åˆ›å»ºæœºå™¨äººæ¨¡å‹å¯ä»¥åˆ†æ­¥éª¤å®ç°</p>
<ol>
<li>æ–°å»º urdf æ–‡ä»¶ï¼Œå¹¶ä¸ launch æ–‡ä»¶é›†æˆ</li>
<li>æ­å»ºåº•ç›˜</li>
<li>åœ¨åº•ç›˜ä¸Šæ·»åŠ ä¸¤ä¸ªé©±åŠ¨è½®</li>
<li>åœ¨åº•ç›˜ä¸Šæ·»åŠ ä¸¤ä¸ªä¸‡å‘è½®</li>
</ol>
<h1 id="æ–°å»ºurdfä»¥åŠlaunchæ–‡ä»¶"><a href="#æ–°å»ºurdfä»¥åŠlaunchæ–‡ä»¶" class="headerlink" title="æ–°å»ºurdfä»¥åŠlaunchæ–‡ä»¶"></a>æ–°å»ºurdfä»¥åŠlaunchæ–‡ä»¶</h1><p>urdf æ–‡ä»¶:åŸºæœ¬å®ç°</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;mycar&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½® base_footprint  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_footprint&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;0.001&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ åº•ç›˜ --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ é©±åŠ¨è½® --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ ä¸‡å‘è½®(æ”¯æ’‘è½®) --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>robot</p>
<blockquote>
<p>urdf ä¸­ä¸ºäº†ä¿è¯ xml è¯­æ³•çš„å®Œæ•´æ€§ï¼Œä½¿ç”¨äº†<code>robot</code>æ ‡ç­¾ä½œä¸ºæ ¹æ ‡ç­¾ï¼Œæ‰€æœ‰çš„ link å’Œ joint ä»¥åŠå…¶ä»–æ ‡ç­¾éƒ½å¿…é¡»åŒ…å«åœ¨ robot æ ‡ç­¾å†…,åœ¨è¯¥æ ‡ç­¾å†…å¯ä»¥é€šè¿‡ name å±æ€§è®¾ç½®æœºå™¨äººæ¨¡å‹çš„åç§°\</p>
</blockquote>
<p>name: </p>
<blockquote>
<p>æŒ‡å®šæœºå™¨äººæ¨¡å‹çš„åç§°</p>
</blockquote>
<p>link</p>
<blockquote>
<p> urdf ä¸­çš„ link æ ‡ç­¾ç”¨äºæè¿°æœºå™¨äººæŸä¸ªéƒ¨ä»¶(ä¹Ÿå³åˆšä½“éƒ¨åˆ†)çš„å¤–è§‚å’Œç‰©ç†å±æ€§ï¼Œæ¯”å¦‚: æœºå™¨äººåº•åº§ã€è½®å­ã€æ¿€å…‰é›·è¾¾ã€æ‘„åƒå¤´â€¦æ¯ä¸€ä¸ªéƒ¨ä»¶éƒ½å¯¹åº”ä¸€ä¸ª link, åœ¨ link æ ‡ç­¾å†…ï¼Œå¯ä»¥è®¾è®¡è¯¥éƒ¨ä»¶çš„å½¢çŠ¶ã€å°ºå¯¸ã€é¢œè‰²ã€æƒ¯æ€§çŸ©é˜µã€ç¢°æ’å‚æ•°ç­‰ä¸€ç³»åˆ—å±æ€§</p>
<blockquote>
<ul>
<li>name â€”-&gt; ä¸ºè¿æ†å‘½å</li>
<li><p>visual â€”-&gt; æè¿°å¤–è§‚(å¯¹åº”çš„æ•°æ®æ˜¯å¯è§†çš„) </p>
</li>
<li><ul>
<li><strong>geometry è®¾ç½®è¿æ†çš„å½¢çŠ¶</strong> </li>
</ul>
</li>
<li><ul>
<li><ul>
<li>æ ‡ç­¾1: box(ç›’çŠ¶) </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><ul>
<li>å±æ€§:size=é•¿(x) å®½(y) é«˜(z)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>æ ‡ç­¾2: cylinder(åœ†æŸ±) </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><ul>
<li>å±æ€§:radius=åŠå¾„ length=é«˜åº¦</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>æ ‡ç­¾3: sphere(çƒä½“) </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><ul>
<li>å±æ€§:radius=åŠå¾„</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>æ ‡ç­¾4: mesh(ä¸ºè¿æ†æ·»åŠ çš®è‚¤) </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><ul>
<li>å±æ€§: filename=èµ„æºè·¯å¾„(æ ¼å¼:<strong>package:////æ–‡ä»¶</strong>)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><strong>origin è®¾ç½®åç§»é‡ä¸å€¾æ–œå¼§åº¦</strong> </li>
</ul>
</li>
<li><ul>
<li><ul>
<li>å±æ€§1: xyz=xåç§» yä¾¿å®œ zåç§»</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>å±æ€§2: rpy=xç¿»æ»š yä¿¯ä»° zåèˆª (å•ä½æ˜¯å¼§åº¦)</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><strong>metrial è®¾ç½®ææ–™å±æ€§(é¢œè‰²)</strong> </li>
</ul>
</li>
<li><ul>
<li><ul>
<li>å±æ€§: name</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>æ ‡ç­¾: color </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><ul>
<li>å±æ€§: rgba=çº¢ç»¿è“æƒé‡å€¼ä¸é€æ˜åº¦ (æ¯ä¸ªæƒé‡å€¼ä»¥åŠé€æ˜åº¦å–å€¼[0,1])</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>collision â€”-&gt; è¿æ†çš„ç¢°æ’å±æ€§</p>
</li>
<li><p>Inertial â€”-&gt; è¿æ†çš„æƒ¯æ€§çŸ©é˜µ</p>
</li>
</ul>
</blockquote>
</blockquote>
</blockquote>
<p>launch æ–‡ä»¶:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°† urdf æ–‡ä»¶å†…å®¹è®¾ç½®è¿›å‚æ•°æœåŠ¡å™¨ --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- å°† urdf æ–‡ä»¶å†…å®¹è®¾ç½®è¿›å‚æ•°æœåŠ¡å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> </span></span><br><span class="line"><span class="tag">           <span class="attr">textfile</span>=<span class="string">&quot;$(find robot_simlink_rviz)/urdf/robot_urdf.urdf&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ rivz --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">type</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rviz_test&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨æœºå™¨äººçŠ¶æ€å’Œå…³èŠ‚çŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;robot_state_publisher&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;joint_state_publisher&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="åº•ç›˜æ­å»º"><a href="#åº•ç›˜æ­å»º" class="headerlink" title="åº•ç›˜æ­å»º"></a>åº•ç›˜æ­å»º</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        å‚æ•°</span></span><br><span class="line"><span class="comment">            å½¢çŠ¶:åœ†æŸ± </span></span><br><span class="line"><span class="comment">            åŠå¾„:10     cm </span></span><br><span class="line"><span class="comment">            é«˜åº¦:8      cm </span></span><br><span class="line"><span class="comment">            ç¦»åœ°:1.5    cm</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_link&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;0.1&quot;</span> <span class="attr">length</span>=<span class="string">&quot;0.08&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.8 0.3 0.1 0.5&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;base_link2base_footprint&quot;</span> <span class="attr">type</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_footprint&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0.055&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>joint</p>
<p>urdf ä¸­çš„ joint æ ‡ç­¾ç”¨äºæè¿°æœºå™¨äººå…³èŠ‚çš„è¿åŠ¨å­¦å’ŒåŠ¨åŠ›å­¦å±æ€§ï¼Œè¿˜å¯ä»¥æŒ‡å®šå…³èŠ‚è¿åŠ¨çš„å®‰å…¨æé™ï¼Œæœºå™¨äººçš„ä¸¤ä¸ªéƒ¨ä»¶(åˆ†åˆ«ç§°ä¹‹ä¸º parent link ä¸ child link)ä»¥â€å…³èŠ‚â€çš„å½¢å¼ç›¸è¿æ¥ï¼Œä¸åŒçš„å…³èŠ‚æœ‰ä¸åŒçš„è¿åŠ¨å½¢å¼: æ—‹è½¬ã€æ»‘åŠ¨ã€å›ºå®šã€æ—‹è½¬é€Ÿåº¦ã€æ—‹è½¬è§’åº¦é™åˆ¶â€¦.,æ¯”å¦‚:å®‰è£…åœ¨åº•åº§ä¸Šçš„è½®å­å¯ä»¥360åº¦æ—‹è½¬ï¼Œè€Œæ‘„åƒå¤´åˆ™å¯èƒ½æ˜¯å®Œå…¨å›ºå®šåœ¨åº•åº§ä¸Šã€‚jointæ ‡ç­¾å¯¹åº”çš„æ•°æ®åœ¨æ¨¡å‹ä¸­æ˜¯ä¸å¯è§çš„</p>
<p>å±æ€§</p>
<blockquote>
<ul>
<li><p>name â€”-&gt; ä¸ºå…³èŠ‚å‘½å</p>
</li>
<li><p>type â€”-&gt; å…³èŠ‚è¿åŠ¨å½¢å¼ </p>
</li>
<li><ul>
<li>continuous: æ—‹è½¬å…³èŠ‚ï¼Œå¯ä»¥ç»•å•è½´æ— é™æ—‹è½¬</li>
</ul>
</li>
<li><ul>
<li>revolute: æ—‹è½¬å…³èŠ‚ï¼Œç±»ä¼¼äº continues,ä½†æ˜¯æœ‰æ—‹è½¬è§’åº¦é™åˆ¶</li>
</ul>
</li>
<li><ul>
<li>prismatic: æ»‘åŠ¨å…³èŠ‚ï¼Œæ²¿æŸä¸€è½´çº¿ç§»åŠ¨çš„å…³èŠ‚ï¼Œæœ‰ä½ç½®æé™</li>
</ul>
</li>
<li><ul>
<li>planer: å¹³é¢å…³èŠ‚ï¼Œå…è®¸åœ¨å¹³é¢æ­£äº¤æ–¹å‘ä¸Šå¹³ç§»æˆ–æ—‹è½¬</li>
</ul>
</li>
<li><ul>
<li>floating: æµ®åŠ¨å…³èŠ‚ï¼Œå…è®¸è¿›è¡Œå¹³ç§»ã€æ—‹è½¬è¿åŠ¨</li>
</ul>
</li>
<li><ul>
<li>fixed: å›ºå®šå…³èŠ‚ï¼Œä¸å…è®¸è¿åŠ¨çš„ç‰¹æ®Šå…³èŠ‚</li>
</ul>
</li>
</ul>
</blockquote>
<p>å­æ ‡ç­¾</p>
<blockquote>
<ul>
<li><p>parent(å¿…éœ€çš„)<br>parent linkçš„åå­—æ˜¯ä¸€ä¸ªå¼ºåˆ¶çš„å±æ€§ï¼š </p>
</li>
<li><ul>
<li>link:çˆ¶çº§è¿æ†çš„åå­—ï¼Œæ˜¯è¿™ä¸ªlinkåœ¨æœºå™¨äººç»“æ„æ ‘ä¸­çš„åå­—ã€‚</li>
</ul>
</li>
<li><p>child(å¿…éœ€çš„)<br>child linkçš„åå­—æ˜¯ä¸€ä¸ªå¼ºåˆ¶çš„å±æ€§ï¼š </p>
</li>
<li><ul>
<li>link:å­çº§è¿æ†çš„åå­—ï¼Œæ˜¯è¿™ä¸ªlinkåœ¨æœºå™¨äººç»“æ„æ ‘ä¸­çš„åå­—ã€‚</li>
</ul>
</li>
<li><p>origin </p>
</li>
<li><ul>
<li>å±æ€§: xyz=å„è½´çº¿ä¸Šçš„åç§»é‡ rpy=å„è½´çº¿ä¸Šçš„åç§»å¼§åº¦ã€‚</li>
</ul>
</li>
<li><p>axis </p>
</li>
<li><ul>
<li>å±æ€§: xyzç”¨äºè®¾ç½®å›´ç»•å“ªä¸ªå…³èŠ‚è½´è¿åŠ¨ã€‚</li>
</ul>
</li>
</ul>
</blockquote>
</blockquote>
<h1 id="æ·»åŠ é©±åŠ¨è½®"><a href="#æ·»åŠ é©±åŠ¨è½®" class="headerlink" title="æ·»åŠ é©±åŠ¨è½®"></a>æ·»åŠ é©±åŠ¨è½®</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ·»åŠ é©±åŠ¨è½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        é©±åŠ¨è½®æ˜¯ä¾§ç¿»çš„åœ†æŸ±</span></span><br><span class="line"><span class="comment">        å‚æ•°</span></span><br><span class="line"><span class="comment">            åŠå¾„: 3.25 cm</span></span><br><span class="line"><span class="comment">            å®½åº¦: 1.5  cm</span></span><br><span class="line"><span class="comment">            é¢œè‰²: é»‘è‰²</span></span><br><span class="line"><span class="comment">        å…³èŠ‚è®¾ç½®:</span></span><br><span class="line"><span class="comment">            x = 0</span></span><br><span class="line"><span class="comment">            y = åº•ç›˜çš„åŠå¾„ + è½®èƒå®½åº¦ / 2</span></span><br><span class="line"><span class="comment">            z = ç¦»åœ°é—´è· + åº•ç›˜é•¿åº¦ / 2 - è½®èƒåŠå¾„ = 1.5 + 4 - 3.25 = 2.25(cm)</span></span><br><span class="line"><span class="comment">            axis = 0 1 0</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;left_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;0.0325&quot;</span> <span class="attr">length</span>=<span class="string">&quot;0.015&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;1.5705 0 0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.0 0.0 0.0 1.0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;left_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;left_wheel&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0.1 -0.0225&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;0 1 0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;right_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">&quot;0.0325&quot;</span> <span class="attr">length</span>=<span class="string">&quot;0.015&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;1.5705 0 0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.0 0.0 0.0 1.0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;right_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;right_wheel&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 -0.1 -0.0225&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;0 1 0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ·»åŠ ä¸‡å‘è½®"><a href="#æ·»åŠ ä¸‡å‘è½®" class="headerlink" title="æ·»åŠ ä¸‡å‘è½®"></a>æ·»åŠ ä¸‡å‘è½®</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ·»åŠ ä¸‡å‘è½®(æ”¯æ’‘è½®) --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        å‚æ•°</span></span><br><span class="line"><span class="comment">            å½¢çŠ¶: çƒä½“</span></span><br><span class="line"><span class="comment">            åŠå¾„: 0.75 cm</span></span><br><span class="line"><span class="comment">            é¢œè‰²: é»‘è‰²</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        å…³èŠ‚è®¾ç½®:</span></span><br><span class="line"><span class="comment">            x = è‡ªå®šä¹‰(åº•ç›˜åŠå¾„ - ä¸‡å‘è½®åŠå¾„) = 0.1 - 0.0075 = 0.0925(cm)</span></span><br><span class="line"><span class="comment">            y = 0</span></span><br><span class="line"><span class="comment">            z = åº•ç›˜é•¿åº¦ / 2 + ç¦»åœ°é—´è· / 2 = 0.08 / 2 + 0.015 / 2 = 0.0475 </span></span><br><span class="line"><span class="comment">            axis= 1 1 1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;front_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;0.0075&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.0 0.0 0.0 1.0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;front_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;front_wheel&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0.0925 0 -0.0475&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;1 1 1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;back_wheel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">&quot;0.0075&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">&quot;black&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">&quot;0.0 0.0 0.0 1.0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;back_wheel2base_link&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;back_wheel&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;-0.0925 0 -0.0475&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;1 1 1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ‰§è¡Œlaunchæ–‡ä»¶"><a href="#æ‰§è¡Œlaunchæ–‡ä»¶" class="headerlink" title="æ‰§è¡Œlaunchæ–‡ä»¶"></a>æ‰§è¡Œlaunchæ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~/catkin_ws$ roslaunch robot_simlink_rviz robot_urdf.launch </span><br><span class="line">... logging to /home/alvin/.ros/<span class="built_in">log</span>/429ebe1e-3ba0-11ec-9e19-e56937336ffc/roslaunch-ros-113111.log</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ åæ ‡ç³»å’Œæœºå™¨äººæ¨¡å‹,ç„¶åå°±å¯ä»¥çœ‹åˆ°æ­å»ºçš„å°è½¦æ¨¡å‹.</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿å­˜ç”Ÿæˆçš„rvizæ–‡ä»¶,ä»¥ä¾¿äºŒæ¬¡æ‰“å¼€åå¤æ·»åŠ å‚æ•°,File/save config asâ€¦</p>
<p>ä¿®æ”¹launchæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°† urdf æ–‡ä»¶å†…å®¹è®¾ç½®è¿›å‚æ•°æœåŠ¡å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">textfile</span>=<span class="string">&quot;$(find robot_simlink_rviz)/urdf/robot_urdf.urdf&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ rivz --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">type</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rviz_test&quot;</span> <span class="attr">args</span>=<span class="string">&quot;-d $(find robot_simlink_rviz)/config/robot_urdf.rviz&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨æœºå™¨äººçŠ¶æ€å’Œå…³èŠ‚çŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;robot_state_publisher&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">name</span>=<span class="string">&quot;joint_state_publisher&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ€è€ƒ:</strong></p>
<ul>
<li>ä¸ºä»€ä¹ˆä½¿ç”¨foot_print?</li>
</ul>
<blockquote>
<p>å› ä¸ºé»˜è®¤æƒ…å†µä¸‹: åº•ç›˜çš„ä¸­å¿ƒç‚¹ä½äºåœ°å›¾åŸç‚¹ä¸Šï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æœºå™¨äººæ¨¡å‹æ˜¯åŠæ²‰åˆ°åœ°ä¸‹çš„æƒ…å†µäº§ç”Ÿï¼Œå¯ä»¥ä½¿ç”¨çš„ä¼˜åŒ–ç­–ç•¥ï¼Œå°†åˆå§‹ link è®¾ç½®ä¸ºä¸€ä¸ªå°ºå¯¸æå°çš„ link(æ¯”å¦‚åŠå¾„ä¸º 0.001m çš„çƒä½“ï¼Œæˆ–è¾¹é•¿ä¸º 0.001m çš„ç«‹æ–¹ä½“)ï¼Œç„¶åå†åœ¨åˆå§‹ link ä¸Šæ·»åŠ åº•ç›˜ç­‰åˆšä½“ï¼Œè¿™æ ·å®ç°ï¼Œè™½ç„¶ä»ç„¶å­˜åœ¨åˆå§‹linkåŠæ²‰çš„ç°è±¡ï¼Œä½†æ˜¯åŸºæœ¬å¯ä»¥å¿½ç•¥äº†ã€‚è¿™ä¸ªåˆå§‹ link ä¸€èˆ¬ç§°ä¹‹ä¸º base_footprint</p>
</blockquote>
<ul>
<li>ä¸Šè¿°ä»£ç å®ç°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿæ¯”å¦‚å¤ç”¨æ€§ï¼</li>
</ul>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>ros</tag>
        <tag>æœºå™¨äººä»¿çœŸ</tag>
        <tag>URDF</tag>
        <tag>rviz</tag>
      </tags>
  </entry>
  <entry>
    <title>tfåæ ‡ç»¼åˆå®è·µ_ä¹Œé¾Ÿè·Ÿéš</title>
    <url>/posts/8395.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ¡ˆä¾‹æè¿°:ç¨‹åºå¯åŠ¨ä¹‹åˆ: äº§ç”Ÿä¸¤åªä¹Œé¾Ÿï¼Œä¸­é—´çš„ä¹Œé¾Ÿ(A) å’Œ å·¦ä¸‹ä¹Œé¾Ÿ(B), B ä¼šè‡ªåŠ¨è¿è¡Œè‡³Açš„ä½ç½®ï¼Œå¹¶ä¸”é”®ç›˜æ§åˆ¶æ—¶ï¼Œåªæ˜¯æ§åˆ¶ A çš„è¿åŠ¨ï¼Œä½†æ˜¯ B å¯ä»¥è·Ÿéš A è¿è¡Œ</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><strong>æ¡ˆä¾‹åˆ†æ:</strong> ä¹Œé¾Ÿè·Ÿéšå®ç°çš„æ ¸å¿ƒï¼Œæ˜¯ä¹Œé¾ŸAå’ŒBéƒ½è¦å‘å¸ƒç›¸å¯¹ä¸–ç•Œåæ ‡ç³»çš„åæ ‡ä¿¡æ¯ï¼Œç„¶åï¼Œè®¢é˜…åˆ°è¯¥ä¿¡æ¯éœ€è¦è½¬æ¢è·å–Aç›¸å¯¹äºBåæ ‡ç³»çš„ä¿¡æ¯ï¼Œæœ€åï¼Œå†ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯ï¼Œå¹¶æ§åˆ¶Bè¿åŠ¨ã€‚</p>
<ol>
<li>å¯åŠ¨ä¹Œé¾Ÿæ˜¾ç¤ºèŠ‚ç‚¹</li>
<li>åœ¨ä¹Œé¾Ÿæ˜¾ç¤ºçª—ä½“ä¸­ç”Ÿæˆä¸€åªæ–°çš„ä¹Œé¾Ÿ(éœ€è¦ä½¿ç”¨æœåŠ¡)</li>
<li>ç¼–å†™ä¸¤åªä¹Œé¾Ÿå‘å¸ƒåæ ‡ä¿¡æ¯çš„èŠ‚ç‚¹</li>
<li>ç¼–å†™è®¢é˜…èŠ‚ç‚¹è®¢é˜…åæ ‡ä¿¡æ¯å¹¶ç”Ÿæˆæ–°çš„ç›¸å¯¹å…³ç³»ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯</li>
</ol>
<h1 id="å‘½ä»¤å®ç°"><a href="#å‘½ä»¤å®ç°" class="headerlink" title="å‘½ä»¤å®ç°"></a>å‘½ä»¤å®ç°</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1.å®‰è£…</span></span><br><span class="line">$ sudo apt-get install ros-noetic-ros-tutorials ros-noetic-geometry-tutorials ros-noetic-rviz ros-noetic-rosbash ros-noetic-rqt-tf-tree</span><br><span class="line"><span class="comment">#2.è¿è¡Œ</span></span><br><span class="line">$ roslaunch turtle_tf turtle_tf_demo.launch</span><br></pre></td></tr></table></figure>
<h1 id="C-ä»£ç å®ç°"><a href="#C-ä»£ç å®ç°" class="headerlink" title="C++ä»£ç å®ç°"></a>C++ä»£ç å®ç°</h1><h2 id="å¯åŠ¨ä¸€åªä¹Œé¾Ÿ"><a href="#å¯åŠ¨ä¸€åªä¹Œé¾Ÿ" class="headerlink" title="å¯åŠ¨ä¸€åªä¹Œé¾Ÿ"></a>å¯åŠ¨ä¸€åªä¹Œé¾Ÿ</h2><p>é¦–å…ˆ,æˆ‘ä»¬çŸ¥é“å¯åŠ¨ä¹Œé¾ŸåŠå…¶é”®ç›˜æ§åˆ¶èŠ‚ç‚¹çš„å‘½ä»¤æœ‰ä¸‰ä¸ª,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„launchæ–‡ä»¶ä»£æ›¿:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;gui&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;key&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç”Ÿæˆç¬¬äºŒåªä¹Œé¾Ÿ"><a href="#ç”Ÿæˆç¬¬äºŒåªä¹Œé¾Ÿ" class="headerlink" title="ç”Ÿæˆç¬¬äºŒåªä¹Œé¾Ÿ"></a>ç”Ÿæˆç¬¬äºŒåªä¹Œé¾Ÿ</h2><p>å…¶æ¬¡,å¯åŠ¨ä¸€åªä¹Œé¾Ÿä¹‹å,æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æœåŠ¡:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~$ rosservice list</span><br><span class="line">/clear</span><br><span class="line">/gui/get_loggers</span><br><span class="line">/gui/set_logger_level</span><br><span class="line">/key/get_loggers</span><br><span class="line">/key/set_logger_level</span><br><span class="line">/<span class="built_in">kill</span></span><br><span class="line">/reset</span><br><span class="line">/rosout/get_loggers</span><br><span class="line">/rosout/set_logger_level</span><br><span class="line">/spawn</span><br><span class="line">/turtle1/set_pen</span><br><span class="line">/turtle1/teleport_absolute</span><br><span class="line">/turtle1/teleport_relative</span><br></pre></td></tr></table></figure>
<p>å› æ­¤,ç”Ÿæˆç¬¬äºŒåªä¹Œé¾Ÿè°ƒç”¨çš„æ˜¯æœåŠ¡æ¥åˆ›å»º,è¯é¢˜æ˜¯<code>/spawn</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~$ rosservice call /spawn <span class="string">&quot;x: 0.0</span></span><br><span class="line"><span class="string">y: 0.0</span></span><br><span class="line"><span class="string">theta: 0.0</span></span><br><span class="line"><span class="string">name: &#x27;&#x27;&quot;</span> </span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä½¿ç”¨å‘½ä»¤è°ƒç”¨æœåŠ¡æ¥åˆ›å»ºä¸€åªæ–°çš„ä¹Œé¾Ÿ:ä¹Œé¾Ÿçš„ä½ç½®ä¸º:(x,y),ä¹Œé¾Ÿå¤´çš„æœå‘ä¸ºthetaå¼§åº¦,ä¹Œé¾Ÿçš„åå­—æ˜¯â€nameâ€</p>
<p>é‚£ä¹ˆ,å¦‚ä½•ä½¿ç”¨ä»£ç å®ç°å‘¢?</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;turtlesim/Spawn.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;spawn_client&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line">    ros::ServiceClient client = nh.serviceClient&lt;turtlesim::Spawn&gt;(<span class="string">&quot;/spawn&quot;</span>);</span><br><span class="line">    client.<span class="built_in">waitForExistence</span>();</span><br><span class="line">    turtlesim::Spawn spawn;</span><br><span class="line">    spawn.request.x = <span class="number">2</span>;</span><br><span class="line">    spawn.request.y = <span class="number">2</span>;</span><br><span class="line">    spawn.request.theta = <span class="number">1.57</span>;</span><br><span class="line">    spawn.request.name = <span class="string">&quot;turtle2&quot;</span>;</span><br><span class="line"></span><br><span class="line">    client.<span class="built_in">call</span>(spawn); </span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œ<code>client.call(spawn);</code>è¿”å›çš„æ˜¯å¸ƒå°”,æˆ‘ä»¬ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸‹,å»åˆ¤æ–­æ˜¯ä¸æ˜¯æˆåŠŸçš„ç”Ÿæˆäº†ä¸€åªä¹Œé¾Ÿ.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setlocale</span>(LC_ALL,<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">bool</span> flag = client.<span class="built_in">call</span>(spawn); </span><br><span class="line">    <span class="keyword">if</span> (flag)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ROS_INFO</span>(<span class="string">&quot;æ–°ä¹Œé¾Ÿå·²ç»ç”Ÿæˆäº†!&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">ROS_INFO</span>(<span class="string">&quot;ç”Ÿæˆå¤±è´¥äº†....&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>CMakeLists.txtæ·»åŠ ç›¸å…³å‘½ä»¤</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">## Declare a C++ executable</span></span><br><span class="line"><span class="comment">## With catkin_make all packages are built within a single CMake context</span></span><br><span class="line"><span class="comment">## The recommended prefix ensures that target names across packages don&#x27;t collide</span></span><br><span class="line"><span class="keyword">add_executable</span>(turtlesim_follow_spawn src/turtlesim_follow_spawn.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Add cmake target dependencies of the executable</span></span><br><span class="line"><span class="comment">## same as for the library above</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(turtlesim_follow_spawn <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Specify libraries to link a library or executable target against</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(turtlesim_follow_spawn</span><br><span class="line">  <span class="variable">$&#123;catkin_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ä½ å¯ä»¥åœ¨è¿è¡Œç¬¬ä¸€æ­¥çš„launchæ–‡ä»¶çš„åŸºç¡€ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤,æµ‹è¯•æ˜¯å¦æˆåŠŸç”Ÿæˆä¹Œé¾Ÿ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~/catkin_ws$ rosrun tf_pratice turtlesim_follow_spawn </span><br><span class="line">[ INFO] [1635770123.695878217]: æ–°ä¹Œé¾Ÿå·²ç»ç”Ÿæˆäº†!</span><br></pre></td></tr></table></figure>
<h2 id="å‘å¸ƒä¸¤åªä¹Œé¾Ÿçš„åæ ‡ç³»ä¿¡æ¯"><a href="#å‘å¸ƒä¸¤åªä¹Œé¾Ÿçš„åæ ‡ç³»ä¿¡æ¯" class="headerlink" title="å‘å¸ƒä¸¤åªä¹Œé¾Ÿçš„åæ ‡ç³»ä¿¡æ¯"></a>å‘å¸ƒä¸¤åªä¹Œé¾Ÿçš„åæ ‡ç³»ä¿¡æ¯</h2><p>å¯ä»¥è®¢é˜…ä¹Œé¾Ÿçš„ä½å§¿ä¿¡æ¯ï¼Œç„¶åå†è½¬æ¢æˆåæ ‡ä¿¡æ¯ï¼Œä¸¤åªä¹Œé¾Ÿçš„å®ç°é€»è¾‘ç›¸åŒï¼Œåªæ˜¯è®¢é˜…çš„è¯é¢˜åç§°ï¼Œç”Ÿæˆçš„åæ ‡ä¿¡æ¯ç­‰ç¨æœ‰å·®å¼‚ï¼Œå¯ä»¥å°†å·®å¼‚éƒ¨åˆ†é€šè¿‡å‚æ•°ä¼ å…¥:</p>
<ul>
<li><p>è¯¥èŠ‚ç‚¹éœ€è¦å¯åŠ¨ä¸¤æ¬¡</p>
</li>
<li><p>æ¯æ¬¡å¯åŠ¨æ—¶éƒ½éœ€è¦ä¼ å…¥ä¹Œé¾ŸèŠ‚ç‚¹åç§°(ç¬¬ä¸€æ¬¡æ˜¯ turtle1 ç¬¬äºŒæ¬¡æ˜¯ turtle2)</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;turtlesim/Pose.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/transform_broadcaster.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/TransformStamped.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2/LinearMath/Quaternion.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿å­˜ä¹Œé¾Ÿåç§°</span></span><br><span class="line">std::string turtle_name;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doPose</span><span class="params">(<span class="keyword">const</span> turtlesim::Pose::ConstPtr &amp;pose)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ªå¹¿æ’­å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">static</span> tf2_ros::TransformBroadcaster broadcaster;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åæ ‡ç‚¹è§£æ</span></span><br><span class="line">    geometry_msgs::TransformStamped tfs;</span><br><span class="line">    tfs.header.frame_id = <span class="string">&quot;/world&quot;</span>;</span><br><span class="line">    tfs.header.stamp = ros::Time::<span class="built_in">now</span>();</span><br><span class="line">    tfs.child_frame_id = turtle_name.<span class="built_in">c_str</span>();</span><br><span class="line">    tfs.transform.translation.x = pose-&gt;x;</span><br><span class="line">    tfs.transform.translation.y = pose-&gt;y;</span><br><span class="line">    tfs.transform.translation.z = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ¬§æ‹‰è§’è½¬æ¢æˆå››å…ƒæ•°</span></span><br><span class="line">    tf2::Quaternion qnt;</span><br><span class="line">    qnt.<span class="built_in">setRPY</span>(<span class="number">0</span>,<span class="number">0</span>,pose-&gt;theta);</span><br><span class="line">    tfs.transform.rotation.x = qnt.<span class="built_in">getX</span>();</span><br><span class="line">    tfs.transform.rotation.y = qnt.<span class="built_in">getY</span>();</span><br><span class="line">    tfs.transform.rotation.z = qnt.<span class="built_in">getZ</span>();</span><br><span class="line">    tfs.transform.rotation.w = qnt.<span class="built_in">getW</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å¸ƒåæ ‡ä¿¡æ¯</span></span><br><span class="line">    broadcaster.<span class="built_in">sendTransform</span>(tfs);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;turtle_pose_pub&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line">    <span class="comment">//è§£æä¼ å…¥çš„å‘½åç©ºé—´</span></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ROS_ERROR</span>(<span class="string">&quot;è¯·ä¼ å…¥æ­£ç¡®çš„å‚æ•°&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        turtle_name = argv[<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">ROS_INFO</span>(<span class="string">&quot;ä¹Œé¾Ÿ %s åæ ‡å‘é€å¯åŠ¨&quot;</span>,turtle_name.<span class="built_in">c_str</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¢é˜…ä¹Œé¾Ÿçš„ä½å§¿ä¿¡æ¯</span></span><br><span class="line">    ros::Subscriber sub = nh.subscribe&lt;turtlesim::Pose&gt;(turtle_name + <span class="string">&quot;/pose&quot;</span>,<span class="number">1000</span>,doPose);</span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CMakeLists.txtæ·»åŠ ç›¸å…³å‘½ä»¤</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">## Declare a C++ executable</span></span><br><span class="line"><span class="comment">## With catkin_make all packages are built within a single CMake context</span></span><br><span class="line"><span class="comment">## The recommended prefix ensures that target names across packages don&#x27;t collide</span></span><br><span class="line"><span class="keyword">add_executable</span>(turtlesim_follow_pub src/turtlesim_follow_pub.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Add cmake target dependencies of the executable</span></span><br><span class="line"><span class="comment">## same as for the library above</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(turtlesim_follow_pub <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Specify libraries to link a library or executable target against</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(turtlesim_follow_pub</span><br><span class="line">  <span class="variable">$&#123;catkin_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ç»¼ä¸Š,æˆ‘ä»¬å¯ä»¥æ›´æ”¹åŸæœ¬çš„launchæ–‡ä»¶,ä½¿ç”¨è¯¥launchæ–‡ä»¶å®Œæˆä»¥ä¸Šä¸‰æ­¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ç¬¬ä¸€åªä¹Œé¾Ÿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;turtle1_gui&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;turtle1_key&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- äº§ç”Ÿç¬¬äºŒåªä¹Œé¾Ÿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;turtle2_spaw&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;tf_pratice&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_follow_spawn&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ä¸¤ä¸ªå‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;caster1&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;tf_pratice&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_follow_pub&quot;</span> <span class="attr">args</span>=<span class="string">&quot;turtle1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;caster2&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;tf_pratice&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_follow_pub&quot;</span> <span class="attr">args</span>=<span class="string">&quot;turtle2&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŸ¥çœ‹ä¸‹ä¸€ä¸‹å‘å¸ƒçš„è¯é¢˜</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~$ rostopic list </span><br><span class="line">/rosout</span><br><span class="line">/rosout_agg</span><br><span class="line">/tf</span><br><span class="line">/turtle1/cmd_vel</span><br><span class="line">/turtle1/color_sensor</span><br><span class="line">/turtle1/pose</span><br><span class="line">/turtle2/cmd_vel</span><br><span class="line">/turtle2/color_sensor</span><br><span class="line">/turtle2/pose</span><br></pre></td></tr></table></figure>
<h2 id="è®¢é˜…-è§£æåæ ‡ä¿¡æ¯å¹¶ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯"><a href="#è®¢é˜…-è§£æåæ ‡ä¿¡æ¯å¹¶ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯" class="headerlink" title="è®¢é˜…:è§£æåæ ‡ä¿¡æ¯å¹¶ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯"></a>è®¢é˜…:è§£æåæ ‡ä¿¡æ¯å¹¶ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯</h2><p>ç°åœ¨æˆ‘ä»¬å·²ç»è·å¾—ä¸¤ä¸ªä¹Œé¾Ÿçš„åæ ‡ç³»,ä»¥åŠç›¸å¯¹äºä¸–ç•Œçš„åæ ‡å…³ç³»,å¯ä»¥åœ¨rvizå†…æŸ¥çœ‹,ç°åœ¨éœ€è¦åšçš„æ˜¯æ€ä¹ˆæ‰èƒ½è®©ç”Ÿæˆçš„turtle2è·Ÿéšturtle1è¿åŠ¨.</p>
<p>é¦–å…ˆ,éœ€è¦è·å– turtle1 ç›¸å¯¹ turtle2 çš„åæ ‡ä¿¡æ¯,è¿™æ ·turtle2å°±å¯ä»¥æ‰¾åˆ°turtle1.</p>
<p>ç„¶å,turtleéœ€è¦å‘å¸ƒé€Ÿåº¦ä¿¡æ¯,æ ¹æ®æ•°å­¦è®¡ç®—å»å‘å¸ƒæ–°çš„é€Ÿåº¦æŒ‡ä»¤,è¿›è€Œå®ç°ä¹Œé¾Ÿè·Ÿéš</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/buffer.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/transform_listener.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/Twist.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/TransformStamped.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="comment">//åˆ›å»ºç›‘å¬å¯¹è±¡</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;turtle_pose_sub&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line">    tf2_ros::Buffer buffer;</span><br><span class="line">    <span class="function">tf2_ros::TransformListener <span class="title">listener</span><span class="params">(buffer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//éœ€è¦åˆ›å»ºå‘å¸ƒ /turtle2/cmd_vel çš„ publisher å¯¹è±¡</span></span><br><span class="line">    ros::Publisher pub = nh.advertise&lt;geometry_msgs::Twist&gt;(<span class="string">&quot;/turtle2/cmd_vel&quot;</span>,<span class="number">1000</span>);</span><br><span class="line">	<span class="comment">//æ³¨æ„è¿™é‡Œçš„å‘å¸ƒé¢‘ç‡å¿…é¡»åœ¨10ä»¥ä¸Š</span></span><br><span class="line">    <span class="function">ros::Rate <span class="title">rate</span><span class="params">(<span class="number">100</span>)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å…ˆè·å– turtle1 ç›¸å¯¹ turtle2 çš„åæ ‡ä¿¡æ¯</span></span><br><span class="line">            geometry_msgs::TransformStamped tfs = buffer.<span class="built_in">lookupTransform</span>(<span class="string">&quot;turtle2&quot;</span>,<span class="string">&quot;turtle1&quot;</span>,ros::<span class="built_in">Time</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ ¹æ®åæ ‡ä¿¡æ¯ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯ -- geometry_msgs/Twist.h</span></span><br><span class="line">            geometry_msgs::Twist twist;</span><br><span class="line">            twist.linear.x = <span class="number">0.5</span> * <span class="built_in">sqrt</span>(<span class="built_in">pow</span>(tfs.transform.translation.x,<span class="number">2</span>) </span><br><span class="line">                                        + <span class="built_in">pow</span>(tfs.transform.translation.y,<span class="number">2</span>));</span><br><span class="line">            twist.angular.z = <span class="number">4</span> * <span class="built_in">atan2</span>(tfs.transform.translation.y,tfs.transform.translation.x);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å‘å¸ƒé€Ÿåº¦ä¿¡æ¯ -- éœ€è¦æå‰åˆ›å»º publish å¯¹è±¡</span></span><br><span class="line">            pub.<span class="built_in">publish</span>(twist);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in"><span class="keyword">catch</span></span>(<span class="keyword">const</span> std::exception&amp; e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">ROS_INFO</span>(<span class="string">&quot;å‘ç”Ÿå¼‚å¸¸:%s&quot;</span>,e.<span class="built_in">what</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        rate.<span class="built_in">sleep</span>();</span><br><span class="line">        ros::<span class="built_in">spinOnce</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CMakeLists.txtæ·»åŠ ç›¸å…³å‘½ä»¤</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">## Declare a C++ executable</span></span><br><span class="line"><span class="comment">## With catkin_make all packages are built within a single CMake context</span></span><br><span class="line"><span class="comment">## The recommended prefix ensures that target names across packages don&#x27;t collide</span></span><br><span class="line"><span class="keyword">add_executable</span>(turtlesim_follow_sub src/turtlesim_follow_sub.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Add cmake target dependencies of the executable</span></span><br><span class="line"><span class="comment">## same as for the library above</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(turtlesim_follow_sub <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Specify libraries to link a library or executable target against</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(turtlesim_follow_sub</span><br><span class="line">  <span class="variable">$&#123;catkin_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ç»¼ä¸Š,æˆ‘ä»¬å¯ä»¥æ›´æ”¹åŸæœ¬çš„launchæ–‡ä»¶,ä½¿ç”¨è¯¥launchæ–‡ä»¶å®Œæˆä»¥ä¸Šå››æ­¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ç¬¬ä¸€åªä¹Œé¾Ÿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;turtle1_gui&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;turtle1_key&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- äº§ç”Ÿç¬¬äºŒåªä¹Œé¾Ÿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;turtle2_spaw&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;tf_pratice&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_follow_spawn&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ä¸¤ä¸ªå‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;caster1&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;tf_pratice&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_follow_pub&quot;</span> <span class="attr">args</span>=<span class="string">&quot;turtle1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;caster2&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;tf_pratice&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_follow_pub&quot;</span> <span class="attr">args</span>=<span class="string">&quot;turtle2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¢é˜…é€Ÿåº¦ä¿¡æ¯èŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;listener&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;tf_pratice&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_follow_sub&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å°±å¯ä»¥å®ç°è·Ÿéšäº†</p>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>ros</tag>
        <tag>tfåæ ‡å˜æ¢</tag>
        <tag>turtlesim</tag>
      </tags>
  </entry>
  <entry>
    <title>tfåæ ‡å˜æ¢å®è·µ_å¤šåæ ‡å˜æ¢</title>
    <url>/posts/46644.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ¡ˆä¾‹æè¿°:ç°æœ‰åæ ‡ç³»ç»Ÿï¼Œçˆ¶çº§åæ ‡ç³»ç»Ÿ world,ä¸‹æœ‰ä¸¤å­çº§ç³»ç»Ÿ son1ï¼Œson2ï¼Œson1 ç›¸å¯¹äº worldï¼Œä»¥åŠ son2 ç›¸å¯¹äº world çš„å…³ç³»æ˜¯å·²çŸ¥çš„ï¼Œæ±‚ son1åŸç‚¹åœ¨ son2ä¸­çš„åæ ‡ï¼Œåˆå·²çŸ¥åœ¨ son1ä¸­ä¸€ç‚¹çš„åæ ‡ï¼Œè¦æ±‚æ±‚å‡ºè¯¥ç‚¹åœ¨ son2 ä¸­çš„åæ ‡.å·²çŸ¥son1å’Œson2ç›¸å¯¹äºworldçš„åç§»é‡åˆ†åˆ«æ˜¯(0.2 0.8 0.3 0 0 0)å’Œ(0.5 0 0 0 0 0),æ±‚è§£ç‚¹ä¸€ç›´æŸä¸€ç‚¹åœ¨son1åæ ‡ç³»ä¸­çš„åæ ‡ä¸º(1,2,3),æ±‚è¯¥ç‚¹åœ¨son2ä¸­çš„åæ ‡?</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><strong>æ¡ˆä¾‹åˆ†æ:</strong></p>
<ol>
<li>é¦–å…ˆï¼Œéœ€è¦å‘å¸ƒ son1 ç›¸å¯¹äº worldï¼Œä»¥åŠ son2 ç›¸å¯¹äº world çš„åæ ‡æ¶ˆæ¯</li>
<li>ç„¶åï¼Œéœ€è¦è®¢é˜…åæ ‡å‘å¸ƒæ¶ˆæ¯ï¼Œå¹¶å–å‡ºè®¢é˜…çš„æ¶ˆæ¯ï¼Œå€ŸåŠ©äº tf2 å®ç° son1 å’Œ son2 çš„è½¬æ¢</li>
<li>æœ€åï¼Œè¿˜è¦å®ç°åæ ‡ç‚¹çš„è½¬æ¢</li>
</ol>
<h1 id="C-ä»£ç å®ç°"><a href="#C-ä»£ç å®ç°" class="headerlink" title="C++ä»£ç å®ç°"></a>C++ä»£ç å®ç°</h1><h2 id="å‘å¸ƒæ–¹"><a href="#å‘å¸ƒæ–¹" class="headerlink" title="å‘å¸ƒæ–¹"></a>å‘å¸ƒæ–¹</h2><p><strong>å‰æ:</strong> å‘å¸ƒä¸¤ä¸ªå­åæ ‡ç³»èŠ‚ç‚¹(ä¹Ÿæ˜¯é™æ€åæ ‡èŠ‚ç‚¹)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;tf2_ros&quot;</span> <span class="attr">name</span>=<span class="string">&quot;son1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;static_transform_publisher&quot;</span> <span class="attr">args</span>=<span class="string">&quot;0.2 0.8 0.3 0 0 0 /world /son1&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;tf2_ros&quot;</span> <span class="attr">name</span>=<span class="string">&quot;son2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;static_transform_publisher&quot;</span> <span class="attr">args</span>=<span class="string">&quot;0.5 0 0 0 0 0 /world /son2&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è®¢é˜…æ–¹"><a href="#è®¢é˜…æ–¹" class="headerlink" title="è®¢é˜…æ–¹"></a>è®¢é˜…æ–¹</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/buffer.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/transform_listener.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/TransformStamped.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/PointStamped.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_geometry_msgs/tf2_geometry_msgs.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;dynamic_pub&quot;</span>);</span><br><span class="line">    <span class="comment">//åˆ›å»ºç›‘å¬å¯¹è±¡,æ¥å—å‘å¸ƒçš„é™æ€åæ ‡</span></span><br><span class="line">    tf2_ros::Buffer buffer;</span><br><span class="line">    <span class="function">tf2_ros::TransformListener <span class="title">listener</span><span class="params">(buffer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">ros::Rate <span class="title">rate</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//è§£æson1ä¸­çš„ç‚¹ç›¸å¯¹äºson2çš„åæ ‡</span></span><br><span class="line">            geometry_msgs::TransformStamped tfs = buffer.<span class="built_in">lookupTransform</span>(<span class="string">&quot;son2&quot;</span>,<span class="string">&quot;son1&quot;</span>,ros::<span class="built_in">Time</span>(<span class="number">0</span>));</span><br><span class="line">            <span class="built_in">ROS_INFO</span>(<span class="string">&quot;Son1 ç›¸å¯¹äº Son2 çš„åæ ‡å…³ç³»:çˆ¶åæ ‡ç³»ID=%s,å­åæ ‡ç³»ID=%s,åæ ‡å…³ç³»:x=%.2f,y=%.2f,z=%.2f&quot;</span>,</span><br><span class="line">                    tfs.header.frame_id.<span class="built_in">c_str</span>(),tfs.child_frame_id.<span class="built_in">c_str</span>(),</span><br><span class="line">                    tfs.transform.translation.x,</span><br><span class="line">                    tfs.transform.translation.y,</span><br><span class="line">                    tfs.transform.translation.z);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åæ ‡ç‚¹è§£æ</span></span><br><span class="line">            geometry_msgs::PointStamped point_son1;</span><br><span class="line">            point_son1.header.frame_id = <span class="string">&quot;son1&quot;</span>;</span><br><span class="line">            point_son1.header.stamp = ros::Time::<span class="built_in">now</span>();</span><br><span class="line">            point_son1.point.x = <span class="number">1</span>;</span><br><span class="line">            point_son1.point.y = <span class="number">2</span>;</span><br><span class="line">            point_son1.point.z = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">            geometry_msgs::PointStamped point_son2;</span><br><span class="line">            <span class="comment">//PS:è°ƒç”¨ transform å¿…é¡»åŒ…å«å¤´æ–‡ä»¶&quot;tf2_geometry_msgs/tf2_geometry_msgs.h&quot;</span></span><br><span class="line">            point_son2 = buffer.<span class="built_in">transform</span>(point_son1,<span class="string">&quot;son2&quot;</span>);</span><br><span class="line">            <span class="built_in">ROS_INFO</span>(<span class="string">&quot;åœ¨ Son2 ä¸­çš„åæ ‡:x=%.2f,y=%.2f,z=%.2f&quot;</span>,</span><br><span class="line">                    point_son2.point.x,</span><br><span class="line">                    point_son2.point.y,</span><br><span class="line">                    point_son2.point.z);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in"><span class="keyword">catch</span></span>(<span class="keyword">const</span> std::exception&amp; e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">ROS_INFO</span>(<span class="string">&quot;å‘ç”Ÿå¼‚å¸¸:%s&quot;</span>,e.<span class="built_in">what</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        rate.<span class="built_in">sleep</span>();</span><br><span class="line">        ros::<span class="built_in">spinOnce</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h1><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">## Declare a C++ executable</span></span><br><span class="line"><span class="comment">## With catkin_make all packages are built within a single CMake context</span></span><br><span class="line"><span class="comment">## The recommended prefix ensures that target names across packages don&#x27;t collide</span></span><br><span class="line"><span class="keyword">add_executable</span>(dynamic_tf src/dynamic_tf.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Add cmake target dependencies of the executable</span></span><br><span class="line"><span class="comment">## same as for the library above</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(dynamic_tf <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Specify libraries to link a library or executable target against</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(dynamic_tf</span><br><span class="line">  <span class="variable">$&#123;catkin_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>ros</tag>
        <tag>tfåæ ‡å˜æ¢</tag>
      </tags>
  </entry>
  <entry>
    <title>tfåæ ‡å˜æ¢å®è·µ_åŠ¨æ€åæ ‡å˜æ¢</title>
    <url>/posts/50181.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ¡ˆä¾‹æè¿°:å¯åŠ¨ turtlesim_node,è¯¥èŠ‚ç‚¹ä¸­çª—ä½“æœ‰ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»(å·¦ä¸‹è§’ä¸ºåæ ‡ç³»åŸç‚¹)ï¼Œä¹Œé¾Ÿæ˜¯å¦ä¸€ä¸ªåæ ‡ç³»ï¼Œé”®ç›˜æ§åˆ¶ä¹Œé¾Ÿè¿åŠ¨ï¼Œå°†ä¸¤ä¸ªåæ ‡ç³»çš„ç›¸å¯¹ä½ç½®åŠ¨æ€å‘å¸ƒã€‚é€šä¿—çš„è¯´,æœ¬æ¡ˆä¾‹å°±æ˜¯å°†ç›¸å¯¹äºä¹Œé¾Ÿä½å§¿çš„åç§»é‡ä¸º(1,1,0)çš„åæ ‡ç‚¹åŠ¨æ€è½¬æ¢æˆä¸–ç•Œåæ ‡ç³».</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><strong>æ¡ˆä¾‹åˆ†æ:</strong></p>
<ol>
<li>ä¹Œé¾Ÿæœ¬èº«ä¸ä½†å¯ä»¥çœ‹ä½œåæ ‡ç³»ï¼Œä¹Ÿæ˜¯ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä¸€ä¸ªåæ ‡ç‚¹</li>
<li>è®¢é˜… turtle1/pose,å¯ä»¥è·å–ä¹Œé¾Ÿåœ¨ä¸–ç•Œåæ ‡ç³»çš„ xåæ ‡ã€yåæ ‡ã€åç§»é‡ä»¥åŠçº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦</li>
<li>å°† pose ä¿¡æ¯è½¬æ¢æˆ åæ ‡ç³»ç›¸å¯¹ä¿¡æ¯å¹¶å‘å¸ƒ</li>
</ol>
<p><strong>å®é™…æ¡ˆä¾‹:</strong></p>
<p>è¿™ä¸ªæ¡ˆä¾‹æ”¾åœ¨å®é™…ä¸­çš„åº”ç”¨å¯ä»¥ç†è§£ä¸ºè¿™æ ·,ä¸–ç•Œåæ ‡ç³»çœ‹æˆå¤§åœ°åæ ‡,å°†ä¹Œé¾Ÿçœ‹æˆæ˜¯å°è½¦çš„åœ°ç›˜çš„åæ ‡ç³»,å°†å°†å¯¹äºä¹Œé¾Ÿåç§»é‡ä¸º(1,1,0)çš„ç‚¹çœ‹æˆæ˜¯å°è½¦çš„é›·è¾¾,æˆ‘ä»¬å¦‚ä½•å°†ä¸åœè¿åŠ¨çš„é›·è¾¾çš„åæ ‡è½¬æ¢æˆä¸–ç•Œåæ ‡ç³»ä¸‹çš„åæ ‡å‘¢?</p>
<blockquote>
<p>æ˜¾ç„¶,é›·è¾¾å¯¹äºå°è½¦çš„åç§»é‡æ˜¯å§‹ç»ˆä¸å˜çš„,æ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°†é›·è¾¾åœ¨å°è½¦åæ ‡ç³»ä¸‹çš„åæ ‡è½¬æ¢æˆä¸–ç•Œåæ ‡;</p>
</blockquote>
<h1 id="C-ä»£ç å®ç°"><a href="#C-ä»£ç å®ç°" class="headerlink" title="C++ä»£ç å®ç°"></a>C++ä»£ç å®ç°</h1><h2 id="å‘å¸ƒè€…å®ç°"><a href="#å‘å¸ƒè€…å®ç°" class="headerlink" title="å‘å¸ƒè€…å®ç°"></a>å‘å¸ƒè€…å®ç°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;turtlesim/Pose.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/transform_broadcaster.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/TransformStamped.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2/LinearMath/Quaternion.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doPose</span><span class="params">(<span class="keyword">const</span> turtlesim::Pose::ConstPtr &amp;pose)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºå‘å¸ƒè€…å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">static</span> tf2_ros::TransformBroadcaster broadcaster;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åæ ‡ä¿¡æ¯</span></span><br><span class="line">    geometry_msgs::TransformStamped tfs;</span><br><span class="line">    tfs.header.stamp = ros::Time::<span class="built_in">now</span>();</span><br><span class="line">    tfs.header.frame_id = <span class="string">&quot;world&quot;</span>;</span><br><span class="line">    tfs.child_frame_id = <span class="string">&quot;turtle1&quot;</span>;</span><br><span class="line">    tfs.transform.translation.x = pose-&gt;x;</span><br><span class="line">    tfs.transform.translation.y = pose-&gt;y;</span><br><span class="line">    tfs.transform.translation.z = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ¬§æ‹‰è§’è½¬æ¢æˆå››å…ƒæ•°</span></span><br><span class="line">    tf2::Quaternion qtn;</span><br><span class="line">    qtn.<span class="built_in">setRPY</span>(<span class="number">0</span>,<span class="number">0</span>,pose-&gt;theta);</span><br><span class="line">    tfs.transform.rotation.x = qtn.<span class="built_in">getX</span>();</span><br><span class="line">    tfs.transform.rotation.y = qtn.<span class="built_in">getY</span>();</span><br><span class="line">    tfs.transform.rotation.z = qtn.<span class="built_in">getZ</span>();</span><br><span class="line">    tfs.transform.rotation.w = qtn.<span class="built_in">getW</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å¸ƒåæ ‡</span></span><br><span class="line">    broadcaster.<span class="built_in">sendTransform</span>(tfs);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è®¢é˜…ä¹Œé¾Ÿçš„ä½å§¿</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;turtle_pose_sub&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line">    ros::Subscriber sub = nh.subscribe&lt;turtlesim::Pose&gt;(<span class="string">&quot;/turtle1/pose&quot;</span>,<span class="number">100</span>,doPose);</span><br><span class="line"></span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="è®¢é˜…æ–¹å®ç°"><a href="#è®¢é˜…æ–¹å®ç°" class="headerlink" title="è®¢é˜…æ–¹å®ç°"></a>è®¢é˜…æ–¹å®ç°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/buffer.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/transform_listener.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/PointStamped.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_geometry_msgs/tf2_geometry_msgs.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="comment">//åˆ›å»ºç›‘å¬è€…å¯¹è±¡</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;turtle_sub&quot;</span>);</span><br><span class="line">    tf2_ros::Buffer buffer;</span><br><span class="line">    <span class="function">tf2_ros::TransformListener <span class="title">listener</span><span class="params">(buffer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">ros::Rate <span class="title">rate</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å®šä¹‰ä»»æ„ç‚¹åæ ‡åœ¨turtle1ä¸‹çš„åæ ‡</span></span><br><span class="line">        geometry_msgs::PointStamped point_turtle;</span><br><span class="line">        point_turtle.header.frame_id = <span class="string">&quot;turtle1&quot;</span>;</span><br><span class="line">        point_turtle.header.stamp = ros::<span class="built_in">Time</span>();</span><br><span class="line">        point_turtle.point.x = <span class="number">1</span>; </span><br><span class="line">        point_turtle.point.y = <span class="number">1</span>;</span><br><span class="line">        point_turtle.point.z = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å°†turtleåæ ‡ä¸‹çš„ç‚¹çš„åæ ‡,è½¬æ¢æˆworldåæ ‡ä¸‹çš„åæ ‡</span></span><br><span class="line">            geometry_msgs::PointStamped point_world;</span><br><span class="line">            point_world = buffer.<span class="built_in">transform</span>(point_turtle,<span class="string">&quot;world&quot;</span>);</span><br><span class="line">            <span class="built_in">ROS_INFO</span>(<span class="string">&quot;åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(%.2f,%.2f,%.2f)&quot;</span>,</span><br><span class="line">                     point_world.point.x,</span><br><span class="line">                     point_world.point.y,</span><br><span class="line">                     point_world.point.z);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in"><span class="keyword">catch</span></span>(<span class="keyword">const</span> std::exception&amp; e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// std::cerr &lt;&lt; e.what() &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">            <span class="built_in">ROS_INFO</span>(<span class="string">&quot;å‘ç”Ÿå¼‚å¸¸.....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        ros::<span class="built_in">spinOnce</span>();</span><br><span class="line">        rate.<span class="built_in">sleep</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">## Declare a C++ executable</span></span><br><span class="line"><span class="comment">## With catkin_make all packages are built within a single CMake context</span></span><br><span class="line"><span class="comment">## The recommended prefix ensures that target names across packages don&#x27;t collide</span></span><br><span class="line"><span class="keyword">add_executable</span>(turtlesim_tf_pub src/turtlesim_tf_pub.cpp)</span><br><span class="line"><span class="keyword">add_executable</span>(turtlesim_tf_sub src/turtlesim_tf_sub.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Add cmake target dependencies of the executable</span></span><br><span class="line"><span class="comment">## same as for the library above</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(turtlesim_tf_pub <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span>)</span><br><span class="line"><span class="keyword">add_dependencies</span>(turtlesim_tf_sub <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Specify libraries to link a library or executable target against</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(turtlesim_tf_pub</span><br><span class="line">  <span class="variable">$&#123;catkin_LIBRARIES&#125;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(turtlesim_tf_sub</span><br><span class="line">  <span class="variable">$&#123;catkin_LIBRA</span></span><br></pre></td></tr></table></figure>
<h1 id="æ‰§è¡Œ"><a href="#æ‰§è¡Œ" class="headerlink" title="æ‰§è¡Œ"></a>æ‰§è¡Œ</h1><p>å¯åŠ¨rocore</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">roscore</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨turtlesim guièŠ‚ç‚¹,é”®ç›˜æ§åˆ¶èŠ‚ç‚¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rosrun turtlesim turtlesim_node </span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rosrun turtlesim turtle_teleop_key </span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~/catkin_ws$ rosrun tf_pratice turtlesim_tf_pub </span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~/catkin_ws$ rosrun tf_pratice turtlesim_tf_sub </span><br><span class="line">[ INFO] [1635691363.394649902]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691364.394588314]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691365.394655574]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691366.394559019]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691367.394593083]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691368.394657894]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691369.394621326]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691370.394648743]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691371.394659086]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br><span class="line">[ INFO] [1635691372.394657664]: åæ ‡ç‚¹ç›¸å¯¹äº world çš„åæ ‡ä¸º:(6.54,6.54,0.00)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>ros</tag>
        <tag>tfåæ ‡å˜æ¢</tag>
        <tag>turtlesim</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub Pagesè®¾ç½®è‡ªå®šä¹‰åŸŸåå¤±æ•ˆ</title>
    <url>/posts/61723.html</url>
    <content><![CDATA[<p>åœ¨GitHub Pagesè®¾ç½®è‡ªå®šä¹‰åŸŸåä¹‹åï¼Œå‘ç°æ¯æ¬¡hexo d åéƒ½ä¼šå¤±æ•ˆï¼Œåˆè¦é‡æ–°è®¾ç½®ï¼Œå¤ªéº»çƒ¦äº†ã€‚<br><span id="more"></span><br>åªè¦åœ¨source ç›®å½•æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶CNAMEå°±å¥½<br>CNAME â€“ä¸å¸¦ä»»ä½•åç¼€ï¼Œè¿™å°±æ˜¯å…¨ç§°ï¼Œé‡Œé¢å†™çš„æ˜¯ä½ çš„åŸŸå<br>ç„¶åå°±okäº†ã€‚<br>æ€ä¹ˆpushéƒ½ä¸ç”¨å†å»GitHub Pagesè®¾ç½®äº†</p>
]]></content>
      <categories>
        <category>error</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>tfåæ ‡å˜æ¢å®è·µ_é™æ€åæ ‡å˜åŒ–</title>
    <url>/posts/41052.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æ¡ˆä¾‹æè¿°:ç°æœ‰ä¸€æœºå™¨äººæ¨¡å‹ï¼Œæ ¸å¿ƒæ„æˆåŒ…å«ä¸»ä½“ä¸é›·è¾¾ï¼Œå„å¯¹åº”ä¸€åæ ‡ç³»ï¼Œåæ ‡ç³»çš„åŸç‚¹åˆ†åˆ«ä½äºä¸»ä½“ä¸é›·è¾¾çš„ç‰©ç†ä¸­å¿ƒï¼Œå·²çŸ¥é›·è¾¾åŸç‚¹ç›¸å¯¹äºä¸»ä½“åŸç‚¹ä½ç§»å…³ç³»å¦‚ä¸‹: x=0.2 y=0.0 z=0.5ã€‚å½“å‰é›·è¾¾æ£€æµ‹åˆ°ä¸€éšœç¢ç‰©ï¼Œåœ¨é›·è¾¾åæ ‡ç³»ä¸­éšœç¢ç‰©çš„åæ ‡ä¸º (2.0 3.0 5.0),è¯·é—®ï¼Œè¯¥éšœç¢ç‰©ç›¸å¯¹äºä¸»ä½“çš„åæ ‡æ˜¯å¤šå°‘ï¼Ÿ</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p><strong>å®ç°åˆ†æ:</strong></p>
<ol>
<li>åæ ‡ç³»ç›¸å¯¹å…³ç³»ï¼Œå¯ä»¥é€šè¿‡å‘å¸ƒæ–¹å‘å¸ƒ</li>
<li>è®¢é˜…æ–¹ï¼Œè®¢é˜…åˆ°å‘å¸ƒçš„åæ ‡ç³»ç›¸å¯¹å…³ç³»ï¼Œå†ä¼ å…¥åæ ‡ç‚¹ä¿¡æ¯(å¯ä»¥å†™æ­»)ï¼Œç„¶åå€ŸåŠ©äº tf å®ç°åæ ‡å˜æ¢ï¼Œå¹¶å°†ç»“æœè¾“å‡º</li>
</ol>
<p><strong>å®ç°æµç¨‹:</strong></p>
<ol>
<li>æ–°å»ºåŠŸèƒ½åŒ…ï¼Œæ·»åŠ ä¾èµ–</li>
<li>ç¼–å†™å‘å¸ƒæ–¹å®ç°</li>
<li>ç¼–å†™è®¢é˜…æ–¹å®ç°</li>
<li>æ‰§è¡Œå¹¶æŸ¥çœ‹ç»“æœ</li>
</ol>
<h1 id="å‘½ä»¤å®ç°"><a href="#å‘½ä»¤å®ç°" class="headerlink" title="å‘½ä»¤å®ç°"></a>å‘½ä»¤å®ç°</h1><h2 id="å‘å¸ƒè€…å‘½ä»¤å®ç°"><a href="#å‘å¸ƒè€…å‘½ä»¤å®ç°" class="headerlink" title="å‘å¸ƒè€…å‘½ä»¤å®ç°"></a>å‘å¸ƒè€…å‘½ä»¤å®ç°</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rosrun tf2_ros static_transform_publisher 0.2 0 0.5 0 0 0 /baselink /laser</span><br></pre></td></tr></table></figure>
<p>è§£é‡Š:rosrun tf2_ros static_transform_publisher xåç§»é‡ yåç§»é‡ zåç§»é‡ zåèˆªè§’åº¦ yä¿¯ä»°è§’åº¦ xç¿»æ»šè§’åº¦ çˆ¶çº§åæ ‡ç³» å­çº§åæ ‡ç³»</p>
<h2 id="æŸ¥çœ‹å‘å¸ƒä¿¡æ¯"><a href="#æŸ¥çœ‹å‘å¸ƒä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹å‘å¸ƒä¿¡æ¯"></a>æŸ¥çœ‹å‘å¸ƒä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~/catkin_ws$ rostopic list</span><br><span class="line">/rosout</span><br><span class="line">/rosout_agg</span><br><span class="line">/tf_static</span><br><span class="line">/turtle1/cmd_vel</span><br><span class="line">/turtle1/color_sensor</span><br><span class="line">/turtle1/pose</span><br><span class="line">alvin@ros:~/catkin_ws$ rostopic <span class="built_in">echo</span> /tf_static</span><br><span class="line">transforms: </span><br><span class="line">  - </span><br><span class="line">    header: </span><br><span class="line">      seq: 1</span><br><span class="line">      stamp: </span><br><span class="line">        secs: 1635601530</span><br><span class="line">        nsecs: 483203886</span><br><span class="line">      frame_id: <span class="string">&quot;base_link&quot;</span></span><br><span class="line">    child_frame_id: <span class="string">&quot;laser&quot;</span></span><br><span class="line">    transform: </span><br><span class="line">      translation: </span><br><span class="line">        x: 0.2</span><br><span class="line">        y: 0.0</span><br><span class="line">        z: 0.5</span><br><span class="line">      rotation: </span><br><span class="line">        x: 0.0</span><br><span class="line">        y: 0.0</span><br><span class="line">        z: 0.0</span><br><span class="line">        w: 1.0</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h1 id="C-ä»£ç å®ç°"><a href="#C-ä»£ç å®ç°" class="headerlink" title="C++ä»£ç å®ç°"></a>C++ä»£ç å®ç°</h1><h2 id="å‘å¸ƒè€…å®ç°"><a href="#å‘å¸ƒè€…å®ç°" class="headerlink" title="å‘å¸ƒè€…å®ç°"></a>å‘å¸ƒè€…å®ç°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/static_transform_broadcaster.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/TransformStamped.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2/LinearMath/Quaternion.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;static_pub&quot;</span>);</span><br><span class="line">    <span class="comment">//åˆ›å»ºå‘å¸ƒè€…å¯¹è±¡</span></span><br><span class="line">    tf2_ros::StaticTransformBroadcaster broadcaster;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åæ ‡ä¿¡æ¯</span></span><br><span class="line">    geometry_msgs::TransformStamped tfs;</span><br><span class="line">    tfs.header.seq = <span class="number">1</span>;</span><br><span class="line">    tfs.header.stamp = ros::Time::<span class="built_in">now</span>();</span><br><span class="line">    tfs.header.frame_id = <span class="string">&quot;base_link&quot;</span>;</span><br><span class="line">    tfs.child_frame_id = <span class="string">&quot;laser&quot;</span>;</span><br><span class="line">    tfs.transform.translation.x = <span class="number">0.2</span>;</span><br><span class="line">    tfs.transform.translation.y = <span class="number">0</span>;</span><br><span class="line">    tfs.transform.translation.z = <span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ¬§æ‹‰è§’è½¬æ¢æˆå››å…ƒæ•°</span></span><br><span class="line">    tf2::Quaternion qtn;</span><br><span class="line">    qtn.<span class="built_in">setRPY</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    tfs.transform.rotation.x = qtn.<span class="built_in">getX</span>();</span><br><span class="line">    tfs.transform.rotation.y = qtn.<span class="built_in">getY</span>();</span><br><span class="line">    tfs.transform.rotation.z = qtn.<span class="built_in">getZ</span>();</span><br><span class="line">    tfs.transform.rotation.w = qtn.<span class="built_in">getW</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å‘å¸ƒåæ ‡</span></span><br><span class="line">    broadcaster.<span class="built_in">sendTransform</span>(tfs);</span><br><span class="line"></span><br><span class="line">    ros::<span class="built_in">spin</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="è®¢é˜…è€…å®ç°"><a href="#è®¢é˜…è€…å®ç°" class="headerlink" title="è®¢é˜…è€…å®ç°"></a>è®¢é˜…è€…å®ç°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/buffer.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_ros/transform_listener.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;geometry_msgs/PointStamped.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;tf2_geometry_msgs/tf2_geometry_msgs.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;static_sub&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºç›‘å¬è€…å¯¹è±¡</span></span><br><span class="line">    tf2_ros::Buffer buffer;</span><br><span class="line">    <span class="function">tf2_ros::TransformListener <span class="title">listener</span><span class="params">(buffer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">ros::Rate <span class="title">rate</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">while</span>(ros::<span class="built_in">ok</span>())&#123;</span><br><span class="line">        <span class="comment">//å®šä¹‰æŸåæ ‡ç‚¹åœ¨laseråæ ‡ç³»ä¸‹çš„å€¼</span></span><br><span class="line">        geometry_msgs::PointStamped point_laser;</span><br><span class="line">        point_laser.header.frame_id = <span class="string">&quot;laser&quot;</span>;</span><br><span class="line">        point_laser.header.stamp = ros::Time::<span class="built_in">now</span>();</span><br><span class="line">        point_laser.point.x = <span class="number">1</span> ;</span><br><span class="line">        point_laser.point.y = <span class="number">2</span> ;</span><br><span class="line">        point_laser.point.z = <span class="number">7.3</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å°†laseråæ ‡ç³»çš„ç‚¹çš„åæ ‡,è½¬æ¢æˆåŸºåæ ‡ç³»ä¸‹çš„åæ ‡</span></span><br><span class="line">            geometry_msgs::PointStamped point_base;</span><br><span class="line">            point_base = buffer.<span class="built_in">transform</span>(point_laser,<span class="string">&quot;base_link&quot;</span>);</span><br><span class="line">            <span class="built_in">ROS_INFO</span>(<span class="string">&quot;è½¬æ¢åçš„æ•°æ®:(%.2f,%.2f,%.2f),å‚è€ƒçš„åæ ‡ç³»æ˜¯:%s&quot;</span>,</span><br><span class="line">                     point_base.point.x,</span><br><span class="line">                     point_base.point.y,</span><br><span class="line">                     point_base.point.z,</span><br><span class="line">                     point_base.header.frame_id.<span class="built_in">c_str</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in"><span class="keyword">catch</span></span>(<span class="keyword">const</span> std::exception&amp; e)</span><br><span class="line">        &#123;</span><br><span class="line">             <span class="built_in">ROS_INFO</span>(<span class="string">&quot;ç¨‹åºå¼‚å¸¸.....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        rate.<span class="built_in">sleep</span>();</span><br><span class="line">        ros::<span class="built_in">spinOnce</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">## Declare a C++ executable</span></span><br><span class="line"><span class="comment">## With catkin_make all packages are built within a single CMake context</span></span><br><span class="line"><span class="comment">## The recommended prefix ensures that target names across packages don&#x27;t collide</span></span><br><span class="line"><span class="keyword">add_executable</span>(static_tf_pub src/static_tf_pub.cpp)</span><br><span class="line"><span class="keyword">add_executable</span>(static_tf_sub src/static_tf_sub.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Add cmake target dependencies of the executable</span></span><br><span class="line"><span class="comment">## same as for the library above</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(static_tf_pub <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span>)</span><br><span class="line"><span class="keyword">add_dependencies</span>(static_tf_sub <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Specify libraries to link a library or executable target against</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(static_tf_pub</span><br><span class="line">  <span class="variable">$&#123;catkin_LIBRARIES&#125;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(static_tf_sub</span><br><span class="line">  <span class="variable">$&#123;catkin_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="æ‰§è¡Œç»“æœ"><a href="#æ‰§è¡Œç»“æœ" class="headerlink" title="æ‰§è¡Œç»“æœ"></a>æ‰§è¡Œç»“æœ</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~/catkin_ws$ rosrun tf_pratice static_tf_pub </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alvin@ros:~/catkin_ws$ rosrun tf_pratice static_tf_sub </span><br><span class="line">[ INFO] [1635601858.503067357]: ç¨‹åºå¼‚å¸¸.....</span><br><span class="line">[ INFO] [1635601859.503191179]: è½¬æ¢åçš„æ•°æ®:(1.20,2.00,7.80),å‚è€ƒçš„åæ ‡ç³»æ˜¯:base_link</span><br><span class="line">[ INFO] [1635601860.503162320]: è½¬æ¢åçš„æ•°æ®:(1.20,2.00,7.80),å‚è€ƒçš„åæ ‡ç³»æ˜¯:base_link</span><br><span class="line">[ INFO] [1635601861.503066538]: è½¬æ¢åçš„æ•°æ®:(1.20,2.00,7.80),å‚è€ƒçš„åæ ‡ç³»æ˜¯:base_link</span><br><span class="line">[ INFO] [1635601862.503088002]: è½¬æ¢åçš„æ•°æ®:(1.20,2.00,7.80),å‚è€ƒçš„åæ ‡ç³»æ˜¯:base_link</span><br><span class="line">[ INFO] [1635601863.503098757]: è½¬æ¢åçš„æ•°æ®:(1.20,2.00,7.80),å‚è€ƒçš„åæ ‡ç³»æ˜¯:base_link</span><br><span class="line">[ INFO] [1635601864.503162287]: è½¬æ¢åçš„æ•°æ®:(1.20,2.00,7.80),å‚è€ƒçš„åæ ‡ç³»æ˜¯:base_link</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ROS</category>
      </categories>
      <tags>
        <tag>ros</tag>
        <tag>tfåæ ‡å˜æ¢</tag>
      </tags>
  </entry>
  <entry>
    <title>è§†è§‰SLAMç»¼è¿°ç®€ä»‹</title>
    <url>/posts/17633.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>æœ¬æ–‡é€‰&lt;æƒç¾é¦™ï¼Œæœ´æ¾æ˜Šï¼Œæå›½ï¼ è§†è§‰ ï¼³ï¼¬ï¼¡ï¼­ ç»¼è¿°&gt;ä¸€æ–‡,å¯¹æ•´ä¸ªè®ºæ–‡è¿›è¡Œæ¢³ç†,è®©è‡ªå·±å¯¹æ•´ä¸ªSLAMçš„æ¡†æ¶æœ‰ä¸€å®šçš„äº†è§£.</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<h1 id="è§†è§‰SLAMç»¼è¿°ç®€ä»‹"><a href="#è§†è§‰SLAMç»¼è¿°ç®€ä»‹" class="headerlink" title="è§†è§‰SLAMç»¼è¿°ç®€ä»‹"></a>è§†è§‰SLAMç»¼è¿°ç®€ä»‹</h1><blockquote>
<p>å‚è€ƒæ–‡çŒ®ï¼š</p>
<p>[1]æƒç¾é¦™ï¼Œæœ´æ¾æ˜Šï¼Œæå›½ï¼ è§†è§‰ ï¼³ï¼¬ï¼¡ï¼­ ç»¼è¿°ï¼»ï¼ªï¼½ï¼ æ™ºèƒ½ç³»ç»Ÿå­¦æŠ¥ï¼Œ ï¼’ï¼ï¼‘ï¼–ï¼Œ ï¼‘ï¼‘ï¼ˆï¼–ï¼‰ï¼š ï¼—ï¼–ï¼˜ï¼ï¼—ï¼—ï¼–ï¼</p>
</blockquote>
<h2 id="è§†è§‰SLAMæ–¹æ³•ä»‹ç»"><a href="#è§†è§‰SLAMæ–¹æ³•ä»‹ç»" class="headerlink" title="è§†è§‰SLAMæ–¹æ³•ä»‹ç»"></a>è§†è§‰SLAMæ–¹æ³•ä»‹ç»</h2><h3 id="è§†è§‰-SLAMçš„æ¦‚å¿µ"><a href="#è§†è§‰-SLAMçš„æ¦‚å¿µ" class="headerlink" title="è§†è§‰ SLAMçš„æ¦‚å¿µ"></a>è§†è§‰ SLAMçš„æ¦‚å¿µ</h3><p>è§†è§‰ SLAMæŒ‡çš„æ˜¯ç›¸æœºä½œä¸ºå”¯ä¸€çš„å¤–éƒ¨ä¼ æ„Ÿå™¨ï¼Œåœ¨è¿›è¡Œè‡ªèº«å®šä½çš„åŒæ—¶åˆ›å»ºç¯å¢ƒåœ°å›¾ã€‚ SLAMåˆ›å»ºçš„åœ°å›¾<br>çš„å¥½åå¯¹ä¹‹åè‡ªä¸»çš„å®šä½ã€è·¯å¾„è§„åˆ’ä»¥åŠå£éšœçš„æ€§èƒ½èµ·åˆ°ä¸€ä¸ªå†³å®šæ€§çš„ä½œç”¨ã€‚</p>
<h3 id="è§†è§‰SLAMçš„åˆ†ç±»"><a href="#è§†è§‰SLAMçš„åˆ†ç±»" class="headerlink" title="è§†è§‰SLAMçš„åˆ†ç±»"></a>è§†è§‰SLAMçš„åˆ†ç±»</h3><ul>
<li>å•ç›®è§†è§‰ SLAM (ä»…ç”¨ä¸€ä¸ªç›¸æœºä½œä¸ºå”¯ä¸€å¤–éƒ¨ä¼ æ„Ÿå™¨)</li>
<li>ç«‹ä½“è§†è§‰ SLAM (ä½¿ç”¨å¤šä¸ªç›¸æœºä½œä¸ºä¼ æ„Ÿå™¨)</li>
<li>RGB-D SLAM (åŸºäºå•ç›®ç›¸æœºä¸çº¢å¤–ä¼ æ„Ÿå™¨ç»“åˆæ„æˆçš„ä¼ æ„Ÿå™¨)</li>
</ul>
<h3 id="è§†è§‰SLAMçš„æ–¹æ³•ä»‹ç»"><a href="#è§†è§‰SLAMçš„æ–¹æ³•ä»‹ç»" class="headerlink" title="è§†è§‰SLAMçš„æ–¹æ³•ä»‹ç»"></a>è§†è§‰SLAMçš„æ–¹æ³•ä»‹ç»</h3><p>æ ¹æ®åˆ©ç”¨å›¾åƒä¿¡æ¯çš„ä¸åŒ</p>
<ul>
<li>åŸºäºç‰¹å¾çš„ SLAM æ–¹æ³•</li>
<li>direct SLAM æ–¹æ³•</li>
</ul>
<h4 id="åŸºäºç‰¹å¾çš„-SLAM-æ–¹æ³•"><a href="#åŸºäºç‰¹å¾çš„-SLAM-æ–¹æ³•" class="headerlink" title="åŸºäºç‰¹å¾çš„ SLAM æ–¹æ³•"></a>åŸºäºç‰¹å¾çš„ SLAM æ–¹æ³•</h4><h5 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h5><p>åŸºäºç‰¹å¾çš„ SLAM æ–¹æ³•æŒ‡çš„æ˜¯å¯¹è¾“å…¥çš„å›¾åƒè¿›è¡Œ<strong>ç‰¹å¾ç‚¹æ£€æµ‹åŠæå–</strong>ï¼Œå¹¶åŸºäº ï¼’âƒï¼¤ æˆ– ï¼“âƒï¼¤ çš„ç‰¹å¾åŒ¹é…<strong>è®¡ç®—ç›¸æœºä½å§¿åŠå¯¹ç¯å¢ƒ</strong>è¿›è¡Œå»ºå›¾ã€‚å¦‚æœå¯¹æ•´å¹…å›¾åƒè¿›è¡Œå¤„ç†ï¼Œåˆ™è®¡ç®—å¤æ‚åº¦å¤ªé«˜ï¼Œç”±äºç‰¹å¾åœ¨ä¿å­˜å›¾åƒé‡è¦ä¿¡æ¯çš„åŒæ—¶æœ‰æ•ˆå‡å°‘äº†è®¡ç®—é‡ï¼Œä»è€Œè¢«å¹¿æ³›ä½¿ç”¨ã€‚</p>
<h5 id="å‘å±•"><a href="#å‘å±•" class="headerlink" title="å‘å±•"></a>å‘å±•</h5><h6 id="å€ŸåŠ©äºæ»¤æ³¢å™¨å®ç°çš„å•ç›®è§†è§‰SLAM"><a href="#å€ŸåŠ©äºæ»¤æ³¢å™¨å®ç°çš„å•ç›®è§†è§‰SLAM" class="headerlink" title="å€ŸåŠ©äºæ»¤æ³¢å™¨å®ç°çš„å•ç›®è§†è§‰SLAM"></a>å€ŸåŠ©äº<strong>æ»¤æ³¢å™¨</strong>å®ç°çš„å•ç›®è§†è§‰SLAM</h6><ul>
<li><p>æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆextended Kalman filterï¼ŒEKFï¼‰</p>
<p><strong>åŸç†ï¼š</strong>åˆ©ç”¨æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨æ¥å®ç°åŒæ—¶å®šä½ä¸åœ°å›¾åˆ›å»ºï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯ä½¿ç”¨çŠ¶æ€å‘é‡æ¥å­˜å‚¨ç›¸æœºä½å§¿åŠåœ°å›¾ç‚¹çš„ä¸‰ç»´åæ ‡ï¼Œåˆ©ç”¨æ¦‚ç‡å¯†åº¦å‡½æ•°æ¥è¡¨ç¤ºä¸ç¡®å®šæ€§ï¼Œä»è§‚æµ‹æ¨¡å‹å’Œé€’å½’çš„è®¡ç®—ï¼Œæœ€ç»ˆè·å¾—æ›´æ–°çš„çŠ¶æ€å‘é‡çš„å‡å€¼å’Œæ–¹å·®ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong>ç”±äºEKFçš„å¼•è¿›ï¼ŒSLAMç®—æ³•ä¼šæœ‰è®¡ç®—å¤æ‚åº¦åŠç”±äºçº¿æ€§åŒ–è€Œå¸¦æ¥çš„ä¸ç¡®å®šæ€§é—®é¢˜ã€‚</p>
</li>
<li><p>æ— è¿¹å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆUnscented Kal-man filterï¼ŒUKFï¼‰</p>
<p>è¯¥æ–¹æ³•è™½ç„¶å¯¹ä¸ç¡®å®šæ€§æœ‰æ‰€æ”¹å–„ï¼Œä½†åŒæ—¶ä¹Ÿå¢åŠ äº†è®¡ç®—å¤æ‚åº¦ã€‚</p>
</li>
<li><p>Rao-Blackwellizedç²’å­æ»¤æ³¢ï¼ˆParticle filterï¼‰</p>
<p>è¯¥æ–¹æ³•é¿å…äº†çº¿æ€§åŒ–ï¼Œä¸”å¯¹ç›¸æœºçš„å¿«é€Ÿè¿åŠ¨æœ‰ä¸€å®šçš„å¼¹åŠ›ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯å®šä½ç²¾åº¦ï¼Œåˆ™éœ€è¦ä½¿ç”¨è¾ƒå¤šçš„ç²’å­ï¼Œä»è€Œå¤§å¤§æé«˜äº†è®¡ç®—å¤æ‚åº¦</p>
</li>
</ul>
<h6 id="åŸºäºå…³é”®å¸§çš„å•ç›®è§†è§‰SLAM"><a href="#åŸºäºå…³é”®å¸§çš„å•ç›®è§†è§‰SLAM" class="headerlink" title="åŸºäºå…³é”®å¸§çš„å•ç›®è§†è§‰SLAM"></a>åŸºäºå…³é”®å¸§çš„å•ç›®è§†è§‰SLAM</h6><ul>
<li><p>Parallel Tracking and Mapping for Small AR Workspacesï¼ˆPTAMï¼‰</p>
<p>è¯¥è®ºæ–‡æå‡ºäº†ä¸€ä¸ªç®€å•ã€æœ‰æ•ˆçš„æå–å…³é”®å¸§çš„æ–¹æ³•ï¼Œä¸”å°†å®šä½å’Œåˆ›å»ºåœ°å›¾åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„ä»»åŠ¡ï¼Œå¹¶åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸Šè¿›è¡Œã€‚</p>
</li>
<li><p>A Versatile and Accurate Monocular SLAM System</p>
<p>åœ¨å…³é”®å¸§çš„åŸºç¡€ä¸Šæå‡ºçš„ä¸€ä¸ªå•ç›®è§†è§‰ SLAM ç³»ç»Ÿï¼Œå°†æ•´ä¸ª SLAM è¿‡ç¨‹åˆ†ä¸ºå®šä½ã€åˆ›å»ºåœ°å›¾ã€é—­ç¯ ï¼“ä¸ªçº¿ç¨‹ï¼Œä¸”å¯¹è¿™ ï¼“ ä¸ªä»»åŠ¡ä½¿ç”¨ç›¸åŒçš„ ORB ç‰¹å¾ï¼Œä¸”å¼•è¿›æœ¬è´¨å›¾çš„æ¦‚å¿µæ¥åŠ é€Ÿé—­ç¯æ ¡æ­£è¿‡ç¨‹ã€‚</p>
</li>
</ul>
<h6 id="åŸºäºRGB-Dæ•°æ®çš„SLAM"><a href="#åŸºäºRGB-Dæ•°æ®çš„SLAM" class="headerlink" title="åŸºäºRGB-Dæ•°æ®çš„SLAM"></a>åŸºäºRGB-Dæ•°æ®çš„SLAM</h6><p>å¾®è½¯å…¬å¸æ¨å‡ºçš„Kinectç›¸æœºï¼Œèƒ½å¤ŸåŒæ—¶è·å¾—å›¾åƒä¿¡æ¯åŠæ·±åº¦ä¿¡æ¯ï¼Œä»è€Œç®€åŒ–äº†ä¸‰ç»´é‡å»ºçš„è¿‡ç¨‹ï¼Œä¸”ç”±äºä»·æ ¼ä¾¿å®œï¼ŒåŸºäºRGB_Dæ•°æ®çš„SLAMå¾—åˆ°äº†è¿…é€Ÿçš„å‘å±•ã€‚</p>
<p>ã€ŠRGB-D map-ping: using depth cameras for dense 3-D modeling of in-door environmentsã€‹æœ€æ—©æå‡ºçš„ä½¿ç”¨<br>RGB-Dç›¸æœºå¯¹å®¤å†…ç¯å¢ƒè¿›è¡Œä¸‰ç»´é‡å»ºçš„æ–¹æ³•ï¼Œåœ¨å½©è‰²å›¾åƒä¸­æå– SHIFç‰¹å¾å¹¶åœ¨æ·±åº¦å›¾åƒä¸ŠæŸ¥æ‰¾ç›¸åº”çš„æ·±åº¦ä¿¡æ¯ã€‚ç„¶åä½¿ç”¨RANSACæ–¹æ³•å¯¹3-Dç‰¹å¾ç‚¹è¿›è¡ŒåŒ¹é…å¹¶è®¡ç®—å‡ºç›¸åº”çš„åˆšä½“è¿åŠ¨å˜æ¢ï¼Œå†ä»¥æ­¤ä½œä¸ºICP (iterative closest pointï¼‰çš„åˆå§‹å€¼æ¥æ±‚å‡ºæ›´ç²¾ç¡®çš„ä½å§¿ã€‚</p>
<p><img src="https://gitee.com/LukeyAlvin/img_mk/raw/master/img/image-20211009165001747.png" alt="image-20211009165001747"></p>
<h4 id="ç›´æ¥çš„SLAM-æ–¹æ³•"><a href="#ç›´æ¥çš„SLAM-æ–¹æ³•" class="headerlink" title="ç›´æ¥çš„SLAM æ–¹æ³•"></a>ç›´æ¥çš„SLAM æ–¹æ³•</h4><h5 id="ç®€ä»‹-1"><a href="#ç®€ä»‹-1" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h5><p>ç›´æ¥çš„SLAMæ–¹æ³•æŒ‡çš„æ˜¯ç›´æ¥å¯¹<strong>åƒç´ ç‚¹çš„å¼ºåº¦</strong>è¿›è¡Œæ“ä½œï¼Œé¿å…äº†ç‰¹å¾ç‚¹çš„æå–ï¼Œè¯¥æ–¹æ³•èƒ½å¤Ÿä½¿ç”¨å›¾åƒçš„æ‰€æœ‰ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œæä¾›æ›´å¤šçš„ç¯å¢ƒå‡ ä½•ä¿¡æ¯ï¼Œæœ‰åŠ©äºå¯¹åœ°å›¾çš„åç»­ä½¿ç”¨ã€‚ä¸”å¯¹ç‰¹å¾è¾ƒå°‘çš„ç¯å¢ƒæœ‰æ›´é«˜çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚</p>
<h5 id="å‘å±•-1"><a href="#å‘å±•-1" class="headerlink" title="å‘å±•"></a>å‘å±•</h5><ul>
<li>ã€ŠReal-time dense geometry from a handheld cameraã€‹</li>
</ul>
<p>ç›¸æœºå®šä½æ–¹æ³•ä¾èµ–å›¾åƒçš„æ¯ä¸ªåƒç´ ç‚¹ï¼Œå³ç”¨ç¨ å¯†çš„å›¾åƒå¯¹å‡†æ¥è¿›è¡Œè‡ªèº«å®šä½ï¼Œå¹¶æ„å»ºå‡ºç¨ å¯†çš„3-Dåœ°å›¾ã€‚</p>
<ul>
<li>ã€ŠSemi-Dense Visual Odometry for a Monocular Camera ã€‹</li>
</ul>
<p>å¯¹å½“å‰å›¾åƒæ„å»ºåŠç¨ å¯†inverseæ·±åº¦åœ°å›¾ï¼Œå¹¶ä½¿ç”¨ç¨ å¯†å›¾åƒé…å‡†ï¼ˆdense image alignmentï¼‰æ³•è®¡ç®—ç›¸æœºä½å§¿ã€‚æ„å»ºåŠç¨ å¯†åœ°å›¾å³ä¼°è®¡å›¾åƒä¸­æ¢¯åº¦è¾ƒå¤§çš„æ‰€æœ‰åƒç´ çš„æ·±åº¦å€¼ï¼Œè¯¥æ·±åº¦å€¼è¢«è¡¨ç¤ºä¸ºé«˜æ–¯åˆ†å¸ƒï¼Œä¸”å½“æ–°çš„å›¾åƒåˆ°æ¥æ—¶ï¼Œè¯¥æ·±åº¦å€¼è¢«æ›´æ–°ã€‚</p>
<ul>
<li>ã€ŠDense tracking and mapping in real-timeã€‹</li>
</ul>
<p>å¯¹æ¯ä¸ªåƒç´ ç‚¹è¿›è¡Œæ¦‚ç‡çš„æ·±åº¦æµ‹é‡ï¼Œæœ‰æ•ˆé™ä½äº†ä½å§¿ä¼°è®¡çš„ä¸ç¡®å®šæ€§ã€‚</p>
<ul>
<li>ã€ŠFast semi-direct monocular visual odometry ã€‹</li>
</ul>
<p>æå‡ºäº†ä¸€ç§åŠç›´æ¥çš„å•ç›®è§†è§‰é‡Œç¨‹è®¡æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç›¸æ¯”äºç›´æ¥æ³•ä¸æ˜¯å¯¹æ•´å¹…å›¾åƒè¿›è¡Œç›´æ¥åŒ¹é…ä»è€Œè·å¾—ç›¸æœºä½å§¿ï¼Œè€Œæ˜¯é€šè¿‡åœ¨æ•´å¹…å›¾åƒä¸­æå–çš„å›¾åƒå—æ¥è¿›è¡Œä½å§¿çš„è·å–ï¼Œè¿™æ ·èƒ½å¤Ÿå¢å¼ºç®—æ³•çš„é²æ£’æ€§ã€‚</p>
<ul>
<li>ã€ŠLarge-Scale Direct Monocular SLAMã€‹</li>
</ul>
<p>ä¸ºäº†æ„å»ºç¨ å¯†çš„ä¸‰ç»´ç¯å¢ƒåœ°å›¾ï¼ŒEngelç­‰æå‡ºäº†LSD-SLAMç®—æ³•ï¼ˆlarge-scale direct SLAMï¼‰ï¼Œç›¸æ¯”ä¹‹å‰çš„ç›´æ¥çš„è§†è§‰é‡Œç¨‹è®¡æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨ä¼°è®¡é«˜å‡†ç¡®æ€§çš„ç›¸æœºä½å§¿çš„åŒæ—¶èƒ½å¤Ÿåˆ›å»ºå¤§è§„æ¨¡çš„ä¸‰ç»´ç¯å¢ƒåœ°å›¾ã€‚</p>
<ul>
<li>ã€ŠKinect-Fusion: Real-time dense surface mapping and trackingã€‹27</li>
</ul>
<p>æå‡ºäº†kinectèåˆçš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šè¿‡Kinectè·å–çš„æ·±åº¦å›¾åƒå¯¹æ¯å¸§å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ è¿›è¡Œæœ€å°åŒ–è·ç¦»æµ‹é‡è€Œè·å¾—ç›¸æœºä½å§¿ï¼Œä¸”èåˆæ‰€æœ‰æ·±åº¦å›¾åƒï¼Œä»è€Œè·å¾—å…¨å±€åœ°å›¾ä¿¡æ¯ã€‚</p>
<ul>
<li>ã€ŠA dense map building approach from spherical RGBD imagesã€‹28</li>
</ul>
<p>ä½¿ç”¨å›¾åƒåƒç´ ç‚¹çš„å…‰åº¦ä¿¡æ¯å’Œå‡ ä½•ä¿¡æ¯æ¥æ„é€ è¯¯å·®å‡½æ•°ï¼Œé€šè¿‡æœ€å°åŒ–è¯¯å·®å‡½æ•°è€Œè·å¾—ç›¸æœºä½å§¿ï¼Œä¸”åœ°å›¾é—®é¢˜è¢«å¤„ç†ä¸ºä½å§¿å›¾è¡¨ç¤ºã€‚</p>
<ul>
<li>ã€ŠDense visual SLAM for RGB-D camerasã€‹29</li>
</ul>
<p>è¿™æ˜¯è¾ƒå¥½çš„ç›´æ¥RGBD SLAMæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç»“åˆåƒç´ ç‚¹çš„å¼ºåº¦è¯¯å·®ä¸æ·±åº¦è¯¯å·®ä½œä¸ºè¯¯å·®å‡½æ•°ï¼Œé€šè¿‡æœ€å°åŒ–ä»£ä»·å‡½æ•°ï¼Œä»è€Œæ±‚å‡ºæœ€ä¼˜ç›¸æœºä½å§¿ï¼Œè¯¥è¿‡ç¨‹ç”±g20å®ç°ï¼Œå¹¶æå‡ºäº†åŸºäºç†µçš„å…³é”®å¸§æå–åŠé—­ç¯æ£€æ–¹æ³•ï¼Œä»è€Œå¤§å¤§é™ä½äº†è·¯å¾„çš„è¯¯å·®ã€‚</p>
<ul>
<li>ã€ŠDistinctive image features from scale-invariant keypointsã€‹30</li>
</ul>
<h3 id="è§†è§‰-SLAMä¸»è¦æ ‡å¿—æ€§æˆæœ"><a href="#è§†è§‰-SLAMä¸»è¦æ ‡å¿—æ€§æˆæœ" class="headerlink" title="è§†è§‰ SLAMä¸»è¦æ ‡å¿—æ€§æˆæœ"></a>è§†è§‰ SLAMä¸»è¦æ ‡å¿—æ€§æˆæœ</h3><h4 id="MonoSLAM"><a href="#MonoSLAM" class="headerlink" title="MonoSLAM"></a>MonoSLAM</h4><blockquote>
<p>ã€ŠMono-SLAM: real-time single camera SLAMã€‹</p>
</blockquote>
<p>Andrew Davisonæå‡ºçš„ç¬¬1ä¸ªåŸºäºEKFæ–¹æ³•çš„å•ç›®SLAMï¼Œèƒ½å¤Ÿè¾¾åˆ°å®æ—¶ä½†æ˜¯ä¸èƒ½ç¡®å®šæ¼‚ç§»å¤šå°‘ï¼Œèƒ½å¤Ÿåœ¨æ¦‚ç‡æ¡†æ¶ä¸‹åœ¨çº¿åˆ›å»ºç¨€ç–åœ°å›¾ã€‚</p>
<h4 id="DTAM"><a href="#DTAM" class="headerlink" title="DTAM"></a>DTAM</h4><blockquote>
<p>ã€ŠDTAM: Dense tracking and mapping in real-timeã€‹</p>
</blockquote>
<p>2011å¹´æå‡ºçš„åŸºäºç›´æ¥æ³•çš„å•ç›®SLAMç®—æ³•ï¼Œè¯¥æ–¹æ³•é€šè¿‡å¸§ç‡çš„æ•´å¹…å›¾åƒå¯¹å‡†æ¥è·å¾—ç›¸å¯¹äºç¨ å¯†åœ°å›¾çš„ç›¸æœºçš„6ä¸ªè‡ªç”±åº¦ä½å§¿ï¼Œèƒ½å¤Ÿåœ¨GPUä¸Šè¾¾åˆ°å®æ—¶çš„æ•ˆæœã€‚</p>
<h4 id="PTAM"><a href="#PTAM" class="headerlink" title="PTAM"></a>PTAM</h4><blockquote>
<p>ã€ŠParallel Tracking and Mapping for Small AR Workspacesã€‹</p>
</blockquote>
<p>ç”±Georg Kleinæå‡ºçš„ç¬¬1ä¸ªç”¨å¤šçº¿ç¨‹å¤„ç†SLAMçš„ç®—æ³•ï¼Œå°†è·Ÿè¸ªå’Œå»ºå›¾åˆ†ä¸ºä¸¤ä¸ªå•ç‹¬çš„ä»»åŠ¡å¹¶åœ¨ä¸¤ä¸ªå¹³è¡Œçš„çº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚</p>
<h4 id="Ki-nectFusion"><a href="#Ki-nectFusion" class="headerlink" title="Ki-nectFusion"></a>Ki-nectFusion</h4><blockquote>
<p>ã€ŠKinect-Fusion: Real-time dense surface mapping and trackingã€‹</p>
</blockquote>
<p>ç¬¬1ä¸ªåŸºäºKinectçš„èƒ½åœ¨GPUä¸Šå®æ—¶æ„å»ºç¨ å¯†ä¸‰ç»´åœ°å›¾çš„ç®—æ³•ï¼Œè¯¥æ–¹æ³•ä»…ä½¿ç”¨Kinectç›¸æœºè·å–çš„æ·±åº¦ä¿¡æ¯å»è®¡ç®—ä¼ æ„Ÿå™¨çš„ä½å§¿ä»¥åŠæ„å»ºç²¾ç¡®çš„ç¯å¢ƒ3-Dåœ°å›¾æ¨¡å‹ã€‚</p>
<h4 id="LSD-SLAM"><a href="#LSD-SLAM" class="headerlink" title="LSD-SLAM"></a>LSD-SLAM</h4><blockquote>
<p>ã€ŠLSD-SLAM: Large-Scale Direct Monocular SLAMã€‹</p>
</blockquote>
<p>ç›´æ¥çš„å•ç›®SLAMæ–¹æ³•ï¼Œå³ç›´æ¥å¯¹å›¾åƒçš„åƒç´ ç‚¹è¿›è¡Œå¤„ç†ï¼Œç›¸æ¯”äºä¹‹å‰çš„åŸºäºç›´æ¥æ³•çš„å•ç›®è§†è§‰é‡Œç¨‹è®¡ï¼Œä¸ä»…èƒ½è®¡ç®—å‡ºè‡ªèº«çš„ä½å§¿ï¼Œè¿˜èƒ½æ„å»ºå‡ºå…¨å±€çš„åŠç¨ å¯†ä¸”ç²¾ç¡®çš„ç¯å¢ƒåœ°å›¾ã€‚å…¶ä¸­çš„è¿½è¸ªæ–¹æ³•ï¼Œç›´æ¥åœ¨sim3ä¸Šè¿›è¡Œæ“ä½œï¼Œä»è€Œèƒ½å¤Ÿå‡†ç¡®åœ°æ£€æµ‹å°ºåº¦æ¼‚ç§»ï¼Œå¯åœ¨CPUä¸Šå®æ—¶è¿è¡Œã€‚</p>
<h4 id="ORB-SLAM"><a href="#ORB-SLAM" class="headerlink" title="ORB_SLAM"></a>ORB_SLAM</h4><blockquote>
<p>ã€ŠORB-SLAM: A Versatile and Accurate Monocular SLAM  Systemã€‹</p>
</blockquote>
<p>2015å¹´å‡ºçš„æ¯”è¾ƒå®Œæ•´çš„åŸºäºå…³é”®å¸§çš„å•ç›®SLAMç®—æ³•ï¼Œå°†æ•´ä¸ªç³»ç»Ÿåˆ†ä¸ºè¿½è¸ªã€åœ°å›¾åˆ›å»ºã€é—­ç¯æ§åˆ¶3ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œä¸”ç‰¹å¾çš„æå–ä¸åŒ¹é…ã€ç¨€ç–åœ°å›¾çš„åˆ›å»ºã€ä½ç½®è¯†åˆ«éƒ½æ˜¯åŸºäºORBç‰¹å¾ï¼Œå…¶å®šä½ç²¾ç¡®åº¦å¾ˆé«˜ï¼Œä¸”å¯ä»¥å®æ—¶è¿è¡Œã€‚</p>
<h3 id="SLAMçš„ä¸»è¦ç ”ç©¶å®éªŒå®¤"><a href="#SLAMçš„ä¸»è¦ç ”ç©¶å®éªŒå®¤" class="headerlink" title="SLAMçš„ä¸»è¦ç ”ç©¶å®éªŒå®¤"></a>SLAMçš„ä¸»è¦ç ”ç©¶å®éªŒå®¤</h3><p>1ï¼‰<strong>è‹é»ä¸–è”é‚¦ç†å·¥å­¦é™¢çš„Autonomous System Lab</strong>:è¯¥å®éªŒå®¤åœ¨tangoé¡¹ç›®ä¸Šä¸è°·æ­Œåˆä½œï¼Œè´Ÿè´£è§†è§‰-<br>æƒ¯å¯¼çš„é‡Œç¨‹è®¡ï¼ŒåŸºäºè§†è§‰çš„å®šä½å’Œæ·±åº¦é‡å»ºç®—æ³•ã€‚<br>2ï¼‰<strong>æ˜å°¼è‹è¾¾å¤§å­¦çš„Multiple Autonomous Robotic Systems Laboratory</strong>ï¼Œä¸»è¦ç ”ç©¶å››è½´é£è¡Œå™¨å¯¼èˆªï¼Œåˆä½œå»ºå›¾ï¼ŒåŸºäºåœ°å›¾çš„å®šä½ï¼ŒåŠç¨ å¯†åœ°å›¾åˆ›å»ºç­‰ã€‚<br>3ï¼‰<strong>æ…•å°¼é»‘ç†å·¥å¤§å­¦çš„The Computer Vision Group</strong>ï¼Œä¸»è¦ç ”ç©¶åŸºäºå›¾åƒçš„3-Dé‡å»ºï¼Œæœºå™¨äººè§†è§‰è§†è§‰SLAMç­‰ã€‚</p>
<h2 id="è§†è§‰-SLAM-å…³é”®æ€§é—®é¢˜"><a href="#è§†è§‰-SLAM-å…³é”®æ€§é—®é¢˜" class="headerlink" title="è§†è§‰ SLAM å…³é”®æ€§é—®é¢˜"></a>è§†è§‰ SLAM å…³é”®æ€§é—®é¢˜</h2><h3 id="ç‰¹å¾æ£€æµ‹ä¸åŒ¹é…"><a href="#ç‰¹å¾æ£€æµ‹ä¸åŒ¹é…" class="headerlink" title="ç‰¹å¾æ£€æµ‹ä¸åŒ¹é…"></a>ç‰¹å¾æ£€æµ‹ä¸åŒ¹é…</h3><p>ç›®å‰ç‚¹ç‰¹å¾ä½¿ç”¨æœ€å¤š,ä½¿ç”¨æœ€å¤šçš„ç‚¹ç‰¹å¾å¦‚ä¸‹</p>
<ul>
<li><strong>SIFTï¼ˆscale invariant feature transformï¼‰ç‰¹å¾</strong></li>
</ul>
<p>SIFTç‰¹å¾å·²å‘å±•10å¤šå¹´ï¼Œä¸”è·å¾—äº†å·¨å¤§çš„æˆåŠŸã€‚SIFTç‰¹å¾å…·æœ‰å¯è¾¨åˆ«æ€§ï¼Œç”±äºå…¶æè¿°ç¬¦ç”¨é«˜ç»´å‘é‡ï¼ˆ128ç»´ï¼‰è¡¨ç¤ºï¼Œä¸”å…·æœ‰æ—‹è½¬ä¸å˜æ€§ã€å°ºåº¦ä¸å˜æ€§ã€æ”¾å°„å˜æ¢ä¸å˜æ€§ï¼Œå¯¹å™ªå£°å’Œå…‰ç…§å˜åŒ–ä¹Ÿæœ‰é²æ£’æ€§ã€‚[33-6]åœ¨è§†è§‰SLAMé‡Œä½¿ç”¨äº†SIFTç‰¹å¾ï¼Œä½†æ˜¯ç”±äºSIFTç‰¹å¾çš„å‘é‡ç»´æ•°å¤ªé«˜ï¼Œå¯¼è‡´æ—¶é—´å¤æ‚åº¦é«˜ã€‚</p>
<p>ã€ŠDistinctive image features from scale-invariant keypointsã€‹</p>
<ul>
<li><strong>SURTï¼ˆspeeded up robust featuresï¼‰[31]ç‰¹å¾</strong></li>
</ul>
<p>SURFç‰¹å¾å…·æœ‰å°ºåº¦ä¸å˜æ€§ã€æ—‹è½¬ä¸å˜æ€§ï¼Œä¸”ç›¸å¯¹äºSIFTç‰¹å¾çš„ç®—æ³•é€Ÿåº¦æé«˜äº†3åˆ°7å€ã€‚åœ¨æ–‡çŒ®[37-39]SURFè¢«ä½œä¸ºè§†è§‰SLAMçš„ç‰¹å¾æå–æ–¹æ³•ï¼Œä¸SIFTç‰¹å¾ç›¸æ¯”ï¼Œæ—¶é—´å¤æ‚åº¦æœ‰æ‰€é™ä½ã€‚å¯¹ä¸¤å¹…å›¾åƒçš„SIFTå’ŒSURFç‰¹å¾è¿›è¡ŒåŒ¹é…æ—¶é€šå¸¸æ˜¯è®¡ç®—ä¸¤ä¸ªç‰¹å¾å‘é‡ä¹‹é—´çš„æ¬§æ°è·ç¦»ï¼Œå¹¶ä»¥æ­¤ä½œä¸ºç‰¹å¾ç‚¹çš„ç›¸ä¼¼æ€§åˆ¤æ–­åº¦é‡ã€‚</p>
<p>ã€Šspee-ded up robust featuresã€‹</p>
<ul>
<li><strong>ORBï¼ˆoriented fast and rotated BRIEFï¼‰[32]ç‰¹å¾ã€‚</strong></li>
</ul>
<p>ORBç‰¹å¾æ˜¯FASTç‰¹å¾æ£€æµ‹ç®—å­ä¸BRIEFæè¿°ç¬¦çš„ç»“åˆï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šåšäº†ä¸€äº›æ”¹è¿›ã€‚ORBç‰¹å¾æœ€å¤§çš„ä¼˜ç‚¹æ˜¯è®¡ç®—é€Ÿåº¦å¿«ï¼Œæ˜¯SIFTç‰¹å¾çš„100å€ï¼ŒSURFç‰¹å¾çš„10å€ï¼Œå…¶åŸå› æ˜¯FASTç‰¹å¾æ£€æµ‹é€Ÿåº¦å°±å¾ˆå¿«ï¼Œå†åŠ ä¸ŠBRIEFæè¿°ç¬¦æ˜¯äºŒè¿›åˆ¶ä¸²ï¼Œå¤§å¤§ç¼©å‡äº†åŒ¹é…é€Ÿåº¦ï¼Œè€Œä¸”å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œä½†ä¸å…·å¤‡å°ºåº¦ä¸å˜æ€§ã€‚ORBç‰¹å¾åŒ¹é…æ˜¯ä»¥BRIEFäºŒè¿›åˆ¶æè¿°ç¬¦çš„æ±‰æ˜è·ç¦»ä¸ºç›¸ä¼¼æ€§åº¦é‡çš„ã€‚</p>
<p>ã€ŠAn efficient alternative to SIFT or SURFã€‹</p>
<p>åœ¨å¤§é‡åŒ…å«ç›´çº¿å’Œæ›²çº¿çš„ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ç‚¹ç‰¹å¾æ—¶ï¼Œç¯å¢ƒä¸­å¾ˆå¤šä¿¡æ¯éƒ½å°†è¢«é—å¼ƒï¼Œä¸ºäº†å¼¥è¡¥è¿™ä¸ªç¼ºé™·ï¼Œä»è€Œä¹Ÿæå‡ºäº†<strong>åŸºäºè¾¹ç‰¹å¾çš„è§†è§‰SLAM</strong>å’Œ<strong>åŸºäºåŒºåŸŸç‰¹å¾çš„è§†è§‰SLAM</strong>æ–¹æ³•ã€‚</p>
<blockquote>
<p>åŸºäºè¾¹ç‰¹å¾çš„è§†è§‰SLAMã€ŠEdge landmarks in monocular SLAMã€‹ã€ŠImproving the agility of keyframe-based SLAM ã€‹</p>
<p>åŸºäºåŒºåŸŸç‰¹å¾çš„è§†è§‰SLAMã€ŠUsing superpixels in monocular SLAMã€‹</p>
</blockquote>
<h3 id="å…³é”®å¸§çš„é€‰æ‹©"><a href="#å…³é”®å¸§çš„é€‰æ‹©" class="headerlink" title="å…³é”®å¸§çš„é€‰æ‹©"></a>å…³é”®å¸§çš„é€‰æ‹©</h3><p>å¸§å¯¹å¸§çš„å¯¹å‡†æ–¹æ³•ä¼šé€ æˆå¤§çš„ç´¯ç§¯æ¼‚æµ®ï¼Œç”±äºä½å§¿ä¼°è®¡è¿‡ç¨‹ä¸­æ€»ä¼šäº§ç”Ÿè¯¯å·®ã€‚ä¸ºäº†å‡å°‘å¸§å¯¹å¸§çš„å¯¹å‡†æ–¹æ³•å¸¦æ¥çš„è¯¯å·®ï¼ŒåŸºäºå…³é”®å¸§çš„SLAMæ–¹æ³•è¢«æå‡ºã€‚</p>
<p>ã€ŠParallel Tracking and Mapping for Small AR Workspacesã€‹</p>
<p>ã€ŠORB-SLAM: A Versatile and Accurate Monocular SLAM Systemã€‹</p>
<blockquote>
<p>æå‡ºæ»¡è¶³ä»¥ä¸‹å…¨éƒ¨æ¡ä»¶æ—¶è¯¥å¸§ä½œä¸ºå…³é”®å¸§æ’å…¥åˆ°åœ°å›¾é‡Œï¼šä»ä¸Šä¸€ä¸ªå…³é”®å¸§ç»è¿‡äº†nä¸ªå¸§ï¼›å½“å‰å¸§è‡³å°‘èƒ½çœ‹åˆ°nä¸ªåœ°å›¾ç‚¹ï¼Œä½å§¿ä¼°è®¡å‡†ç¡®æ€§è¾ƒé«˜ã€‚</p>
</blockquote>
<p>ã€ŠRGB-D Mapping: Using Depth Cameras for Dense 3-D Modeling of Indoor Environmentsã€‹</p>
<blockquote>
<p>å½“ä¸¤å¹…å›¾åƒçœ‹åˆ°çš„å…±åŒç‰¹å¾ç‚¹æ•°ä½äºä¸€å®šé˜ˆå€¼æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å…³é”®å¸§ã€‚</p>
</blockquote>
<p>ã€ŠDense visual SLAM for RGB-D cameras ã€‹</p>
<blockquote>
<p>æå‡ºäº†ä¸€ç§åŸºäºç†µçš„ç›¸ä¼¼æ€§çš„é€‰æ‹©å…³é”®å¸§çš„æ–¹æ³•ï¼Œç”±äºç®€å•çš„é˜ˆå€¼ä¸é€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œå¯¹æ¯ä¸€å¸§è®¡ç®—ä¸€ä¸ªç†µçš„ç›¸ä¼¼æ€§æ¯”ï¼Œå¦‚æœè¯¥å€¼å°äºä¸€ä¸ªé¢„å…ˆå®šä¹‰çš„é˜ˆå€¼ï¼Œåˆ™å‰ä¸€å¸§è¢«é€‰ä¸ºæ–°çš„å…³é”®å¸§ï¼Œå¹¶æ’å…¥åœ°å›¾é‡Œï¼Œè¯¥æ–¹æ³•å¤§å¤§å‡å°‘äº†ä½å§¿æ¼‚æµ®ã€‚</p>
</blockquote>
<h3 id="é—­ç¯æ£€æµ‹ï¼ˆloop-closingï¼‰æ–¹æ³•"><a href="#é—­ç¯æ£€æµ‹ï¼ˆloop-closingï¼‰æ–¹æ³•" class="headerlink" title="é—­ç¯æ£€æµ‹ï¼ˆloop closingï¼‰æ–¹æ³•"></a>é—­ç¯æ£€æµ‹ï¼ˆloop closingï¼‰æ–¹æ³•</h3><p>é—­ç¯æ£€æµ‹åŠä½ç½®è¯†åˆ«ï¼Œåˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦æ˜¯ä»¥å‰å·²è®¿é—®è¿‡çš„ç¯å¢ƒåŒºåŸŸã€‚ä¸‰ç»´é‡å»ºè¿‡ç¨‹ä¸­å¿…ç„¶ä¼šäº§ç”Ÿè¯¯å·®ç´¯ç§¯ï¼Œå®ç°é—­ç¯æ˜¯æ¶ˆé™¤çš„ä¸€ç§æ‰‹æ®µã€‚åœ¨ä½ç½®è¯†åˆ«ç®—æ³•ä¸­ï¼Œè§†è§‰æ˜¯ä¸»è¦çš„ä¼ æ„Ÿå™¨ã€‚</p>
<p>æ–‡çŒ®ã€ŠA compari-son of loop closing techniques in monocular SLAMã€‹å¯¹é—­ç¯æ£€æµ‹æ–¹æ³•è¿›è¡Œäº†æ¯”è¾ƒ</p>
<p>ä¸”å¾—å‡ºå›¾åƒå¯¹å›¾åƒçš„åŒ¹é…æ€§èƒ½<strong>ä¼˜äº</strong>åœ°å›¾å¯¹åœ°å›¾ï¼Œå›¾åƒå¯¹åœ°å›¾çš„åŒ¹é…æ–¹æ³•ã€‚</p>
<ul>
<li><p>å›¾åƒå¯¹å›¾åƒã€ŠTracking and mapping recognizable featuresã€‹ã€ŠAccelerated appearance-only SLAMã€‹</p>
<blockquote>
<p>å›¾åƒå¯¹å›¾åƒçš„åŒ¹é…æ–¹æ³•ä¸­ï¼Œè¯è¢‹ï¼ˆbag of wordsï¼‰æ–¹æ³•ç”±äºå…¶æœ‰æ•ˆæ€§å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨</p>
<p>ã€ŠScalable Recognition with a Vocabulary Treeã€‹</p>
</blockquote>
</li>
<li><p>åœ°å›¾å¯¹åœ°å›¾ã€ŠUnscented SLAM for large-scale outdoor environments ã€‹</p>
</li>
<li><p>å›¾åƒå¯¹åœ°å›¾ã€ŠProbabilistic Lo-calization and Mapping in the Space of Appearanceã€‹</p>
</li>
</ul>
<p>ã€ŠUnified loop closing and recovery for real time monocular SLAMã€‹</p>
<blockquote>
<p>å¯¹é‡å®šä½å’Œé—­ç¯æ£€æµ‹æå‡ºäº†ç»Ÿä¸€çš„æ–¹æ³•ï¼Œå®ƒä»¬ä½¿ç”¨åŸºäº16ç»´çš„SIFTç‰¹å¾çš„è¯å…¸æ–¹æ³•ä¸æ–­åœ°æœç´¢å·²è®¿é—®è¿‡çš„ä½ç½®ã€‚</p>
</blockquote>
<p>ã€ŠReal-time loop detec-tion with bags of binary words ã€‹ã€ŠAppearance-only SLAM at large scale with FAB-MAPã€‹</p>
<blockquote>
<p>ä½¿ç”¨åŸºäºSURFæè¿°ç¬¦çš„è¯å…¸æ–¹æ³•å»è¿›è¡Œé—­ç¯æ£€æµ‹SURFç‰¹å¾ï¼ŒSURFç‰¹å¾æå–éœ€è¦èŠ±è´¹400 mså»è¿›è¡Œã€‚</p>
</blockquote>
<p>ã€ŠDistinctive Image features from scale-invariant keypointsã€‹</p>
<blockquote>
<p>ä½¿ç”¨SIFTç‰¹å¾æ‰§è¡Œå…¨å±€å®šä½ï¼Œä¸”ç”¨KDæ ‘æ¥æ’åˆ—åœ°å›¾ç‚¹ã€‚</p>
</blockquote>
<p>ã€ŠBags of binary words for fast place recognition in image sequencesã€‹</p>
<blockquote>
<p>æå‡ºäº†ä¸€ç§ä½¿ç”¨åŸºäºFASTç‰¹å¾æ£€æµ‹ä¸BRIEFäºŒè¿›åˆ¶æè¿°ç¬¦è¯å…¸ï¼Œä¸”æ·»åŠ äº†ç›´æ¥ç´¢å¼•ï¼ˆdirect indexï¼‰ï¼Œç›´æ¥ç´¢å¼•çš„å¼•å…¥ä½¿å¾—èƒ½å¤Ÿæœ‰æ•ˆåœ°è·å¾—å›¾åƒä¹‹é—´çš„åŒ¹é…ç‚¹ï¼Œä»è€ŒåŠ å¿«é—­ç¯æ£€æµ‹çš„å‡ ä½•éªŒè¯ã€‚</p>
</blockquote>
<p>ã€ŠFast relocalisation andloop closing in keyframe-based SLAMã€‹</p>
<blockquote>
<p>ç”¨åŸºäºORBç‰¹å¾çš„è¯å…¸æ–¹æ³•è¿›è¡Œä½ç½®è¯†åˆ«ï¼Œç”±äºORBç‰¹å¾å…·æœ‰æ—‹è½¬ä¸å˜æ€§ä¸”èƒ½å¤„ç†å°ºåº¦å˜åŒ–ï¼Œè¯¥æ–¹æ³•èƒ½è¯†åˆ«ä½ç½®ä»ä¸åŒçš„è§†è§’ã€‚</p>
</blockquote>
<p>ã€ŠORB-SLAM: A Versatile and Accurate Monocular SLAM Systemã€‹</p>
<blockquote>
<p>è¯¥æ–‡çŒ®çš„ä½ç½®è¯†åˆ«æ–¹æ³•å»ºäºæ–‡çŒ®ã€ŠFast relocalisation andloop closing in keyframe-based SLAMã€‹çš„ä¸»è¦æ€æƒ³ä¸Šï¼Œå³ä½¿ç”¨åŸºäºORBç‰¹å¾çš„è¯å…¸æ–¹æ³•é€‰å‡ºå€™é€‰é—­ç¯ï¼Œå†é€šè¿‡ç›¸ä¼¼æ€§è®¡ç®—è¿›è¡Œé—­ç¯çš„å‡ ä½•éªŒè¯ã€‚</p>
</blockquote>
<h3 id="åœ°å›¾ä¼˜åŒ–"><a href="#åœ°å›¾ä¼˜åŒ–" class="headerlink" title="åœ°å›¾ä¼˜åŒ–"></a>åœ°å›¾ä¼˜åŒ–</h3><h4 id="ç®€ä»‹-2"><a href="#ç®€ä»‹-2" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>å¯¹äºä¸€ä¸ªåœ¨å¤æ‚ä¸”åŠ¨æ€çš„ç¯å¢ƒä¸‹å·¥ä½œçš„æœºå™¨äººï¼Œ3-Dåœ°å›¾çš„å¿«é€Ÿç”Ÿæˆæ˜¯éå¸¸é‡è¦çš„ï¼Œä¸”åˆ›å»ºçš„ç¯å¢ƒåœ°å›¾å¯¹ä¹‹åçš„å®šä½ã€è·¯å¾„è§„åˆ’åŠå£éšœçš„æ€§èƒ½èµ·åˆ°ä¸€ä¸ªå…³é”®æ€§çš„ä½œç”¨ï¼Œä»è€Œç²¾ç¡®çš„åœ°å›¾åˆ›å»ºä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h4><p>é—­ç¯æ£€æµ‹æˆåŠŸåï¼Œå¾€åœ°å›¾é‡Œæ·»åŠ é—­ç¯çº¦æŸï¼Œæ‰§è¡Œé—­ç¯æ ¡æ­£ã€‚é—­ç¯é—®é¢˜å¯ä»¥æè¿°ä¸º<strong>å¤§è§„æ¨¡çš„å…‰æŸå¹³å·®æ³•ï¼ˆbundle adjustmentï¼‰é—®é¢˜</strong>ï¼Œå³å¯¹ç›¸æœºä½å§¿åŠæ‰€æœ‰çš„åœ°å›¾ç‚¹3-Dåæ ‡è¿›è¡Œä¼˜åŒ–ï¼Œä½†æ˜¯è¯¥ä¼˜åŒ–è®¡ç®—å¤æ‚åº¦å¤ªé«˜ï¼Œä»è€Œå¾ˆéš¾å®ç°å®æ—¶ã€‚</p>
<h4 id="ä¼˜åŒ–ç®—æ³•"><a href="#ä¼˜åŒ–ç®—æ³•" class="headerlink" title="ä¼˜åŒ–ç®—æ³•"></a>ä¼˜åŒ–ç®—æ³•</h4><ul>
<li>é€šè¿‡ä½å§¿å›¾ä¼˜åŒ–ï¼ˆpose graph optimizationï¼‰æ–¹æ³•æ¥å¯¹é—­ç¯è¿›è¡Œä¼˜åŒ–</li>
</ul>
<p>é¡¶ç‚¹ä¸ºç›¸æœºä½å§¿ï¼Œè¾¹è¡¨ç¤ºä½å§¿ä¹‹é—´ç›¸å¯¹å˜æ¢çš„å›¾ç§°ä¸ºä½å§¿å›¾ï¼Œä½å§¿å›¾ä¼˜åŒ–å³å°†é—­ç¯è¯¯å·®æ²¿ç€å›¾è¿›è¡Œåˆ†é…ï¼Œå³å‡åŒ€åˆ†é…åˆ°å›¾ä¸Šçš„æ‰€æœ‰ä½å§¿ä¸Šã€‚å›¾ä¼˜åŒ–é€šå¸¸ç”±å›¾ä¼˜åŒ–æ¡†æ¶g2oï¼ˆgeneral graph optimizationï¼‰ã€ŠA general framework for graph optimization ã€‹é‡Œçš„LMï¼ˆleven-berg-marquardtï¼‰ç®—æ³•å®ç°ã€‚</p>
<p>ã€ŠDense visual SLAM for RGB-D camerasã€‹</p>
<blockquote>
<p>æå‡ºçš„RGB-D SLAMç®—æ³•çš„ä½å§¿å›¾é‡Œæ¯ä¸ªè¾¹å…·æœ‰ä¸€ä¸ªæƒé‡ï¼Œä»è€Œåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œä¸ç¡®å®šæ€§é«˜çš„è¾¹æ¯”ä¸ç¡®å®šæ€§ä½çš„è¾¹éœ€è¦å˜åŒ–æ›´å¤šå»è¡¥å¿è¯¯å·®ï¼Œå¹¶åœ¨æœ€åï¼Œå¯¹å›¾é‡Œçš„æ¯ä¸ªé¡¶ç‚¹è¿›è¡Œé¢å¤–çš„é—­ç¯æ£€æµ‹ä¸”é‡æ–°ä¼˜åŒ–æ•´ä¸ªå›¾ã€‚</p>
</blockquote>
<p>ã€ŠScale drift-aware large scale monocular SLAMã€‹</p>
<blockquote>
<p>åœ¨é—­ç¯æ ¡æ­£æ­¥éª¤ä½¿ç”¨äº†ä½å§¿å›¾ä¼˜åŒ–æŠ€æœ¯å»å®ç°æ—‹è½¬ï¼Œå¹³ç§»åŠå°ºåº¦æ¼‚æµ®çš„æœ‰æ•ˆæ ¡æ­£ã€‚</p>
</blockquote>
<p>ã€ŠORB-SLAM: A Versatile and Accurate Monocular SLAM Systemã€‹</p>
<blockquote>
<p>åœ¨é—­ç¯æ£€æµ‹æˆåŠŸåæ„å»ºäº†æœ¬è´¨å›¾ï¼Œå¹¶å¯¹è¯¥å›¾è¿›è¡Œä½å§¿å›¾ä¼˜åŒ–ã€‚æœ¬è´¨å›¾åŒ…å«æ‰€æœ‰çš„å…³é”®å¸§ï¼Œä½†ç›¸æ¯”äºcovisibilityå›¾ï¼Œå‡å°‘äº†å…³é”®å¸§ä¹‹é—´çš„è¾¹çº¦æŸã€‚æœ¬è´¨å›¾åŒ…å«ç”Ÿæˆæ ‘ã€é—­ç¯è¿æ¥åŠcovisibilityå›¾é‡Œæƒé‡è¾ƒå¤§çš„è¾¹ã€‚</p>
</blockquote>
<h2 id="è§†è§‰SLAMä¸»è¦å‘å±•è¶‹åŠ¿ä¸ç ”ç©¶çƒ­ç‚¹"><a href="#è§†è§‰SLAMä¸»è¦å‘å±•è¶‹åŠ¿ä¸ç ”ç©¶çƒ­ç‚¹" class="headerlink" title="è§†è§‰SLAMä¸»è¦å‘å±•è¶‹åŠ¿ä¸ç ”ç©¶çƒ­ç‚¹"></a>è§†è§‰SLAMä¸»è¦å‘å±•è¶‹åŠ¿ä¸ç ”ç©¶çƒ­ç‚¹</h2><h3 id="å¤šä¼ æ„Ÿå™¨èåˆ"><a href="#å¤šä¼ æ„Ÿå™¨èåˆ" class="headerlink" title="å¤šä¼ æ„Ÿå™¨èåˆ"></a>å¤šä¼ æ„Ÿå™¨èåˆ</h3><h4 id="ç®€ä»‹-3"><a href="#ç®€ä»‹-3" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>ç›¸æœºèƒ½å¤Ÿæ•æ‰åœºæ™¯çš„ä¸°å¯Œç»†èŠ‚ï¼Œè€Œæƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆinertial measurement unitï¼ŒIMUï¼‰æœ‰é«˜çš„å¸§ç‡ä¸”ç›¸å¯¹å°çš„èƒ½å¤Ÿè·å¾—å‡†ç¡®çš„çŸ­æ—¶é—´ä¼°è®¡ï¼Œè¿™ä¸¤ä¸ªä¼ æ„Ÿå™¨èƒ½å¤Ÿç›¸äº’äº’è¡¥ï¼Œä»è€Œä¸€èµ·ä½¿ç”¨èƒ½å¤Ÿè·å¾—æ›´å¥½çš„ç»“æœã€‚</p>
<h4 id="å‘å±•-2"><a href="#å‘å±•-2" class="headerlink" title="å‘å±•"></a>å‘å±•</h4><p>æœ€åˆçš„è§†è§‰ä¸IMUç»“åˆçš„ä½å§¿ä¼°è®¡æ˜¯ç”¨<strong>æ»¤æ³¢æ–¹æ³•</strong>è§£å†³çš„ï¼Œç”¨IMUçš„æµ‹é‡å€¼ä½œä¸ºé¢„æµ‹å€¼ï¼Œè§†è§‰çš„æµ‹é‡å€¼ç”¨äºæ›´æ–°ã€‚</p>
<p>ã€ŠA multi-state con-straint Kalman filter for vision-aided inertial navigationã€‹</p>
<blockquote>
<p>æå‡ºäº†ä¸€ç§åŸºäºEKFçš„IMUä¸å•ç›®è§†è§‰çš„å®æ—¶èåˆæ–¹æ³•ï¼Œæå‡ºä¸€ç§æµ‹é‡æ¨¡å‹èƒ½å¤Ÿè¡¨ç¤ºä¸€ä¸ªé™æ€ç‰¹å¾è¢«å¤šä¸ªç›¸æœºæ‰€è§‚å¯Ÿæ—¶çš„å‡ ä½•çº¦æŸï¼Œè¯¥æµ‹é‡æ¨¡å‹æ˜¯æœ€ä¼˜çš„ä¸”ä¸éœ€è¦åœ¨EKFçš„çŠ¶æ€å‘é‡é‡ŒåŒ…æ‹¬ç‰¹å¾çš„3-Dåæ ‡ã€‚</p>
</blockquote>
<p>ã€ŠA dual-layer estima-tor architecture for long-term localizationã€‹</p>
<blockquote>
<p>å°†èåˆé—®é¢˜åˆ†ä¸ºä¸¤ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œè¿ç»­å›¾åƒä¹‹é—´çš„æƒ¯æ€§æµ‹é‡å’Œç‰¹å¾è·Ÿè¸ªè¢«å±€éƒ¨åœ°åœ¨ç¬¬1ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œæä¾›é«˜é¢‘ç‡çš„ä½ç½®ä¼°è®¡ï¼Œç¬¬2ä¸ªçº¿ç¨‹åŒ…å«ä¸€ä¸ªé—´æ­‡å·¥ä½œçš„å…‰æŸæ³•å¹³å·®çš„è¿­ä»£ä¼°è®¡ï¼Œèƒ½å¤Ÿå‡å°‘çº¿æ€§è¯¯å·®çš„å½±å“ã€‚è®¸å¤šç»“æœéƒ½å·²è¯æ˜åœ¨å‡†ç¡®æ€§ä¸ŠåŸºäºä¼˜åŒ–çš„è§†è§‰SLAMä¼˜äºåŸºäºæ»¤æ³¢çš„SLAMæ–¹æ³•ã€‚</p>
</blockquote>
<p>ã€ŠKeyframe-based visual-inertial slam using nonlinear opti-mizationã€‹</p>
<blockquote>
<p>å°†IMUçš„è¯¯å·®ä»¥å…¨æ¦‚ç‡çš„å½¢å¼èåˆåˆ°è·¯æ ‡çš„é‡æŠ•å½±è¯¯å·®é‡Œï¼Œæ„æˆå°†è¢«ä¼˜åŒ–çš„è”åˆéçº¿æ€§è¯¯å·®å‡½æ•°ï¼Œå…¶ä¸­é€šè¿‡å…³é”®å¸§æ¥è¾¹ç¼˜åŒ–ä¹‹å‰çš„çŠ¶æ€å»ç»´æŒä¸€ä¸ªå›ºå®šå¤§å°çš„ä¼˜åŒ–çª—å£ï¼Œä¿è¯å®æ—¶æ“ä½œã€‚è€ƒè™‘åˆ°åŸºäºä¼˜åŒ–æ–¹æ³•çš„è§†è§‰-æƒ¯å¯¼å¯¼èˆªçš„è®¡ç®—å¤æ‚åº¦é—®é¢˜ï¼Œ</p>
</blockquote>
<p>å‚è€ƒ<a href="https://www">https://www</a>. google. com/a-tap/projecttango/.</p>
<blockquote>
<p>é€šè¿‡é¢„ç§¯åˆ†é€‰å‡ºçš„å…³é”®å¸§ä¹‹é—´çš„æƒ¯æ€§æµ‹é‡æ¥è¿›è¡Œè§£å†³ï¼Œé¢„ç§¯åˆ†èƒ½å¤Ÿç²¾ç¡®åœ°æ¦‚æ‹¬æ•°ç™¾ä¸ªæƒ¯æ€§æµ‹é‡åˆ°ä¸€ä¸ªå•ç‹¬çš„ç›¸å¯¹è¿åŠ¨çº¦æŸï¼Œè¿™ä¸ªé¢„ç§¯åˆ†çš„IMUæ¨¡å‹èƒ½è¢«å®Œç¾åœ°èåˆåˆ°è§†è§‰-æƒ¯æ€§çš„å› å­å›¾çš„æ¡†æ¶ä¸‹ã€‚è¯¥ç³»ç»Ÿçš„å®éªŒç»“æœè¡¨æ˜è¯¥ç³»ç»Ÿè¦æ¯”Googleçš„Tangoè¿˜è¦ç²¾ç¡®ã€‚</p>
</blockquote>
<h3 id="SLAMä¸æ·±åº¦å­¦ä¹ çš„ç»“åˆ"><a href="#SLAMä¸æ·±åº¦å­¦ä¹ çš„ç»“åˆ" class="headerlink" title="SLAMä¸æ·±åº¦å­¦ä¹ çš„ç»“åˆ"></a>SLAMä¸æ·±åº¦å­¦ä¹ çš„ç»“åˆ</h3><p>éšç€æ·±åº¦å­¦ä¹ åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å¤§æˆåŠŸï¼Œå¤§å®¶å¯¹æ·±åº¦å­¦ä¹ åœ¨æœºå™¨äººé¢†åŸŸçš„åº”ç”¨æœ‰å¾ˆå¤§çš„å…´è¶£ã€‚SLAMæ˜¯ä¸€ä¸ªå¤§ç³»ç»Ÿï¼Œé‡Œé¢æœ‰å¾ˆå¤šå­æ¨¡å—ï¼Œä¾‹å¦‚é—­ç¯æ£€æµ‹ï¼Œç«‹ä½“åŒ¹é…ç­‰ï¼Œéƒ½å¯é€šè¿‡æ·±åº¦å­¦ä¹ çš„ä½¿ç”¨æ¥è·å¾—æ›´ä¼˜çš„ç»“æœã€‚</p>
<h4 id="å‘å±•-3"><a href="#å‘å±•-3" class="headerlink" title="å‘å±•"></a>å‘å±•</h4><p>ã€ŠStereo matching by training a convolutional neural network to compare image patchesã€‹</p>
<blockquote>
<p>æå‡ºäº†ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„ç«‹ä½“åŒ¹é…æ–¹æ³•ï¼Œç”¨å·ç§¯ç¥ç»ç½‘ç»œæ¥å­¦ä¹ å°å›¾åƒå—é—´çš„ç›¸ä¼¼æ€§ï¼Œè¯¥å·ç§¯ç¥ç»ç½‘ç»œè¾“å‡ºçš„ç»“æœç”¨äºçº¿æ€§åŒ–ç«‹ä½“åŒ¹é…ä»£ä»·ã€‚</p>
</blockquote>
<p>ã€ŠOn the per-formance of ConvNet features for place recognitionã€‹</p>
<blockquote>
<p>é€šè¿‡æ•´åˆå±€éƒ¨æ•æ„Ÿæ•£åˆ—æ³•å’Œæ–°çš„è¯­ä¹‰æœå¯»ç©ºé—´åˆ’åˆ†çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå’Œå¤§çš„åœ°å›¾è¾¾åˆ°å®æ—¶çš„ä½ç½®è¯†åˆ«ã€‚</p>
</blockquote>
<p>ã€ŠExploring representation learning with CNNs for frame-to-frame egomotion estimationã€‹</p>
<blockquote>
<p>ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå»å­¦ä¹ è§†è§‰é‡Œç¨‹è®¡çš„æœ€ä½³çš„è§†è§‰ç‰¹å¾å’Œæœ€ä¼˜çš„ä¼°è®¡å™¨ã€‚</p>
</blockquote>
<p>ã€ŠModelling uncertainty in deep learning for camera relocalizationã€‹</p>
<blockquote>
<p>æå‡ºäº†ä¸€ç§é‡å®šä½ç³»ç»Ÿï¼Œä½¿ç”¨è´å¶æ–¯å·ç§¯ç¥ç»ç½‘ç»œä»å•ä¸ªå½©è‰²å›¾åƒè®¡ç®—å‡ºå…­ä¸ªè‡ªç”±åº¦çš„ç›¸æœºä½å§¿åŠå…¶ä¸ç¡®å®šæ€§ã€‚</p>
</blockquote>
<h2 id="è§†è§‰SLAMçš„ä¼˜ç¼ºç‚¹åˆ†æ"><a href="#è§†è§‰SLAMçš„ä¼˜ç¼ºç‚¹åˆ†æ" class="headerlink" title="è§†è§‰SLAMçš„ä¼˜ç¼ºç‚¹åˆ†æ"></a>è§†è§‰SLAMçš„ä¼˜ç¼ºç‚¹åˆ†æ</h2><h3 id="å•ç›®è§†è§‰SLAM"><a href="#å•ç›®è§†è§‰SLAM" class="headerlink" title="å•ç›®è§†è§‰SLAM"></a>å•ç›®è§†è§‰SLAM</h3><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>å•ç›®ç›¸æœºåº”ç”¨çµæ´»ã€ç®€å•ã€ä»·æ ¼ä½ã€‚</p>
<h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>å•ç›®è§†è§‰SLAMåœ¨æ¯ä¸ªæ—¶åˆ»åªèƒ½è·å–ä¸€å¼ å›¾åƒï¼Œä¸”åªèƒ½ä¾é è·å¾—çš„å›¾åƒæ•°æ®è®¡ç®—ç¯å¢ƒç‰©ä½“çš„æ–¹å‘ä¿¡æ¯ï¼Œæ— æ³•ç›´æ¥è·å¾—å¯é çš„æ·±åº¦ä¿¡æ¯ï¼Œä»è€Œåˆå§‹åœ°å›¾åˆ›å»ºåŠç‰¹å¾ç‚¹çš„æ·±åº¦æ¢å¤éƒ½æ¯”è¾ƒå›°éš¾ã€‚</p>
<p>æ­¤å¤–ï¼Œå°ºåº¦ä¸ç¡®å®šæ€§æ˜¯å•ç›®SLAMçš„ä¸»è¦ç‰¹ç‚¹ï¼Œå®ƒæ˜¯ä¸»è¦çš„è¯¯å·®æºä¹‹ä¸€ï¼Œä½†æ˜¯æ­£æ˜¯å°ºåº¦ä¸ç¡®å®šæ€§æ‰ä½¿å¾—å•ç›®SLAMèƒ½å¤Ÿåœ¨å¤§å°ºåº¦å’Œå°å°ºåº¦ç¯å¢ƒä¹‹é—´è¿›è¡Œè‡ªç”±è½¬æ¢ã€‚</p>
<h3 id="åŒç›®è§†è§‰SLAM"><a href="#åŒç›®è§†è§‰SLAM" class="headerlink" title="åŒç›®è§†è§‰SLAM"></a>åŒç›®è§†è§‰SLAM</h3><h4 id="ä¼˜ç‚¹-1"><a href="#ä¼˜ç‚¹-1" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>åŒç›®è§†è§‰SLAMåˆ©ç”¨å¤–æçº¿å‡ ä½•çº¦æŸçš„åŸç†å»åŒ¹é…å·¦å³ä¸¤ä¸ªç›¸æœºçš„ç‰¹å¾ï¼Œä»è€Œèƒ½å¤Ÿåœ¨å½“å‰å¸§é€Ÿç‡çš„æ¡ä»¶ä¸‹ç›´æ¥æå–å®Œæ•´çš„ç‰¹å¾æ•°æ®ï¼Œå› è€Œåº”ç”¨æ¯”è¾ƒå¹¿æ³›ï¼Œå®ƒç›´æ¥è§£å†³äº†ç³»ç»Ÿåœ°å›¾ç‰¹å¾çš„åˆå§‹åŒ–é—®é¢˜ã€‚</p>
<h4 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>ä½†æ˜¯ç³»ç»Ÿè®¾è®¡æ¯”è¾ƒå¤æ‚ï¼Œç³»ç»Ÿæˆæœ¬æ¯”è¾ƒé«˜ï¼Œä¸”å®ƒçš„è§†è§’èŒƒå›´å—åˆ°ä¸€å®šé™åˆ¶ï¼Œä¸èƒ½å¤Ÿè·å–è¿œå¤„çš„åœºæ™¯ï¼Œä»è€Œåªèƒ½åœ¨ä¸€å®šçš„å°ºåº¦èŒƒå›´å†…è¿›è¡Œå¯é çš„æµ‹é‡ï¼Œä»è€Œç¼ºä¹çµæ´»æ€§ã€‚</p>
<h3 id="RGBD-SLAM"><a href="#RGBD-SLAM" class="headerlink" title="RGBD SLAM"></a>RGBD SLAM</h3><h4 id="ä¼˜ç‚¹-2"><a href="#ä¼˜ç‚¹-2" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>æ·±åº¦ç›¸æœºåœ¨è·å¾—å½©è‰²å›¾åƒçš„åŒæ—¶è·å¾—æ·±åº¦å›¾åƒï¼Œä»è€Œæ–¹ä¾¿è·å¾—æ·±åº¦ä¿¡æ¯ï¼Œä¸”èƒ½å¤Ÿè·å¾—ç¨ å¯†çš„åœ°å›¾</p>
<h4 id="ç¼ºç‚¹-2"><a href="#ç¼ºç‚¹-2" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>æˆæœ¬é«˜ï¼Œä½“ç§¯å¤§ï¼Œæœ‰æ•ˆæ¢æµ‹è·ç¦»å¤ªçŸ­ï¼Œä»è€Œå¯åº”ç”¨ç¯å¢ƒå¾ˆæœ‰é™ã€‚</p>
<h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h2><p>ä¸ºäº†å¼¥è¡¥è§†è§‰ä¿¡æ¯çš„ä¸è¶³ï¼Œè§†è§‰ä¼ æ„Ÿå™¨å¯ä»¥ä¸æƒ¯æ€§ä¼ æ„Ÿå™¨ï¼ˆIMUï¼‰ã€æ¿€å…‰ç­‰ä¼ æ„Ÿå™¨èåˆï¼Œé€šè¿‡ä¼ æ„Ÿå™¨ä¹‹é—´çš„äº’è¡¥è·å¾—æ›´åŠ ç†æƒ³çš„ç»“æœã€‚æ­¤å¤–ï¼Œä¸ºäº†èƒ½åœ¨å®é™…ç¯å¢ƒä¸­è¿›è¡Œåº”ç”¨ï¼ŒSLAMçš„é²æ£’æ€§éœ€è¦å¾ˆé«˜ï¼Œä»è€Œè¶³å¤Ÿåœ¨å„ç§å¤æ‚ç¯å¢ƒä¸‹è¿›è¡Œå‡†ç¡®çš„å¤„ç†ï¼ŒSLAMçš„è®¡ç®—å¤æ‚åº¦ä¹Ÿä¸èƒ½å¤ªé«˜ï¼Œä»è€Œè¾¾åˆ°å®æ—¶æ•ˆæœã€‚</p>
]]></content>
      <categories>
        <category>æ–‡çŒ®é˜…è¯»</category>
      </categories>
      <tags>
        <tag>æ–‡çŒ®é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title>PAT1002_å†™å‡ºè¿™ä¸ªæ•°</title>
    <url>/posts/29713.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>è¯»å…¥ä¸€ä¸ªæ­£æ•´æ•° <em>n</em>ï¼Œè®¡ç®—å…¶å„ä½æ•°å­—ä¹‹å’Œï¼Œç”¨æ±‰è¯­æ‹¼éŸ³å†™å‡ºå’Œçš„æ¯ä¸€ä½æ•°å­—ã€‚</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>è¾“å…¥æ ¼å¼ï¼š</p>
<blockquote>
<p> æ¯ä¸ªæµ‹è¯•è¾“å…¥åŒ…å« 1 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå³ç»™å‡ºè‡ªç„¶æ•° <em>n</em> çš„å€¼ã€‚è¿™é‡Œä¿è¯ <em>n</em> å°äº 10100ã€‚</p>
</blockquote>
<p>è¾“å‡ºæ ¼å¼ï¼š</p>
<blockquote>
<p> åœ¨ä¸€è¡Œå†…è¾“å‡º <em>n</em> çš„å„ä½æ•°å­—ä¹‹å’Œçš„æ¯ä¸€ä½ï¼Œæ‹¼éŸ³æ•°å­—é—´æœ‰ 1 ç©ºæ ¼ï¼Œä½†ä¸€è¡Œä¸­æœ€åä¸€ä¸ªæ‹¼éŸ³æ•°å­—åæ²¡æœ‰ç©ºæ ¼ã€‚</p>
</blockquote>
<p>è¾“å…¥æ ·ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1234567890987654321123456789</span><br><span class="line">ç»“å°¾æ— ç©ºè¡Œ</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºæ ·ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yi san wu</span><br><span class="line">ç»“å°¾æ— ç©ºè¡Œ</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;string&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">order</span><span class="params">(<span class="keyword">int</span> num)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n.<span class="built_in">length</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x = (<span class="keyword">int</span>)n[i] - <span class="number">48</span>;</span><br><span class="line">        sum = x + sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;sum= &quot;</span> &lt;&lt; sum &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">order</span>(sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœ n/10==0ï¼Œåˆ™è¾“å‡ºn</span></span><br><span class="line"><span class="comment">// å¦åˆ™ å…ˆå¯¹n/10è¿›è¡Œç›¸åŒå¤„ç†ï¼Œä¹‹åè¾“å‡ºn%10</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">order</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line">    string c_num[<span class="number">10</span>]=&#123;<span class="string">&quot;ling&quot;</span>,<span class="string">&quot;yi&quot;</span>,<span class="string">&quot;er&quot;</span>,<span class="string">&quot;san&quot;</span>,<span class="string">&quot;si&quot;</span>,<span class="string">&quot;wu&quot;</span>,<span class="string">&quot;liu&quot;</span>,<span class="string">&quot;qi&quot;</span>,<span class="string">&quot;ba&quot;</span>,<span class="string">&quot;jiu&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(num&gt;<span class="number">10</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">order</span>(num/<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">int</span> num1 = num%<span class="number">10</span>;</span><br><span class="line">        cout &lt;&lt; c_num[num1]&lt;&lt; <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; c_num[num] &lt;&lt; <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åˆ·é¢˜</category>
      </categories>
      <tags>
        <tag>åˆ·é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>PAT1001_å®³æ­»äººä¸å¿å‘½çš„(3n+1)çŒœæƒ³</title>
    <url>/posts/32148.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>å¡æ‹‰å…¹(Callatz)çŒœæƒ³ï¼šå¯¹ä»»ä½•ä¸€ä¸ªæ­£æ•´æ•° nï¼Œå¦‚æœå®ƒæ˜¯å¶æ•°ï¼Œé‚£ä¹ˆæŠŠå®ƒç æ‰ä¸€åŠï¼›å¦‚æœå®ƒæ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆæŠŠ (3n+1) ç æ‰ä¸€åŠã€‚è¿™æ ·ä¸€ç›´åå¤ç ä¸‹å»ï¼Œæœ€åä¸€å®šåœ¨æŸä¸€æ­¥å¾—åˆ° n=1ã€‚å¡æ‹‰å…¹åœ¨ 1950 å¹´çš„ä¸–ç•Œæ•°å­¦å®¶å¤§ä¼šä¸Šå…¬å¸ƒäº†è¿™ä¸ªçŒœæƒ³ï¼Œä¼ è¯´å½“æ—¶è€¶é²å¤§å­¦å¸ˆç”Ÿé½åŠ¨å‘˜ï¼Œæ‹¼å‘½æƒ³è¯æ˜è¿™ä¸ªè²Œä¼¼å¾ˆå‚»å¾ˆå¤©çœŸçš„å‘½é¢˜ï¼Œç»“æœé—¹å¾—å­¦ç”Ÿä»¬æ— å¿ƒå­¦ä¸šï¼Œä¸€å¿ƒåªè¯ (3n+1)ï¼Œä»¥è‡³äºæœ‰äººè¯´è¿™æ˜¯ä¸€ä¸ªé˜´è°‹ï¼Œå¡æ‹‰å…¹æ˜¯åœ¨è“„æ„å»¶ç¼“ç¾å›½æ•°å­¦ç•Œæ•™å­¦ä¸ç§‘ç ”çš„è¿›å±•â€¦â€¦</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>
<span id="more"></span>
<p>æˆ‘ä»¬ä»Šå¤©çš„é¢˜ç›®ä¸æ˜¯è¯æ˜å¡æ‹‰å…¹çŒœæƒ³ï¼Œè€Œæ˜¯å¯¹ç»™å®šçš„ä»»ä¸€ä¸è¶…è¿‡ 1000 çš„æ­£æ•´æ•° nï¼Œç®€å•åœ°æ•°ä¸€ä¸‹ï¼Œéœ€è¦å¤šå°‘æ­¥ï¼ˆç å‡ ä¸‹ï¼‰æ‰èƒ½å¾—åˆ° n=1ï¼Ÿ<br>è¾“å…¥æ ¼å¼ï¼š</p>
<blockquote>
<p>æ¯ä¸ªæµ‹è¯•è¾“å…¥åŒ…å« 1 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå³ç»™å‡ºæ­£æ•´æ•° n çš„å€¼ã€‚</p>
</blockquote>
<p>è¾“å‡ºæ ¼å¼ï¼š</p>
<blockquote>
<p>è¾“å‡ºä» n è®¡ç®—åˆ° 1 éœ€è¦çš„æ­¥æ•°ã€‚</p>
</blockquote>
<p>è¾“å…¥æ ·ä¾‹ï¼š</p>
<blockquote>
<p>3<br>  ç»“å°¾æ— ç©ºè¡Œ</p>
</blockquote>
<p>è¾“å‡ºæ ·ä¾‹ï¼š</p>
<blockquote>
<p>5<br>  ç»“å°¾æ— ç©ºè¡Œ<br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judgeParity</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deal</span><span class="params">(<span class="keyword">bool</span> flag,<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n!=<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="built_in">judgeParity</span>(n);</span><br><span class="line">        n = <span class="built_in">deal</span>(flag,n);</span><br><span class="line">        ++count;</span><br><span class="line">    &#125;  </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;count = &quot;</span> &lt;&lt; count &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judgeParity</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span>    </span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deal</span><span class="params">(<span class="keyword">bool</span> flag,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (flag)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        n = n/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        n = (<span class="number">3</span>*n+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div class="note success"><p>åˆå­¦,å¾…è¿›ä¸€æ­¥ä¼˜åŒ–......</p></div>
</blockquote>
]]></content>
      <categories>
        <category>åˆ·é¢˜</category>
      </categories>
      <tags>
        <tag>åˆ·é¢˜</tag>
      </tags>
  </entry>
</search>
